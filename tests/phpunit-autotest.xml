<?xml version="1.0" encoding="utf-8"?>
<!--
 - SPDX-FileCopyrightText: 2016-2024 Nextcloud GmbH and Nextcloud contributors
 - SPDX-FileCopyrightText: 2016 ownCloud, Inc.
 - SPDX-License-Identifier: AGPL-3.0-only
-->
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 bootstrap="bootstrap.php"
		 timeoutForSmallTests="900"
		 timeoutForMediumTests="900"
		 timeoutForLargeTests="900"
		 cacheDirectory=".phpunit.cache"
		 xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/11.5/phpunit.xsd">
	<!--
		<testsuite>: defines which test files PHPUnit will run (test discovery)
		Should point to actual test locations, if possible, for efficiency and clarity.
	-->
	<testsuite name="Nextcloud Server">									<!-- All paths are relative to the location of this xml file -->
		<directory>lib/</directory>										<!-- /tests/lib/ -->
		<directory>Core/</directory>									<!-- /tests/Core/ -->
		<directory>../apps/*/tests</directory>							<!-- /apps/<app>/tests/ for all apps -->
		<exclude>../apps/user_ldap/tests/Integration</exclude>			<!-- /apps/user_ldap/tests/Integration (excluded) -->
	</testsuite>
	<!--
		<source>: controls what source code is measured for coverage
		Should exclude tests, 3rd-party, composer, and vendor code.
	-->
	<source>
		<include>
			<directory>..</directory>									<!-- / (repo root) -->
		</include>
		<exclude>
			<directory>../3rdparty</directory>							<!-- /3rdparty/ -->
			<directory>../apps/*/composer</directory>					<!-- /apps/*/composer -->
			<directory>../apps/*/tests</directory>						<!-- /apps/*/tests (avoid double-counting apps' tests for coverage) -->
			<directory>../apps/files_external/3rdparty</directory>		<!-- /apps/files_external/3rdparty -->
			<directory>../build</directory>								<!-- /build/ -->
			<directory>../lib/composer</directory>						<!-- /lib/composer -->
			<directory>../tests</directory>								<!-- /tests/ (excludes tests outside explicit test suite) -->
			<directory>../vendor-bin</directory>						<!-- /vendor-bin/ -->
		</exclude>
	</source>
</phpunit>
