(()=>{var e,n,r,o={7815(t,e,n){"use strict";n.d(e,{K:()=>o});var r=n(90176);function o(t){try{const[e]=t.multistatus.response,{propstat:{prop:{"quota-used-bytes":n,"quota-available-bytes":o}}}=e;return void 0!==n&&void 0!==o?{used:parseInt(String(n),10),available:(0,r.i5)(o)}:null}catch(t){}return null}},10396(e,n,r){"use strict";r.d(n,{A:()=>u});var o=r(85168),s=r(10810),a=r(96689),i=r(80486),c=r(10767),l=r(70395),d=r(36564);const u={props:{id:{type:Number,default:null},message:{type:String,default:""},resourceId:{type:[String,Number],required:!0},resourceType:{type:String,default:"files"}},data:()=>({deleted:!1,editing:!1,loading:!1}),computed:{...(0,s.n2)(d.h)},methods:{onEdit(){this.editing=!0},onEditCancel(){this.editing=!1,this.updateLocalMessage(this.message)},async onEditComment(e){this.loading=!0;try{await(0,c.A)(this.resourceType,this.resourceId,this.id,e),a.A.debug("Comment edited",{resourceType:this.resourceType,resourceId:this.resourceId,id:this.id,message:e}),this.$emit("update:message",e),this.editing=!1}catch(e){(0,o.Qg)(t("comments","An error occurred while trying to edit the comment")),a.A.error("An error occurred while trying to edit the comment",{error:e})}finally{this.loading=!1}},onDeleteWithUndo(){this.$emit("delete"),this.deleted=!0,this.deletedCommentLimboStore.addId(this.id);const e=setTimeout(this.onDelete,o.Br);(0,o._h)(t("comments","Comment deleted"),()=>{clearTimeout(e),this.deleted=!1,this.deletedCommentLimboStore.removeId(this.id)})},async onDelete(){try{await(0,i.A)(this.resourceType,this.resourceId,this.id),a.A.debug("Comment deleted",{resourceType:this.resourceType,resourceId:this.resourceId,id:this.id}),this.$emit("delete",this.id)}catch(e){(0,o.Qg)(t("comments","An error occurred while trying to delete the comment")),a.A.error("An error occurred while trying to delete the comment",{error:e}),this.deleted=!1,this.deletedCommentLimboStore.removeId(this.id)}},async onNewComment(e){this.loading=!0;try{const t=await(0,l.A)(this.resourceType,this.resourceId,e);a.A.debug("New comment posted",{resourceType:this.resourceType,resourceId:this.resourceId,newComment:t}),this.$emit("new",t),this.$emit("update:message",""),this.localMessage=""}catch(e){(0,o.Qg)(t("comments","An error occurred while trying to create the comment")),a.A.error("An error occurred while trying to create the comment",{error:e})}finally{this.loading=!1}}}}},10524(t,e,n){"use strict";n.d(e,{p:()=>i});var r=n(85394),o=n(36236),s=n(89062),a=n(29999);async function i(t,e,n={}){const i=(0,s.H)({url:(0,r.oq)(t.remoteURL,(0,o.O0)(e)),method:"OPTIONS"},t,n),c=await(0,s.E)(i,t);try{(0,a.HT)(t,c)}catch(t){throw t}return{compliance:(c.headers.get("DAV")??"").split(",").map(t=>t.trim()),server:c.headers.get("Server")??""}}},10767(t,e,n){"use strict";n.d(e,{A:()=>o});var r=n(35550);async function o(t,e,n,o){const s=["",t,e,n].join("/");return await r.A.customRequest(s,{method:"PROPPATCH",data:`<?xml version="1.0"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:message>${o}</oc:message>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`})}},11083(t,e,n){var r=n(11568),o=n(88835),s=t.exports;for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);function i(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}s.request=function(t,e){return t=i(t),r.request.call(this,t,e)},s.get=function(t,e){return t=i(t),r.get.call(this,t,e)}},11568(t,e,n){var r=n(55537),o=n(6917),s=n(57510),a=n(86866),i=n(88835),c=e;c.request=function(t,e){t="string"==typeof t?i.parse(t):s(t);var n=-1===globalThis.location.protocol.search(/^https?:$/)?"http:":"",o=t.protocol||n,a=t.hostname||t.host,c=t.port,l=t.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),t.url=(a?o+"//"+a:"")+(c?":"+c:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var d=new r(t);return e&&d.on("response",e),d},c.get=function(t,e){var n=c.request(t,e);return n.end(),n},c.ClientRequest=r,c.IncomingMessage=o.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=a,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},15340(){},17003(t,e,n){"use strict";n.d(e,{e:()=>o});var r=n(63814);function o(){return(0,r.dC)("dav/comments")}},17601(t,e,n){"use strict";n.d(e,{G:()=>a});var r=n(93028),o=n(11163),s=n(78049);class a extends Error{constructor(t,e){const n=[...arguments],{options:r,shortMessage:a}=(0,s.W)(n);let i=a;if(r.cause&&(i=`${i}: ${r.cause.message}`),super(i),this.message=i,r.name&&"string"==typeof r.name?this.name=r.name:this.name=(0,o.z)(),r.cause&&Object.defineProperty(this,"_cause",{value:r.cause}),Object.defineProperty(this,"_info",{value:{}}),r.info&&"object"==typeof r.info&&Object.assign(this._info,r.info),Error.captureStackTrace){const t=r.constructorOpt||this.constructor;Error.captureStackTrace(this,t)}}static cause(t){return(0,r.t)(t),t._cause&&(0,r.b)(t._cause)?t._cause:null}static fullStack(t){(0,r.t)(t);const e=a.cause(t);return e?`${t.stack}\ncaused by: ${a.fullStack(e)}`:t.stack??""}static info(t){(0,r.t)(t);const e={},n=a.cause(t);return n&&Object.assign(e,a.info(n)),t._info&&Object.assign(e,t._info),e}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}}},17658(t,e,n){"use strict";n.d(e,{F:()=>p,b:()=>h});var r=n(42294),o=n(85394),s=n(36236),a=n(57221),i=n(22921),c=n(89062),l=n(29999),d=n(38374),u=n(62045).hp;const m=t=>t;async function p(t,e,n={}){const{format:a="binary"}=n;if("binary"!==a&&"text"!==a)throw new r.GU({info:{code:d.O4.InvalidOutputFormat}},`Invalid output format: ${a}`);return"text"===a?async function(t,e,n={}){const r=(0,c.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[m]},t,n),a=await(0,c.E)(r,t);(0,l.HT)(t,a);const i=await a.text();return(0,l.hq)(a,i,n.details)}(t,e,n):async function(t,e,n={}){const r=(0,c.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"GET"},t,n),a=await(0,c.E)(r,t);let d;return(0,l.HT)(t,a),d=(0,i.HZ)()||(0,i.lV)()?await a.arrayBuffer():u.from(await a.arrayBuffer()),(0,l.hq)(a,d,n.details)}(t,e,n)}function h(t,e){let n=(0,o.oq)(t.remoteURL,(0,s.O0)(e));const i=/^https:/i.test(n)?"https":"http";switch(t.authType){case d.hT.None:break;case d.hT.Password:{const e=t.headers.Authorization.replace(/^Basic /i,"").trim(),r=(0,a.Ey)(e);n=n.replace(/^https?:\/\//,`${i}://${r}@`);break}default:throw new r.GU({info:{code:d.O4.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${t.authType}`)}return n}},19396(t,e,n){"use strict";n.d(e,{V:()=>o});var r=n(57221);function o(t,e){return`Basic ${(0,r.nk)(`${t}:${e}`)}`}},22408(t,e,n){"use strict";n.d(e,{A:()=>i});var r=n(71354),o=n.n(r),s=n(76314),a=n.n(s)()(o());a.push([t.id,".comment[data-v-70317f94]{display:flex;gap:8px;padding:5px 10px}.comment__side[data-v-70317f94]{display:flex;align-items:flex-start;padding-top:6px}.comment__body[data-v-70317f94]{display:flex;flex-grow:1;flex-direction:column;container-type:inline-size}.comment__header[data-v-70317f94]{display:flex;align-items:center;min-height:44px}.comment__actions[data-v-70317f94]{margin-inline-start:10px !important}.comment__author[data-v-70317f94]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:var(--color-text-maxcontrast)}.comment_loading[data-v-70317f94],.comment__timestamp[data-v-70317f94]{margin-inline-start:auto;text-align:end;white-space:nowrap;color:var(--color-text-maxcontrast)}.comment__editor-group[data-v-70317f94]{position:relative}.comment__editor-description[data-v-70317f94]{color:var(--color-text-maxcontrast);padding-block:var(--default-grid-baseline)}.comment__submit[data-v-70317f94]{position:absolute !important;bottom:5px;inset-inline-end:0}.comment__message[data-v-70317f94]{white-space:pre-wrap;word-break:normal;max-height:200px;overflow:auto;scrollbar-gutter:stable;scrollbar-width:thin;margin-top:-6px}.comment__message--expanded[data-v-70317f94]{max-height:none;overflow:visible}.comment__message[data-v-70317f94] img{max-width:100%;height:auto}.rich-contenteditable__input[data-v-70317f94]{min-height:44px;margin:0;padding:10px}","",{version:3,sources:["webpack://./apps/comments/src/components/Comment.vue"],names:[],mappings:"AAKA,0BACC,YAAA,CACA,OAAA,CACA,gBAAA,CAEA,gCACC,YAAA,CACA,sBAAA,CACA,eAAA,CAGD,gCACC,YAAA,CACA,WAAA,CACA,qBAAA,CACA,0BAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAGD,mCACC,mCAAA,CAGD,kCACC,eAAA,CACA,kBAAA,CACA,sBAAA,CACA,mCAAA,CAGD,uEAEC,wBAAA,CACA,cAAA,CACA,kBAAA,CACA,mCAAA,CAGD,wCACC,iBAAA,CAGD,8CACC,mCAAA,CACA,0CAAA,CAGD,kCACC,4BAAA,CACA,UAAA,CACA,kBAAA,CAGD,mCACC,oBAAA,CACA,iBAAA,CACA,gBAAA,CACA,aAAA,CACA,uBAAA,CACA,oBAAA,CACA,eAAA,CACA,6CACC,eAAA,CACA,gBAAA,CAED,uCACC,cAAA,CACA,WAAA,CAKH,8CACC,eAAA,CACA,QAAA,CACA,YAlFiB",sourcesContent:['\n@use "sass:math";\n\n$comment-padding: 10px;\n\n.comment {\n\tdisplay: flex;\n\tgap: 8px;\n\tpadding: 5px $comment-padding;\n\n\t&__side {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tpadding-top: 6px;\n\t}\n\n\t&__body {\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t\tflex-direction: column;\n\t\tcontainer-type: inline-size;\n\t}\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmin-height: 44px;\n\t}\n\n\t&__actions {\n\t\tmargin-inline-start: $comment-padding !important;\n\t}\n\n\t&__author {\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&_loading,\n\t&__timestamp {\n\t\tmargin-inline-start: auto;\n\t\ttext-align: end;\n\t\twhite-space: nowrap;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__editor-group {\n\t\tposition: relative;\n\t}\n\n\t&__editor-description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-block: var(--default-grid-baseline);\n\t}\n\n\t&__submit {\n\t\tposition: absolute !important;\n\t\tbottom: 5px;\n\t\tinset-inline-end: 0;\n\t}\n\n\t&__message {\n\t\twhite-space: pre-wrap;\n\t\tword-break: normal;\n\t\tmax-height: 200px;\n\t\toverflow: auto;\n\t\tscrollbar-gutter: stable;\n\t\tscrollbar-width: thin;\n\t\tmargin-top: -6px;\n\t\t&--expanded {\n\t\t\tmax-height: none;\n\t\t\toverflow: visible;\n\t\t}\n\t\t:deep(img) {\n\t\t\tmax-width: 100%;\n\t\t\theight: auto;\n\t\t}\n\t}\n}\n\n.rich-contenteditable__input {\n\tmin-height: 44px;\n\tmargin: 0;\n\tpadding: $comment-padding;\n}\n\n'],sourceRoot:""}]);const i=a},27562(t,e,n){"use strict";n.d(e,{A:()=>o,o:()=>a});var r=n(14113);function o(t){return new r.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(s({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:t}}},"d"))}function s(t,e){const n={...t};for(const t in n)n.hasOwnProperty(t)&&(n[t]&&"object"==typeof n[t]&&-1===t.indexOf(":")?(n[`${e}:${t}`]=s(n[t],e),delete n[t]):!1===/^@_/.test(t)&&(n[`${e}:${t}`]=n[t],delete n[t]));return n}function a(t){return new r.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(t)}},28161(t,e,n){"use strict";n.d(e,{c:()=>c});var r=n(85394),o=n(36236),s=n(89062),a=n(29999),i=n(84830);async function c(t,e,n={}){if(!0===n.recursive)return async function(t,e,n={}){const r=(0,o.xi)((0,o.qb)(e));r.sort((t,e)=>t.length>e.length?1:e.length>t.length?-1:0);let s=!1;for(const o of r)if(s)await c(t,o,{...n,recursive:!1});else try{if("directory"!==(await(0,i.z)(t,o)).type)throw new Error(`Path includes a file: ${e}`)}catch(e){if(404!==e.status)throw e;s=!0,await c(t,o,{...n,recursive:!1})}}(t,e,n);const l=(0,s.H)({url:(0,r.oq)(t.remoteURL,(u=(0,o.O0)(e),u.endsWith("/")?u:u+"/")),method:"MKCOL"},t,n),d=await(0,s.E)(l,t);var u;(0,a.HT)(t,d)}},29369(t,e,n){"use strict";n.d(e,{A:()=>y});var r=n(21777),o=n(53334),s=n(10810),a=n(57505),i=n(24764),c=n(15502),l=n(41944),d=n(74095),u=n(4604),m=n(88289),p=n(77764),h=n(33691),f=n(66001),A=n(16502),g=n(37793),E=n(10396),C=n(36564);const y={name:"Comment",components:{IconArrowRight:h.A,IconClose:f.A,IconTrashCanOutline:g.A,IconPencilOutline:A.A,NcActionButton:a.A,NcActions:i.A,NcActionSeparator:c.A,NcAvatar:l.A,NcButton:d.A,NcDateTime:u.A,NcLoadingIcon:m.A,NcRichContenteditable:()=>Promise.all([n.e(4208),n.e(4818),n.e(5258)]).then(n.bind(n,95528)),NcRichText:()=>Promise.all([n.e(4208),n.e(4818),n.e(4508)]).then(n.bind(n,64508))},mixins:[E.A],inheritAttrs:!1,props:{actorDisplayName:{type:String,required:!0},actorId:{type:String,required:!0},creationDateTime:{type:String,default:null},editor:{type:Boolean,default:!1},autoComplete:{type:Function,required:!0},userData:{type:Object,default:()=>({})},tag:{type:String,default:"div"}},data:()=>({expanded:!1,localMessage:"",submitted:!1}),computed:{...(0,s.n2)(C.h),isOwnComment(){return(0,r.HW)().uid===this.actorId},richContent(){const t={};let e=this.localMessage;return Object.keys(this.userData).forEach((n,r)=>{const o=`mention-${r}`,s=new RegExp(`@${n}|@"${n}"`,"g");e=e.replace(s,`{${o}}`),t[o]={component:p.A,props:{user:n,displayName:this.userData[n].label,primary:this.userData[n].primary}}}),{mentions:t,message:e}},isEmptyMessage(){return!this.localMessage||""===this.localMessage.trim()},timestamp(){return Date.parse(this.creationDateTime)},isLimbo(){return this.deletedCommentLimboStore.checkForId(this.id)}},watch:{message(t){this.updateLocalMessage(t)}},beforeMount(){this.updateLocalMessage(this.message)},methods:{t:o.Tl,updateLocalMessage(t){this.localMessage=t.toString(),this.submitted=!1},onSubmit(){if(""!==this.localMessage.trim())return this.editor?(this.onNewComment(this.localMessage.trim()),void this.$nextTick(()=>{this.$refs.editor.$el.focus()})):void this.onEditComment(this.localMessage.trim())},onExpand(){this.expanded=!0}}}},30047(t,e,n){"use strict";n.d(e,{g:()=>p,w:()=>h});var r=n(42294),o=n(88310),s=n(57221),a=n(85394),i=n(36236),c=n(71922),l=n(22921),d=n(89062),u=n(29999),m=n(38374);async function p(t,e,n,r={}){const{contentLength:s=!0,overwrite:m=!0}=r,p={"Content-Type":"application/octet-stream"};!(0,l.HZ)()&&!(0,l.lV)()&&void 0!==o&&void 0!==o?.Readable&&n instanceof o.Readable||!1===s||(p["Content-Length"]="number"==typeof s?`${s}`:`${(0,c.J)(n)}`),m||(p["If-None-Match"]="*");const h=(0,d.H)({url:(0,a.oq)(t.remoteURL,(0,i.O0)(e)),method:"PUT",headers:p,data:n},t,r),f=await(0,d.E)(h,t);try{(0,u.HT)(t,f)}catch(t){const e=t;if(412!==e.status||m)throw e;return!1}return!0}function h(t,e){let n=`${(0,a.oq)(t.remoteURL,(0,i.O0)(e))}?Content-Type=application/octet-stream`;const o=/^https:/i.test(n)?"https":"http";switch(t.authType){case m.hT.None:break;case m.hT.Password:{const e=t.headers.Authorization.replace(/^Basic /i,"").trim(),r=(0,s.Ey)(e);n=n.replace(/^https?:\/\//,`${o}://${r}@`);break}default:throw new r.GU({info:{code:m.O4.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${t.authType}`)}return n}},31538(t,e,n){"use strict";n.d(e,{A:()=>i});var r=n(21777),o=n(19051),s=n(81222),a=n(63814);const i=(0,n(85471).pM)({props:{resourceId:{type:Number,required:!0},resourceType:{type:String,default:"files"}},data(){return{editorData:{actorDisplayName:(0,r.HW)().displayName,actorId:(0,r.HW)().uid,key:"editor"},userData:{},currentResourceId:this.resourceId}},methods:{async autoComplete(t,e){const{data:n}=await o.Ay.get((0,a.KT)("core/autocomplete/get"),{params:{search:t,itemType:this.resourceType,itemId:this.currentResourceId,sorter:"commenters|share-recipients",limit:(0,s.C)("comments","maxAutoCompleteResults")}});return n.ocs.data.forEach(t=>{this.userData[t.id]=t}),e(Object.values(this.userData))},genMentionsData(t){return Object.values(t).flat().forEach(t=>{this.userData[t.mentionId]={icon:"icon-user",id:t.mentionId,label:t.mentionDisplayName,source:"users",primary:(0,r.HW)()?.uid===t.mentionId}}),this.userData}}})},35550(t,e,n){"use strict";n.d(e,{A:()=>c});var r=n(21777),o=n(82415),s=n(17003);const a=(0,o.UU)((0,s.e)());function i(t){a.setHeaders({"X-Requested-With":"XMLHttpRequest",requesttoken:t??""})}(0,r.zo)(i),i((0,r.do)());const c=a},36564(t,e,n){"use strict";n.d(e,{h:()=>r});const r=(0,n(10810).nY)("deletedCommentLimbo",{state:()=>({idsInLimbo:[]}),actions:{addId(t){this.idsInLimbo.push(t)},removeId(t){const e=this.idsInLimbo.indexOf(t);e>-1&&this.idsInLimbo.splice(e,1)},checkForId(t){return this.idsInLimbo.includes(t)}}})},36942(t,e,n){"use strict";n.d(e,{e:()=>c});var r=n(42294),o=n(90036),s=n(19396),a=n(89793),i=n(38374);function c(t,e,n,c,l){switch(t.authType){case i.hT.Auto:e&&n&&(t.headers.Authorization=(0,s.V)(e,n));break;case i.hT.Digest:t.digest=(0,o.C8)(e,n,l);break;case i.hT.None:break;case i.hT.Password:t.headers.Authorization=(0,s.V)(e,n);break;case i.hT.Token:t.headers.Authorization=(0,a.O)(c);break;default:throw new r.GU({info:{code:i.O4.InvalidAuthType}},`Invalid auth type: ${t.authType}`)}}},39299(t,e,n){"use strict";n.d(e,{P:()=>i});var r=n(88310),o=n(47397),s=n(53850),a=n(22921);function i(t){if(!(0,a.HZ)()&&!(0,a.lV)()&&t instanceof r.Readable)return[t,{}];if("string"==typeof t)return[t,{}];if((0,s.P)(t))return[t,{}];if((0,o.m)(t))return[t,{}];if(t&&"object"==typeof t)return[JSON.stringify(t),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: "+typeof t)}},39615(t,e,n){"use strict";n.d(e,{T:()=>u,s:()=>d});var r=n(26602),o=n(85394),s=n(36236),a=n(27562),i=n(89062),c=n(29999);const l="Infinite, Second-4100000000";async function d(t,e,n={}){const{refreshToken:d,timeout:u=l}=n,m={Accept:"text/plain,application/xml",Timeout:u};d&&(m.If=d);const p=(0,i.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"LOCK",headers:m,data:(0,a.A)(t.contactHref)},t,n),h=await(0,i.E)(p,t);(0,c.HT)(t,h);const f=await h.text(),A=(0,a.o)(f),g=r.get(A,"prop.lockdiscovery.activelock.locktoken.href"),E=r.get(A,"prop.lockdiscovery.activelock.timeout");if(!g)throw(0,c.YQ)(h,"No lock token received: ");return{token:g,serverTimeout:E}}async function u(t,e,n,r={}){const a=(0,i.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"UNLOCK",headers:{"Lock-Token":n}},t,r),l=await(0,i.E)(a,t);if((0,c.HT)(t,l),204!==l.status&&200!==l.status)throw(0,c.YQ)(l)}},42634(){},46270(t,e,n){"use strict";n(70247)},47397(t,e,n){"use strict";n.d(e,{m:()=>s});const r="function"==typeof ArrayBuffer,{toString:o}=Object.prototype;function s(t){return r&&(t instanceof ArrayBuffer||"[object ArrayBuffer]"===o.call(t))}},47790(){},50335(t,e,n){"use strict";n.d(e,{m:()=>i});var r=n(85394),o=n(36236),s=n(89062),a=n(29999);async function i(t,e,n,i={}){const c=(0,s.H)({url:(0,r.oq)(t.remoteURL,(0,o.O0)(e)),method:"COPY",headers:{Destination:(0,r.oq)(t.remoteURL,(0,o.O0)(n)),Overwrite:!1===i.overwrite?"F":"T",Depth:i.shallow?"0":"infinity"}},t,i),l=await(0,s.E)(c,t);(0,a.HT)(t,l)}},51069(){},51195(t,e,n){"use strict";function r(t,e=1){const n=new DOMParser;let r=t;for(let t=0;t<e;t++)r=n.parseFromString(r,"text/html").documentElement.textContent;return r}n.d(e,{j:()=>r})},54416(t,e,n){"use strict";n.d(e,{A:()=>r});const r=n(29369).A},57221(t,e,n){"use strict";n.d(e,{Ey:()=>o,nk:()=>s});var r=n(85914);function o(t){return r.decode(t)}function s(t){return r.encode(t)}n(29602)},59169(){},61160(t,e,n){"use strict";var r=n(92063),o=n(73992),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function u(t){return(t||"").toString().replace(s,"")}var m=[["#","hash"],["?","query"],function(t,e){return f(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function h(t){var e,n=("undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).location||{},r={},o=typeof(t=t||n);if("blob:"===t.protocol)r=new g(unescape(t.pathname),{});else if("string"===o)for(e in r=new g(t,{}),p)delete r[e];else if("object"===o){for(e in t)e in p||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=i.test(t.href))}return r}function f(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function A(t,e){t=(t=u(t)).replace(a,""),e=e||{};var n,r=l.exec(t),o=r[1]?r[1].toLowerCase():"",s=!!r[2],i=!!r[3],c=0;return s?i?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):i?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===o?c>=2&&(n=n.slice(2)):f(o)?n=r[4]:o?s&&(n=n.slice(2)):c>=2&&f(e.protocol)&&(n=r[4]),{protocol:o,slashes:s||f(o),slashesCount:c,rest:n}}function g(t,e,n){if(t=(t=u(t)).replace(a,""),!(this instanceof g))return new g(t,e,n);var s,i,c,l,p,E,C=m.slice(),y=typeof e,v=this,w=0;for("object"!==y&&"string"!==y&&(n=e,e=null),n&&"function"!=typeof n&&(n=o.parse),s=!(i=A(t||"",e=h(e))).protocol&&!i.slashes,v.slashes=i.slashes||s&&e.slashes,v.protocol=i.protocol||e.protocol||"",t=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||d.test(t))||!i.slashes&&(i.protocol||i.slashesCount<2||!f(v.protocol)))&&(C[3]=[/(.*)/,"pathname"]);w<C.length;w++)"function"!=typeof(l=C[w])?(c=l[0],E=l[1],c!=c?v[E]=t:"string"==typeof c?~(p="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof l[2]?(v[E]=t.slice(0,p),t=t.slice(p+l[2])):(v[E]=t.slice(p),t=t.slice(0,p))):(p=c.exec(t))&&(v[E]=p[1],t=t.slice(0,p.index)),v[E]=v[E]||s&&l[3]&&e[E]||"",l[4]&&(v[E]=v[E].toLowerCase())):t=l(t,v);n&&(v.query=n(v.query)),s&&e.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==e.pathname)&&(v.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],s=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(v.pathname,e.pathname)),"/"!==v.pathname.charAt(0)&&f(v.protocol)&&(v.pathname="/"+v.pathname),r(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(~(p=v.auth.indexOf(":"))?(v.username=v.auth.slice(0,p),v.username=encodeURIComponent(decodeURIComponent(v.username)),v.password=v.auth.slice(p+1),v.password=encodeURIComponent(decodeURIComponent(v.password))):v.username=encodeURIComponent(decodeURIComponent(v.auth)),v.auth=v.password?v.username+":"+v.password:v.username),v.origin="file:"!==v.protocol&&f(v.protocol)&&v.host?v.protocol+"//"+v.host:"null",v.href=v.toString()}g.prototype={set:function(t,e,n){var s=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||o.parse)(e)),s[t]=e;break;case"port":s[t]=e,r(e,s.protocol)?e&&(s.host=s.hostname+":"+e):(s.host=s.hostname,s[t]="");break;case"hostname":s[t]=e,s.port&&(e+=":"+s.port),s.host=e;break;case"host":s[t]=e,c.test(e)?(e=e.split(":"),s.port=e.pop(),s.hostname=e.join(":")):(s.hostname=e,s.port="");break;case"protocol":s.protocol=e.toLowerCase(),s.slashes=!n;break;case"pathname":case"hash":if(e){var a="pathname"===t?"/":"#";s[t]=e.charAt(0)!==a?a+e:e}else s[t]=e;break;case"username":case"password":s[t]=encodeURIComponent(e);break;case"auth":var i=e.indexOf(":");~i?(s.username=e.slice(0,i),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=e.slice(i+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(e))}for(var l=0;l<m.length;l++){var d=m[l];d[4]&&(s[d[1]]=s[d[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&f(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,n=this,r=n.host,s=n.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var a=s+(n.protocol&&n.slashes||f(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&f(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(a+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(a+=n.hash),a}},g.extractProtocol=A,g.location=h,g.trimLeft=u,g.qs=o,t.exports=g},63779(){},64688(){},65463(t,e,n){"use strict";n.d(e,{A:()=>s});var r=n(70058),o=n(54416);n(46270);const s=(0,n(14486).A)(o.A,r.X,r.Y,!1,null,"70317f94",null).exports},66089(){},67691(t,e){"use strict";e.d=function(t){if(!t)return 0;for(var e=(t=t.toString()).length,n=t.length;n--;){var r=t.charCodeAt(n);56320<=r&&r<=57343&&n--,127<r&&r<=2047?e++:2047<r&&r<=65535&&(e+=2)}return e}},68476(t,e,n){"use strict";n.d(e,{V:()=>l,o:()=>d});var r=n(88310),o=n(85394),s=n(36236),a=n(89062),i=n(29999);const c=()=>{};function l(t,e,n={}){const c=new(0,r.PassThrough);return async function(t,e,n={}){const r={};if("object"==typeof n.range&&"number"==typeof n.range.start){let t=`bytes=${n.range.start}-`;"number"==typeof n.range.end&&(t=`${t}${n.range.end}`),r.Range=t}const c=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"GET",headers:r},t,n),l=await(0,a.E)(c,t);if((0,i.HT)(t,l),r.Range&&206!==l.status){const t=new Error(`Invalid response code for partial request: ${l.status}`);throw t.status=l.status,t}return n.callback&&setTimeout(()=>{n.callback(l)},0),l.body}(t,e,n).then(t=>{t.pipe(c)}).catch(t=>{c.emit("error",t)}),c}function d(t,e,n={},l=c){const d=new(0,r.PassThrough),u={};!1===n.overwrite&&(u["If-None-Match"]="*");const m=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"PUT",headers:u,data:d,maxRedirects:0},t,n);return(0,a.E)(m,t).then(e=>(0,i.HT)(t,e)).then(t=>{setTimeout(()=>{l(t)},0)}).catch(t=>{d.emit("error",t)}),d}},70058(t,e,n){"use strict";n.d(e,{X:()=>r,Y:()=>o});var r=function(){var t=this,e=t._self._c;return e(t.tag,{directives:[{name:"show",rawName:"v-show",value:!t.deleted&&!t.isLimbo,expression:"!deleted && !isLimbo"}],tag:"component",staticClass:"comment",class:{"comment--loading":t.loading}},[e("div",{staticClass:"comment__side"},[e("NcAvatar",{staticClass:"comment__avatar",attrs:{"display-name":t.actorDisplayName,user:t.actorId,size:32}})],1),t._v(" "),e("div",{staticClass:"comment__body"},[e("div",{staticClass:"comment__header"},[e("span",{staticClass:"comment__author"},[t._v(t._s(t.actorDisplayName))]),t._v(" "),t.isOwnComment&&t.id&&!t.loading?e("NcActions",{staticClass:"comment__actions"},[t.editing?e("NcActionButton",{on:{click:t.onEditCancel},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClose",{attrs:{size:20}})]},proxy:!0}],null,!1,2888946197)},[t._v("\n\t\t\t\t\t"+t._s(t.t("comments","Cancel edit"))+"\n\t\t\t\t")]):[e("NcActionButton",{attrs:{"close-after-click":""},on:{click:t.onEdit},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconPencilOutline",{attrs:{size:20}})]},proxy:!0}],null,!1,3345211262)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("comments","Edit comment"))+"\n\t\t\t\t\t")]),t._v(" "),e("NcActionSeparator"),t._v(" "),e("NcActionButton",{attrs:{"close-after-click":""},on:{click:t.onDeleteWithUndo},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconTrashCanOutline",{attrs:{size:20}})]},proxy:!0}],null,!1,1034796883)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("comments","Delete comment"))+"\n\t\t\t\t\t")])]],2):t._e(),t._v(" "),t.id&&t.loading?e("div",{staticClass:"comment_loading icon-loading-small"}):t.creationDateTime?e("NcDateTime",{staticClass:"comment__timestamp",attrs:{timestamp:t.timestamp,"ignore-seconds":!0}}):t._e()],1),t._v(" "),t.editor||t.editing?e("form",{staticClass:"comment__editor",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"comment__editor-group"},[e("NcRichContenteditable",{ref:"editor",attrs:{"auto-complete":t.autoComplete,contenteditable:!t.loading,label:t.editor?t.t("comments","New comment"):t.t("comments","Edit comment"),placeholder:t.t("comments","Write a comment …"),"model-value":t.localMessage,"user-data":t.userData,"aria-describedby":"tab-comments__editor-description"},on:{"update:value":t.updateLocalMessage,submit:t.onSubmit}}),t._v(" "),e("div",{staticClass:"comment__submit"},[e("NcButton",{attrs:{variant:"tertiary-no-background",type:"submit","aria-label":t.t("comments","Post comment"),disabled:t.isEmptyMessage},on:{click:t.onSubmit},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("NcLoadingIcon"):e("IconArrowRight",{attrs:{size:20}})]},proxy:!0}],null,!1,758946661)})],1)],1),t._v(" "),e("div",{staticClass:"comment__editor-description",attrs:{id:"tab-comments__editor-description"}},[t._v("\n\t\t\t\t"+t._s(t.t("comments","@ for mentions, : for emoji, / for smart picker"))+"\n\t\t\t")])]):e("NcRichText",{staticClass:"comment__message",class:{"comment__message--expanded":t.expanded},attrs:{text:t.richContent.message,arguments:t.richContent.mentions,"use-markdown":""},nativeOn:{click:function(e){return t.onExpand.apply(null,arguments)}}})],1)])},o=[]},70247(t,e,n){"use strict";var r=n(85072),o=n.n(r),s=n(97825),a=n.n(s),i=n(77659),c=n.n(i),l=n(55056),d=n.n(l),u=n(10540),m=n.n(u),p=n(41113),h=n.n(p),f=n(22408),A={};A.styleTagTransform=h(),A.setAttributes=d(),A.insert=c().bind(null,"head"),A.domAPI=a(),A.insertStyleElement=m(),o()(f.A,A),f.A&&f.A.locals&&f.A.locals},70395(t,e,n){"use strict";n.d(e,{A:()=>c});var r=n(21777),o=n(19051),s=n(17003),a=n(51195),i=n(35550);async function c(t,e,n){const c=["",t,e].join("/"),l=await o.Ay.post((0,s.e)()+c,{actorDisplayName:(0,r.HW)().displayName,actorId:(0,r.HW)().uid,actorType:"users",creationDateTime:(new Date).toUTCString(),message:n,objectType:t,verb:"comment"}),d=c+"/"+parseInt(l.headers["content-location"].split("/").pop()),u=await i.A.stat(d,{details:!0}),m=u.data.props;return m.actorDisplayName=(0,a.j)(m.actorDisplayName,2),m.message=(0,a.j)(m.message,2),u.data}},71922(t,e,n){"use strict";n.d(e,{J:()=>c});var r=n(42294),o=n(67691),s=n(47397),a=n(53850),i=n(38374);function c(t){if((0,s.m)(t))return t.byteLength;if((0,a.P)(t))return t.length;if("string"==typeof t)return(0,o.d)(t);throw new r.GU({info:{code:i.O4.DataTypeNoLength}},"Cannot calculate data length: Invalid type")}},73776(){},74419(t,e,n){"use strict";n.d(e,{A:()=>l});var r=n(12692),o=n(85394),s=n(36236),a=n(90176),i=n(89062),c=n(29999);async function l(t,e,n={}){const l=(0,i.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:n.deep?"infinity":"1"}},t,n),d=await(0,i.E)(l,t);(0,c.HT)(t,d);const u=await d.text();if(!u)throw new Error("Failed parsing directory contents: Empty response");const m=await(0,a.h4)(u),p=(0,s.dU)(e);let h=function(t,e,n,i=!1,c=!1){const l=r.join(e,"/"),{multistatus:{response:d}}=t,u=d.map(t=>{const e=(0,o.S8)(t.href),{propstat:{prop:n}}=t,c="/"===l?decodeURIComponent((0,s.qb)(e)):(0,s.qb)(r.relative(decodeURIComponent(l),decodeURIComponent(e)));return(0,a.ch)(n,c,i)});return c?u:u.filter(t=>t.basename&&("file"===t.type||t.filename!==n.replace(/\/$/,"")))}(m,(0,s.dU)(t.remoteBasePath||t.remotePath),p,n.details,n.includeSelf);return n.glob&&(h=(0,c.eh)(h,n.glob)),(0,c.hq)(d,h,n.details)}},75892(t,e,n){"use strict";n.d(e,{t:()=>o});var r=n(84830);async function o(t,e,n={}){try{return await(0,r.z)(t,e,n),!0}catch(t){if(404===t.status)return!1;throw t}}},76374(t,e,n){"use strict";n.d(e,{J:()=>i});var r=n(85394),o=n(36236),s=n(89062),a=n(29999);async function i(t,e,n){n.url||(n.url=(0,r.oq)(t.remoteURL,(0,o.O0)(e)));const i=(0,s.H)(n,t,{}),c=await(0,s.E)(i,t);return(0,a.HT)(t,c),c}},77087(t,e,n){"use strict";n.d(e,{m:()=>i});var r=n(85394),o=n(36236),s=n(89062),a=n(29999);async function i(t,e,n,i={}){const c=(0,s.H)({url:(0,r.oq)(t.remoteURL,(0,o.O0)(e)),method:"MOVE",headers:{Destination:(0,r.oq)(t.remoteURL,(0,o.O0)(n)),Overwrite:!1===i.overwrite?"F":"T"}},t,i),l=await(0,s.E)(c,t);(0,a.HT)(t,l)}},77101(t,e,n){"use strict";n.d(e,{W:()=>i});var r=n(85394),o=n(36236),s=n(89062),a=n(29999);async function i(t,e,n={}){const i=(0,s.H)({url:(0,r.oq)(t.remoteURL,(0,o.O0)(e)),method:"DELETE"},t,n),c=await(0,s.E)(i,t);(0,a.HT)(t,c)}},77199(){},77965(){},78982(){},79368(){},79838(){},80156(t,e,n){"use strict";n.d(e,{T:()=>c});var r=n(90176),o=n(85394),s=n(36236),a=n(89062),i=n(29999);async function c(t,e,n={}){const{details:c=!1}=n,l=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":t.headers["Content-Type"]||"application/xml; charset=utf-8"}},t,n),d=await(0,a.E)(l,t);(0,i.HT)(t,d);const u=await d.text(),m=await(0,r.h4)(u),p=(0,r.KA)(m,e,c);return(0,i.hq)(d,p,c)}},80486(t,e,n){"use strict";n.d(e,{A:()=>o});var r=n(35550);async function o(t,e,n){const o=["",t,e,n].join("/");await r.A.deleteFile(o)}},81838(t,e,n){"use strict";n.d(e,{V:()=>d});var r=n(42294),o=n(85394),s=n(36236),a=n(89062),i=n(29999),c=n(10524),l=n(38374);async function d(t,e,n,d,u,m={}){const p=await(0,c.p)(t,e,m);if(p.compliance.includes("sabredav-partialupdate"))return await async function(t,e,n,c,d,u={}){if(n>c||n<0)throw new r.GU({info:{code:l.O4.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const m={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":""+(c-n+1),"X-Update-Range":`bytes=${n}-${c}`},p=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"PATCH",headers:m,data:d},t,u),h=await(0,a.E)(p,t);(0,i.HT)(t,h)}(t,e,n,d,u,m);if(p.server.includes("Apache")&&p.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return await async function(t,e,n,c,d,u={}){if(n>c||n<0)throw new r.GU({info:{code:l.O4.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const m={"Content-Type":"application/octet-stream","Content-Length":""+(c-n+1),"Content-Range":`bytes ${n}-${c}/*`},p=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"PUT",headers:m,data:d},t,u),h=await(0,a.E)(p,t);(0,i.HT)(t,h)}(t,e,n,d,u,m);throw new r.GU({info:{code:l.O4.NotSupported}},"Not supported")}},82415(t,e,n){"use strict";n.d(e,{UU:()=>r.U,h4:()=>o.h4});var r=n(84997),o=(n(38374),n(90176));n(29999)},84830(t,e,n){"use strict";n.d(e,{z:()=>c});var r=n(90176),o=n(85394),s=n(36236),a=n(89062),i=n(29999);async function c(t,e,n={}){const{details:c=!1}=n,l=(0,a.H)({url:(0,o.oq)(t.remoteURL,(0,s.O0)(e)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},t,n),d=await(0,a.E)(l,t);(0,i.HT)(t,d);const u=await d.text(),m=await(0,r.h4)(u),p=(0,r.ky)(m,e,c);return(0,i.hq)(d,p,c)}},84997(t,e,n){"use strict";n.d(e,{U:()=>b});var r=n(85394),o=n(36942),s=n(50335),a=n(28161),i=n(68476),c=n(76374),l=n(77101),d=n(75892),u=n(74419),m=n(17658),p=n(39615),h=n(86772),f=n(84830),A=n(80156),g=n(77087),E=n(30047),C=n(81838),y=n(10524),v=n(38374);const w="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function b(t,e={}){const{authType:n=null,remoteBasePath:b,contactHref:I=w,ha1:T,headers:R={},httpAgent:_,httpsAgent:O,password:N,token:L,username:$,withCredentials:x}=e;let S=n;S||(S=$||N?v.hT.Password:v.hT.None);const D={authType:S,remoteBasePath:b,contactHref:I,ha1:T,headers:Object.assign({},R),httpAgent:_,httpsAgent:O,password:N,remotePath:(0,r.wB)(t),remoteURL:t,token:L,username:$,withCredentials:x};return(0,o.e)(D,$,N,L,T),{copyFile:(t,e,n)=>(0,s.m)(D,t,e,n),createDirectory:(t,e)=>(0,a.c)(D,t,e),createReadStream:(t,e)=>(0,i.V)(D,t,e),createWriteStream:(t,e,n)=>(0,i.o)(D,t,e,n),customRequest:(t,e)=>(0,c.J)(D,t,e),deleteFile:(t,e)=>(0,l.W)(D,t,e),exists:(t,e)=>(0,d.t)(D,t,e),getDirectoryContents:(t,e)=>(0,u.A)(D,t,e),getFileContents:(t,e)=>(0,m.F)(D,t,e),getFileDownloadLink:t=>(0,m.b)(D,t),getFileUploadLink:t=>(0,E.w)(D,t),getHeaders:()=>Object.assign({},D.headers),getQuota:t=>(0,h.T)(D,t),lock:(t,e)=>(0,p.s)(D,t,e),moveFile:(t,e,n)=>(0,g.m)(D,t,e,n),putFileContents:(t,e,n)=>(0,E.g)(D,t,e,n),partialUpdateFileContents:(t,e,n,r,o)=>(0,C.V)(D,t,e,n,r,o),getDAVCompliance:t=>(0,y.p)(D,t),search:(t,e)=>(0,A.T)(D,t,e),setHeaders:t=>{D.headers=Object.assign({},t)},stat:(t,e)=>(0,f.z)(D,t,e),unlock:(t,e,n)=>(0,p.T)(D,t,e,n)}}},85394(t,e,n){"use strict";n.d(e,{S8:()=>l,oq:()=>c,wB:()=>i});var r=n(61160),o=n(42294),s=n(406),a=n(36236);function i(t){let e=new r(t).pathname;return e.length<=0&&(e="/"),(0,a.qb)(e)}function c(...t){return(0,s.A)(t.reduce((t,e,n)=>((0===n||"/"!==e||"/"===e&&"/"!==t[t.length-1])&&t.push(e),t),[]))}function l(t){try{return t.replace(/^https?:\/\/[^\/]+/,"")}catch(t){throw new o.GU(t,"Failed normalising HREF")}}},85914(t,e,n){var r;t=n.nmd(t),function(){var o=(t&&t.exports,"object"==typeof globalThis&&globalThis);o.global!==o&&o.window;var s=function(t){this.message=t};(s.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new s(t)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,o,s=t.length%3,c="",l=-1,d=t.length-s;++l<d;)e=t.charCodeAt(l)<<16,n=t.charCodeAt(++l)<<8,r=t.charCodeAt(++l),c+=i.charAt((o=e+n+r)>>18&63)+i.charAt(o>>12&63)+i.charAt(o>>6&63)+i.charAt(63&o);return 2==s?(e=t.charCodeAt(l)<<8,n=t.charCodeAt(++l),c+=i.charAt((o=e+n)>>10)+i.charAt(o>>4&63)+i.charAt(o<<2&63)+"="):1==s&&(o=t.charCodeAt(l),c+=i.charAt(o>>2)+i.charAt(o<<4&63)+"=="),c},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,s="",l=-1;++l<e;)r=i.indexOf(t.charAt(l)),n=o%4?64*n+r:r,o++%4&&(s+=String.fromCharCode(255&n>>(-2*o&6)));return s},version:"1.0.0"};void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}()},86772(t,e,n){"use strict";n.d(e,{T:()=>c});var r=n(89062),o=n(29999),s=n(90176),a=n(85394),i=n(7815);async function c(t,e={}){const n=e.path||"/",c=(0,r.H)({url:(0,a.oq)(t.remoteURL,n),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},t,e),l=await(0,r.E)(c,t);(0,o.HT)(t,l);const d=await l.text(),u=await(0,s.h4)(d),m=(0,i.K)(u);return(0,o.hq)(l,m,e.details)}},86833(){},89062(t,e,n){"use strict";n.d(e,{E:()=>f,H:()=>h});var r=n(11568),o=n(11083),s=n(97192),a=n(84819),i=n(22921),c=n(90036),l=n(79275),d=n(79605),u=n(39299),m=n(38374),p=n(36942);function h(t,e,n){const r=(0,l.q)(t);return r.headers=(0,d.l)(e.headers,r.headers||{},n.headers||{}),void 0!==n.data&&(r.data=n.data),n.signal&&(r.signal=n.signal),e.httpAgent&&(r.httpAgent=e.httpAgent),e.httpsAgent&&(r.httpsAgent=e.httpsAgent),e.digest&&(r._digest=e.digest),"boolean"==typeof e.withCredentials&&(r.withCredentials=e.withCredentials),r}async function f(t,e){return e.authType===m.hT.Auto?async function(t,e){const n=await g(t);return n.ok?(e.authType=m.hT.Password,n):401==n.status&&(0,c.oD)(n)?(e.authType=m.hT.Digest,(0,p.e)(e,e.username,e.password,void 0,void 0),t._digest=e.digest,A(t)):n}(t,e):t._digest?A(t):g(t)}async function A(t){const e=t._digest;delete t._digest,e.hasDigestAuth&&(t=(0,l.h)(t,{headers:{Authorization:(0,c.XX)(t,e)}}));const n=await g(t);if(401==n.status){if(e.hasDigestAuth=(0,c.Wb)(n,e),e.hasDigestAuth){t=(0,l.h)(t,{headers:{Authorization:(0,c.XX)(t,e)}});const n=await g(t);return 401==n.status?e.hasDigestAuth=!1:e.nc++,n}}else e.nc++;return n}function g(t){const e=(0,a.G)();return e.patchInline("request",t=>e.patchInline("fetch",s.hd,t.url,function(t){let e={};const n={method:t.method};if(t.headers&&(e=(0,d.l)(e,t.headers)),void 0!==t.data){const[r,o]=(0,u.P)(t.data);n.body=r,e=(0,d.l)(e,o)}return t.signal&&(n.signal=t.signal),t.withCredentials&&(n.credentials="include"),(0,i.HZ)()||(0,i.lV)()||(t.httpAgent||t.httpsAgent)&&(n.agent=e=>"http:"===e.protocol?t.httpAgent||new r.Agent:t.httpsAgent||new o.Agent),n.headers=e,n}(t)),t)}},90036(t,e,n){"use strict";n.d(e,{C8:()=>s,Wb:()=>i,XX:()=>a,oD:()=>c});var r=n(83503),o=n(35658);function s(t,e,n){return{username:t,password:e,ha1:n,nc:0,algorithm:"md5",hasDigestAuth:!1}}function a(t,e){const n=t.url.replace("//",""),s=-1==n.indexOf("/")?"/":n.slice(n.indexOf("/")),a=t.method?t.method.toUpperCase():"GET",i=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",c=`00000000${e.nc}`.slice(-8),l=(0,o.M)(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),d=r(`${a}:${s}`),u=r(i?`${l}:${e.nonce}:${c}:${e.cnonce}:${i}:${d}`:`${l}:${e.nonce}:${d}`),m={username:e.username,realm:e.realm,nonce:e.nonce,uri:s,qop:i,response:u,nc:c,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},p=[];for(const t in m)m[t]&&("qop"===t||"nc"===t||"algorithm"===t?p.push(`${t}=${m[t]}`):p.push(`${t}="${m[t]}"`));return`Digest ${p.join(", ")}`}function i(t,e){if(!c(t))return!1;const n=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const r=t.headers&&t.headers.get("www-authenticate")||"",o=n.exec(r);if(!o)break;e[o[1]]=o[2]||o[3]}return e.nc+=1,e.cnonce=function(){let t="";for(let e=0;e<32;++e)t=`${t}${"abcdef0123456789"[Math.floor(16*Math.random())]}`;return t}(),!0}function c(t){return"digest"===(t.headers&&t.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()}},93226(t,e,n){"use strict";var r,o,s,a,i=n(21777),c=n(44013),l=n(380),d=n(20005),u=n(53334),m=n(65606);function p(){if(o)return r;o=1;const t="object"==typeof m&&m.env&&m.env.NODE_DEBUG&&/\bsemver\b/i.test(m.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};return r=t}function h(){if(a)return s;a=1;const t=Number.MAX_SAFE_INTEGER||9007199254740991;return s={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var f,A,g,E,C,y,v,w,b,I,T,R,_,O={exports:{}};function N(){if(v)return y;v=1;const t=p(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=h(),{safeRe:r,t:o}=(f||(f=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:o}=h(),s=p(),a=(e=t.exports={}).re=[],i=e.safeRe=[],c=e.src=[],l=e.safeSrc=[],d=e.t={};let u=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[m,r]],A=(t,e,n)=>{const r=(t=>{for(const[e,n]of f)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t})(e),o=u++;s(t,o,e),d[t]=o,c[o]=e,l[o]=r,a[o]=new RegExp(e,n?"g":void 0),i[o]=new RegExp(r,n?"g":void 0)};A("NUMERICIDENTIFIER","0|[1-9]\\d*"),A("NUMERICIDENTIFIERLOOSE","\\d+"),A("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),A("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),A("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),A("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),A("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),A("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),A("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),A("BUILDIDENTIFIER",`${m}+`),A("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),A("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),A("FULL",`^${c[d.FULLPLAIN]}$`),A("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),A("LOOSE",`^${c[d.LOOSEPLAIN]}$`),A("GTLT","((?:<|>)?=?)"),A("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),A("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),A("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),A("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),A("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),A("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),A("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),A("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),A("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),A("COERCERTL",c[d.COERCE],!0),A("COERCERTLFULL",c[d.COERCEFULL],!0),A("LONETILDE","(?:~>?)"),A("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",A("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),A("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),A("LONECARET","(?:\\^)"),A("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",A("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),A("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),A("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),A("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),A("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",A("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),A("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),A("STAR","(<|>)?=?\\s*\\*"),A("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),A("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(O,O.exports)),O.exports),s=function(){if(g)return A;g=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return A=n=>n?"object"!=typeof n?t:n:e,A}(),{compareIdentifiers:a}=function(){if(C)return E;C=1;const t=/^[0-9]+$/,e=(e,n)=>{if("number"==typeof e&&"number"==typeof n)return e===n?0:e<n?-1:1;const r=t.test(e),o=t.test(n);return r&&o&&(e=+e,n=+n),e===n?0:r&&!o?-1:o&&!r?1:e<n?-1:1};return E={compareIdentifiers:e,rcompareIdentifiers:(t,n)=>e(n,t)}}();class i{constructor(a,c){if(c=s(c),a instanceof i){if(a.loose===!!c.loose&&a.includePrerelease===!!c.includePrerelease)return a;a=a.version}else if("string"!=typeof a)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",a,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const l=a.trim().match(c.loose?r[o.LOOSE]:r[o.FULL]);if(!l)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<n)return e}return t}):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(t("SemVer.compare",this.version,this.options,e),!(e instanceof i)){if("string"==typeof e&&e===this.version)return 0;e=new i(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(t){return t instanceof i||(t=new i(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(e){if(e instanceof i||(e=new i(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],o=e.prerelease[n];if(t("prerelease compare",n,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return a(r,o)}while(++n)}compareBuild(e){e instanceof i||(e=new i(e,this.options));let n=0;do{const r=this.build[n],o=e.build[n];if(t("build compare",n,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return a(r,o)}while(++n)}inc(t,e,n){if(t.startsWith("pre")){if(!e&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(e){const t=`-${e}`.match(this.options.loose?r[o.PRERELEASELOOSE]:r[o.PRERELEASE]);if(!t||t[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(n)?1:0;if(0===this.prerelease.length)this.prerelease=[t];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(e===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let r=[e,t];!1===n&&(r=[e]),0===a(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return y=i}!function(){if(b)return w;b=1;const t=N();w=(e,n)=>new t(e,n).major}(),function(){if(_)return R;_=1;const t=function(){if(T)return I;T=1;const t=N();return I=(e,n,r=!1)=>{if(e instanceof t)return e;try{return new t(e,n)}catch(t){if(!r)return null;throw t}},I}();R=(e,n)=>{const r=t(e,n);return r?r.version:null}}(),l.m,Error;var L=n(81222),$=n(26422),x=n(10810),S=n(85471),D=n(85168),P=n(57579),U=n(74095),k=n(42507),M=n(57578);const H={name:"MessageReplyTextOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var F=n(14486);const q=(0,F.A)(H,function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon message-reply-text-outline-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M9 11H18V13H9V11M18 7H6V9H18V7M22 4V22L18 18H4C2.9 18 2 17.11 2 16V4C2 2.9 2.9 2 4 2H20C21.1 2 22 2.89 22 4M20 4H4V16H18.83L20 17.17V4Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},[],!1,null,null,null).exports;var G=n(83239),j=n(65463),B=n(96689),V=n(31538),X=n(82415),z=n(29999),W=n(90176),Y=n(35550);async function K({resourceType:t,resourceId:e},n){const r=["",t,e].join("/"),o=n.datetime?`<oc:datetime>${n.datetime.toISOString()}</oc:datetime>`:"",s=await Y.A.customRequest(r,{method:"REPORT",data:`<?xml version="1.0"?>\n\t\t\t<oc:filter-comments\n\t\t\t\txmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns"\n\t\t\t\txmlns:nc="http://nextcloud.org/ns"\n\t\t\t\txmlns:ocs="http://open-collaboration-services.org/ns">\n\t\t\t\t<oc:limit>${n.limit??20}</oc:limit>\n\t\t\t\t<oc:offset>${n.offset||0}</oc:offset>\n\t\t\t\t${o}\n\t\t\t</oc:filter-comments>`,...n}),a=await s.text(),i=function(t,e=!1){const{multistatus:{response:n}}=t;return n.map(t=>{const n=t.propstat.prop;return(0,W.ch)(n,n.id.toString(),e)})}(await(0,X.h4)(a),!0);return(0,z.hq)(s,i,!0)}const Z={name:"Comments",components:{Comment:j.A,NcEmptyContent:k.A,NcButton:U.A,IconRefresh:G.A,IconMessageReplyTextOutline:q,IconAlertCircleOutline:M.A},directives:{elementVisibility:P.Zx},mixins:[V.A],data:()=>({error:"",loading:!1,done:!1,offset:0,comments:[],cancelRequest:()=>{},Comment:j.A,userData:{}}),computed:{hasComments(){return this.comments.length>0},isFirstLoading(){return this.loading&&0===this.offset}},watch:{resourceId(){this.currentResourceId=this.resourceId}},methods:{t:u.Tl,async onVisibilityChange(t){if(t)try{await function(t,e,n){const r=["",t,e].join("/"),o=n.toUTCString();return Y.A.customRequest(r,{method:"PROPPATCH",data:`<?xml version="1.0"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:readMarker>${o}</oc:readMarker>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`})}(this.resourceType,this.currentResourceId,new Date)}catch(t){(0,D.Qg)(t.message||(0,u.Tl)("comments","Failed to mark comments as read"))}},async update(t){this.currentResourceId=t,this.resetState(),await this.getComments()},onScrollBottomReached(){this.error||this.done||this.loading||this.getComments()},async getComments(){this.cancelRequest("cancel");try{this.loading=!0,this.error="";const{request:t,abort:e}=function(t){const e=new AbortController,n=e.signal;return{request:async function(e,r){return await t(e,{signal:n,...r})},abort:()=>e.abort()}}(K);this.cancelRequest=e;const{data:n}=await t({resourceType:this.resourceType,resourceId:this.currentResourceId},{offset:this.offset})||{data:[]};this.logger.debug(`Processed ${n.length} comments`,{comments:n}),n.length<20&&(this.done=!0);for(const t of n)t.props.actorId=t.props.actorId.toString();this.comments=[...this.comments,...n],this.offset+=20}catch(t){if("cancel"===t.message)return;this.error=(0,u.Tl)("comments","Unable to load the comments list"),B.A.error("Error loading the comments list",{error:t})}finally{this.loading=!1}},onNewComment(t){this.comments.unshift(t)},onDelete(t){const e=this.comments.findIndex(e=>e.props.id===t);e>-1?this.comments.splice(e,1):B.A.error("Could not find the deleted comment in the list",{id:t})},resetState(){this.error="",this.loading=!1,this.done=!1,this.offset=0,this.comments=[]}}};var Q=n(85072),J=n.n(Q),tt=n(97825),et=n.n(tt),nt=n(77659),rt=n.n(nt),ot=n(55056),st=n.n(ot),at=n(10540),it=n.n(at),ct=n(41113),lt=n.n(ct),dt=n(94262),ut={};ut.styleTagTransform=lt(),ut.setAttributes=st(),ut.insert=rt().bind(null,"head"),ut.domAPI=et(),ut.insertStyleElement=it(),J()(dt.A,ut),dt.A&&dt.A.locals&&dt.A.locals;const mt=(0,F.A)(Z,function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"element-visibility",rawName:"v-element-visibility",value:t.onVisibilityChange,expression:"onVisibilityChange"}],staticClass:"comments",class:{"icon-loading":t.isFirstLoading}},[e("Comment",t._b({staticClass:"comments__writer",attrs:{"auto-complete":t.autoComplete,"resource-type":t.resourceType,editor:!0,"user-data":t.userData,"resource-id":t.currentResourceId},on:{new:t.onNewComment}},"Comment",t.editorData,!1)),t._v(" "),t.isFirstLoading?t._e():[!t.hasComments&&t.done?e("NcEmptyContent",{staticClass:"comments__empty",attrs:{name:t.t("comments","No comments yet, start the conversation!")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMessageReplyTextOutline")]},proxy:!0}],null,!1,326612300)}):e("ul",t._l(t.comments,function(n){return e("Comment",t._b({key:n.props.id,staticClass:"comments__list",attrs:{tag:"li","auto-complete":t.autoComplete,"resource-type":t.resourceType,message:n.props.message,"resource-id":t.currentResourceId,"user-data":t.genMentionsData(n.props.mentions)},on:{"update:message":function(e){return t.$set(n.props,"message",e)},delete:t.onDelete}},"Comment",n.props,!1))}),1),t._v(" "),t.loading&&!t.isFirstLoading?e("div",{staticClass:"comments__info icon-loading"}):t.hasComments&&t.done?e("div",{staticClass:"comments__info"},[t._v("\n\t\t\t"+t._s(t.t("comments","No more messages"))+"\n\t\t")]):t.error?[e("NcEmptyContent",{staticClass:"comments__error",attrs:{name:t.error},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAlertCircleOutline")]},proxy:!0}],null,!1,3663249556)}),t._v(" "),e("NcButton",{staticClass:"comments__retry",on:{click:t.getComments},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRefresh")]},proxy:!0}],null,!1,2997625269)},[t._v("\n\t\t\t\t"+t._s(t.t("comments","Retry"))+"\n\t\t\t")])]:t._e()]],2)},[],!1,null,"6c8c157a",null).exports,pt=(0,S.pM)({__name:"FilesSidebarTab",props:{node:null,folder:null,view:null},setup(t,{expose:e}){const n=t;e({setActive:o});const r=(0,S.EW)(()=>n.node?.fileid);function o(t){return t}return{__sfc:!0,props:n,resourceId:r,setActive:o,Comments:mt}}}),ht=(0,F.A)(pt,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return void 0!==n.resourceId?e(n.Comments,{key:n.resourceId,attrs:{"resource-id":n.resourceId,"resource-type":"files"}}):t._e()},[],!1,null,null,null).exports;var ft=n(51651);let At,gt;S.Ay.use(x.R2),n.nc=(0,i.aV)();const Et="comments_files-sidebar-tab";var Ct;(0,L.C)("comments","activityEnabled",!1)&&void 0!==OCA?.Activity?.registerSidebarAction?window.addEventListener("DOMContentLoaded",function(){window.OCA.Activity.registerSidebarAction({mount:async(t,{fileInfo:e,reload:r})=>{const o=(0,x.Ey)();if(!At){const{default:t}=await n.e(4906).then(n.bind(n,44906));At=S.Ay.extend(t)}gt=new At({el:t,pinia:o,propsData:{reloadCallback:r,resourceId:e.id}}),B.A.info("Comments plugin mounted in Activity sidebar action",{fileInfo:e})},unmount:()=>{gt&&gt.$destroy()}}),window.OCA.Activity.registerSidebarEntries(async({fileInfo:t,limit:e,offset:r})=>{const{data:o}=await K({resourceType:"files",resourceId:t.id},{limit:e,offset:r});B.A.debug("Loaded comments",{fileInfo:t,comments:o});const{default:s}=await n.e(7039).then(n.bind(n,57039)),a=S.Ay.extend(s);return o.map(e=>({_CommentsViewInstance:void 0,timestamp:(0,ft.A)(e.props?.creationDateTime).toDate().getTime(),mount(n,{reload:r}){this._CommentsViewInstance=new a({el:n,propsData:{comment:e,resourceId:t.id,reloadCallback:r}})},unmount(){this._CommentsViewInstance?.$destroy()}}))}),window.OCA.Activity.registerSidebarFilter(t=>"comments"!==t.type),B.A.info("Comments plugin registered for Activity sidebar action")}):(function(t){if("object"!=typeof t)throw new Error("Sidebar tab is not an object");if(!t.id||"string"!=typeof t.id||t.id!==CSS.escape(t.id))throw new Error("Sidebar tabs need to have an id conforming to the HTML id attribute specifications");if(!t.tagName||"string"!=typeof t.tagName)throw new Error("Sidebar tabs need to have the tagName name set");if(!t.tagName.match(/^[a-z][a-z0-9-_]+$/))throw new Error("Sidebar tabs tagName name is invalid");if(!t.displayName||"string"!=typeof t.displayName)throw new Error("Sidebar tabs need to have a name set");if("string"!=typeof t.iconSvgInline||!(0,d.A)(t.iconSvgInline))throw new Error("Sidebar tabs need to have an valid SVG icon");if("number"!=typeof t.order)throw new Error("Sidebar tabs need to have a numeric order set");if("function"!=typeof t.enabled)throw new Error('Sidebar tabs need to have an "enabled" method')}(Ct={id:"comments",displayName:(0,u.t)("comments","Comments"),iconSvgInline:'<svg xmlns="http://www.w3.org/2000/svg" id="mdi-message-reply-text" viewBox="0 0 24 24"><path d="M18,8H6V6H18V8M18,11H6V9H18V11M18,14H6V12H18V14M22,4A2,2 0 0,0 20,2H4A2,2 0 0,0 2,4V16A2,2 0 0,0 4,18H18L22,22V4Z" /></svg>',order:50,tagName:Et,enabled:()=>(window.customElements.get(Et)||function(){S.Ay.use(x.R2),S.Ay.mixin({pinia:(0,x.Ey)()});const t=(0,$.A)(S.Ay,ht);Object.defineProperty(t.prototype,"attachShadow",{value(){return this}}),Object.defineProperty(t.prototype,"shadowRoot",{get(){return this}}),window.customElements.define(Et,t)}(),!0)}),window._nc_files_sidebar_tabs??=new Map,window._nc_files_sidebar_tabs.has(Ct.id)?c.l.warn(`Sidebar tab with id "${Ct.id}" already registered. Skipping.`):(window._nc_files_sidebar_tabs.set(Ct.id,Ct),c.l.debug(`New sidebar tab with id "${Ct.id}" registered.`)))},94262(t,e,n){"use strict";n.d(e,{A:()=>i});var r=n(71354),o=n.n(r),s=n(76314),a=n.n(s)()(o());a.push([t.id,".comments[data-v-6c8c157a]{min-height:100%;display:flex;flex-direction:column}.comments__empty[data-v-6c8c157a],.comments__error[data-v-6c8c157a]{flex:1 0}.comments__retry[data-v-6c8c157a]{margin:0 auto}.comments__info[data-v-6c8c157a]{height:60px;color:var(--color-text-maxcontrast);text-align:center;line-height:60px}","",{version:3,sources:["webpack://./apps/comments/src/views/Comments.vue"],names:[],mappings:"AACA,2BACC,eAAA,CACA,YAAA,CACA,qBAAA,CAEA,oEAEC,QAAA,CAGD,kCACC,aAAA,CAGD,iCACC,WAAA,CACA,mCAAA,CACA,iBAAA,CACA,gBAAA",sourcesContent:["\n.comments {\n\tmin-height: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__empty,\n\t&__error {\n\t\tflex: 1 0;\n\t}\n\n\t&__retry {\n\t\tmargin: 0 auto;\n\t}\n\n\t&__info {\n\t\theight: 60px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tline-height: 60px;\n\t}\n}\n"],sourceRoot:""}]);const i=a},96689(t,e,n){"use strict";n.d(e,{A:()=>r});const r=(0,n(35947).YK)().setApp("comments").detectUser().build()}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return o[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=o,e=[],a.O=(t,n,r,o)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,r,o]=e[d],i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every(t=>a.O[t](n[c]))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,n)=>(a.f[n](t,e),e),[])),a.u=t=>t+"-"+t+".js?v="+{594:"f5af3d132040859cb666",620:"e5d77a046303aedd05c5",2391:"6d29c12fea2fbb265756",2880:"803b63f847e6d68bcf0d",4325:"b597fcd1212503c968df",4508:"b788d8e845a1709aacd5",4818:"d7d676d61bc734e1307a",4906:"494ff510a1379d42d106",5258:"bf877d931968f112154d",5862:"580b9c2e231a9169a12f",7039:"9800c2c4f93af8d9465e",7145:"1f907ab7a1c83e8a6617",8339:"b2246be0f4c885a9d524"}[t],a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="nextcloud-ui-legacy:",a.l=(t,e,o,s)=>{if(n[t])n[t].push(e);else{var i,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==r+o){i=u;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",r+o),i.src=t),n[t]=[e];var m=(e,r)=>{i.onerror=i.onload=null,clearTimeout(p);var o=n[t];if(delete n[t],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach(t=>t(r)),e)return e(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),a.j=2122,(()=>{var t;globalThis.importScripts&&(t=globalThis.location+"");var e=globalThis.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={2122:0};a.f.j=(e,n)=>{var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((n,o)=>r=t[e]=[n,o]);n.push(r[2]=o);var s=a.p+a.u(e),i=new Error;a.l(s,n=>{if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,r[1](i)}},"chunk-"+e,e)}},a.O.j=e=>0===t[e];var e=(e,n)=>{var r,o,[s,i,c]=n,l=0;if(s.some(e=>0!==t[e])){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var d=c(a)}for(e&&e(n);l<s.length;l++)o=s[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},n=globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),a.nc=void 0;var i=a.O(void 0,[4208],()=>a(93226));i=a.O(i)})();
//# sourceMappingURL=comments-comments-tab.js.map?v=2088f3e2eedd7c67707d