"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[3240],{65507:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var n=i(25108),r=i(19755);if(Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,r=arguments[1],o=0;o<n;o++)if(e=i[o],t.call(r,e,o,i))return e}),window&&"function"!=typeof window.CustomEvent){function h(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}void 0!==window.Event&&(h.prototype=window.Event.prototype),window.CustomEvent=h}class o{constructor(t){this.tribute=t,this.tribute.events=this}static keys(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}bind(t){t.boundKeydown=this.keydown.bind(t,this),t.boundKeyup=this.keyup.bind(t,this),t.boundInput=this.input.bind(t,this),t.addEventListener("keydown",t.boundKeydown,!1),t.addEventListener("keyup",t.boundKeyup,!1),t.addEventListener("input",t.boundInput,!1)}unbind(t){t.removeEventListener("keydown",t.boundKeydown,!1),t.removeEventListener("keyup",t.boundKeyup,!1),t.removeEventListener("input",t.boundInput,!1),delete t.boundKeydown,delete t.boundKeyup,delete t.boundInput}keydown(t,e){t.shouldDeactivate(e)&&(t.tribute.isActive=!1,t.tribute.hideMenu());let i=this;t.commandEvent=!1,o.keys().forEach((n=>{n.key===e.keyCode&&(t.commandEvent=!0,t.callbacks()[n.value.toLowerCase()](e,i))}))}input(t,e){t.inputEvent=!0,t.keyup.call(this,t,e)}click(t,e){let i=t.tribute;if(i.menu&&i.menu.contains(e.target)){let t=e.target;for(e.preventDefault(),e.stopPropagation();"li"!==t.nodeName.toLowerCase();)if(t=t.parentNode,!t||t===i.menu)throw new Error("cannot find the <li> container for the click");i.selectItemAtIndex(t.getAttribute("data-index"),e),i.hideMenu()}else i.current.element&&!i.current.externalTrigger&&(i.current.externalTrigger=!1,setTimeout((()=>i.hideMenu())))}keyup(t,e){if(t.inputEvent&&(t.inputEvent=!1),t.updateSelection(this),27!==e.keyCode){if(!t.tribute.allowSpaces&&t.tribute.hasTrailingSpace)return t.tribute.hasTrailingSpace=!1,t.commandEvent=!0,void t.callbacks().space(e,this);if(!t.tribute.isActive)if(t.tribute.autocompleteMode)t.callbacks().triggerChar(e,this,"");else{let i=t.getKeyCode(t,this,e);if(isNaN(i)||!i)return;let n=t.tribute.triggers().find((t=>t.charCodeAt(0)===i));void 0!==n&&t.callbacks().triggerChar(e,this,n)}t.tribute.current.mentionText.length<t.tribute.current.collection.menuShowMinLength||((t.tribute.current.trigger||t.tribute.autocompleteMode)&&!1===t.commandEvent||t.tribute.isActive&&8===e.keyCode)&&t.tribute.showMenuFor(this,!0)}}shouldDeactivate(t){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){let e=!1;return o.keys().forEach((i=>{t.keyCode===i.key&&(e=!0)})),!e}return!1}getKeyCode(t,e,i){let n=t.tribute,r=n.range.getTriggerInfo(!1,n.hasTrailingSpace,!0,n.allowSpaces,n.autocompleteMode);return!!r&&r.mentionTriggerChar.charCodeAt(0)}updateSelection(t){this.tribute.current.element=t;let e=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);e&&(this.tribute.current.selectedPath=e.mentionSelectedPath,this.tribute.current.mentionText=e.mentionText,this.tribute.current.selectedOffset=e.mentionSelectedOffset)}callbacks(){return{triggerChar:(t,e,i)=>{let n=this.tribute;n.current.trigger=i;let r=n.collection.find((t=>t.trigger===i));n.current.collection=r,n.current.mentionText.length>=n.current.collection.menuShowMinLength&&n.inputEvent&&n.showMenuFor(e,!0)},enter:(t,e)=>{this.tribute.isActive&&this.tribute.current.filteredItems&&(t.preventDefault(),t.stopPropagation(),setTimeout((()=>{this.tribute.selectItemAtIndex(this.tribute.menuSelected,t),this.tribute.hideMenu()}),0))},escape:(t,e)=>{this.tribute.isActive&&(t.preventDefault(),t.stopPropagation(),this.tribute.isActive=!1,this.tribute.hideMenu())},tab:(t,e)=>{this.callbacks().enter(t,e)},space:(t,e)=>{this.tribute.isActive&&(this.tribute.spaceSelectsMatch?this.callbacks().enter(t,e):this.tribute.allowSpaces||(t.stopPropagation(),setTimeout((()=>{this.tribute.hideMenu(),this.tribute.isActive=!1}),0)))},up:(t,e)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let e=this.tribute.current.filteredItems.length,i=this.tribute.menuSelected;e>i&&i>0?(this.tribute.menuSelected--,this.setActiveLi()):0===i&&(this.tribute.menuSelected=e-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(t,e)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let e=this.tribute.current.filteredItems.length-1,i=this.tribute.menuSelected;e>i?(this.tribute.menuSelected++,this.setActiveLi()):e===i&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}},delete:(t,e)=>{this.tribute.isActive&&this.tribute.current.mentionText.length<1?this.tribute.hideMenu():this.tribute.isActive&&this.tribute.showMenuFor(e)}}}setActiveLi(t){let e=this.tribute.menu.querySelectorAll("li"),i=e.length>>>0;t&&(this.tribute.menuSelected=parseInt(t));for(let t=0;t<i;t++){let i=e[t];if(t===this.tribute.menuSelected){i.classList.add(this.tribute.current.collection.selectClass);let t=i.getBoundingClientRect(),e=this.tribute.menu.getBoundingClientRect();if(t.bottom>e.bottom){let i=t.bottom-e.bottom;this.tribute.menu.scrollTop+=i}else if(t.top<e.top){let i=e.top-t.top;this.tribute.menu.scrollTop-=i}}else i.classList.remove(this.tribute.current.collection.selectClass)}}getFullHeight(t,e){let i=t.getBoundingClientRect().height;if(e){let e=t.currentStyle||window.getComputedStyle(t);return i+parseFloat(e.marginTop)+parseFloat(e.marginBottom)}return i}}class s{constructor(t){this.tribute=t,this.tribute.menuEvents=this,this.menu=this.tribute.menu}bind(t){this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((()=>{this.tribute.isActive&&this.tribute.showMenuFor(this.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((()=>{this.tribute.isActive&&this.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}unbind(t){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}debounce(t,e,i){var n;return()=>{var r=this,o=arguments,s=i&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,i||t.apply(r,o)}),e),s&&t.apply(r,o)}}}class l{constructor(t){this.tribute=t,this.tribute.range=this}getDocument(){let t;return this.tribute.current.collection&&(t=this.tribute.current.collection.iframe),t?t.contentWindow.document:document}positionMenuAtCaret(t){let e,i=this.tribute.current,n=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==n){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");e=this.isContentEditable(i.element)?this.getContentEditableCaretPosition(n.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,n.mentionPosition),this.tribute.menu.style.cssText=`top: ${e.top}px;\n                                     left: ${e.left}px;\n                                     right: ${e.right}px;\n                                     bottom: ${e.bottom}px;\n                                     position: absolute;\n                                     display: block;`,"auto"===e.left&&(this.tribute.menu.style.left="auto"),"auto"===e.top&&(this.tribute.menu.style.top="auto"),t&&this.scrollIntoView(),window.setTimeout((()=>{let i={width:this.tribute.menu.offsetWidth,height:this.tribute.menu.offsetHeight},n=this.isMenuOffScreen(e,i),r=window.innerWidth>i.width&&(n.left||n.right),o=window.innerHeight>i.height&&(n.top||n.bottom);(r||o)&&(this.tribute.menu.style.cssText="display: none",this.positionMenuAtCaret(t))}),0)}else this.tribute.menu.style.cssText="display: none"}get menuContainerIsBody(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}selectElement(t,e,i){let n,r=t;if(e)for(var o=0;o<e.length;o++){if(r=r.childNodes[e[o]],void 0===r)return;for(;r.length<i;)i-=r.length,r=r.nextSibling;0!==r.childNodes.length||r.length||(r=r.previousSibling)}let s=this.getWindowSelection();n=this.getDocument().createRange(),n.setStart(r,i),n.setEnd(r,i),n.collapse(!0);try{s.removeAllRanges()}catch(t){}s.addRange(n),t.focus()}replaceTriggerText(t,e,i,n,r){let o=this.getTriggerInfo(!0,i,e,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o){let e=this.tribute.current,i=new CustomEvent("tribute-replaced",{detail:{item:r,instance:e,context:o,event:n}});if(this.isContentEditable(e.element)){t+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";let e=o.mentionPosition+o.mentionText.length;this.tribute.autocompleteMode||(e+=o.mentionTriggerChar.length),this.pasteHtml(t,o.mentionPosition,e)}else{let e=this.tribute.current.element,i="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";t+=i;let n=o.mentionPosition,r=o.mentionPosition+o.mentionText.length+i.length;this.tribute.autocompleteMode||(r+=o.mentionTriggerChar.length-1),e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}e.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),e.element.dispatchEvent(i)}}pasteHtml(t,e,i){let n,r;r=this.getWindowSelection(),n=this.getDocument().createRange(),n.setStart(r.anchorNode,e),n.setEnd(r.anchorNode,i),n.deleteContents();let o=this.getDocument().createElement("div");o.innerHTML=t;let s,l,u=this.getDocument().createDocumentFragment();for(;s=o.firstChild;)l=u.appendChild(s);n.insertNode(u),l&&(n=n.cloneRange(),n.setStartAfter(l),n.collapse(!0),r.removeAllRanges(),r.addRange(n))}getWindowSelection(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}getNodePositionInParent(t){if(null===t.parentNode)return 0;for(var e=0;e<t.parentNode.childNodes.length;e++)if(t.parentNode.childNodes[e]===t)return e}getContentEditableSelectedPath(t){let e,i=this.getWindowSelection(),n=i.anchorNode,r=[];if(null!=n){let t,o=n.contentEditable;for(;null!==n&&"true"!==o;)t=this.getNodePositionInParent(n),r.push(t),n=n.parentNode,null!==n&&(o=n.contentEditable);return r.reverse(),e=i.getRangeAt(0).startOffset,{selected:n,path:r,offset:e}}}getTextPrecedingCurrentSelection(){let t=this.tribute.current,e="";if(this.isContentEditable(t.element)){let t=this.getWindowSelection().anchorNode;if(null!=t){let i=t.textContent,n=this.getWindowSelection().getRangeAt(0).startOffset;i&&n>=0&&(e=i.substring(0,n))}}else{let t=this.tribute.current.element;if(t){let i=t.selectionStart;t.value&&i>=0&&(e=t.value.substring(0,i))}}return e}getLastWordInText(t){let e=(t=t.replace(/\u00A0/g," ")).split(/\s+/);return e[e.length-1].trim()}getTriggerInfo(t,e,i,n,r){let o,s,l,u=this.tribute.current;if(this.isContentEditable(u.element)){let t=this.getContentEditableSelectedPath(u);t&&(o=t.selected,s=t.path,l=t.offset)}else o=this.tribute.current.element;let c=this.getTextPrecedingCurrentSelection(),a=this.getLastWordInText(c);if(r)return{mentionPosition:c.length-a.length,mentionText:a,mentionSelectedElement:o,mentionSelectedPath:s,mentionSelectedOffset:l};if(null!=c){let r,u=-1;if(this.tribute.collection.forEach((t=>{let e=t.trigger,n=t.requireLeadingSpace?this.lastIndexWithLeadingSpace(c,e):c.lastIndexOf(e);n>u&&(u=n,r=e,i=t.requireLeadingSpace)})),u>=0&&(0===u||!i||/[\xA0\s]/g.test(c.substring(u-1,u)))){let i=c.substring(u+r.length,c.length);r=c.substring(u,u+r.length);let a=i.substring(0,1),h=i.length>0&&(" "===a||" "===a);e&&(i=i.trim());let d=n?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=d.test(i),!h&&(t||!d.test(i)))return{mentionPosition:u,mentionText:i,mentionSelectedElement:o,mentionSelectedPath:s,mentionSelectedOffset:l,mentionTriggerChar:r}}}}lastIndexWithLeadingSpace(t,e){let i=t.split("").reverse().join(""),n=-1;for(let r=0,o=t.length;r<o;r++){let o=r===t.length-1,s=/\s/.test(i[r+1]),l=!0;for(let t=e.length-1;t>=0;t--)if(e[t]!==i[r-t]){l=!1;break}if(l&&(o||s)){n=t.length-1-r;break}}return n}isContentEditable(t){return"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName}isMenuOffScreen(t,e){let i=window.innerWidth,n=window.innerHeight,r=document.documentElement,o=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),s=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),l="number"==typeof t.top?t.top:s+n-t.bottom-e.height,u="number"==typeof t.right?t.right:t.left+e.width,c="number"==typeof t.bottom?t.bottom:t.top+e.height,a="number"==typeof t.left?t.left:o+i-t.right-e.width;return{top:l<Math.floor(s),right:u>Math.ceil(o+i),bottom:c>Math.ceil(s+n),left:a<Math.floor(o)}}getMenuDimensions(){let t={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",t.width=this.tribute.menu.offsetWidth,t.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",t}getTextAreaOrInputUnderlinePosition(t,e,i){let n=null!==window.mozInnerScreenX,r=this.getDocument().createElement("div");r.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(r);let o=r.style,s=window.getComputedStyle?getComputedStyle(t):t.currentStyle;o.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(o.wordWrap="break-word"),o.position="absolute",o.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((t=>{o[t]=s[t]})),n?(o.width=parseInt(s.width)-2+"px",t.scrollHeight>parseInt(s.height)&&(o.overflowY="scroll")):o.overflow="hidden",r.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(r.textContent=r.textContent.replace(/\s/g," "));let l=this.getDocument().createElement("span");l.textContent=t.value.substring(e)||".",r.appendChild(l);let u=t.getBoundingClientRect(),c=document.documentElement,a=(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0),h=(window.pageYOffset||c.scrollTop)-(c.clientTop||0),d=0,g=0;this.menuContainerIsBody&&(d=u.top,g=u.left);let m={top:d+h+l.offsetTop+parseInt(s.borderTopWidth)+parseInt(s.fontSize)-t.scrollTop,left:g+a+l.offsetLeft+parseInt(s.borderLeftWidth)},p=window.innerWidth,b=window.innerHeight,f=this.getMenuDimensions(),v=this.isMenuOffScreen(m,f);v.right&&(m.right=p-m.left,m.left="auto");let w=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(v.bottom){let t=w-(b-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);m.bottom=t+(b-u.top-l.offsetTop),m.top="auto"}return v=this.isMenuOffScreen(m,f),v.left&&(m.left=p>f.width?a+p-f.width:a,delete m.right),v.top&&(m.top=b>f.height?h+b-f.height:h,delete m.bottom),this.getDocument().body.removeChild(r),m}getContentEditableCaretPosition(t){let e,i=this.getWindowSelection();e=this.getDocument().createRange(),e.setStart(i.anchorNode,t),e.setEnd(i.anchorNode,t),e.collapse(!1);let n=e.getBoundingClientRect(),r=document.documentElement,o=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),s=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),l={left:n.left+o,top:n.top+n.height+s},u=window.innerWidth,c=window.innerHeight,a=this.getMenuDimensions(),h=this.isMenuOffScreen(l,a);h.right&&(l.left="auto",l.right=u-n.left-o);let d=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(h.bottom){let t=d-(c-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);l.top="auto",l.bottom=t+(c-n.top)}return h=this.isMenuOffScreen(l,a),h.left&&(l.left=u>a.width?o+u-a.width:o,delete l.right),h.top&&(l.top=c>a.height?s+c-a.height:s,delete l.bottom),this.menuContainerIsBody||(l.left=l.left?l.left-this.tribute.menuContainer.offsetLeft:l.left,l.top=l.top?l.top-this.tribute.menuContainer.offsetTop:l.top),l}scrollIntoView(t){let e,i=this.menu;if(void 0===i)return;for(;void 0===e||0===e.height;)if(e=i.getBoundingClientRect(),0===e.height&&(i=i.childNodes[0],void 0===i||!i.getBoundingClientRect))return;let n=e.top,r=n+e.height;if(n<0)window.scrollTo(0,window.pageYOffset+e.top-20);else if(r>window.innerHeight){let t=window.pageYOffset+e.top-20;t-window.pageYOffset>100&&(t=window.pageYOffset+100);let i=window.pageYOffset-(window.innerHeight-r);i>t&&(i=t),window.scrollTo(0,i)}}}class u{constructor(t){this.tribute=t,this.tribute.search=this}simpleFilter(t,e){return e.filter((e=>this.test(t,e)))}test(t,e){return null!==this.match(t,e)}match(t,e,i){i=i||{},e.length;let n=i.pre||"",r=i.post||"",o=i.caseSensitive&&e||e.toLowerCase();if(i.skip)return{rendered:e,score:0};t=i.caseSensitive&&t||t.toLowerCase();let s=this.traverse(o,t,0,0,[]);return s?{rendered:this.render(e,s.cache,n,r),score:s.score}:null}traverse(t,e,i,n,r){if(e.length===n)return{score:this.calculateScore(r),cache:r.slice()};if(t.length===i||e.length-n>t.length-i)return;let o,s,l=e[n],u=t.indexOf(l,i);for(;u>-1;){if(r.push(u),s=this.traverse(t,e,u+1,n+1,r),r.pop(),!s)return o;(!o||o.score<s.score)&&(o=s),u=t.indexOf(l,u+1)}return o}calculateScore(t){let e=0,i=1;return t.forEach(((n,r)=>{r>0&&(t[r-1]+1===n?i+=i+1:i=1),e+=i})),e}render(t,e,i,n){var r=t.substring(0,e[0]);return e.forEach(((o,s)=>{r+=i+t[o]+n+t.substring(o+1,e[s+1]?e[s+1]:t.length)})),r}filter(t,e,i){return i=i||{},e.reduce(((e,n,r,o)=>{let s=n;i.extract&&(s=i.extract(n),s||(s=""));let l=this.match(t,s,i);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:r,original:n}),e}),[]).sort(((t,e)=>e.score-t.score||t.index-e.index))}}class c{constructor({values:t=null,iframe:e=null,selectClass:i="highlight",containerClass:r="tribute-container",itemClass:a="",trigger:h="@",autocompleteMode:d=!1,selectTemplate:g=null,menuItemTemplate:m=null,lookup:p="key",fillAttr:b="value",collection:f=null,menuContainer:v=null,noMatchTemplate:w=null,requireLeadingSpace:C=!0,allowSpaces:T=!1,replaceTextSuffix:y=null,positionMenu:S=!0,spaceSelectsMatch:M=!1,searchOpts:I={},menuItemLimit:L=null,menuShowMinLength:E=0}){if(this.autocompleteMode=d,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=v,this.allowSpaces=T,this.replaceTextSuffix=y,this.positionMenu=S,this.hasTrailingSpace=!1,this.spaceSelectsMatch=M,this.autocompleteMode&&(h="",T=!1),t)this.collection=[{trigger:h,iframe:e,selectClass:i,containerClass:r,itemClass:a,selectTemplate:(g||c.defaultSelectTemplate).bind(this),menuItemTemplate:(m||c.defaultMenuItemTemplate).bind(this),noMatchTemplate:(t=>"string"==typeof t?""===t.trim()?null:t:"function"==typeof t?t.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:p,fillAttr:b,values:t,requireLeadingSpace:C,searchOpts:I,menuItemLimit:L,menuShowMinLength:E}];else{if(!f)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&n.warn("Tribute in autocomplete mode does not work for collections"),this.collection=f.map((t=>({trigger:t.trigger||h,iframe:t.iframe||e,selectClass:t.selectClass||i,containerClass:t.containerClass||r,itemClass:t.itemClass||a,selectTemplate:(t.selectTemplate||c.defaultSelectTemplate).bind(this),menuItemTemplate:(t.menuItemTemplate||c.defaultMenuItemTemplate).bind(this),noMatchTemplate:(t=>"string"==typeof t?""===t.trim()?null:t:"function"==typeof t?t.bind(this):w||function(){return"<li>No Match Found!</li>"}.bind(this))(w),lookup:t.lookup||p,fillAttr:t.fillAttr||b,values:t.values,requireLeadingSpace:t.requireLeadingSpace,searchOpts:t.searchOpts||I,menuItemLimit:t.menuItemLimit||L,menuShowMinLength:t.menuShowMinLength||E})))}new l(this),new o(this),new s(this),new u(this)}get isActive(){return this._isActive}set isActive(t){if(this._isActive!=t&&(this._isActive=t,this.current.element)){let e=new CustomEvent(`tribute-active-${t}`);this.current.element.dispatchEvent(e)}}static defaultSelectTemplate(t){return void 0===t?`${this.current.collection.trigger}${this.current.mentionText}`:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+t.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+t.original[this.current.collection.fillAttr]}static defaultMenuItemTemplate(t){return t.string}static inputTypes(){return["TEXTAREA","INPUT"]}triggers(){return this.collection.map((t=>t.trigger))}attach(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(void 0!==r&&t instanceof r&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array){let i=t.length;for(var e=0;e<i;++e)this._attach(t[e])}else this._attach(t)}_attach(t){t.hasAttribute("data-tribute")&&n.warn("Tribute was already bound to "+t.nodeName),this.ensureEditable(t),this.events.bind(t),t.setAttribute("data-tribute",!0)}ensureEditable(t){if(-1===c.inputTypes().indexOf(t.nodeName)){if(!t.contentEditable)throw new Error("[Tribute] Cannot bind to "+t.nodeName);t.contentEditable=!0}}createMenu(t){let e=this.range.getDocument().createElement("div"),i=this.range.getDocument().createElement("ul");return e.className=t,e.appendChild(i),this.menuContainer?this.menuContainer.appendChild(e):this.range.getDocument().body.appendChild(e)}showMenuFor(t,e){if(this.isActive&&this.current.element===t&&this.current.mentionText===this.currentMentionTextSnapshot)return;this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),t.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");const i=t=>{if(!this.isActive)return;let i=this.search.filter(this.current.mentionText,t,{pre:this.current.collection.searchOpts.pre||"<span>",post:this.current.collection.searchOpts.post||"</span>",skip:this.current.collection.searchOpts.skip,extract:t=>{if("string"==typeof this.current.collection.lookup)return t[this.current.collection.lookup];if("function"==typeof this.current.collection.lookup)return this.current.collection.lookup(t,this.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});this.current.collection.menuItemLimit&&(i=i.slice(0,this.current.collection.menuItemLimit)),this.current.filteredItems=i;let n=this.menu.querySelector("ul");if(this.range.positionMenuAtCaret(e),!i.length){let t=new CustomEvent("tribute-no-match",{detail:this.menu});return this.current.element.dispatchEvent(t),void("function"==typeof this.current.collection.noMatchTemplate&&!this.current.collection.noMatchTemplate()||!this.current.collection.noMatchTemplate?this.hideMenu():"function"==typeof this.current.collection.noMatchTemplate?n.innerHTML=this.current.collection.noMatchTemplate():n.innerHTML=this.current.collection.noMatchTemplate)}n.innerHTML="";let r=this.range.getDocument().createDocumentFragment();i.forEach(((t,e)=>{let i=this.range.getDocument().createElement("li");i.setAttribute("data-index",e),i.className=this.current.collection.itemClass,i.addEventListener("mousemove",(t=>{let[e,i]=this._findLiTarget(t.target);0!==t.movementY&&this.events.setActiveLi(i)})),this.menuSelected===e&&i.classList.add(this.current.collection.selectClass),i.innerHTML=this.current.collection.menuItemTemplate(t),r.appendChild(i)})),n.appendChild(r)};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,i):i(this.current.collection.values)}_findLiTarget(t){if(!t)return[];const e=t.getAttribute("data-index");return e?[t,e]:this._findLiTarget(t.parentNode)}showMenuForCollection(t,e){t!==document.activeElement&&this.placeCaretAtEnd(t),this.current.collection=this.collection[e||0],this.current.externalTrigger=!0,this.current.element=t,t.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(t,this.current.collection.trigger),this.showMenuFor(t)}placeCaretAtEnd(t){if(t.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var i=window.getSelection();i.removeAllRanges(),i.addRange(e)}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.collapse(!1),n.select()}}insertTextAtCursor(t){var e,i;(i=(e=window.getSelection()).getRangeAt(0)).deleteContents();var n=document.createTextNode(t);i.insertNode(n),i.selectNodeContents(n),i.collapse(!1),e.removeAllRanges(),e.addRange(i)}insertAtCaret(t,e){var i=t.scrollTop,n=t.selectionStart,r=t.value.substring(0,n),o=t.value.substring(t.selectionEnd,t.value.length);t.value=r+e+o,n+=e.length,t.selectionStart=n,t.selectionEnd=n,t.focus(),t.scrollTop=i}hideMenu(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}selectItemAtIndex(t,e){if("number"!=typeof(t=parseInt(t))||isNaN(t))return;let i=this.current.filteredItems[t],n=this.current.collection.selectTemplate(i);null!==n&&this.replaceText(n,e,i)}replaceText(t,e,i){this.range.replaceTriggerText(t,!0,!0,e,i)}_append(t,e,i){if("function"==typeof t.values)throw new Error("Unable to append to values, as it is a function.");t.values=i?e:t.values.concat(e)}append(t,e,i){let n=parseInt(t);if("number"!=typeof n)throw new Error("please provide an index for the collection to update.");let r=this.collection[n];this._append(r,e,i)}appendCurrent(t,e){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,t,e)}detach(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(void 0!==r&&t instanceof r&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array){let i=t.length;for(var e=0;e<i;++e)this._detach(t[e])}else this._detach(t)}_detach(t){this.events.unbind(t),t.tributeMenu&&this.menuEvents.unbind(t.tributeMenu),setTimeout((()=>{t.removeAttribute("data-tribute"),this.isActive=!1,t.tributeMenu&&t.tributeMenu.remove()}))}}const a=c},42761:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZD0iTS00LTRoMjR2MjRILTRWLTR6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTggMEMzLjYgMCAwIDMuNiAwIDhzMy42IDggOCA4IDgtMy42IDgtOC0zLjYtOC04LTh6IiBmaWxsPSIjZWQ0ODRjIi8+PHBhdGggZD0iTTUgNi41aDZjLjggMCAxLjUuNyAxLjUgMS41cy0uNyAxLjUtMS41IDEuNUg1Yy0uOCAwLTEuNS0uNy0xLjUtMS41UzQuMiA2LjUgNSA2LjV6IiBmaWxsPSIjZmRmZmZmIi8+PC9zdmc+Cg=="},87210:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZD0iTTQuOCAxMS4yaDYuNFY0LjhINC44djYuNHpNOCAwQzMuNiAwIDAgMy42IDAgOHMzLjYgOCA4IDggOC0zLjYgOC04LTMuNi04LTgtOHoiIGZpbGw9IiM0OWIzODIiLz48L3N2Zz4K"},94659:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTS00LTRoMjR2MjRILTR6Ii8+PHBhdGggZD0iTTYuOS4xQzMgLjYtLjEgNC0uMSA4YzAgNC40IDMuNiA4IDggOCA0IDAgNy40LTMgOC02LjktMS4yIDEuMy0yLjkgMi4xLTQuNyAyLjEtMy41IDAtNi40LTIuOS02LjQtNi40IDAtMS45LjgtMy42IDIuMS00Ljd6IiBmaWxsPSIjZjRhMzMxIi8+PC9zdmc+Cg=="},39896:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzIyMiI+PHBhdGggZD0iTTE1LjQgMTYuNkwxMC44IDEybDQuNi00LjZMMTQgNmwtNiA2IDYgNiAxLjQtMS40eiIvPjwvc3ZnPg=="},76899:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzIyMiI+PHBhdGggZD0iTTE4LjQgNy40TDE3IDZsLTYgNiA2IDYgMS40LTEuNC00LjYtNC42IDQuNi00LjZtLTYgMEwxMSA2bC02IDYgNiA2IDEuNC0xLjRMNy44IDEybDQuNi00LjZ6Ii8+PC9zdmc+"},88931:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzIyMiI+PHBhdGggZD0iTTUuNiA3LjRMNyA2bDYgNi02IDYtMS40LTEuNCA0LjYtNC42LTQuNi00LjZtNiAwTDEzIDZsNiA2LTYgNi0xLjQtMS40IDQuNi00LjYtNC42LTQuNnoiLz48L3N2Zz4="},16556:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iIzIyMiI+PHBhdGggZD0iTTguNiAxNi42bDQuNi00LjYtNC42LTQuNkwxMCA2bDYgNi02IDYtMS40LTEuNHoiLz48L3N2Zz4="},8014:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var n=i(42639),r=i(3181);function o(t,{countAnsiEscapeCodes:e=!1}={}){return""===t?0:(e||(t=(0,n.Z)(t)),""===t?0:t.match((0,r.Z)()).length)}}}]);
//# sourceMappingURL=3240-3240.js.map?v=29c327d1e4e42959b82f