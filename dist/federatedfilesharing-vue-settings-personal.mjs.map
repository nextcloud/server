{"version":3,"file":"federatedfilesharing-vue-settings-personal.mjs","sources":["../apps/federatedfilesharing/src/components/PersonalSettings.vue","../apps/federatedfilesharing/src/main-personal.js"],"sourcesContent":["<!--\n - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcSettingsSection :name=\"t('federatedfilesharing', 'Federated Cloud')\"\n\t\t:description=\"t('federatedfilesharing', 'You can share with anyone who uses a Nextcloud server or other Open Cloud Mesh (OCM) compatible servers and services! Just put their Federated Cloud ID in the share dialog. It looks like person@cloud.example.com')\"\n\t\t:doc-url=\"docUrlFederated\">\n\t\t<p class=\"cloud-id-text\">\n\t\t\t{{ t('federatedfilesharing', 'Your Federated Cloud ID:') }}\n\t\t\t<strong id=\"cloudid\">{{ cloudId }}</strong>\n\t\t\t<NcButton ref=\"clipboard\"\n\t\t\t\t:title=\"copyLinkTooltip\"\n\t\t\t\t:aria-label=\"copyLinkTooltip\"\n\t\t\t\tclass=\"clipboard\"\n\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t@click.prevent=\"copyCloudId\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Clipboard :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</p>\n\n\t\t<p class=\"social-button\">\n\t\t\t{{ t('federatedfilesharing', 'Share it so your friends can share files with you:') }}<br>\n\t\t\t<NcButton @click=\"goTo(shareFacebookUrl)\">\n\t\t\t\t{{ t('federatedfilesharing', 'Facebook') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Facebook :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton @click=\"goTo(shareTwitterUrl)\">\n\t\t\t\t{{ t('federatedfilesharing', 'Twitter') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Twitter :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton @click=\"goTo(shareDiasporaUrl)\">\n\t\t\t\t{{ t('federatedfilesharing', 'Diaspora') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<svg width=\"20\"\n\t\t\t\t\t\theight=\"20\"\n\t\t\t\t\t\tviewBox=\"-10 -5 1034 1034\"\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M502 197q-96 0-96.5 1.5t-1.5 137-1.5 138-2 2.5T266 432.5 132.5 390t-30 94T74 578l232 77q21 8 21 10t-79.5 117.5T168 899t79.5 56.5T328 1011t81-110 82-110 41 55l83 115q43 60 44 60t79.5-58 79-59-76-112.5-76-113.5T795 632.5t129.5-44-28-94T867 400t-128 42-128.5 43-2.5-7.5-1-38.5l-3-108q-4-133-5-133.5t-97-.5z\" /></svg>\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton @click=\"showHtml = !showHtml\"\n\t\t\t\tclass=\"social-button__website-button\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Web :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('federatedfilesharing', 'Add to your website') }}\n\t\t\t</NcButton>\n\t\t</p>\n\n\t\t<template v-if=\"showHtml\">\n\t\t\t<p style=\"margin: 10px 0\">\n\t\t\t\t<a target=\"_blank\"\n\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t:href=\"reference\"\n\t\t\t\t\t:style=\"backgroundStyle\">\n\t\t\t\t\t<span :style=\"linkStyle\" />\n\t\t\t\t\t{{ t('federatedfilesharing', 'Share with me via Nextcloud') }}\n\t\t\t\t</a>\n\t\t\t</p>\n\n\t\t\t<p>\n\t\t\t\t{{ t('federatedfilesharing', 'HTML Code:') }}\n\t\t\t\t<br>\n\t\t\t\t<pre>{{ htmlCode }}</pre>\n\t\t\t</p>\n\t\t</template>\n\t</NcSettingsSection>\n</template>\n\n<script>\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport Twitter from 'vue-material-design-icons/Twitter.vue'\nimport Facebook from 'vue-material-design-icons/Facebook.vue'\nimport Web from 'vue-material-design-icons/Web.vue'\nimport Clipboard from 'vue-material-design-icons/Clipboard.vue'\n\nexport default {\n\tname: 'PersonalSettings',\n\tcomponents: {\n\t\tNcButton,\n\t\tNcSettingsSection,\n\t\tTwitter,\n\t\tFacebook,\n\t\tWeb,\n\t\tClipboard,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcolor: loadState('federatedfilesharing', 'color'),\n\t\t\ttextColor: loadState('federatedfilesharing', 'textColor'),\n\t\t\tlogoPath: loadState('federatedfilesharing', 'logoPath'),\n\t\t\treference: loadState('federatedfilesharing', 'reference'),\n\t\t\tcloudId: loadState('federatedfilesharing', 'cloudId'),\n\t\t\tdocUrlFederated: loadState('federatedfilesharing', 'docUrlFederated'),\n\t\t\tshowHtml: false,\n\t\t\tisCopied: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmessageWithURL() {\n\t\t\treturn t('federatedfilesharing', 'Share with me through my #Nextcloud Federated Cloud ID, see {url}', { url: this.reference })\n\t\t},\n\t\tmessageWithoutURL() {\n\t\t\treturn t('federatedfilesharing', 'Share with me through my #Nextcloud Federated Cloud ID')\n\t\t},\n\t\tshareDiasporaUrl() {\n\t\t\treturn `https://share.diasporafoundation.org/?title=${encodeURIComponent(this.messageWithoutURL)}&url=${encodeURIComponent(this.reference)}`\n\t\t},\n\t\tshareTwitterUrl() {\n\t\t\treturn `https://twitter.com/intent/tweet?text=${encodeURIComponent(this.messageWithURL)}`\n\t\t},\n\t\tshareFacebookUrl() {\n\t\t\treturn `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.reference)}`\n\t\t},\n\t\tlogoPathAbsolute() {\n\t\t\treturn window.location.protocol + '//' + window.location.host + this.logoPath\n\t\t},\n\t\tbackgroundStyle() {\n\t\t\treturn `padding:10px;background-color:${this.color};color:${this.textColor};border-radius:3px;padding-left:4px;`\n\t\t},\n\t\tlinkStyle() {\n\t\t\treturn `background-image:url(${this.logoPathAbsolute});width:50px;height:30px;position:relative;top:8px;background-size:contain;display:inline-block;background-repeat:no-repeat; background-position: center center;`\n\t\t},\n\t\thtmlCode() {\n\t\t\treturn `<a target=\"_blank\" rel=\"noreferrer noopener\" href=\"${this.reference}\" style=\"${this.backgroundStyle}\">\n\t<span style=\"${this.linkStyle}\"></span>\n\t${t('federatedfilesharing', 'Share with me via Nextcloud')}\n</a>`\n\t\t},\n\t\tcopyLinkTooltip() {\n\t\t\treturn this.isCopied ? t('federatedfilesharing', 'Cloud ID copied to the clipboard') : t('federatedfilesharing', 'Copy to clipboard')\n\t\t},\n\t},\n\tmethods: {\n\t\tasync copyCloudId() {\n\t\t\tif (!navigator.clipboard) {\n\t\t\t\t// Clipboard API not available\n\t\t\t\tshowError(t('federatedfilesharing', 'Clipboard is not available'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tawait navigator.clipboard.writeText(this.cloudId)\n\t\t\tthis.isCopied = true\n\t\t\tshowSuccess(t('federatedfilesharing', 'Copied!'))\n\t\t\tthis.$refs.clipboard.$el.focus()\n\t\t},\n\t\tgoTo(url) {\n\t\t\twindow.location.href = url\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.social-button {\n\t\tmargin-top: 0.5rem;\n\t\tbutton {\n\t\t\tdisplay: inline-flex;\n\t\t\tmargin-left: 0.5rem;\n\t\t\tmargin-top: 1rem;\n\t\t}\n\t\t&__website-button {\n\t\t\twidth: min(100%, 400px) !important;\n\t\t}\n\t}\n\t.cloud-id-text {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t\tbutton {\n\t\t\tdisplay: inline-flex;\n\t\t}\n\t}\n\tpre {\n\t\tmargin-top: 0;\n\t\twhite-space: pre-wrap;\n\t}\n\t#cloudid {\n\t\tmargin-left: 0.25rem;\n\t}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport Vue from 'vue'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport PersonalSettings from './components/PersonalSettings.vue'\n\nVue.mixin({\n\tmethods: {\n\t\tt,\n\t},\n})\n\nconst PersonalSettingsView = Vue.extend(PersonalSettings)\nnew PersonalSettingsView().$mount('#vue-personal-federated')\n"],"names":["_sfc_main","NcButton","NcSettingsSection","Twitter","Facebook","Web","Clipboard","loadState","showError","showSuccess","url","Vue","t","PersonalSettingsView","PersonalSettings"],"mappings":";wQAqFA,MAAAA,EAAA,CACA,KAAA,mBACA,WAAA,CACA,SAAAC,EACA,kBAAAC,EACA,QAAAC,EACA,SAAAC,EACA,IAAAC,EACA,UAAAC,CACA,EACA,MAAA,CACA,MAAA,CACA,MAAAC,EAAA,uBAAA,OAAA,EACA,UAAAA,EAAA,uBAAA,WAAA,EACA,SAAAA,EAAA,uBAAA,UAAA,EACA,UAAAA,EAAA,uBAAA,WAAA,EACA,QAAAA,EAAA,uBAAA,SAAA,EACA,gBAAAA,EAAA,uBAAA,iBAAA,EACA,SAAA,GACA,SAAA,EACA,CACA,EACA,SAAA,CACA,gBAAA,CACA,OAAA,EAAA,uBAAA,oEAAA,CAAA,IAAA,KAAA,UAAA,CACA,EACA,mBAAA,CACA,OAAA,EAAA,uBAAA,wDAAA,CACA,EACA,kBAAA,CACA,MAAA,+CAAA,0BAAA,KAAA,iBAAA,EAAA,SAAA,0BAAA,KAAA,SAAA,EACA,EACA,iBAAA,CACA,MAAA,yCAAA,0BAAA,KAAA,cAAA,EACA,EACA,kBAAA,CACA,MAAA,gDAAA,0BAAA,KAAA,SAAA,EACA,EACA,kBAAA,CACA,OAAA,OAAA,SAAA,SAAA,KAAA,OAAA,SAAA,KAAA,KAAA,QACA,EACA,iBAAA,CACA,MAAA,iCAAA,YAAA,MAAA,WAAA,YAAA,UAAA,uCACA,EACA,WAAA,CACA,MAAA,wBAAA,YAAA,iBAAA,mKACA,EACA,UAAA,CACA,MAAA,sDAAA,YAAA,UAAA,aAAA,YAAA,gBAAA,sBACA,YAAA,UAAA,gBACA,SAAA,uBAAA,6BAAA,EAAA,SAEA,EACA,iBAAA,CACA,OAAA,KAAA,SAAA,EAAA,uBAAA,kCAAA,EAAA,EAAA,uBAAA,mBAAA,CACA,CACA,EACA,QAAA,CACA,MAAA,aAAA,CACA,GAAA,CAAA,UAAA,UAAA,CAEAC,EAAA,EAAA,uBAAA,4BAAA,CAAA,EACA,MACA,CACA,MAAA,UAAA,UAAA,UAAA,KAAA,OAAA,EACA,KAAA,SAAA,GACAC,EAAA,EAAA,uBAAA,SAAA,CAAA,EACA,KAAA,MAAA,UAAA,IAAA,MAAA,CACA,EACA,KAAAC,EAAA,CACA,OAAA,SAAA,KAAAA,CACA,CACA,CACA,i1FCrJAC,EAAI,MAAM,CACT,QAAS,CACV,EAAEC,CACA,CACF,CAAC,EAED,MAAMC,EAAuBF,EAAI,OAAOG,CAAgB,EACxD,IAAID,EAAoB,EAAG,OAAO,yBAAyB"}