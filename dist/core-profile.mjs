/*! third party licenses: dist/vendor.LICENSE.txt */
var o=Object.defineProperty;var c=(t,s,e)=>s in t?o(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var n=(t,s,e)=>c(t,typeof s!="symbol"?s+"":s,e);import{a_ as l,u,v as d,H as _,D as p,F as h,N as f,X as m,b_ as r,bW as y,bZ as C,bS as i,c0 as v,cg as g,aV as A}from"./core-common.mjs";import"./chunks/index-PaKKd09k.mjs";import{z as b}from"./chunks/_plugin-vue2_normalizer-VrK6B12S-BQkexw0P.mjs";import{a0 as k,a1 as w,S,n as I}from"./chunks/icons-TElqpmA8.mjs";const N=l({name:"Profile",components:{AccountIcon:k,MapMarkerIcon:w,NcActionLink:u,NcActions:d,NcAppContent:_,NcAvatar:p,NcButton:h,NcContent:f,NcEmptyContent:m,PencilIcon:S},data(){return{...r("core","profileParameters",{userId:null,displayname:null,address:null,organisation:null,role:null,headline:null,biography:null,actions:[],isUserAvatarVisible:!1}),status:r("core","status",{}),sections:window.OCA.Core.ProfileSections.getSections()}},computed:{isCurrentUser(){var t;return((t=y())==null?void 0:t.uid)===this.userId},allActions(){return this.actions},primaryAction(){return this.allActions.length?this.allActions[0]:null},otherActions(){return console.warn(this.allActions),this.allActions.length>1?this.allActions.slice(1):[]},settingsUrl(){return C("/settings/user")},emptyProfileMessage(){return this.isCurrentUser?i("core","You have not added any info yet"):i("core","{user} has not added any info yet",{user:this.displayname||this.userId})}},mounted(){document.title="".concat(this.displayname||this.userId," - ").concat(document.title),v("user_status:status.updated",this.handleStatusUpdate)},beforeDestroy(){g("user_status:status.updated",this.handleStatusUpdate)},methods:{t:i,handleStatusUpdate(t){this.isCurrentUser&&t.userId===this.userId&&(this.status=t)},openStatusModal(){const t=document.querySelector(".user-status-menu-item");this.isCurrentUser&&(t?t.click():b(i("core","Error opening the user status modal, try hard refreshing the page")))}}});var U=function(){var t=this,s=t._self._c;return t._self._setupProxy,s("NcContent",{attrs:{"app-name":"profile"}},[s("NcAppContent",[s("div",{staticClass:"profile__header"},[s("div",{staticClass:"profile__header__container"},[s("div",{staticClass:"profile__header__container__placeholder"}),s("div",{staticClass:"profile__header__container__displayname"},[s("h2",[t._v(t._s(t.displayname||t.userId))]),t.isCurrentUser?s("NcButton",{attrs:{type:"primary",href:t.settingsUrl},scopedSlots:t._u([{key:"icon",fn:function(){return[s("PencilIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4260349822)},[t._v(" "+t._s(t.t("core","Edit Profile"))+" ")]):t._e()],1),t.status.icon||t.status.message?s("NcButton",{attrs:{disabled:!t.isCurrentUser,type:t.isCurrentUser?"tertiary":"tertiary-no-background"},on:{click:t.openStatusModal}},[t._v(" "+t._s(t.status.icon)+" "+t._s(t.status.message)+" ")]):t._e()],1)]),s("div",{staticClass:"profile__wrapper"},[s("div",{staticClass:"profile__content"},[s("div",{staticClass:"profile__sidebar"},[s("NcAvatar",{staticClass:"avatar",class:{interactive:t.isCurrentUser},attrs:{user:t.userId,size:180,"show-user-status":!0,"show-user-status-compact":!1,"disable-menu":!0,"disable-tooltip":!0,"is-no-user":!t.isUserAvatarVisible},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openStatusModal.apply(null,arguments)}}}),s("div",{staticClass:"user-actions"},[t.primaryAction?s("NcButton",{staticClass:"user-actions__primary",attrs:{type:"primary",href:t.primaryAction.target,icon:t.primaryAction.icon,target:t.primaryAction.id==="phone"?"_self":"_blank"},scopedSlots:t._u([{key:"icon",fn:function(){return[s("img",{staticClass:"user-actions__primary__icon",attrs:{src:t.primaryAction.icon,alt:""}})]},proxy:!0}],null,!1,1780240256)},[t._v(" "+t._s(t.primaryAction.title)+" ")]):t._e(),s("NcActions",{staticClass:"user-actions__other",attrs:{inline:4}},t._l(t.otherActions,function(e){return s("NcActionLink",{key:e.id,attrs:{"close-after-click":!0,href:e.target,target:e.id==="phone"?"_self":"_blank"},scopedSlots:t._u([{key:"icon",fn:function(){return[s("img",{staticClass:"user-actions__other__icon",attrs:{src:e.icon,alt:""}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.title)+" ")])}),1)],1)],1),s("div",{staticClass:"profile__blocks"},[t.organisation||t.role||t.address?s("div",{staticClass:"profile__blocks-details"},[t.organisation||t.role?s("div",{staticClass:"detail"},[s("p",[t._v(t._s(t.organisation)+" "),t.organisation&&t.role?s("span",[t._v("â€¢")]):t._e(),t._v(" "+t._s(t.role))])]):t._e(),t.address?s("div",{staticClass:"detail"},[s("p",[s("MapMarkerIcon",{staticClass:"map-icon",attrs:{size:16}}),t._v(" "+t._s(t.address)+" ")],1)]):t._e()]):t._e(),t.headline||t.biography||t.sections.length>0?[t.headline?s("h3",{staticClass:"profile__blocks-headline"},[t._v(" "+t._s(t.headline)+" ")]):t._e(),t.biography?s("p",{staticClass:"profile__blocks-biography"},[t._v(" "+t._s(t.biography)+" ")]):t._e(),t._l(t.sections,function(e,a){return s("div",{key:a,ref:"section-"+a,refInFor:!0,staticClass:"profile__additionalContent"},[s(e(t.$refs["section-"+a],t.userId),{tag:"component",attrs:{"user-id":t.userId}})],1)})]:s("NcEmptyContent",{staticClass:"profile__blocks-empty-info",attrs:{name:t.emptyProfileMessage,description:t.t("core","The headline and about sections will show up here")},scopedSlots:t._u([{key:"icon",fn:function(){return[s("AccountIcon",{attrs:{size:60}})]},proxy:!0}])})],2)])])])],1)},P=[],M=I(N,U,P,!1,null,"ce06f457");const O=M.exports;class x{constructor(){n(this,"_sections");this._sections=[]}registerSection(s){this._sections.push(s)}getSections(){return this._sections}}window.OCA||(window.OCA={}),window.OCA.Core||(window.OCA.Core={}),Object.assign(window.OCA.Core,{ProfileSections:new x});const z=A.extend(O);window.addEventListener("DOMContentLoaded",()=>{new z().$mount("#content")});
