"use strict";
(globalThis["webpackChunknextcloud_ui_legacy"] = globalThis["webpackChunknextcloud_ui_legacy"] || []).push([["node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CtWlxGEm_mjs"],{

/***/ "./node_modules/@nextcloud/dialogs/dist/chunks/FilePicker-CtWlxGEm.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/dist/chunks/FilePicker-CtWlxGEm.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FilePicker)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/@nextcloud/dialogs/node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _nextcloud_event_bus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nextcloud/event-bus */ "./node_modules/@nextcloud/event-bus/dist/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcDialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @nextcloud/vue/components/NcDialog */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcDialog/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcEmptyContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @nextcloud/vue/components/NcEmptyContent */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcEmptyContent/index.mjs");
/* harmony import */ var _plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_plugin-vue_export-helper-1tPrXgE0.mjs */ "./node_modules/@nextcloud/dialogs/dist/chunks/_plugin-vue_export-helper-1tPrXgE0.mjs");
/* harmony import */ var _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @nextcloud/files */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/files/dist/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @nextcloud/vue/components/NcButton */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcButton/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcCheckboxRadioSwitch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @nextcloud/vue/components/NcCheckboxRadioSwitch */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcCheckboxRadioSwitch/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcDateTime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @nextcloud/vue/components/NcDateTime */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcDateTime/index.mjs");
/* harmony import */ var _mdi_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mdi/js */ "./node_modules/@mdi/js/mdi.js");
/* harmony import */ var _nextcloud_sharing__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @nextcloud/sharing */ "./node_modules/@nextcloud/sharing/dist/index.js");
/* harmony import */ var _nextcloud_vue_components_NcIconSvgWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @nextcloud/vue/components/NcIconSvgWrapper */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcIconSvgWrapper/index.mjs");
/* harmony import */ var _preview_BIbJGxXF_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./preview-BIbJGxXF.mjs */ "./node_modules/@nextcloud/dialogs/dist/chunks/preview-BIbJGxXF.mjs");
/* harmony import */ var _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./index-hZPKu-D6.mjs */ "./node_modules/@nextcloud/dialogs/dist/chunks/index-hZPKu-D6.mjs");
/* harmony import */ var _nextcloud_axios__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @nextcloud/axios */ "./node_modules/@nextcloud/axios/dist/index.mjs");
/* harmony import */ var _nextcloud_initial_state__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @nextcloud/initial-state */ "./node_modules/@nextcloud/initial-state/dist/index.js");
/* harmony import */ var _nextcloud_router__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @nextcloud/router */ "./node_modules/@nextcloud/router/dist/index.mjs");
/* harmony import */ var _nextcloud_sharing_public__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @nextcloud/sharing/public */ "./node_modules/@nextcloud/sharing/dist/public.js");
/* harmony import */ var _vueuse_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @vueuse/core */ "./node_modules/@nextcloud/dialogs/node_modules/@vueuse/shared/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcActionInput__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @nextcloud/vue/components/NcActionInput */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActionInput/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcActions__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @nextcloud/vue/components/NcActions */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActions/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcBreadcrumb__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @nextcloud/vue/components/NcBreadcrumb */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumb/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcBreadcrumbs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @nextcloud/vue/components/NcBreadcrumbs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumbs/index.mjs");
/* harmony import */ var _nextcloud_auth__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @nextcloud/auth */ "./node_modules/@nextcloud/auth/dist/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcSelect__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @nextcloud/vue/components/NcSelect */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcSelect/index.mjs");
/* harmony import */ var _nextcloud_vue_components_NcTextField__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @nextcloud/vue/components/NcTextField */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcTextField/index.mjs");
/* harmony import */ var _nextcloud_paths__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @nextcloud/paths */ "./node_modules/@nextcloud/paths/dist/index.mjs");
/* harmony import */ var cancelable_promise__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! cancelable-promise */ "./node_modules/cancelable-promise/umd/CancelablePromise.js");




























const _sfc_main$e = {
  name: "FileIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$c = ["aria-hidden", "aria-label"];
const _hoisted_2$b = ["fill", "width", "height"];
const _hoisted_3$a = { d: "M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z" };
const _hoisted_4$a = { key: 0 };
function _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon file-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$a, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$a, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$b))
  ], 16, _hoisted_1$c);
}
const IconFile = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$e, [["render", _sfc_render$7]]);
const _sfc_main$d = {
  name: "MenuDownIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$b = ["aria-hidden", "aria-label"];
const _hoisted_2$a = ["fill", "width", "height"];
const _hoisted_3$9 = { d: "M7,10L12,15L17,10H7Z" };
const _hoisted_4$9 = { key: 0 };
function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon menu-down-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$9, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$9, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$a))
  ], 16, _hoisted_1$b);
}
const IconSortDescending = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$d, [["render", _sfc_render$6]]);
const _sfc_main$c = {
  name: "MenuUpIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$a = ["aria-hidden", "aria-label"];
const _hoisted_2$9 = ["fill", "width", "height"];
const _hoisted_3$8 = { d: "M7,15L12,10L17,15H7Z" };
const _hoisted_4$8 = { key: 0 };
function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon menu-up-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$8, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$8, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$9))
  ], 16, _hoisted_1$a);
}
const IconSortAscending = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$c, [["render", _sfc_render$5]]);
const _sfc_main$b = {
  name: "FolderIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$9 = ["aria-hidden", "aria-label"];
const _hoisted_2$8 = ["fill", "width", "height"];
const _hoisted_3$7 = { d: "M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z" };
const _hoisted_4$7 = { key: 0 };
function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon folder-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$7, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$7, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$8))
  ], 16, _hoisted_1$9);
}
const IconFolder = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$b, [["render", _sfc_render$4]]);
const fileListIconStyles = {
  "file-picker__file-icon": "_file-picker__file-icon_3v9zx_9",
  "file-picker__file-icon--primary": "_file-picker__file-icon--primary_3v9zx_21",
  "file-picker__file-icon-overlay": "_file-picker__file-icon-overlay_3v9zx_25"
};
const _sfc_main$a = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FilePreview",
  props: {
    node: {},
    cropImagePreviews: { type: Boolean }
  },
  setup(__props) {
    const props = __props;
    const fileListIconStyles$1 = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(fileListIconStyles);
    const {
      previewURL,
      previewLoaded
    } = (0,_preview_BIbJGxXF_mjs__WEBPACK_IMPORTED_MODULE_12__.u)((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, "node"), (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => ({ cropPreview: props.cropImagePreviews })));
    const isFile = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.node.type === _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.FileType.File);
    const folderDecorationIcon = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
      if (props.node.type !== _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.FileType.Folder) {
        return null;
      }
      if (props.node.attributes?.["is-encrypted"] === 1) {
        return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiLock;
      }
      if (props.node.attributes?.["is-tag"]) {
        return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiTag;
      }
      const shareTypes = Object.values(props.node.attributes?.["share-types"] || {}).flat();
      if (shareTypes.some((type) => type === _nextcloud_sharing__WEBPACK_IMPORTED_MODULE_10__.ShareType.Link || type === _nextcloud_sharing__WEBPACK_IMPORTED_MODULE_10__.ShareType.Email)) {
        return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiLink;
      }
      if (shareTypes.length > 0) {
        return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiAccountPlus;
      }
      switch (props.node.attributes?.["mount-type"]) {
        case "external":
        case "external-session":
          return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiNetwork;
        case "group":
          return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiGroup;
        case "shared":
          return _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiAccountPlus;
      }
      return null;
    });
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {
        style: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeStyle)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(previewLoaded) ? { backgroundImage: `url(${(0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(previewURL)})` } : void 0),
        class: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)(fileListIconStyles$1.value["file-picker__file-icon"])
      }, [
        !(0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(previewLoaded) ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 0 }, [
          isFile.value ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconFile, {
            key: 0,
            size: 32
          })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 1 }, [
            folderDecorationIcon.value ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcIconSvgWrapper__WEBPACK_IMPORTED_MODULE_11__["default"]), {
              key: 0,
              class: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)(fileListIconStyles$1.value["file-picker__file-icon-overlay"]),
              inline: "",
              path: folderDecorationIcon.value,
              size: 16
            }, null, 8, ["class", "path"])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconFolder, {
              class: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)(fileListIconStyles$1.value["file-picker__file-icon--primary"]),
              size: 32
            }, null, 8, ["class"])
          ], 64))
        ], 64)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ], 6);
    };
  }
});
const _hoisted_1$8 = ["tabindex", "aria-selected", "data-filename"];
const _hoisted_2$7 = { class: "row-name" };
const _hoisted_3$6 = {
  class: "file-picker__name-container",
  "data-testid": "row-name"
};
const _hoisted_4$6 = ["title", "textContent"];
const _hoisted_5$1 = ["textContent"];
const _hoisted_6$1 = { class: "row-size" };
const _hoisted_7$1 = { class: "row-modified" };
const _sfc_main$9 = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FileListRow",
  props: {
    allowPickDirectory: { type: Boolean },
    selected: { type: Boolean },
    showCheckbox: { type: Boolean },
    canPick: { type: Boolean },
    node: {},
    cropImagePreviews: { type: Boolean }
  },
  emits: ["update:selected", "enterDirectory"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit2 = __emit;
    const timestamp = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.node.mtime ?? 0);
    const displayName = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.node.attributes?.displayName || props.node.basename.slice(0, props.node.extension ? -props.node.extension.length : void 0));
    const fileExtension = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.node.extension);
    const isDirectory = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.node.type === _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.FileType.Folder);
    const isPickable = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.canPick && (props.allowPickDirectory || !isDirectory.value));
    const isNavigatable = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => (props.node.permissions & _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.Permission.READ) === _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.Permission.READ);
    function toggleSelected() {
      if (!isPickable.value) {
        return;
      }
      emit2("update:selected", !props.selected);
    }
    function handleClick() {
      if (isDirectory.value) {
        if (isNavigatable.value) {
          emit2("enterDirectory", props.node);
        }
      } else {
        toggleSelected();
      }
    }
    function handleKeyDown(event) {
      if (event.key === "Enter") {
        handleClick();
      }
    }
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)({
        tabindex: __props.showCheckbox && !isDirectory.value ? void 0 : 0,
        "aria-selected": !isPickable.value ? void 0 : __props.selected,
        class: ["file-picker__row", [
          {
            "file-picker__row--selected": __props.selected && !__props.showCheckbox,
            "file-picker__row--not-navigatable": isDirectory.value && !isNavigatable.value,
            "file-picker__row--not-pickable": !isPickable.value
          }
        ]],
        "data-filename": __props.node.basename,
        "data-testid": "file-list-row"
      }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toHandlers)({
        click: handleClick,
        /* same as tabindex -> if we hide the checkbox or this is a directory we need keyboard access to enter the directory or select the node */
        ...!__props.showCheckbox || isDirectory.value ? { keydown: handleKeyDown } : {}
      }, true)), [
        __props.showCheckbox ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("td", {
          key: 0,
          class: "row-checkbox",
          onClick: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withModifiers)(() => {
          }, ["stop"])
        }, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcCheckboxRadioSwitch__WEBPACK_IMPORTED_MODULE_7__["default"]), {
            "aria-label": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Select the row for {nodename}", { nodename: displayName.value }),
            disabled: !isPickable.value,
            "data-testid": "row-checkbox",
            "model-value": __props.selected,
            "onUpdate:modelValue": toggleSelected
          }, null, 8, ["aria-label", "disabled", "model-value"])
        ])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true),
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_2$7, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_3$6, [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(_sfc_main$a, {
              node: __props.node,
              "crop-image-previews": __props.cropImagePreviews
            }, null, 8, ["node", "crop-image-previews"]),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", {
              class: "file-picker__file-name",
              title: displayName.value,
              textContent: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(displayName.value)
            }, null, 8, _hoisted_4$6),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", {
              class: "file-picker__file-extension",
              textContent: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(fileExtension.value)
            }, null, 8, _hoisted_5$1)
          ])
        ]),
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_6$1, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.formatFileSize)(__props.node.size || 0)), 1),
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_7$1, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcDateTime__WEBPACK_IMPORTED_MODULE_8__["default"]), {
            timestamp: timestamp.value,
            "ignore-seconds": ""
          }, null, 8, ["timestamp"])
        ])
      ], 16, _hoisted_1$8);
    };
  }
});
const FileListRow = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$9, [["__scopeId", "data-v-a5daea8d"]]);
const _hoisted_1$7 = {
  "aria-hidden": "true",
  class: "file-picker__row loading-row"
};
const _hoisted_2$6 = {
  key: 0,
  class: "row-checkbox"
};
const _hoisted_3$5 = { class: "row-name" };
const _hoisted_4$5 = { class: "row-wrapper" };
const _sfc_main$8 = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "LoadingTableRow",
  props: {
    showCheckbox: { type: Boolean }
  },
  setup(__props) {
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("tr", _hoisted_1$7, [
        __props.showCheckbox ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("td", _hoisted_2$6, [..._cache[0] || (_cache[0] = [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", null, null, -1)
        ])])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true),
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", _hoisted_3$5, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_4$5, [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", {
              class: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(fileListIconStyles)["file-picker__file-icon"])
            }, null, 2),
            _cache[1] || (_cache[1] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", null, null, -1))
          ])
        ]),
        _cache[2] || (_cache[2] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", { class: "row-size" }, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span")
        ], -1)),
        _cache[3] || (_cache[3] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("td", { class: "row-modified" }, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span")
        ], -1))
      ]);
    };
  }
});
const LoadingTableRow = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$8, [["__scopeId", "data-v-1f96131b"]]);
function useFilesSettings() {
  const filesUserState = (0,_nextcloud_initial_state__WEBPACK_IMPORTED_MODULE_15__.loadState)("files", "config", null);
  const showHiddenFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(filesUserState?.show_hidden ?? true);
  const sortFavoritesFirst = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(filesUserState?.sort_favorites_first ?? true);
  const cropImagePreviews = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(filesUserState?.crop_image_previews ?? true);
  (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(async () => {
    if (!(0,_nextcloud_sharing_public__WEBPACK_IMPORTED_MODULE_17__.isPublicShare)()) {
      try {
        const { data } = await _nextcloud_axios__WEBPACK_IMPORTED_MODULE_14__["default"].get((0,_nextcloud_router__WEBPACK_IMPORTED_MODULE_16__.generateUrl)("/apps/files/api/v1/configs"));
        showHiddenFiles.value = data?.data?.show_hidden ?? false;
        sortFavoritesFirst.value = data?.data?.sort_favorites_first ?? true;
        cropImagePreviews.value = data?.data?.crop_image_previews ?? true;
      } catch (error) {
        _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.l.error("Could not load files settings", error);
        (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.s)((0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Could not load files settings"));
      }
    } else {
      _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.l.debug("Skip loading files settings - currently on public share");
    }
  });
  return {
    showHiddenFiles,
    sortFavoritesFirst,
    cropImagePreviews
  };
}
function useFilesViews(currentView) {
  const convertOrder = (order2) => order2 === "asc" ? "ascending" : order2 === "desc" ? "descending" : "none";
  const filesViewsState = (0,_nextcloud_initial_state__WEBPACK_IMPORTED_MODULE_15__.loadState)("files", "viewConfigs", null);
  const filesViewConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)({
    sortBy: filesViewsState?.files?.sorting_mode ?? "basename",
    order: convertOrder(filesViewsState?.files?.sorting_direction ?? "asc")
  });
  const recentViewConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)({
    sortBy: filesViewsState?.recent?.sorting_mode ?? "basename",
    order: convertOrder(filesViewsState?.recent?.sorting_direction ?? "asc")
  });
  const favoritesViewConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)({
    sortBy: filesViewsState?.favorites?.sorting_mode ?? "basename",
    order: convertOrder(filesViewsState?.favorites?.sorting_direction ?? "asc")
  });
  (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(async () => {
    if (!(0,_nextcloud_sharing_public__WEBPACK_IMPORTED_MODULE_17__.isPublicShare)()) {
      try {
        const { data } = await _nextcloud_axios__WEBPACK_IMPORTED_MODULE_14__["default"].get((0,_nextcloud_router__WEBPACK_IMPORTED_MODULE_16__.generateUrl)("/apps/files/api/v1/views"));
        filesViewConfig.value = {
          sortBy: data?.data?.files?.sorting_mode ?? "basename",
          order: convertOrder(data?.data?.files?.sorting_direction)
        };
        favoritesViewConfig.value = {
          sortBy: data?.data?.favorites?.sorting_mode ?? "basename",
          order: convertOrder(data?.data?.favorites?.sorting_direction)
        };
        recentViewConfig.value = {
          sortBy: data?.data?.recent?.sorting_mode ?? "basename",
          order: convertOrder(data?.data?.recent?.sorting_direction)
        };
      } catch (error) {
        _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.l.error("Could not load files views", error);
        (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.s)((0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Could not load files views"));
      }
    } else {
      _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.l.debug("Skip loading files views - currently on public share");
    }
  });
  const currentConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => (0,_vueuse_core__WEBPACK_IMPORTED_MODULE_18__.toValue)(currentView || "files") === "files" ? filesViewConfig.value : (0,_vueuse_core__WEBPACK_IMPORTED_MODULE_18__.toValue)(currentView) === "recent" ? recentViewConfig.value : favoritesViewConfig.value);
  const sortBy = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => currentConfig.value.sortBy);
  const order = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => currentConfig.value.order);
  return {
    filesViewConfig,
    favoritesViewConfig,
    recentViewConfig,
    currentConfig,
    sortBy,
    order
  };
}
const _hoisted_1$6 = {
  key: 0,
  class: "row-checkbox"
};
const _hoisted_2$5 = { class: "hidden-visually" };
const _hoisted_3$4 = ["aria-sort"];
const _hoisted_4$4 = { class: "header-wrapper" };
const _hoisted_5 = {
  key: 2,
  style: { "width": "44px" }
};
const _hoisted_6 = ["aria-sort"];
const _hoisted_7 = {
  key: 2,
  style: { "width": "44px" }
};
const _hoisted_8 = ["aria-sort"];
const _hoisted_9 = {
  key: 2,
  style: { "width": "44px" }
};
const _sfc_main$7 = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FileList",
  props: /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeModels)({
    currentView: {},
    multiselect: { type: Boolean },
    allowPickDirectory: { type: Boolean },
    loading: { type: Boolean },
    files: {},
    canPick: { type: Function }
  }, {
    "path": { required: true },
    "pathModifiers": {},
    "selectedFiles": { required: true },
    "selectedFilesModifiers": {}
  }),
  emits: ["update:path", "update:selectedFiles"],
  setup(__props) {
    const path = (0,vue__WEBPACK_IMPORTED_MODULE_0__.useModel)(__props, "path");
    const selectedFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.useModel)(__props, "selectedFiles");
    const props = __props;
    const customSortingConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)();
    const { currentConfig: filesAppSorting } = useFilesViews(props.currentView);
    const sortingConfig = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => customSortingConfig.value ?? filesAppSorting.value);
    const sortByName = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => sortingConfig.value.sortBy === "basename" ? sortingConfig.value.order === "none" ? void 0 : sortingConfig.value.order : void 0);
    const sortBySize = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => sortingConfig.value.sortBy === "size" ? sortingConfig.value.order === "none" ? void 0 : sortingConfig.value.order : void 0);
    const sortByModified = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => sortingConfig.value.sortBy === "mtime" ? sortingConfig.value.order === "none" ? void 0 : sortingConfig.value.order : void 0);
    function toggleSorting(sortBy) {
      if (sortingConfig.value.sortBy === sortBy) {
        if (sortingConfig.value.order === "ascending") {
          customSortingConfig.value = { sortBy: sortingConfig.value.sortBy, order: "descending" };
        } else {
          customSortingConfig.value = { sortBy: sortingConfig.value.sortBy, order: "ascending" };
        }
      } else {
        customSortingConfig.value = { sortBy, order: "ascending" };
      }
    }
    const { sortFavoritesFirst, cropImagePreviews } = useFilesSettings();
    const sortedFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
      return (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.sortNodes)(props.files, {
        sortFoldersFirst: true,
        sortFavoritesFirst: sortFavoritesFirst.value,
        sortingOrder: sortingConfig.value.order === "descending" ? "desc" : "asc",
        sortingMode: sortingConfig.value.sortBy
      });
    });
    const selectableFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.files.filter((file) => props.allowPickDirectory || file.type !== _nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.FileType.Folder));
    const allSelected = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => !props.loading && selectedFiles.value.length > 0 && selectedFiles.value.length >= selectableFiles.value.length);
    function onSelectAll() {
      if (selectedFiles.value.length < selectableFiles.value.length) {
        selectedFiles.value = [...selectableFiles.value];
      } else {
        selectedFiles.value = [];
      }
    }
    function onNodeSelected(file) {
      if (selectedFiles.value.includes(file)) {
        selectedFiles.value = selectedFiles.value.filter((f) => f.path !== file.path);
      } else {
        if (props.multiselect) {
          selectedFiles.value = [...selectedFiles.value, file];
        } else {
          selectedFiles.value = [file];
        }
      }
    }
    function onChangeDirectory(dir) {
      path.value = dir.path;
    }
    const skeletonNumber = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(4);
    const fileContainer = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)();
    {
      const resize = () => (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(() => {
        const nodes = fileContainer.value?.parentElement?.children || [];
        let height = fileContainer.value?.parentElement?.clientHeight || 450;
        for (let index = 0; index < nodes.length; index++) {
          if (!fileContainer.value?.isSameNode(nodes[index])) {
            height -= nodes[index].clientHeight;
          }
        }
        skeletonNumber.value = Math.max(1, Math.floor((height - 50) / 50));
      });
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
        window.addEventListener("resize", resize);
        resize();
      });
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.onUnmounted)(() => {
        window.removeEventListener("resize", resize);
      });
    }
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {
        ref_key: "fileContainer",
        ref: fileContainer,
        class: "file-picker__files"
      }, [
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("table", null, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("thead", null, [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tr", null, [
              __props.multiselect ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("th", _hoisted_1$6, [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", _hoisted_2$5, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Select entry")), 1),
                __props.multiselect ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcCheckboxRadioSwitch__WEBPACK_IMPORTED_MODULE_7__["default"]), {
                  key: 0,
                  "aria-label": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Select all entries"),
                  "data-testid": "select-all-checkbox",
                  "model-value": allSelected.value,
                  "onUpdate:modelValue": onSelectAll
                }, null, 8, ["aria-label", "model-value"])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
              ])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true),
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
                "aria-sort": sortByName.value,
                class: "row-name"
              }, [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_4$4, [
                  _cache[3] || (_cache[3] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", { class: "file-picker__header-preview" }, null, -1)),
                  (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcButton__WEBPACK_IMPORTED_MODULE_6__["default"]), {
                    "data-test": "file-picker_sort-name",
                    variant: "tertiary",
                    wide: "",
                    onClick: _cache[0] || (_cache[0] = ($event) => toggleSorting("basename"))
                  }, {
                    icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                      sortByName.value === "ascending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortAscending, {
                        key: 0,
                        size: 20
                      })) : sortByName.value === "descending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortDescending, {
                        key: 1,
                        size: 20
                      })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_5))
                    ]),
                    default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" " + (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Name")), 1)
                    ]),
                    _: 1
                  })
                ])
              ], 8, _hoisted_3$4),
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
                "aria-sort": sortBySize.value,
                class: "row-size"
              }, [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcButton__WEBPACK_IMPORTED_MODULE_6__["default"]), {
                  variant: "tertiary",
                  wide: "",
                  onClick: _cache[1] || (_cache[1] = ($event) => toggleSorting("size"))
                }, {
                  icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    sortBySize.value === "ascending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortAscending, {
                      key: 0,
                      size: 20
                    })) : sortBySize.value === "descending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortDescending, {
                      key: 1,
                      size: 20
                    })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_7))
                  ]),
                  default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" " + (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Size")), 1)
                  ]),
                  _: 1
                })
              ], 8, _hoisted_6),
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("th", {
                "aria-sort": sortByModified.value,
                class: "row-modified"
              }, [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcButton__WEBPACK_IMPORTED_MODULE_6__["default"]), {
                  variant: "tertiary",
                  wide: "",
                  onClick: _cache[2] || (_cache[2] = ($event) => toggleSorting("mtime"))
                }, {
                  icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    sortByModified.value === "ascending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortAscending, {
                      key: 0,
                      size: 20
                    })) : sortByModified.value === "descending" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(IconSortDescending, {
                      key: 1,
                      size: 20
                    })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", _hoisted_9))
                  ]),
                  default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" " + (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Modified")), 1)
                  ]),
                  _: 1
                })
              ], 8, _hoisted_8)
            ])
          ]),
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("tbody", null, [
            __props.loading ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 0 }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)(skeletonNumber.value, (index) => {
              return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(LoadingTableRow, {
                key: index,
                "show-checkbox": __props.multiselect
              }, null, 8, ["show-checkbox"]);
            }), 128)) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 1 }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)(sortedFiles.value, (file) => {
              return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(FileListRow, {
                key: file.fileid || file.path,
                "allow-pick-directory": __props.allowPickDirectory,
                "show-checkbox": __props.multiselect,
                "can-pick": (__props.multiselect || selectedFiles.value.length === 0 || selectedFiles.value.includes(file)) && (__props.canPick === void 0 || __props.canPick(file)),
                selected: selectedFiles.value.includes(file),
                node: file,
                "crop-image-previews": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(cropImagePreviews),
                "onUpdate:selected": ($event) => onNodeSelected(file),
                onEnterDirectory: onChangeDirectory
              }, null, 8, ["allow-pick-directory", "show-checkbox", "can-pick", "selected", "node", "crop-image-previews", "onUpdate:selected"]);
            }), 128))
          ])
        ])
      ], 512);
    };
  }
});
const FileList = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$7, [["__scopeId", "data-v-38620705"]]);
const _sfc_main$6 = {
  name: "HomeIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$5 = ["aria-hidden", "aria-label"];
const _hoisted_2$4 = ["fill", "width", "height"];
const _hoisted_3$3 = { d: "M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" };
const _hoisted_4$3 = { key: 0 };
function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon home-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$3, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$3, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$4))
  ], 16, _hoisted_1$5);
}
const IconHome = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$6, [["render", _sfc_render$3]]);
const _sfc_main$5 = {
  name: "PlusIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$4 = ["aria-hidden", "aria-label"];
const _hoisted_2$3 = ["fill", "width", "height"];
const _hoisted_3$2 = { d: "M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" };
const _hoisted_4$2 = { key: 0 };
function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon plus-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$2, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$2, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$3))
  ], 16, _hoisted_1$4);
}
const IconPlus = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$5, [["render", _sfc_render$2]]);
const _sfc_main$4 = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FilePickerBreadcrumbs",
  props: {
    path: {},
    showMenu: { type: Boolean }
  },
  emits: ["update:path", "create-node"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit2 = __emit;
    const actionsOpen = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
    const newNodeName = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)("");
    const nameInput = (0,vue__WEBPACK_IMPORTED_MODULE_0__.useTemplateRef)("nameInput");
    function validateInput() {
      const name = newNodeName.value.trim();
      const input = nameInput.value?.$el?.querySelector("input");
      let validity = "";
      if (name.length === 0) {
        validity = (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Folder name cannot be empty.");
      } else if (name.includes("/")) {
        validity = (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)('"/" is not allowed inside a folder name.');
      } else if (["..", "."].includes(name)) {
        validity = (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)('"{name}" is an invalid folder name.', { name });
      } else if (window.OC.config?.blacklist_files_regex && name.match(window.OC.config?.blacklist_files_regex)) {
        validity = (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)('"{name}" is not an allowed folder name', { name });
      }
      if (input) {
        input.setCustomValidity(validity);
      }
      return validity === "";
    }
    function onSubmit() {
      const name = newNodeName.value.trim();
      if (validateInput()) {
        actionsOpen.value = false;
        emit2("create-node", name);
        newNodeName.value = "";
      }
    }
    const pathElements = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.path.split("/").filter((v) => v !== "").map((v, i, elements) => ({
      name: v,
      path: "/" + elements.slice(0, i + 1).join("/")
    })));
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcBreadcrumbs__WEBPACK_IMPORTED_MODULE_22__["default"]), { class: "file-picker__breadcrumbs" }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.createSlots)({
        default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcBreadcrumb__WEBPACK_IMPORTED_MODULE_21__["default"]), {
            name: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("All files"),
            title: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Home"),
            onClick: _cache[0] || (_cache[0] = ($event) => emit2("update:path", "/"))
          }, {
            icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconHome, { size: 20 })
            ]),
            _: 1
          }, 8, ["name", "title"]),
          ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)(pathElements.value, (dir) => {
            return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcBreadcrumb__WEBPACK_IMPORTED_MODULE_21__["default"]), {
              key: dir.path,
              name: dir.name,
              title: dir.path,
              onClick: ($event) => emit2("update:path", dir.path)
            }, null, 8, ["name", "title", "onClick"]);
          }), 128))
        ]),
        _: 2
      }, [
        __props.showMenu ? {
          name: "actions",
          fn: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcActions__WEBPACK_IMPORTED_MODULE_20__["default"]), {
              open: actionsOpen.value,
              "onUpdate:open": _cache[2] || (_cache[2] = ($event) => actionsOpen.value = $event),
              "aria-label": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Create directory"),
              "force-menu": true,
              "force-name": true,
              "menu-name": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("New"),
              variant: "secondary",
              onClose: _cache[3] || (_cache[3] = ($event) => newNodeName.value = "")
            }, {
              icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconPlus, { size: 20 })
              ]),
              default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcActionInput__WEBPACK_IMPORTED_MODULE_19__["default"]), {
                  ref_key: "nameInput",
                  ref: nameInput,
                  modelValue: newNodeName.value,
                  "onUpdate:modelValue": [
                    _cache[1] || (_cache[1] = ($event) => newNodeName.value = $event),
                    validateInput
                  ],
                  label: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("New folder"),
                  placeholder: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("New folder name"),
                  onSubmit
                }, {
                  icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconFolder, { size: 20 })
                  ]),
                  _: 1
                }, 8, ["modelValue", "label", "placeholder"])
              ]),
              _: 1
            }, 8, ["open", "aria-label", "menu-name"])
          ]),
          key: "0"
        } : void 0
      ]), 1024);
    };
  }
});
const FilePickerBreadcrumbs = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$4, [["__scopeId", "data-v-4e6fd4e4"]]);
const _sfc_main$3 = {
  name: "CloseIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$3 = ["aria-hidden", "aria-label"];
const _hoisted_2$2 = ["fill", "width", "height"];
const _hoisted_3$1 = { d: "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" };
const _hoisted_4$1 = { key: 0 };
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon close-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3$1, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4$1, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$2))
  ], 16, _hoisted_1$3);
}
const IconClose = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$3, [["render", _sfc_render$1]]);
const _sfc_main$2 = {
  name: "MagnifyIcon",
  emits: ["click"],
  props: {
    title: {
      type: String
    },
    fillColor: {
      type: String,
      default: "currentColor"
    },
    size: {
      type: Number,
      default: 24
    }
  }
};
const _hoisted_1$2 = ["aria-hidden", "aria-label"];
const _hoisted_2$1 = ["fill", "width", "height"];
const _hoisted_3 = { d: "M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" };
const _hoisted_4 = { key: 0 };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("span", (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(_ctx.$attrs, {
    "aria-hidden": $props.title ? null : "true",
    "aria-label": $props.title,
    class: "material-design-icon magnify-icon",
    role: "img",
    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$emit("click", $event))
  }), [
    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("svg", {
      fill: $props.fillColor,
      class: "material-design-icon__svg",
      width: $props.size,
      height: $props.size,
      viewBox: "0 0 24 24"
    }, [
      (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("path", _hoisted_3, [
        $props.title ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("title", _hoisted_4, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)($props.title), 1)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ])
    ], 8, _hoisted_2$1))
  ], 16, _hoisted_1$2);
}
const IconMagnify = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$2, [["render", _sfc_render]]);
function useViews(isAnonymous) {
  const allViews = [
    {
      id: "files",
      label: (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("All files"),
      icon: _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiFolder
    },
    {
      id: "recent",
      label: (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Recent"),
      icon: _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiClock
    },
    {
      id: "favorites",
      label: (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Favorites"),
      icon: _mdi_js__WEBPACK_IMPORTED_MODULE_9__.mdiStar
    }
  ];
  const availableViews = isAnonymous.value ? allViews.filter(({ id }) => id === "files") : allViews;
  return {
    allViews,
    availableViews
  };
}
const _hoisted_1$1 = {
  key: 0,
  class: "file-picker__side"
};
const _sfc_main$1 = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FilePickerNavigation",
  props: {
    currentView: {},
    filterString: {},
    isCollapsed: { type: Boolean },
    disabledNavigation: { type: Boolean }
  },
  emits: ["update:currentView", "update:filterString"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit2 = __emit;
    const { availableViews } = useViews((0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)((0,_nextcloud_auth__WEBPACK_IMPORTED_MODULE_23__.getCurrentUser)() === null));
    const currentViewObject = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => availableViews.filter((v) => v.id === props.currentView)[0] ?? availableViews[0]);
    const updateFilterValue = (value) => emit2("update:filterString", value);
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, [
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcTextField__WEBPACK_IMPORTED_MODULE_25__["default"]), {
          class: "file-picker__filter-input",
          label: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Filter file list"),
          "show-trailing-button": !!__props.filterString,
          "model-value": __props.filterString,
          "onUpdate:modelValue": updateFilterValue,
          onTrailingButtonClick: _cache[0] || (_cache[0] = ($event) => updateFilterValue(""))
        }, {
          "trailing-button-icon": (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconClose, { size: 16 })
          ]),
          default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconMagnify, { size: 16 })
          ]),
          _: 1
        }, 8, ["label", "show-trailing-button", "model-value"]),
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(availableViews).length > 1 && !__props.disabledNavigation ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 0 }, [
          !__props.isCollapsed ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("ul", _hoisted_1$1, [
            ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(availableViews), (view) => {
              return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("li", {
                key: view.id
              }, [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcButton__WEBPACK_IMPORTED_MODULE_6__["default"]), {
                  variant: __props.currentView === view.id ? "primary" : "tertiary",
                  wide: true,
                  onClick: ($event) => _ctx.$emit("update:currentView", view.id)
                }, {
                  icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcIconSvgWrapper__WEBPACK_IMPORTED_MODULE_11__["default"]), {
                      path: view.icon,
                      size: 20
                    }, null, 8, ["path"])
                  ]),
                  default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" " + (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(view.label), 1)
                  ]),
                  _: 2
                }, 1032, ["variant", "onClick"])
              ]);
            }), 128))
          ])) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcSelect__WEBPACK_IMPORTED_MODULE_24__["default"]), {
            key: 1,
            "aria-label": (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Current view selector"),
            clearable: false,
            searchable: false,
            options: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(availableViews),
            "model-value": currentViewObject.value,
            "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => emit2("update:currentView", $event.id))
          }, null, 8, ["aria-label", "options", "model-value"]))
        ], 64)) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("", true)
      ], 64);
    };
  }
});
const FilePickerNavigation = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main$1, [["__scopeId", "data-v-86223490"]]);
function getRecentNodes(client) {
  const controller = new AbortController();
  const lastTwoWeek = Math.round(Date.now() / 1e3) - 60 * 60 * 24 * 14;
  return new cancelable_promise__WEBPACK_IMPORTED_MODULE_27__.CancelablePromise(async (resolve, reject, onCancel) => {
    onCancel(() => controller.abort());
    try {
      const { data } = await client.search("/", {
        signal: controller.signal,
        details: true,
        data: (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davGetRecentSearch)(lastTwoWeek)
      });
      const nodes = data.results.map((result) => (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davResultToNode)(result));
      resolve(nodes);
    } catch (error) {
      reject(error);
    }
  });
}
function getNodes(client, directoryPath) {
  const controller = new AbortController();
  return new cancelable_promise__WEBPACK_IMPORTED_MODULE_27__.CancelablePromise(async (resolve, reject, onCancel) => {
    onCancel(() => controller.abort());
    try {
      const results = await client.getDirectoryContents((0,_nextcloud_paths__WEBPACK_IMPORTED_MODULE_26__.joinPaths)(_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davRootPath, directoryPath), {
        signal: controller.signal,
        details: true,
        includeSelf: true,
        data: (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davGetDefaultPropfind)()
      });
      const nodes = results.data.map((result) => (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davResultToNode)(result));
      resolve({
        contents: nodes.filter(({ path }) => path !== directoryPath),
        folder: nodes.find(({ path }) => path === directoryPath)
      });
    } catch (error) {
      reject(error);
    }
  });
}
async function getFile(client, path) {
  const { data } = await client.stat((0,_nextcloud_paths__WEBPACK_IMPORTED_MODULE_26__.joinPaths)(_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davRootPath, path), {
    details: true,
    data: (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davGetDefaultPropfind)()
  });
  return (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davResultToNode)(data);
}
function useDAVFiles(currentView, currentPath) {
  const client = (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davGetClient)();
  const files = (0,vue__WEBPACK_IMPORTED_MODULE_0__.shallowRef)([]);
  const folder = (0,vue__WEBPACK_IMPORTED_MODULE_0__.shallowRef)(null);
  const isLoading = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(true);
  const promise = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
  async function createDirectory(name) {
    const path = (0,_nextcloud_paths__WEBPACK_IMPORTED_MODULE_26__.joinPaths)(currentPath.value, name);
    await client.createDirectory((0,_nextcloud_paths__WEBPACK_IMPORTED_MODULE_26__.joinPaths)(_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.davRootPath, path));
    const directory = await getFile(client, path);
    files.value = [...files.value, directory];
    return directory;
  }
  async function loadDAVFiles() {
    if (promise.value) {
      promise.value.cancel();
    }
    isLoading.value = true;
    if (currentView.value === "favorites") {
      promise.value = (0,_nextcloud_files__WEBPACK_IMPORTED_MODULE_5__.getFavoriteNodes)(client, currentPath.value);
    } else if (currentView.value === "recent") {
      promise.value = getRecentNodes(client);
    } else {
      promise.value = getNodes(client, currentPath.value);
    }
    const content = await promise.value;
    if (!content) {
      return;
    } else if ("folder" in content) {
      folder.value = content.folder;
      files.value = content.contents;
    } else {
      folder.value = null;
      files.value = content;
    }
    promise.value = null;
    isLoading.value = false;
  }
  (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)([currentView, currentPath], () => loadDAVFiles());
  (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => loadDAVFiles());
  return {
    isLoading,
    files,
    folder,
    loadFiles: loadDAVFiles,
    createDirectory
  };
}
function useMimeFilter(allowedMIMETypes) {
  const splittedTypes = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => allowedMIMETypes.value.map((filter) => filter.split("/")));
  const isSupportedMimeType = (mime) => {
    const mimeTypeArray = mime.split("/");
    return splittedTypes.value.some(([type, subtype]) => (
      // check mime type matches or is wildcard
      (mimeTypeArray[0] === type || type === "*") && (mimeTypeArray[1] === subtype || subtype === "*")
    ));
  };
  return {
    isSupportedMimeType
  };
}
const _hoisted_1 = { class: "file-picker__main" };
const _hoisted_2 = {
  key: 1,
  class: "file-picker__view"
};
const _sfc_main = /* @__PURE__ */ (0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
  __name: "FilePicker",
  props: {
    buttons: {},
    name: {},
    allowPickDirectory: { type: Boolean, default: false },
    disabledNavigation: { type: Boolean, default: false },
    filterFn: { type: Function, default: void 0 },
    canPickFn: { type: Function, default: void 0 },
    mimetypeFilter: { default: () => [] },
    multiselect: { type: Boolean, default: false },
    path: { default: void 0 }
  },
  emits: ["close"],
  setup(__props, { emit: __emit }) {
    const props = __props;
    const emit$1 = __emit;
    const isOpen = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(true);
    const currentView = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)("files");
    const savedPath = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(window?.sessionStorage.getItem("NC.FilePicker.LastPath") || "/");
    const navigatedPath = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)("");
    const currentPath = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)({
      get: () => {
        return currentView.value === "files" ? navigatedPath.value || props.path || savedPath.value : "/";
      },
      set: (path) => {
        navigatedPath.value = path;
      }
    });
    const selectedFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.shallowRef)([]);
    const {
      files,
      folder: currentFolder,
      isLoading,
      loadFiles,
      createDirectory
    } = useDAVFiles(currentView, currentPath);
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)([navigatedPath], () => {
      if (props.path === void 0 && navigatedPath.value) {
        window.sessionStorage.setItem("NC.FilePicker.LastPath", navigatedPath.value);
      }
      selectedFiles.value = [];
    });
    let isHandlingCallback = false;
    const dialogButtons = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
      const nodes = selectedFiles.value.length === 0 && props.allowPickDirectory && currentFolder.value ? [currentFolder.value] : selectedFiles.value;
      const buttons = typeof props.buttons === "function" ? props.buttons(nodes, currentPath.value, currentView.value) : props.buttons;
      return buttons.map((button) => ({
        ...button,
        disabled: button.disabled || isLoading.value,
        callback: () => {
          isHandlingCallback = true;
          handleButtonClick(button.callback, nodes);
        }
      }));
    });
    async function handleButtonClick(callback, nodes) {
      await callback(nodes);
      emit$1("close", nodes);
      isHandlingCallback = false;
    }
    const viewHeadline = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => currentView.value === "favorites" ? (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Favorites") : currentView.value === "recent" ? (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Recent") : "");
    const filterString = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)("");
    const { isSupportedMimeType } = useMimeFilter((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, "mimetypeFilter"));
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => loadFiles());
    const { showHiddenFiles } = useFilesSettings();
    const filteredFiles = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
      let filtered = files.value;
      if (!showHiddenFiles.value) {
        filtered = filtered.filter((file) => !file.basename.startsWith("."));
      }
      if (props.mimetypeFilter.length > 0) {
        filtered = filtered.filter((file) => file.type === "folder" || file.mime && isSupportedMimeType(file.mime));
      }
      if (filterString.value) {
        filtered = filtered.filter((file) => file.basename.toLowerCase().includes(filterString.value.toLowerCase()));
      }
      if (props.filterFn) {
        filtered = filtered.filter((f) => props.filterFn(f));
      }
      return filtered;
    });
    const noFilesDescription = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
      if (currentView.value === "files") {
        return (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Upload some content or sync with your devices!");
      } else if (currentView.value === "recent") {
        return (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Files and folders you recently modified will show up here.");
      } else {
        return (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Files and folders you mark as favorite will show up here.");
      }
    });
    async function onCreateFolder(name) {
      try {
        const folder = await createDirectory(name);
        navigatedPath.value = folder.path;
        (0,_nextcloud_event_bus__WEBPACK_IMPORTED_MODULE_1__.emit)("files:node:created", files.value.filter((file) => file.basename === name)[0]);
      } catch (error) {
        _index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.l.warn("Could not create new folder", { name, error });
        (0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.s)((0,_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("Could not create the new folder"));
      }
    }
    function handleClose(open) {
      if (!open && !isHandlingCallback) {
        emit$1("close");
      }
    }
    return (_ctx, _cache) => {
      return (0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcDialog__WEBPACK_IMPORTED_MODULE_2__["default"]), {
        open: isOpen.value,
        "onUpdate:open": [
          _cache[6] || (_cache[6] = ($event) => isOpen.value = $event),
          handleClose
        ],
        buttons: dialogButtons.value,
        name: __props.name,
        size: "large",
        "content-classes": "file-picker__content",
        "dialog-classes": "file-picker",
        "navigation-classes": "file-picker__navigation"
      }, {
        navigation: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(({ isCollapsed }) => [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(FilePickerNavigation, {
            "current-view": currentView.value,
            "onUpdate:currentView": _cache[0] || (_cache[0] = ($event) => currentView.value = $event),
            "filter-string": filterString.value,
            "onUpdate:filterString": _cache[1] || (_cache[1] = ($event) => filterString.value = $event),
            "is-collapsed": isCollapsed,
            "disabled-navigation": __props.disabledNavigation
          }, null, 8, ["current-view", "filter-string", "is-collapsed", "disabled-navigation"])
        ]),
        default: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_1, [
            currentView.value === "files" ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(FilePickerBreadcrumbs, {
              key: 0,
              path: currentPath.value,
              "onUpdate:path": _cache[2] || (_cache[2] = ($event) => currentPath.value = $event),
              "show-menu": __props.allowPickDirectory,
              onCreateNode: onCreateFolder
            }, null, 8, ["path", "show-menu"])) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_2, [
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("h3", null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(viewHeadline.value), 1)
            ])),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(isLoading) || filteredFiles.value.length > 0 ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(FileList, {
              key: 2,
              path: currentPath.value,
              "onUpdate:path": [
                _cache[3] || (_cache[3] = ($event) => currentPath.value = $event),
                _cache[5] || (_cache[5] = ($event) => currentView.value = "files")
              ],
              "selected-files": selectedFiles.value,
              "onUpdate:selectedFiles": _cache[4] || (_cache[4] = ($event) => selectedFiles.value = $event),
              "allow-pick-directory": __props.allowPickDirectory,
              "current-view": currentView.value,
              files: filteredFiles.value,
              multiselect: __props.multiselect,
              loading: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(isLoading),
              name: viewHeadline.value,
              "can-pick": __props.canPickFn
            }, null, 8, ["path", "selected-files", "allow-pick-directory", "current-view", "files", "multiselect", "loading", "name", "can-pick"])) : filterString.value ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcEmptyContent__WEBPACK_IMPORTED_MODULE_3__["default"]), {
              key: 3,
              name: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("No matching files"),
              description: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("No files matching your filter were found.")
            }, {
              icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconFile)
              ]),
              _: 1
            }, 8, ["name", "description"])) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)((0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_nextcloud_vue_components_NcEmptyContent__WEBPACK_IMPORTED_MODULE_3__["default"]), {
              key: 4,
              name: (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(_index_hZPKu_D6_mjs__WEBPACK_IMPORTED_MODULE_13__.t)("No files in here"),
              description: noFilesDescription.value
            }, {
              icon: (0,vue__WEBPACK_IMPORTED_MODULE_0__.withCtx)(() => [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createVNode)(IconFile)
              ]),
              _: 1
            }, 8, ["name", "description"]))
          ])
        ]),
        _: 1
      }, 8, ["open", "buttons", "name"]);
    };
  }
});
const FilePicker = /* @__PURE__ */ (0,_plugin_vue_export_helper_1tPrXgE0_mjs__WEBPACK_IMPORTED_MODULE_4__._)(_sfc_main, [["__scopeId", "data-v-5287035b"]]);

//# sourceMappingURL=FilePicker-CtWlxGEm.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/dist/chunks/preview-BIbJGxXF.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/dist/chunks/preview-BIbJGxXF.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getPreviewURL),
/* harmony export */   u: () => (/* binding */ usePreviewURL)
/* harmony export */ });
/* harmony import */ var _nextcloud_files__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nextcloud/files */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/files/dist/index.mjs");
/* harmony import */ var _nextcloud_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @nextcloud/router */ "./node_modules/@nextcloud/router/dist/index.mjs");
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vue */ "./node_modules/@nextcloud/dialogs/node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! p-queue */ "./node_modules/p-queue/dist/index.js");




const queue = new p_queue__WEBPACK_IMPORTED_MODULE_3__["default"]({ concurrency: 5 });
function preloadImage(url) {
  const { resolve, promise } = Promise.withResolvers();
  queue.add(() => {
    const image = new Image();
    image.onerror = () => resolve(false);
    image.onload = () => resolve(true);
    image.src = url;
    return promise;
  });
  return promise;
}
function getPreviewURL(node, options = {}) {
  options = { size: 32, cropPreview: false, mimeFallback: true, ...options };
  try {
    const previewUrl = node.attributes?.previewUrl || (0,_nextcloud_router__WEBPACK_IMPORTED_MODULE_1__.generateUrl)("/core/preview?fileId={fileid}", {
      fileid: node.fileid
    });
    let url;
    try {
      url = new URL(previewUrl);
    } catch {
      url = new URL(previewUrl, window.location.origin);
    }
    url.searchParams.set("x", `${options.size}`);
    url.searchParams.set("y", `${options.size}`);
    url.searchParams.set("mimeFallback", `${options.mimeFallback}`);
    url.searchParams.set("a", options.cropPreview === true ? "0" : "1");
    url.searchParams.set("c", `${node.attributes.etag}`);
    return url;
  } catch {
    return null;
  }
}
function usePreviewURL(node, options) {
  const previewURL = (0,vue__WEBPACK_IMPORTED_MODULE_2__.ref)(null);
  const previewLoaded = (0,vue__WEBPACK_IMPORTED_MODULE_2__.ref)(false);
  (0,vue__WEBPACK_IMPORTED_MODULE_2__.watchEffect)(() => {
    previewLoaded.value = false;
    previewURL.value = getPreviewURL((0,vue__WEBPACK_IMPORTED_MODULE_2__.toValue)(node), (0,vue__WEBPACK_IMPORTED_MODULE_2__.toValue)(options || {}));
    if (previewURL.value && (0,vue__WEBPACK_IMPORTED_MODULE_2__.toValue)(node).type === _nextcloud_files__WEBPACK_IMPORTED_MODULE_0__.FileType.File) {
      preloadImage(previewURL.value.href).then((success) => {
        previewLoaded.value = success;
      });
    }
  });
  return {
    previewURL,
    previewLoaded
  };
}

//# sourceMappingURL=preview-BIbJGxXF.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActionInput/index.mjs":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActionInput/index.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcActionInput_ccoTcPV_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcActionInput_ccoTcPV_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcActionInput-_ccoTcPV.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcActionInput-_ccoTcPV.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActions/index.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcActions/index.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcActions_Ccr8kkyh_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcActions_Ccr8kkyh_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcActions-Ccr8kkyh.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcActions-Ccr8kkyh.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumb/index.mjs":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumb/index.mjs ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcBreadcrumb_NKaosido_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcBreadcrumb_NKaosido_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcBreadcrumb-NKaosido.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcBreadcrumb-NKaosido.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumbs/index.mjs":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcBreadcrumbs/index.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcBreadcrumbs_CYt9wRvh_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcBreadcrumbs_CYt9wRvh_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcBreadcrumbs-CYt9wRvh.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcBreadcrumbs-CYt9wRvh.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcButton/index.mjs":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcButton/index.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcButton_DkC5k3Lb_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcButton_DkC5k3Lb_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcButton-DkC5k3Lb.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcButton-DkC5k3Lb.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcCheckboxRadioSwitch/index.mjs":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcCheckboxRadioSwitch/index.mjs ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcCheckboxRadioSwitch_BWumYbec_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcCheckboxRadioSwitch_BWumYbec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcCheckboxRadioSwitch-BWumYbec.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcCheckboxRadioSwitch-BWumYbec.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcDateTime/index.mjs":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcDateTime/index.mjs ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcDateTime_vue_vue_type_script_setup_true_lang_BhB8yA4U_mjs__WEBPACK_IMPORTED_MODULE_0__._)
/* harmony export */ });
/* harmony import */ var _chunks_NcDateTime_vue_vue_type_script_setup_true_lang_BhB8yA4U_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcEmptyContent/index.mjs":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcEmptyContent/index.mjs ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcEmptyContent_BdOezubv_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcEmptyContent_BdOezubv_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcEmptyContent-BdOezubv.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcEmptyContent-BdOezubv.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcIconSvgWrapper/index.mjs":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcIconSvgWrapper/index.mjs ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcIconSvgWrapper_5AA93z_F_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcIconSvgWrapper_5AA93z_F_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcIconSvgWrapper-5AA93z-F.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcIconSvgWrapper-5AA93z-F.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcSelect/index.mjs":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcSelect/index.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcSelect_BN2tEhoU_mjs__WEBPACK_IMPORTED_MODULE_0__.N)
/* harmony export */ });
/* harmony import */ var _chunks_NcSelect_BN2tEhoU_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcSelect-BN2tEhoU.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcSelect-BN2tEhoU.mjs");


//# sourceMappingURL=index.mjs.map


/***/ }),

/***/ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcTextField/index.mjs":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/components/NcTextField/index.mjs ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _chunks_NcTextField_vue_vue_type_script_setup_true_lang_Dl9AQfwW_mjs__WEBPACK_IMPORTED_MODULE_0__._)
/* harmony export */ });
/* harmony import */ var _chunks_NcTextField_vue_vue_type_script_setup_true_lang_Dl9AQfwW_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/NcTextField.vue_vue_type_script_setup_true_lang-Dl9AQfwW.mjs */ "./node_modules/@nextcloud/dialogs/node_modules/@nextcloud/vue/dist/chunks/NcTextField.vue_vue_type_script_setup_true_lang-Dl9AQfwW.mjs");


//# sourceMappingURL=index.mjs.map


/***/ })

}]);
//# sourceMappingURL=node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CtWlxGEm_mjs-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CtWlxGEm_mjs.js.map?v=09103daf27893609b296