var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function le(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ne={exports:{}},h=ne.exports={},L,R;function X(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?L=setTimeout:L=X}catch{L=X}try{typeof clearTimeout=="function"?R=clearTimeout:R=k}catch{R=k}})();function se(r){if(L===setTimeout)return setTimeout(r,0);if((L===X||!L)&&setTimeout)return L=setTimeout,setTimeout(r,0);try{return L(r,0)}catch{try{return L.call(null,r,0)}catch{return L.call(this,r,0)}}}function pe(r){if(R===clearTimeout)return clearTimeout(r);if((R===k||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(r);try{return R(r)}catch{try{return R.call(null,r)}catch{return R.call(this,r)}}}var N=[],v=!1,T,y=-1;function fe(){!v||!T||(v=!1,T.length?N=T.concat(N):y=-1,N.length&&ie())}function ie(){if(!v){var r=se(fe);v=!0;for(var e=N.length;e;){for(T=N,N=[];++y<e;)T&&T[y].run();y=-1,e=N.length}T=null,v=!1,pe(r)}}h.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];N.push(new oe(r,e)),N.length===1&&!v&&se(ie)};function oe(r,e){this.fun=r,this.array=e}oe.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={};function O(){}h.on=O,h.addListener=O,h.once=O,h.off=O,h.removeListener=O,h.removeAllListeners=O,h.emit=O,h.prependListener=O,h.prependOnceListener=O,h.listeners=function(r){return[]},h.binding=function(r){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(r){throw new Error("process.chdir is not supported")},h.umask=function(){return 0};var Ie=ne.exports;const de=le(Ie);var D,H;function ae(){if(H)return D;H=1;var r={};return D=typeof de=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},D}var _,W;function ce(){if(W)return _;W=1;const r="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,u=e-6;return _={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:o,MAX_SAFE_BUILD_LENGTH:u,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},_}var C={exports:{}},z;function Le(){return z||(z=1,(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:u}=ce(),d=ae();e=r.exports={};const f=e.re=[],I=e.safeRe=[],s=e.src=[],i=e.safeSrc=[],t=e.t={};let c=0;const E="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",u],[E,o]],he=g=>{for(const[m,A]of p)g=g.split(`${m}*`).join(`${m}{0,${A}}`).split(`${m}+`).join(`${m}{1,${A}}`);return g},a=(g,m,A)=>{const V=he(m),w=c++;d(g,w,m),t[g]=w,s[w]=m,i[w]=V,f[w]=new RegExp(m,A?"g":void 0),I[w]=new RegExp(V,A?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),a("MAINVERSION",`(${s[t.NUMERICIDENTIFIER]})\\.(${s[t.NUMERICIDENTIFIER]})\\.(${s[t.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${s[t.NUMERICIDENTIFIERLOOSE]})\\.(${s[t.NUMERICIDENTIFIERLOOSE]})\\.(${s[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${s[t.NONNUMERICIDENTIFIER]}|${s[t.NUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${s[t.NONNUMERICIDENTIFIER]}|${s[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASE",`(?:-(${s[t.PRERELEASEIDENTIFIER]}(?:\\.${s[t.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${s[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[t.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",`${E}+`),a("BUILD",`(?:\\+(${s[t.BUILDIDENTIFIER]}(?:\\.${s[t.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${s[t.MAINVERSION]}${s[t.PRERELEASE]}?${s[t.BUILD]}?`),a("FULL",`^${s[t.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${s[t.MAINVERSIONLOOSE]}${s[t.PRERELEASELOOSE]}?${s[t.BUILD]}?`),a("LOOSE",`^${s[t.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${s[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${s[t.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${s[t.XRANGEIDENTIFIER]})(?:\\.(${s[t.XRANGEIDENTIFIER]})(?:\\.(${s[t.XRANGEIDENTIFIER]})(?:${s[t.PRERELEASE]})?${s[t.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${s[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[t.XRANGEIDENTIFIERLOOSE]})(?:${s[t.PRERELEASELOOSE]})?${s[t.BUILD]}?)?)?`),a("XRANGE",`^${s[t.GTLT]}\\s*${s[t.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${s[t.GTLT]}\\s*${s[t.XRANGEPLAINLOOSE]}$`),a("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),a("COERCE",`${s[t.COERCEPLAIN]}(?:$|[^\\d])`),a("COERCEFULL",s[t.COERCEPLAIN]+`(?:${s[t.PRERELEASE]})?(?:${s[t.BUILD]})?(?:$|[^\\d])`),a("COERCERTL",s[t.COERCE],!0),a("COERCERTLFULL",s[t.COERCEFULL],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${s[t.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${s[t.LONETILDE]}${s[t.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${s[t.LONETILDE]}${s[t.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${s[t.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${s[t.LONECARET]}${s[t.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${s[t.LONECARET]}${s[t.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${s[t.GTLT]}\\s*(${s[t.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${s[t.GTLT]}\\s*(${s[t.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${s[t.GTLT]}\\s*(${s[t.LOOSEPLAIN]}|${s[t.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${s[t.XRANGEPLAIN]})\\s+-\\s+(${s[t.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${s[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[t.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C,C.exports)),C.exports}var F,K;function Re(){if(K)return F;K=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return F=n=>n?typeof n!="object"?r:n:e,F}var G,Y;function me(){if(Y)return G;Y=1;const r=/^[0-9]+$/,e=(n,o)=>{if(typeof n=="number"&&typeof o=="number")return n===o?0:n<o?-1:1;const u=r.test(n),d=r.test(o);return u&&d&&(n=+n,o=+o),n===o?0:u&&!d?-1:d&&!u?1:n<o?-1:1};return G={compareIdentifiers:e,rcompareIdentifiers:(n,o)=>e(o,n)},G}var M,q;function Ee(){if(q)return M;q=1;const r=ae(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=ce(),{safeRe:o,t:u}=Le(),d=Re(),{compareIdentifiers:f}=me();class I{constructor(i,t){if(t=d(t),i instanceof I){if(i.loose===!!t.loose&&i.includePrerelease===!!t.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",i,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const c=i.trim().match(t.loose?o[u.LOOSE]:o[u.FULL]);if(!c)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(E=>{if(/^[0-9]+$/.test(E)){const p=+E;if(p>=0&&p<n)return p}return E}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(r("SemVer.compare",this.version,this.options,i),!(i instanceof I)){if(typeof i=="string"&&i===this.version)return 0;i=new I(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof I||(i=new I(i,this.options)),this.major<i.major?-1:this.major>i.major?1:this.minor<i.minor?-1:this.minor>i.minor?1:this.patch<i.patch?-1:this.patch>i.patch?1:0}comparePre(i){if(i instanceof I||(i=new I(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let t=0;do{const c=this.prerelease[t],E=i.prerelease[t];if(r("prerelease compare",t,c,E),c===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(c===void 0)return-1;if(c!==E)return f(c,E)}while(++t)}compareBuild(i){i instanceof I||(i=new I(i,this.options));let t=0;do{const c=this.build[t],E=i.build[t];if(r("build compare",t,c,E),c===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(c===void 0)return-1;if(c!==E)return f(c,E)}while(++t)}inc(i,t,c){if(i.startsWith("pre")){if(!t&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const E=`-${t}`.match(this.options.loose?o[u.PRERELEASELOOSE]:o[u.PRERELEASE]);if(!E||E[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,c),this.inc("pre",t,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,c),this.inc("pre",t,c);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const E=Number(c)?1:0;if(this.prerelease.length===0)this.prerelease=[E];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(t===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(E)}}if(t){let p=[t,E];c===!1&&(p=[t]),f(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return M=I,M}var U,Z;function Oe(){if(Z)return U;Z=1;const r=Ee();return U=(e,n)=>new r(e,n).major,U}var Ne=Oe();const J=re(Ne);var x,Q;function Te(){if(Q)return x;Q=1;const r=Ee();return x=(e,n,o=!1)=>{if(e instanceof r)return e;try{return new r(e,n)}catch(u){if(!o)return null;throw u}},x}var j,ee;function ge(){if(ee)return j;ee=1;const r=Te();return j=(e,n)=>{const o=r(e,n);return o?o.version:null},j}var we=ge();const $e=re(we);class ve{bus;constructor(e){typeof e.getVersion!="function"||!$e(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):J(e.getVersion())!==J(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.3"}subscribe(e,n){this.bus.subscribe(e,n)}unsubscribe(e,n){this.bus.unsubscribe(e,n)}emit(e,...n){this.bus.emit(e,...n)}}class Ae{handlers=new Map;getVersion(){return"3.3.3"}subscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).concat(n))}unsubscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).filter(o=>o!==n))}emit(e,...n){(this.handlers.get(e)||[]).forEach(o=>{try{o(n[0])}catch(u){console.error("could not invoke event listener",u)}})}}let b=null;function B(){return b!==null?b:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof window?._nc_event_bus<"u"?b=new ve(window._nc_event_bus):b=window._nc_event_bus=new Ae,b)}function be(r,e){B().subscribe(r,e)}function Ge(r,e){B().unsubscribe(r,e)}function Me(r,...e){B().emit(r,...e)}class P{static GLOBAL_SCOPE_VOLATILE="nextcloud_vol";static GLOBAL_SCOPE_PERSISTENT="nextcloud_per";scope;wrapped;constructor(e,n,o){this.scope=`${o?P.GLOBAL_SCOPE_PERSISTENT:P.GLOBAL_SCOPE_VOLATILE}_${btoa(e)}_`,this.wrapped=n}scopeKey(e){return`${this.scope}${e}`}setItem(e,n){this.wrapped.setItem(this.scopeKey(e),n)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}class Se{appId;persisted=!1;clearedOnLogout=!1;constructor(e){this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new P(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}function ye(r){return new Se(r)}let S;const ue=[];function Ue(){return S===void 0&&(S=document.head.dataset.requesttoken??null),S}function xe(r){ue.push(r)}be("csrf-token-update",r=>{S=r.token,ue.forEach(e=>{try{e(S)}catch(n){console.error("Error updating CSRF token observer",n)}})});ye("public").persist().build();let $;function te(r,e){return r?r.getAttribute(e):null}function Pe(){if($!==void 0)return $;const r=document?.getElementsByTagName("head")[0];if(!r)return null;const e=te(r,"data-user");return e===null?($=null,$):($={uid:e,displayName:te(r,"data-user-displayname"),isAdmin:!!window._oc_isadmin},$)}function je(r,e=100,n={}){if(typeof r!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof r}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");if(typeof n=="boolean")throw new TypeError("The `options` parameter must be an object, not a boolean. Use `{immediate: true}` instead.");const{immediate:o}=n;let u,d,f,I,s;function i(){const E=u,p=d;return u=void 0,d=void 0,s=r.apply(E,p),s}function t(){const E=Date.now()-I;E<e&&E>=0?f=setTimeout(t,e-E):(f=void 0,o||(s=i()))}const c=function(...E){if(u&&this!==u&&Object.getPrototypeOf(this)===Object.getPrototypeOf(u))throw new Error("Debounced method called with different contexts of the same prototype.");u=this,d=E,I=Date.now();const p=o&&!f;if(f||(f=setTimeout(t,e)),p)return s=i(),s};return Object.defineProperty(c,"isPending",{get(){return f!==void 0}}),c.clear=()=>{f&&(clearTimeout(f),f=void 0,u=void 0,d=void 0)},c.flush=()=>{f&&c.trigger()},c.trigger=()=>{s=i(),c.clear()},c}var l=(r=>(r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Fatal=4]="Fatal",r))(l||{});class De{context;constructor(e){this.context=e||{}}formatMessage(e,n,o){let u="["+l[n].toUpperCase()+"] ";return o&&o.app&&(u+=o.app+": "),typeof e=="string"?u+e:(u+=`Unexpected ${e.name}`,e.message&&(u+=` "${e.message}"`),n===l.Debug&&e.stack&&(u+=`

Stack trace:
${e.stack}`),u)}log(e,n,o){if(!(typeof this.context?.level=="number"&&e<this.context?.level))switch(typeof n=="object"&&o?.error===void 0&&(o.error=n),e){case l.Debug:console.debug(this.formatMessage(n,l.Debug,o),o);break;case l.Info:console.info(this.formatMessage(n,l.Info,o),o);break;case l.Warn:console.warn(this.formatMessage(n,l.Warn,o),o);break;case l.Error:console.error(this.formatMessage(n,l.Error,o),o);break;case l.Fatal:default:console.error(this.formatMessage(n,l.Fatal,o),o);break}}debug(e,n){this.log(l.Debug,e,Object.assign({},this.context,n))}info(e,n){this.log(l.Info,e,Object.assign({},this.context,n))}warn(e,n){this.log(l.Warn,e,Object.assign({},this.context,n))}error(e,n){this.log(l.Error,e,Object.assign({},this.context,n))}fatal(e,n){this.log(l.Fatal,e,Object.assign({},this.context,n))}}function _e(r){return new De(r)}class Ce{context;factory;constructor(e){this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=Pe();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,n=()=>{document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=window._oc_config?.loglevel??l.Warn,window._oc_debug&&(e.context.level=l.Debug),document.removeEventListener("readystatechange",n)):document.addEventListener("readystatechange",n)};return n(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function Xe(){return new Ce(_e)}export{Pe as a,Ue as b,re as c,je as d,Me as e,ye as f,Xe as g,Fe as h,xe as o,de as p,be as s,Ge as u};
//# sourceMappingURL=index-6_gsQFyp.chunk.mjs.map
