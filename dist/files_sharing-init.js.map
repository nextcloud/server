{"version":3,"file":"files_sharing-init.js?v=a153c790f1ff736f34db","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/apps/files_sharing/src/services/logger.ts","webpack:///nextcloud/apps/files_sharing/src/services/SharingService.ts","webpack:///nextcloud/apps/files_sharing/src/views/shares.ts","webpack:///nextcloud/apps/files_sharing/src/actions/acceptShareAction.ts","webpack:///nextcloud/apps/files_sharing/src/actions/openInFilesAction.ts","webpack:///nextcloud/apps/files_sharing/src/actions/rejectShareAction.ts","webpack:///nextcloud/apps/files_sharing/src/actions/restoreShareAction.ts","webpack:///nextcloud/node_modules/@nextcloud/sharing/dist/index.mjs","webpack:///nextcloud/apps/files/src/logger.js","webpack:///nextcloud/apps/files/src/actions/sidebarAction.ts","webpack://nextcloud/./apps/files_sharing/src/actions/sharingStatusAction.scss?3ea7","webpack:///nextcloud/apps/files_sharing/src/actions/sharingStatusAction.ts","webpack:///nextcloud/apps/files_sharing/src/utils/AccountIcon.ts","webpack:///nextcloud/apps/files_sharing/src/init.ts","webpack:///nextcloud/apps/files_sharing/src/actions/sharingStatusAction.scss","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/**\n * @copyright Copyright (c) 2022 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { getLoggerBuilder } from '@nextcloud/logger';\nexport default getLoggerBuilder()\n    .setApp('files_sharing')\n    .detectUser()\n    .build();\n","import { Folder, File, Permission } from '@nextcloud/files';\nimport { generateOcsUrl, generateRemoteUrl } from '@nextcloud/router';\nimport { getCurrentUser } from '@nextcloud/auth';\nimport axios from '@nextcloud/axios';\nimport logger from './logger';\nexport const rootPath = `/files/${getCurrentUser()?.uid}`;\nconst headers = {\n    'Content-Type': 'application/json',\n};\nconst ocsEntryToNode = async function (ocsEntry) {\n    try {\n        // Federated share handling\n        if (ocsEntry?.remote_id !== undefined) {\n            if (!ocsEntry.mimetype) {\n                const mime = (await import('mime')).default;\n                // This won't catch files without an extension, but this is the best we can do\n                ocsEntry.mimetype = mime.getType(ocsEntry.name);\n            }\n            ocsEntry.item_type = ocsEntry.type || (ocsEntry.mimetype ? 'file' : 'folder');\n            // different naming for remote shares\n            ocsEntry.item_mtime = ocsEntry.mtime;\n            ocsEntry.file_target = ocsEntry.file_target || ocsEntry.mountpoint;\n            // If the share is not accepted yet we don't know which permissions it will have\n            if (!ocsEntry.accepted) {\n                // Need to set permissions to NONE for federated shares\n                ocsEntry.item_permissions = Permission.NONE;\n                ocsEntry.permissions = Permission.NONE;\n            }\n            ocsEntry.uid_owner = ocsEntry.owner;\n            // TODO: have the real display name stored somewhere\n            ocsEntry.displayname_owner = ocsEntry.owner;\n        }\n        const isFolder = ocsEntry?.item_type === 'folder';\n        const hasPreview = ocsEntry?.has_preview === true;\n        const Node = isFolder ? Folder : File;\n        // If this is an external share that is not yet accepted,\n        // we don't have an id. We can fallback to the row id temporarily\n        // local shares (this server) use `file_source`, but remote shares (federated) use `file_id`\n        const fileid = ocsEntry.file_source || ocsEntry.file_id || ocsEntry.id;\n        // Generate path and strip double slashes\n        const path = ocsEntry.path || ocsEntry.file_target || ocsEntry.name;\n        const source = generateRemoteUrl(`dav/${rootPath}/${path}`.replaceAll(/\\/\\//gm, '/'));\n        let mtime = ocsEntry.item_mtime ? new Date((ocsEntry.item_mtime) * 1000) : undefined;\n        // Prefer share time if more recent than item mtime\n        if (ocsEntry?.stime > (ocsEntry?.item_mtime || 0)) {\n            mtime = new Date((ocsEntry.stime) * 1000);\n        }\n        let sharees;\n        if ('share_with' in ocsEntry) {\n            sharees = {\n                sharee: {\n                    id: ocsEntry.share_with,\n                    'display-name': ocsEntry.share_with_displayname || ocsEntry.share_with,\n                    type: ocsEntry.share_type,\n                },\n            };\n        }\n        return new Node({\n            id: fileid,\n            source,\n            owner: ocsEntry?.uid_owner,\n            mime: ocsEntry?.mimetype || 'application/octet-stream',\n            mtime,\n            size: ocsEntry?.item_size,\n            permissions: ocsEntry?.item_permissions || ocsEntry?.permissions,\n            root: rootPath,\n            attributes: {\n                ...ocsEntry,\n                'has-preview': hasPreview,\n                // Also check the sharingStatusAction.ts code\n                'owner-id': ocsEntry?.uid_owner,\n                'owner-display-name': ocsEntry?.displayname_owner,\n                'share-types': ocsEntry?.share_type,\n                'share-attributes': ocsEntry?.attributes || '[]',\n                sharees,\n                favorite: ocsEntry?.tags?.includes(window.OC.TAG_FAVORITE) ? 1 : 0,\n            },\n        });\n    }\n    catch (error) {\n        logger.error('Error while parsing OCS entry', { error });\n        return null;\n    }\n};\nconst getShares = function (shared_with_me = false) {\n    const url = generateOcsUrl('apps/files_sharing/api/v1/shares');\n    return axios.get(url, {\n        headers,\n        params: {\n            shared_with_me,\n            include_tags: true,\n        },\n    });\n};\nconst getSharedWithYou = function () {\n    return getShares(true);\n};\nconst getSharedWithOthers = function () {\n    return getShares();\n};\nconst getRemoteShares = function () {\n    const url = generateOcsUrl('apps/files_sharing/api/v1/remote_shares');\n    return axios.get(url, {\n        headers,\n        params: {\n            include_tags: true,\n        },\n    });\n};\nconst getPendingShares = function () {\n    const url = generateOcsUrl('apps/files_sharing/api/v1/shares/pending');\n    return axios.get(url, {\n        headers,\n        params: {\n            include_tags: true,\n        },\n    });\n};\nconst getRemotePendingShares = function () {\n    const url = generateOcsUrl('apps/files_sharing/api/v1/remote_shares/pending');\n    return axios.get(url, {\n        headers,\n        params: {\n            include_tags: true,\n        },\n    });\n};\nconst getDeletedShares = function () {\n    const url = generateOcsUrl('apps/files_sharing/api/v1/deletedshares');\n    return axios.get(url, {\n        headers,\n        params: {\n            include_tags: true,\n        },\n    });\n};\n/**\n * Group an array of objects (here Nodes) by a key\n * and return an array of arrays of them.\n * @param nodes Nodes to group\n * @param key The attribute to group by\n */\nconst groupBy = function (nodes, key) {\n    return Object.values(nodes.reduce(function (acc, curr) {\n        (acc[curr[key]] = acc[curr[key]] || []).push(curr);\n        return acc;\n    }, {}));\n};\nexport const getContents = async (sharedWithYou = true, sharedWithOthers = true, pendingShares = false, deletedshares = false, filterTypes = []) => {\n    const promises = [];\n    if (sharedWithYou) {\n        promises.push(getSharedWithYou(), getRemoteShares());\n    }\n    if (sharedWithOthers) {\n        promises.push(getSharedWithOthers());\n    }\n    if (pendingShares) {\n        promises.push(getPendingShares(), getRemotePendingShares());\n    }\n    if (deletedshares) {\n        promises.push(getDeletedShares());\n    }\n    const responses = await Promise.all(promises);\n    const data = responses.map((response) => response.data.ocs.data).flat();\n    let contents = (await Promise.all(data.map(ocsEntryToNode)))\n        .filter((node) => node !== null);\n    if (filterTypes.length > 0) {\n        contents = contents.filter((node) => filterTypes.includes(node.attributes?.share_type));\n    }\n    // Merge duplicate shares and group their attributes\n    // Also check the sharingStatusAction.ts code\n    contents = groupBy(contents, 'source').map((nodes) => {\n        const node = nodes[0];\n        node.attributes['share-types'] = nodes.map(node => node.attributes['share-types']);\n        return node;\n    });\n    return {\n        folder: new Folder({\n            id: 0,\n            source: generateRemoteUrl('dav' + rootPath),\n            owner: getCurrentUser()?.uid || null,\n        }),\n        contents,\n    };\n};\n","/**\n * @copyright Copyright (c) 2023 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { translate as t } from '@nextcloud/l10n';\nimport { View, getNavigation } from '@nextcloud/files';\nimport AccountClockSvg from '@mdi/svg/svg/account-clock.svg?raw';\nimport AccountGroupSvg from '@mdi/svg/svg/account-group.svg?raw';\nimport AccountPlusSvg from '@mdi/svg/svg/account-plus.svg?raw';\nimport AccountSvg from '@mdi/svg/svg/account.svg?raw';\nimport DeleteSvg from '@mdi/svg/svg/delete.svg?raw';\nimport LinkSvg from '@mdi/svg/svg/link.svg?raw';\nimport { getContents } from '../services/SharingService';\nexport const sharesViewId = 'shareoverview';\nexport const sharedWithYouViewId = 'sharingin';\nexport const sharedWithOthersViewId = 'sharingout';\nexport const sharingByLinksViewId = 'sharinglinks';\nexport const deletedSharesViewId = 'deletedshares';\nexport const pendingSharesViewId = 'pendingshares';\nexport default () => {\n    const Navigation = getNavigation();\n    Navigation.register(new View({\n        id: sharesViewId,\n        name: t('files_sharing', 'Shares'),\n        caption: t('files_sharing', 'Overview of shared files.'),\n        emptyTitle: t('files_sharing', 'No shares'),\n        emptyCaption: t('files_sharing', 'Files and folders you shared or have been shared with you will show up here'),\n        icon: AccountPlusSvg,\n        order: 20,\n        columns: [],\n        getContents: () => getContents(),\n    }));\n    Navigation.register(new View({\n        id: sharedWithYouViewId,\n        name: t('files_sharing', 'Shared with you'),\n        caption: t('files_sharing', 'List of files that are shared with you.'),\n        emptyTitle: t('files_sharing', 'Nothing shared with you yet'),\n        emptyCaption: t('files_sharing', 'Files and folders others shared with you will show up here'),\n        icon: AccountSvg,\n        order: 1,\n        parent: sharesViewId,\n        columns: [],\n        getContents: () => getContents(true, false, false, false),\n    }));\n    Navigation.register(new View({\n        id: sharedWithOthersViewId,\n        name: t('files_sharing', 'Shared with others'),\n        caption: t('files_sharing', 'List of files that you shared with others.'),\n        emptyTitle: t('files_sharing', 'Nothing shared yet'),\n        emptyCaption: t('files_sharing', 'Files and folders you shared will show up here'),\n        icon: AccountGroupSvg,\n        order: 2,\n        parent: sharesViewId,\n        columns: [],\n        getContents: () => getContents(false, true, false, false),\n    }));\n    Navigation.register(new View({\n        id: sharingByLinksViewId,\n        name: t('files_sharing', 'Shared by link'),\n        caption: t('files_sharing', 'List of files that are shared by link.'),\n        emptyTitle: t('files_sharing', 'No shared links'),\n        emptyCaption: t('files_sharing', 'Files and folders you shared by link will show up here'),\n        icon: LinkSvg,\n        order: 3,\n        parent: sharesViewId,\n        columns: [],\n        getContents: () => getContents(false, true, false, false, [window.OC.Share.SHARE_TYPE_LINK]),\n    }));\n    Navigation.register(new View({\n        id: deletedSharesViewId,\n        name: t('files_sharing', 'Deleted shares'),\n        caption: t('files_sharing', 'List of shares you left.'),\n        emptyTitle: t('files_sharing', 'No deleted shares'),\n        emptyCaption: t('files_sharing', 'Shares you have left will show up here'),\n        icon: DeleteSvg,\n        order: 4,\n        parent: sharesViewId,\n        columns: [],\n        getContents: () => getContents(false, false, false, true),\n    }));\n    Navigation.register(new View({\n        id: pendingSharesViewId,\n        name: t('files_sharing', 'Pending shares'),\n        caption: t('files_sharing', 'List of unapproved shares.'),\n        emptyTitle: t('files_sharing', 'No pending shares'),\n        emptyCaption: t('files_sharing', 'Shares you have received but not approved will show up here'),\n        icon: AccountClockSvg,\n        order: 5,\n        parent: sharesViewId,\n        columns: [],\n        getContents: () => getContents(false, false, true, false),\n    }));\n};\n","import { emit } from '@nextcloud/event-bus';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport { registerFileAction, FileAction } from '@nextcloud/files';\nimport { translatePlural as n } from '@nextcloud/l10n';\nimport axios from '@nextcloud/axios';\nimport CheckSvg from '@mdi/svg/svg/check.svg?raw';\nimport { pendingSharesViewId } from '../views/shares';\nexport const action = new FileAction({\n    id: 'accept-share',\n    displayName: (nodes) => n('files_sharing', 'Accept share', 'Accept shares', nodes.length),\n    iconSvgInline: () => CheckSvg,\n    enabled: (nodes, view) => nodes.length > 0 && view.id === pendingSharesViewId,\n    async exec(node) {\n        try {\n            const isRemote = !!node.attributes.remote;\n            const url = generateOcsUrl('apps/files_sharing/api/v1/{shareBase}/pending/{id}', {\n                shareBase: isRemote ? 'remote_shares' : 'shares',\n                id: node.attributes.id,\n            });\n            await axios.post(url);\n            // Remove from current view\n            emit('files:node:deleted', node);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    async execBatch(nodes, view, dir) {\n        return Promise.all(nodes.map(node => this.exec(node, view, dir)));\n    },\n    order: 1,\n    inline: () => true,\n});\nregisterFileAction(action);\n","import { registerFileAction, FileAction, DefaultType, FileType } from '@nextcloud/files';\nimport { translate as t } from '@nextcloud/l10n';\nimport { sharesViewId, sharedWithYouViewId, sharedWithOthersViewId, sharingByLinksViewId } from '../views/shares';\nexport const action = new FileAction({\n    id: 'open-in-files',\n    displayName: () => t('files', 'Open in Files'),\n    iconSvgInline: () => '',\n    enabled: (nodes, view) => [\n        sharesViewId,\n        sharedWithYouViewId,\n        sharedWithOthersViewId,\n        sharingByLinksViewId,\n        // Deleted and pending shares are not\n        // accessible in the files app.\n    ].includes(view.id),\n    async exec(node) {\n        const isFolder = node.type === FileType.Folder;\n        window.OCP.Files.Router.goToRoute(null, // use default route\n        {\n            view: 'files',\n            fileid: String(node.fileid),\n        }, {\n            // If this node is a folder open the folder in files\n            dir: isFolder ? node.path : node.dirname,\n            // otherwise if this is a file, we should open it\n            openfile: isFolder ? undefined : 'true',\n        });\n        return null;\n    },\n    // Before openFolderAction\n    order: -1000,\n    default: DefaultType.HIDDEN,\n});\nregisterFileAction(action);\n","import { emit } from '@nextcloud/event-bus';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport { registerFileAction, FileAction } from '@nextcloud/files';\nimport { translatePlural as n } from '@nextcloud/l10n';\nimport axios from '@nextcloud/axios';\nimport CloseSvg from '@mdi/svg/svg/close.svg?raw';\nimport { pendingSharesViewId } from '../views/shares';\nexport const action = new FileAction({\n    id: 'reject-share',\n    displayName: (nodes) => n('files_sharing', 'Reject share', 'Reject shares', nodes.length),\n    iconSvgInline: () => CloseSvg,\n    enabled: (nodes, view) => {\n        if (view.id !== pendingSharesViewId) {\n            return false;\n        }\n        if (nodes.length === 0) {\n            return false;\n        }\n        // disable rejecting group shares from the pending list because they anyway\n        // land back into that same list after rejecting them\n        if (nodes.some(node => node.attributes.remote_id\n            && node.attributes.share_type === window.OC.Share.SHARE_TYPE_REMOTE_GROUP)) {\n            return false;\n        }\n        return true;\n    },\n    async exec(node) {\n        try {\n            const isRemote = !!node.attributes.remote;\n            const url = generateOcsUrl('apps/files_sharing/api/v1/{shareBase}/{id}', {\n                shareBase: isRemote ? 'remote_shares' : 'shares',\n                id: node.attributes.id,\n            });\n            await axios.delete(url);\n            // Remove from current view\n            emit('files:node:deleted', node);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    async execBatch(nodes, view, dir) {\n        return Promise.all(nodes.map(node => this.exec(node, view, dir)));\n    },\n    order: 2,\n    inline: () => true,\n});\nregisterFileAction(action);\n","import { emit } from '@nextcloud/event-bus';\nimport { FileAction, registerFileAction } from '@nextcloud/files';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport { translatePlural as n } from '@nextcloud/l10n';\nimport ArrowULeftTopSvg from '@mdi/svg/svg/arrow-u-left-top.svg?raw';\nimport axios from '@nextcloud/axios';\nimport { deletedSharesViewId } from '../views/shares';\nexport const action = new FileAction({\n    id: 'restore-share',\n    displayName: (nodes) => n('files_sharing', 'Restore share', 'Restore shares', nodes.length),\n    iconSvgInline: () => ArrowULeftTopSvg,\n    enabled: (nodes, view) => nodes.length > 0 && view.id === deletedSharesViewId,\n    async exec(node) {\n        try {\n            const url = generateOcsUrl('apps/files_sharing/api/v1/deletedshares/{id}', {\n                id: node.attributes.id,\n            });\n            await axios.post(url);\n            // Remove from current view\n            emit('files:node:deleted', node);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    async execBatch(nodes, view, dir) {\n        return Promise.all(nodes.map(node => this.exec(node, view, dir)));\n    },\n    order: 1,\n    inline: () => true,\n});\nregisterFileAction(action);\n","var Type = /* @__PURE__ */ ((Type2) => {\n  Type2[Type2[\"SHARE_TYPE_USER\"] = 0] = \"SHARE_TYPE_USER\";\n  Type2[Type2[\"SHARE_TYPE_GROUP\"] = 1] = \"SHARE_TYPE_GROUP\";\n  Type2[Type2[\"SHARE_TYPE_LINK\"] = 3] = \"SHARE_TYPE_LINK\";\n  Type2[Type2[\"SHARE_TYPE_EMAIL\"] = 4] = \"SHARE_TYPE_EMAIL\";\n  Type2[Type2[\"SHARE_TYPE_REMOTE\"] = 6] = \"SHARE_TYPE_REMOTE\";\n  Type2[Type2[\"SHARE_TYPE_CIRCLE\"] = 7] = \"SHARE_TYPE_CIRCLE\";\n  Type2[Type2[\"SHARE_TYPE_GUEST\"] = 8] = \"SHARE_TYPE_GUEST\";\n  Type2[Type2[\"SHARE_TYPE_REMOTE_GROUP\"] = 9] = \"SHARE_TYPE_REMOTE_GROUP\";\n  Type2[Type2[\"SHARE_TYPE_ROOM\"] = 10] = \"SHARE_TYPE_ROOM\";\n  Type2[Type2[\"SHARE_TYPE_DECK\"] = 12] = \"SHARE_TYPE_DECK\";\n  Type2[Type2[\"SHARE_TYPE_FEDERATED_GROUP\"] = 14] = \"SHARE_TYPE_FEDERATED_GROUP\";\n  return Type2;\n})(Type || {});\nvar ShareType = /* @__PURE__ */ ((ShareType2) => {\n  ShareType2[ShareType2[\"User\"] = 0] = \"User\";\n  ShareType2[ShareType2[\"Group\"] = 1] = \"Group\";\n  ShareType2[ShareType2[\"Link\"] = 3] = \"Link\";\n  ShareType2[ShareType2[\"Email\"] = 4] = \"Email\";\n  ShareType2[ShareType2[\"Remote\"] = 6] = \"Remote\";\n  ShareType2[ShareType2[\"Team\"] = 7] = \"Team\";\n  ShareType2[ShareType2[\"Guest\"] = 8] = \"Guest\";\n  ShareType2[ShareType2[\"RemoteGroup\"] = 9] = \"RemoteGroup\";\n  ShareType2[ShareType2[\"Room\"] = 10] = \"Room\";\n  ShareType2[ShareType2[\"Deck\"] = 12] = \"Deck\";\n  ShareType2[ShareType2[\"FederatedGroup\"] = 14] = \"FederatedGroup\";\n  ShareType2[ShareType2[\"ScienceMesh\"] = 15] = \"ScienceMesh\";\n  return ShareType2;\n})(ShareType || {});\nexport {\n  ShareType,\n  Type\n};\n","/**\n * @copyright Copyright (c) 2022 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nexport default getLoggerBuilder()\n\t.setApp('files')\n\t.detectUser()\n\t.build()\n","/**\n * @copyright Copyright (c) 2023 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { Permission, View, FileAction } from '@nextcloud/files';\nimport { translate as t } from '@nextcloud/l10n';\nimport InformationSvg from '@mdi/svg/svg/information-variant.svg?raw';\nimport logger from '../logger.js';\nexport const ACTION_DETAILS = 'details';\nexport const action = new FileAction({\n    id: ACTION_DETAILS,\n    displayName: () => t('files', 'Open details'),\n    iconSvgInline: () => InformationSvg,\n    // Sidebar currently supports user folder only, /files/USER\n    enabled: (nodes) => {\n        // Only works on single node\n        if (nodes.length !== 1) {\n            return false;\n        }\n        if (!nodes[0]) {\n            return false;\n        }\n        // Only work if the sidebar is available\n        if (!window?.OCA?.Files?.Sidebar) {\n            return false;\n        }\n        return (nodes[0].root?.startsWith('/files/') && nodes[0].permissions !== Permission.NONE) ?? false;\n    },\n    async exec(node, view, dir) {\n        try {\n            // TODO: migrate Sidebar to use a Node instead\n            await window.OCA.Files.Sidebar.open(node.path);\n            // Silently update current fileid\n            window.OCP.Files.Router.goToRoute(null, { view: view.id, fileid: node.fileid }, { ...window.OCP.Files.Router.query, dir }, true);\n            return null;\n        }\n        catch (error) {\n            logger.error('Error while opening sidebar', { error });\n            return false;\n        }\n    },\n    order: -50,\n});\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./sharingStatusAction.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./sharingStatusAction.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\n * @copyright Copyright (c) 2023 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { Node, View, registerFileAction, FileAction, Permission } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport { ShareType } from '@nextcloud/sharing';\nimport AccountGroupSvg from '@mdi/svg/svg/account-group.svg?raw';\nimport AccountPlusSvg from '@mdi/svg/svg/account-plus.svg?raw';\nimport LinkSvg from '@mdi/svg/svg/link.svg?raw';\nimport CircleSvg from '../../../../core/img/apps/circles.svg?raw';\nimport { action as sidebarAction } from '../../../files/src/actions/sidebarAction';\nimport { getCurrentUser } from '@nextcloud/auth';\nimport { generateAvatarSvg } from '../utils/AccountIcon.ts';\nimport './sharingStatusAction.scss';\nimport { showError } from '@nextcloud/dialogs';\nconst isExternal = (node) => {\n    return node.attributes.remote_id !== undefined;\n};\nexport const action = new FileAction({\n    id: 'sharing-status',\n    displayName(nodes) {\n        const node = nodes[0];\n        const shareTypes = Object.values(node?.attributes?.['share-types'] || {}).flat();\n        if (shareTypes.length > 0\n            || (node.owner !== getCurrentUser()?.uid || isExternal(node))) {\n            return t('files_sharing', 'Shared');\n        }\n        return '';\n    },\n    title(nodes) {\n        const node = nodes[0];\n        if (node.owner && (node.owner !== getCurrentUser()?.uid || isExternal(node))) {\n            const ownerDisplayName = node?.attributes?.['owner-display-name'];\n            return t('files_sharing', 'Shared by {ownerDisplayName}', { ownerDisplayName });\n        }\n        const shareTypes = Object.values(node?.attributes?.['share-types'] || {}).flat();\n        if (shareTypes.length > 1) {\n            return t('files_sharing', 'Shared multiple times with different people');\n        }\n        const sharees = node.attributes.sharees?.sharee;\n        if (!sharees) {\n            // No sharees so just show the default message to create a new share\n            return t('files_sharing', 'Show sharing options');\n        }\n        const sharee = [sharees].flat()[0]; // the property is sometimes weirdly normalized, so we need to compensate\n        switch (sharee.type) {\n            case ShareType.User:\n                return t('files_sharing', 'Shared with {user}', { user: sharee['display-name'] });\n            case ShareType.Group:\n                return t('files_sharing', 'Shared with group {group}', { group: sharee['display-name'] ?? sharee.id });\n            default:\n                return t('files_sharing', 'Shared with others');\n        }\n    },\n    iconSvgInline(nodes) {\n        const node = nodes[0];\n        const shareTypes = Object.values(node?.attributes?.['share-types'] || {}).flat();\n        // Mixed share types\n        if (Array.isArray(node.attributes?.['share-types']) && node.attributes?.['share-types'].length > 1) {\n            return AccountPlusSvg;\n        }\n        // Link shares\n        if (shareTypes.includes(ShareType.Link)\n            || shareTypes.includes(ShareType.Email)) {\n            return LinkSvg;\n        }\n        // Group shares\n        if (shareTypes.includes(ShareType.Group)\n            || shareTypes.includes(ShareType.RemoteGroup)) {\n            return AccountGroupSvg;\n        }\n        // Circle shares\n        if (shareTypes.includes(ShareType.Team)) {\n            return CircleSvg;\n        }\n        if (node.owner && (node.owner !== getCurrentUser()?.uid || isExternal(node))) {\n            return generateAvatarSvg(node.owner, isExternal(node));\n        }\n        return AccountPlusSvg;\n    },\n    enabled(nodes) {\n        if (nodes.length !== 1) {\n            return false;\n        }\n        const node = nodes[0];\n        const shareTypes = node.attributes?.['share-types'];\n        const isMixed = Array.isArray(shareTypes) && shareTypes.length > 0;\n        // If the node is shared multiple times with\n        // different share types to the current user\n        if (isMixed) {\n            return true;\n        }\n        // If the node is shared by someone else\n        if (node.owner !== getCurrentUser()?.uid || isExternal(node)) {\n            return true;\n        }\n        // You need share permissions to share this file\n        // and read permissions to see the sidebar\n        return (node.permissions & Permission.SHARE) !== 0\n            && (node.permissions & Permission.READ) !== 0;\n    },\n    async exec(node, view, dir) {\n        // You need read permissions to see the sidebar\n        if ((node.permissions & Permission.READ) !== 0) {\n            window.OCA?.Files?.Sidebar?.setActiveTab?.('sharing');\n            sidebarAction.exec(node, view, dir);\n            return null;\n        }\n        // Should not happen as the enabled check should prevent this\n        // leaving it here for safety or in case someone calls this action directly\n        showError(t('files_sharing', 'You do not have enough permissions to share this file.'));\n        return null;\n    },\n    inline: () => true,\n});\nregisterFileAction(action);\n","/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { generateUrl } from '@nextcloud/router';\nconst isDarkMode = () => {\n    return window?.matchMedia?.('(prefers-color-scheme: dark)')?.matches === true\n        || document.querySelector('[data-themes*=dark]') !== null;\n};\nexport const generateAvatarSvg = (userId, isGuest = false) => {\n    // normal avatar url: /avatar/{userId}/32?guestFallback=true\n    // dark avatar url: /avatar/{userId}/32/dark?guestFallback=true\n    // guest avatar url: /avatar/guest/{userId}/32\n    // guest dark avatar url: /avatar/guest/{userId}/32/dark\n    const basePath = isGuest ? `/avatar/guest/${userId}` : `/avatar/${userId}`;\n    const darkModePath = isDarkMode() ? '/dark' : '';\n    const guestFallback = isGuest ? '' : '?guestFallback=true';\n    const url = `${basePath}/32${darkModePath}${guestFallback}`;\n    const avatarUrl = generateUrl(url, { userId });\n    return `<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"\n\t\txmlns=\"http://www.w3.org/2000/svg\" class=\"sharing-status__avatar\">\n\t\t<image href=\"${avatarUrl}\" height=\"32\" width=\"32\" />\n\t</svg>`;\n};\n","/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nimport { registerDavProperty } from '@nextcloud/files/dav';\nimport registerSharingViews from './views/shares';\nimport './actions/acceptShareAction';\nimport './actions/openInFilesAction';\nimport './actions/rejectShareAction';\nimport './actions/restoreShareAction';\nimport './actions/sharingStatusAction';\nregisterSharingViews();\nregisterDavProperty('nc:sharees', { nc: 'http://nextcloud.org/ns' });\nregisterDavProperty('nc:share-attributes', { nc: 'http://nextcloud.org/ns' });\nregisterDavProperty('oc:share-types', { oc: 'http://owncloud.org/ns' });\nregisterDavProperty('ocs:share-permissions', { ocs: 'http://open-collaboration-services.org/ns' });\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.action-items>.files-list__row-action-sharing-status{direction:rtl;padding-inline-end:0 !important}svg.sharing-status__avatar{height:32px !important;width:32px !important;max-height:32px !important;max-width:32px !important;border-radius:32px;overflow:hidden}.files-list__row-action-sharing-status .button-vue__text{color:var(--color-primary-element)}.files-list__row-action-sharing-status .button-vue__icon{color:var(--color-primary-element)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/actions/sharingStatusAction.scss\"],\"names\":[],\"mappings\":\"AAMC,qDAEA,aAAA,CAEA,+BAAA,CAGD,2BACC,sBAAA,CACA,qBAAA,CACA,0BAAA,CACA,yBAAA,CACA,kBAAA,CACA,eAAA,CAIA,yDACC,kCAAA,CAED,yDACC,kCAAA\",\"sourcesContent\":[\"/**\\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\\n * SPDX-License-Identifier: AGPL-3.0-or-later\\n */\\n\\n // Only when rendered inline, when not enough space, this is put in the menu\\n .action-items > .files-list__row-action-sharing-status {\\n\\t// put icon at the end of the button\\n\\tdirection: rtl;\\n\\t// align icons with text-less inline actions\\n\\tpadding-inline-end: 0 !important;\\n}\\n\\nsvg.sharing-status__avatar {\\n\\theight: 32px !important;\\n\\twidth: 32px !important;\\n\\tmax-height: 32px !important;\\n\\tmax-width: 32px !important;\\n\\tborder-radius: 32px;\\n\\toverflow: hidden;\\n}\\n\\n.files-list__row-action-sharing-status {\\n\\t.button-vue__text {\\n\\t\\tcolor: var(--color-primary-element);\\n\\t}\\n\\t.button-vue__icon {\\n\\t\\tcolor: var(--color-primary-element);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"857\":\"89447025dfbc21bc3d51\",\"2441\":\"bd6d3dc836e836cd4795\",\"5775\":\"2db0bc22d25dcd7b0e81\",\"5862\":\"18c97d281a8207f0ce8d\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 5928;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t5928: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4208], () => (__webpack_require__(2890)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","getLoggerBuilder","setApp","detectUser","build","rootPath","getCurrentUser","uid","headers","ocsEntryToNode","async","ocsEntry","undefined","remote_id","mimetype","mime","default","getType","name","item_type","type","item_mtime","mtime","file_target","mountpoint","accepted","item_permissions","Permission","NONE","permissions","uid_owner","owner","displayname_owner","isFolder","hasPreview","has_preview","Node","Folder","File","fileid","file_source","file_id","id","path","source","generateRemoteUrl","replaceAll","sharees","Date","stime","sharee","share_with","share_with_displayname","share_type","size","item_size","root","attributes","favorite","tags","includes","window","OC","TAG_FAVORITE","error","logger","getShares","shared_with_me","arguments","length","url","generateOcsUrl","axios","get","params","include_tags","getContents","sharedWithOthers","pendingShares","deletedshares","filterTypes","promises","push","getRemoteShares","getPendingShares","getRemotePendingShares","getDeletedShares","data","Promise","all","map","response","ocs","flat","contents","filter","node","nodes","key","Object","values","reduce","acc","curr","folder","sharesViewId","sharedWithYouViewId","sharedWithOthersViewId","sharingByLinksViewId","deletedSharesViewId","pendingSharesViewId","action","FileAction","displayName","n","iconSvgInline","enabled","view","exec","isRemote","remote","shareBase","post","emit","execBatch","dir","this","order","inline","registerFileAction","t","FileType","OCP","Files","Router","goToRoute","String","dirname","openfile","DefaultType","HIDDEN","some","Share","SHARE_TYPE_REMOTE_GROUP","delete","ShareType","ShareType2","InformationSvg","OCA","Sidebar","startsWith","open","query","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","isExternal","title","ownerDisplayName","User","user","Group","group","shareTypes","Array","isArray","AccountPlusSvg","Link","Email","LinkSvg","RemoteGroup","AccountGroupSvg","Team","userId","isGuest","matchMedia","matches","document","querySelector","generateUrl","generateAvatarSvg","SHARE","READ","setActiveTab","sidebarAction","showError","Navigation","getNavigation","register","View","caption","emptyTitle","emptyCaption","icon","columns","parent","SHARE_TYPE_LINK","registerSharingViews","registerDavProperty","nc","oc","___CSS_LOADER_EXPORT___","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","f","e","chunkId","u","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","setTimeout","bind","target","head","appendChild","Symbol","toStringTag","value","nmd","paths","children","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","test","Error","replace","p","b","baseURI","self","href","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}