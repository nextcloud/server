import{c as o,o as i,b as a,e as t,t as l,m as z,f as M,g as d,I as E,p as $,r as N,N as B,A as V,O as T,w as n,h,u as e,j as m,H as j,F as k,C as S,z as q,k as F}from"./runtime-dom.esm-bundler-w0tDt7Gi.chunk.mjs";import{a as H,s as Y,u as Z}from"./index-Bndk0DrU.chunk.mjs";import{a as D}from"./index-C1xmmKTZ-zpf0CQaW.chunk.mjs";import{a as w,l as P}from"./index-Ma7sfat2.chunk.mjs";import{t as y}from"./translation-DoG5ZELJ-Bni_xMHF.chunk.mjs";import{g as G}from"./createElementId-DhjFt1I9-B1fq6aa1.chunk.mjs";import{N as J}from"./NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U-DGMMvskr.chunk.mjs";import{a as K}from"./NcModal-DHryP_87-BkYzWFXJ.chunk.mjs";import{N as L,a as Q}from"./NcContent-O-bMKi-3-BTSEBJ49.chunk.mjs";import{N as R}from"./NcAvatar-C9d7Wrc8-q6rj2o8q.chunk.mjs";import{N as b}from"./autolink-U5pBzLgI-2h5mm9kB.chunk.mjs";import{N as W}from"./NcEmptyContent-B8-90BSI-BCYMHGEW.chunk.mjs";import{b as X}from"./NcRichText-DJlaHs_Q-DtEEZneY.chunk.mjs";import{A as ee,l as se}from"./logger-BmxF3kmk.chunk.mjs";import{P as ie}from"./PencilOutline-DDvj_Sz4.chunk.mjs";import"./modulepreload-polyfill-BxzAKjcf.chunk.mjs";import"./index-1X7ElQaR.chunk.mjs";import"./Web-DzGiDslj.chunk.mjs";import"./mdi-YPhQfxXZ.chunk.mjs";import"./index-2HC-5o-4.chunk.mjs";import"./index-sH3U_332.chunk.mjs";import"./colors-BHGKZFDI-DxHUsrfC.chunk.mjs";import"./NcUserStatusIcon-XiwrgeCm-BwqP5szn.chunk.mjs";import"./NcCheckboxRadioSwitch-BMsPx74L-_RgKMJqI.chunk.mjs";import"./NcSelect-DLheQ2yp-dx4VDMCp.chunk.mjs";import"./TrashCanOutline-Big6DF74.chunk.mjs";import"./NcInputField-o5OFv3z6-BKcArNCr.chunk.mjs";const ae={name:"MapMarkerIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},re=["aria-hidden","aria-label"],oe=["fill","width","height"],te={d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"},le={key:0};function ne(c,s,r,v,I,p){return i(),o("span",z(c.$attrs,{"aria-hidden":r.title?null:"true","aria-label":r.title,class:"material-design-icon map-marker-icon",role:"img",onClick:s[0]||(s[0]=u=>c.$emit("click",u))}),[(i(),o("svg",{fill:r.fillColor,class:"material-design-icon__svg",width:r.size,height:r.size,viewBox:"0 0 24 24"},[a("path",te,[r.title?(i(),o("title",le,l(r.title),1)):t("",!0)])],8,oe))],16,re)}const de=w(ae,[["render",ne]]),ce=M({__name:"ProfileSection",props:{section:{},userId:{}},setup(c){return(s,r)=>(i(),o("div",{class:$(s.$style.profileSection)},[(i(),d(E(c.section.tagName),z(c.section.params,{".user":c.userId}),null,48,[".user"]))],2))}}),pe="_profileSection_1o17g_2",ue={profileSection:pe},fe={$style:ue},_e=w(ce,[["__cssModules",fe]]),me={class:"profile__header"},he={class:"profile__header__container"},ye={class:"profile__header__container__displayname"},ve={key:0},ge={key:1,class:"profile__header__container__pronouns"},ke={class:"profile__wrapper"},be={class:"profile__content"},we={class:"profile__sidebar"},Ie={class:"user-actions"},Ae=["src"],Ce=["src"],Ne={class:"profile__blocks"},Se={key:0,class:"profile__blocks-details"},Pe={key:0,class:"detail"},ze={key:0},Me={key:1,class:"detail"},$e={key:0,class:"profile__blocks-headline"},xe=M({__name:"ProfileApp",setup(c){const s=P("profile","profileParameters",{userId:void 0,displayname:void 0,address:void 0,organisation:void 0,role:void 0,headline:void 0,biography:void 0,actions:[],isUserAvatarVisible:!1,pronouns:void 0}),r=N(P("profile","status",{})),v=N([]),I=q(()=>[...v.value].sort((f,g)=>g.order-f.order));B(()=>{v.value=window.OCA.Profile.ProfileSections.getSections()});const p=H()?.uid===s.userId,u=s.actions[0],x=s.actions.slice(1),O=G("/settings/user"),U=p?y("profile","You have not added any info yet"):y("profile","{user} has not added any info yet",{user:s.displayname||s.userId||""});V(()=>{document.title=`${s.displayname||s.userId} - ${document.title}`,Y("user_status:status.updated",A)}),T(()=>{Z("user_status:status.updated",A)});function A(f){p&&f.userId===s.userId&&(r.value=f)}function C(){if(!p)return;const f=document.querySelector(".user-status-menu-item");f?f.click():D(y("profile","Error opening the user status modal, try hard refreshing the page"))}return(f,g)=>(i(),d(e(Q),{appName:"profile"},{default:n(()=>[h(e(L),null,{default:n(()=>[a("div",me,[a("div",he,[g[0]||(g[0]=a("div",{class:"profile__header__container__placeholder"},null,-1)),a("div",ye,[a("h2",null,l(e(s).displayname||e(s).userId),1),e(s).pronouns?(i(),o("span",ve,"·")):t("",!0),e(s).pronouns?(i(),o("span",ge,l(e(s).pronouns),1)):t("",!0),p?(i(),d(e(b),{key:2,variant:"primary",href:e(O)},{icon:n(()=>[h(ie,{size:20})]),default:n(()=>[m(" "+l(e(y)("profile","Edit Profile")),1)]),_:1},8,["href"])):t("",!0)]),r.value.icon||r.value.message?(i(),d(e(b),{key:0,disabled:!p,variant:p?"tertiary":"tertiary-no-background",onClick:C},{default:n(()=>[m(l(r.value.icon)+" "+l(r.value.message),1)]),_:1},8,["disabled","variant"])):t("",!0)])]),a("div",ke,[a("div",be,[a("div",we,[h(e(R),{class:$(["avatar",{interactive:p}]),user:e(s).userId,size:180,disableMenu:!0,disableTooltip:!0,isNoUser:!e(s).isUserAvatarVisible,onClick:j(C,["prevent","stop"])},null,8,["class","user","isNoUser"]),a("div",Ie,[e(u)?(i(),d(e(b),{key:0,variant:"primary",class:"user-actions__primary",href:e(u).target,icon:e(u).icon,target:e(u).id==="phone"?"_self":"_blank"},{icon:n(()=>[a("img",{src:e(u).icon,alt:"",class:"user-actions__primary__icon"},null,8,Ae)]),default:n(()=>[m(" "+l(e(u).title),1)]),_:1},8,["href","icon","target"])):t("",!0),h(e(K),{class:"user-actions__other",inline:4},{default:n(()=>[(i(!0),o(k,null,S(e(x),_=>(i(),d(e(J),{key:_.id,closeAfterClick:!0,href:_.target,target:_.id==="phone"?"_self":"_blank"},{icon:n(()=>[a("img",{src:_.icon,alt:"",class:"user-actions__other__icon"},null,8,Ce)]),default:n(()=>[m(" "+l(_.title),1)]),_:2},1032,["href","target"]))),128))]),_:1})])]),a("div",Ne,[e(s).organisation||e(s).role||e(s).address?(i(),o("div",Se,[e(s).organisation||e(s).role?(i(),o("div",Pe,[a("p",null,[m(l(e(s).organisation)+" ",1),e(s).organisation&&e(s).role?(i(),o("span",ze,"•")):t("",!0),m(" "+l(e(s).role),1)])])):t("",!0),e(s).address?(i(),o("div",Me,[a("p",null,[h(de,{class:"map-icon",size:16}),m(" "+l(e(s).address),1)])])):t("",!0)])):t("",!0),e(s).headline||e(s).biography||v.value.length>0?(i(),o(k,{key:1},[e(s).headline?(i(),o("h3",$e,l(e(s).headline),1)):t("",!0),e(s).biography?(i(),d(e(X),{key:1,text:e(s).biography,useExtendedMarkdown:""},null,8,["text"])):t("",!0),(i(!0),o(k,null,S(I.value,_=>(i(),d(_e,{key:_.id,section:_,userId:e(s).userId},null,8,["section","userId"]))),128))],64)):(i(),d(e(W),{key:2,class:"profile__blocks-empty-info",name:e(U),description:e(y)("profile","The headline and about sections will show up here")},{icon:n(()=>[h(ee,{size:60})]),_:1},8,["name","description"]))])])])]),_:1})]),_:1}))}}),Oe=w(xe,[["__scopeId","data-v-4561b582"]]);class Ue{#e;constructor(){this.#e=new Map}registerSection(s){this.#e.has(s.id)&&se.warn(`Profile section with id '${s.id}' is already registered.`),this.#e.set(s.id,s)}getSections(){return[...this.#e.values()]}}window.OCA.Profile??={},window.OCA.Profile.ProfileSections=new Ue;const Ee=F(Oe);Ee.mount("#content");
//# sourceMappingURL=profile-main.mjs.map
