import{v as t,o as s,B as r,x as o,t as l,s as C,b as $,c as p,N as O,y as x,r as z,n as H,Z,z as E,$ as L,w as d,e as h,u as i,g as f,H as U,F as A,C as P,h as q}from"./index-B3fM9XzM.chunk.mjs";import{_ as k,a as F,s as T,u as D,g as Y}from"./string_decoder-CW7-7cc6.chunk.mjs";import{h as j,s as G}from"./index-JpgrUA2Z-Bk1urlYU.chunk.mjs";import{l as M,t as y}from"./mdi-C6koAnlx.chunk.mjs";import{c as J}from"./createElementId-DhjFt1I9-DYB7_VOD.chunk.mjs";import{N as K}from"./NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U-DJmI9Yye.chunk.mjs";import{N as Q,a as R,b as W}from"./NcRichText-CBMtJzE_-B1C-Mutf.chunk.mjs";import{N as X}from"./NcAvatar-DmUGApWA-CmSa2UB1.chunk.mjs";import{c as w}from"./NcNoteCard-CVhtNL04-NCMYExJH.chunk.mjs";import{N as ee}from"./index-BdHmWgGI.chunk.mjs";import{P as ie}from"./PencilOutline-BIuFAr5N.chunk.mjs";import"./modulepreload-polyfill-BxzAKjcf.chunk.mjs";import"./index-BMztHQmx.chunk.mjs";import"./colors-Go3zmZRD-DopeMbFY.chunk.mjs";import"./NcCheckboxRadioSwitch-BCSKF7Tk-DXNr2PG3.chunk.mjs";import"./index-Bis6vWHp.chunk.mjs";import"./NcSelect-Czzsi3P_-j-TCAwKy.chunk.mjs";import"./TrashCanOutline-Dk8zzxc0.chunk.mjs";import"./NcInputField-Bwsh2aHY-kFLkLvp0.chunk.mjs";import"./NcUserStatusIcon-CGEf7fej-rG0Zbhsv.chunk.mjs";const se={name:"AccountOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ae=["aria-hidden","aria-label"],te=["fill","width","height"],re={d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,13C14.67,13 20,14.33 20,17V20H4V17C4,14.33 9.33,13 12,13M12,14.9C9.03,14.9 5.9,16.36 5.9,17V18.1H18.1V17C18.1,16.36 14.97,14.9 12,14.9Z"},oe={key:0};function le(n,e,a,g,b,u){return s(),t("span",C(n.$attrs,{"aria-hidden":a.title?null:"true","aria-label":a.title,class:"material-design-icon account-outline-icon",role:"img",onClick:e[0]||(e[0]=c=>n.$emit("click",c))}),[(s(),t("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[r("path",re,[a.title?(s(),t("title",oe,l(a.title),1)):o("",!0)])],8,te))],16,ae)}const ne=k(se,[["render",le]]),de={name:"MapMarkerIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ce=["aria-hidden","aria-label"],ue=["fill","width","height"],pe={d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"},_e={key:0};function me(n,e,a,g,b,u){return s(),t("span",C(n.$attrs,{"aria-hidden":a.title?null:"true","aria-label":a.title,class:"material-design-icon map-marker-icon",role:"img",onClick:e[0]||(e[0]=c=>n.$emit("click",c))}),[(s(),t("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[r("path",pe,[a.title?(s(),t("title",_e,l(a.title),1)):o("",!0)])],8,ue))],16,ce)}const fe=k(de,[["render",me]]),he=$({__name:"ProfileSection",props:{section:{},userId:{}},setup(n){return(e,a)=>(s(),t("div",{class:x(e.$style.profileSection)},[(s(),p(O(n.section.tagName),C(n.section.params,{".user":n.userId}),null,48,[".user"]))],2))}}),ge="_profileSection_1o17g_2",ye={profileSection:ge},ve={$style:ye},ke=k(he,[["__cssModules",ve]]),be={class:"profile__header"},Ae={class:"profile__header__container"},we={class:"profile__header__container__displayname"},Ce={key:0},Ie={key:1,class:"profile__header__container__pronouns"},Se={class:"profile__wrapper"},ze={class:"profile__content"},Pe={class:"profile__sidebar"},Me={class:"user-actions"},$e=["src"],xe=["src"],Ne={class:"profile__blocks"},Ve={key:0,class:"profile__blocks-details"},Be={key:0,class:"detail"},Oe={key:0},He={key:1,class:"detail"},Ze={key:0,class:"profile__blocks-headline"},Ee=$({__name:"ProfileApp",setup(n){const e=M("profile","profileParameters",{userId:void 0,displayname:void 0,address:void 0,organisation:void 0,role:void 0,headline:void 0,biography:void 0,actions:[],isUserAvatarVisible:!1,pronouns:void 0}),a=z(M("profile","status",{})),g=z([]),b=H(()=>[...g.value].sort((_,v)=>v.order-_.order));Z(()=>{g.value=window.OCA.Profile.ProfileSections.getSections()});const u=F()?.uid===e.userId,c=e.actions[0],N=e.actions.slice(1),V=J("/settings/user"),B=u?y("profile","You have not added any info yet"):y("profile","{user} has not added any info yet",{user:e.displayname||e.userId||""});E(()=>{document.title=`${e.displayname||e.userId} - ${document.title}`,T("user_status:status.updated",I)}),L(()=>{D("user_status:status.updated",I)});function I(_){u&&_.userId===e.userId&&(a.value=_)}function S(){if(!u)return;const _=document.querySelector(".user-status-menu-item");_?_.click():G(y("profile","Error opening the user status modal, try hard refreshing the page"))}return(_,v)=>(s(),p(i(W),{"app-name":"profile"},{default:d(()=>[h(i(Q),null,{default:d(()=>[r("div",be,[r("div",Ae,[v[0]||(v[0]=r("div",{class:"profile__header__container__placeholder"},null,-1)),r("div",we,[r("h2",null,l(i(e).displayname||i(e).userId),1),i(e).pronouns?(s(),t("span",Ce,"·")):o("",!0),i(e).pronouns?(s(),t("span",Ie,l(i(e).pronouns),1)):o("",!0),u?(s(),p(i(w),{key:2,variant:"primary",href:i(V)},{icon:d(()=>[h(ie,{size:20})]),default:d(()=>[f(" "+l(i(y)("profile","Edit Profile")),1)]),_:1},8,["href"])):o("",!0)]),a.value.icon||a.value.message?(s(),p(i(w),{key:0,disabled:!u,variant:u?"tertiary":"tertiary-no-background",onClick:S},{default:d(()=>[f(l(a.value.icon)+" "+l(a.value.message),1)]),_:1},8,["disabled","variant"])):o("",!0)])]),r("div",Se,[r("div",ze,[r("div",Pe,[h(i(X),{class:x(["avatar",{interactive:u}]),user:i(e).userId,size:180,"disable-menu":!0,"disable-tooltip":!0,"is-no-user":!i(e).isUserAvatarVisible,onClick:U(S,["prevent","stop"])},null,8,["class","user","is-no-user"]),r("div",Me,[i(c)?(s(),p(i(w),{key:0,variant:"primary",class:"user-actions__primary",href:i(c).target,icon:i(c).icon,target:i(c).id==="phone"?"_self":"_blank"},{icon:d(()=>[r("img",{src:i(c).icon,alt:"",class:"user-actions__primary__icon"},null,8,$e)]),default:d(()=>[f(" "+l(i(c).title),1)]),_:1},8,["href","icon","target"])):o("",!0),h(i(j),{class:"user-actions__other",inline:4},{default:d(()=>[(s(!0),t(A,null,P(i(N),m=>(s(),p(i(K),{key:m.id,"close-after-click":!0,href:m.target,target:m.id==="phone"?"_self":"_blank"},{icon:d(()=>[r("img",{src:m.icon,alt:"",class:"user-actions__other__icon"},null,8,xe)]),default:d(()=>[f(" "+l(m.title),1)]),_:2},1032,["href","target"]))),128))]),_:1})])]),r("div",Ne,[i(e).organisation||i(e).role||i(e).address?(s(),t("div",Ve,[i(e).organisation||i(e).role?(s(),t("div",Be,[r("p",null,[f(l(i(e).organisation)+" ",1),i(e).organisation&&i(e).role?(s(),t("span",Oe,"•")):o("",!0),f(" "+l(i(e).role),1)])])):o("",!0),i(e).address?(s(),t("div",He,[r("p",null,[h(fe,{class:"map-icon",size:16}),f(" "+l(i(e).address),1)])])):o("",!0)])):o("",!0),i(e).headline||i(e).biography||g.value.length>0?(s(),t(A,{key:1},[i(e).headline?(s(),t("h3",Ze,l(i(e).headline),1)):o("",!0),i(e).biography?(s(),p(i(R),{key:1,text:i(e).biography,"use-extended-markdown":""},null,8,["text"])):o("",!0),(s(!0),t(A,null,P(b.value,m=>(s(),p(ke,{key:m.id,section:m,"user-id":i(e).userId},null,8,["section","user-id"]))),128))],64)):(s(),p(i(ee),{key:2,class:"profile__blocks-empty-info",name:i(B),description:i(y)("profile","The headline and about sections will show up here")},{icon:d(()=>[h(ne,{size:60})]),_:1},8,["name","description"]))])])])]),_:1})]),_:1}))}}),Le=k(Ee,[["__scopeId","data-v-2c3b21d6"]]),Ue=Y().setApp("profile").detectLogLevel().build();class qe{#e;constructor(){this.#e=new Map}registerSection(e){this.#e.has(e.id)&&Ue.warn(`Profile section with id '${e.id}' is already registered.`),this.#e.set(e.id,e)}getSections(){return[...this.#e.values()]}}window.OCA.Profile??={},window.OCA.Profile.ProfileSections=new qe;const Fe=q(Le);Fe.mount("#content");
//# sourceMappingURL=profile-main.mjs.map
