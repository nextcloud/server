import{j as o,o as i,k as a,l as t,t as l,y as z,b as M,c as d,I as O,n as $,r as N,N as B,A as L,O as V,w as n,e as h,u as e,g as f,H as T,F as k,C as S,z as j,h as q}from"./runtime-dom.esm-bundler-BprhcrOE.chunk.mjs";import{a as F,s as H,u as Y,g as Z}from"./index-Bndk0DrU.chunk.mjs";import{a as D}from"./index-C1xmmKTZ-DrIxA_40.chunk.mjs";import{a as w,l as P}from"./index-Ma7sfat2.chunk.mjs";import{t as y}from"./translation-DoG5ZELJ-Bni_xMHF.chunk.mjs";import{g as G}from"./createElementId-DhjFt1I9-BQ18DTJF.chunk.mjs";import{N as J}from"./NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U-BBzIHw3y.chunk.mjs";import{a as K}from"./NcModal-DHryP_87-06sOiSPg.chunk.mjs";import{N as Q,a as R}from"./NcContent-O-bMKi-3-C4hlrTFr.chunk.mjs";import{N as W}from"./NcAvatar-C9d7Wrc8-DdpNMIwi.chunk.mjs";import{N as b,A as X}from"./AccountOutline-DmK_gbmB.chunk.mjs";import{N as ee}from"./NcEmptyContent-B8-90BSI-DoWQxWGL.chunk.mjs";import{b as se}from"./NcRichText-DJlaHs_Q-VnmQFlJ_.chunk.mjs";import{P as ie}from"./PencilOutline-Co91mt8h.chunk.mjs";import"./modulepreload-polyfill-BxzAKjcf.chunk.mjs";import"./index-CDp2IiSu.chunk.mjs";import"./Web-sfKoe9bN.chunk.mjs";import"./mdi-DaKN7HzT.chunk.mjs";import"./index-C-LJcJnH.chunk.mjs";import"./index-sH3U_332.chunk.mjs";import"./colors-BHGKZFDI-LpnWtamI.chunk.mjs";import"./NcUserStatusIcon-XiwrgeCm-BlmNOek6.chunk.mjs";import"./NcCheckboxRadioSwitch-BMsPx74L-SpcskPMe.chunk.mjs";import"./NcSelect-DLheQ2yp-BSVZMNN4.chunk.mjs";import"./TrashCanOutline-BH9kHVkS.chunk.mjs";import"./NcInputField-o5OFv3z6-B9dr1xjk.chunk.mjs";const ae={name:"MapMarkerIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},re=["aria-hidden","aria-label"],oe=["fill","width","height"],te={d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"},le={key:0};function ne(c,s,r,g,A,p){return i(),o("span",z(c.$attrs,{"aria-hidden":r.title?null:"true","aria-label":r.title,class:"material-design-icon map-marker-icon",role:"img",onClick:s[0]||(s[0]=u=>c.$emit("click",u))}),[(i(),o("svg",{fill:r.fillColor,class:"material-design-icon__svg",width:r.size,height:r.size,viewBox:"0 0 24 24"},[a("path",te,[r.title?(i(),o("title",le,l(r.title),1)):t("",!0)])],8,oe))],16,re)}const de=w(ae,[["render",ne]]),ce=M({__name:"ProfileSection",props:{section:{},userId:{}},setup(c){return(s,r)=>(i(),o("div",{class:$(s.$style.profileSection)},[(i(),d(O(c.section.tagName),z(c.section.params,{".user":c.userId}),null,48,[".user"]))],2))}}),pe="_profileSection_1o17g_2",ue={profileSection:pe},me={$style:ue},_e=w(ce,[["__cssModules",me]]),fe={class:"profile__header"},he={class:"profile__header__container"},ye={class:"profile__header__container__displayname"},ge={key:0},ve={key:1,class:"profile__header__container__pronouns"},ke={class:"profile__wrapper"},be={class:"profile__content"},we={class:"profile__sidebar"},Ae={class:"user-actions"},Ie=["src"],Ce=["src"],Ne={class:"profile__blocks"},Se={key:0,class:"profile__blocks-details"},Pe={key:0,class:"detail"},ze={key:0},Me={key:1,class:"detail"},$e={key:0,class:"profile__blocks-headline"},xe=M({__name:"ProfileApp",setup(c){const s=P("profile","profileParameters",{userId:void 0,displayname:void 0,address:void 0,organisation:void 0,role:void 0,headline:void 0,biography:void 0,actions:[],isUserAvatarVisible:!1,pronouns:void 0}),r=N(P("profile","status",{})),g=N([]),A=j(()=>[...g.value].sort((m,v)=>v.order-m.order));B(()=>{g.value=window.OCA.Profile.ProfileSections.getSections()});const p=F()?.uid===s.userId,u=s.actions[0],x=s.actions.slice(1),U=G("/settings/user"),E=p?y("profile","You have not added any info yet"):y("profile","{user} has not added any info yet",{user:s.displayname||s.userId||""});L(()=>{document.title=`${s.displayname||s.userId} - ${document.title}`,H("user_status:status.updated",I)}),V(()=>{Y("user_status:status.updated",I)});function I(m){p&&m.userId===s.userId&&(r.value=m)}function C(){if(!p)return;const m=document.querySelector(".user-status-menu-item");m?m.click():D(y("profile","Error opening the user status modal, try hard refreshing the page"))}return(m,v)=>(i(),d(e(R),{appName:"profile"},{default:n(()=>[h(e(Q),null,{default:n(()=>[a("div",fe,[a("div",he,[v[0]||(v[0]=a("div",{class:"profile__header__container__placeholder"},null,-1)),a("div",ye,[a("h2",null,l(e(s).displayname||e(s).userId),1),e(s).pronouns?(i(),o("span",ge,"·")):t("",!0),e(s).pronouns?(i(),o("span",ve,l(e(s).pronouns),1)):t("",!0),p?(i(),d(e(b),{key:2,variant:"primary",href:e(U)},{icon:n(()=>[h(ie,{size:20})]),default:n(()=>[f(" "+l(e(y)("profile","Edit Profile")),1)]),_:1},8,["href"])):t("",!0)]),r.value.icon||r.value.message?(i(),d(e(b),{key:0,disabled:!p,variant:p?"tertiary":"tertiary-no-background",onClick:C},{default:n(()=>[f(l(r.value.icon)+" "+l(r.value.message),1)]),_:1},8,["disabled","variant"])):t("",!0)])]),a("div",ke,[a("div",be,[a("div",we,[h(e(W),{class:$(["avatar",{interactive:p}]),user:e(s).userId,size:180,disableMenu:!0,disableTooltip:!0,isNoUser:!e(s).isUserAvatarVisible,onClick:T(C,["prevent","stop"])},null,8,["class","user","isNoUser"]),a("div",Ae,[e(u)?(i(),d(e(b),{key:0,variant:"primary",class:"user-actions__primary",href:e(u).target,icon:e(u).icon,target:e(u).id==="phone"?"_self":"_blank"},{icon:n(()=>[a("img",{src:e(u).icon,alt:"",class:"user-actions__primary__icon"},null,8,Ie)]),default:n(()=>[f(" "+l(e(u).title),1)]),_:1},8,["href","icon","target"])):t("",!0),h(e(K),{class:"user-actions__other",inline:4},{default:n(()=>[(i(!0),o(k,null,S(e(x),_=>(i(),d(e(J),{key:_.id,closeAfterClick:!0,href:_.target,target:_.id==="phone"?"_self":"_blank"},{icon:n(()=>[a("img",{src:_.icon,alt:"",class:"user-actions__other__icon"},null,8,Ce)]),default:n(()=>[f(" "+l(_.title),1)]),_:2},1032,["href","target"]))),128))]),_:1})])]),a("div",Ne,[e(s).organisation||e(s).role||e(s).address?(i(),o("div",Se,[e(s).organisation||e(s).role?(i(),o("div",Pe,[a("p",null,[f(l(e(s).organisation)+" ",1),e(s).organisation&&e(s).role?(i(),o("span",ze,"•")):t("",!0),f(" "+l(e(s).role),1)])])):t("",!0),e(s).address?(i(),o("div",Me,[a("p",null,[h(de,{class:"map-icon",size:16}),f(" "+l(e(s).address),1)])])):t("",!0)])):t("",!0),e(s).headline||e(s).biography||g.value.length>0?(i(),o(k,{key:1},[e(s).headline?(i(),o("h3",$e,l(e(s).headline),1)):t("",!0),e(s).biography?(i(),d(e(se),{key:1,text:e(s).biography,useExtendedMarkdown:""},null,8,["text"])):t("",!0),(i(!0),o(k,null,S(A.value,_=>(i(),d(_e,{key:_.id,section:_,userId:e(s).userId},null,8,["section","userId"]))),128))],64)):(i(),d(e(ee),{key:2,class:"profile__blocks-empty-info",name:e(E),description:e(y)("profile","The headline and about sections will show up here")},{icon:n(()=>[h(X,{size:60})]),_:1},8,["name","description"]))])])])]),_:1})]),_:1}))}}),Ue=w(xe,[["__scopeId","data-v-4561b582"]]),Ee=Z().setApp("profile").detectLogLevel().build();class Oe{#e;constructor(){this.#e=new Map}registerSection(s){this.#e.has(s.id)&&Ee.warn(`Profile section with id '${s.id}' is already registered.`),this.#e.set(s.id,s)}getSections(){return[...this.#e.values()]}}window.OCA.Profile??={},window.OCA.Profile.ProfileSections=new Oe;const Be=q(Ue);Be.mount("#content");
//# sourceMappingURL=profile-main.mjs.map
