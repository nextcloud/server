import{s as r,o as s,A as t,v as o,t as l,q as C,b as $,c as p,W as O,x,r as P,l as q,X as E,y as H,Y as L,w as d,e as h,u as i,g as f,G as U,F as A,B as z,h as Y}from"./preload-helper-BcKx2dRj.chunk.mjs";import{f as F,s as T,u as Z,g as D}from"./mdi-D9N03AQK.chunk.mjs";import{j as G,s as W}from"./index-JpgrUA2Z-C-bEcc7c.chunk.mjs";import{_ as k,l as M}from"./_plugin-vue_export-helper-CqVUm19z.chunk.mjs";import{t as y}from"./index-DxX3M173.chunk.mjs";import{c as X}from"./createElementId-DhjFt1I9-sbdxHOjK.chunk.mjs";import{N as j}from"./NcActionRouter-oT-YU_jf-CGKyc3aD.chunk.mjs";import{N as J,a as K,b as Q}from"./NcRichText-CBMtJzE_-D09bdei-.chunk.mjs";import{N as R}from"./NcAvatar-DmUGApWA-Bn17jGeb.chunk.mjs";import{c as w}from"./NcNoteCard-CVhtNL04-Bouqxu_R.chunk.mjs";import{N as ee}from"./index-DHIaL2KO.chunk.mjs";import{P as ie}from"./PencilOutline-CKHP5rG_.chunk.mjs";import"./modulepreload-polyfill-BxzAKjcf.chunk.mjs";import"./colors-Go3zmZRD-DG8bkmIe.chunk.mjs";import"./NcCheckboxRadioSwitch-BCSKF7Tk-CW55vp24.chunk.mjs";import"./index-SiCbjwnT.chunk.mjs";import"./string_decoder-BO00msnV.chunk.mjs";import"./NcSelect-Czzsi3P_-j1mYabKj.chunk.mjs";import"./TrashCanOutline-ChT1dy1U.chunk.mjs";import"./NcInputField-Bwsh2aHY-B1JPZ-0t.chunk.mjs";import"./NcUserStatusIcon-CGEf7fej-DoceQPSZ.chunk.mjs";const se={name:"AccountOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ae=["aria-hidden","aria-label"],re=["fill","width","height"],te={d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,13C14.67,13 20,14.33 20,17V20H4V17C4,14.33 9.33,13 12,13M12,14.9C9.03,14.9 5.9,16.36 5.9,17V18.1H18.1V17C18.1,16.36 14.97,14.9 12,14.9Z"},oe={key:0};function le(n,e,a,g,b,u){return s(),r("span",C(n.$attrs,{"aria-hidden":a.title?null:"true","aria-label":a.title,class:"material-design-icon account-outline-icon",role:"img",onClick:e[0]||(e[0]=c=>n.$emit("click",c))}),[(s(),r("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[t("path",te,[a.title?(s(),r("title",oe,l(a.title),1)):o("",!0)])],8,re))],16,ae)}const ne=k(se,[["render",le]]),de={name:"MapMarkerIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ce=["aria-hidden","aria-label"],ue=["fill","width","height"],pe={d:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"},me={key:0};function _e(n,e,a,g,b,u){return s(),r("span",C(n.$attrs,{"aria-hidden":a.title?null:"true","aria-label":a.title,class:"material-design-icon map-marker-icon",role:"img",onClick:e[0]||(e[0]=c=>n.$emit("click",c))}),[(s(),r("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[t("path",pe,[a.title?(s(),r("title",me,l(a.title),1)):o("",!0)])],8,ue))],16,ce)}const fe=k(de,[["render",_e]]),he=$({__name:"ProfileSection",props:{section:{},userId:{}},setup(n){return(e,a)=>(s(),r("div",{class:x(e.$style.profileSection)},[(s(),p(O(n.section.tagName),C(n.section.params,{".user":n.userId}),null,48,[".user"]))],2))}}),ge="_profileSection_1o17g_2",ye={profileSection:ge},ve={$style:ye},ke=k(he,[["__cssModules",ve]]),be={class:"profile__header"},Ae={class:"profile__header__container"},we={class:"profile__header__container__displayname"},Ce={key:0},Ie={key:1,class:"profile__header__container__pronouns"},Se={class:"profile__wrapper"},Pe={class:"profile__content"},ze={class:"profile__sidebar"},Me={class:"user-actions"},$e=["src"],xe=["src"],Ne={class:"profile__blocks"},Ve={key:0,class:"profile__blocks-details"},Be={key:0,class:"detail"},Oe={key:0},qe={key:1,class:"detail"},Ee={key:0,class:"profile__blocks-headline"},He=$({__name:"ProfileApp",setup(n){const e=M("profile","profileParameters",{userId:void 0,displayname:void 0,address:void 0,organisation:void 0,role:void 0,headline:void 0,biography:void 0,actions:[],isUserAvatarVisible:!1,pronouns:void 0}),a=P(M("profile","status",{})),g=P([]),b=q(()=>[...g.value].sort((m,v)=>v.order-m.order));E(()=>{g.value=window.OCA.Profile.ProfileSections.getSections()});const u=F()?.uid===e.userId,c=e.actions[0],N=e.actions.slice(1),V=X("/settings/user"),B=u?y("profile","You have not added any info yet"):y("profile","{user} has not added any info yet",{user:e.displayname||e.userId||""});H(()=>{document.title=`${e.displayname||e.userId} - ${document.title}`,T("user_status:status.updated",I)}),L(()=>{Z("user_status:status.updated",I)});function I(m){u&&m.userId===e.userId&&(a.value=m)}function S(){if(!u)return;const m=document.querySelector(".user-status-menu-item");m?m.click():W(y("profile","Error opening the user status modal, try hard refreshing the page"))}return(m,v)=>(s(),p(i(Q),{"app-name":"profile"},{default:d(()=>[h(i(J),null,{default:d(()=>[t("div",be,[t("div",Ae,[v[0]||(v[0]=t("div",{class:"profile__header__container__placeholder"},null,-1)),t("div",we,[t("h2",null,l(i(e).displayname||i(e).userId),1),i(e).pronouns?(s(),r("span",Ce,"·")):o("",!0),i(e).pronouns?(s(),r("span",Ie,l(i(e).pronouns),1)):o("",!0),u?(s(),p(i(w),{key:2,variant:"primary",href:i(V)},{icon:d(()=>[h(ie,{size:20})]),default:d(()=>[f(" "+l(i(y)("profile","Edit Profile")),1)]),_:1},8,["href"])):o("",!0)]),a.value.icon||a.value.message?(s(),p(i(w),{key:0,disabled:!u,variant:u?"tertiary":"tertiary-no-background",onClick:S},{default:d(()=>[f(l(a.value.icon)+" "+l(a.value.message),1)]),_:1},8,["disabled","variant"])):o("",!0)])]),t("div",Se,[t("div",Pe,[t("div",ze,[h(i(R),{class:x(["avatar",{interactive:u}]),user:i(e).userId,size:180,"disable-menu":!0,"disable-tooltip":!0,"is-no-user":!i(e).isUserAvatarVisible,onClick:U(S,["prevent","stop"])},null,8,["class","user","is-no-user"]),t("div",Me,[i(c)?(s(),p(i(w),{key:0,variant:"primary",class:"user-actions__primary",href:i(c).target,icon:i(c).icon,target:i(c).id==="phone"?"_self":"_blank"},{icon:d(()=>[t("img",{src:i(c).icon,alt:"",class:"user-actions__primary__icon"},null,8,$e)]),default:d(()=>[f(" "+l(i(c).title),1)]),_:1},8,["href","icon","target"])):o("",!0),h(i(G),{class:"user-actions__other",inline:4},{default:d(()=>[(s(!0),r(A,null,z(i(N),_=>(s(),p(i(j),{key:_.id,"close-after-click":!0,href:_.target,target:_.id==="phone"?"_self":"_blank"},{icon:d(()=>[t("img",{src:_.icon,alt:"",class:"user-actions__other__icon"},null,8,xe)]),default:d(()=>[f(" "+l(_.title),1)]),_:2},1032,["href","target"]))),128))]),_:1})])]),t("div",Ne,[i(e).organisation||i(e).role||i(e).address?(s(),r("div",Ve,[i(e).organisation||i(e).role?(s(),r("div",Be,[t("p",null,[f(l(i(e).organisation)+" ",1),i(e).organisation&&i(e).role?(s(),r("span",Oe,"•")):o("",!0),f(" "+l(i(e).role),1)])])):o("",!0),i(e).address?(s(),r("div",qe,[t("p",null,[h(fe,{class:"map-icon",size:16}),f(" "+l(i(e).address),1)])])):o("",!0)])):o("",!0),i(e).headline||i(e).biography||g.value.length>0?(s(),r(A,{key:1},[i(e).headline?(s(),r("h3",Ee,l(i(e).headline),1)):o("",!0),i(e).biography?(s(),p(i(K),{key:1,text:i(e).biography,"use-extended-markdown":""},null,8,["text"])):o("",!0),(s(!0),r(A,null,z(b.value,_=>(s(),p(ke,{key:_.id,section:_,"user-id":i(e).userId},null,8,["section","user-id"]))),128))],64)):(s(),p(i(ee),{key:2,class:"profile__blocks-empty-info",name:i(B),description:i(y)("profile","The headline and about sections will show up here")},{icon:d(()=>[h(ne,{size:60})]),_:1},8,["name","description"]))])])])]),_:1})]),_:1}))}}),Le=k(He,[["__scopeId","data-v-2c3b21d6"]]),Ue=D().setApp("profile").detectLogLevel().build();class Ye{#e;constructor(){this.#e=new Map}registerSection(e){this.#e.has(e.id)&&Ue.warn(`Profile section with id '${e.id}' is already registered.`),this.#e.set(e.id,e)}getSections(){return[...this.#e.values()]}}window.OCA.Profile??={},window.OCA.Profile.ProfileSections=new Ye;const Fe=Y(Le);Fe.mount("#content");
//# sourceMappingURL=profile-main.mjs.map
