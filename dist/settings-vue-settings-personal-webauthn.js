(()=>{var e,r,n,i={2523:t=>{t.exports=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},2874:t=>{t.exports={}},3209:(t,e,r)=>{var n=r(91596),i=r(53320),a=r(36306),o="__lodash_placeholder__",s=Math.min;t.exports=function(t,e){var r=t[1],c=e[1],u=r|c,l=u<131,p=128==c&&8==r||128==c&&256==r&&t[7].length<=e[8]||384==c&&e[7].length<=e[8]&&8==r;if(!l&&!p)return t;1&c&&(t[2]=e[2],u|=1&r?0:4);var d=e[3];if(d){var f=t[3];t[3]=f?n(f,d,e[4]):d,t[4]=f?a(t[3],o):e[4]}return(d=e[5])&&(f=t[5],t[5]=f?i(f,d,e[6]):d,t[6]=f?a(t[5],o):e[6]),(d=e[7])&&(t[7]=d),128&c&&(t[8]=null==t[8]?e[8]:s(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=u,t}},5128:(t,e,r)=>{var n=r(80909),i=r(64894);t.exports=function(t,e){var r=-1,a=i(t)?Array(t.length):[];return n(t,function(t,n,i){a[++r]=e(t,n,i)}),a}},9999:(t,e,r)=>{var n=r(37217),i=r(83729),a=r(16547),o=r(74733),s=r(43838),c=r(93290),u=r(23007),l=r(92271),p=r(48948),d=r(50002),f=r(83349),h=r(5861),v=r(76189),g=r(99580),y=r(35529),A=r(56449),m=r(3656),b=r(87730),w=r(23805),x=r(38440),_=r(95950),R=r(37241),E="[object Arguments]",I="[object Function]",C="[object Object]",W={};W[E]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object DataView]"]=W["[object Boolean]"]=W["[object Date]"]=W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Map]"]=W["[object Number]"]=W[C]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object Symbol]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Error]"]=W[I]=W["[object WeakMap]"]=!1,t.exports=function t(e,r,O,S,N,j){var D,T=1&r,k=2&r,P=4&r;if(O&&(D=N?O(e,S,N,j):O(e)),void 0!==D)return D;if(!w(e))return e;var B=A(e);if(B){if(D=v(e),!T)return u(e,D)}else{var M=h(e),F=M==I||"[object GeneratorFunction]"==M;if(m(e))return c(e,T);if(M==C||M==E||F&&!N){if(D=k||F?{}:y(e),!T)return k?p(e,s(D,e)):l(e,o(D,e))}else{if(!W[M])return N?e:{};D=g(e,M,T)}}j||(j=new n);var L=j.get(e);if(L)return L;j.set(e,D),x(e)?e.forEach(function(n){D.add(t(n,r,O,n,e,j))}):b(e)&&e.forEach(function(n,i){D.set(i,t(n,r,O,i,e,j))});var U=B?void 0:(P?k?f:d:k?R:_)(e);return i(U||e,function(n,i){U&&(n=e[i=n]),a(D,i,t(n,r,O,i,e,j))}),D}},10776:(t,e,r)=>{var n=r(30756),i=r(95950);t.exports=function(t){for(var e=i(t),r=e.length;r--;){var a=e[r],o=t[a];e[r]=[a,o,n(o)]}return e}},10854:(t,e,r)=>{var n=r(79920)("sortBy",r(33031));n.placeholder=r(2874),t.exports=n},11287:t=>{t.exports=function(t){return t.placeholder}},11842:(t,e,r)=>{var n=r(82819),i=r(9325);t.exports=function(t,e,r){var a=1&e,o=n(t);return function e(){return(this&&this!==i&&this instanceof e?o:t).apply(a?r:this,arguments)}}},13222:(t,e,r)=>{var n=r(77556);t.exports=function(t){return null==t?"":n(t)}},15325:(t,e,r)=>{var n=r(96131);t.exports=function(t,e){return!(null==t||!t.length)&&n(t,e,0)>-1}},15340:()=>{},15389:(t,e,r)=>{var n=r(48901),i=r(87978),a=r(83488),o=r(56449),s=r(50583);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):n(t):s(t)}},16038:(t,e,r)=>{var n=r(5861),i=r(40346);t.exports=function(t){return i(t)&&"[object Set]"==n(t)}},16962:(t,e)=>{e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,r=e.aliasToReal,n={};for(var i in r){var a=r[i];t.call(n,a)?n[a].push(i):n[a]=[i]}return n}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},17255:(t,e,r)=>{var n=r(47422);t.exports=function(t){return function(e){return n(e,t)}}},17400:(t,e,r)=>{var n=r(99374),i=1/0;t.exports=function(t){return t?(t=n(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},18073:(t,e,r)=>{var n=r(85087),i=r(54641),a=r(70981);t.exports=function(t,e,r,o,s,c,u,l,p,d){var f=8&e;e|=f?32:64,4&(e&=~(f?64:32))||(e&=-4);var h=[t,e,s,f?c:void 0,f?u:void 0,f?void 0:c,f?void 0:u,l,p,d],v=r.apply(void 0,h);return n(t)&&i(v,h),v.placeholder=o,a(v,t,e)}},23546:(t,e,r)=>{var n=r(72552),i=r(40346),a=r(11331);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!a(t)}},24168:(t,e,r)=>{var n=r(91033),i=r(82819),a=r(9325);t.exports=function(t,e,r,o){var s=1&e,c=i(t);return function e(){for(var i=-1,u=arguments.length,l=-1,p=o.length,d=Array(p+u),f=this&&this!==a&&this instanceof e?c:t;++l<p;)d[l]=o[l];for(;u--;)d[l++]=arguments[++i];return n(f,s?r:this,d)}}},28077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},28586:(t,e,r)=>{var n=r(56449),i=r(44394),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},29172:(t,e,r)=>{var n=r(5861),i=r(40346);t.exports=function(t){return i(t)&&"[object Map]"==n(t)}},30641:(t,e,r)=>{var n=r(86649),i=r(95950);t.exports=function(t,e){return t&&n(t,e,i)}},30756:(t,e,r)=>{var n=r(23805);t.exports=function(t){return t==t&&!n(t)}},30980:(t,e,r)=>{var n=r(39344),i=r(94033);function a(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}a.prototype=n(i.prototype),a.prototype.constructor=a,t.exports=a},31769:(t,e,r)=>{var n=r(56449),i=r(28586),a=r(61802),o=r(13222);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:a(o(t))}},31800:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},32629:(t,e,r)=>{var n=r(9999);t.exports=function(t){return n(t,4)}},33031:(t,e,r)=>{var n=r(83120),i=r(46155),a=r(69302),o=r(36800),s=a(function(t,e){if(null==t)return[];var r=e.length;return r>1&&o(t,e[0],e[1])?e=[]:r>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),i(t,n(e,1),[])});t.exports=s},33855:(t,e,r)=>{var n=r(9999),i=r(15389);t.exports=function(t){return i("function"==typeof t?t:n(t,1))}},34932:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},35970:(t,e,r)=>{var n=r(83120);t.exports=function(t){return null!=t&&t.length?n(t,1):[]}},36306:t=>{var e="__lodash_placeholder__";t.exports=function(t,r){for(var n=-1,i=t.length,a=0,o=[];++n<i;){var s=t[n];s!==r&&s!==e||(t[n]=e,o[a++]=n)}return o}},37381:(t,e,r)=>{var n=r(48152),i=r(63950),a=n?function(t){return n.get(t)}:i;t.exports=a},37471:(t,e,r)=>{var n=r(91596),i=r(53320),a=r(58523),o=r(82819),s=r(18073),c=r(11287),u=r(68294),l=r(36306),p=r(9325);t.exports=function t(e,r,d,f,h,v,g,y,A,m){var b=128&r,w=1&r,x=2&r,_=24&r,R=512&r,E=x?void 0:o(e);return function I(){for(var C=arguments.length,W=Array(C),O=C;O--;)W[O]=arguments[O];if(_)var S=c(I),N=a(W,S);if(f&&(W=n(W,f,h,_)),v&&(W=i(W,v,g,_)),C-=N,_&&C<m){var j=l(W,S);return s(e,r,t,I.placeholder,d,W,j,y,A,m-C)}var D=w?d:this,T=x?D[e]:e;return C=W.length,y?W=u(W,y):R&&C>1&&W.reverse(),b&&A<C&&(W.length=A),this&&this!==p&&this instanceof I&&(T=E||o(T)),T.apply(D,W)}}},38329:(t,e,r)=>{var n=r(64894);t.exports=function(t,e){return function(r,i){if(null==r)return r;if(!n(r))return t(r,i);for(var a=r.length,o=e?a:-1,s=Object(r);(e?o--:++o<a)&&!1!==i(s[o],o,s););return r}}},38440:(t,e,r)=>{var n=r(16038),i=r(27301),a=r(86009),o=a&&a.isSet,s=o?i(o):n;t.exports=s},38791:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(71354),i=r.n(n),a=r(76314),o=r.n(a)()(i());o.push([t.id,"\n.security-webauthn__device-list[data-v-20183f56] {\n\tmargin-block: 12px 18px;\n}\n","",{version:3,sources:["webpack://./apps/settings/src/components/WebAuthn/WebAuthnSection.vue"],names:[],mappings:";AAuHA;CACA,uBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<div id=\"security-webauthn\" class=\"section\">\n\t\t<h2>{{ t('settings', 'Passwordless Authentication') }}</h2>\n\t\t<p class=\"settings-hint hidden-when-empty\">\n\t\t\t{{ t('settings', 'Set up your account for passwordless authentication following the FIDO2 standard.') }}\n\t\t</p>\n\t\t<NcNoteCard v-if=\"devices.length === 0\" type=\"info\">\n\t\t\t{{ t('settings', 'No devices configured.') }}\n\t\t</NcNoteCard>\n\n\t\t<h3 v-else id=\"security-webauthn__active-devices\">\n\t\t\t{{ t('settings', 'The following devices are configured for your account:') }}\n\t\t</h3>\n\t\t<ul aria-labelledby=\"security-webauthn__active-devices\" class=\"security-webauthn__device-list\">\n\t\t\t<WebAuthnDevice\n\t\t\t\tv-for=\"device in sortedDevices\"\n\t\t\t\t:key=\"device.id\"\n\t\t\t\t:name=\"device.name\"\n\t\t\t\t@delete=\"deleteDevice(device.id)\" />\n\t\t</ul>\n\n\t\t<NcNoteCard v-if=\"!supportsWebauthn\" type=\"warning\">\n\t\t\t{{ t('settings', 'Your browser does not support WebAuthn.') }}\n\t\t</NcNoteCard>\n\n\t\t<WebAuthnAddDevice\n\t\t\tv-if=\"supportsWebauthn\"\n\t\t\t:is-https=\"isHttps\"\n\t\t\t:is-localhost=\"isLocalhost\"\n\t\t\t@added=\"deviceAdded\" />\n\t</div>\n</template>\n\n<script>\n/* eslint vue/multi-word-component-names: \"warn\" */\n\nimport { confirmPassword } from '@nextcloud/password-confirmation'\nimport { browserSupportsWebAuthn } from '@simplewebauthn/browser'\nimport sortBy from 'lodash/fp/sortBy.js'\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard'\nimport WebAuthnAddDevice from './WebAuthnAddDevice.vue'\nimport WebAuthnDevice from './WebAuthnDevice.vue'\nimport logger from '../../logger.ts'\nimport { removeRegistration } from '../../service/WebAuthnRegistrationSerice.js'\n\nconst sortByName = sortBy('name')\n\nexport default {\n\tname: 'WebAuthnSection',\n\n\tcomponents: {\n\t\tWebAuthnAddDevice,\n\t\tWebAuthnDevice,\n\t\tNcNoteCard,\n\t},\n\n\tprops: {\n\t\tinitialDevices: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\n\t\tisHttps: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tisLocalhost: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tsetup() {\n\t\t// Non reactive properties\n\t\treturn {\n\t\t\tsupportsWebauthn: browserSupportsWebAuthn(),\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tdevices: this.initialDevices,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsortedDevices() {\n\t\t\treturn sortByName(this.devices)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tdeviceAdded(device) {\n\t\t\tlogger.debug(`adding new device to the list ${device.id}`)\n\n\t\t\tthis.devices.push(device)\n\t\t},\n\n\t\tasync deleteDevice(id) {\n\t\t\tlogger.info(`deleting webauthn device ${id}`)\n\n\t\t\tawait confirmPassword()\n\t\t\tawait removeRegistration(id)\n\n\t\t\tthis.devices = this.devices.filter((d) => d.id !== id)\n\n\t\t\tlogger.info(`webauthn device ${id} removed successfully`)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.security-webauthn__device-list {\n\tmargin-block: 12px 18px;\n}\n</style>\n"],sourceRoot:""}]);const s=o},38816:(t,e,r)=>{var n=r(35970),i=r(56757),a=r(32865);t.exports=function(t){return a(i(t,void 0,n),t+"")}},41799:(t,e,r)=>{var n=r(37217),i=r(60270);t.exports=function(t,e,r,a){var o=r.length,s=o,c=!a;if(null==t)return!s;for(t=Object(t);o--;){var u=r[o];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var l=(u=r[o])[0],p=t[l],d=u[1];if(c&&u[2]){if(void 0===p&&!(l in t))return!1}else{var f=new n;if(a)var h=a(p,d,l,t,e,f);if(!(void 0===h?i(d,p,3,a,f):h))return!1}}return!0}},42072:(t,e,r)=>{var n=r(34932),i=r(23007),a=r(56449),o=r(44394),s=r(61802),c=r(77797),u=r(13222);t.exports=function(t){return a(t)?n(t,c):o(t)?[t]:i(s(u(t)))}},43714:(t,e,r)=>{var n=r(53730);t.exports=function(t,e,r){for(var i=-1,a=t.criteria,o=e.criteria,s=a.length,c=r.length;++i<s;){var u=n(a[i],o[i]);if(u)return i>=c?u:u*("desc"==r[i]?-1:1)}return t.index-e.index}},43838:(t,e,r)=>{var n=r(21791),i=r(37241);t.exports=function(t,e){return t&&n(e,i(e),t)}},44394:(t,e,r)=>{var n=r(72552),i=r(40346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},45891:(t,e,r)=>{var n=r(51873),i=r(72428),a=r(56449),o=n?n.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(o&&t&&t[o])}},46155:(t,e,r)=>{var n=r(34932),i=r(47422),a=r(15389),o=r(5128),s=r(73937),c=r(27301),u=r(43714),l=r(83488),p=r(56449);t.exports=function(t,e,r){e=e.length?n(e,function(t){return p(t)?function(e){return i(e,1===t.length?t[0]:t)}:t}):[l];var d=-1;e=n(e,c(a));var f=o(t,function(t,r,i){return{criteria:n(e,function(e){return e(t)}),index:++d,value:t}});return s(f,function(t,e){return u(t,e,r)})}},47237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},47422:(t,e,r)=>{var n=r(31769),i=r(77797);t.exports=function(t,e){for(var r=0,a=(e=n(e,t)).length;null!=t&&r<a;)t=t[i(e[r++])];return r&&r==a?t:void 0}},47790:()=>{},47886:(t,e,r)=>{var n=r(5861),i=r(40346);t.exports=function(t){return i(t)&&"[object WeakMap]"==n(t)}},47934:(t,e,r)=>{t.exports={ary:r(64626),assign:r(74733),clone:r(32629),curry:r(49747),forEach:r(83729),isArray:r(56449),isError:r(23546),isFunction:r(1882),isWeakMap:r(47886),iteratee:r(33855),keys:r(88984),rearg:r(84195),toInteger:r(61489),toPath:r(42072)}},48152:(t,e,r)=>{var n=r(28303),i=n&&new n;t.exports=i},48901:(t,e,r)=>{var n=r(41799),i=r(10776),a=r(67197);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},48948:(t,e,r)=>{var n=r(21791),i=r(86375);t.exports=function(t,e){return n(t,i(t),e)}},49326:(t,e,r)=>{var n=r(31769),i=r(72428),a=r(56449),o=r(30361),s=r(30294),c=r(77797);t.exports=function(t,e,r){for(var u=-1,l=(e=n(e,t)).length,p=!1;++u<l;){var d=c(e[u]);if(!(p=null!=t&&r(t,d)))break;t=t[d]}return p||++u!=l?p:!!(l=null==t?0:t.length)&&s(l)&&o(d,l)&&(a(t)||i(t))}},49747:(t,e,r)=>{var n=r(66977);function i(t,e,r){var a=n(t,8,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return a.placeholder=i.placeholder,a}i.placeholder={},t.exports=i},50104:(t,e,r)=>{var n=r(53661);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},50583:(t,e,r)=>{var n=r(47237),i=r(17255),a=r(28586),o=r(77797);t.exports=function(t){return a(t)?n(o(t)):i(t)}},51069:()=>{},53320:t=>{var e=Math.max;t.exports=function(t,r,n,i){for(var a=-1,o=t.length,s=-1,c=n.length,u=-1,l=r.length,p=e(o-c,0),d=Array(p+l),f=!i;++a<p;)d[a]=t[a];for(var h=a;++u<l;)d[h+u]=r[u];for(;++s<c;)(f||a<o)&&(d[h+n[s]]=t[a++]);return d}},53730:(t,e,r)=>{var n=r(44394);t.exports=function(t,e){if(t!==e){var r=void 0!==t,i=null===t,a=t==t,o=n(t),s=void 0!==e,c=null===e,u=e==e,l=n(e);if(!c&&!l&&!o&&t>e||o&&s&&u&&!c&&!l||i&&s&&u||!r&&u||!a)return 1;if(!i&&!o&&!l&&t<e||l&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!u)return-1}return 0}},53758:(t,e,r)=>{var n=r(30980),i=r(56017),a=r(94033),o=r(56449),s=r(40346),c=r(80257),u=Object.prototype.hasOwnProperty;function l(t){if(s(t)&&!o(t)&&!(t instanceof n)){if(t instanceof i)return t;if(u.call(t,"__wrapped__"))return c(t)}return new i(t)}l.prototype=a.prototype,l.prototype.constructor=l,t.exports=l},54128:(t,e,r)=>{var n=r(31800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(i,""):t}},54641:(t,e,r)=>{var n=r(68882),i=r(51811)(n);t.exports=i},56017:(t,e,r)=>{var n=r(39344),i=r(94033);function a(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}a.prototype=n(i.prototype),a.prototype.constructor=a,t.exports=a},58156:(t,e,r)=>{var n=r(47422);t.exports=function(t,e,r){var i=null==t?void 0:n(t,e);return void 0===i?r:i}},58523:t=>{t.exports=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}},61489:(t,e,r)=>{var n=r(17400);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},61802:(t,e,r)=>{var n=r(62224),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,r,n,i){e.push(n?i.replace(a,"$1"):r||t)}),e});t.exports=o},62060:t=>{var e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(t,r){var n=r.length;if(!n)return t;var i=n-1;return r[i]=(n>1?"& ":"")+r[i],r=r.join(n>2?", ":" "),t.replace(e,"{\n/* [wrapped with "+r+"] */\n")}},62224:(t,e,r)=>{var n=r(50104);t.exports=function(t){var e=n(t,function(t){return 500===r.size&&r.clear(),t}),r=e.cache;return e}},62284:(t,e,r)=>{var n=r(84629),i=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",r=n[e],a=i.call(n,e)?r.length:0;a--;){var o=r[a],s=o.func;if(null==s||s==t)return o.name}return e}},63779:()=>{},63950:t=>{t.exports=function(){}},64626:(t,e,r)=>{var n=r(66977);t.exports=function(t,e,r){return e=r?void 0:e,e=t&&null==e?t.length:e,n(t,128,void 0,void 0,void 0,void 0,e)}},64688:()=>{},66089:()=>{},66977:(t,e,r)=>{var n=r(68882),i=r(11842),a=r(77078),o=r(37471),s=r(24168),c=r(37381),u=r(3209),l=r(54641),p=r(70981),d=r(61489),f=Math.max;t.exports=function(t,e,r,h,v,g,y,A){var m=2&e;if(!m&&"function"!=typeof t)throw new TypeError("Expected a function");var b=h?h.length:0;if(b||(e&=-97,h=v=void 0),y=void 0===y?y:f(d(y),0),A=void 0===A?A:d(A),b-=v?v.length:0,64&e){var w=h,x=v;h=v=void 0}var _=m?void 0:c(t),R=[t,e,r,h,v,w,x,g,y,A];if(_&&u(R,_),t=R[0],e=R[1],r=R[2],h=R[3],v=R[4],!(A=R[9]=void 0===R[9]?m?0:t.length:f(R[9]-b,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||16==e?a(t,e,A):32!=e&&33!=e||v.length?o.apply(void 0,R):s(t,e,r,h);else var E=i(t,e,r);return p((_?n:l)(E,R),t,e)}},67197:t=>{t.exports=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}},68294:(t,e,r)=>{var n=r(23007),i=r(30361),a=Math.min;t.exports=function(t,e){for(var r=t.length,o=a(e.length,r),s=n(t);o--;){var c=e[o];t[o]=i(c,r)?s[c]:void 0}return t}},68882:(t,e,r)=>{var n=r(83488),i=r(48152),a=i?function(t,e){return i.set(t,e),t}:n;t.exports=a},70981:(t,e,r)=>{var n=r(75251),i=r(62060),a=r(32865),o=r(75948);t.exports=function(t,e,r){var s=e+"";return a(t,i(s,o(n(s),r)))}},73201:t=>{var e=/\w*$/;t.exports=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}},73424:(t,e,r)=>{var n=r(16962),i=r(2874),a=Array.prototype.push;function o(t,e){return 2==e?function(e,r){return t(e,r)}:function(e){return t(e)}}function s(t){for(var e=t?t.length:0,r=Array(e);e--;)r[e]=t[e];return r}function c(t,e){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var i=n[0]=e.apply(void 0,n);return t.apply(void 0,n),i}}}t.exports=function t(e,r,u,l){var p="function"==typeof r,d=r===Object(r);if(d&&(l=u,u=r,r=void 0),null==u)throw new TypeError;l||(l={});var f=!("cap"in l)||l.cap,h=!("curry"in l)||l.curry,v=!("fixed"in l)||l.fixed,g=!("immutable"in l)||l.immutable,y=!("rearg"in l)||l.rearg,A=p?u:i,m="curry"in l&&l.curry,b="fixed"in l&&l.fixed,w="rearg"in l&&l.rearg,x=p?u.runInContext():void 0,_=p?u:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},R=_.ary,E=_.assign,I=_.clone,C=_.curry,W=_.forEach,O=_.isArray,S=_.isError,N=_.isFunction,j=_.isWeakMap,D=_.keys,T=_.rearg,k=_.toInteger,P=_.toPath,B=D(n.aryMethod),M={castArray:function(t){return function(){var e=arguments[0];return O(e)?t(s(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[1],r=t(arguments[0],e),n=r.length;return f&&"number"==typeof e?(e=e>2?e-2:1,n&&n<=e?r:o(r,e)):r}},mixin:function(t){return function(e){var r=this;if(!N(r))return t(r,Object(e));var n=[];return W(D(e),function(t){N(e[t])&&n.push([t,r.prototype[t]])}),t(r,Object(e)),W(n,function(t){var e=t[1];N(e)?r.prototype[t[0]]=e:delete r.prototype[t[0]]}),r}},nthArg:function(t){return function(e){var r=e<0?1:k(e)+1;return C(t(e),r)}},rearg:function(t){return function(e,r){var n=r?r.length:0;return C(t(e,r),n)}},runInContext:function(r){return function(n){return t(e,r(n),l)}}};function F(t,e,r){if(v&&(b||!n.skipFixed[t])){var i=n.methodSpread[t],o=i&&i.start;return void 0===o?R(e,r):function(t,e){return function(){for(var r=arguments.length,n=r-1,i=Array(r);r--;)i[r]=arguments[r];var o=i[e],s=i.slice(0,e);return o&&a.apply(s,o),e!=n&&a.apply(s,i.slice(e+1)),t.apply(this,s)}}(e,o)}return e}function L(t,e,r){return y&&r>1&&(w||!n.skipRearg[t])?T(e,n.methodRearg[t]||n.aryRearg[r]):e}function U(t,e){for(var r=-1,n=(e=P(e)).length,i=n-1,a=I(Object(t)),o=a;null!=o&&++r<n;){var s=e[r],c=o[s];null==c||N(c)||S(c)||j(c)||(o[s]=I(r==i?c:Object(c))),o=o[s]}return a}function q(e,r){var i=n.aliasToReal[e]||e,a=n.remap[i]||i,o=l;return function(e){var n=p?x:_,s=p?x[a]:r,c=E(E({},o),e);return t(n,i,s,c)}}function K(t,e){return function(){var r=arguments.length;if(!r)return t();for(var n=Array(r);r--;)n[r]=arguments[r];var i=y?0:r-1;return n[i]=e(n[i]),t.apply(void 0,n)}}function $(t,e,r){var i,a=n.aliasToReal[t]||t,u=e,l=M[a];return l?u=l(e):g&&(n.mutate.array[a]?u=c(e,s):n.mutate.object[a]?u=c(e,function(t){return function(e){return t({},e)}}(e)):n.mutate.set[a]&&(u=c(e,U))),W(B,function(t){return W(n.aryMethod[t],function(e){if(a==e){var r=n.methodSpread[a],s=r&&r.afterRearg;return i=s?F(a,L(a,u,t),t):L(a,F(a,u,t),t),i=function(t,e,r){return m||h&&r>1?C(e,r):e}(0,i=function(t,e){if(f){var r=n.iterateeRearg[t];if(r)return function(t,e){return K(t,function(t){var r=e.length;return function(t,e){return 2==e?function(e,r){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(T(o(t,r),e),r)})}(e,r);var i=!p&&n.iterateeAry[t];if(i)return function(t,e){return K(t,function(t){return"function"==typeof t?o(t,e):t})}(e,i)}return e}(a,i),t),!1}}),!i}),i||(i=u),i==e&&(i=m?C(i,1):function(){return e.apply(this,arguments)}),i.convert=q(a,e),i.placeholder=e.placeholder=r,i}if(!d)return $(r,u,A);var z=u,G=[];return W(B,function(t){W(n.aryMethod[t],function(t){var e=z[n.remap[t]||t];e&&G.push([t,$(t,e,z)])})}),W(D(z),function(t){var e=z[t];if("function"==typeof e){for(var r=G.length;r--;)if(G[r][0]==t)return;e.convert=q(t,e),G.push([t,e])}}),W(G,function(t){z[t[0]]=t[1]}),z.convert=function(t){return z.runInContext.convert(t)(void 0)},z.placeholder=z,W(D(z),function(t){W(n.realToAlias[t]||[],function(e){z[e]=z[t]})}),z}},73776:()=>{},73937:t=>{t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}},74733:(t,e,r)=>{var n=r(21791),i=r(95950);t.exports=function(t,e){return t&&n(e,i(e),t)}},75251:t=>{var e=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=function(t){var n=t.match(e);return n?n[1].split(r):[]}},75948:(t,e,r)=>{var n=r(83729),i=r(15325),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(t,e){return n(a,function(r){var n="_."+r[0];e&r[1]&&!i(t,n)&&t.push(n)}),t.sort()}},75998:(e,r,n)=>{"use strict";var i=n(21777),a=n(81222),o=n(85471),s=n(12555);function c(t){const e=new Uint8Array(t);let r="";for(const t of e)r+=String.fromCharCode(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function u(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n=e.padEnd(e.length+r,"="),i=atob(n),a=new ArrayBuffer(i.length),o=new Uint8Array(a);for(let t=0;t<i.length;t++)o[t]=i.charCodeAt(t);return a}function l(){return p.stubThis(void 0!==globalThis?.PublicKeyCredential&&"function"==typeof globalThis.PublicKeyCredential)}const p={stubThis:t=>t};function d(t){const{id:e}=t;return{...t,id:u(e),transports:t.transports}}class f extends Error{constructor({message:t,code:e,cause:r,name:n}){super(t,{cause:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n??r.name,this.code=e}}const h=new class{constructor(){Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},v=["cross-platform","platform"];function g(t){if(t&&!(v.indexOf(t)<0))return t}function y(t,e){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${t}. You should report this error to them.\n`,e)}var A=n(10854),m=n.n(A),b=n(31133),w=n(85168),x=n(74095),_=n(82182);const R=(0,n(35947).YK)().setApp("settings").detectUser().build();var E=n(19051),I=n(53334),C=n(63814);function W(t){return e=>(R.debug(t),e)}const O=Object.freeze({READY:1,REGISTRATION:2,NAMING:3,PERSIST:4}),S={name:"WebAuthnAddDevice",components:{NcButton:x.A,NcTextField:_.A},props:{httpWarning:Boolean,isHttps:{type:Boolean,default:!1},isLocalhost:{type:Boolean,default:!1}},setup:()=>({RegistrationSteps:O}),data:()=>({name:"",credential:{},step:O.READY}),watch:{step(){this.step===O.NAMING&&this.$nextTick(()=>this.$refs.nameInput?.focus())}},methods:{async start(){this.step=O.REGISTRATION,R.debug("Starting WebAuthn registration");try{await(0,s.C5)(),this.credential=await async function(){const t=(0,C.Jv)("/settings/api/personal/webauthn/registration");try{R.debug("Fetching webauthn registration data");const{data:e}=await E.Ay.get(t);return R.debug("Start webauthn registration"),await async function(t){!t.optionsJSON&&t.challenge&&(console.warn("startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),t={optionsJSON:t});const{optionsJSON:e,useAutoRegister:r=!1}=t;if(!l())throw new Error("WebAuthn is not supported in this browser");const n={...e,challenge:u(e.challenge),user:{...e.user,id:u(e.user.id)},excludeCredentials:e.excludeCredentials?.map(d)},i={};let a;r&&(i.mediation="conditional"),i.publicKey=n,i.signal=h.createNewAbortSignal();try{a=await navigator.credentials.create(i)}catch(t){throw function({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new f({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===r.authenticatorSelection?.requireResidentKey)return new f({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===e.mediation&&"required"===r.authenticatorSelection?.userVerification)return new f({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===r.authenticatorSelection?.userVerification)return new f({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new f({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new f({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===r.pubKeyCredParams.filter(t=>"public-key"===t.type).length?new f({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new f({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const e=globalThis.location.hostname;if("localhost"!==(n=e)&&!/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n))return new f({message:`${globalThis.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(r.rp.id!==e)return new f({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new f({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new f({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}var n;return t}({error:t,options:i})}if(!a)throw new Error("Registration was not completed");const{id:o,rawId:s,response:p,type:v}=a;let A,m,b,w;if("function"==typeof p.getTransports&&(A=p.getTransports()),"function"==typeof p.getPublicKeyAlgorithm)try{m=p.getPublicKeyAlgorithm()}catch(t){y("getPublicKeyAlgorithm()",t)}if("function"==typeof p.getPublicKey)try{const t=p.getPublicKey();null!==t&&(b=c(t))}catch(t){y("getPublicKey()",t)}if("function"==typeof p.getAuthenticatorData)try{w=c(p.getAuthenticatorData())}catch(t){y("getAuthenticatorData()",t)}return{id:o,rawId:c(s),response:{attestationObject:c(p.attestationObject),clientDataJSON:c(p.clientDataJSON),transports:A,publicKeyAlgorithm:m,publicKey:b,authenticatorData:w},type:v,clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:g(a.authenticatorAttachment)}}({optionsJSON:e})}catch(t){if(R.error(t),(0,E.F0)(t))throw new Error((0,I.Tl)("settings","Could not register device: Network error"));if("InvalidStateError"===t.name)throw new Error((0,I.Tl)("settings","Could not register device: Probably already registered"));throw new Error((0,I.Tl)("settings","Could not register device"))}}(),this.step=O.NAMING}catch(t){(0,w.Qg)(t),this.step=O.READY}},submit(){return this.step=O.PERSIST,(0,s.C5)().then(W("confirmed password")).then(this.saveRegistrationData).then(W("registration data saved")).then(()=>this.reset()).then(W("app reset")).catch(R.error)},async saveRegistrationData(){try{const t=await async function(t,e){const r=(0,C.Jv)("/settings/api/personal/webauthn/registration");return(await E.Ay.post(r,{name:t,data:JSON.stringify(e)})).data}(this.name,this.credential);R.info("new device added",{device:t}),this.$emit("added",t)}catch(e){throw R.error("Error persisting webauthn registration",{error:e}),new Error(t("settings","Server error while trying to complete WebAuthn device registration"))}},reset(){this.name="",this.registrationData={},this.step=O.READY}}};var N=n(85072),j=n.n(N),D=n(97825),T=n.n(D),k=n(77659),P=n.n(k),B=n(55056),M=n.n(B),F=n(10540),L=n.n(F),U=n(41113),q=n.n(U),K=n(84510),$={};$.styleTagTransform=q(),$.setAttributes=M(),$.insert=P().bind(null,"head"),$.domAPI=T(),$.insertStyleElement=L(),j()(K.A,$),K.A&&K.A.locals&&K.A.locals;var z=n(14486);const G=(0,z.A)(S,function(){var t=this,e=t._self._c;return t.isHttps||t.isLocalhost?e("div",[t.step===t.RegistrationSteps.READY?e("NcButton",{attrs:{variant:"primary"},on:{click:t.start}},[t._v("\n\t\t"+t._s(t.t("settings","Add WebAuthn device"))+"\n\t")]):t.step===t.RegistrationSteps.REGISTRATION?e("div",{staticClass:"new-webauthn-device"},[e("span",{staticClass:"icon-loading-small webauthn-loading"}),t._v("\n\t\t"+t._s(t.t("settings","Please authorize your WebAuthn device."))+"\n\t")]):t.step===t.RegistrationSteps.NAMING?e("div",{staticClass:"new-webauthn-device"},[e("span",{staticClass:"icon-loading-small webauthn-loading"}),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("NcTextField",{ref:"nameInput",staticClass:"new-webauthn-device__name",attrs:{label:t.t("settings","Device name"),value:t.name,"show-trailing-button":"","trailing-button-label":t.t("settings","Add"),"trailing-button-icon":"arrowRight"},on:{"update:value":function(e){t.name=e},"trailing-button-click":t.submit}})],1)]):t.step===t.RegistrationSteps.PERSIST?e("div",{staticClass:"new-webauthn-device"},[e("span",{staticClass:"icon-loading-small webauthn-loading"}),t._v("\n\t\t"+t._s(t.t("settings","Adding your device …"))+"\n\t")]):e("div",[t._v("\n\t\tInvalid registration step. This should not have happened.\n\t")])],1):e("div",[t._v("\n\t"+t._s(t.t("settings","Passwordless authentication requires a secure connection."))+"\n")])},[],!1,null,"7b1c603a",null).exports;var H=n(57505),Y=n(24764);const V={name:"WebAuthnDevice",components:{NcActionButton:H.A,NcActions:Y.A},props:{name:{type:String,required:!0}}};var J=n(77474),X={};X.styleTagTransform=q(),X.setAttributes=M(),X.insert=P().bind(null,"head"),X.domAPI=T(),X.insertStyleElement=L(),j()(J.A,X),J.A&&J.A.locals&&J.A.locals;const Q=(0,z.A)(V,function(){var t=this,e=t._self._c;return e("li",{staticClass:"webauthn-device"},[e("span",{staticClass:"icon-webauthn-device"}),t._v("\n\t"+t._s(t.name||t.t("settings","Unnamed device"))+"\n\t"),e("NcActions",{attrs:{"force-menu":!0}},[e("NcActionButton",{attrs:{icon:"icon-delete"},on:{click:function(e){return t.$emit("delete")}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Delete"))+"\n\t\t")])],1)],1)},[],!1,null,"25420b68",null).exports,Z=m()("name"),tt={name:"WebAuthnSection",components:{WebAuthnAddDevice:G,WebAuthnDevice:Q,NcNoteCard:b.A},props:{initialDevices:{type:Array,required:!0},isHttps:{type:Boolean,default:!1},isLocalhost:{type:Boolean,default:!1}},setup:()=>({supportsWebauthn:l()}),data(){return{devices:this.initialDevices}},computed:{sortedDevices(){return Z(this.devices)}},methods:{deviceAdded(t){R.debug(`adding new device to the list ${t.id}`),this.devices.push(t)},async deleteDevice(t){R.info(`deleting webauthn device ${t}`),await(0,s.C5)(),await async function(t){const e=(0,C.Jv)(`/settings/api/personal/webauthn/registration/${t}`);await E.Ay.delete(e)}(t),this.devices=this.devices.filter(e=>e.id!==t),R.info(`webauthn device ${t} removed successfully`)}}};var et=n(38791),rt={};rt.styleTagTransform=q(),rt.setAttributes=M(),rt.insert=P().bind(null,"head"),rt.domAPI=T(),rt.insertStyleElement=L(),j()(et.A,rt),et.A&&et.A.locals&&et.A.locals;const nt=(0,z.A)(tt,function(){var t=this,e=t._self._c;return e("div",{staticClass:"section",attrs:{id:"security-webauthn"}},[e("h2",[t._v(t._s(t.t("settings","Passwordless Authentication")))]),t._v(" "),e("p",{staticClass:"settings-hint hidden-when-empty"},[t._v("\n\t\t"+t._s(t.t("settings","Set up your account for passwordless authentication following the FIDO2 standard."))+"\n\t")]),t._v(" "),0===t.devices.length?e("NcNoteCard",{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(t.t("settings","No devices configured."))+"\n\t")]):e("h3",{attrs:{id:"security-webauthn__active-devices"}},[t._v("\n\t\t"+t._s(t.t("settings","The following devices are configured for your account:"))+"\n\t")]),t._v(" "),e("ul",{staticClass:"security-webauthn__device-list",attrs:{"aria-labelledby":"security-webauthn__active-devices"}},t._l(t.sortedDevices,function(r){return e("WebAuthnDevice",{key:r.id,attrs:{name:r.name},on:{delete:function(e){return t.deleteDevice(r.id)}}})}),1),t._v(" "),t.supportsWebauthn?t._e():e("NcNoteCard",{attrs:{type:"warning"}},[t._v("\n\t\t"+t._s(t.t("settings","Your browser does not support WebAuthn."))+"\n\t")]),t._v(" "),t.supportsWebauthn?e("WebAuthnAddDevice",{attrs:{"is-https":t.isHttps,"is-localhost":t.isLocalhost},on:{added:t.deviceAdded}}):t._e()],1)},[],!1,null,"20183f56",null).exports;n.nc=(0,i.aV)(),o.Ay.prototype.t=t,new(o.Ay.extend(nt))({propsData:{initialDevices:(0,a.C)("settings","webauthn-devices"),isHttps:"https:"===window.location.protocol,isLocalhost:"localhost"===window.location.hostname}}).$mount("#security-webauthn")},76169:(t,e,r)=>{var n=r(49653);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},76189:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},76959:t=>{t.exports=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}},77078:(t,e,r)=>{var n=r(91033),i=r(82819),a=r(37471),o=r(18073),s=r(11287),c=r(36306),u=r(9325);t.exports=function(t,e,r){var l=i(t);return function i(){for(var p=arguments.length,d=Array(p),f=p,h=s(i);f--;)d[f]=arguments[f];var v=p<3&&d[0]!==h&&d[p-1]!==h?[]:c(d,h);return(p-=v.length)<r?o(t,e,a,i.placeholder,void 0,d,v,void 0,void 0,r-p):n(this&&this!==u&&this instanceof i?l:t,this,d)}}},77199:()=>{},77474:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(71354),i=r.n(n),a=r(76314),o=r.n(a)()(i());o.push([t.id,"\n.webauthn-device[data-v-25420b68] {\n\tline-height: 300%;\n\tdisplay: flex;\n}\n.icon-webauthn-device[data-v-25420b68] {\n\tdisplay: inline-block;\n\tbackground-size: 100%;\n\tpadding: 3px;\n\tmargin: 3px;\n}\n","",{version:3,sources:["webpack://./apps/settings/src/components/WebAuthn/WebAuthnDevice.vue"],names:[],mappings:";AAoDA;CACA,iBAAA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;CACA,qBAAA;CACA,YAAA;CACA,WAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<li class=\"webauthn-device\">\n\t\t<span class=\"icon-webauthn-device\" />\n\t\t{{ name || t('settings', 'Unnamed device') }}\n\t\t<NcActions :force-menu=\"true\">\n\t\t\t<NcActionButton icon=\"icon-delete\" @click=\"$emit('delete')\">\n\t\t\t\t{{ t('settings', 'Delete') }}\n\t\t\t</NcActionButton>\n\t\t</NcActions>\n\t</li>\n</template>\n\n<script>\nimport NcActionButton from '@nextcloud/vue/components/NcActionButton'\nimport NcActions from '@nextcloud/vue/components/NcActions'\n\nexport default {\n\tname: 'WebAuthnDevice',\n\n\tcomponents: {\n\t\tNcActionButton,\n\t\tNcActions,\n\t},\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\t.webauthn-device {\n\t\tline-height: 300%;\n\t\tdisplay: flex;\n\t}\n\n\t.icon-webauthn-device {\n\t\tdisplay: inline-block;\n\t\tbackground-size: 100%;\n\t\tpadding: 3px;\n\t\tmargin: 3px;\n\t}\n</style>\n"],sourceRoot:""}]);const s=o},77556:(t,e,r)=>{var n=r(51873),i=r(34932),a=r(56449),o=r(44394),s=n?n.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},77797:(t,e,r)=>{var n=r(44394);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},77965:()=>{},78982:()=>{},79368:()=>{},79838:()=>{},79920:(t,e,r)=>{var n=r(73424),i=r(47934);t.exports=function(t,e,r){return n(i,t,e,r)}},80257:(t,e,r)=>{var n=r(30980),i=r(56017),a=r(23007);t.exports=function(t){if(t instanceof n)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=a(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},80631:(t,e,r)=>{var n=r(28077),i=r(49326);t.exports=function(t,e){return null!=t&&i(t,e,n)}},80909:(t,e,r)=>{var n=r(30641),i=r(38329)(n);t.exports=i},82819:(t,e,r)=>{var n=r(39344),i=r(23805);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=n(t.prototype),a=t.apply(r,e);return i(a)?a:r}}},83120:(t,e,r)=>{var n=r(14528),i=r(45891);t.exports=function t(e,r,a,o,s){var c=-1,u=e.length;for(a||(a=i),s||(s=[]);++c<u;){var l=e[c];r>0&&a(l)?r>1?t(l,r-1,a,o,s):n(s,l):o||(s[s.length]=l)}return s}},83349:(t,e,r)=>{var n=r(82199),i=r(86375),a=r(37241);t.exports=function(t){return n(t,a,i)}},83729:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},84195:(t,e,r)=>{var n=r(66977),i=r(38816)(function(t,e){return n(t,256,void 0,void 0,void 0,e)});t.exports=i},84510:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(71354),i=r.n(n),a=r(76314),o=r.n(a)()(i());o.push([t.id,".webauthn-loading[data-v-7b1c603a]{display:inline-block;vertical-align:sub;margin-inline:2px}.new-webauthn-device[data-v-7b1c603a]{display:flex;gap:22px;align-items:center}.new-webauthn-device__name[data-v-7b1c603a]{max-width:min(100vw,400px)}","",{version:3,sources:["webpack://./apps/settings/src/components/WebAuthn/WebAuthnAddDevice.vue"],names:[],mappings:"AACA,mCACC,oBAAA,CACA,kBAAA,CACA,iBAAA,CAGD,sCACC,YAAA,CACA,QAAA,CACA,kBAAA,CAEA,4CACC,0BAAA",sourcesContent:["\n.webauthn-loading {\n\tdisplay: inline-block;\n\tvertical-align: sub;\n\tmargin-inline: 2px;\n}\n\n.new-webauthn-device {\n\tdisplay: flex;\n\tgap: 22px;\n\talign-items: center;\n\n\t&__name {\n\t\tmax-width: min(100vw, 400px);\n\t}\n}\n"],sourceRoot:""}]);const s=o},84629:t=>{t.exports={}},85087:(t,e,r)=>{var n=r(30980),i=r(37381),a=r(62284),o=r(53758);t.exports=function(t){var e=a(t),r=o[e];if("function"!=typeof r||!(e in n.prototype))return!1;if(t===r)return!0;var s=i(r);return!!s&&t===s[0]}},85463:t=>{t.exports=function(t){return t!=t}},86375:(t,e,r)=>{var n=r(14528),i=r(28879),a=r(4664),o=r(63345),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,a(t)),t=i(t);return e}:o;t.exports=s},87730:(t,e,r)=>{var n=r(29172),i=r(27301),a=r(86009),o=a&&a.isMap,s=o?i(o):n;t.exports=s},87978:(t,e,r)=>{var n=r(60270),i=r(58156),a=r(80631),o=r(28586),s=r(30756),c=r(67197),u=r(77797);t.exports=function(t,e){return o(t)&&s(e)?c(u(t),e):function(r){var o=i(r,t);return void 0===o&&o===e?a(r,t):n(e,o,3)}}},91596:t=>{var e=Math.max;t.exports=function(t,r,n,i){for(var a=-1,o=t.length,s=n.length,c=-1,u=r.length,l=e(o-s,0),p=Array(u+l),d=!i;++c<u;)p[c]=r[c];for(;++a<s;)(d||a<o)&&(p[n[a]]=t[a]);for(;l--;)p[c++]=t[a++];return p}},92271:(t,e,r)=>{var n=r(21791),i=r(4664);t.exports=function(t,e){return n(t,i(t),e)}},93736:(t,e,r)=>{var n=r(51873),i=n?n.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},94033:t=>{t.exports=function(){}},96131:(t,e,r)=>{var n=r(2523),i=r(85463),a=r(76959);t.exports=function(t,e,r){return e==e?a(t,e,r):n(t,i,r)}},99374:(t,e,r)=>{var n=r(54128),i=r(23805),a=r(44394),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=s.test(t);return r||c.test(t)?u(t.slice(2),r?2:8):o.test(t)?NaN:+t}},99580:(t,e,r)=>{var n=r(49653),i=r(76169),a=r(73201),o=r(93736),s=r(71961);t.exports=function(t,e,r){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return i(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,r);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return a(t);case"[object Symbol]":return o(t)}}}},a={};function o(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,loaded:!1,exports:{}};return i[t].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=i,e=[],o.O=(t,r,n,i)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){r=e[l][0],n=e[l][1],i=e[l][2];for(var s=!0,c=0;c<r.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every(t=>o.O[t](r[c]))?r.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,n,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,r)=>(o.f[r](t,e),e),[])),o.u=t=>t+"-"+t+".js?v="+{594:"42559babdb08cd8462d3",620:"9afba54f1bb9c5700ce0",2391:"583add71333f4a7828d7",2880:"e173b56d1e35791ae43e",4325:"30435ed4beeb166281cd",5862:"89bf17a66ae45dcd0971",7145:"8a0ec35632f81f53660b",8339:"fa979d926218e7f6f617"}[t],o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r={},n="nextcloud-ui-legacy:",o.l=(t,e,i,a)=>{if(r[t])r[t].push(e);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var p=u[l];if(p.getAttribute("src")==t||p.getAttribute("data-webpack")==n+i){s=p;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",n+i),s.src=t),r[t]=[e];var d=(e,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=r[t];if(delete r[t],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(t=>t(n)),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),o.j=9255,(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{o.b=document&&document.baseURI||self.location.href;var t={9255:0};o.f.j=(e,r)=>{var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((r,i)=>n=t[e]=[r,i]);r.push(n[2]=i);var a=o.p+o.u(e),s=new Error;o.l(a,r=>{if(o.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}},"chunk-"+e,e)}},o.O.j=e=>0===t[e];var e=(e,r)=>{var n,i,a=r[0],s=r[1],c=r[2],u=0;if(a.some(e=>0!==t[e])){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(c)var l=c(o)}for(e&&e(r);u<a.length;u++)i=a[u],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(l)},r=self.webpackChunknextcloud_ui_legacy=self.webpackChunknextcloud_ui_legacy||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),o.nc=void 0;var s=o.O(void 0,[4208],()=>o(75998));s=o.O(s)})();
//# sourceMappingURL=settings-vue-settings-personal-webauthn.js.map?v=840b3bcf443f0c306a88