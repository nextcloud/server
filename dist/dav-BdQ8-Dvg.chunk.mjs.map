{"version":3,"file":"dav-BdQ8-Dvg.chunk.mjs","sources":["../node_modules/@nextcloud/sharing/dist/public.js","../node_modules/cancelable-promise/esm/CancelablePromise.mjs","../node_modules/@nextcloud/files/dist/dav.mjs"],"sourcesContent":["/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n/**\n * @module public\n */\nimport { loadState } from '@nextcloud/initial-state';\n/**\n * Check if the current page is on a public share\n */\nexport function isPublicShare() {\n    // check both the new initial state version and fallback to legacy input\n    return (loadState('files_sharing', 'isPublic', null)\n        ?? document.querySelector('input#isPublic[type=\"hidden\"][name=\"isPublic\"][value=\"1\"]') !== null);\n}\n/**\n * Get the sharing token for the current public share\n */\nexport function getSharingToken() {\n    return (loadState('files_sharing', 'sharingToken', null)\n        ?? document.querySelector('input#sharingToken[type=\"hidden\"]')?.value\n        ?? null);\n}\n","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\n\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\n\nvar toStringTag = typeof Symbol !== 'undefined' ? Symbol.toStringTag : '@@toStringTag';\n\nvar _internals = /*#__PURE__*/new WeakMap();\n\nvar _promise = /*#__PURE__*/new WeakMap();\n\nclass CancelablePromiseInternal {\n  constructor(_ref) {\n    var {\n      executor = () => {},\n      internals = defaultInternals(),\n      promise = new Promise((resolve, reject) => executor(resolve, reject, onCancel => {\n        internals.onCancelList.push(onCancel);\n      }))\n    } = _ref;\n\n    _classPrivateFieldInitSpec(this, _internals, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _promise, {\n      writable: true,\n      value: void 0\n    });\n\n    _defineProperty(this, toStringTag, 'CancelablePromise');\n\n    this.cancel = this.cancel.bind(this);\n\n    _classPrivateFieldSet(this, _internals, internals);\n\n    _classPrivateFieldSet(this, _promise, promise || new Promise((resolve, reject) => executor(resolve, reject, onCancel => {\n      internals.onCancelList.push(onCancel);\n    })));\n  }\n\n  then(onfulfilled, onrejected) {\n    return makeCancelable(_classPrivateFieldGet(this, _promise).then(createCallback(onfulfilled, _classPrivateFieldGet(this, _internals)), createCallback(onrejected, _classPrivateFieldGet(this, _internals))), _classPrivateFieldGet(this, _internals));\n  }\n\n  catch(onrejected) {\n    return makeCancelable(_classPrivateFieldGet(this, _promise).catch(createCallback(onrejected, _classPrivateFieldGet(this, _internals))), _classPrivateFieldGet(this, _internals));\n  }\n\n  finally(onfinally, runWhenCanceled) {\n    if (runWhenCanceled) {\n      _classPrivateFieldGet(this, _internals).onCancelList.push(onfinally);\n    }\n\n    return makeCancelable(_classPrivateFieldGet(this, _promise).finally(createCallback(() => {\n      if (onfinally) {\n        if (runWhenCanceled) {\n          _classPrivateFieldGet(this, _internals).onCancelList = _classPrivateFieldGet(this, _internals).onCancelList.filter(callback => callback !== onfinally);\n        }\n\n        return onfinally();\n      }\n    }, _classPrivateFieldGet(this, _internals))), _classPrivateFieldGet(this, _internals));\n  }\n\n  cancel() {\n    _classPrivateFieldGet(this, _internals).isCanceled = true;\n\n    var callbacks = _classPrivateFieldGet(this, _internals).onCancelList;\n\n    _classPrivateFieldGet(this, _internals).onCancelList = [];\n\n    for (var callback of callbacks) {\n      if (typeof callback === 'function') {\n        try {\n          callback();\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    }\n  }\n\n  isCanceled() {\n    return _classPrivateFieldGet(this, _internals).isCanceled === true;\n  }\n\n}\n\nexport class CancelablePromise extends CancelablePromiseInternal {\n  constructor(executor) {\n    super({\n      executor\n    });\n  }\n\n}\n\n_defineProperty(CancelablePromise, \"all\", function all(iterable) {\n  return makeAllCancelable(iterable, Promise.all(iterable));\n});\n\n_defineProperty(CancelablePromise, \"allSettled\", function allSettled(iterable) {\n  return makeAllCancelable(iterable, Promise.allSettled(iterable));\n});\n\n_defineProperty(CancelablePromise, \"any\", function any(iterable) {\n  return makeAllCancelable(iterable, Promise.any(iterable));\n});\n\n_defineProperty(CancelablePromise, \"race\", function race(iterable) {\n  return makeAllCancelable(iterable, Promise.race(iterable));\n});\n\n_defineProperty(CancelablePromise, \"resolve\", function resolve(value) {\n  return cancelable(Promise.resolve(value));\n});\n\n_defineProperty(CancelablePromise, \"reject\", function reject(reason) {\n  return cancelable(Promise.reject(reason));\n});\n\n_defineProperty(CancelablePromise, \"isCancelable\", isCancelablePromise);\n\nexport default CancelablePromise;\nexport function cancelable(promise) {\n  return makeCancelable(promise, defaultInternals());\n}\nexport function isCancelablePromise(promise) {\n  return promise instanceof CancelablePromise || promise instanceof CancelablePromiseInternal;\n}\n\nfunction createCallback(onResult, internals) {\n  if (onResult) {\n    return arg => {\n      if (!internals.isCanceled) {\n        var result = onResult(arg);\n\n        if (isCancelablePromise(result)) {\n          internals.onCancelList.push(result.cancel);\n        }\n\n        return result;\n      }\n\n      return arg;\n    };\n  }\n}\n\nfunction makeCancelable(promise, internals) {\n  return new CancelablePromiseInternal({\n    internals,\n    promise\n  });\n}\n\nfunction makeAllCancelable(iterable, promise) {\n  var internals = defaultInternals();\n  internals.onCancelList.push(() => {\n    for (var resolvable of iterable) {\n      if (isCancelablePromise(resolvable)) {\n        resolvable.cancel();\n      }\n    }\n  });\n  return new CancelablePromiseInternal({\n    internals,\n    promise\n  });\n}\n\nfunction defaultInternals() {\n  return {\n    isCanceled: false,\n    onCancelList: []\n  };\n}\n//# sourceMappingURL=CancelablePromise.mjs.map","import { getCurrentUser, onRequestTokenUpdate, getRequestToken } from \"@nextcloud/auth\";\nimport { isPublicShare, getSharingToken } from \"@nextcloud/sharing/public\";\nimport { generateRemoteUrl } from \"@nextcloud/router\";\nimport { CancelablePromise } from \"cancelable-promise\";\nimport { createClient, getPatcher } from \"webdav\";\nimport { P as Permission, l as logger, c as NodeStatus, a as File, b as Folder } from \"./chunks/folder-QTYeAiOH.mjs\";\nconst parsePermissions = function(permString = \"\") {\n  let permissions = Permission.NONE;\n  if (!permString) {\n    return permissions;\n  }\n  if (permString.includes(\"C\") || permString.includes(\"K\")) {\n    permissions |= Permission.CREATE;\n  }\n  if (permString.includes(\"G\")) {\n    permissions |= Permission.READ;\n  }\n  if (permString.includes(\"W\") || permString.includes(\"N\") || permString.includes(\"V\")) {\n    permissions |= Permission.UPDATE;\n  }\n  if (permString.includes(\"D\")) {\n    permissions |= Permission.DELETE;\n  }\n  if (permString.includes(\"R\")) {\n    permissions |= Permission.SHARE;\n  }\n  return permissions;\n};\nconst defaultDavProperties = [\n  \"d:getcontentlength\",\n  \"d:getcontenttype\",\n  \"d:getetag\",\n  \"d:getlastmodified\",\n  \"d:creationdate\",\n  \"d:displayname\",\n  \"d:quota-available-bytes\",\n  \"d:resourcetype\",\n  \"nc:has-preview\",\n  \"nc:is-encrypted\",\n  \"nc:mount-type\",\n  \"oc:comments-unread\",\n  \"oc:favorite\",\n  \"oc:fileid\",\n  \"oc:owner-display-name\",\n  \"oc:owner-id\",\n  \"oc:permissions\",\n  \"oc:size\"\n];\nconst defaultDavNamespaces = {\n  d: \"DAV:\",\n  nc: \"http://nextcloud.org/ns\",\n  oc: \"http://owncloud.org/ns\",\n  ocs: \"http://open-collaboration-services.org/ns\"\n};\nconst registerDavProperty = function(prop, namespace = { nc: \"http://nextcloud.org/ns\" }) {\n  if (typeof window._nc_dav_properties === \"undefined\") {\n    window._nc_dav_properties = [...defaultDavProperties];\n    window._nc_dav_namespaces = { ...defaultDavNamespaces };\n  }\n  const namespaces = { ...window._nc_dav_namespaces, ...namespace };\n  if (window._nc_dav_properties.find((search) => search === prop)) {\n    logger.warn(`${prop} already registered`, { prop });\n    return false;\n  }\n  if (prop.startsWith(\"<\") || prop.split(\":\").length !== 2) {\n    logger.error(`${prop} is not valid. See example: 'oc:fileid'`, { prop });\n    return false;\n  }\n  const ns = prop.split(\":\")[0];\n  if (!namespaces[ns]) {\n    logger.error(`${prop} namespace unknown`, { prop, namespaces });\n    return false;\n  }\n  window._nc_dav_properties.push(prop);\n  window._nc_dav_namespaces = namespaces;\n  return true;\n};\nconst getDavProperties = function() {\n  if (typeof window._nc_dav_properties === \"undefined\") {\n    window._nc_dav_properties = [...defaultDavProperties];\n  }\n  return window._nc_dav_properties.map((prop) => `<${prop} />`).join(\" \");\n};\nconst getDavNameSpaces = function() {\n  if (typeof window._nc_dav_namespaces === \"undefined\") {\n    window._nc_dav_namespaces = { ...defaultDavNamespaces };\n  }\n  return Object.keys(window._nc_dav_namespaces).map((ns) => `xmlns:${ns}=\"${window._nc_dav_namespaces?.[ns]}\"`).join(\" \");\n};\nconst getDefaultPropfind = function() {\n  return `<?xml version=\"1.0\"?>\n\t\t<d:propfind ${getDavNameSpaces()}>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t</d:propfind>`;\n};\nconst getFavoritesReport = function() {\n  return `<?xml version=\"1.0\"?>\n\t\t<oc:filter-files ${getDavNameSpaces()}>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t\t<oc:filter-rules>\n\t\t\t\t<oc:favorite>1</oc:favorite>\n\t\t\t</oc:filter-rules>\n\t\t</oc:filter-files>`;\n};\nconst getRecentSearch = function(lastModified) {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<d:searchrequest ${getDavNameSpaces()}\n\txmlns:ns=\"https://github.com/icewind1991/SearchDAV/ns\">\n\t<d:basicsearch>\n\t\t<d:select>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t</d:select>\n\t\t<d:from>\n\t\t\t<d:scope>\n\t\t\t\t<d:href>/files/${getCurrentUser()?.uid}/</d:href>\n\t\t\t\t<d:depth>infinity</d:depth>\n\t\t\t</d:scope>\n\t\t</d:from>\n\t\t<d:where>\n\t\t\t<d:and>\n\t\t\t\t<d:or>\n\t\t\t\t\t<d:not>\n\t\t\t\t\t\t<d:eq>\n\t\t\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t\t\t<d:getcontenttype/>\n\t\t\t\t\t\t\t</d:prop>\n\t\t\t\t\t\t\t<d:literal>httpd/unix-directory</d:literal>\n\t\t\t\t\t\t</d:eq>\n\t\t\t\t\t</d:not>\n\t\t\t\t\t<d:eq>\n\t\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t\t<oc:size/>\n\t\t\t\t\t\t</d:prop>\n\t\t\t\t\t\t<d:literal>0</d:literal>\n\t\t\t\t\t</d:eq>\n\t\t\t\t</d:or>\n\t\t\t\t<d:gt>\n\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t<d:getlastmodified/>\n\t\t\t\t\t</d:prop>\n\t\t\t\t\t<d:literal>${lastModified}</d:literal>\n\t\t\t\t</d:gt>\n\t\t\t</d:and>\n\t\t</d:where>\n\t\t<d:orderby>\n\t\t\t<d:order>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<d:getlastmodified/>\n\t\t\t\t</d:prop>\n\t\t\t\t<d:descending/>\n\t\t\t</d:order>\n\t\t</d:orderby>\n\t\t<d:limit>\n\t\t\t<d:nresults>100</d:nresults>\n\t\t\t<ns:firstresult>0</ns:firstresult>\n\t\t</d:limit>\n\t</d:basicsearch>\n</d:searchrequest>`;\n};\nfunction getRootPath() {\n  if (isPublicShare()) {\n    return `/files/${getSharingToken()}`;\n  }\n  return `/files/${getCurrentUser()?.uid}`;\n}\nconst defaultRootPath = getRootPath();\nfunction getRemoteURL() {\n  const url = generateRemoteUrl(\"dav\");\n  if (isPublicShare()) {\n    return url.replace(\"remote.php\", \"public.php\");\n  }\n  return url;\n}\nconst defaultRemoteURL = getRemoteURL();\nconst getClient = function(remoteURL = defaultRemoteURL, headers = {}) {\n  const client = createClient(remoteURL, { headers });\n  function setHeaders(token) {\n    client.setHeaders({\n      ...headers,\n      // Add this so the server knows it is an request from the browser\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      // Inject user auth\n      requesttoken: token ?? \"\"\n    });\n  }\n  onRequestTokenUpdate(setHeaders);\n  setHeaders(getRequestToken());\n  const patcher = getPatcher();\n  patcher.patch(\"fetch\", (url, options) => {\n    const headers2 = options.headers;\n    if (headers2?.method) {\n      options.method = headers2.method;\n      delete headers2.method;\n    }\n    return fetch(url, options);\n  });\n  return client;\n};\nconst getFavoriteNodes = (davClient, path = \"/\", davRoot = defaultRootPath) => {\n  const controller = new AbortController();\n  return new CancelablePromise(async (resolve, reject, onCancel) => {\n    onCancel(() => controller.abort());\n    try {\n      const contentsResponse = await davClient.getDirectoryContents(`${davRoot}${path}`, {\n        signal: controller.signal,\n        details: true,\n        data: getFavoritesReport(),\n        headers: {\n          // see getClient for patched webdav client\n          method: \"REPORT\"\n        },\n        includeSelf: true\n      });\n      const nodes = contentsResponse.data.filter((node) => node.filename !== path).map((result) => resultToNode(result, davRoot));\n      resolve(nodes);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\nconst resultToNode = function(node, filesRoot = defaultRootPath, remoteURL = defaultRemoteURL) {\n  let userId = getCurrentUser()?.uid;\n  if (isPublicShare()) {\n    userId = userId ?? \"anonymous\";\n  } else if (!userId) {\n    throw new Error(\"No user id found\");\n  }\n  const props = node.props;\n  const permissions = parsePermissions(props?.permissions);\n  const owner = String(props?.[\"owner-id\"] || userId);\n  const id = props.fileid || 0;\n  const mtime = new Date(Date.parse(node.lastmod));\n  const crtime = new Date(Date.parse(props.creationdate));\n  const nodeData = {\n    id,\n    source: `${remoteURL}${node.filename}`,\n    mtime: !isNaN(mtime.getTime()) && mtime.getTime() !== 0 ? mtime : void 0,\n    crtime: !isNaN(crtime.getTime()) && crtime.getTime() !== 0 ? crtime : void 0,\n    mime: node.mime || \"application/octet-stream\",\n    // Manually cast to work around for https://github.com/perry-mitchell/webdav-client/pull/380\n    displayname: props.displayname !== void 0 ? String(props.displayname) : void 0,\n    size: props?.size || Number.parseInt(props.getcontentlength || \"0\"),\n    // The fileid is set to -1 for failed requests\n    status: id < 0 ? NodeStatus.FAILED : void 0,\n    permissions,\n    owner,\n    root: filesRoot,\n    attributes: {\n      ...node,\n      ...props,\n      hasPreview: props?.[\"has-preview\"]\n    }\n  };\n  delete nodeData.attributes?.props;\n  return node.type === \"file\" ? new File(nodeData) : new Folder(nodeData);\n};\nexport {\n  defaultDavNamespaces,\n  defaultDavProperties,\n  defaultRemoteURL,\n  defaultRootPath,\n  getClient,\n  getDavNameSpaces,\n  getDavProperties,\n  getDefaultPropfind,\n  getFavoriteNodes,\n  getFavoritesReport,\n  getRecentSearch,\n  getRemoteURL,\n  getRootPath,\n  parsePermissions,\n  registerDavProperty,\n  resultToNode\n};\n//# sourceMappingURL=dav.mjs.map\n"],"names":["resolve","reject","createClient","getPatcher"],"mappings":"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","x_google_ignoreList":[0,1,2]}