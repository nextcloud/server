(()=>{"use strict";var t,e,n,o={39219(t,e,n){var o=n(21777),r=n(85471),a=n(81222),s=n(53334),i=n(950),c=n(43988),l=n(61744),d=n(78928),u=n(42610),p=n(57908),h=n(64426),m=n(59915),N=n(68166),v=n(15502),y=n(71711),f=n(25878),g=n(85407),w=n(47611),A=n(10363),b=n(282),_=n(78009),k=n(54048),S=n(88486),x=n(27345),T=n(49595),C=n(31866),P=n(70036),B=n(44031),I=n(542),O=n(94012),q=n(93651),F=n(77834),L=n(91019),R=n(50017),$=n(60258),E=n(22258),D=n(66865),G=n(17067),M=n(10211),j=n(52631),z=n(73148),X=n(81621),K=n(94294),V=n(93314),Y=n(8054),H=n(99016),J=n(83358),U=n(90429),Q=n(12318),W=n(46173),Z=n(44025),tt=n(92257),et=n(48198),nt=n(59668),ot=n(18343),rt=n(83194),at=n(50481),st=n(42507),it=n(85646),ct=n(71565),lt=n(49975),dt=n(17848),ut=n(99925),pt=n(66768),ht=n(8633),mt=n(97398),Nt=n(51550),vt=n(63195),yt=n(77082),ft=n(48191),gt=n(77462),wt=n(34962),At=n(38159),bt=n(88289),_t=n(99759),kt=n(371),St=n(22983),xt=n(71912),Tt=n(35290),Ct=n(1938),Pt=n(1357),Bt=n(81974),It=n(36079),Ot=n(67582),qt=(n(19051),n(65139),n(52781),n(3168),n(40490)),Ft=n(87059),Lt=n(40959),Rt=(n(61338),n(71639)),$t=n(4258),Et=n(29586),Dt=n(684),Gt=n(61618),Mt=n(62179),jt=n(25771),zt=n(8256),Xt=n(19234),Kt=n(5843),Vt=n(48748),Yt=n(23610),Ht=(n(55581),n(94205),n(95462),n(23020),n(53429),n(23739),n(16343),n(29928),n(64660),n(18547),n(20511)),Jt=n(69885),Ut=(n(59656),n(75105),n(92471),n(16406),n(2508));i.N,c.N,l.A,d.N,u.N,p.A,h.N,m.A,v.A,y.A,f.N,N.N,g.N,w.A,A.A,b.N,_.N,k.A,S.N,x.A,T.N,C.N,P.N,B.N,I.A,O.N,q.N,F.N,F.N,L.N,R.N,$.A,E.N,D.A,G.N,Ot.N,M.N,j.N,z.N,X.N,K.N,V.N,Y.N,H.N,J.N,U.N,Q.N,W.N,Z.N,tt.default,et.A,nt.N,ot.N,rt.A,at.N,st.A,it.N,ct.N,lt.N,dt.N,ut.N,pt.A,ht.N,mt.N,Nt.N,vt.N,yt.N,ft.N,gt.N,wt.N,At.N,bt.A,It.N,_t.A,kt.A,St.N,xt.N,Tt.N,Ct.N,Pt.N,Bt.N,Ot.a,qt.N,Rt.N,Ft.N,$t.N,Et.N,Dt.N,Gt.N,Mt.N,jt.N,Lt.N,zt.N,Xt.N,Kt.N,Vt.N,Yt.A,Symbol.toStringTag,Ht.A,Jt.A,Ut.yw,Symbol.toStringTag;var Qt=n(74095),Wt=n(57268),Zt=n(16044);const te=(0,r.pM)({__name:"PublicShareAuth",setup(t){const e=(0,a.C)("core","publicShareAuth"),n=(0,o.do)(),i=(0,a.C)("files_sharing","sharingToken",null)??document.querySelector('input#sharingToken[type="hidden"]')?.value??null,{shareType:c,invalidPassword:l,canResendPassword:d}=e,u="boolean"==typeof e.identityOk,p=(0,r.KR)("boolean"==typeof e.identityOk),h=(0,r.KR)(""),m=(0,r.KR)("");return(0,r.sV)(()=>{const t=(0,r.nI)();t&&t.proxy.$el?.classList.add("guest-box")}),{__sfc:!0,publicShareAuth:e,requestToken:n,sharingToken:i,shareType:c,invalidPassword:l,canResendPassword:d,hasIdentityCheck:u,showIdentityCheck:p,password:h,email:m,t:s.t,NcTextField:Lt.N,NcButton:Qt.A,NcFormBox:Wt.A,NcGuestContent:pt.A,NcNoteCard:kt.A,NcPasswordField:Zt.A}}});var ee=n(85072),ne=n.n(ee),oe=n(97825),re=n.n(oe),ae=n(77659),se=n.n(ae),ie=n(55056),ce=n.n(ie),le=n(10540),de=n.n(le),ue=n(41113),pe=n.n(ue),he=n(47782),me={};me.styleTagTransform=pe(),me.setAttributes=ce(),me.insert=se().bind(null,"head"),me.domAPI=re(),me.insertStyleElement=de(),ne()(he.A,me);const Ne=he.A&&he.A.locals?he.A.locals:void 0,ve=(0,n(14486).A)(te,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcGuestContent,{class:t.$style.publicShareAuth},[e("h2",[t._v(t._s(n.t("core","This share is password-protected")))]),t._v(" "),e("form",{directives:[{name:"show",rawName:"v-show",value:!n.showIdentityCheck,expression:"!showIdentityCheck"}],class:t.$style.publicShareAuth__form,attrs:{method:"POST"}},[n.invalidPassword?e(n.NcNoteCard,{attrs:{type:"error"}},[t._v("\n\t\t\t"+t._s(n.t("core","The password is wrong or expired. Please try again or request a new one."))+"\n\t\t")]):t._e(),t._v(" "),e(n.NcPasswordField,{attrs:{label:n.t("core","Password"),autofocus:"",autocomplete:"new-password",autocapitalize:"off",spellcheck:"false",name:"password"},model:{value:n.password,callback:function(t){n.password=t},expression:"password"}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"requesttoken"},domProps:{value:n.requestToken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"sharingToken"},domProps:{value:n.sharingToken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"sharingType"},domProps:{value:n.shareType}}),t._v(" "),e(n.NcButton,{attrs:{type:"submit",variant:"primary",wide:""}},[t._v("\n\t\t\t"+t._s(n.t("core","Submit"))+"\n\t\t")])],1),t._v(" "),n.showIdentityCheck?e("form",{class:t.$style.publicShareAuth__form,attrs:{method:"POST"}},[n.hasIdentityCheck?e(n.NcNoteCard,{attrs:{type:n.publicShareAuth.identityOk?"success":"error"}},[t._v("\n\t\t\t"+t._s(n.publicShareAuth.identityOk?n.t("core","Password sent!"):n.t("core","You are not authorized to request a password for this share"))+"\n\t\t")]):e(n.NcNoteCard,{attrs:{type:"info"}},[t._v("\n\t\t\t"+t._s(n.t("core","Please type in your email address to request a temporary password"))+"\n\t\t")]),t._v(" "),e(n.NcTextField,{attrs:{type:"email",name:"identityToken",label:n.t("core","Email address")},model:{value:n.email,callback:function(t){n.email=t},expression:"email"}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"requesttoken"},domProps:{value:n.requestToken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"sharingToken"},domProps:{value:n.sharingToken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"sharingType"},domProps:{value:n.shareType}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"passwordRequest",value:""}}),t._v(" "),e(n.NcFormBox,{attrs:{row:""}},[e(n.NcButton,{attrs:{wide:""},on:{click:function(t){n.showIdentityCheck=!1}}},[t._v("\n\t\t\t\t"+t._s(n.t("core","Back"))+"\n\t\t\t")]),t._v(" "),e(n.NcButton,{attrs:{type:"submit",variant:"primary",wide:""}},[t._v("\n\t\t\t\t"+t._s(n.t("core","Request password"))+"\n\t\t\t")])],1)],1):t._e(),t._v(" "),n.canResendPassword&&!n.showIdentityCheck?e(n.NcButton,{class:t.$style.publicShareAuth__forgotPasswordButton,attrs:{wide:""},on:{click:function(t){n.showIdentityCheck=!0}}},[t._v("\n\t\t"+t._s(n.t("core","Forgot password"))+"\n\t")]):t._e()],1)},[],!1,function(t){this.$style=Ne.locals||Ne},null,null).exports;n.nc=(0,o.aV)(),(new(r.Ay.extend(ve))).$mount("#core-public-share-auth")},47782(t,e,n){n.d(e,{A:()=>i});var o=n(71354),r=n.n(o),a=n(76314),s=n.n(a)()(r());s.push([t.id,"\n._publicShareAuth_S4vsJ {\n\tmax-width: 400px !important;\n}\n._publicShareAuth__form_kYSqz {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: calc(2 * var(--default-grid-baseline));\n}\n._publicShareAuth__forgotPasswordButton_tKti_ {\n\tmargin-top: calc(3 * var(--default-grid-baseline));\n}\n","",{version:3,sources:["webpack://./core/src/views/PublicShareAuth.vue"],names:[],mappings:";AAuHA;CACA,2BAAA;AACA;AAEA;CACA,aAAA;CACA,sBAAA;CACA,2CAAA;AACA;AAEA;CACA,kDAAA;AACA",sourcesContent:['\x3c!--\n - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n --\x3e\n\n<script setup lang="ts">\nimport type { ShareType } from \'@nextcloud/sharing\'\n\nimport { getRequestToken } from \'@nextcloud/auth\'\nimport { loadState } from \'@nextcloud/initial-state\'\nimport { t } from \'@nextcloud/l10n\'\nimport { getSharingToken } from \'@nextcloud/sharing/public\'\nimport { NcTextField } from \'@nextcloud/vue\'\nimport { getCurrentInstance, onMounted, ref } from \'vue\'\nimport NcButton from \'@nextcloud/vue/components/NcButton\'\nimport NcFormBox from \'@nextcloud/vue/components/NcFormBox\'\nimport NcGuestContent from \'@nextcloud/vue/components/NcGuestContent\'\nimport NcNoteCard from \'@nextcloud/vue/components/NcNoteCard\'\nimport NcPasswordField from \'@nextcloud/vue/components/NcPasswordField\'\n\nconst publicShareAuth = loadState<{\n\tcanResendPassword: boolean\n\tshareType: ShareType\n\tidentityOk?: boolean | null\n\tinvalidPassword?: boolean\n}>(\'core\', \'publicShareAuth\')\n\nconst requestToken = getRequestToken()\nconst sharingToken = getSharingToken()\nconst { shareType, invalidPassword, canResendPassword } = publicShareAuth\n\nconst hasIdentityCheck = typeof publicShareAuth.identityOk === \'boolean\'\nconst showIdentityCheck = ref(typeof publicShareAuth.identityOk === \'boolean\')\nconst password = ref(\'\')\nconst email = ref(\'\')\n\n// TODO: Remove when using Vue 3\nonMounted(() => {\n\tconst instance = getCurrentInstance()\n\tif (instance) {\n\t\t// @ts-expect-error Vue internals\n\t\t(instance.proxy.$el as HTMLElement)?.classList.add(\'guest-box\')\n\t}\n})\n<\/script>\n\n<template>\n\t<NcGuestContent :class="$style.publicShareAuth">\n\t\t<h2>{{ t(\'core\', \'This share is password-protected\') }}</h2>\n\t\t<form\n\t\t\tv-show="!showIdentityCheck"\n\t\t\t:class="$style.publicShareAuth__form"\n\t\t\tmethod="POST">\n\t\t\t<NcNoteCard v-if="invalidPassword" type="error">\n\t\t\t\t{{ t(\'core\', \'The password is wrong or expired. Please try again or request a new one.\') }}\n\t\t\t</NcNoteCard>\n\n\t\t\t<NcPasswordField\n\t\t\t\tv-model="password"\n\t\t\t\t:label="t(\'core\', \'Password\')"\n\t\t\t\tautofocus\n\t\t\t\tautocomplete="new-password"\n\t\t\t\tautocapitalize="off"\n\t\t\t\tspellcheck="false"\n\t\t\t\tname="password" />\n\n\t\t\t<input type="hidden" name="requesttoken" :value="requestToken">\n\t\t\t<input type="hidden" name="sharingToken" :value="sharingToken">\n\t\t\t<input type="hidden" name="sharingType" :value="shareType">\n\n\t\t\t<NcButton type="submit" variant="primary" wide>\n\t\t\t\t{{ t(\'core\', \'Submit\') }}\n\t\t\t</NcButton>\n\t\t</form>\n\n\t\t<form\n\t\t\tv-if="showIdentityCheck"\n\t\t\t:class="$style.publicShareAuth__form"\n\t\t\tmethod="POST">\n\t\t\t<NcNoteCard v-if="!hasIdentityCheck" type="info">\n\t\t\t\t{{ t(\'core\', \'Please type in your email address to request a temporary password\') }}\n\t\t\t</NcNoteCard>\n\n\t\t\t<NcNoteCard v-else :type="publicShareAuth.identityOk ? \'success\' : \'error\'">\n\t\t\t\t{{ publicShareAuth.identityOk ? t(\'core\', \'Password sent!\') : t(\'core\', \'You are not authorized to request a password for this share\') }}\n\t\t\t</NcNoteCard>\n\n\t\t\t<NcTextField\n\t\t\t\tv-model="email"\n\t\t\t\ttype="email"\n\t\t\t\tname="identityToken"\n\t\t\t\t:label="t(\'core\', \'Email address\')" />\n\t\t\t<input type="hidden" name="requesttoken" :value="requestToken">\n\t\t\t<input type="hidden" name="sharingToken" :value="sharingToken">\n\t\t\t<input type="hidden" name="sharingType" :value="shareType">\n\t\t\t<input type="hidden" name="passwordRequest" value="">\n\n\t\t\t<NcFormBox row>\n\t\t\t\t<NcButton wide @click="showIdentityCheck = false">\n\t\t\t\t\t{{ t(\'core\', \'Back\') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton type="submit" variant="primary" wide>\n\t\t\t\t\t{{ t(\'core\', \'Request password\') }}\n\t\t\t\t</NcButton>\n\t\t\t</NcFormBox>\n\t\t</form>\n\n\t\t\x3c!-- request password button --\x3e\n\t\t<NcButton\n\t\t\tv-if="canResendPassword && !showIdentityCheck"\n\t\t\t:class="$style.publicShareAuth__forgotPasswordButton"\n\t\t\twide\n\t\t\t@click="showIdentityCheck = true">\n\t\t\t{{ t(\'core\', \'Forgot password\') }}\n\t\t</NcButton>\n\t</NcGuestContent>\n</template>\n\n<style module>\n.publicShareAuth {\n\tmax-width: 400px !important;\n}\n\n.publicShareAuth__form {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: calc(2 * var(--default-grid-baseline));\n}\n\n.publicShareAuth__forgotPasswordButton {\n\tmargin-top: calc(3 * var(--default-grid-baseline));\n}\n</style>\n'],sourceRoot:""}]),s.locals={publicShareAuth:"_publicShareAuth_S4vsJ",publicShareAuth__form:"_publicShareAuth__form_kYSqz",publicShareAuth__forgotPasswordButton:"_publicShareAuth__forgotPasswordButton_tKti_"};const i=s},27518(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},27514(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},79722(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},64505(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={id:t,loaded:!1,exports:{}};return o[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=o,t=[],a.O=(e,n,o,r)=>{if(!n){var s=1/0;for(d=0;d<t.length;d++){for(var[n,o,r]=t[d],i=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every(t=>a.O[t](n[c]))?n.splice(c--,1):(i=!1,r<s&&(s=r));if(i){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[n,o,r]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,n)=>(a.f[n](t,e),e),[])),a.u=t=>t+"-"+t+".js?v="+{5862:"580b9c2e231a9169a12f",6798:"995524658ab188a2d123",7471:"b4ac70873a3ab192efd0"}[t],a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},n="nextcloud-ui-legacy:",a.l=(t,o,r,s)=>{if(e[t])e[t].push(o);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==n+r){i=u;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",n+r),i.src=t),e[t]=[o];var p=(n,o)=>{i.onerror=i.onload=null,clearTimeout(h);var r=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach(t=>t(o)),n)return n(o)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),a.j=1537,(()=>{var t;globalThis.importScripts&&(t=globalThis.location+"");var e=globalThis.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={1537:0,7471:0};a.f.j=(e,n)=>{var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((n,r)=>o=t[e]=[n,r]);n.push(o[2]=r);var s=a.p+a.u(e),i=new Error;a.l(s,n=>{if(a.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,o[1](i)}},"chunk-"+e,e)}},a.O.j=e=>0===t[e];var e=(e,n)=>{var o,r,[s,i,c]=n,l=0;if(s.some(e=>0!==t[e])){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(c)var d=c(a)}for(e&&e(n);l<s.length;l++)r=s[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},n=globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),a.nc=void 0;var s=a.O(void 0,[4208],()=>a(39219));s=a.O(s)})();
//# sourceMappingURL=core-public_share_auth.js.map?v=bf30d2fce1decb63b418