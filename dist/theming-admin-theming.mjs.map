{"version":3,"file":"theming-admin-theming.mjs","sources":["../apps/theming/src/mixins/admin/FieldMixin.js","../apps/theming/src/mixins/admin/TextValueMixin.js","../apps/theming/src/components/admin/CheckboxField.vue","../apps/theming/src/components/admin/ColorPickerField.vue","../apps/theming/src/components/admin/FileInputField.vue","../apps/theming/src/components/admin/TextField.vue","../apps/theming/src/components/admin/AppMenuSection.vue","../apps/theming/src/AdminTheming.vue","../apps/theming/src/admin-settings.js"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst styleRefreshFields = [\n\t'color',\n\t'logo',\n\t'background',\n\t'logoheader',\n\t'favicon',\n\t'disable-user-theming',\n]\n\nexport default {\n\temits: [\n\t\t'update:theming',\n\t],\n\n\tdata() {\n\t\treturn {\n\t\t\tshowSuccess: false,\n\t\t\terrorMessage: '',\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tid() {\n\t\t\treturn `admin-theming-${this.name}`\n\t\t},\n\t},\n\n\tmethods: {\n\t\treset() {\n\t\t\tthis.showSuccess = false\n\t\t\tthis.errorMessage = ''\n\t\t},\n\n\t\thandleSuccess() {\n\t\t\tthis.showSuccess = true\n\t\t\tsetTimeout(() => { this.showSuccess = false }, 2000)\n\t\t\tif (styleRefreshFields.includes(this.name)) {\n\t\t\t\tthis.$emit('update:theming')\n\t\t\t}\n\t\t},\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nimport FieldMixin from './FieldMixin.js'\n\nexport default {\n\tmixins: [\n\t\tFieldMixin,\n\t],\n\n\twatch: {\n\t\tvalue(value) {\n\t\t\tthis.localValue = value\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tlocalValue: this.value,\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync save() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateStylesheet')\n\t\t\t// Convert boolean to string as server expects string value\n\t\t\tconst valueToPost = this.localValue === true ? 'yes' : this.localValue === false ? 'no' : this.localValue\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.name,\n\t\t\t\t\tvalue: valueToPost,\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:value', this.localValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync undo() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/undoChanges')\n\t\t\ttry {\n\t\t\t\tconst { data } = await axios.post(url, {\n\t\t\t\t\tsetting: this.name,\n\t\t\t\t})\n\n\t\t\t\tif (data.data.value) {\n\t\t\t\t\tthis.$emit('update:defaultValue', data.data.value)\n\t\t\t\t}\n\t\t\t\tthis.$emit('update:value', data.data.value || this.defaultValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\t},\n}\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcCheckboxRadioSwitch type=\"switch\"\n\t\t\t\t:id=\"id\"\n\t\t\t\t:checked.sync=\"localValue\"\n\t\t\t\t@update:checked=\"save\">\n\t\t\t\t{{ label }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</div>\n\n\t\t<p class=\"field__description\">{{ description }}</p>\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\t</div>\n</template>\n\n<script>\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'CheckboxField',\n\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcNoteCard,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n\n.field {\n\t&__description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcColorPicker :value.sync=\"localValue\"\n\t\t\t\t:advanced-fields=\"true\"\n\t\t\t\t@update:value=\"debounceSave\">\n\t\t\t\t<NcButton :id=\"id\"\n\t\t\t\t\tclass=\"field__button\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:aria-label=\"t('theming', 'Select a custom color')\"\n\t\t\t\t\tdata-admin-theming-setting-color-picker>\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\"\n\t\t\t\t\t\t\t:appearance=\"calculatedTextColor === '#ffffff' ? 'light' : 'dark'\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t<Palette v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ value }}\n\t\t\t\t</NcButton>\n\t\t\t</NcColorPicker>\n\t\t\t<div class=\"field__color-preview\" data-admin-theming-setting-color />\n\t\t\t<NcButton v-if=\"value !== defaultValue\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Reset to default')\"\n\t\t\t\tdata-admin-theming-setting-color-reset\n\t\t\t\t@click=\"undo\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Undo :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t\t<div v-if=\"description\" class=\"description\">\n\t\t\t{{ description }}\n\t\t</div>\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\t</div>\n</template>\n\n<script>\nimport { debounce } from 'debounce'\nimport { colord } from 'colord'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcColorPicker from '@nextcloud/vue/dist/Components/NcColorPicker.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport Undo from 'vue-material-design-icons/UndoVariant.vue'\nimport Palette from 'vue-material-design-icons/Palette.vue'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'ColorPickerField',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcColorPicker,\n\t\tNcLoadingIcon,\n\t\tNcNoteCard,\n\t\tUndo,\n\t\tPalette,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttextColor: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\temits: ['update:theming'],\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcalculatedTextColor() {\n\t\t\tconst color = colord(this.value)\n\t\t\treturn color.isLight() ? '#000000' : '#ffffff'\n\t\t},\n\t\tusedTextColor() {\n\t\t\tif (this.textColor) {\n\t\t\t\treturn this.textColor\n\t\t\t}\n\t\t\treturn this.calculatedTextColor\n\t\t},\n\t},\n\n\tmethods: {\n\t\tdebounceSave: debounce(async function() {\n\t\t\tthis.loading = true\n\t\t\tawait this.save()\n\t\t\tthis.$emit('update:theming')\n\t\t\tthis.loading = false\n\t\t}, 200),\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n.description {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.field {\n\t&__button {\n\t\tbackground-color: v-bind('value') !important;\n\t\tcolor: v-bind('usedTextColor') !important;\n\t}\n\n\t&__color-preview {\n\t\twidth: var(--default-clickable-area);\n\t\tborder-radius: var(--border-radius-large);\n\t\tbackground-color: v-bind('value');\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<label :for=\"id\">{{ displayName }}</label>\n\t\t<div class=\"field__row\">\n\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t:id=\"id\"\n\t\t\t\t:aria-label=\"ariaLabel\"\n\t\t\t\tdata-admin-theming-setting-file-picker\n\t\t\t\t@click=\"activateLocalFilePicker\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Upload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('theming', 'Upload') }}\n\t\t\t</NcButton>\n\t\t\t<NcButton v-if=\"showReset\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Reset to default')\"\n\t\t\t\tdata-admin-theming-setting-file-reset\n\t\t\t\t@click=\"undo\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Undo :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton v-if=\"showRemove\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('theming', 'Remove background image')\"\n\t\t\t\tdata-admin-theming-setting-file-remove\n\t\t\t\t@click=\"removeBackground\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Delete :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcLoadingIcon v-if=\"showLoading\"\n\t\t\t\tclass=\"field__loading-icon\"\n\t\t\t\t:size=\"20\" />\n\t\t</div>\n\n\t\t<div v-if=\"(name === 'logoheader' || name === 'favicon') && mimeValue !== defaultMimeValue\"\n\t\t\tclass=\"field__preview\"\n\t\t\t:class=\"{\n\t\t\t\t'field__preview--logoheader': name === 'logoheader',\n\t\t\t\t'field__preview--favicon': name === 'favicon',\n\t\t\t}\" />\n\n\t\t<NcNoteCard v-if=\"errorMessage\"\n\t\t\ttype=\"error\"\n\t\t\t:show-alert=\"true\">\n\t\t\t<p>{{ errorMessage }}</p>\n\t\t</NcNoteCard>\n\n\t\t<input ref=\"input\"\n\t\t\t:accept=\"acceptMime\"\n\t\t\ttype=\"file\"\n\t\t\t@change=\"onChange\">\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcLoadingIcon from '@nextcloud/vue/dist/Components/NcLoadingIcon.js'\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport Delete from 'vue-material-design-icons/Delete.vue'\nimport Undo from 'vue-material-design-icons/UndoVariant.vue'\nimport Upload from 'vue-material-design-icons/Upload.vue'\n\nimport FieldMixin from '../../mixins/admin/FieldMixin.js'\n\nconst {\n\tallowedMimeTypes,\n} = loadState('theming', 'adminThemingParameters', {})\n\nexport default {\n\tname: 'FileInputField',\n\n\tcomponents: {\n\t\tDelete,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcNoteCard,\n\t\tUndo,\n\t\tUpload,\n\t},\n\n\tmixins: [\n\t\tFieldMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultMimeValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tariaLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tshowLoading: false,\n\t\t\tacceptMime: (allowedMimeTypes[this.name]\n\t\t\t\t|| ['image/jpeg', 'image/png', 'image/gif', 'image/webp']).join(','),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowReset() {\n\t\t\treturn this.mimeValue !== this.defaultMimeValue\n\t\t},\n\n\t\tshowRemove() {\n\t\t\tif (this.name === 'background') {\n\t\t\t\tif (this.mimeValue.startsWith('image/')) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t\tif (this.mimeValue === this.defaultMimeValue) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t},\n\n\tmethods: {\n\t\tactivateLocalFilePicker() {\n\t\t\tthis.reset()\n\t\t\t// Set to null so that selecting the same file will trigger the change event\n\t\t\tthis.$refs.input.value = null\n\t\t\tthis.$refs.input.click()\n\t\t},\n\n\t\tasync onChange(e) {\n\t\t\tconst file = e.target.files[0]\n\n\t\t\tconst formData = new FormData()\n\t\t\tformData.append('key', this.name)\n\t\t\tformData.append('image', file)\n\n\t\t\tconst url = generateUrl('/apps/theming/ajax/uploadImage')\n\t\t\ttry {\n\t\t\t\tthis.showLoading = true\n\t\t\t\tconst { data } = await axios.post(url, formData)\n\t\t\t\tthis.showLoading = false\n\t\t\t\tthis.$emit('update:mime-value', file.type)\n\t\t\t\tthis.$emit('uploaded', data.data.url)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.showLoading = false\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync undo() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/undoChanges')\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.mimeName,\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:mime-value', this.defaultMimeValue)\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\n\t\tasync removeBackground() {\n\t\t\tthis.reset()\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateStylesheet')\n\t\t\ttry {\n\t\t\t\tawait axios.post(url, {\n\t\t\t\t\tsetting: this.mimeName,\n\t\t\t\t\tvalue: 'backgroundColor',\n\t\t\t\t})\n\t\t\t\tthis.$emit('update:mime-value', 'backgroundColor')\n\t\t\t\tthis.handleSuccess()\n\t\t\t} catch (e) {\n\t\t\t\tthis.errorMessage = e.response.data.data?.message\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './shared/field.scss';\n\n.field {\n\t&__loading-icon {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t}\n\n\t&__preview {\n\t\twidth: 70px;\n\t\theight: 70px;\n\t\tbackground-size: contain;\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tmargin: 10px 0;\n\n\t\t&--logoheader {\n\t\t\tbackground-image: var(--image-logoheader);\n\t\t}\n\n\t\t&--favicon {\n\t\t\tbackground-image: var(--image-favicon);\n\t\t}\n\t}\n}\n\ninput[type=\"file\"] {\n\tdisplay: none;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"field\">\n\t\t<NcTextField :value.sync=\"localValue\"\n\t\t\t:label=\"displayName\"\n\t\t\t:placeholder=\"placeholder\"\n\t\t\t:type=\"type\"\n\t\t\t:maxlength=\"maxlength\"\n\t\t\t:spellcheck=\"false\"\n\t\t\t:success=\"showSuccess\"\n\t\t\t:error=\"Boolean(errorMessage)\"\n\t\t\t:helper-text=\"errorMessage\"\n\t\t\t:show-trailing-button=\"value !== defaultValue\"\n\t\t\ttrailing-button-icon=\"undo\"\n\t\t\t@trailing-button-click=\"undo\"\n\t\t\t@keydown.enter=\"save\"\n\t\t\t@blur=\"save\" />\n\t</div>\n</template>\n\n<script>\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\n\nimport TextValueMixin from '../../mixins/admin/TextValueMixin.js'\n\nexport default {\n\tname: 'TextField',\n\n\tcomponents: {\n\t\tNcTextField,\n\t},\n\n\tmixins: [\n\t\tTextValueMixin,\n\t],\n\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmaxlength: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.field {\n\tmax-width: 400px;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcSettingsSection :name=\"t('theming', 'Navigation bar settings')\">\n\t\t<h3>{{ t('theming', 'Default app') }}</h3>\n\t\t<p class=\"info-note\">\n\t\t\t{{ t('theming', 'The default app is the app that is e.g. opened after login or when the logo in the menu is clicked.') }}\n\t\t</p>\n\n\t\t<NcCheckboxRadioSwitch :checked.sync=\"hasCustomDefaultApp\" type=\"switch\" data-cy-switch-default-app=\"\">\n\t\t\t{{ t('theming', 'Use custom default app') }}\n\t\t</NcCheckboxRadioSwitch>\n\n\t\t<template v-if=\"hasCustomDefaultApp\">\n\t\t\t<h4>{{ t('theming', 'Global default app') }}</h4>\n\t\t\t<NcSelect v-model=\"selectedApps\"\n\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t:placeholder=\"t('theming', 'Global default apps')\"\n\t\t\t\t:options=\"allApps\"\n\t\t\t\t:multiple=\"true\" />\n\t\t\t<h5>{{ t('theming', 'Default app priority') }}</h5>\n\t\t\t<p class=\"info-note\">\n\t\t\t\t{{ t('theming', 'If an app is not enabled for a user, the next app with lower priority is used.') }}\n\t\t\t</p>\n\t\t\t<AppOrderSelector :value.sync=\"selectedApps\" />\n\t\t</template>\n\t</NcSettingsSection>\n</template>\n\n<script lang=\"ts\">\nimport { showError } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport { computed, defineComponent } from 'vue'\n\nimport axios from '@nextcloud/axios'\n\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/dist/Components/NcCheckboxRadioSwitch.js'\nimport NcSelect from '@nextcloud/vue/dist/Components/NcSelect.js'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport AppOrderSelector from '../AppOrderSelector.vue'\n\nexport default defineComponent({\n\tname: 'AppMenuSection',\n\tcomponents: {\n\t\tAppOrderSelector,\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSelect,\n\t\tNcSettingsSection,\n\t},\n\tprops: {\n\t\tdefaultApps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: {\n\t\t'update:defaultApps': (value: string[]) => Array.isArray(value) && value.every((id) => typeof id === 'string'),\n\t},\n\tsetup(props, { emit }) {\n\t\tconst hasCustomDefaultApp = computed({\n\t\t\tget: () => props.defaultApps.length > 0,\n\t\t\tset: (checked: boolean) => {\n\t\t\t\tif (checked) {\n\t\t\t\t\temit('update:defaultApps', ['dashboard', 'files'])\n\t\t\t\t} else {\n\t\t\t\t\tselectedApps.value = []\n\t\t\t\t}\n\t\t\t},\n\t\t})\n\n\t\t/**\n\t\t * All enabled apps which can be navigated\n\t\t */\n\t\tconst allApps = Object.values(\n\t\t\tloadState<Record<string, { id: string, name?: string, icon: string }>>('core', 'apps'),\n\t\t).map(({ id, name, icon }) => ({ label: name, id, icon }))\n\n\t\t/**\n\t\t * Currently selected app, wrapps the setter\n\t\t */\n\t\tconst selectedApps = computed({\n\t\t\tget: () => props.defaultApps.map((id) => allApps.filter(app => app.id === id)[0]),\n\t\t\tset(value) {\n\t\t\t\tsaveSetting('defaultApps', value.map(app => app.id))\n\t\t\t\t\t.then(() => emit('update:defaultApps', value.map(app => app.id)))\n\t\t\t\t\t.catch(() => showError(t('theming', 'Could not set global default apps')))\n\t\t\t},\n\t\t})\n\n\t\tconst saveSetting = async (key: string, value: unknown) => {\n\t\t\tconst url = generateUrl('/apps/theming/ajax/updateAppMenu')\n\t\t\treturn await axios.put(url, {\n\t\t\t\tsetting: key,\n\t\t\t\tvalue,\n\t\t\t})\n\t\t}\n\n\t\treturn {\n\t\t\tallApps,\n\t\t\tselectedApps,\n\t\t\thasCustomDefaultApp,\n\n\t\t\tt,\n\t\t}\n\t},\n})\n</script>\n\n<style scoped lang=\"scss\">\nh3, h4 {\n\tfont-weight: bold;\n}\nh4, h5 {\n\tmargin-block-start: 12px;\n}\n\n.info-note {\n\tcolor: var(--color-text-maxcontrast);\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<section>\n\t\t<NcSettingsSection :name=\"t('theming', 'Theming')\"\n\t\t\t:description=\"t('theming', 'Theming makes it possible to easily customize the look and feel of your instance and supported clients. This will be visible for all users.')\"\n\t\t\t:doc-url=\"docUrl\"\n\t\t\tdata-admin-theming-settings>\n\t\t\t<div class=\"admin-theming\">\n\t\t\t\t<NcNoteCard v-if=\"!isThemable\"\n\t\t\t\t\ttype=\"error\"\n\t\t\t\t\t:show-alert=\"true\">\n\t\t\t\t\t<p>{{ notThemableErrorMessage }}</p>\n\t\t\t\t</NcNoteCard>\n\n\t\t\t\t<!-- Name, web link, slogan... fields -->\n\t\t\t\t<TextField v-for=\"field in textFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:data-admin-theming-setting-field=\"field.name\"\n\t\t\t\t\t:default-value=\"field.defaultValue\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:maxlength=\"field.maxlength\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:placeholder=\"field.placeholder\"\n\t\t\t\t\t:type=\"field.type\"\n\t\t\t\t\t:value.sync=\"field.value\"\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\n\t\t\t\t<!-- Primary color picker -->\n\t\t\t\t<ColorPickerField :name=\"primaryColorPickerField.name\"\n\t\t\t\t\t:description=\"primaryColorPickerField.description\"\n\t\t\t\t\t:default-value=\"primaryColorPickerField.defaultValue\"\n\t\t\t\t\t:display-name=\"primaryColorPickerField.displayName\"\n\t\t\t\t\t:value.sync=\"primaryColorPickerField.value\"\n\t\t\t\t\tdata-admin-theming-setting-primary-color\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\n\t\t\t\t<!-- Background color picker -->\n\t\t\t\t<ColorPickerField name=\"background_color\"\n\t\t\t\t\t:description=\"t('theming', 'Instead of a background image you can also configure a plain background color. If you use a background image changing this color will influence the color of the app menu icons.')\"\n\t\t\t\t\t:default-value.sync=\"defaultBackgroundColor\"\n\t\t\t\t\t:display-name=\"t('theming', 'Background color')\"\n\t\t\t\t\t:value.sync=\"backgroundColor\"\n\t\t\t\t\tdata-admin-theming-setting-background-color\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\n\t\t\t\t<!-- Default background picker -->\n\t\t\t\t<FileInputField :aria-label=\"t('theming', 'Upload new logo')\"\n\t\t\t\t\tdata-admin-theming-setting-file=\"logo\"\n\t\t\t\t\t:display-name=\"t('theming', 'Logo')\"\n\t\t\t\t\tmime-name=\"logoMime\"\n\t\t\t\t\t:mime-value.sync=\"logoMime\"\n\t\t\t\t\tname=\"logo\"\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\n\t\t\t\t<FileInputField :aria-label=\"t('theming', 'Upload new background and login image')\"\n\t\t\t\t\tdata-admin-theming-setting-file=\"background\"\n\t\t\t\t\t:display-name=\"t('theming', 'Background and login image')\"\n\t\t\t\t\tmime-name=\"backgroundMime\"\n\t\t\t\t\t:mime-value.sync=\"backgroundMime\"\n\t\t\t\t\tname=\"background\"\n\t\t\t\t\t@uploaded=\"backgroundURL = $event\"\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\n\t\t\t\t<div class=\"admin-theming__preview\" data-admin-theming-preview>\n\t\t\t\t\t<div class=\"admin-theming__preview-logo\" data-admin-theming-preview-logo />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</NcSettingsSection>\n\n\t\t<NcSettingsSection :name=\"t('theming', 'Advanced options')\">\n\t\t\t<div class=\"admin-theming-advanced\">\n\t\t\t\t<TextField v-for=\"field in advancedTextFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:value.sync=\"field.value\"\n\t\t\t\t\t:default-value=\"field.defaultValue\"\n\t\t\t\t\t:type=\"field.type\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:placeholder=\"field.placeholder\"\n\t\t\t\t\t:maxlength=\"field.maxlength\"\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\t\t\t\t<FileInputField v-for=\"field in advancedFileInputFields\"\n\t\t\t\t\t:key=\"field.name\"\n\t\t\t\t\t:name=\"field.name\"\n\t\t\t\t\t:mime-name=\"field.mimeName\"\n\t\t\t\t\t:mime-value.sync=\"field.mimeValue\"\n\t\t\t\t\t:default-mime-value=\"field.defaultMimeValue\"\n\t\t\t\t\t:display-name=\"field.displayName\"\n\t\t\t\t\t:aria-label=\"field.ariaLabel\"\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\t\t\t\t<CheckboxField :name=\"userThemingField.name\"\n\t\t\t\t\t:value=\"userThemingField.value\"\n\t\t\t\t\t:default-value=\"userThemingField.defaultValue\"\n\t\t\t\t\t:display-name=\"userThemingField.displayName\"\n\t\t\t\t\t:label=\"userThemingField.label\"\n\t\t\t\t\t:description=\"userThemingField.description\"\n\t\t\t\t\tdata-admin-theming-setting-disable-user-theming\n\t\t\t\t\t@update:theming=\"refreshStyles\" />\n\t\t\t\t<a v-if=\"!canThemeIcons\"\n\t\t\t\t\t:href=\"docUrlIcons\"\n\t\t\t\t\trel=\"noreferrer noopener\">\n\t\t\t\t\t<em>{{ t('theming', 'Install the ImageMagick PHP extension with support for SVG images to automatically generate favicons based on the uploaded logo and color.') }}</em>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</NcSettingsSection>\n\t\t<AppMenuSection :default-apps.sync=\"defaultApps\" />\n\t</section>\n</template>\n\n<script>\nimport { loadState } from '@nextcloud/initial-state'\nimport { refreshStyles } from './helpers/refreshStyles.js'\n\nimport NcNoteCard from '@nextcloud/vue/dist/Components/NcNoteCard.js'\nimport NcSettingsSection from '@nextcloud/vue/dist/Components/NcSettingsSection.js'\nimport CheckboxField from './components/admin/CheckboxField.vue'\nimport ColorPickerField from './components/admin/ColorPickerField.vue'\nimport FileInputField from './components/admin/FileInputField.vue'\nimport TextField from './components/admin/TextField.vue'\nimport AppMenuSection from './components/admin/AppMenuSection.vue'\n\nconst {\n\tdefaultBackgroundURL,\n\n\tbackgroundMime,\n\tbackgroundURL,\n\tbackgroundColor,\n\tcanThemeIcons,\n\tdocUrl,\n\tdocUrlIcons,\n\tfaviconMime,\n\tisThemable,\n\tlegalNoticeUrl,\n\tlogoheaderMime,\n\tlogoMime,\n\tname,\n\tnotThemableErrorMessage,\n\tprimaryColor,\n\tprivacyPolicyUrl,\n\tslogan,\n\turl,\n\tuserThemingDisabled,\n\tdefaultApps,\n} = loadState('theming', 'adminThemingParameters')\n\nconst textFields = [\n\t{\n\t\tname: 'name',\n\t\tvalue: name,\n\t\tdefaultValue: 'Nextcloud',\n\t\ttype: 'text',\n\t\tdisplayName: t('theming', 'Name'),\n\t\tplaceholder: t('theming', 'Name'),\n\t\tmaxlength: 250,\n\t},\n\t{\n\t\tname: 'url',\n\t\tvalue: url,\n\t\tdefaultValue: 'https://nextcloud.com',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Web link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n\t{\n\t\tname: 'slogan',\n\t\tvalue: slogan,\n\t\tdefaultValue: t('theming', 'a safe home for all your data'),\n\t\ttype: 'text',\n\t\tdisplayName: t('theming', 'Slogan'),\n\t\tplaceholder: t('theming', 'Slogan'),\n\t\tmaxlength: 500,\n\t},\n]\n\nconst primaryColorPickerField = {\n\tname: 'primary_color',\n\tvalue: primaryColor,\n\tdefaultValue: '#0082c9',\n\tdisplayName: t('theming', 'Primary color'),\n\tdescription: t('theming', 'The primary color is used for highlighting elements like important buttons. It might get slightly adjusted depending on the current color schema.'),\n}\n\nconst advancedTextFields = [\n\t{\n\t\tname: 'imprintUrl',\n\t\tvalue: legalNoticeUrl,\n\t\tdefaultValue: '',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Legal notice link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n\t{\n\t\tname: 'privacyUrl',\n\t\tvalue: privacyPolicyUrl,\n\t\tdefaultValue: '',\n\t\ttype: 'url',\n\t\tdisplayName: t('theming', 'Privacy policy link'),\n\t\tplaceholder: 'https://…',\n\t\tmaxlength: 500,\n\t},\n]\n\nconst advancedFileInputFields = [\n\t{\n\t\tname: 'logoheader',\n\t\tmimeName: 'logoheaderMime',\n\t\tmimeValue: logoheaderMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Header logo'),\n\t\tariaLabel: t('theming', 'Upload new header logo'),\n\t},\n\t{\n\t\tname: 'favicon',\n\t\tmimeName: 'faviconMime',\n\t\tmimeValue: faviconMime,\n\t\tdefaultMimeValue: '',\n\t\tdisplayName: t('theming', 'Favicon'),\n\t\tariaLabel: t('theming', 'Upload new favicon'),\n\t},\n]\n\nconst userThemingField = {\n\tname: 'disable-user-theming',\n\tvalue: userThemingDisabled,\n\tdefaultValue: false,\n\tdisplayName: t('theming', 'User settings'),\n\tlabel: t('theming', 'Disable user theming'),\n\tdescription: t('theming', 'Although you can select and customize your instance, users can change their background and colors. If you want to enforce your customization, you can toggle this on.'),\n}\n\nexport default {\n\tname: 'AdminTheming',\n\n\tcomponents: {\n\t\tAppMenuSection,\n\t\tCheckboxField,\n\t\tColorPickerField,\n\t\tFileInputField,\n\t\tNcNoteCard,\n\t\tNcSettingsSection,\n\t\tTextField,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tbackgroundMime,\n\t\t\tbackgroundURL,\n\t\t\tbackgroundColor,\n\t\t\tdefaultBackgroundColor: '#0069c3',\n\n\t\t\tlogoMime,\n\n\t\t\ttextFields,\n\t\t\tprimaryColorPickerField,\n\t\t\tadvancedTextFields,\n\t\t\tadvancedFileInputFields,\n\t\t\tuserThemingField,\n\t\t\tdefaultApps,\n\n\t\t\tcanThemeIcons,\n\t\t\tdocUrl,\n\t\t\tdocUrlIcons,\n\t\t\tisThemable,\n\t\t\tnotThemableErrorMessage,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcssBackgroundImage() {\n\t\t\tif (this.backgroundURL) {\n\t\t\t\treturn `url('${this.backgroundURL}')`\n\t\t\t}\n\t\t\treturn 'unset'\n\t\t},\n\t},\n\n\twatch: {\n\t\tbackgroundMime() {\n\t\t\tif (this.backgroundMime === '') {\n\t\t\t\t// Reset URL to default value for preview\n\t\t\t\tthis.backgroundURL = defaultBackgroundURL\n\t\t\t} else if (this.backgroundMime === 'backgroundColor') {\n\t\t\t\t// Reset URL to empty image when only color is configured\n\t\t\t\tthis.backgroundURL = ''\n\t\t\t}\n\t\t},\n\t\tasync backgroundURL() {\n\t\t\t// When the background is changed we need to emulate the background color change\n\t\t\tif (this.backgroundURL !== '') {\n\t\t\t\tconst color = await this.calculateDefaultBackground()\n\t\t\t\tthis.defaultBackgroundColor = color\n\t\t\t\tthis.backgroundColor = color\n\t\t\t}\n\t\t},\n\t},\n\n\tasync mounted() {\n\t\tif (this.backgroundURL) {\n\t\t\tthis.defaultBackgroundColor = await this.calculateDefaultBackground()\n\t\t}\n\t},\n\n\tmethods: {\n\t\trefreshStyles,\n\n\t\t/**\n\t\t * Same as on server - if a user uploads an image the mean color will be set as the background color\n\t\t */\n\t\tcalculateDefaultBackground() {\n\t\t\tconst toHex = (num) => `00${num.toString(16)}`.slice(-2)\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst img = new Image()\n\t\t\t\timg.src = this.backgroundURL\n\t\t\t\timg.onload = () => {\n\t\t\t\t\tconst context = document.createElement('canvas').getContext('2d')\n\t\t\t\t\tcontext.imageSmoothingEnabled = true\n\t\t\t\t\tcontext.drawImage(img, 0, 0, 1, 1)\n\t\t\t\t\tresolve('#' + [...context.getImageData(0, 0, 1, 1).data.slice(0, 3)].map(toHex).join(''))\n\t\t\t\t}\n\t\t\t\timg.onerror = reject\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.admin-theming,\n.admin-theming-advanced {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px 0;\n}\n\n.admin-theming {\n\t&__preview {\n\t\twidth: 230px;\n\t\theight: 140px;\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\t\ttext-align: center;\n\t\tmargin-top: 10px;\n\t\tbackground-color: v-bind('backgroundColor');\n\t\tbackground-image: v-bind('cssBackgroundImage');\n\n\t\t&-logo {\n\t\t\twidth: 20%;\n\t\t\theight: 20%;\n\t\t\tmargin-top: 20px;\n\t\t\tdisplay: inline-block;\n\t\t\tbackground-size: contain;\n\t\t\tbackground-position: center;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-image: var(--image-logo, url('../../../core/img/logo/logo.svg'));\n\t\t}\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport Vue from 'vue'\n\nimport App from './AdminTheming.vue'\n\nVue.prototype.OC = OC\nVue.prototype.t = t\n\nconst View = Vue.extend(App)\nconst theming = new View()\ntheming.$mount('#admin-theming')\n"],"names":["styleRefreshFields","FieldMixin","TextValueMixin","value","url","generateUrl","valueToPost","axios","e","data","_a","_sfc_main","NcCheckboxRadioSwitch","NcNoteCard","__default__","NcButton","NcColorPicker","NcLoadingIcon","Undo","Palette","colord","debounce","allowedMimeTypes","loadState","Delete","Upload","file","formData","NcTextField","_sfc_main$1","defineComponent","AppOrderSelector","NcSelect","NcSettingsSection","id","props","emit","hasCustomDefaultApp","computed","checked","selectedApps","allApps","name","icon","app","saveSetting","showError","t","key","defaultBackgroundURL","backgroundMime","backgroundURL","backgroundColor","canThemeIcons","docUrl","docUrlIcons","faviconMime","isThemable","legalNoticeUrl","logoheaderMime","logoMime","notThemableErrorMessage","primaryColor","privacyPolicyUrl","slogan","userThemingDisabled","defaultApps","textFields","primaryColorPickerField","advancedTextFields","advancedFileInputFields","userThemingField","AppMenuSection","CheckboxField","ColorPickerField","FileInputField","TextField","color","refreshStyles","toHex","num","resolve","reject","img","context","Vue","View","App","theming"],"mappings":"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"}