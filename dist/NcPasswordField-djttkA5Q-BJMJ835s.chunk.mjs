import{a as V,l as S,N as C,m as N,b as F}from"./string_decoder-CKkZVVJW.chunk.mjs";import{d as M,c as $}from"./index-Cvjfo1ma.chunk.mjs";import{f as j,j as q,k as z,m as c,u as v,n as H,p as I,q as m,s as h,g as L,i as r,c as O,o as U,v as A,w as f,x as D,a as E,y as l,z as G}from"./_plugin-vue_export-helper-sUpjG1-Y.chunk.mjs";import{N as J}from"./NcInputField-Bwsh2aHY-fSb6LlM4.chunk.mjs";j();const K=z({__name:"NcPasswordField",props:c({class:{},inputClass:{default:""},id:{},label:{},labelOutside:{type:Boolean},placeholder:{},showTrailingButton:{type:Boolean,default:!0},success:{type:Boolean},error:{type:Boolean},helperText:{},disabled:{type:Boolean},pill:{type:Boolean},checkPasswordStrength:{type:Boolean},minlength:{default:void 0},asText:{type:Boolean}},{modelValue:{default:""},modelModifiers:{},visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:c(["valid","invalid"],["update:modelValue","update:visible"]),setup(o,{expose:y,emit:w}){const s=v(o,"modelValue"),a=v(o,"visible"),t=o,d=w;H(s,M(B,500)),y({focus:_,select:k});const{password_policy:g}=V(),u=I("inputField"),i=m(""),n=m(),b=h(()=>{const e={...t};return delete e.checkPasswordStrength,delete e.minlength,delete e.asText,delete e.error,delete e.helperText,delete e.inputClass,delete e.success,e}),x=h(()=>t.minlength??(t.checkPasswordStrength?g?.minLength:void 0)??void 0);async function B(){if(t.checkPasswordStrength)try{const{data:e}=await $.post(L("apps/password_policy/api/v1/validate"),{password:s.value});if(n.value=e.ocs.data.passed,e.ocs.data.passed){i.value=r("Password is secure"),d("valid");return}i.value=e.ocs.data.reason,d("invalid")}catch(e){S.error("Password policy returned an error",{error:e})}}function T(){a.value=!a.value}function _(e){u.value.focus(e)}function k(){u.value.select()}return(e,p)=>(U(),O(J,G(b.value,{ref:"inputField",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=P=>s.value=P),error:e.error||n.value===!1,"helper-text":e.helperText||i.value,"input-class":[e.inputClass,{"password-field__input--secure-text":!a.value&&e.asText}],minlength:x.value,success:e.success||n.value===!0,"trailing-button-label":a.value?l(r)("Hide password"):l(r)("Show password"),type:a.value||e.asText?"text":"password",onTrailingButtonClick:T}),A({"trailing-button-icon":f(()=>[E(C,{path:a.value?l(N):l(F)},null,8,["path"])]),_:2},[e.$slots.icon?{name:"icon",fn:f(()=>[D(e.$slots,"icon",{},void 0,!0)]),key:"0"}:void 0]),1040,["modelValue","error","helper-text","input-class","minlength","success","trailing-button-label","type"]))}}),Y=q(K,[["__scopeId","data-v-b2684de6"]]);export{Y as N};
//# sourceMappingURL=NcPasswordField-djttkA5Q-BJMJ835s.chunk.mjs.map
