import{l as V,a as C,b as S}from"./logger-D3RVzcfQ-DSVJ3gnq.chunk.mjs";import{c as N}from"./index-Dzs73vcS.chunk.mjs";import{g as F}from"./index-Ma7sfat2.chunk.mjs";import{r as L,e as M,_ as $,b as q,a as n,N as z}from"./createElementId-DhjFt1I9-BQd-NSad.chunk.mjs";import{d as H}from"./index-6_gsQFyp.chunk.mjs";import{N as I}from"./NcInputField-o5OFv3z6-qWd789Yc.chunk.mjs";import{b as O,q as c,s as U,v as j,o as A,c as D,x as E,w as v,l as G,e as J,u as o,y as K,z as m,r as f,p as h}from"./runtime-dom.esm-bundler-BkLGB2hw.chunk.mjs";L(M);const Q=O({__name:"NcPasswordField",props:m({class:{},inputClass:{default:""},id:{},label:{},labelOutside:{type:Boolean},placeholder:{},showTrailingButton:{type:Boolean,default:!0},success:{type:Boolean},error:{type:Boolean},helperText:{},disabled:{type:Boolean},pill:{type:Boolean},checkPasswordStrength:{type:Boolean},minlength:{default:void 0},asText:{type:Boolean}},{modelValue:{default:""},modelModifiers:{},visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:m(["valid","invalid"],["update:modelValue","update:visible"]),setup(l,{expose:y,emit:w}){const s=c(l,"modelValue"),a=c(l,"visible"),t=l,d=w;U(s,H(B,500)),y({focus:_,select:P});const{password_policy:g}=F(),u=j("inputField"),r=f(""),i=f(),x=h(()=>{const e={...t};return delete e.checkPasswordStrength,delete e.minlength,delete e.asText,delete e.error,delete e.helperText,delete e.inputClass,delete e.success,e}),b=h(()=>t.minlength??(t.checkPasswordStrength?g?.minLength:void 0)??void 0);async function B(){if(t.checkPasswordStrength)try{const{data:e}=await N.post(q("apps/password_policy/api/v1/validate"),{password:s.value});if(i.value=e.ocs.data.passed,e.ocs.data.passed){r.value=n("Password is secure"),d("valid");return}r.value=e.ocs.data.reason,d("invalid")}catch(e){V.error("Password policy returned an error",{error:e})}}function T(){a.value=!a.value}function _(e){u.value.focus(e)}function P(){u.value.select()}return(e,p)=>(A(),D(I,K(x.value,{ref:"inputField",modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=k=>s.value=k),error:e.error||i.value===!1,helperText:e.helperText||r.value,inputClass:[e.inputClass,{"password-field__input--secure-text":!a.value&&e.asText}],minlength:b.value,success:e.success||i.value===!0,trailingButtonLabel:a.value?o(n)("Hide password"):o(n)("Show password"),type:a.value||e.asText?"text":"password",onTrailingButtonClick:T}),E({"trailing-button-icon":v(()=>[J(z,{path:a.value?o(C):o(S)},null,8,["path"])]),_:2},[e.$slots.icon?{name:"icon",fn:v(()=>[G(e.$slots,"icon",{},void 0,!0)]),key:"0"}:void 0]),1040,["modelValue","error","helperText","inputClass","minlength","success","trailingButtonLabel","type"]))}}),se=$(Q,[["__scopeId","data-v-00e75248"]]);export{se as N};
//# sourceMappingURL=NcPasswordField-uaMO2pdt-DK0F8rym.chunk.mjs.map
