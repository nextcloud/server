{"version":3,"file":"AuthMechanismRsa-CrbXl4DL.chunk.mjs","sources":["../build/frontend/apps/files_external/src/components/AddExternalStorageDialog/ConfigurationEntry.vue","../build/frontend/apps/files_external/src/views/AuthMechanismRsa.vue"],"sourcesContent":["<!--\n - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n -->\n\n<script setup lang=\"ts\">\nimport type { IConfigurationOption } from '../../types.ts'\n\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcPasswordField from '@nextcloud/vue/components/NcPasswordField'\nimport NcTextField from '@nextcloud/vue/components/NcTextField'\nimport { ConfigurationFlag, ConfigurationType } from '../../types.ts'\n\nconst value = defineModel<string | boolean>('modelValue', { default: '' })\n\ndefineProps<{\n\tconfigKey: string\n\tconfigOption: IConfigurationOption\n}>()\n</script>\n\n<template>\n\t<component\n\t\t:is=\"configOption.type === ConfigurationType.Password ? NcPasswordField : NcTextField\"\n\t\tv-if=\"configOption.type !== ConfigurationType.Boolean\"\n\t\tv-model=\"value\"\n\t\t:name=\"configKey\"\n\t\t:required=\"!(configOption.flags & ConfigurationFlag.Optional)\"\n\t\t:label=\"configOption.value\"\n\t\t:title=\"configOption.tooltip\" />\n\t<NcCheckboxRadioSwitch\n\t\tv-else\n\t\tv-model=\"value\"\n\t\ttype=\"switch\"\n\t\t:title=\"configOption.tooltip\">\n\t\t{{ configOption.value }}\n\t</NcCheckboxRadioSwitch>\n</template>\n","<!--\n - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n -->\n\n<script setup lang=\"ts\">\nimport type { IAuthMechanism } from '../types.ts'\n\nimport axios from '@nextcloud/axios'\nimport { showError } from '@nextcloud/dialogs'\nimport { t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport { ref, watch } from 'vue'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcSelect from '@nextcloud/vue/components/NcSelect'\nimport ConfigurationEntry from '../components/AddExternalStorageDialog/ConfigurationEntry.vue'\nimport { ConfigurationFlag } from '../types.ts'\nimport logger from '../utils/logger.ts'\n\nconst modelValue = defineModel<Record<string, string | boolean>>({ required: true })\n\ndefineProps<{\n\tauthMechanism: IAuthMechanism\n}>()\n\nconst keySize = ref<number>()\nwatch(keySize, () => {\n\tif (keySize.value) {\n\t\tmodelValue.value.private_key = ''\n\t\tmodelValue.value.public_key = ''\n\t}\n})\n\n/**\n * Generates a new RSA key pair and fills the corresponding configuration entries.\n */\nasync function generateKeys() {\n\ttry {\n\t\t// fallback to server-side key generation\n\t\tconst { data } = await axios.post(generateUrl('/apps/files_external/ajax/public_key.php'), {\n\t\t\tkeyLength: keySize.value,\n\t\t})\n\n\t\tmodelValue.value.private_key = data.data.private_key\n\t\tmodelValue.value.public_key = data.data.public_key\n\t} catch (error) {\n\t\tlogger.error('Error generating RSA key pair', { error })\n\t\tshowError(t('files_external', 'Error generating key pair'))\n\t}\n}\n</script>\n\n<template>\n\t<div>\n\t\t<ConfigurationEntry\n\t\t\tv-for=\"configOption, configKey in authMechanism.configuration\"\n\t\t\tv-show=\"!(configOption.flags & ConfigurationFlag.Hidden)\"\n\t\t\t:key=\"configOption.value\"\n\t\t\tv-model=\"modelValue[configKey]!\"\n\t\t\t:configKey=\"configKey\"\n\t\t\t:configOption=\"configOption\" />\n\n\t\t<NcSelect\n\t\t\tv-model=\"keySize\"\n\t\t\t:clearable=\"false\"\n\t\t\t:inputLabel=\"t('files_external', 'Key size')\"\n\t\t\t:options=\"[1024, 2048, 4096]\"\n\t\t\trequired />\n\n\t\t<NcButton\n\t\t\t:disabled=\"!keySize\"\n\t\t\twide\n\t\t\t@click=\"generateKeys\">\n\t\t\t{{ t('files_external', 'Generate keys') }}\n\t\t</NcButton>\n\t</div>\n</template>\n"],"names":["value","_useModel","__props","_unref","ConfigurationType","_createBlock","_resolveDynamicComponent","NcPasswordField","NcTextField","$event","ConfigurationFlag","NcCheckboxRadioSwitch","_createTextVNode","_toDisplayString","modelValue","keySize","ref","watch","generateKeys","data","axios","generateUrl","error","logger","showError","t","_createElementBlock","_openBlock","_Fragment","configOption","configKey","ConfigurationEntry","_vShow","_createVNode","NcSelect","NcButton"],"mappings":"6+BAaA,MAAMA,EAAQC,EAA6BC,EAAC,YAA6B,eAWjEA,EAAA,aAAa,OAASC,EAAAC,CAAA,EAAkB,aAF/CC,EAOiCC,EAN3BJ,EAAA,aAAa,OAASC,EAAAC,CAAA,EAAkB,SAAWD,EAAAI,CAAA,EAAkBJ,EAAAK,CAAA,CAAW,EAAA,kBAE5ER,EAAA,2CAAAA,EAAK,MAAAS,GACb,KAAMP,EAAA,UACN,WAAYA,EAAA,aAAa,MAAQC,EAAAO,CAAA,EAAkB,UACnD,MAAOR,EAAA,aAAa,MACpB,MAAOA,EAAA,aAAa,OAAA,iEACtBG,EAMwBF,EAAAQ,CAAA,EAAA,kBAJdX,EAAA,2CAAAA,EAAK,MAAAS,GACd,KAAK,SACJ,MAAOP,EAAA,aAAa,OAAA,aACrB,IAAwB,CAArBU,EAAAC,EAAAX,EAAA,aAAa,KAAK,EAAA,CAAA,CAAA,mLChBvB,MAAMY,EAAab,EAA6CC,EAAA,YAAmB,EAM7Ea,EAAUC,EAAA,EAChBC,EAAMF,EAAS,IAAM,CAChBA,EAAQ,QACXD,EAAW,MAAM,YAAc,GAC/BA,EAAW,MAAM,WAAa,GAEhC,CAAC,EAKD,eAAeI,GAAe,CAC7B,GAAI,CAEH,KAAM,CAAE,KAAAC,GAAS,MAAMC,EAAM,KAAKC,EAAY,0CAA0C,EAAG,CAC1F,UAAWN,EAAQ,KAAA,CACnB,EAEDD,EAAW,MAAM,YAAcK,EAAK,KAAK,YACzCL,EAAW,MAAM,WAAaK,EAAK,KAAK,UACzC,OAASG,EAAO,CACfC,EAAO,MAAM,gCAAiC,CAAE,MAAAD,CAAA,CAAO,EACvDE,EAAUC,EAAE,iBAAkB,2BAA2B,CAAC,CAC3D,CACD,mBAICC,EAsBM,MAAA,KAAA,EArBLC,EAAA,EAAA,EAAAD,EAMgCE,SALG1B,EAAA,cAAc,cAAa,CAAtD2B,EAAcC,WADtBzB,EAMgC0B,EAAA,CAH9B,IAAKF,EAAa,MACV,WAAAf,EAAA,MAAWgB,CAAS,EAApB,sBAAArB,GAAAK,EAAA,MAAWgB,CAAS,EAAArB,EAC5B,UAAAqB,EACA,aAAAD,CAAA,4EAJS,CAAAG,EAAA,EAAAH,EAAa,MAAQ1B,EAAAO,CAAA,EAAkB,OAAM,CAAA,UAMxDuB,EAKY9B,EAAA+B,CAAA,EAAA,YAJFnB,EAAA,2CAAAA,EAAO,MAAAN,GACf,UAAW,GACX,WAAYN,EAAAsB,CAAA,EAAC,iBAAA,UAAA,EACb,QAAS,CAAA,KAAA,KAAA,IAAA,EACV,SAAA,EAAA,sCAEDQ,EAKW9B,EAAAgC,CAAA,EAAA,CAJT,UAAWpB,EAAA,MACZ,KAAA,GACC,QAAOG,CAAA,aACR,IAA0C,KAAvCf,EAAAsB,CAAA,EAAC,iBAAA,eAAA,CAAA,EAAA,CAAA,CAAA"}