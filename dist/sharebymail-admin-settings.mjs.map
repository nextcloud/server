{"version":3,"file":"sharebymail-admin-settings.mjs","sources":["../build/frontend/apps/sharebymail/src/logger.ts","../build/frontend/apps/sharebymail/src/components/AdminSettings.vue","../build/frontend/apps/sharebymail/src/settings-admin.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nexport const logger = getLoggerBuilder()\n\t.detectLogLevel()\n\t.setApp('sharebymail')\n\t.build()\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcSettingsSection\n\t\t:name=\"t('sharebymail', 'Share by mail')\"\n\t\t:description=\"t('sharebymail', 'Allows people to share a personalized link to a file or folder by putting in an email address.')\">\n\t\t<NcCheckboxRadioSwitch v-model=\"sendPasswordMail\" type=\"switch\">\n\t\t\t{{ t('sharebymail', 'Send password by mail') }}\n\t\t</NcCheckboxRadioSwitch>\n\n\t\t<NcCheckboxRadioSwitch v-model=\"replyToInitiator\" type=\"switch\">\n\t\t\t{{ t('sharebymail', 'Reply to initiator') }}\n\t\t</NcCheckboxRadioSwitch>\n\t</NcSettingsSection>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { showError } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { t } from '@nextcloud/l10n'\nimport { confirmPassword } from '@nextcloud/password-confirmation'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcSettingsSection from '@nextcloud/vue/components/NcSettingsSection'\nimport { logger } from '../logger.ts'\n\nexport default {\n\tname: 'AdminSettings',\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSettingsSection,\n\t},\n\n\tsetup() {\n\t\treturn { t }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsendPasswordMail: loadState('sharebymail', 'sendPasswordMail'),\n\t\t\treplyToInitiator: loadState('sharebymail', 'replyToInitiator'),\n\t\t}\n\t},\n\n\twatch: {\n\t\tsendPasswordMail(newValue) {\n\t\t\tthis.update('sendpasswordmail', newValue)\n\t\t},\n\n\t\treplyToInitiator(newValue) {\n\t\t\tthis.update('replyToInitiator', newValue)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync update(key, value) {\n\t\t\tawait confirmPassword()\n\t\t\tconst url = generateOcsUrl('/apps/provisioning_api/api/v1/config/apps/{appId}/{key}', {\n\t\t\t\tappId: 'sharebymail',\n\t\t\t\tkey,\n\t\t\t})\n\t\t\tconst stringValue = value ? 'yes' : 'no'\n\t\t\ttry {\n\t\t\t\tconst { data } = await axios.post(url, {\n\t\t\t\t\tvalue: stringValue,\n\t\t\t\t})\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\tstatus: data.ocs?.meta?.status,\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\terrorMessage: t('sharebymail', 'Unable to update share by mail config'),\n\t\t\t\t\terror: e,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tasync handleResponse({ status, errorMessage, error }) {\n\t\t\tif (status !== 'ok') {\n\t\t\t\tshowError(errorMessage)\n\t\t\t\tlogger.error(errorMessage, { error })\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { createApp } from 'vue'\nimport AdminSettings from './components/AdminSettings.vue'\n\nconst app = createApp(AdminSettings)\napp.mount('#vue-admin-sharebymail')\n"],"names":["logger","getLoggerBuilder","_sfc_main","NcCheckboxRadioSwitch","NcSettingsSection","t","loadState","newValue","key","value","confirmPassword","url","generateOcsUrl","stringValue","data","axios","e","status","errorMessage","error","showError","_createBlock","_component_NcSettingsSection","$setup","_createVNode","_component_NcCheckboxRadioSwitch","$data","$event","app","createApp","AdminSettings"],"mappings":"gmBAOO,MAAMA,EAASC,IACpB,eAAA,EACA,OAAO,aAAa,EACpB,MAAA,ECoBGC,EAAU,CACd,KAAM,gBACN,WAAY,CACX,sBAAAC,EACA,kBAAAC,GAGD,OAAQ,CACP,MAAO,GAAEC,CAAA,CACV,EAEA,MAAO,CACN,MAAO,CACN,iBAAkBC,EAAU,cAAe,kBAAkB,EAC7D,iBAAkBA,EAAU,cAAe,kBAAkB,CAC9D,CACD,EAEA,MAAO,CACN,iBAAiBC,EAAU,CAC1B,KAAK,OAAO,mBAAoBA,CAAQ,CACzC,EAEA,iBAAiBA,EAAU,CAC1B,KAAK,OAAO,mBAAoBA,CAAQ,CACzC,GAGD,QAAS,CACR,MAAM,OAAOC,EAAKC,EAAO,CACxB,MAAMC,EAAe,EACrB,MAAMC,EAAMC,EAAe,0DAA2D,CACrF,MAAO,cACP,IAAAJ,EACA,EACKK,EAAcJ,EAAQ,MAAQ,KACpC,GAAI,CACH,KAAM,CAAE,KAAAK,CAAG,EAAM,MAAMC,EAAM,KAAKJ,EAAK,CACtC,MAAOE,EACP,EACD,KAAK,eAAe,CACnB,OAAQC,EAAK,KAAK,MAAM,OACxB,CACF,OAASE,EAAG,CACX,KAAK,eAAe,CACnB,aAAcX,EAAE,cAAe,uCAAuC,EACtE,MAAOW,EACP,CACF,CACD,EAEA,MAAM,eAAe,CAAE,OAAAC,EAAQ,aAAAC,EAAc,MAAAC,CAAI,EAAK,CACjDF,IAAW,OACdG,EAAUF,CAAY,EACtBlB,EAAO,MAAMkB,EAAc,CAAE,MAAAC,EAAO,EAEtC,EAEF,iGAlFCE,EAUoBC,EAAA,CATlB,KAAMC,EAAA,EAAC,cAAA,eAAA,EACP,YAAaA,EAAA,EAAC,cAAA,gGAAA,cACf,IAEwB,CAFxBC,EAEwBC,EAAA,YAFQC,EAAA,sDAAAA,EAAA,iBAAgBC,GAAE,KAAK,qBACtD,IAA+C,KAA5CJ,EAAA,EAAC,cAAA,uBAAA,CAAA,EAAA,CAAA,2BAGLC,EAEwBC,EAAA,YAFQC,EAAA,sDAAAA,EAAA,iBAAgBC,GAAE,KAAK,qBACtD,IAA4C,KAAzCJ,EAAA,EAAC,cAAA,oBAAA,CAAA,EAAA,CAAA,wFCNDK,EAAMC,EAAUC,CAAa,EACnCF,EAAI,MAAM,wBAAwB"}