"use strict";(globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[]).push([[7471,9396],{23040(t,e,n){n.d(e,{A:()=>i});var s=n(71354),a=n.n(s),r=n(76314),o=n.n(r)()(a());o.push([t.id,"\n._updater__appsList_Yz6nW {\n\tlist-style-type: disc;\n\tmargin-inline-start: var(--default-clickable-area);\n}\n._updater__updateButton_Mwnuk {\n\tmargin-inline: auto;\n\tmargin-block: 1rem;\n}\n._updater__messageList_qo5F5 {\n\tmax-height: 50vh;\n\toverflow: visible scroll;\n\tpadding-inline-start: var(--default-grid-baseline);\n}\n._updater__message_ySGY4 {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: start;\n\tgap: var(--default-grid-baseline);\n}\n._updater__messageText_woqJ3 {\n\ttext-align: start;\n}\n._updater__messageIcon_success_DY21y {\n\tcolor: var(--color-element-success);\n}\n._updater__messageIcon_info_Rx8RF {\n\tcolor: var(--color-element-info);\n}\n._updater__messageIcon_error_Pu5Pl {\n\tcolor: var(--color-element-error);\n}\n._updater__messageIcon_warning_t7k_k {\n\tcolor: var(--color-element-warning);\n}\n._updater__transition_active_VFUFS {\n\ttransition: all var(--animation-slow);\n}\n._updater__transition_collapsed_N3hdT {\n\topacity: 0;\n\tmax-height: 0px;\n}\n","",{version:3,sources:["webpack://./core/src/views/UpdaterAdmin.vue"],names:[],mappings:";AAyQA;CACA,qBAAA;CACA,kDAAA;AACA;AAEA;CACA,mBAAA;CACA,kBAAA;AACA;AAEA;CACA,gBAAA;CACA,wBAAA;CACA,kDAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,sBAAA;CACA,iCAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,mCAAA;AACA;AAEA;CACA,gCAAA;AACA;AAEA;CACA,iCAAA;AACA;AAEA;CACA,mCAAA;AACA;AAEA;CACA,qCAAA;AACA;AAEA;CACA,UAAA;CACA,eAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<script setup lang=\"ts\">\nimport {\n\tmdiAlertCircleOutline,\n\tmdiCheckCircleOutline,\n\tmdiChevronDown,\n\tmdiChevronUp,\n\tmdiCloseCircleOutline,\n\tmdiInformationOutline,\n} from '@mdi/js'\nimport { loadState } from '@nextcloud/initial-state'\nimport { t } from '@nextcloud/l10n'\nimport { generateFilePath } from '@nextcloud/router'\nimport { NcButton, NcIconSvgWrapper, NcLoadingIcon } from '@nextcloud/vue'\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport NcGuestContent from '@nextcloud/vue/components/NcGuestContent'\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard'\nimport OCEventSource from '../OC/eventsource.js'\n\nconst updateInfo = loadState<{\n\tappsToUpgrade: { id: string, name: string, version: string, oldVersion: string }[]\n\tincompatibleAppsList: { id: string, name: string }[]\n\tisAppsOnlyUpgrade: boolean\n\toldTheme: string | null\n\tproductName: string\n\tversion: string\n}>('core', 'updateInfo')\n\nconst isShowingDetails = ref(false)\nconst isUpdateRunning = ref(false)\nconst isUpdateDone = ref(false)\n\nconst messages = ref<{ message: string, type: string }[]>([])\nconst wasSuccessfull = computed(() => messages.value.every((msg) => msg.type === 'success' || msg.type === 'notice'))\nconst hasErrors = computed(() => messages.value.some((msg) => msg.type === 'error' || msg.type === 'failure'))\nconst resultIcon = computed(() => wasSuccessfull.value ? mdiCheckCircleOutline : (hasErrors.value ? mdiCloseCircleOutline : mdiAlertCircleOutline))\n\nconst statusMessage = computed(() => {\n\tif (isUpdateDone.value) {\n\t\tif (!wasSuccessfull.value) {\n\t\t\treturn t('core', 'The update completed with warnings. Please check the details for more information.')\n\t\t} else {\n\t\t\treturn t('core', 'The update completed successfully.')\n\t\t}\n\t}\n\treturn messages.value.at(-1)?.message || t('core', 'Preparing update…')\n})\n\nconst redirectCountdown = ref(6)\nconst redirectMessage = computed(() => {\n\tif (!isUpdateDone.value || !wasSuccessfull.value) {\n\t\treturn ''\n\t}\n\n\treturn t('core', 'You will be redirected to {productName} in {count} seconds.', { productName: updateInfo.productName, count: redirectCountdown.value })\n})\n\nonMounted(() => window.addEventListener('beforeunload', onUnload))\nonUnmounted(() => window.removeEventListener('beforeunload', onUnload))\n\n/**\n * Get the status icon for a given severity\n *\n * @param type - The severity\n */\nfunction getSeverityIcon(type: string) {\n\tswitch (type) {\n\t\tcase 'success':\n\t\t\treturn mdiCheckCircleOutline\n\t\tcase 'notice':\n\t\t\treturn mdiInformationOutline\n\t\tcase 'warning':\n\t\t\treturn mdiAlertCircleOutline\n\t\tcase 'error':\n\t\tcase 'failure':\n\t\t\treturn mdiCloseCircleOutline\n\t\tdefault:\n\t\t\treturn mdiInformationOutline\n\t}\n}\n\n/**\n * Start the update process\n */\nasync function onStartUpdate() {\n\tif (isUpdateRunning.value || isUpdateDone.value) {\n\t\treturn\n\t}\n\n\tisUpdateRunning.value = true\n\tconst eventSource = new OCEventSource(generateFilePath('core', '', 'ajax/update.php'))\n\teventSource.listen('success', (message) => {\n\t\tmessages.value.push({ message, type: 'success' })\n\t})\n\teventSource.listen('notice', (message) => {\n\t\tmessages.value.push({ message, type: 'notice' })\n\t})\n\teventSource.listen('error', (message) => {\n\t\tmessages.value.push({ message, type: 'error' })\n\t\tisUpdateRunning.value = false\n\t\tisUpdateDone.value = true\n\t\teventSource.close()\n\t})\n\teventSource.listen('failure', (message) => {\n\t\tmessages.value.push({ message, type: 'failure' })\n\t})\n\teventSource.listen('done', () => {\n\t\tisUpdateRunning.value = false\n\t\tisUpdateDone.value = true\n\t\teventSource.close()\n\t\tupdateCountdown()\n\t})\n}\n\n/**\n * Update the countdown for the redirect\n */\nfunction updateCountdown() {\n\tif (hasErrors.value || !wasSuccessfull.value) {\n\t\treturn\n\t}\n\n\tif (--redirectCountdown.value > 0) {\n\t\twindow.setTimeout(updateCountdown, 1000)\n\t} else {\n\t\treloadPage()\n\t}\n}\n\n/**\n * Handle the beforeunload event to warn the user if an update is running.\n *\n * @param event - The beforeunload event object.\n */\nfunction onUnload(event: BeforeUnloadEvent) {\n\tif (isUpdateRunning.value) {\n\t\tevent.preventDefault()\n\t\tevent.returnValue = t('core', 'The update is in progress, leaving this page might interrupt the process in some environments.')\n\t}\n}\n\n/**\n * Reload the page\n */\nfunction reloadPage() {\n\twindow.location.reload()\n}\n<\/script>\n\n<template>\n\t<NcGuestContent>\n\t\t<h2>\n\t\t\t{{ updateInfo.isAppsOnlyUpgrade\n\t\t\t\t? t('core', 'App update required')\n\t\t\t\t: t('core', '{productName} will be updated to version {version}', { productName: updateInfo.productName, version: updateInfo.version }) }}\n\t\t</h2>\n\n\t\t<NcNoteCard v-if=\"!!updateInfo.oldTheme\" type=\"info\">\n\t\t\t{{ t('core', 'The theme {oldTheme} has been disabled.', { oldTheme: updateInfo.oldTheme }) }}\n\t\t</NcNoteCard>\n\n\t\t<NcNoteCard v-if=\"updateInfo.incompatibleAppsList.length\" type=\"warning\">\n\t\t\t{{ t('core', 'These incompatible apps will be disabled:') }}\n\t\t\t<ul :aria-label=\"t('core', 'Incompatible apps')\" :class=\"$style.updater__appsList\">\n\t\t\t\t<li v-for=\"app of updateInfo.incompatibleAppsList\" :key=\"'app-disable-' + app.id\">\n\t\t\t\t\t{{ app.name }} ({{ app.id }})\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</NcNoteCard>\n\n\t\t<NcNoteCard v-if=\"updateInfo.incompatibleAppsList.length\" type=\"info\">\n\t\t\t{{ t('core', 'These apps will be updated:') }}\n\t\t\t<ul :aria-label=\"t('core', 'Apps to update')\" :class=\"$style.updater__appsList\">\n\t\t\t\t<li v-for=\"app of updateInfo.appsToUpgrade\" :key=\"'app-update-' + app.id\">\n\t\t\t\t\t{{ t('core', '{app} from {oldVersion} to {version}', { app: `${app.name} (${app.id})`, oldVersion: app.oldVersion, version: app.version }) }}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</NcNoteCard>\n\n\t\t<p>\n\t\t\t<strong>{{ t('core', 'Please make sure that the database, the config folder and the data folder have been backed up before proceeding.') }}</strong>\n\t\t\t<br>\n\t\t\t{{ t('core', 'To avoid timeouts with larger installations, you can instead run the following command from your installation directory:') }}\n\t\t\t<pre>./occ upgrade</pre>\n\t\t</p>\n\n\t\t<NcButton\n\t\t\tv-if=\"!isUpdateRunning && !isUpdateDone\"\n\t\t\t:class=\"$style.updater__updateButton\"\n\t\t\tvariant=\"primary\"\n\t\t\t@click=\"onStartUpdate\">\n\t\t\t{{ t('core', 'Start update') }}\n\t\t</NcButton>\n\t\t<NcButton\n\t\t\tv-else\n\t\t\t:class=\"$style.updater__updateButton\"\n\t\t\t:disabled=\"isUpdateRunning\"\n\t\t\tvariant=\"primary\"\n\t\t\t@click=\"reloadPage\">\n\t\t\t{{ t('core', 'Continue to {productName}', { productName: updateInfo.productName }) }}\n\t\t</NcButton>\n\n\t\t<div v-if=\"isUpdateRunning || isUpdateDone\">\n\t\t\t<h2>{{ t('core', 'Update to {version}', { version: updateInfo.version }) }}</h2>\n\n\t\t\t<NcLoadingIcon v-if=\"isUpdateRunning\" />\n\t\t\t<NcIconSvgWrapper\n\t\t\t\tv-else\n\t\t\t\t:path=\"resultIcon\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t[$style.updater__messageIcon_success]: wasSuccessfull,\n\t\t\t\t\t[$style.updater__messageIcon_error]: hasErrors && !wasSuccessfull,\n\t\t\t\t\t[$style.updater__messageIcon_warning]: !hasErrors && !wasSuccessfull,\n\t\t\t\t}\" />\n\t\t\t<div aria-live=\"polite\">\n\t\t\t\t<em>{{ statusMessage }}</em><br>\n\t\t\t\t<span v-if=\"redirectMessage\">{{ redirectMessage }}</span>\n\t\t\t</div>\n\n\t\t\t<NcButton\n\t\t\t\taria-controlls=\"core-update-details\"\n\t\t\t\t:aria-expanded=\"isShowingDetails\"\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t@click=\"isShowingDetails = !isShowingDetails\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper\n\t\t\t\t\t\t:path=\"isShowingDetails ? mdiChevronUp : mdiChevronDown\" />\n\t\t\t\t</template>\n\t\t\t\t{{ isShowingDetails ? t('core', 'Hide details') : t('core', 'Show details') }}\n\t\t\t</NcButton>\n\t\t\t<Transition\n\t\t\t\t:enter-active-class=\"$style.updater__transition_active\"\n\t\t\t\t:leave-active-class=\"$style.updater__transition_active\"\n\t\t\t\t:leave-to-class=\"$style.updater__transition_collapsed\"\n\t\t\t\t:enter-class=\"$style.updater__transition_collapsed\">\n\t\t\t\t<ul\n\t\t\t\t\tv-show=\"isShowingDetails\"\n\t\t\t\t\tid=\"core-update-details\"\n\t\t\t\t\t:aria-label=\"t('core', 'Update details')\"\n\t\t\t\t\t:class=\"$style.updater__messageList\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"{ message, type } of messages\"\n\t\t\t\t\t\t:key=\"message\"\n\t\t\t\t\t\t:class=\"$style.updater__message\">\n\t\t\t\t\t\t<NcIconSvgWrapper\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t[$style.updater__messageIcon_error]: type === 'error' || type === 'failure',\n\t\t\t\t\t\t\t\t[$style.updater__messageIcon_info]: type === 'notice',\n\t\t\t\t\t\t\t\t[$style.updater__messageIcon_success]: type === 'success',\n\t\t\t\t\t\t\t\t[$style.updater__messageIcon_warning]: type === 'warning',\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t:path=\"getSeverityIcon(type)\" />\n\t\t\t\t\t\t<span :class=\"$style.updater__messageText\">{{ message }}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</Transition>\n\t\t</div>\n\t</NcGuestContent>\n</template>\n\n<style module>\n.updater__appsList {\n\tlist-style-type: disc;\n\tmargin-inline-start: var(--default-clickable-area);\n}\n\n.updater__updateButton {\n\tmargin-inline: auto;\n\tmargin-block: 1rem;\n}\n\n.updater__messageList {\n\tmax-height: 50vh;\n\toverflow: visible scroll;\n\tpadding-inline-start: var(--default-grid-baseline);\n}\n\n.updater__message {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: start;\n\tgap: var(--default-grid-baseline);\n}\n\n.updater__messageText {\n\ttext-align: start;\n}\n\n.updater__messageIcon_success {\n\tcolor: var(--color-element-success);\n}\n\n.updater__messageIcon_info {\n\tcolor: var(--color-element-info);\n}\n\n.updater__messageIcon_error {\n\tcolor: var(--color-element-error);\n}\n\n.updater__messageIcon_warning {\n\tcolor: var(--color-element-warning);\n}\n\n.updater__transition_active {\n\ttransition: all var(--animation-slow);\n}\n\n.updater__transition_collapsed {\n\topacity: 0;\n\tmax-height: 0px;\n}\n</style>\n"],sourceRoot:""}]),o.locals={updater__appsList:"_updater__appsList_Yz6nW",updater__updateButton:"_updater__updateButton_Mwnuk",updater__messageList:"_updater__messageList_qo5F5",updater__message:"_updater__message_ySGY4",updater__messageText:"_updater__messageText_woqJ3",updater__messageIcon_success:"_updater__messageIcon_success_DY21y",updater__messageIcon_info:"_updater__messageIcon_info_Rx8RF",updater__messageIcon_error:"_updater__messageIcon_error_Pu5Pl",updater__messageIcon_warning:"_updater__messageIcon_warning_t7k_k",updater__transition_active:"_updater__transition_active_VFUFS",updater__transition_collapsed:"_updater__transition_collapsed_N3hdT"};const i=o},31098(t,e,n){n.r(e),n.d(e,{default:()=>ve});var s=n(85471),a=n(9165),r=n(81222),o=n(53334),i=n(63814),l=n(950),c=n(43988),u=n(61744),p=n(78928),d=n(42610),_=n(57908),m=n(64426),g=n(59915),v=n(68166),f=n(15502),h=n(71711),A=n(25878),N=n(85407),y=n(47611),w=n(10363),C=n(282),I=n(78009),S=n(54048),b=n(88486),k=n(27345),U=n(49595),x=n(31866),L=n(70036),T=n(44031),D=n(542),B=n(94012),$=n(93651),E=n(77834),P=n(91019),R=n(50017),O=n(60258),F=n(22258),M=n(66865),W=n(17067),G=n(10211),V=n(52631),X=n(73148),q=n(81621),Y=n(94294),j=n(93314),z=n(8054),K=n(99016),H=n(83358),J=n(90429),Z=n(12318),Q=n(46173),tt=n(44025),et=n(92257),nt=n(48198),st=n(59668),at=n(18343),rt=n(83194),ot=n(50481),it=n(42507),lt=n(85646),ct=n(71565),ut=n(49975),pt=n(17848),dt=n(99925),_t=n(66768),mt=n(8633),gt=n(97398),vt=n(51550),ft=n(63195),ht=n(77082),At=n(48191),Nt=n(77462),yt=n(34962),wt=n(38159),Ct=n(88289),It=n(99759),St=n(371),bt=n(22983),kt=n(71912),Ut=n(35290),xt=n(1938),Lt=n(1357),Tt=n(81974),Dt=n(36079),Bt=n(67582),$t=(n(21777),n(19051),n(65139),n(52781),n(3168),n(63121)),Et=n(87059),Pt=n(40959),Rt=(n(61338),n(71639)),Ot=n(4258),Ft=n(29586),Mt=n(684),Wt=n(61618),Gt=n(62179),Vt=n(25771),Xt=n(8256),qt=n(19234),Yt=n(5843),jt=n(48748),zt=n(23610),Kt=(n(55581),n(94205),n(95462),n(23020),n(53429),n(23739),n(16343),n(29928),n(64660),n(18547),n(20511)),Ht=n(69885),Jt=(n(59656),n(75105),n(92471),n(16406),n(2508));function Zt(t,e){let n,s,a="";if(this.typelessListeners=[],this.closed=!1,this.listeners={},e)for(n in e)a+=n+"="+encodeURIComponent(e[n])+"&";if(a+="requesttoken="+encodeURIComponent(document.head.dataset.requesttoken),this.useFallBack||"undefined"==typeof EventSource){const e="oc_eventsource_iframe_"+Zt.iframeCount;Zt.fallBackSources[Zt.iframeCount]=this;const n=document.createElement("iframe");n.id=e,n.style.display="none",s="&",-1===t.indexOf("?")&&(s="?"),n.src=t+s+"fallback=true&fallback_id="+Zt.iframeCount+"&"+a,this.iframe=n,document.body.appendChild(this.iframe),this.useFallBack=!0,Zt.iframeCount++}else s="&",-1===t.indexOf("?")&&(s="?"),this.source=new EventSource(t+s+a),this.source.onmessage=function(t){for(let e=0;e<this.typelessListeners.length;e++)this.typelessListeners[e](JSON.parse(t.data))}.bind(this);this.listen("__internal__",function(t){"close"===t&&this.close()}.bind(this))}l.N,c.N,u.A,p.N,d.N,_.A,m.N,g.A,f.A,h.A,A.N,v.N,N.N,y.A,w.A,C.N,I.N,S.A,b.N,k.A,U.N,x.N,L.N,T.N,D.A,B.N,$.N,E.N,E.N,P.N,R.N,O.A,F.N,M.A,W.N,Bt.N,G.N,V.N,X.N,q.N,Y.N,j.N,z.N,K.N,H.N,J.N,Z.N,Q.N,tt.N,et.default,nt.A,st.N,at.N,rt.A,ot.N,it.A,lt.N,ct.N,ut.N,pt.N,dt.N,_t.A,mt.N,gt.N,vt.N,ft.N,ht.N,At.N,Nt.N,yt.N,wt.N,Ct.A,Dt.N,It.A,St.A,bt.N,kt.N,Ut.N,xt.N,Lt.N,Tt.N,Bt.a,$t.N,Rt.N,Et.N,Ot.N,Ft.N,Mt.N,Wt.N,Gt.N,Vt.N,Pt.N,Xt.N,qt.N,Yt.N,jt.N,zt.A,Symbol.toStringTag,Kt.A,Ht.A,Jt.yw,Symbol.toStringTag,Zt.fallBackSources=[],Zt.iframeCount=0,Zt.fallBackCallBack=function(t,e,n){Zt.fallBackSources[t].fallBackCallBack(e,n)},Zt.prototype={typelessListeners:[],iframe:null,listeners:{},useFallBack:!1,fallBackCallBack:function(t,e){let n;if(!this.closed)if(t){if(void 0!==this.listeners.done)for(n=0;n<this.listeners[t].length;n++)this.listeners[t][n](e)}else for(n=0;n<this.typelessListeners.length;n++)this.typelessListeners[n](e)},lastLength:0,listen:function(t,e){e&&e.call&&(t?this.useFallBack?(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)):this.source.addEventListener(t,function(t){void 0!==t.data?e(JSON.parse(t.data)):e("")},!1):this.typelessListeners.push(e))},close:function(){this.closed=!0,void 0!==this.source&&this.source.close()}};const Qt=Zt,te=(0,s.pM)({__name:"UpdaterAdmin",setup(t){const e=(0,r.C)("core","updateInfo"),n=(0,s.KR)(!1),l=(0,s.KR)(!1),c=(0,s.KR)(!1),u=(0,s.KR)([]),p=(0,s.EW)(()=>u.value.every(t=>"success"===t.type||"notice"===t.type)),d=(0,s.EW)(()=>u.value.some(t=>"error"===t.type||"failure"===t.type)),_=(0,s.EW)(()=>p.value?a.rvk:d.value?a.rZW:a.VX1),m=(0,s.EW)(()=>c.value?p.value?(0,o.t)("core","The update completed successfully."):(0,o.t)("core","The update completed with warnings. Please check the details for more information."):u.value.at(-1)?.message||(0,o.t)("core","Preparing update…")),g=(0,s.KR)(6),v=(0,s.EW)(()=>c.value&&p.value?(0,o.t)("core","You will be redirected to {productName} in {count} seconds.",{productName:e.productName,count:g.value}):"");function f(){!d.value&&p.value&&(--g.value>0?window.setTimeout(f,1e3):A())}function h(t){l.value&&(t.preventDefault(),t.returnValue=(0,o.t)("core","The update is in progress, leaving this page might interrupt the process in some environments."))}function A(){window.location.reload()}return(0,s.sV)(()=>window.addEventListener("beforeunload",h)),(0,s.hi)(()=>window.removeEventListener("beforeunload",h)),{__sfc:!0,updateInfo:e,isShowingDetails:n,isUpdateRunning:l,isUpdateDone:c,messages:u,wasSuccessfull:p,hasErrors:d,resultIcon:_,statusMessage:m,redirectCountdown:g,redirectMessage:v,getSeverityIcon:function(t){switch(t){case"success":return a.rvk;case"notice":default:return a.nO4;case"warning":return a.VX1;case"error":case"failure":return a.rZW}},onStartUpdate:async function(){if(l.value||c.value)return;l.value=!0;const t=new Qt((0,i.fg)("core","","ajax/update.php"));t.listen("success",t=>{u.value.push({message:t,type:"success"})}),t.listen("notice",t=>{u.value.push({message:t,type:"notice"})}),t.listen("error",e=>{u.value.push({message:e,type:"error"}),l.value=!1,c.value=!0,t.close()}),t.listen("failure",t=>{u.value.push({message:t,type:"failure"})}),t.listen("done",()=>{l.value=!1,c.value=!0,t.close(),f()})},updateCountdown:f,onUnload:h,reloadPage:A,mdiChevronDown:a.W5x,mdiChevronUp:a.Fb5,t:o.t,NcButton:Y.N,NcIconSvgWrapper:At.N,NcLoadingIcon:Ct.A,NcGuestContent:_t.A,NcNoteCard:St.A}}});var ee=n(85072),ne=n.n(ee),se=n(97825),ae=n.n(se),re=n(77659),oe=n.n(re),ie=n(55056),le=n.n(ie),ce=n(10540),ue=n.n(ce),pe=n(41113),de=n.n(pe),_e=n(23040),me={};me.styleTagTransform=de(),me.setAttributes=le(),me.insert=oe().bind(null,"head"),me.domAPI=ae(),me.insertStyleElement=ue(),ne()(_e.A,me);const ge=_e.A&&_e.A.locals?_e.A.locals:void 0,ve=(0,n(14486).A)(te,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcGuestContent,[e("h2",[t._v("\n\t\t"+t._s(n.updateInfo.isAppsOnlyUpgrade?n.t("core","App update required"):n.t("core","{productName} will be updated to version {version}",{productName:n.updateInfo.productName,version:n.updateInfo.version}))+"\n\t")]),t._v(" "),n.updateInfo.oldTheme?e(n.NcNoteCard,{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(n.t("core","The theme {oldTheme} has been disabled.",{oldTheme:n.updateInfo.oldTheme}))+"\n\t")]):t._e(),t._v(" "),n.updateInfo.incompatibleAppsList.length?e(n.NcNoteCard,{attrs:{type:"warning"}},[t._v("\n\t\t"+t._s(n.t("core","These incompatible apps will be disabled:"))+"\n\t\t"),e("ul",{class:t.$style.updater__appsList,attrs:{"aria-label":n.t("core","Incompatible apps")}},t._l(n.updateInfo.incompatibleAppsList,function(n){return e("li",{key:"app-disable-"+n.id},[t._v("\n\t\t\t\t"+t._s(n.name)+" ("+t._s(n.id)+")\n\t\t\t")])}),0)]):t._e(),t._v(" "),n.updateInfo.incompatibleAppsList.length?e(n.NcNoteCard,{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(n.t("core","These apps will be updated:"))+"\n\t\t"),e("ul",{class:t.$style.updater__appsList,attrs:{"aria-label":n.t("core","Apps to update")}},t._l(n.updateInfo.appsToUpgrade,function(s){return e("li",{key:"app-update-"+s.id},[t._v("\n\t\t\t\t"+t._s(n.t("core","{app} from {oldVersion} to {version}",{app:`${s.name} (${s.id})`,oldVersion:s.oldVersion,version:s.version}))+"\n\t\t\t")])}),0)]):t._e(),t._v(" "),e("p",[e("strong",[t._v(t._s(n.t("core","Please make sure that the database, the config folder and the data folder have been backed up before proceeding.")))]),t._v(" "),e("br"),t._v("\n\t\t"+t._s(n.t("core","To avoid timeouts with larger installations, you can instead run the following command from your installation directory:"))+"\n\t\t"),e("pre",[t._v("./occ upgrade")])]),t._v(" "),n.isUpdateRunning||n.isUpdateDone?e(n.NcButton,{class:t.$style.updater__updateButton,attrs:{disabled:n.isUpdateRunning,variant:"primary"},on:{click:n.reloadPage}},[t._v("\n\t\t"+t._s(n.t("core","Continue to {productName}",{productName:n.updateInfo.productName}))+"\n\t")]):e(n.NcButton,{class:t.$style.updater__updateButton,attrs:{variant:"primary"},on:{click:n.onStartUpdate}},[t._v("\n\t\t"+t._s(n.t("core","Start update"))+"\n\t")]),t._v(" "),n.isUpdateRunning||n.isUpdateDone?e("div",[e("h2",[t._v(t._s(n.t("core","Update to {version}",{version:n.updateInfo.version})))]),t._v(" "),n.isUpdateRunning?e(n.NcLoadingIcon):e(n.NcIconSvgWrapper,{class:{[t.$style.updater__messageIcon_success]:n.wasSuccessfull,[t.$style.updater__messageIcon_error]:n.hasErrors&&!n.wasSuccessfull,[t.$style.updater__messageIcon_warning]:!n.hasErrors&&!n.wasSuccessfull},attrs:{path:n.resultIcon}}),t._v(" "),e("div",{attrs:{"aria-live":"polite"}},[e("em",[t._v(t._s(n.statusMessage))]),e("br"),t._v(" "),n.redirectMessage?e("span",[t._v(t._s(n.redirectMessage))]):t._e()]),t._v(" "),e(n.NcButton,{attrs:{"aria-controlls":"core-update-details","aria-expanded":n.isShowingDetails,variant:"tertiary"},on:{click:function(t){n.isShowingDetails=!n.isShowingDetails}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.isShowingDetails?n.mdiChevronUp:n.mdiChevronDown}})]},proxy:!0}],null,!1,793381276)},[t._v("\n\t\t\t"+t._s(n.isShowingDetails?n.t("core","Hide details"):n.t("core","Show details"))+"\n\t\t")]),t._v(" "),e("Transition",{attrs:{"enter-active-class":t.$style.updater__transition_active,"leave-active-class":t.$style.updater__transition_active,"leave-to-class":t.$style.updater__transition_collapsed,"enter-class":t.$style.updater__transition_collapsed}},[e("ul",{directives:[{name:"show",rawName:"v-show",value:n.isShowingDetails,expression:"isShowingDetails"}],class:t.$style.updater__messageList,attrs:{id:"core-update-details","aria-label":n.t("core","Update details")}},t._l(n.messages,function({message:s,type:a}){return e("li",{key:s,class:t.$style.updater__message},[e(n.NcIconSvgWrapper,{class:{[t.$style.updater__messageIcon_error]:"error"===a||"failure"===a,[t.$style.updater__messageIcon_info]:"notice"===a,[t.$style.updater__messageIcon_success]:"success"===a,[t.$style.updater__messageIcon_warning]:"warning"===a},attrs:{path:n.getSeverityIcon(a)}}),t._v(" "),e("span",{class:t.$style.updater__messageText},[t._v(t._s(s))])],1)}),0)])],1):t._e()],1)},[],!1,function(t){this.$style=ge.locals||ge},null,null).exports},27518(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},27514(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},79722(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},64505(t){t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"}}]);
//# sourceMappingURL=9396-9396.js.map?v=5f5c4d12d24bad246047