const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('', '', 'dist/index-eaxUjemN.chunk.mjs'),window.OC.filePath('', '', 'dist/_plugin-vue_export-helper-sUpjG1-Y.chunk.mjs'),window.OC.filePath('', '', 'dist/string_decoder-CKkZVVJW.chunk.mjs'),window.OC.filePath('', '', 'dist/string_decoder-DopLwvn9.chunk.css'),window.OC.filePath('', '', 'dist/index-JpgrUA2Z-hoZOv0I-.chunk.mjs'),window.OC.filePath('', '', 'dist/mdi-BrEv6Slh.chunk.mjs'),window.OC.filePath('', '', 'dist/mdi-BYHcrfvW.chunk.css'),window.OC.filePath('', '', 'dist/index-JpgrUA2Z-PxDoi4mB.chunk.css'),window.OC.filePath('', '', 'dist/NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U-Cq-oANUr.chunk.mjs'),window.OC.filePath('', '', 'dist/NcDateTime-DXOHXnuu.chunk.css'),window.OC.filePath('', '', 'dist/NcSelect-Czzsi3P_-BfHbk_qw.chunk.mjs'),window.OC.filePath('', '', 'dist/NcSelect-Czzsi3P_-DxGOLvnt.chunk.css'),window.OC.filePath('', '', 'dist/NcInputField-Bwsh2aHY-fSb6LlM4.chunk.mjs'),window.OC.filePath('', '', 'dist/NcInputField-Bwsh2aHY-_gyGHRGx.chunk.css'),window.OC.filePath('', '', 'dist/NcAvatar-DmUGApWA-HHJYMSvr.chunk.mjs'),window.OC.filePath('', '', 'dist/index-Cvjfo1ma.chunk.mjs'),window.OC.filePath('', '', 'dist/colors-Go3zmZRD-B3dC1KT2.chunk.mjs'),window.OC.filePath('', '', 'dist/NcUserStatusIcon-CGEf7fej-CSAsMs-R.chunk.mjs'),window.OC.filePath('', '', 'dist/NcUserStatusIcon-CGEf7fej-Bq_6hmXG.chunk.css'),window.OC.filePath('', '', 'dist/NcAvatar-DmUGApWA-B-07Svbi.chunk.css'),window.OC.filePath('', '', 'dist/NcEmojiPicker-pM4Pg2yq-Djq7ah7y.chunk.mjs'),window.OC.filePath('', '', 'dist/NcColorPicker-Kc0JqRtp-44mUS6uA.chunk.mjs'),window.OC.filePath('', '', 'dist/NcColorPicker-Kc0JqRtp-BOLDG5h-.chunk.css'),window.OC.filePath('', '', 'dist/TrashCanOutline-DMH4BocM.chunk.mjs'),window.OC.filePath('', '', 'dist/NcEmojiPicker-pM4Pg2yq-BHtXoCfG.chunk.css'),window.OC.filePath('', '', 'dist/NcCheckboxRadioSwitch-BCSKF7Tk-46uSoFP3.chunk.mjs'),window.OC.filePath('', '', 'dist/NcCheckboxRadioSwitch-BCSKF7Tk-BgdwjgMO.chunk.css'),window.OC.filePath('', '', 'dist/index-JVbGjIG0.chunk.css')])))=>i.map(i=>d[i]);
import{_ as S}from"./index-JpgrUA2Z-hoZOv0I-.chunk.mjs";import{f as z,j as F,k as R,m as B,u as j,s as I,F as P,o as b,I as g,t as V,H as w,z as T,i as A,O as E,aG as Y,av as N,r as k,x as Z,U as C,R as G,G as M,c as x,a as H,w as W,ax as J}from"./_plugin-vue_export-helper-sUpjG1-Y.chunk.mjs";import{c as K}from"./NcDateTime.vue_vue_type_script_setup_true_lang-BhB8yA4U-Cq-oANUr.chunk.mjs";import{N as Q}from"./NcPasswordField-djttkA5Q-BJMJ835s.chunk.mjs";import{_ as X}from"./TrashCanOutline-DMH4BocM.chunk.mjs";import{N as ee}from"./NcSelect-Czzsi3P_-BfHbk_qw.chunk.mjs";z();const te=["for"],ie=["id","type","value","min","max"],ae=R({inheritAttrs:!1,__name:"NcDateTimePickerNative",props:B({class:{default:void 0},id:{default:()=>E()},inputClass:{default:""},type:{default:"date"},label:{default:()=>A("Please choose a date")},min:{default:null},max:{default:null},hideLabel:{type:Boolean}},{modelValue:{default:null},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=j(n,"modelValue"),e=n,c=I(()=>t.value?l(t.value):""),m=I(()=>e.max?l(e.max):void 0),r=I(()=>e.min?l(e.min):void 0);function h(i){const a=i.getFullYear().toString().padStart(4,"0"),u=(i.getMonth()+1).toString().padStart(2,"0"),d=i.getDate().toString().padStart(2,"0"),p=i.getHours().toString().padStart(2,"0"),f=i.getMinutes().toString().padStart(2,"0");return{yyyy:a,MM:u,dd:d,hh:p,mm:f}}function l(i){const{yyyy:a,MM:u,dd:d,hh:p,mm:f}=h(i);if(e.type==="datetime-local")return`${a}-${u}-${d}T${p}:${f}`;if(e.type==="date")return`${a}-${u}-${d}`;if(e.type==="month")return`${a}-${u}`;if(e.type==="time")return`${p}:${f}`;if(e.type==="week"){const o=new Date(Number.parseInt(a),0,1),v=Math.floor((i.getTime()-o.getTime())/(1440*60*1e3)),_=Math.ceil(v/7);return`${a}-W${_}`}return""}function s(i){const a=i.target;if(!a||isNaN(a.valueAsNumber))t.value=null;else if(e.type==="time"){const u=a.value,{yyyy:d,MM:p,dd:f}=h(t.value||new Date);t.value=new Date(`${d}-${p}-${f}T${u}`)}else if(e.type==="month"){const u=(new Date(a.value).getMonth()+1).toString().padStart(2,"0"),{yyyy:d,dd:p,hh:f,mm:o}=h(t.value||new Date);t.value=new Date(`${d}-${u}-${p}T${f}:${o}`)}else{const u=new Date(a.valueAsNumber).getTimezoneOffset()*1e3*60,d=a.valueAsNumber+u;t.value=new Date(d)}}return(i,a)=>(b(),P("div",{class:w(["native-datetime-picker",i.$props.class])},[g("label",{class:w(["native-datetime-picker__label",{"hidden-visually":i.hideLabel}]),for:i.id},V(i.label),11,te),g("input",T({id:i.id,class:["native-datetime-picker__input",i.inputClass],type:i.type,value:c.value,min:r.value,max:m.value},i.$attrs,{onInput:s}),null,16,ie)],2))}}),se=F(ae,[["__scopeId","data-v-b97e1f7a"]]);z(Y);const ne={name:"NcActionInput",components:{NcDateTimePickerNative:se,NcPasswordField:Q,NcTextField:X,NcColorPicker:N(()=>S(()=>import("./index-eaxUjemN.chunk.mjs").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url)),NcDateTimePicker:N(()=>S(()=>import("./index-eaxUjemN.chunk.mjs").then(n=>n.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url)),NcSelect:N(()=>S(()=>Promise.resolve().then(()=>we),void 0,import.meta.url))},mixins:[K],inheritAttrs:!1,props:{id:{type:String,default:()=>"action-"+E(),validator:n=>n.trim()!==""},inputId:{type:String,default:()=>"action-input-"+E(),validator:n=>n.trim()!==""},icon:{type:String,default:""},type:{type:String,default:"text",validator(n){return["date","datetime-local","month","multiselect","number","password","search","tel","text","time","url","week","color","email"].includes(n)}},idNativeDateTimePicker:{type:String,default:"date-time-picker_id"},isNativePicker:{type:Boolean,default:!1},label:{type:String,default:null},labelOutside:{type:Boolean,default:!0},modelValue:{type:[String,Date,Number,Array],default:""},disabled:{type:Boolean,default:!1},ariaLabel:{type:String,default:""},showTrailingButton:{type:Boolean,default:!0},trailingButtonLabel:{type:String,default:A("Submit")},class:{type:[String,Array,Object],default:""}},emits:["submit","update:modelValue"],computed:{isIconUrl(){try{return new URL(this.icon)}catch{return!1}},isMultiselectType(){return this.type==="multiselect"},nativeDatePickerType(){switch(this.type){case"date":case"month":case"time":case"week":case"datetime-local":return this.type}return!1},datePickerType(){if(!this.isNativePicker)switch(this.type){case"date":case"month":case"time":return this.type;case"datetime-local":return"datetime"}return!1},isFocusable(){return!this.disabled}},methods:{onLeave(){this.$refs.datetimepicker&&this.$refs.datetimepicker.$refs.datepicker&&this.$refs.datetimepicker.$refs.datepicker.closePopup()},onSubmit(n){if(n.preventDefault(),n.stopPropagation(),!this.disabled)this.$emit("submit",n);else return!1},onUpdateModelValue(n){this.$emit("update:modelValue",n)}}},re={class:"action-input__icon-wrapper"},oe=["disabled"],le={class:"action-input__container"},ue=["for"],ce={class:"action-input__input-container"},de={key:4,class:"action-input__container"},pe=["for"],he={class:"action-input__input-container"};function me(n,t,e,c,m,r){const h=k("NcDateTimePicker"),l=k("NcDateTimePickerNative"),s=k("NcSelect"),i=k("NcPasswordField"),a=k("NcColorPicker"),u=k("NcTextField");return b(),P("li",{class:w(["action",[{"action--disabled":e.disabled},n.$props.class]])},[g("span",{class:w(["action-input",{"action-input-picker--disabled":e.disabled,"action-input--visible-label":e.labelOutside&&e.label}]),onMouseleave:t[3]||(t[3]=(...d)=>r.onLeave&&r.onLeave(...d))},[g("span",re,[Z(n.$slots,"icon",{},()=>[g("span",{"aria-hidden":"true",class:w(["action-input__icon",[r.isIconUrl?"action-input__icon--url":e.icon]]),style:C({backgroundImage:r.isIconUrl?`url(${e.icon})`:null})},null,6)],!0)]),g("form",{ref:"form",class:"action-input__form",disabled:e.disabled,onSubmit:t[2]||(t[2]=G((...d)=>r.onSubmit&&r.onSubmit(...d),["prevent"]))},[g("div",le,[e.label&&e.labelOutside&&!e.isNativePicker?(b(),P("label",{key:0,class:w(["action-input__text-label",{"action-input__text-label--hidden":!e.labelOutside}]),for:e.inputId},V(e.label),11,ue)):M("",!0),g("div",ce,[r.datePickerType?(b(),x(h,T({key:0,ref:"datetimepicker","model-value":e.modelValue,style:{"z-index":"99999999999"},placeholder:n.text,disabled:e.disabled,type:r.datePickerType,"input-class":["mx-input",{focusable:r.isFocusable}],class:"action-input__datetimepicker","append-to-body":""},n.$attrs,{"onUpdate:modelValue":r.onUpdateModelValue}),null,16,["model-value","placeholder","disabled","type","input-class","onUpdate:modelValue"])):e.isNativePicker?(b(),x(l,T({key:1,id:e.idNativeDateTimePicker,"model-value":e.modelValue,label:e.label,type:r.nativeDatePickerType,"input-class":{focusable:r.isFocusable},class:"action-input__datetimepicker"},n.$attrs,{"onUpdate:modelValue":r.onUpdateModelValue}),null,16,["id","model-value","label","type","input-class","onUpdate:modelValue"])):r.isMultiselectType?(b(),x(s,T({key:2,"model-value":e.modelValue,placeholder:n.text,disabled:e.disabled,"append-to-body":!1,"input-class":{focusable:r.isFocusable},class:"action-input__multi"},n.$attrs,{"onUpdate:modelValue":r.onUpdateModelValue}),null,16,["model-value","placeholder","disabled","input-class","onUpdate:modelValue"])):e.type==="password"?(b(),x(i,T({key:3,id:e.inputId,"model-value":e.modelValue,label:e.label,"label-outside":!e.label||e.labelOutside,placeholder:n.text,disabled:e.disabled,"input-class":{focusable:r.isFocusable},"show-trailing-button":e.showTrailingButton&&!e.disabled},n.$attrs,{"onUpdate:modelValue":r.onUpdateModelValue}),null,16,["id","model-value","label","label-outside","placeholder","disabled","input-class","show-trailing-button","onUpdate:modelValue"])):e.type==="color"?(b(),P("div",de,[e.label&&e.type==="color"?(b(),P("label",{key:0,class:w(["action-input__text-label",{"action-input__text-label--hidden":!e.labelOutside}]),for:e.inputId},V(e.label),11,pe)):M("",!0),g("div",he,[H(a,T({id:"inputId","model-value":e.modelValue,class:"colorpicker__trigger"},n.$attrs,{"onUpdate:modelValue":r.onUpdateModelValue,onSubmit:t[0]||(t[0]=d=>n.$refs.form.requestSubmit())}),{default:W(()=>[g("button",{class:w(["colorpicker__preview",{focusable:r.isFocusable}]),style:C({"background-color":e.modelValue})},null,6)]),_:1},16,["model-value","onUpdate:modelValue"])])])):(b(),x(u,T({key:5,id:e.inputId,"model-value":e.modelValue,label:e.label,"label-outside":!e.label||e.labelOutside,placeholder:n.text,disabled:e.disabled,"input-class":{focusable:r.isFocusable},type:e.type,"trailing-button-icon":"arrowRight","trailing-button-label":e.trailingButtonLabel,"show-trailing-button":e.showTrailingButton&&!e.disabled},n.$attrs,{onTrailingButtonClick:t[1]||(t[1]=d=>n.$refs.form.requestSubmit()),"onUpdate:modelValue":r.onUpdateModelValue}),null,16,["id","model-value","label","label-outside","placeholder","disabled","input-class","type","trailing-button-label","show-trailing-button","onUpdate:modelValue"]))])])],40,oe)],34)],2)}const Ie=F(ne,[["render",me],["__scopeId","data-v-67b3d681"]]);var O={exports:{}},D;function fe(){return D||(D=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(e=!1));function m(s,i,a){this.fn=s,this.context=i,this.once=a||!1}function r(s,i,a,u,d){if(typeof a!="function")throw new TypeError("The listener must be a function");var p=new m(a,u||s,d),f=e?e+i:i;return s._events[f]?s._events[f].fn?s._events[f]=[s._events[f],p]:s._events[f].push(p):(s._events[f]=p,s._eventsCount++),s}function h(s,i){--s._eventsCount===0?s._events=new c:delete s._events[i]}function l(){this._events=new c,this._eventsCount=0}l.prototype.eventNames=function(){var s=[],i,a;if(this._eventsCount===0)return s;for(a in i=this._events)t.call(i,a)&&s.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(i)):s},l.prototype.listeners=function(s){var i=e?e+s:s,a=this._events[i];if(!a)return[];if(a.fn)return[a.fn];for(var u=0,d=a.length,p=new Array(d);u<d;u++)p[u]=a[u].fn;return p},l.prototype.listenerCount=function(s){var i=e?e+s:s,a=this._events[i];return a?a.fn?1:a.length:0},l.prototype.emit=function(s,i,a,u,d,p){var f=e?e+s:s;if(!this._events[f])return!1;var o=this._events[f],v=arguments.length,_,y;if(o.fn){switch(o.once&&this.removeListener(s,o.fn,void 0,!0),v){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,i),!0;case 3:return o.fn.call(o.context,i,a),!0;case 4:return o.fn.call(o.context,i,a,u),!0;case 5:return o.fn.call(o.context,i,a,u,d),!0;case 6:return o.fn.call(o.context,i,a,u,d,p),!0}for(y=1,_=new Array(v-1);y<v;y++)_[y-1]=arguments[y];o.fn.apply(o.context,_)}else{var q=o.length,$;for(y=0;y<q;y++)switch(o[y].once&&this.removeListener(s,o[y].fn,void 0,!0),v){case 1:o[y].fn.call(o[y].context);break;case 2:o[y].fn.call(o[y].context,i);break;case 3:o[y].fn.call(o[y].context,i,a);break;case 4:o[y].fn.call(o[y].context,i,a,u);break;default:if(!_)for($=1,_=new Array(v-1);$<v;$++)_[$-1]=arguments[$];o[y].fn.apply(o[y].context,_)}}return!0},l.prototype.on=function(s,i,a){return r(this,s,i,a,!1)},l.prototype.once=function(s,i,a){return r(this,s,i,a,!0)},l.prototype.removeListener=function(s,i,a,u){var d=e?e+s:s;if(!this._events[d])return this;if(!i)return h(this,d),this;var p=this._events[d];if(p.fn)p.fn===i&&(!u||p.once)&&(!a||p.context===a)&&h(this,d);else{for(var f=0,o=[],v=p.length;f<v;f++)(p[f].fn!==i||u&&!p[f].once||a&&p[f].context!==a)&&o.push(p[f]);o.length?this._events[d]=o.length===1?o[0]:o:h(this,d)}return this},l.prototype.removeAllListeners=function(s){var i;return s?(i=e?e+s:s,this._events[i]&&h(this,i)):(this._events=new c,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l})(O)),O.exports}var ye=fe();const ve=J(ye);class L extends Error{name="TimeoutError";constructor(t,e){super(t,e),Error.captureStackTrace?.(this,L)}}const U=n=>n.reason??new DOMException("This operation was aborted.","AbortError");function be(n,t){const{milliseconds:e,fallback:c,message:m,customTimers:r={setTimeout,clearTimeout},signal:h}=t;let l,s;const i=new Promise((a,u)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(h?.aborted){u(U(h));return}if(h&&(s=()=>{u(U(h))},h.addEventListener("abort",s,{once:!0})),n.then(a,u),e===Number.POSITIVE_INFINITY)return;const d=new L;l=r.setTimeout.call(void 0,()=>{if(c){try{a(c())}catch(p){u(p)}return}typeof n.cancel=="function"&&n.cancel(),m===!1?a():m instanceof Error?u(m):(d.message=m??`Promise timed out after ${e} milliseconds`,u(d))},e)}).finally(()=>{i.clear(),s&&h&&h.removeEventListener("abort",s)});return i.clear=()=>{r.clearTimeout.call(void 0,l),l=void 0},i}function ge(n,t,e){let c=0,m=n.length;for(;m>0;){const r=Math.trunc(m/2);let h=c+r;e(n[h],t)<=0?(c=++h,m-=r+1):m=r}return c}class _e{#t=[];enqueue(t,e){const{priority:c=0,id:m}=e??{},r={priority:c,id:m,run:t};if(this.size===0||this.#t[this.size-1].priority>=c){this.#t.push(r);return}const h=ge(this.#t,r,(l,s)=>s.priority-l.priority);this.#t.splice(h,0,r)}setPriority(t,e){const c=this.#t.findIndex(r=>r.id===t);if(c===-1)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);const[m]=this.#t.splice(c,1);this.enqueue(m.run,{priority:e,id:t})}dequeue(){return this.#t.shift()?.run}filter(t){return this.#t.filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return this.#t.length}}class Ne extends ve{#t;#a;#s=0;#h;#m=!1;#f=!1;#u;#g=0;#y=0;#n;#r;#e;#_;#i=0;#c;#o;#P=1n;#d=new Map;timeout;constructor(t){if(super(),t={carryoverIntervalCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:_e,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);if(this.#t=t.carryoverIntervalCount??t.carryoverConcurrencyCount??!1,this.#a=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#h=t.intervalCap,this.#u=t.interval,this.#e=new t.queueClass,this.#_=t.queueClass,this.concurrency=t.concurrency,t.timeout!==void 0&&!(Number.isFinite(t.timeout)&&t.timeout>0))throw new TypeError(`Expected \`timeout\` to be a positive finite number, got \`${t.timeout}\` (${typeof t.timeout})`);this.timeout=t.timeout,this.#o=t.autoStart===!1,this.#C()}get#S(){return this.#a||this.#s<this.#h}get#I(){return this.#i<this.#c}#N(){this.#i--,this.#i===0&&this.emit("pendingZero"),this.#v(),this.emit("next")}#V(){this.#$(),this.#k(),this.#r=void 0}get#E(){const t=Date.now();if(this.#n===void 0){const e=this.#g-t;if(e<0){if(this.#y>0){const c=t-this.#y;if(c<this.#u)return this.#w(this.#u-c),!0}this.#s=this.#t?this.#i:0}else return this.#w(e),!0}return!1}#w(t){this.#r===void 0&&(this.#r=setTimeout(()=>{this.#V()},t))}#T(){this.#n&&(clearInterval(this.#n),this.#n=void 0)}#L(){this.#r&&(clearTimeout(this.#r),this.#r=void 0)}#v(){if(this.#e.size===0)return this.#T(),this.emit("empty"),this.#i===0&&(this.#L(),this.emit("idle")),!1;let t=!1;if(!this.#o){const e=!this.#E;if(this.#S&&this.#I){const c=this.#e.dequeue();this.#a||(this.#s++,this.#p()),this.emit("active"),this.#y=Date.now(),c(),e&&this.#k(),t=!0}}return t}#k(){this.#a||this.#n!==void 0||(this.#n=setInterval(()=>{this.#$()},this.#u),this.#g=Date.now()+this.#u)}#$(){this.#s===0&&this.#i===0&&this.#n&&this.#T(),this.#s=this.#t?this.#i:0,this.#b(),this.#p()}#b(){for(;this.#v(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#b()}setPriority(t,e){if(typeof e!="number"||!Number.isFinite(e))throw new TypeError(`Expected \`priority\` to be a finite number, got \`${e}\` (${typeof e})`);this.#e.setPriority(t,e)}async add(t,e={}){return e.id??=(this.#P++).toString(),e={timeout:this.timeout,...e},new Promise((c,m)=>{const r=Symbol(`task-${e.id}`);this.#e.enqueue(async()=>{this.#i++,this.#d.set(r,{id:e.id,priority:e.priority??0,startTime:Date.now(),timeout:e.timeout});let h;try{try{e.signal?.throwIfAborted()}catch(i){throw this.#a||this.#s--,this.#d.delete(r),i}let l=t({signal:e.signal});if(e.timeout&&(l=be(Promise.resolve(l),{milliseconds:e.timeout,message:`Task timed out after ${e.timeout}ms (queue has ${this.#i} running, ${this.#e.size} waiting)`})),e.signal){const{signal:i}=e;l=Promise.race([l,new Promise((a,u)=>{h=()=>{u(i.reason)},i.addEventListener("abort",h,{once:!0})})])}const s=await l;c(s),this.emit("completed",s)}catch(l){m(l),this.emit("error",l)}finally{h&&e.signal?.removeEventListener("abort",h),this.#d.delete(r),queueMicrotask(()=>{this.#N()})}},e),this.emit("add"),this.#v()})}async addAll(t,e){return Promise.all(t.map(async c=>this.add(c,e)))}start(){return this.#o?(this.#o=!1,this.#b(),this):this}pause(){this.#o=!0}clear(){this.#e=new this.#_,this.#x()}async onEmpty(){this.#e.size!==0&&await this.#l("empty")}async onSizeLessThan(t){this.#e.size<t||await this.#l("next",()=>this.#e.size<t)}async onIdle(){this.#i===0&&this.#e.size===0||await this.#l("idle")}async onPendingZero(){this.#i!==0&&await this.#l("pendingZero")}async onRateLimit(){this.isRateLimited||await this.#l("rateLimit")}async onRateLimitCleared(){this.isRateLimited&&await this.#l("rateLimitCleared")}async onError(){return new Promise((t,e)=>{const c=m=>{this.off("error",c),e(m)};this.on("error",c)})}async#l(t,e){return new Promise(c=>{const m=()=>{e&&!e()||(this.off(t,m),c())};this.on(t,m)})}get size(){return this.#e.size}sizeBy(t){return this.#e.filter(t).length}get pending(){return this.#i}get isPaused(){return this.#o}#C(){this.#a||(this.on("add",()=>{this.#e.size>0&&this.#p()}),this.on("next",()=>{this.#p()}))}#p(){this.#a||this.#f||(this.#f=!0,queueMicrotask(()=>{this.#f=!1,this.#x()}))}#x(){const t=this.#m,e=!this.#a&&this.#s>=this.#h&&this.#e.size>0;e!==t&&(this.#m=e,this.emit(e?"rateLimit":"rateLimitCleared"))}get isRateLimited(){return this.#m}get isSaturated(){return this.#i===this.#c&&this.#e.size>0||this.isRateLimited&&this.#e.size>0}get runningTasks(){return[...this.#d.values()].map(t=>({...t}))}}const we=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{se as N,Ne as P,Ie as a};
//# sourceMappingURL=index-BpuSV-3Q.chunk.mjs.map
