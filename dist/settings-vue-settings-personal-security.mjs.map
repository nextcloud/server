{"version":3,"file":"settings-vue-settings-personal-security.mjs","sources":["../apps/settings/src/store/authtoken.ts","../apps/settings/src/components/AuthToken.vue","../apps/settings/src/components/AuthTokenList.vue","../apps/settings/src/components/AuthTokenSetupDialog.vue","../apps/settings/src/components/AuthTokenSetup.vue","../apps/settings/src/components/AuthTokenSection.vue","../apps/settings/src/main-personal-security.js"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { showError } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport { confirmPassword } from '@nextcloud/password-confirmation'\nimport { generateUrl } from '@nextcloud/router'\nimport { defineStore } from 'pinia'\n\nimport axios from '@nextcloud/axios'\nimport logger from '../logger'\n\nconst BASE_URL = generateUrl('/settings/personal/authtokens')\n\nconst confirm = () => {\n\treturn new Promise(resolve => {\n\t\twindow.OC.dialogs.confirm(\n\t\t\tt('settings', 'Do you really want to wipe your data from this device?'),\n\t\t\tt('settings', 'Confirm wipe'),\n\t\t\tresolve,\n\t\t\ttrue,\n\t\t)\n\t})\n}\n\nexport enum TokenType {\n\tTEMPORARY_TOKEN = 0,\n\tPERMANENT_TOKEN = 1,\n\tWIPING_TOKEN = 2,\n}\n\nexport interface IToken {\n\tid: number\n\tcanDelete: boolean\n\tcanRename: boolean\n\tcurrent?: true\n\t/**\n\t * Last activity as UNIX timestamp (in seconds)\n\t */\n\tlastActivity: number\n\tname: string\n\ttype: TokenType\n\tscope: Record<string, boolean>\n}\n\nexport interface ITokenResponse {\n\t/**\n\t * The device token created\n\t */\n\tdeviceToken: IToken\n\t/**\n\t * User who is assigned with this token\n\t */\n\tloginName: string\n\t/**\n\t * The token for authentication\n\t */\n\ttoken: string\n}\n\nexport const useAuthTokenStore = defineStore('auth-token', {\n\tstate() {\n\t\treturn {\n\t\t\ttokens: loadState<IToken[]>('settings', 'app_tokens', []),\n\t\t}\n\t},\n\tactions: {\n\t\t/**\n\t\t * Update a token on server\n\t\t * @param token Token to update\n\t\t */\n\t\tasync updateToken(token: IToken) {\n\t\t\tconst { data } = await axios.put(`${BASE_URL}/${token.id}`, token)\n\t\t\treturn data\n\t\t},\n\n\t\t/**\n\t\t * Add a new token\n\t\t * @param name The token name\n\t\t */\n\t\tasync addToken(name: string) {\n\t\t\tlogger.debug('Creating a new app token')\n\n\t\t\ttry {\n\t\t\t\tawait confirmPassword()\n\n\t\t\t\tconst { data } = await axios.post<ITokenResponse>(BASE_URL, { name })\n\t\t\t\tthis.tokens.push(data.deviceToken)\n\t\t\t\tlogger.debug('App token created')\n\t\t\t\treturn data\n\t\t\t} catch (error) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Delete a given app token\n\t\t * @param token Token to delete\n\t\t */\n\t\tasync deleteToken(token: IToken) {\n\t\t\tlogger.debug('Deleting app token', { token })\n\n\t\t\tthis.tokens = this.tokens.filter(({ id }) => id !== token.id)\n\n\t\t\ttry {\n\t\t\t\tawait axios.delete(`${BASE_URL}/${token.id}`)\n\t\t\t\tlogger.debug('App token deleted')\n\t\t\t\treturn true\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not delete app token', { error })\n\t\t\t\tshowError(t('settings', 'Could not delete the app token'))\n\t\t\t\t// Restore\n\t\t\t\tthis.tokens.push(token)\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\n\t\t/**\n\t\t * Wipe a token and the connected device\n\t\t * @param token Token to wipe\n\t\t */\n\t\tasync wipeToken(token: IToken) {\n\t\t\tlogger.debug('Wiping app token', { token })\n\n\t\t\ttry {\n\t\t\t\tawait confirmPassword()\n\n\t\t\t\tif (!(await confirm())) {\n\t\t\t\t\tlogger.debug('Wipe aborted by user')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tawait axios.post(`${BASE_URL}/wipe/${token.id}`)\n\t\t\t\tlogger.debug('App token marked for wipe', { token })\n\n\t\t\t\ttoken.type = TokenType.WIPING_TOKEN\n\t\t\t\ttoken.canRename = false // wipe tokens can not be renamed\n\t\t\t\treturn true\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not wipe app token', { error })\n\t\t\t\tshowError(t('settings', 'Error while wiping the device with the token'))\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\n\t\t/**\n\t\t * Rename an existing token\n\t\t * @param token The token to rename\n\t\t * @param newName The new name to set\n\t\t */\n\t\tasync renameToken(token: IToken, newName: string) {\n\t\t\tlogger.debug(`renaming app token ${token.id} from ${token.name} to '${newName}'`)\n\n\t\t\tconst oldName = token.name\n\t\t\ttoken.name = newName\n\n\t\t\ttry {\n\t\t\t\tawait this.updateToken(token)\n\t\t\t\tlogger.debug('App token name updated')\n\t\t\t\treturn true\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not update app token name', { error })\n\t\t\t\tshowError(t('settings', 'Error while updating device token name'))\n\t\t\t\t// Restore\n\t\t\t\ttoken.name = oldName\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\n\t\t/**\n\t\t * Set scope of the token\n\t\t * @param token Token to set scope\n\t\t * @param scope scope to set\n\t\t * @param value value to set\n\t\t */\n\t\tasync setTokenScope(token: IToken, scope: string, value: boolean) {\n\t\t\tlogger.debug('Updating app token scope', { token, scope, value })\n\n\t\t\tconst oldVal = token.scope[scope]\n\t\t\ttoken.scope[scope] = value\n\n\t\t\ttry {\n\t\t\t\tawait this.updateToken(token)\n\t\t\t\tlogger.debug('app token scope updated')\n\t\t\t\treturn true\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not update app token scope', { error })\n\t\t\t\tshowError(t('settings', 'Error while updating device token scope'))\n\t\t\t\t// Restore\n\t\t\t\ttoken.scope[scope] = oldVal\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t},\n\n})\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<tr :class=\"['auth-token', { 'auth-token--wiping': wiping }]\" :data-id=\"token.id\">\n\t\t<td class=\"auth-token__name\">\n\t\t\t<NcIconSvgWrapper :path=\"tokenIcon\" />\n\t\t\t<div class=\"auth-token__name-wrapper\">\n\t\t\t\t<form v-if=\"token.canRename && renaming\"\n\t\t\t\t\tclass=\"auth-token__name-form\"\n\t\t\t\t\t@submit.prevent.stop=\"rename\">\n\t\t\t\t\t<NcTextField ref=\"input\"\n\t\t\t\t\t\t:value.sync=\"newName\"\n\t\t\t\t\t\t:label=\"t('settings', 'Device name')\"\n\t\t\t\t\t\t:show-trailing-button=\"true\"\n\t\t\t\t\t\t:trailing-button-label=\"t('settings', 'Cancel renaming')\"\n\t\t\t\t\t\t@trailing-button-click=\"cancelRename\"\n\t\t\t\t\t\t@keyup.esc=\"cancelRename\" />\n\t\t\t\t\t<NcButton :aria-label=\"t('settings', 'Save new name')\" type=\"tertiary\" native-type=\"submit\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiCheck\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t</form>\n\t\t\t\t<span v-else>{{ tokenLabel }}</span>\n\t\t\t\t<span v-if=\"wiping\" class=\"wiping-warning\">({{ t('settings', 'Marked for remote wipe') }})</span>\n\t\t\t</div>\n\t\t</td>\n\t\t<td>\n\t\t\t<NcDateTime class=\"auth-token__last-activity\"\n\t\t\t\t:ignore-seconds=\"true\"\n\t\t\t\t:timestamp=\"tokenLastActivity\" />\n\t\t</td>\n\t\t<td class=\"auth-token__actions\">\n\t\t\t<NcActions v-if=\"!token.current\"\n\t\t\t\t:title=\"t('settings', 'Device settings')\"\n\t\t\t\t:aria-label=\"t('settings', 'Device settings')\"\n\t\t\t\t:open.sync=\"actionOpen\">\n\t\t\t\t<NcActionCheckbox v-if=\"canChangeScope\"\n\t\t\t\t\t:checked=\"token.scope.filesystem\"\n\t\t\t\t\t@update:checked=\"updateFileSystemScope\">\n\t\t\t\t\t<!-- TODO: add text/longtext with some description -->\n\t\t\t\t\t{{ t('settings', 'Allow filesystem access') }}\n\t\t\t\t</NcActionCheckbox>\n\t\t\t\t<NcActionButton v-if=\"token.canRename\"\n\t\t\t\t\ticon=\"icon-rename\"\n\t\t\t\t\t@click.stop.prevent=\"startRename\">\n\t\t\t\t\t<!-- TODO: add text/longtext with some description -->\n\t\t\t\t\t{{ t('settings', 'Rename') }}\n\t\t\t\t</NcActionButton>\n\n\t\t\t\t<!-- revoke & wipe -->\n\t\t\t\t<template v-if=\"token.canDelete\">\n\t\t\t\t\t<template v-if=\"token.type !== 2\">\n\t\t\t\t\t\t<NcActionButton icon=\"icon-delete\"\n\t\t\t\t\t\t\t@click.stop.prevent=\"revoke\">\n\t\t\t\t\t\t\t<!-- TODO: add text/longtext with some description -->\n\t\t\t\t\t\t\t{{ t('settings', 'Revoke') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionButton icon=\"icon-delete\"\n\t\t\t\t\t\t\t@click.stop.prevent=\"wipe\">\n\t\t\t\t\t\t\t{{ t('settings', 'Wipe device') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</template>\n\t\t\t\t\t<NcActionButton v-else-if=\"token.type === 2\"\n\t\t\t\t\t\ticon=\"icon-delete\"\n\t\t\t\t\t\t:name=\"t('settings', 'Revoke')\"\n\t\t\t\t\t\t@click.stop.prevent=\"revoke\">\n\t\t\t\t\t\t{{ t('settings', 'Revoking this token might prevent the wiping of your device if it has not started the wipe yet.') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</template>\n\t\t\t</NcActions>\n\t\t</td>\n\t</tr>\n</template>\n\n<script lang=\"ts\">\nimport type { PropType } from 'vue'\nimport type { IToken } from '../store/authtoken'\n\nimport { mdiCheck, mdiCellphone, mdiTablet, mdiMonitor, mdiWeb, mdiKey, mdiMicrosoftEdge, mdiFirefox, mdiGoogleChrome, mdiAppleSafari, mdiAndroid, mdiAppleIos } from '@mdi/js'\nimport { translate as t } from '@nextcloud/l10n'\nimport { defineComponent } from 'vue'\nimport { TokenType, useAuthTokenStore } from '../store/authtoken.ts'\n\nimport NcActions from '@nextcloud/vue/dist/Components/NcActions.js'\nimport NcActionButton from '@nextcloud/vue/dist/Components/NcActionButton.js'\nimport NcActionCheckbox from '@nextcloud/vue/dist/Components/NcActionCheckbox.js'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcDateTime from '@nextcloud/vue/dist/Components/NcDateTime.js'\nimport NcIconSvgWrapper from '@nextcloud/vue/dist/Components/NcIconSvgWrapper.js'\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\n\n// When using capture groups the following parts are extracted the first is used as the version number, the second as the OS\nconst userAgentMap = {\n\tie: /(?:MSIE|Trident|Trident\\/7.0; rv)[ :](\\d+)/,\n\t// Microsoft Edge User Agent from https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\n\tedge: /^Mozilla\\/5\\.0 \\([^)]+\\) AppleWebKit\\/[0-9.]+ \\(KHTML, like Gecko\\) Chrome\\/[0-9.]+ (?:Mobile Safari|Safari)\\/[0-9.]+ Edge\\/[0-9.]+$/,\n\t// Firefox User Agent from https://developer.mozilla.org/en-US/docs/Web/HTTP/Gecko_user_agent_string_reference\n\tfirefox: /^Mozilla\\/5\\.0 \\([^)]*(Windows|OS X|Linux)[^)]+\\) Gecko\\/[0-9.]+ Firefox\\/(\\d+)(?:\\.\\d)?$/,\n\t// Chrome User Agent from https://developer.chrome.com/multidevice/user-agent\n\tchrome: /^Mozilla\\/5\\.0 \\([^)]*(Windows|OS X|Linux)[^)]+\\) AppleWebKit\\/[0-9.]+ \\(KHTML, like Gecko\\) Chrome\\/(\\d+)[0-9.]+ (?:Mobile Safari|Safari)\\/[0-9.]+$/,\n\t// Safari User Agent from http://www.useragentstring.com/pages/Safari/\n\tsafari: /^Mozilla\\/5\\.0 \\([^)]*(Windows|OS X)[^)]+\\) AppleWebKit\\/[0-9.]+ \\(KHTML, like Gecko\\)(?: Version\\/([0-9]+)[0-9.]+)? Safari\\/[0-9.A-Z]+$/,\n\t// Android Chrome user agent: https://developers.google.com/chrome/mobile/docs/user-agent\n\tandroidChrome: /Android.*(?:; (.*) Build\\/).*Chrome\\/(\\d+)[0-9.]+/,\n\tiphone: / *CPU +iPhone +OS +([0-9]+)_(?:[0-9_])+ +like +Mac +OS +X */,\n\tipad: /\\(iPad; *CPU +OS +([0-9]+)_(?:[0-9_])+ +like +Mac +OS +X */,\n\tiosClient: /^Mozilla\\/5\\.0 \\(iOS\\) (?:ownCloud|Nextcloud)-iOS.*$/,\n\tandroidClient: /^Mozilla\\/5\\.0 \\(Android\\) (?:ownCloud|Nextcloud)-android.*$/,\n\tiosTalkClient: /^Mozilla\\/5\\.0 \\(iOS\\) Nextcloud-Talk.*$/,\n\tandroidTalkClient: /^Mozilla\\/5\\.0 \\(Android\\) Nextcloud-Talk.*$/,\n\t// DAVx5/3.3.8-beta2-gplay (2021/01/02; dav4jvm; okhttp/4.9.0) Android/10\n\tdavx5: /DAV(?:droid|x5)\\/([^ ]+)/,\n\t// Mozilla/5.0 (U; Linux; Maemo; Jolla; Sailfish; like Android 4.3) AppleWebKit/538.1 (KHTML, like Gecko) WebPirate/2.0 like Mobile Safari/538.1 (compatible)\n\twebPirate: /(Sailfish).*WebPirate\\/(\\d+)/,\n\t// Mozilla/5.0 (Maemo; Linux; U; Jolla; Sailfish; Mobile; rv:31.0) Gecko/31.0 Firefox/31.0 SailfishBrowser/1.0\n\tsailfishBrowser: /(Sailfish).*SailfishBrowser\\/(\\d+)/,\n\t// Neon 1.0.0+1\n\tneon: /Neon \\d+\\.\\d+\\.\\d+\\+\\d+/,\n}\nconst nameMap = {\n\tedge: 'Microsoft Edge',\n\tfirefox: 'Firefox',\n\tchrome: 'Google Chrome',\n\tsafari: 'Safari',\n\tandroidChrome: t('settings', 'Google Chrome for Android'),\n\tiphone: 'iPhone',\n\tipad: 'iPad',\n\tiosClient: t('settings', '{productName} iOS app', { productName: window.oc_defaults.productName }),\n\tandroidClient: t('settings', '{productName} Android app', { productName: window.oc_defaults.productName }),\n\tiosTalkClient: t('settings', '{productName} Talk for iOS', { productName: window.oc_defaults.productName }),\n\tandroidTalkClient: t('settings', '{productName} Talk for Android', { productName: window.oc_defaults.productName }),\n\tsyncClient: t('settings', 'Sync client'),\n\tdavx5: 'DAVx5',\n\twebPirate: 'WebPirate',\n\tsailfishBrowser: 'SailfishBrowser',\n\tneon: 'Neon',\n}\n\nexport default defineComponent({\n\tname: 'AuthToken',\n\tcomponents: {\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionCheckbox,\n\t\tNcButton,\n\t\tNcDateTime,\n\t\tNcIconSvgWrapper,\n\t\tNcTextField,\n\t},\n\tprops: {\n\t\ttoken: {\n\t\t\ttype: Object as PropType<IToken>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst authTokenStore = useAuthTokenStore()\n\t\treturn { authTokenStore }\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactionOpen: false,\n\t\t\trenaming: false,\n\t\t\tnewName: '',\n\t\t\toldName: '',\n\t\t\tmdiCheck,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcanChangeScope() {\n\t\t\treturn this.token.type === TokenType.PERMANENT_TOKEN\n\t\t},\n\t\t/**\n\t\t * Object ob the current user agend used by the token\n\t\t * @return Either an object containing user agent information or null if unknown\n\t\t */\n\t\tclient() {\n\t\t\t// pretty format sync client user agent\n\t\t\tconst matches = this.token.name.match(/Mozilla\\/5\\.0 \\((\\w+)\\) (?:mirall|csyncoC)\\/(\\d+\\.\\d+\\.\\d+)/)\n\n\t\t\tif (matches) {\n\t\t\t\treturn {\n\t\t\t\t\tid: 'syncClient',\n\t\t\t\t\tos: matches[1],\n\t\t\t\t\tversion: matches[2],\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const client in userAgentMap) {\n\t\t\t\tconst matches = this.token.name.match(userAgentMap[client])\n\t\t\t\tif (matches) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: client,\n\t\t\t\t\t\tos: matches[2] && matches[1],\n\t\t\t\t\t\tversion: matches[2] ?? matches[1],\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null\n\t\t},\n\t\t/**\n\t\t * Last activity of the token as ECMA timestamp (in ms)\n\t\t */\n\t\ttokenLastActivity() {\n\t\t\treturn this.token.lastActivity * 1000\n\t\t},\n\t\t/**\n\t\t * Icon to use for the current token\n\t\t */\n\t\ttokenIcon() {\n\t\t\t// For custom created app tokens / app passwords\n\t\t\tif (this.token.type === TokenType.PERMANENT_TOKEN) {\n\t\t\t\treturn mdiKey\n\t\t\t}\n\n\t\t\tswitch (this.client?.id) {\n\t\t\tcase 'edge':\n\t\t\t\treturn mdiMicrosoftEdge\n\t\t\tcase 'firefox':\n\t\t\t\treturn mdiFirefox\n\t\t\tcase 'chrome':\n\t\t\t\treturn mdiGoogleChrome\n\t\t\tcase 'safari':\n\t\t\t\treturn mdiAppleSafari\n\t\t\tcase 'androidChrome':\n\t\t\tcase 'androidClient':\n\t\t\tcase 'androidTalkClient':\n\t\t\t\treturn mdiAndroid\n\t\t\tcase 'iphone':\n\t\t\tcase 'iosClient':\n\t\t\tcase 'iosTalkClient':\n\t\t\t\treturn mdiAppleIos\n\t\t\tcase 'ipad':\n\t\t\t\treturn mdiTablet\n\t\t\tcase 'davx5':\n\t\t\t\treturn mdiCellphone\n\t\t\tcase 'syncClient':\n\t\t\t\treturn mdiMonitor\n\t\t\tcase 'webPirate':\n\t\t\tcase 'sailfishBrowser':\n\t\t\tdefault:\n\t\t\t\treturn mdiWeb\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Label to be shown for current token\n\t\t */\n\t\ttokenLabel() {\n\t\t\tif (this.token.current) {\n\t\t\t\treturn t('settings', 'This session')\n\t\t\t}\n\t\t\tif (this.client === null) {\n\t\t\t\treturn this.token.name\n\t\t\t}\n\n\t\t\tconst name = nameMap[this.client.id]\n\t\t\tif (this.client.os) {\n\t\t\t\treturn t('settings', '{client} - {version} ({system})', { client: name, system: this.client.os, version: this.client.version })\n\t\t\t} else if (this.client.version) {\n\t\t\t\treturn t('settings', '{client} - {version}', { client: name, version: this.client.version })\n\t\t\t}\n\t\t\treturn name\n\t\t},\n\t\t/**\n\t\t * If the current token is considered for remote wiping\n\t\t */\n\t\twiping() {\n\t\t\treturn this.token.type === TokenType.WIPING_TOKEN\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t\tupdateFileSystemScope(state: boolean) {\n\t\t\tthis.authTokenStore.setTokenScope(this.token, 'filesystem', state)\n\t\t},\n\t\tstartRename() {\n\t\t\t// Close action (popover menu)\n\t\t\tthis.actionOpen = false\n\n\t\t\tthis.oldName = this.token.name\n\t\t\tthis.newName = this.token.name\n\t\t\tthis.renaming = true\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.input!.select()\n\t\t\t})\n\t\t},\n\t\tcancelRename() {\n\t\t\tthis.renaming = false\n\t\t},\n\t\trevoke() {\n\t\t\tthis.actionOpen = false\n\t\t\tthis.authTokenStore.deleteToken(this.token)\n\t\t},\n\t\trename() {\n\t\t\tthis.renaming = false\n\t\t\tthis.authTokenStore.renameToken(this.token, this.newName)\n\t\t},\n\t\twipe() {\n\t\t\tthis.actionOpen = false\n\t\t\tthis.authTokenStore.wipeToken(this.token)\n\t\t},\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.auth-token {\n\tborder-top: 2px solid var(--color-border);\n\tmax-width: 200px;\n\twhite-space: normal;\n\tvertical-align: middle;\n\tposition: relative;\n\n\t&--wiping {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\n\t&__name {\n\t\tpadding-block: 10px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 6px;\n\t\tmin-width: 355px; // ensure no jumping when renaming\n\t}\n\n\t&__name-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t&__name-form {\n\t\talign-items: end;\n\t\tdisplay: flex;\n\t\tgap: 4px;\n\t}\n\n\t&__actions {\n\t\tpadding: 0 10px;\n\t}\n\n\t&__last-activity {\n\t\tpadding-inline-start: 10px;\n\t}\n\n\t.wiping-warning {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<table id=\"app-tokens-table\" class=\"token-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"token-list__header-device\">\n\t\t\t\t\t{{ t('settings', 'Device') }}\n\t\t\t\t</th>\n\t\t\t\t<th class=\"toke-list__header-activity\">\n\t\t\t\t\t{{ t('settings', 'Last activity') }}\n\t\t\t\t</th>\n\t\t\t\t<th>\n\t\t\t\t\t<span class=\"hidden-visually\">\n\t\t\t\t\t\t{{ t('settings', 'Actions') }}\n\t\t\t\t\t</span>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody class=\"token-list__body\">\n\t\t\t<AuthToken v-for=\"token in sortedTokens\"\n\t\t\t\t:key=\"token.id\"\n\t\t\t\t:token=\"token\" />\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport { translate as t } from '@nextcloud/l10n'\nimport { defineComponent } from 'vue'\nimport { useAuthTokenStore } from '../store/authtoken'\n\nimport AuthToken from './AuthToken.vue'\n\nexport default defineComponent({\n\tname: 'AuthTokenList',\n\tcomponents: {\n\t\tAuthToken,\n\t},\n\tsetup() {\n\t\tconst authTokenStore = useAuthTokenStore()\n\t\treturn { authTokenStore }\n\t},\n\tcomputed: {\n\t\tsortedTokens() {\n\t\t\treturn [...this.authTokenStore.tokens].sort((t1, t2) => t2.lastActivity - t1.lastActivity)\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.token-list {\n\twidth: 100%;\n\tmin-height: 50px;\n\tpadding-top: 5px;\n\tmax-width: fit-content;\n\n\tth {\n\t\tpadding-block: 10px;\n\t\tpadding-inline-start: 10px;\n\t}\n\n\t#{&}__header-device {\n\t\tpadding-inline-start: 50px; // 44px icon + 6px padding\n\t}\n\t&__header-activity {\n\t\ttext-align: end;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcDialog :open.sync=\"open\"\n\t\t:name=\"t('settings', 'New app password')\"\n\t\tcontent-classes=\"token-dialog\">\n\t\t<p>\n\t\t\t{{ t('settings', 'Use the credentials below to configure your app or device. For security reasons this password will only be shown once.') }}\n\t\t</p>\n\t\t<div class=\"token-dialog__name\">\n\t\t\t<NcTextField :label=\"t('settings', 'Login')\" :value=\"loginName\" readonly />\n\t\t\t<NcButton type=\"tertiary\"\n\t\t\t\t:title=\"copyLoginNameLabel\"\n\t\t\t\t:aria-label=\"copyLoginNameLabel\"\n\t\t\t\t@click=\"copyLoginName\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path=\"copyNameIcon\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t\t<div class=\"token-dialog__password\">\n\t\t\t<NcTextField ref=\"appPassword\"\n\t\t\t\t:label=\"t('settings', 'Password')\"\n\t\t\t\t:value=\"appPassword\"\n\t\t\t\treadonly />\n\t\t\t<NcButton type=\"tertiary\"\n\t\t\t\t:title=\"copyPasswordLabel\"\n\t\t\t\t:aria-label=\"copyPasswordLabel\"\n\t\t\t\t@click=\"copyPassword\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path=\"copyPasswordIcon\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t\t<div class=\"token-dialog__qrcode\">\n\t\t\t<NcButton v-if=\"!showQRCode\" @click=\"showQRCode = true\">\n\t\t\t\t{{ t('settings', 'Show QR code for mobile apps') }}\n\t\t\t</NcButton>\n\t\t\t<QR v-else :value=\"qrUrl\" />\n\t\t</div>\n\t</NcDialog>\n</template>\n\n<script lang=\"ts\">\nimport type { ITokenResponse } from '../store/authtoken'\n\nimport { mdiCheck, mdiContentCopy } from '@mdi/js'\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { getRootUrl } from '@nextcloud/router'\nimport { defineComponent, type PropType } from 'vue'\n\nimport QR from '@chenfengyuan/vue-qrcode'\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcDialog from '@nextcloud/vue/dist/Components/NcDialog.js'\nimport NcIconSvgWrapper from '@nextcloud/vue/dist/Components/NcIconSvgWrapper.js'\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\n\nimport logger from '../logger'\n\nexport default defineComponent({\n\tname: 'AuthTokenSetupDialog',\n\tcomponents: {\n\t\tNcButton,\n\t\tNcDialog,\n\t\tNcIconSvgWrapper,\n\t\tNcTextField,\n\t\tQR,\n\t},\n\tprops: {\n\t\ttoken: {\n\t\t\ttype: Object as PropType<ITokenResponse|null>,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisNameCopied: false,\n\t\t\tisPasswordCopied: false,\n\t\t\tshowQRCode: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\topen: {\n\t\t\tget() {\n\t\t\t\treturn this.token !== null\n\t\t\t},\n\t\t\tset(value: boolean) {\n\t\t\t\tif (!value) {\n\t\t\t\t\tthis.$emit('close')\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tcopyPasswordIcon() {\n\t\t\treturn this.isPasswordCopied ? mdiCheck : mdiContentCopy\n\t\t},\n\t\tcopyNameIcon() {\n\t\t\treturn this.isNameCopied ? mdiCheck : mdiContentCopy\n\t\t},\n\t\tappPassword() {\n\t\t\treturn this.token?.token ?? ''\n\t\t},\n\t\tloginName() {\n\t\t\treturn this.token?.loginName ?? ''\n\t\t},\n\t\tqrUrl() {\n\t\t\tconst server = window.location.protocol + '//' + window.location.host + getRootUrl()\n\t\t\treturn `nc://login/user:${this.loginName}&password:${this.appPassword}&server:${server}`\n\t\t},\n\t\tcopyPasswordLabel() {\n\t\t\tif (this.isPasswordCopied) {\n\t\t\t\treturn t('settings', 'App password copied!')\n\t\t\t}\n\t\t\treturn t('settings', 'Copy app password')\n\t\t},\n\t\tcopyLoginNameLabel() {\n\t\t\tif (this.isNameCopied) {\n\t\t\t\treturn t('settings', 'Login name copied!')\n\t\t\t}\n\t\t\treturn t('settings', 'Copy login name')\n\t\t},\n\t},\n\twatch: {\n\t\ttoken() {\n\t\t\t// reset showing the QR code on token change\n\t\t\tthis.showQRCode = false\n\t\t},\n\t\topen() {\n\t\t\tif (this.open) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.appPassword!.select()\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t\tasync copyPassword() {\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(this.appPassword)\n\t\t\t\tthis.isPasswordCopied = true\n\t\t\t} catch (e) {\n\t\t\t\tthis.isPasswordCopied = false\n\t\t\t\tlogger.error(e as Error)\n\t\t\t\tshowError(t('settings', 'Could not copy app password. Please copy it manually.'))\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.isPasswordCopied = false\n\t\t\t\t}, 4000)\n\t\t\t}\n\t\t},\n\t\tasync copyLoginName() {\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(this.loginName)\n\t\t\t\tthis.isNameCopied = true\n\t\t\t} catch (e) {\n\t\t\t\tthis.isNameCopied = false\n\t\t\t\tlogger.error(e as Error)\n\t\t\t\tshowError(t('settings', 'Could not copy login name. Please copy it manually.'))\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.isNameCopied = false\n\t\t\t\t}, 4000)\n\t\t\t}\n\t\t},\n\t},\n})\n</script>\n\n<style scoped lang=\"scss\">\n:deep(.token-dialog) {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 12px;\n\n\tpadding-inline: 22px;\n\tpadding-block-end: 20px;\n\n\t> * {\n\t\tbox-sizing: border-box;\n\t}\n}\n\n.token-dialog {\n\t&__name, &__password {\n\t\talign-items: end;\n\t\tdisplay: flex;\n\t\tgap: 10px;\n\n\t\t:deep(input) {\n\t\t\tfont-family: monospace;\n\t\t}\n\t}\n\n\t&__qrcode {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<form id=\"generate-app-token-section\"\n\t\tclass=\"row spacing\"\n\t\t@submit.prevent=\"submit\">\n\t\t<!-- Port to TextField component when available -->\n\t\t<NcTextField :value.sync=\"deviceName\"\n\t\t\ttype=\"text\"\n\t\t\t:maxlength=\"120\"\n\t\t\t:disabled=\"loading\"\n\t\t\tclass=\"app-name-text-field\"\n\t\t\t:label=\"t('settings', 'App name')\"\n\t\t\t:placeholder=\"t('settings', 'App name')\" />\n\t\t<NcButton type=\"primary\"\n\t\t\t:disabled=\"loading || deviceName.length === 0\"\n\t\t\tnative-type=\"submit\">\n\t\t\t{{ t('settings', 'Create new app password') }}\n\t\t</NcButton>\n\n\t\t<AuthTokenSetupDialog :token=\"newToken\" @close=\"newToken = null\" />\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { defineComponent } from 'vue'\nimport { useAuthTokenStore, type ITokenResponse } from '../store/authtoken'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcTextField from '@nextcloud/vue/dist/Components/NcTextField.js'\n\nimport AuthTokenSetupDialog from './AuthTokenSetupDialog.vue'\nimport logger from '../logger'\n\nexport default defineComponent({\n\tname: 'AuthTokenSetup',\n\tcomponents: {\n\t\tNcButton,\n\t\tNcTextField,\n\t\tAuthTokenSetupDialog,\n\t},\n\tsetup() {\n\t\tconst authTokenStore = useAuthTokenStore()\n\t\treturn { authTokenStore }\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdeviceName: '',\n\t\t\tloading: false,\n\t\t\tnewToken: null as ITokenResponse|null,\n\t\t}\n\t},\n\tmethods: {\n\t\tt,\n\t\treset() {\n\t\t\tthis.loading = false\n\t\t\tthis.deviceName = ''\n\t\t\tthis.newToken = null\n\t\t},\n\t\tasync submit() {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.newToken = await this.authTokenStore.addToken(this.deviceName)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error(error as Error)\n\t\t\t\tshowError(t('settings', 'Error while creating device token'))\n\t\t\t\tthis.reset()\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n\t.app-name-text-field {\n\t\theight: 44px !important;\n\t\tpadding-left: 12px;\n\t\tmargin-right: 12px;\n\t\twidth: 200px;\n\t}\n\n\t.row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.spacing {\n\t\tpadding-top: 16px;\n\t}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div id=\"security\" class=\"section\">\n\t\t<h2>{{ t('settings', 'Devices & sessions', {}, undefined, {sanitize: false}) }}</h2>\n\t\t<p class=\"settings-hint hidden-when-empty\">\n\t\t\t{{ t('settings', 'Web, desktop and mobile clients currently logged in to your account.') }}\n\t\t</p>\n\t\t<AuthTokenList />\n\t\t<AuthTokenSetup v-if=\"canCreateToken\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport { defineComponent } from 'vue'\n\nimport AuthTokenList from './AuthTokenList.vue'\nimport AuthTokenSetup from './AuthTokenSetup.vue'\n\nexport default defineComponent({\n\tname: 'AuthTokenSection',\n\tcomponents: {\n\t\tAuthTokenList,\n\t\tAuthTokenSetup,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanCreateToken: loadState('settings', 'can_create_app_token'),\n\t\t}\n\t},\n\tmethods: {\n\t\tt,\n\t},\n})\n</script>\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Vue from 'vue'\nimport VTooltip from 'v-tooltip'\n\nimport AuthTokenSection from './components/AuthTokenSection.vue'\nimport { PiniaVuePlugin, createPinia } from 'pinia'\n\nimport '@nextcloud/password-confirmation/dist/style.css'\n\nconst pinia = createPinia()\n\nVue.use(PiniaVuePlugin)\nVue.use(VTooltip, { defaultHtml: false })\nVue.prototype.t = t\n\nconst View = Vue.extend(AuthTokenSection)\nnew View({ pinia }).$mount('#security-authtokens')\n"],"names":["BASE_URL","generateUrl","confirm","resolve","t","TokenType","useAuthTokenStore","defineStore","loadState","token","data","axios","name","logger","confirmPassword","id","error","showError","newName","oldName","scope","value","oldVal","userAgentMap","nameMap","_sfc_main$4","defineComponent","NcActions","NcActionButton","NcActionCheckbox","NcButton","NcDateTime","NcIconSvgWrapper","NcTextField","mdiCheck","matches","client","_a","mdiKey","mdiMicrosoftEdge","mdiFirefox","mdiGoogleChrome","mdiAppleSafari","mdiAndroid","mdiAppleIos","mdiTablet","mdiCellphone","mdiMonitor","mdiWeb","state","_sfc_main$3","AuthToken","t1","t2","_sfc_main$2","NcDialog","QR","mdiContentCopy","_b","server","getRootUrl","e","_sfc_main$1","AuthTokenSetupDialog","_sfc_main","AuthTokenList","AuthTokenSetup","pinia","createPinia","Vue","PiniaVuePlugin","VTooltip","View","AuthTokenSection"],"mappings":"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"}