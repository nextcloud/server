"use strict";(globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[]).push([[2426],{3357(t,n,e){e.d(n,{A:()=>s});var o=e(71354),i=e.n(o),r=e(76314),a=e.n(r)()(i());a.push([t.id,"\n._loginFlowContainer_OSz1H {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n","",{version:3,sources:["webpack://./core/src/components/LoginFlow/LoginFlowContainer.vue"],names:[],mappings:";AAqBA;CACA,aAAA;CACA,sBAAA;AACA",sourcesContent:['\x3c!--\n - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<script setup lang="ts">\nimport NcGuestContent from \'@nextcloud/vue/components/NcGuestContent\'\n\ndefineProps<{\n\theading: string\n}>()\n<\/script>\n\n<template>\n\t<NcGuestContent class="picker-window" :class="$style.loginFlowContainer">\n\t\t<h2>{{ heading }}</h2>\n\t\t<slot />\n\t</NcGuestContent>\n</template>\n\n<style module>\n.loginFlowContainer {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n</style>\n'],sourceRoot:""}]),a.locals={loginFlowContainer:"_loginFlowContainer_OSz1H"};const s=a},7579(t,n,e){e.d(n,{A:()=>h});var o=e(85471),i=e(66768);const r=(0,o.pM)({__name:"LoginFlowContainer",props:{heading:null},setup:t=>({__sfc:!0,NcGuestContent:i.A})});var a=e(85072),s=e.n(a),l=e(97825),c=e.n(l),u=e(77659),d=e.n(u),m=e(55056),p=e.n(m),g=e(10540),v=e.n(g),f=e(41113),_=e.n(f),A=e(3357),y={};y.styleTagTransform=_(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=v(),s()(A.A,y);const C=A.A&&A.A.locals?A.A.locals:void 0,h=(0,e(14486).A)(r,function(){var t=this,n=t._self._c;return n(t._self._setupProxy.NcGuestContent,{staticClass:"picker-window",class:t.$style.loginFlowContainer},[n("h2",[t._v(t._s(t.heading))]),t._v(" "),t._t("default")],2)},[],!1,function(t){this.$style=C.locals||C},null,null).exports},32426(t,n,e){e.r(n),e.d(n,{default:()=>S});var o=e(85471),i=e(21777),r=e(81222),a=e(53334),s=e(47176),l=e(74095),c=e(371),u=e(7579);const d=(0,o.pM)({__name:"LoginFlowGrant",setup(t){const{clientIdentifier:n,oauthState:e,providedRedirectUri:o,actionUrl:d,client:m,direct:p,instanceName:g,stateToken:v,userDisplayName:f,userId:_}=(0,r.C)("core","loginFlowGrant");return{__sfc:!0,clientIdentifier:n,oauthState:e,providedRedirectUri:o,actionUrl:d,client:m,direct:p,instanceName:g,stateToken:v,userDisplayName:f,userId:_,requestToken:(0,i.do)(),onSubmit:async function(t){if((0,s.oB)(s.mH.Lax))return t.preventDefault(),t.stopPropagation(),await(0,s.C5)(),t.target.submit(),!1},t:a.t,NcButton:l.A,NcNoteCard:c.A,LoginFlowContainer:u.A}}});var m=e(85072),p=e.n(m),g=e(97825),v=e.n(g),f=e(77659),_=e.n(f),A=e(55056),y=e.n(A),C=e(10540),h=e.n(C),w=e(41113),N=e.n(w),b=e(61752),F={};F.styleTagTransform=N(),F.setAttributes=y(),F.insert=_().bind(null,"head"),F.domAPI=v(),F.insertStyleElement=h(),p()(b.A,F);const x=b.A&&b.A.locals?b.A.locals:void 0,S=(0,e(14486).A)(d,function(){var t=this,n=t._self._c,e=t._self._setupProxy;return n(e.LoginFlowContainer,{attrs:{heading:e.t("core","Account access")}},[n(e.NcNoteCard,{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(e.t("core","Currently logged in as {userDisplayName} ({userId}).",{userDisplayName:e.userDisplayName,userId:e.userId}))+"\n\t\t"),n("br"),t._v("\n\t\t"+t._s(e.t("core",'You are about to grant "{client}" access to your {instanceName} account.',{client:e.client,instanceName:e.instanceName}))+"\n\t")]),t._v(" "),n("form",{attrs:{method:"POST",action:e.actionUrl},on:{submit:e.onSubmit}},[n("input",{attrs:{type:"hidden",name:"requesttoken"},domProps:{value:e.requestToken}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"stateToken"},domProps:{value:e.stateToken}}),t._v(" "),e.direct?n("input",{attrs:{type:"hidden",name:"direct",value:"1"}}):t._e(),t._v(" "),void 0!==e.clientIdentifier?n("input",{attrs:{type:"hidden",name:"clientIdentifier"},domProps:{value:e.clientIdentifier}}):t._e(),t._v(" "),void 0!==e.oauthState?n("input",{attrs:{type:"hidden",name:"oauthState"},domProps:{value:e.oauthState}}):t._e(),t._v(" "),void 0!==e.providedRedirectUri?n("input",{attrs:{type:"hidden",name:"providedRedirectUri"},domProps:{value:e.providedRedirectUri}}):t._e(),t._v(" "),n(e.NcButton,{class:t.$style.loginFlowGrant__button,attrs:{type:"submit",variant:"primary"}},[t._v("\n\t\t\t"+t._s(e.t("core","Grant access"))+"\n\t\t")])],1)],1)},[],!1,function(t){this.$style=x.locals||x},null,null).exports},61752(t,n,e){e.d(n,{A:()=>s});var o=e(71354),i=e.n(o),r=e(76314),a=e.n(r)()(i());a.push([t.id,"\n._loginFlowGrant__button_Fj9_g {\n\tmargin-top: 0.5rem;\n\tmargin-inline: auto;\n\tmin-width: 50% !important;\n}\n","",{version:3,sources:["webpack://./core/src/views/LoginFlowGrant.vue"],names:[],mappings:";AAoGA;CACA,kBAAA;CACA,mBAAA;CACA,yBAAA;AACA",sourcesContent:['\x3c!--\n - SPDX-FileCopyrightText: 2026 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<script setup lang="ts">\nimport { getRequestToken } from \'@nextcloud/auth\'\nimport { loadState } from \'@nextcloud/initial-state\'\nimport { t } from \'@nextcloud/l10n\'\nimport { confirmPassword, isPasswordConfirmationRequired, PwdConfirmationMode } from \'@nextcloud/password-confirmation\'\nimport NcButton from \'@nextcloud/vue/components/NcButton\'\nimport NcNoteCard from \'@nextcloud/vue/components/NcNoteCard\'\nimport LoginFlowContainer from \'../components/LoginFlow/LoginFlowContainer.vue\'\n\nconst {\n\tclientIdentifier,\n\toauthState,\n\tprovidedRedirectUri,\n\n\tactionUrl,\n\tclient,\n\tdirect,\n\tinstanceName,\n\tstateToken,\n\tuserDisplayName,\n\tuserId,\n} = loadState<{\n\tclientIdentifier?: string\n\toauthState?: string\n\tprovidedRedirectUri?: string\n\n\tactionUrl: string\n\tclient: string\n\tdirect: boolean\n\tinstanceName: string\n\tstateToken: string\n\tuserId: string\n\tuserDisplayName: string\n}>(\'core\', \'loginFlowGrant\')\n\nconst requestToken = getRequestToken()\n\n/**\n * Handle submit event to confirm password if required\n *\n * @param event - The submit event\n */\nasync function onSubmit(event: SubmitEvent) {\n\tif (isPasswordConfirmationRequired(PwdConfirmationMode.Lax)) {\n\t\tevent.preventDefault()\n\t\tevent.stopPropagation()\n\n\t\tawait confirmPassword()\n\t\t;(event.target as HTMLFormElement).submit()\n\t\treturn false\n\t}\n}\n<\/script>\n\n<template>\n\t<LoginFlowContainer :heading="t(\'core\', \'Account access\')">\n\t\t<NcNoteCard type="info">\n\t\t\t{{ t(\'core\', \'Currently logged in as {userDisplayName} ({userId}).\', { userDisplayName, userId }) }}\n\t\t\t<br>\n\t\t\t{{ t(\'core\', \'You are about to grant "{client}" access to your {instanceName} account.\', { client, instanceName }) }}\n\t\t</NcNoteCard>\n\n\t\t<form method="POST" :action="actionUrl" @submit="onSubmit">\n\t\t\t<input type="hidden" name="requesttoken" :value="requestToken">\n\t\t\t<input type="hidden" name="stateToken" :value="stateToken">\n\n\t\t\t<input\n\t\t\t\tv-if="direct"\n\t\t\t\ttype="hidden"\n\t\t\t\tname="direct"\n\t\t\t\tvalue="1">\n\t\t\t<input\n\t\t\t\tv-if="clientIdentifier !== undefined"\n\t\t\t\ttype="hidden"\n\t\t\t\tname="clientIdentifier"\n\t\t\t\t:value="clientIdentifier">\n\t\t\t<input\n\t\t\t\tv-if="oauthState !== undefined"\n\t\t\t\ttype="hidden"\n\t\t\t\tname="oauthState"\n\t\t\t\t:value="oauthState">\n\t\t\t<input\n\t\t\t\tv-if="providedRedirectUri !== undefined"\n\t\t\t\ttype="hidden"\n\t\t\t\tname="providedRedirectUri"\n\t\t\t\t:value="providedRedirectUri">\n\n\t\t\t<NcButton :class="$style.loginFlowGrant__button" type="submit" variant="primary">\n\t\t\t\t{{ t(\'core\', \'Grant access\') }}\n\t\t\t</NcButton>\n\t\t</form>\n\t</LoginFlowContainer>\n</template>\n\n<style module>\n.loginFlowGrant__button {\n\tmargin-top: 0.5rem;\n\tmargin-inline: auto;\n\tmin-width: 50% !important;\n}\n</style>\n'],sourceRoot:""}]),a.locals={loginFlowGrant__button:"_loginFlowGrant__button_Fj9_g"};const s=a}}]);
//# sourceMappingURL=2426-2426.js.map?v=7593fca92590d7569251