{"version":3,"file":"settings-legacy-admin.js?v=7be66bbde1dde0e14a61","mappings":"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","sources":["webpack:///nextcloud/apps/settings/src/admin.js","webpack:///nextcloud/webpack/startup"],"sourcesContent":["window.addEventListener('DOMContentLoaded', () => {\n\t$('#loglevel').change(function() {\n\t\t$.post(OC.generateUrl('/settings/admin/log/level'), { level: $(this).val() }, () => {\n\t\t\tOC.Log.reload()\n\t\t})\n\t})\n\n\t$('#mail_smtpauth').change(function() {\n\t\tif (!this.checked) {\n\t\t\t$('#mail_credentials').addClass('hidden')\n\t\t} else {\n\t\t\t$('#mail_credentials').removeClass('hidden')\n\t\t}\n\t})\n\n\t$('#mail_smtpmode').change(function() {\n\t\tif ($(this).val() !== 'smtp') {\n\t\t\t$('#setting_smtpauth').addClass('hidden')\n\t\t\t$('#setting_smtphost').addClass('hidden')\n\t\t\t$('#mail_smtpsecure_label').addClass('hidden')\n\t\t\t$('#mail_smtpsecure').addClass('hidden')\n\t\t\t$('#mail_credentials').addClass('hidden')\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').removeClass('hidden')\n\t\t} else {\n\t\t\t$('#setting_smtpauth').removeClass('hidden')\n\t\t\t$('#setting_smtphost').removeClass('hidden')\n\t\t\t$('#mail_smtpsecure_label').removeClass('hidden')\n\t\t\t$('#mail_smtpsecure').removeClass('hidden')\n\t\t\tif ($('#mail_smtpauth').is(':checked')) {\n\t\t\t\t$('#mail_credentials').removeClass('hidden')\n\t\t\t}\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').addClass('hidden')\n\t\t}\n\t})\n\n\tconst changeEmailSettings = function() {\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(changeEmailSettings)\n\t\t\treturn\n\t\t}\n\n\t\tOC.msg.startSaving('#mail_settings_msg')\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings'),\n\t\t\ttype: 'POST',\n\t\t\tdata: $('#mail_general_settings_form').serialize(),\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\n\t\t\t},\n\t\t})\n\t}\n\n\tconst toggleEmailCredentials = function() {\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(toggleEmailCredentials)\n\t\t\treturn\n\t\t}\n\n\t\tOC.msg.startSaving('#mail_settings_msg')\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings/credentials'),\n\t\t\ttype: 'POST',\n\t\t\tdata: $('#mail_credentials_settings').serialize(),\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\n\t\t\t},\n\t\t})\n\t}\n\n\t$('#mail_general_settings_form').change(changeEmailSettings)\n\t$('#mail_credentials_settings_submit').click(toggleEmailCredentials)\n\t$('#mail_smtppassword').click(() => {\n\t\tif (this.type === 'text' && this.value === '********') {\n\t\t\tthis.type = 'password'\n\t\t\tthis.value = ''\n\t\t}\n\t})\n\n\t$('#sendtestemail').click((event) => {\n\t\tevent.preventDefault()\n\t\tOC.msg.startAction('#sendtestmail_msg', t('settings', 'Sendingâ€¦'))\n\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailtest'),\n\t\t\ttype: 'POST',\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#sendtestmail_msg', t('settings', 'Email sent'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#sendtestmail_msg', xhr.responseJSON)\n\t\t\t},\n\t\t})\n\t})\n\n\tconst setupChecks = () => {\n\t\t// run setup checks then gather error messages\n\t\t$.when(\n\t\t\tOC.SetupChecks.checkWebDAV(),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/webfinger', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/nodeinfo', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/caldav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/carddav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocm-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocs-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkSetup(),\n\t\t\tOC.SetupChecks.checkGeneric(),\n\t\t\tOC.SetupChecks.checkWOFF2Loading(OC.filePath('core', '', 'fonts/NotoSans-Regular-latin.woff2'), OC.theme.docPlaceholderUrl),\n\t\t\tOC.SetupChecks.checkDataProtected(),\n\t\t).then((check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11) => {\n\t\t\tconst messages = [].concat(check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11)\n\t\t\tconst $el = $('#postsetupchecks')\n\t\t\t$('#security-warning-state-loading').addClass('hidden')\n\n\t\t\tlet hasMessages = false\n\t\t\tconst $errorsEl = $el.find('.errors')\n\t\t\tconst $warningsEl = $el.find('.warnings')\n\t\t\tconst $infoEl = $el.find('.info')\n\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tswitch (messages[i].type) {\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_INFO:\n\t\t\t\t\t$infoEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t\tbreak\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_WARNING:\n\t\t\t\t\t$warningsEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t\tbreak\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_ERROR:\n\t\t\t\tdefault:\n\t\t\t\t\t$errorsEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($errorsEl.find('li').length > 0) {\n\t\t\t\t$errorsEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\t\t\tif ($warningsEl.find('li').length > 0) {\n\t\t\t\t$warningsEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\t\t\tif ($infoEl.find('li').length > 0) {\n\t\t\t\t$infoEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\n\t\t\tif (hasMessages) {\n\t\t\t\t$('#postsetupchecks-hint').removeClass('hidden')\n\t\t\t\tif ($errorsEl.find('li').length > 0) {\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\n\t\t\t\t} else {\n\t\t\t\t\t$('#security-warning-state-warning').removeClass('hidden')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst securityWarning = $('#security-warning')\n\t\t\t\tif (securityWarning.children('ul').children().length === 0) {\n\t\t\t\t\t$('#security-warning-state-ok').removeClass('hidden')\n\t\t\t\t} else {\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tif (document.getElementById('security-warning') !== null) {\n\t\tsetupChecks()\n\t}\n})\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[39583]();\n"],"names":["window","addEventListener","$","change","post","OC","generateUrl","level","this","val","Log","reload","checked","removeClass","addClass","is","changeEmailSettings","PasswordConfirmation","requiresPasswordConfirmation","requirePasswordConfirmation","msg","startSaving","ajax","url","type","data","serialize","success","finishedSuccess","t","error","xhr","finishedError","responseJSON","toggleEmailCredentials","click","event","preventDefault","startAction","document","getElementById","when","SetupChecks","checkWebDAV","checkWellKnownUrl","theme","docPlaceholderUrl","checkProviderUrl","getRootPath","checkSetup","checkGeneric","checkWOFF2Loading","filePath","checkDataProtected","then","check1","check2","check3","check4","check5","check6","check7","check8","check9","check10","check11","messages","concat","$el","hasMessages","$errorsEl","find","$warningsEl","$infoEl","i","length","MESSAGE_TYPE_INFO","append","MESSAGE_TYPE_WARNING","MESSAGE_TYPE_ERROR","children"],"sourceRoot":""}