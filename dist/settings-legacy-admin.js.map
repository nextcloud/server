{"version":3,"file":"settings-legacy-admin.js?v=0f765f80ba1c1f32f578","mappings":"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","sources":["webpack:///nextcloud/apps\\settings\\src\\admin.js","webpack:///nextcloud/webpack\\startup"],"sourcesContent":["window.addEventListener('DOMContentLoaded', () => {\r\n\t$('#linksExcludedGroups,#passwordsExcludedGroups').each(function(index, element) {\r\n\t\tOC.Settings.setupGroupsSelect($(element))\r\n\t\t$(element).change(function(ev) {\r\n\t\t\tlet groups = ev.val || []\r\n\t\t\tgroups = JSON.stringify(groups)\r\n\t\t\tOCP.AppConfig.setValue('core', $(this).attr('name'), groups)\r\n\t\t})\r\n\t})\r\n\r\n\t$('#loglevel').change(function() {\r\n\t\t$.post(OC.generateUrl('/settings/admin/log/level'), { level: $(this).val() }, () => {\r\n\t\t\tOC.Log.reload()\r\n\t\t})\r\n\t})\r\n\r\n\t$('#shareAPIEnabled').change(function() {\r\n\t\t$('#shareAPI p:not(#enable)').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#shareapiExpireAfterNDays').on('input', function() {\r\n\t\tthis.value = this.value.replace(/\\D/g, '')\r\n\t})\r\n\r\n\t$('#shareAPI input:not(.noJSAutoUpdate)').change(function() {\r\n\t\tlet value = $(this).val()\r\n\t\tif ($(this).attr('type') === 'checkbox') {\r\n\t\t\tif (this.checked) {\r\n\t\t\t\tvalue = 'yes'\r\n\t\t\t} else {\r\n\t\t\t\tvalue = 'no'\r\n\t\t\t}\r\n\t\t}\r\n\t\tOCP.AppConfig.setValue('core', $(this).attr('name'), value)\r\n\t})\r\n\r\n\t$('#shareapiDefaultExpireDate').change(function() {\r\n\t\t$('#setDefaultExpireDate').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#shareapiDefaultInternalExpireDate').change(function() {\r\n\t\t$('#setDefaultInternalExpireDate').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#shareapiDefaultRemoteExpireDate').change(function() {\r\n\t\t$('#setDefaultRemoteExpireDate').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#enableLinkPasswordByDefault').change(function() {\r\n\t\tif (this.checked) {\r\n\t\t\t$('#enforceLinkPassword').removeAttr('disabled')\r\n\t\t\t$('#passwordsExcludedGroups').removeAttr('disabled')\r\n\t\t} else {\r\n\t\t\t$('#enforceLinkPassword').attr('disabled', '')\r\n\t\t\t$('#passwordsExcludedGroups').attr('disabled', '')\r\n\r\n\t\t\t// Uncheck \"Enforce password protection\" when \"Always asks for a\r\n\t\t\t// password\" is unchecked; the change event needs to be explicitly\r\n\t\t\t// triggered so it behaves like a change done by the user.\r\n\t\t\t$('#enforceLinkPassword').removeAttr('checked').trigger('change')\r\n\t\t}\r\n\t})\r\n\r\n\t$('#enforceLinkPassword').change(function() {\r\n\t\t$('#selectPasswordsExcludedGroups').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#publicShareDisclaimer').change(function() {\r\n\t\t$('#publicShareDisclaimerText').toggleClass('hidden', !this.checked)\r\n\t\tif (!this.checked) {\r\n\t\t\tsavePublicShareDisclaimerText('')\r\n\t\t}\r\n\t})\r\n\r\n\t$('#shareApiDefaultPermissionsSection input').change(function(ev) {\r\n\t\tconst $el = $('#shareApiDefaultPermissions')\r\n\t\tconst $target = $(ev.target)\r\n\r\n\t\tlet value = $el.val()\r\n\t\tif ($target.is(':checked')) {\r\n\t\t\tvalue = value | $target.val()\r\n\t\t} else {\r\n\t\t\tvalue = value & ~$target.val()\r\n\t\t}\r\n\r\n\t\t// always set read permission\r\n\t\tvalue |= OC.PERMISSION_READ\r\n\r\n\t\t// this will trigger the field's change event and will save it\r\n\t\t$el.val(value).change()\r\n\r\n\t\tev.preventDefault()\r\n\r\n\t\treturn false\r\n\t})\r\n\r\n\tconst savePublicShareDisclaimerText = _.debounce(function(value) {\r\n\t\tconst options = {\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tOC.msg.finishedSuccess('#publicShareDisclaimerStatus', t('settings', 'Saved'))\r\n\t\t\t},\r\n\t\t\terror: () => {\r\n\t\t\t\tOC.msg.finishedError('#publicShareDisclaimerStatus', t('settings', 'Not saved'))\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tOC.msg.startSaving('#publicShareDisclaimerStatus')\r\n\t\tif (_.isString(value) && value !== '') {\r\n\t\t\tOCP.AppConfig.setValue('core', 'shareapi_public_link_disclaimertext', value, options)\r\n\t\t} else {\r\n\t\t\t$('#publicShareDisclaimerText').val('')\r\n\t\t\tOCP.AppConfig.deleteKey('core', 'shareapi_public_link_disclaimertext', options)\r\n\t\t}\r\n\t}, 500)\r\n\r\n\t$('#publicShareDisclaimerText').on('change, keyup', function() {\r\n\t\tsavePublicShareDisclaimerText(this.value)\r\n\t})\r\n\r\n\t$('#shareapi_allow_share_dialog_user_enumeration').on('change', function() {\r\n\t\t$('#shareapi_restrict_user_enumeration_to_group_setting').toggleClass('hidden', !this.checked)\r\n\t\t$('#shareapi_restrict_user_enumeration_to_phone_setting').toggleClass('hidden', !this.checked)\r\n\t\t$('#shareapi_restrict_user_enumeration_combinewarning_setting').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#allowLinks').change(function() {\r\n\t\t$('#publicLinkSettings').toggleClass('hidden', !this.checked)\r\n\t\t$('#setDefaultExpireDate').toggleClass('hidden', !(this.checked && $('#shareapiDefaultExpireDate')[0].checked))\r\n\t})\r\n\r\n\t$('#mail_smtpauth').change(function() {\r\n\t\tif (!this.checked) {\r\n\t\t\t$('#mail_credentials').addClass('hidden')\r\n\t\t} else {\r\n\t\t\t$('#mail_credentials').removeClass('hidden')\r\n\t\t}\r\n\t})\r\n\r\n\t$('#mail_smtpmode').change(function() {\r\n\t\tif ($(this).val() !== 'smtp') {\r\n\t\t\t$('#setting_smtpauth').addClass('hidden')\r\n\t\t\t$('#setting_smtphost').addClass('hidden')\r\n\t\t\t$('#mail_smtpsecure_label').addClass('hidden')\r\n\t\t\t$('#mail_smtpsecure').addClass('hidden')\r\n\t\t\t$('#mail_credentials').addClass('hidden')\r\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').removeClass('hidden')\r\n\t\t} else {\r\n\t\t\t$('#setting_smtpauth').removeClass('hidden')\r\n\t\t\t$('#setting_smtphost').removeClass('hidden')\r\n\t\t\t$('#mail_smtpsecure_label').removeClass('hidden')\r\n\t\t\t$('#mail_smtpsecure').removeClass('hidden')\r\n\t\t\tif ($('#mail_smtpauth').is(':checked')) {\r\n\t\t\t\t$('#mail_credentials').removeClass('hidden')\r\n\t\t\t}\r\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').addClass('hidden')\r\n\t\t}\r\n\t})\r\n\r\n\tconst changeEmailSettings = function() {\r\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\r\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(changeEmailSettings)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tOC.msg.startSaving('#mail_settings_msg')\r\n\t\t$.ajax({\r\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings'),\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: $('#mail_general_settings_form').serialize(),\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\r\n\t\t\t},\r\n\t\t\terror: (xhr) => {\r\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tconst toggleEmailCredentials = function() {\r\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\r\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(toggleEmailCredentials)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tOC.msg.startSaving('#mail_settings_msg')\r\n\t\t$.ajax({\r\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings/credentials'),\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: $('#mail_credentials_settings').serialize(),\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\r\n\t\t\t},\r\n\t\t\terror: (xhr) => {\r\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\t$('#mail_general_settings_form').change(changeEmailSettings)\r\n\t$('#mail_credentials_settings_submit').click(toggleEmailCredentials)\r\n\t$('#mail_smtppassword').click(() => {\r\n\t\tif (this.type === 'text' && this.value === '********') {\r\n\t\t\tthis.type = 'password'\r\n\t\t\tthis.value = ''\r\n\t\t}\r\n\t})\r\n\r\n\t$('#sendtestemail').click((event) => {\r\n\t\tevent.preventDefault()\r\n\t\tOC.msg.startAction('#sendtestmail_msg', t('settings', 'Sendingâ€¦'))\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: OC.generateUrl('/settings/admin/mailtest'),\r\n\t\t\ttype: 'POST',\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tOC.msg.finishedSuccess('#sendtestmail_msg', t('settings', 'Email sent'))\r\n\t\t\t},\r\n\t\t\terror: (xhr) => {\r\n\t\t\t\tOC.msg.finishedError('#sendtestmail_msg', xhr.responseJSON)\r\n\t\t\t},\r\n\t\t})\r\n\t})\r\n\r\n\t$('#allowGroupSharing').change(function() {\r\n\t\t$('#allowGroupSharing').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\t$('#shareapiExcludeGroups').change(function() {\r\n\t\t$('#selectExcludedGroups').toggleClass('hidden', !this.checked)\r\n\t})\r\n\r\n\tconst setupChecks = () => {\r\n\t\t// run setup checks then gather error messages\r\n\t\t$.when(\r\n\t\t\tOC.SetupChecks.checkWebDAV(),\r\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/webfinger', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\r\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/nodeinfo', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\r\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/caldav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\r\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/carddav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\r\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocm-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\r\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocs-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\r\n\t\t\tOC.SetupChecks.checkSetup(),\r\n\t\t\tOC.SetupChecks.checkGeneric(),\r\n\t\t\tOC.SetupChecks.checkWOFF2Loading(OC.filePath('core', '', 'fonts/NotoSans-Regular-latin.woff2'), OC.theme.docPlaceholderUrl),\r\n\t\t\tOC.SetupChecks.checkDataProtected(),\r\n\t\t).then((check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11) => {\r\n\t\t\tconst messages = [].concat(check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11)\r\n\t\t\tconst $el = $('#postsetupchecks')\r\n\t\t\t$('#security-warning-state-loading').addClass('hidden')\r\n\r\n\t\t\tlet hasMessages = false\r\n\t\t\tconst $errorsEl = $el.find('.errors')\r\n\t\t\tconst $warningsEl = $el.find('.warnings')\r\n\t\t\tconst $infoEl = $el.find('.info')\r\n\r\n\t\t\tfor (let i = 0; i < messages.length; i++) {\r\n\t\t\t\tswitch (messages[i].type) {\r\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_INFO:\r\n\t\t\t\t\t$infoEl.append('<li>' + messages[i].msg + '</li>')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_WARNING:\r\n\t\t\t\t\t$warningsEl.append('<li>' + messages[i].msg + '</li>')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_ERROR:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t$errorsEl.append('<li>' + messages[i].msg + '</li>')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($errorsEl.find('li').length > 0) {\r\n\t\t\t\t$errorsEl.removeClass('hidden')\r\n\t\t\t\thasMessages = true\r\n\t\t\t}\r\n\t\t\tif ($warningsEl.find('li').length > 0) {\r\n\t\t\t\t$warningsEl.removeClass('hidden')\r\n\t\t\t\thasMessages = true\r\n\t\t\t}\r\n\t\t\tif ($infoEl.find('li').length > 0) {\r\n\t\t\t\t$infoEl.removeClass('hidden')\r\n\t\t\t\thasMessages = true\r\n\t\t\t}\r\n\r\n\t\t\tif (hasMessages) {\r\n\t\t\t\t$('#postsetupchecks-hint').removeClass('hidden')\r\n\t\t\t\tif ($errorsEl.find('li').length > 0) {\r\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('#security-warning-state-warning').removeClass('hidden')\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst securityWarning = $('#security-warning')\r\n\t\t\t\tif (securityWarning.children('ul').children().length === 0) {\r\n\t\t\t\t\t$('#security-warning-state-ok').removeClass('hidden')\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tif (document.getElementById('security-warning') !== null) {\r\n\t\tsetupChecks()\r\n\t}\r\n\r\n\t$('#shareAPI').removeClass('loading')\r\n})\r\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[39583]();\n"],"names":["window","addEventListener","$","each","index","element","OC","Settings","setupGroupsSelect","change","ev","groups","val","JSON","stringify","OCP","AppConfig","setValue","this","attr","post","generateUrl","level","Log","reload","toggleClass","checked","on","value","replace","removeAttr","trigger","savePublicShareDisclaimerText","$el","$target","target","is","PERMISSION_READ","preventDefault","_","debounce","options","success","msg","finishedSuccess","t","error","finishedError","startSaving","isString","deleteKey","removeClass","addClass","changeEmailSettings","PasswordConfirmation","requiresPasswordConfirmation","requirePasswordConfirmation","ajax","url","type","data","serialize","xhr","responseJSON","click","toggleEmailCredentials","_this","event","startAction","document","getElementById","when","SetupChecks","checkWebDAV","checkWellKnownUrl","theme","docPlaceholderUrl","checkProviderUrl","getRootPath","checkSetup","checkGeneric","checkWOFF2Loading","filePath","checkDataProtected","then","check1","check2","check3","check4","check5","check6","check7","check8","check9","check10","check11","messages","concat","hasMessages","$errorsEl","find","$warningsEl","$infoEl","i","length","MESSAGE_TYPE_INFO","append","MESSAGE_TYPE_WARNING","MESSAGE_TYPE_ERROR","children"],"sourceRoot":""}