{"version":3,"file":"2142-2142.js?v=1e08f231241a4dda941a","mappings":"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","sources":["webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue?vue&type=script&lang=ts","webpack:///nextcloud/apps/files/src/utils/filenameValidity.ts","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?c8b8","webpack://nextcloud/./apps/files_sharing/src/views/PublicAuthPrompt.vue?d1c2","webpack:///nextcloud/apps/files_sharing/src/views/PublicAuthPrompt.vue?vue&type=style&index=0&id=02165a8b&prod&lang=scss"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('NcDialog',{staticClass:\"public-auth-prompt\",attrs:{\"data-cy-public-auth-prompt-dialog\":\"\",\"dialog-classes\":\"public-auth-prompt__dialog\",\"can-close\":false,\"name\":_vm.dialogName},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c('NcButton',{ref:\"submit\",attrs:{\"data-cy-public-auth-prompt-dialog-submit\":\"\",\"disabled\":_vm.name.trim() === ''},on:{\"click\":_vm.onSubmit}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'Submit name'))+\"\\n\\t\\t\")])]},proxy:true}])},[(_vm.owner)?_c('h3',{staticClass:\"public-auth-prompt__subtitle\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('files_sharing', '{ownerDisplayName} shared a folder with you.', { ownerDisplayName: _vm.ownerDisplayName }))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcNoteCard',{staticClass:\"public-auth-prompt__header\",attrs:{\"type\":\"info\"}},[_c('p',{staticClass:\"public-auth-prompt__description\",attrs:{\"id\":\"public-auth-prompt-dialog-description\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('files_sharing', 'To upload files, you need to provide your name first.'))+\"\\n\\t\\t\")])]),_vm._v(\" \"),_c('form',{ref:\"form\",staticClass:\"public-auth-prompt__form\",attrs:{\"aria-describedby\":\"public-auth-prompt-dialog-description\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();}}},[_c('NcTextField',{ref:\"input\",staticClass:\"public-auth-prompt__input\",attrs:{\"data-cy-public-auth-prompt-dialog-name\":\"\",\"label\":_vm.t('files_sharing', 'Enter your name'),\"minlength\":2,\"required\":true,\"value\":_vm.name,\"name\":\"name\"},on:{\"update:value\":function($event){_vm.name=$event}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=script&lang=ts\"","/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { InvalidFilenameError, InvalidFilenameErrorReason, validateFilename } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\n/**\n * Get the validity of a filename (empty if valid).\n * This can be used for `setCustomValidity` on input elements\n * @param name The filename\n * @param escape Escape the matched string in the error (only set when used in HTML)\n */\nexport function getFilenameValidity(name, escape = false) {\n    if (name.trim() === '') {\n        return t('files', 'Filename must not be empty.');\n    }\n    try {\n        validateFilename(name);\n        return '';\n    }\n    catch (error) {\n        if (!(error instanceof InvalidFilenameError)) {\n            throw error;\n        }\n        switch (error.reason) {\n            case InvalidFilenameErrorReason.Character:\n                return t('files', '\"{char}\" is not allowed inside a filename.', { char: error.segment }, undefined, { escape });\n            case InvalidFilenameErrorReason.ReservedName:\n                return t('files', '\"{segment}\" is a reserved name and not allowed for filenames.', { segment: error.segment }, undefined, { escape: false });\n            case InvalidFilenameErrorReason.Extension:\n                if (error.segment.match(/\\.[a-z]/i)) {\n                    return t('files', '\"{extension}\" is not an allowed filetype.', { extension: error.segment }, undefined, { escape: false });\n                }\n                return t('files', 'Filenames must not end with \"{extension}\".', { extension: error.segment }, undefined, { escape: false });\n            default:\n                return t('files', 'Invalid filename.');\n        }\n    }\n}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=style&index=0&id=02165a8b&prod&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicAuthPrompt.vue?vue&type=style&index=0&id=02165a8b&prod&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./PublicAuthPrompt.vue?vue&type=template&id=02165a8b\"\nimport script from \"./PublicAuthPrompt.vue?vue&type=script&lang=ts\"\nexport * from \"./PublicAuthPrompt.vue?vue&type=script&lang=ts\"\nimport style0 from \"./PublicAuthPrompt.vue?vue&type=style&index=0&id=02165a8b&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.public-auth-prompt__subtitle{font-size:16px;margin-block:12px}.public-auth-prompt__header{margin-block:12px}.public-auth-prompt__form{margin-block:24px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/files_sharing/src/views/PublicAuthPrompt.vue\"],\"names\":[],\"mappings\":\"AAEC,8BAEC,cAAA,CACA,iBAAA,CAGD,4BAEC,iBAAA,CAGD,0BAEC,iBAAA\",\"sourcesContent\":[\"\\n.public-auth-prompt {\\n\\t&__subtitle {\\n\\t\\t// Smaller than dialog title\\n\\t\\tfont-size: 16px;\\n\\t\\tmargin-block: 12px;\\n\\t}\\n\\n\\t&__header {\\n\\t\\t// Fix extra margin generating an unwanted gap\\n\\t\\tmargin-block: 12px;\\n\\t}\\n\\n\\t&__form {\\n\\t\\t// Double the margin of the header\\n\\t\\tmargin-block: 24px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["defineComponent","name","components","NcButton","NcDialog","NcNoteCard","NcTextField","setup","t","owner","loadState","ownerDisplayName","label","note","filename","data","computed","dialogName","folder","watch","newName","trim","input","$refs","$el","querySelector","validity","escape","arguments","length","undefined","validateFilename","error","InvalidFilenameError","reason","InvalidFilenameErrorReason","Character","char","segment","ReservedName","Extension","match","extension","getFilenameValidity","setCustomValidity","reportValidity","beforeMount","talkNick","localStorage","getItem","methods","onSubmit","form","checkValidity","setItem","$emit","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","_vm","this","_c","_self","_setupProxy","staticClass","attrs","scopedSlots","_u","key","fn","ref","on","_v","_s","proxy","_e","$event","preventDefault","stopPropagation","___CSS_LOADER_EXPORT___","push","module","id"],"sourceRoot":""}