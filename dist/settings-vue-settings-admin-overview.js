(()=>{"use strict";var e,t={15647:(e,t,s)=>{var n=s(85471),r=s(19051),i=s(81222),o=s(53334),a=s(63814),c=s(74095),l=s(11275),u=s(6695),p=s(88289),d=s(88837),g=s(70580),h=s.n(g);const m=(0,n.pM)({__name:"SettingsSetupChecksListItem",props:{setupCheck:null},setup(e){const t=e,s=(0,n.EW)(()=>"error"===t.setupCheck.severity?"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z":"warning"===t.setupCheck.severity?"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z":"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),r=(0,n.EW)(()=>i(t.setupCheck.description,t.setupCheck.descriptionParameters));function i(e,t){if(!t)return e;for(const[s,n]of Object.entries(t)){let t;t="user"===n.type?`@${h()(n.name)}`:"file"===n.type?h()(n.path||n.name):"highlight"===n.type?n.link?'<a href="'+encodeURI(n.link)+'">'+h()(n.name)+"</a>":"<em>"+h()(n.name)+"</em>":h()(n.name),e=e.replaceAll("{"+s+"}",t)}return e}return{__sfc:!0,props:t,leadingIcon:s,descriptionHtml:r,parseRichObject:i,NcIconSvgWrapper:u.A}}});var C=s(85072),A=s.n(C),k=s(97825),v=s.n(k),f=s(77659),_=s.n(f),y=s(55056),S=s.n(y),b=s(10540),L=s.n(b),w=s(41113),x=s.n(w),E=s(29335),I={};I.styleTagTransform=x(),I.setAttributes=S(),I.insert=_().bind(null,"head"),I.domAPI=v(),I.insertStyleElement=L(),A()(E.A,I),E.A&&E.A.locals&&E.A.locals;var O=s(14486);const H=(0,O.A)(m,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("li",{staticClass:"settings-setup-checks-item",class:{[`settings-setup-checks-item--${e.setupCheck.severity}`]:!0}},[t(s.NcIconSvgWrapper,{staticClass:"settings-setup-checks-item__icon",attrs:{path:s.leadingIcon}}),e._v(" "),t("div",{staticClass:"settings-setup-checks-item__wrapper"},[t("div",{staticClass:"settings-setup-checks-item__name"},[e._v("\n\t\t\t"+e._s(e.setupCheck.name)+"\n\t\t")]),e._v(" "),t("div",{staticClass:"settings-setup-checks-item__description",domProps:{innerHTML:e._s(s.descriptionHtml)}})])],1)},[],!1,null,null,null).exports,M=(0,n.pM)({__name:"SettingsSetupChecksList",props:{severity:null,setupChecks:null},setup(e){const t=e,s=(0,n.EW)(()=>"error"===t.severity?(0,o.t)("settings","Setup errors"):"warning"===t.severity?(0,o.t)("settings","Setup warnings"):(0,o.t)("settings","Setup recommendations")),r=(0,n.EW)(()=>t.setupChecks.filter(({severity:e})=>e===t.severity));return{__sfc:!0,props:t,ariaLabel:s,shownChecks:r,SettingsSetupChecksListItem:H}}});var D=s(88019),N={};N.styleTagTransform=x(),N.setAttributes=S(),N.insert=_().bind(null,"head"),N.domAPI=v(),N.insertStyleElement=L(),A()(D.A,N),D.A&&D.A.locals&&D.A.locals;const T=(0,O.A)(M,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ul",{staticClass:"settings-setup-checks-list",attrs:{"aria-label":s.ariaLabel}},e._l(s.shownChecks,function(e,n){return t(s.SettingsSetupChecksListItem,{key:n,staticClass:"settings-setup-checks-list__item",attrs:{"setup-check":e}})}),1)},[],!1,null,null,null).exports,P=(0,s(35947).YK)().setApp("settings").detectUser().build(),W=(0,n.pM)({__name:"AdminSettingsSetupChecks",setup(e){const{sectionDocsUrl:t,installationGuidesDocsUrl:s,loggingSectionUrl:g}=(0,i.C)("settings","setup-checks-section"),h=(0,o.t)("settings","Please double check the {linkStartInstallationGuides}installation guides{linkEnd}, and check for any errors or warnings in the {linkStartLog}log{linkEnd}.",{linkEnd:" ↗</a>",linkStartInstallationGuides:`<a target="_blank" rel="noreferrer noopener" href="${s}">`,linkStartLog:`<a target="_blank" rel="noreferrer noopener" href="${g}">`},{escape:!1}),m=(0,o.t)("settings","Check the security of your {productName} over {linkStart}our security scan{linkEnd}.",{linkStart:'<a target="_blank" rel="noreferrer noopener" href="https://scan.nextcloud.com">',linkEnd:" ↗</a>",productName:window.OC.theme.productName},{escape:!1}),C=(0,n.KR)(!0),A=(0,n.KR)(!1),k=(0,n.KR)([]),v=(0,n.EW)(()=>0===k.value.length),f=(0,n.EW)(()=>k.value.some(({severity:e})=>"error"===e)),_=(0,n.EW)(()=>k.value.some(({severity:e})=>"warning"===e));async function y(){try{C.value=!0,A.value=!1;const{data:e}=await r.Ay.get((0,a.Jv)("settings/ajax/checksetup"));k.value=Object.values(e).map(e=>Object.values(e)).flat().filter(({severity:e})=>"success"!==e)}catch(e){A.value=!0,P.error("Failed to load setup checks",{error:e})}finally{C.value=!1}}return(0,n.sV)(y),{__sfc:!0,sectionDocsUrl:t,installationGuidesDocsUrl:s,loggingSectionUrl:g,adminDocsHtml:h,footerHtml:m,loading:C,loadingFailed:A,setupChecks:k,allTestsOk:v,hasErrors:f,hasWarnings:_,loadSetupChecks:y,mdiCheck:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",mdiCloseCircleOutline:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z",mdiReload:"M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z",t:o.t,NcButton:c.A,NcEmptyContent:l.A,NcIconSvgWrapper:u.A,NcLoadingIcon:p.A,NcSettingsSection:d.A,SettingsSetupChecksList:T}}});var j=s(59809),R={};R.styleTagTransform=x(),R.setAttributes=S(),R.insert=_().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=L(),A()(j.A,R),j.A&&j.A.locals&&j.A.locals;const G=(0,O.A)(W,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t(s.NcSettingsSection,{attrs:{id:"security-warning",name:s.t("settings","Security & setup warnings"),description:s.t("settings","It is important for the security and performance of your instance that everything is configured correctly. To help you with that we are doing some automatic checks. Please see the linked documentation for more information."),"doc-url":s.sectionDocsUrl}},[s.loading?t(s.NcEmptyContent,{attrs:{name:s.t("settings","Checking your server …")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcLoadingIcon)]},proxy:!0}],null,!1,1675040227)}):s.loadingFailed?t(s.NcEmptyContent,{attrs:{name:s.t("settings","Failed to run setup checks")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiCloseCircleOutline}})]},proxy:!0},{key:"action",fn:function(){return[t(s.NcButton,{attrs:{variant:"primary"},on:{click:s.loadSetupChecks},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiReload}})]},proxy:!0}])},[e._v("\n\t\t\t\t"+e._s(s.t("settings","Try again"))+"\n\t\t\t")])]},proxy:!0}])}):s.allTestsOk?t(s.NcEmptyContent,{attrs:{name:s.t("settings","All checks passed.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiCheck}})]},proxy:!0}])}):[s.hasErrors||s.hasWarnings?t("p",{staticClass:"settings-security-warnings__result-hint"},[e._v("\n\t\t\t"+e._s(s.hasErrors?s.t("settings","There are some errors regarding your setup."):s.t("settings","There are some warnings regarding your setup."))+"\n\t\t")]):e._e(),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"error"}}),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"warning"}}),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"info"}}),e._v(" "),t("p",{staticClass:"settings-security-warnings__hint",domProps:{innerHTML:e._s(s.adminDocsHtml)}})],e._v(" "),t("p",{staticClass:"settings-security-warnings__footer",domProps:{innerHTML:e._s(s.footerHtml)}})],2)},[],!1,null,null,null).exports;new n.Ay({name:"AdminSettingsSetupChecks",el:"#vue-admin-settings-setup-checks",render:e=>e(G)})},29335:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-setup-checks-item{border-radius:var(--border-radius-element);display:flex;align-items:start;flex-direction:row}.settings-setup-checks-item:hover{background-color:var(--color-background-hover)}.settings-setup-checks-item__wrapper{display:flex;flex-direction:column;padding-top:calc((var(--default-clickable-area) - 1lh)/2)}.settings-setup-checks-item__description{color:var(--color-text-maxcontrast)}.settings-setup-checks-item__icon{border-radius:calc(var(--default-clickable-area)/2)}.settings-setup-checks-item--error .settings-setup-checks-item__icon{color:var(--color-element-error)}.settings-setup-checks-item--warning .settings-setup-checks-item__icon{color:var(--color-element-warning)}.settings-setup-checks-item--info .settings-setup-checks-item__icon{color:var(--color-element-info)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksListItem.vue"],names:[],mappings:"AACA,4BACC,0CAAA,CACA,YAAA,CACA,iBAAA,CACA,kBAAA,CAEA,kCACC,8CAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CAEA,yDAAA,CAGD,yCACC,mCAAA,CAGD,kCACC,mDAAA,CAGD,qEACC,gCAAA,CAED,uEACC,kCAAA,CAED,oEACC,+BAAA",sourcesContent:["\n.settings-setup-checks-item {\n\tborder-radius: var(--border-radius-element);\n\tdisplay: flex;\n\talign-items: start;\n\tflex-direction: row;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&__wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t// align with icon\n\t\tpadding-top: calc((var(--default-clickable-area) - 1lh) / 2);\n\t}\n\n\t&__description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__icon {\n\t\tborder-radius: calc(var(--default-clickable-area) / 2);\n\t}\n\n\t&--error &__icon {\n\t\tcolor: var(--color-element-error);\n\t}\n\t&--warning &__icon {\n\t\tcolor: var(--color-element-warning);\n\t}\n\t&--info &__icon {\n\t\tcolor: var(--color-element-info);\n\t}\n}\n"],sourceRoot:""}]);const a=o},59809:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-security-warnings__hint{margin-top:calc(2*var(--default-grid-baseline))}.settings-security-warnings__footer{margin-top:calc(3*var(--default-grid-baseline))}","",{version:3,sources:["webpack://./apps/settings/src/views/AdminSettingsSetupChecks.vue"],names:[],mappings:"AAEC,kCACC,+CAAA,CAGD,oCACC,+CAAA",sourcesContent:["\n.settings-security-warnings {\n\t&__hint {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__footer {\n\t\tmargin-top: calc(3 * var(--default-grid-baseline));\n\t}\n}\n"],sourceRoot:""}]);const a=o},88019:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-setup-checks-list:not(:first-of-type){margin-top:calc(2*var(--default-grid-baseline))}.settings-setup-checks-list__item:not(:last-of-type){margin-bottom:var(--default-grid-baseline)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksList.vue"],names:[],mappings:"AAEC,gDACC,+CAAA,CAGD,qDACC,0CAAA",sourcesContent:["\n.settings-setup-checks-list {\n\t&:not(:first-of-type) {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__item:not(:last-of-type) {\n\t\tmargin-bottom: var(--default-grid-baseline);\n\t}\n}\n"],sourceRoot:""}]);const a=o}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,s,r,i)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every(e=>n.O[e](s[c]))?s.splice(c--,1):(a=!1,i<o&&(o=i));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,r,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=7015,(()=>{n.b=document&&document.baseURI||self.location.href;var e={7015:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,o=s[0],a=s[1],c=s[2],l=0;if(o.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)var u=c(n)}for(t&&t(s);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},s=self.webpackChunknextcloud_ui_legacy=self.webpackChunknextcloud_ui_legacy||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0;var r=n.O(void 0,[4208],()=>n(15647));r=n.O(r)})();
//# sourceMappingURL=settings-vue-settings-admin-overview.js.map?v=0ae04f17bfb769ece20b