(()=>{"use strict";var e,t={550(e,t,s){var n=s(85471),r=s(9165),i=s(19051),o=s(81222),a=s(53334),c=s(63814),l=s(74095),u=s(42507),p=s(6695),d=s(88289),g=s(88837),h=s(70580),m=s.n(h);const A=(0,n.pM)({__name:"SettingsSetupChecksListItem",props:{setupCheck:null},setup(e){const t=e,s=(0,n.EW)(()=>"error"===t.setupCheck.severity?r.hyP:"warning"===t.setupCheck.severity?r.Znq:r.Rjk),i=(0,n.EW)(()=>o(t.setupCheck.description,t.setupCheck.descriptionParameters));function o(e,t){if(!t)return e;for(const[s,n]of Object.entries(t)){let t;t="user"===n.type?`@${m()(n.name)}`:"file"===n.type?m()(n.path||n.name):"highlight"===n.type?n.link?'<a href="'+encodeURI(n.link)+'">'+m()(n.name)+"</a>":"<em>"+m()(n.name)+"</em>":m()(n.name),e=e.replaceAll("{"+s+"}",t)}return e}return{__sfc:!0,props:t,leadingIcon:s,descriptionHtml:i,parseRichObject:o,NcIconSvgWrapper:p.A}}});var k=s(85072),C=s.n(k),v=s(97825),f=s.n(v),_=s(77659),y=s.n(_),S=s(55056),b=s.n(S),w=s(10540),x=s.n(w),E=s(41113),I=s.n(E),O=s(29335),T={};T.styleTagTransform=I(),T.setAttributes=b(),T.insert=y().bind(null,"head"),T.domAPI=f(),T.insertStyleElement=x(),C()(O.A,T),O.A&&O.A.locals&&O.A.locals;var D=s(14486);const L=(0,D.A)(A,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("li",{staticClass:"settings-setup-checks-item",class:{[`settings-setup-checks-item--${e.setupCheck.severity}`]:!0}},[t(s.NcIconSvgWrapper,{staticClass:"settings-setup-checks-item__icon",attrs:{path:s.leadingIcon}}),e._v(" "),t("div",{staticClass:"settings-setup-checks-item__wrapper"},[t("div",{staticClass:"settings-setup-checks-item__name"},[e._v("\n\t\t\t"+e._s(e.setupCheck.name)+"\n\t\t")]),e._v(" "),t("div",{staticClass:"settings-setup-checks-item__description",domProps:{innerHTML:e._s(s.descriptionHtml)}})])],1)},[],!1,null,null,null).exports,N=(0,n.pM)({__name:"SettingsSetupChecksList",props:{severity:null,setupChecks:null},setup(e){const t=e,s=(0,n.EW)(()=>"error"===t.severity?(0,a.t)("settings","Setup errors"):"warning"===t.severity?(0,a.t)("settings","Setup warnings"):(0,a.t)("settings","Setup recommendations")),r=(0,n.EW)(()=>t.setupChecks.filter(({severity:e})=>e===t.severity));return{__sfc:!0,props:t,ariaLabel:s,shownChecks:r,SettingsSetupChecksListItem:L}}});var P=s(88019),W={};W.styleTagTransform=I(),W.setAttributes=b(),W.insert=y().bind(null,"head"),W.domAPI=f(),W.insertStyleElement=x(),C()(P.A,W),P.A&&P.A.locals&&P.A.locals;const j=(0,D.A)(N,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ul",{staticClass:"settings-setup-checks-list",attrs:{"aria-label":s.ariaLabel}},e._l(s.shownChecks,function(e,n){return t(s.SettingsSetupChecksListItem,{key:n,staticClass:"settings-setup-checks-list__item",attrs:{"setup-check":e}})}),1)},[],!1,null,null,null).exports,R=(0,s(35947).YK)().setApp("settings").detectUser().build(),G=(0,n.pM)({__name:"AdminSettingsSetupChecks",setup(e){const{sectionDocsUrl:t,installationGuidesDocsUrl:s,loggingSectionUrl:h}=(0,o.C)("settings","setup-checks-section"),m=(0,a.t)("settings","Please double check the {linkStartInstallationGuides}installation guides{linkEnd}, and check for any errors or warnings in the {linkStartLog}log{linkEnd}.",{linkEnd:" ↗</a>",linkStartInstallationGuides:`<a target="_blank" rel="noreferrer noopener" href="${s}">`,linkStartLog:`<a target="_blank" rel="noreferrer noopener" href="${h}">`},{escape:!1}),A=(0,a.t)("settings","Check the security of your {productName} over {linkStart}our security scan{linkEnd}.",{linkStart:'<a target="_blank" rel="noreferrer noopener" href="https://scan.nextcloud.com">',linkEnd:" ↗</a>",productName:window.OC.theme.productName},{escape:!1}),k=(0,n.KR)(!0),C=(0,n.KR)(!1),v=(0,n.KR)([]),f=(0,n.EW)(()=>0===v.value.length),_=(0,n.EW)(()=>v.value.some(({severity:e})=>"error"===e)),y=(0,n.EW)(()=>v.value.some(({severity:e})=>"warning"===e));async function S(){try{k.value=!0,C.value=!1;const{data:e}=await i.Ay.get((0,c.Jv)("settings/ajax/checksetup"));v.value=Object.values(e).map(e=>Object.values(e)).flat().filter(({severity:e})=>"success"!==e)}catch(e){C.value=!0,R.error("Failed to load setup checks",{error:e})}finally{k.value=!1}}return(0,n.sV)(S),{__sfc:!0,sectionDocsUrl:t,installationGuidesDocsUrl:s,loggingSectionUrl:h,adminDocsHtml:m,footerHtml:A,loading:k,loadingFailed:C,setupChecks:v,allTestsOk:f,hasErrors:_,hasWarnings:y,loadSetupChecks:S,mdiCheck:r.Tfj,mdiCloseCircleOutline:r.rZW,mdiReload:r.kWq,t:a.t,NcButton:l.A,NcEmptyContent:u.A,NcIconSvgWrapper:p.A,NcLoadingIcon:d.A,NcSettingsSection:g.A,SettingsSetupChecksList:j}}});var U=s(59809),H={};H.styleTagTransform=I(),H.setAttributes=b(),H.insert=y().bind(null,"head"),H.domAPI=f(),H.insertStyleElement=x(),C()(U.A,H),U.A&&U.A.locals&&U.A.locals;const M=(0,D.A)(G,function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t(s.NcSettingsSection,{attrs:{id:"security-warning",name:s.t("settings","Security & setup warnings"),description:s.t("settings","It is important for the security and performance of your instance that everything is configured correctly. To help you with that we are doing some automatic checks. Please see the linked documentation for more information."),"doc-url":s.sectionDocsUrl}},[s.loading?t(s.NcEmptyContent,{attrs:{name:s.t("settings","Checking your server …")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcLoadingIcon)]},proxy:!0}],null,!1,1675040227)}):s.loadingFailed?t(s.NcEmptyContent,{attrs:{name:s.t("settings","Failed to run setup checks")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiCloseCircleOutline}})]},proxy:!0},{key:"action",fn:function(){return[t(s.NcButton,{attrs:{variant:"primary"},on:{click:s.loadSetupChecks},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiReload}})]},proxy:!0}])},[e._v("\n\t\t\t\t"+e._s(s.t("settings","Try again"))+"\n\t\t\t")])]},proxy:!0}])}):s.allTestsOk?t(s.NcEmptyContent,{attrs:{name:s.t("settings","All checks passed.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(s.NcIconSvgWrapper,{attrs:{path:s.mdiCheck}})]},proxy:!0}])}):[s.hasErrors||s.hasWarnings?t("p",{staticClass:"settings-security-warnings__result-hint"},[e._v("\n\t\t\t"+e._s(s.hasErrors?s.t("settings","There are some errors regarding your setup."):s.t("settings","There are some warnings regarding your setup."))+"\n\t\t")]):e._e(),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"error"}}),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"warning"}}),e._v(" "),t(s.SettingsSetupChecksList,{attrs:{"setup-checks":s.setupChecks,severity:"info"}}),e._v(" "),t("p",{staticClass:"settings-security-warnings__hint",domProps:{innerHTML:e._s(s.adminDocsHtml)}})],e._v(" "),t("p",{staticClass:"settings-security-warnings__footer",domProps:{innerHTML:e._s(s.footerHtml)}})],2)},[],!1,null,null,null).exports;new n.Ay({name:"AdminSettingsSetupChecks",el:"#vue-admin-settings-setup-checks",render:e=>e(M)})},88019(e,t,s){s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-setup-checks-list:not(:first-of-type){margin-top:calc(2*var(--default-grid-baseline))}.settings-setup-checks-list__item:not(:last-of-type){margin-bottom:var(--default-grid-baseline)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksList.vue"],names:[],mappings:"AAEC,gDACC,+CAAA,CAGD,qDACC,0CAAA",sourcesContent:["\n.settings-setup-checks-list {\n\t&:not(:first-of-type) {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__item:not(:last-of-type) {\n\t\tmargin-bottom: var(--default-grid-baseline);\n\t}\n}\n"],sourceRoot:""}]);const a=o},29335(e,t,s){s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-setup-checks-item{border-radius:var(--border-radius-element);display:flex;align-items:start;flex-direction:row}.settings-setup-checks-item:hover{background-color:var(--color-background-hover)}.settings-setup-checks-item__wrapper{display:flex;flex-direction:column;padding-top:calc((var(--default-clickable-area) - 1lh)/2)}.settings-setup-checks-item__description{color:var(--color-text-maxcontrast)}.settings-setup-checks-item__icon{border-radius:calc(var(--default-clickable-area)/2)}.settings-setup-checks-item--error .settings-setup-checks-item__icon{color:var(--color-element-error)}.settings-setup-checks-item--warning .settings-setup-checks-item__icon{color:var(--color-element-warning)}.settings-setup-checks-item--info .settings-setup-checks-item__icon{color:var(--color-element-info)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksListItem.vue"],names:[],mappings:"AACA,4BACC,0CAAA,CACA,YAAA,CACA,iBAAA,CACA,kBAAA,CAEA,kCACC,8CAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CAEA,yDAAA,CAGD,yCACC,mCAAA,CAGD,kCACC,mDAAA,CAGD,qEACC,gCAAA,CAED,uEACC,kCAAA,CAED,oEACC,+BAAA",sourcesContent:["\n.settings-setup-checks-item {\n\tborder-radius: var(--border-radius-element);\n\tdisplay: flex;\n\talign-items: start;\n\tflex-direction: row;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&__wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t// align with icon\n\t\tpadding-top: calc((var(--default-clickable-area) - 1lh) / 2);\n\t}\n\n\t&__description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__icon {\n\t\tborder-radius: calc(var(--default-clickable-area) / 2);\n\t}\n\n\t&--error &__icon {\n\t\tcolor: var(--color-element-error);\n\t}\n\t&--warning &__icon {\n\t\tcolor: var(--color-element-warning);\n\t}\n\t&--info &__icon {\n\t\tcolor: var(--color-element-info);\n\t}\n}\n"],sourceRoot:""}]);const a=o},59809(e,t,s){s.d(t,{A:()=>a});var n=s(71354),r=s.n(n),i=s(76314),o=s.n(i)()(r());o.push([e.id,".settings-security-warnings__hint{margin-top:calc(2*var(--default-grid-baseline))}.settings-security-warnings__footer{margin-top:calc(3*var(--default-grid-baseline))}","",{version:3,sources:["webpack://./apps/settings/src/views/AdminSettingsSetupChecks.vue"],names:[],mappings:"AAEC,kCACC,+CAAA,CAGD,oCACC,+CAAA",sourcesContent:["\n.settings-security-warnings {\n\t&__hint {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__footer {\n\t\tmargin-top: calc(3 * var(--default-grid-baseline));\n\t}\n}\n"],sourceRoot:""}]);const a=o}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,s,r,i)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){for(var[s,r,i]=e[u],a=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every(e=>n.O[e](s[c]))?s.splice(c--,1):(a=!1,i<o&&(o=i));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,r,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.e=()=>Promise.resolve(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=7015,(()=>{n.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={7015:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,i,[o,a,c]=s,l=0;if(o.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)var u=c(n)}for(t&&t(s);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},s=globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0;var r=n.O(void 0,[4208],()=>n(550));r=n.O(r)})();
//# sourceMappingURL=settings-vue-settings-admin-overview.js.map?v=ffe59db7a3f30a07b9e3