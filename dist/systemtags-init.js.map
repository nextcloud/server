{"version":3,"file":"systemtags-init.js?v=8465ad04b05ef60378cb","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/node_modules/webdav/dist/node/tools/quota.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getDAVCompliance.js","webpack:///nextcloud/node_modules/https-browserify/index.js","webpack:///nextcloud/node_modules/stream-http/index.js","webpack:///nextcloud/node_modules/layerr/dist/layerr.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/basic.js","webpack:///nextcloud/node_modules/color-string/node_modules/color-name/index.js","webpack:///nextcloud/node_modules/color-string/index.js","webpack:///nextcloud/node_modules/color/node_modules/color-name/index.js","webpack:///nextcloud/node_modules/color/node_modules/color-convert/conversions.js","webpack:///nextcloud/node_modules/color/node_modules/color-convert/route.js","webpack:///nextcloud/node_modules/color/node_modules/color-convert/index.js","webpack:///nextcloud/node_modules/color/index.js","webpack:///nextcloud/apps/systemtags/src/utils/colorUtils.ts","webpack:///nextcloud/node_modules/webdav/dist/node/tools/xml.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/createDirectory.js","webpack:///nextcloud/apps/systemtags/src/services/api.ts","webpack:///nextcloud/node_modules/webdav/dist/node/operations/putFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/index.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/body.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/lock.js","webpack:///nextcloud/node_modules/webdav/dist/node/compat/arrayBuffer.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/copyFile.js","webpack:///nextcloud/apps/systemtags/src/utils.ts","webpack:///nextcloud/node_modules/webdav/dist/node/tools/encode.js","webpack:///nextcloud/node_modules/url-parse/index.js","webpack:///nextcloud/node_modules/@nextcloud/files/dist/index.mjs","webpack:///nextcloud/node_modules/@nextcloud/files/dist/dav.mjs","webpack:///nextcloud/apps/systemtags/src/files_actions/bulkSystemTagsAction.ts","webpack://nextcloud/./apps/systemtags/src/css/fileEntryInlineSystemTags.scss?0a01","webpack:///nextcloud/apps/systemtags/src/files_actions/inlineSystemTagsAction.ts","webpack:///nextcloud/apps/systemtags/src/services/systemtags.ts","webpack:///nextcloud/apps/systemtags/src/files_views/systemtagsView.ts","webpack:///nextcloud/apps/systemtags/src/files_actions/openInFilesAction.ts","webpack:///nextcloud/apps/files/src/logger.ts","webpack:///nextcloud/apps/files/src/store/active.ts","webpack:///nextcloud/apps/systemtags/src/init.ts","webpack:///nextcloud/apps/systemtags/src/files_actions/filesSidebarAction.ts","webpack:///nextcloud/apps/systemtags/src/services/HotKeysService.ts","webpack:///nextcloud/apps/files/src/utils/actionUtils.ts","webpack:///nextcloud/node_modules/byte-length/dist/index.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/createStream.js","webpack:///nextcloud/node_modules/camelcase/index.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/size.js","webpack:///nextcloud/apps/systemtags/src/css/fileEntryInlineSystemTags.scss","webpack:///nextcloud/node_modules/webdav/dist/node/operations/directoryContents.js","webpack:///nextcloud/apps/systemtags/src/services/davClient.ts","webpack:///nextcloud/node_modules/webdav/dist/node/operations/exists.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/customRequest.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/moveFile.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/deleteFile.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/search.js","webpack:///nextcloud/apps/systemtags/src/logger.ts","webpack:///nextcloud/node_modules/webdav/dist/node/operations/partialUpdateFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/stat.js","webpack:///nextcloud/node_modules/webdav/dist/node/factory.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/url.js","webpack:///nextcloud/node_modules/base-64/base64.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getQuota.js","webpack:///nextcloud/node_modules/webdav/dist/node/request.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/digest.js","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud-ui-legacy:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { translateDiskSpace } from \"./dav.js\";\nexport function parseQuota(result) {\n    try {\n        const [responseItem] = result.multistatus.response;\n        const { propstat: { prop: { \"quota-used-bytes\": quotaUsed, \"quota-available-bytes\": quotaAvail } } } = responseItem;\n        return typeof quotaUsed !== \"undefined\" && typeof quotaAvail !== \"undefined\"\n            ? {\n                // As it could be both a string or a number ensure we are working with a number\n                used: parseInt(String(quotaUsed), 10),\n                available: translateDiskSpace(quotaAvail)\n            }\n            : null;\n    }\n    catch (err) {\n        /* ignore */\n    }\n    return null;\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function getDAVCompliance(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"OPTIONS\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    try {\n        handleResponseCode(context, response);\n    }\n    catch (err) {\n        const error = err;\n        throw error;\n    }\n    const davHeader = response.headers.get(\"DAV\") ?? \"\";\n    const compliance = davHeader.split(\",\").map(item => item.trim());\n    const server = response.headers.get(\"Server\") ?? \"\";\n    return {\n        compliance,\n        server\n    };\n}\n","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","import { assertError, isError } from \"./error.js\";\nimport { getGlobalName } from \"./global.js\";\nimport { parseArguments } from \"./tools.js\";\nexport class Layerr extends Error {\n    constructor(errorOptionsOrMessage, messageText) {\n        const args = [...arguments];\n        const { options, shortMessage } = parseArguments(args);\n        let message = shortMessage;\n        if (options.cause) {\n            message = `${message}: ${options.cause.message}`;\n        }\n        super(message);\n        this.message = message;\n        if (options.name && typeof options.name === \"string\") {\n            this.name = options.name;\n        }\n        else {\n            this.name = getGlobalName();\n        }\n        if (options.cause) {\n            Object.defineProperty(this, \"_cause\", { value: options.cause });\n        }\n        Object.defineProperty(this, \"_info\", { value: {} });\n        if (options.info && typeof options.info === \"object\") {\n            Object.assign(this._info, options.info);\n        }\n        if (Error.captureStackTrace) {\n            const ctor = options.constructorOpt || this.constructor;\n            Error.captureStackTrace(this, ctor);\n        }\n    }\n    static cause(err) {\n        assertError(err);\n        if (!err._cause)\n            return null;\n        return isError(err._cause)\n            ? err._cause\n            : null;\n    }\n    static fullStack(err) {\n        assertError(err);\n        const cause = Layerr.cause(err);\n        if (cause) {\n            return `${err.stack}\\ncaused by: ${Layerr.fullStack(cause)}`;\n        }\n        return err.stack ?? \"\";\n    }\n    static info(err) {\n        assertError(err);\n        const output = {};\n        const cause = Layerr.cause(err);\n        if (cause) {\n            Object.assign(output, Layerr.info(cause));\n        }\n        if (err._info) {\n            Object.assign(output, err._info);\n        }\n        return output;\n    }\n    toString() {\n        let output = this.name ||\n            this.constructor.name ||\n            this.constructor.prototype.name;\n        if (this.message) {\n            output = `${output}: ${this.message}`;\n        }\n        return output;\n    }\n}\n","import { Layerr } from \"layerr\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { fromBase64 } from \"../tools/encode.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nconst TRANSFORM_RETAIN_FORMAT = (v) => v;\nexport async function getFileContents(context, filePath, options = {}) {\n    const { format = \"binary\" } = options;\n    if (format !== \"binary\" && format !== \"text\") {\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidOutputFormat\n            }\n        }, `Invalid output format: ${format}`);\n    }\n    return format === \"text\"\n        ? getFileContentsString(context, filePath, options)\n        : getFileContentsBuffer(context, filePath, options);\n}\nasync function getFileContentsBuffer(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    let body;\n    if (isWeb() || isReactNative()) {\n        body = await response.arrayBuffer();\n    }\n    else {\n        body = Buffer.from(await response.arrayBuffer());\n    }\n    return processResponsePayload(response, body, options.details);\n}\nasync function getFileContentsString(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\",\n        headers: {\n            Accept: \"text/plain\"\n        },\n        transformResponse: [TRANSFORM_RETAIN_FORMAT]\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const body = await response.text();\n    return processResponsePayload(response, body, options.details);\n}\nexport function getFileDownloadLink(context, filePath) {\n    let url = joinURL(context.remoteURL, encodePath(filePath));\n    const protocol = /^https:/i.test(url) ? \"https\" : \"http\";\n    switch (context.authType) {\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password: {\n            const authPart = context.headers.Authorization.replace(/^Basic /i, \"\").trim();\n            const authContents = fromBase64(authPart);\n            url = url.replace(/^https?:\\/\\//, `${protocol}://${authContents}@`);\n            break;\n        }\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.LinkUnsupportedAuthType\n                }\n            }, `Unsupported auth type for file link: ${context.authType}`);\n    }\n    return url;\n}\n","import { toBase64 } from \"../tools/encode.js\";\nexport function generateBasicAuthHeader(username, password) {\n    const encoded = toBase64(`${username}:${password}`);\n    return `Basic ${encoded}`;\n}\n","const colors = {\n\taliceblue: [240, 248, 255],\n\tantiquewhite: [250, 235, 215],\n\taqua: [0, 255, 255],\n\taquamarine: [127, 255, 212],\n\tazure: [240, 255, 255],\n\tbeige: [245, 245, 220],\n\tbisque: [255, 228, 196],\n\tblack: [0, 0, 0],\n\tblanchedalmond: [255, 235, 205],\n\tblue: [0, 0, 255],\n\tblueviolet: [138, 43, 226],\n\tbrown: [165, 42, 42],\n\tburlywood: [222, 184, 135],\n\tcadetblue: [95, 158, 160],\n\tchartreuse: [127, 255, 0],\n\tchocolate: [210, 105, 30],\n\tcoral: [255, 127, 80],\n\tcornflowerblue: [100, 149, 237],\n\tcornsilk: [255, 248, 220],\n\tcrimson: [220, 20, 60],\n\tcyan: [0, 255, 255],\n\tdarkblue: [0, 0, 139],\n\tdarkcyan: [0, 139, 139],\n\tdarkgoldenrod: [184, 134, 11],\n\tdarkgray: [169, 169, 169],\n\tdarkgreen: [0, 100, 0],\n\tdarkgrey: [169, 169, 169],\n\tdarkkhaki: [189, 183, 107],\n\tdarkmagenta: [139, 0, 139],\n\tdarkolivegreen: [85, 107, 47],\n\tdarkorange: [255, 140, 0],\n\tdarkorchid: [153, 50, 204],\n\tdarkred: [139, 0, 0],\n\tdarksalmon: [233, 150, 122],\n\tdarkseagreen: [143, 188, 143],\n\tdarkslateblue: [72, 61, 139],\n\tdarkslategray: [47, 79, 79],\n\tdarkslategrey: [47, 79, 79],\n\tdarkturquoise: [0, 206, 209],\n\tdarkviolet: [148, 0, 211],\n\tdeeppink: [255, 20, 147],\n\tdeepskyblue: [0, 191, 255],\n\tdimgray: [105, 105, 105],\n\tdimgrey: [105, 105, 105],\n\tdodgerblue: [30, 144, 255],\n\tfirebrick: [178, 34, 34],\n\tfloralwhite: [255, 250, 240],\n\tforestgreen: [34, 139, 34],\n\tfuchsia: [255, 0, 255],\n\tgainsboro: [220, 220, 220],\n\tghostwhite: [248, 248, 255],\n\tgold: [255, 215, 0],\n\tgoldenrod: [218, 165, 32],\n\tgray: [128, 128, 128],\n\tgreen: [0, 128, 0],\n\tgreenyellow: [173, 255, 47],\n\tgrey: [128, 128, 128],\n\thoneydew: [240, 255, 240],\n\thotpink: [255, 105, 180],\n\tindianred: [205, 92, 92],\n\tindigo: [75, 0, 130],\n\tivory: [255, 255, 240],\n\tkhaki: [240, 230, 140],\n\tlavender: [230, 230, 250],\n\tlavenderblush: [255, 240, 245],\n\tlawngreen: [124, 252, 0],\n\tlemonchiffon: [255, 250, 205],\n\tlightblue: [173, 216, 230],\n\tlightcoral: [240, 128, 128],\n\tlightcyan: [224, 255, 255],\n\tlightgoldenrodyellow: [250, 250, 210],\n\tlightgray: [211, 211, 211],\n\tlightgreen: [144, 238, 144],\n\tlightgrey: [211, 211, 211],\n\tlightpink: [255, 182, 193],\n\tlightsalmon: [255, 160, 122],\n\tlightseagreen: [32, 178, 170],\n\tlightskyblue: [135, 206, 250],\n\tlightslategray: [119, 136, 153],\n\tlightslategrey: [119, 136, 153],\n\tlightsteelblue: [176, 196, 222],\n\tlightyellow: [255, 255, 224],\n\tlime: [0, 255, 0],\n\tlimegreen: [50, 205, 50],\n\tlinen: [250, 240, 230],\n\tmagenta: [255, 0, 255],\n\tmaroon: [128, 0, 0],\n\tmediumaquamarine: [102, 205, 170],\n\tmediumblue: [0, 0, 205],\n\tmediumorchid: [186, 85, 211],\n\tmediumpurple: [147, 112, 219],\n\tmediumseagreen: [60, 179, 113],\n\tmediumslateblue: [123, 104, 238],\n\tmediumspringgreen: [0, 250, 154],\n\tmediumturquoise: [72, 209, 204],\n\tmediumvioletred: [199, 21, 133],\n\tmidnightblue: [25, 25, 112],\n\tmintcream: [245, 255, 250],\n\tmistyrose: [255, 228, 225],\n\tmoccasin: [255, 228, 181],\n\tnavajowhite: [255, 222, 173],\n\tnavy: [0, 0, 128],\n\toldlace: [253, 245, 230],\n\tolive: [128, 128, 0],\n\tolivedrab: [107, 142, 35],\n\torange: [255, 165, 0],\n\torangered: [255, 69, 0],\n\torchid: [218, 112, 214],\n\tpalegoldenrod: [238, 232, 170],\n\tpalegreen: [152, 251, 152],\n\tpaleturquoise: [175, 238, 238],\n\tpalevioletred: [219, 112, 147],\n\tpapayawhip: [255, 239, 213],\n\tpeachpuff: [255, 218, 185],\n\tperu: [205, 133, 63],\n\tpink: [255, 192, 203],\n\tplum: [221, 160, 221],\n\tpowderblue: [176, 224, 230],\n\tpurple: [128, 0, 128],\n\trebeccapurple: [102, 51, 153],\n\tred: [255, 0, 0],\n\trosybrown: [188, 143, 143],\n\troyalblue: [65, 105, 225],\n\tsaddlebrown: [139, 69, 19],\n\tsalmon: [250, 128, 114],\n\tsandybrown: [244, 164, 96],\n\tseagreen: [46, 139, 87],\n\tseashell: [255, 245, 238],\n\tsienna: [160, 82, 45],\n\tsilver: [192, 192, 192],\n\tskyblue: [135, 206, 235],\n\tslateblue: [106, 90, 205],\n\tslategray: [112, 128, 144],\n\tslategrey: [112, 128, 144],\n\tsnow: [255, 250, 250],\n\tspringgreen: [0, 255, 127],\n\tsteelblue: [70, 130, 180],\n\ttan: [210, 180, 140],\n\tteal: [0, 128, 128],\n\tthistle: [216, 191, 216],\n\ttomato: [255, 99, 71],\n\tturquoise: [64, 224, 208],\n\tviolet: [238, 130, 238],\n\twheat: [245, 222, 179],\n\twhite: [255, 255, 255],\n\twhitesmoke: [245, 245, 245],\n\tyellow: [255, 255, 0],\n\tyellowgreen: [154, 205, 50],\n}\n\nfor (const key in colors) Object.freeze(colors[key]);\nexport default Object.freeze(colors);","import colorNames from 'color-name';\n\nconst reverseNames = Object.create(null);\n\n// Create a list of reverse color names\nfor (const name in colorNames) {\n\tif (Object.hasOwn(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nconst cs = {\n\tto: {},\n\tget: {},\n};\n\ncs.get = function (string) {\n\tconst prefix = string.slice(0, 3).toLowerCase();\n\tlet value;\n\tlet model;\n\tswitch (prefix) {\n\t\tcase 'hsl': {\n\t\t\tvalue = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'hwb': {\n\t\t\tvalue = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault: {\n\t\t\tvalue = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (!value) {\n\t\treturn null;\n\t}\n\n\treturn {model, value};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tconst abbr = /^#([a-f\\d]{3,4})$/i;\n\tconst hex = /^#([a-f\\d]{6})([a-f\\d]{2})?$/i;\n\tconst rgba = /^rgba?\\(\\s*([+-]?(?:\\d*\\.)?\\d+(?:e\\d+)?)(?=[\\s,])\\s*(?:,\\s*)?([+-]?(?:\\d*\\.)?\\d+(?:e\\d+)?)(?=[\\s,])\\s*(?:,\\s*)?([+-]?(?:\\d*\\.)?\\d+(?:e\\d+)?)\\s*(?:[\\s,|/]\\s*([+-]?(?:\\d*\\.)?\\d+(?:e\\d+)?)(%?)\\s*)?\\)$/i;\n\tconst per = /^rgba?\\(\\s*([+-]?[\\d.]+)%\\s*,?\\s*([+-]?[\\d.]+)%\\s*,?\\s*([+-]?[\\d.]+)%\\s*(?:[\\s,|/]\\s*([+-]?[\\d.]+)(%?)\\s*)?\\)$/i;\n\tconst keyword = /^(\\w+)$/;\n\n\tlet rgb = [0, 0, 0, 1];\n\tlet match;\n\tlet i;\n\tlet hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tconst i2 = i * 2;\n\t\t\trgb[i] = Number.parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Number.parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Number.parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Number.parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Number.parseFloat(match[i + 1]);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = match[5] ? Number.parseFloat(match[4]) * 0.01 : Number.parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(Number.parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = match[5] ? Number.parseFloat(match[4]) * 0.01 : Number.parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.toLowerCase().match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!Object.hasOwn(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// eslint-disable-next-line unicorn/prefer-spread\n\t\trgb = colorNames[match[1]].slice();\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tconst hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d.]+)%\\s*,?\\s*([+-]?[\\d.]+)%\\s*(?:[,|/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:e[+-]?\\d+)?)\\s*)?\\)$/i;\n\tconst match = string.match(hsl);\n\n\tif (match) {\n\t\tconst alpha = Number.parseFloat(match[4]);\n\t\tconst h = ((Number.parseFloat(match[1]) % 360) + 360) % 360;\n\t\tconst s = clamp(Number.parseFloat(match[2]), 0, 100);\n\t\tconst l = clamp(Number.parseFloat(match[3]), 0, 100);\n\t\tconst a = clamp(Number.isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tconst hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*[\\s,]\\s*([+-]?[\\d.]+)%\\s*[\\s,]\\s*([+-]?[\\d.]+)%\\s*(?:[\\s,]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:e[+-]?\\d+)?)\\s*)?\\)$/i;\n\tconst match = string.match(hwb);\n\n\tif (match) {\n\t\tconst alpha = Number.parseFloat(match[4]);\n\t\tconst h = ((Number.parseFloat(match[1]) % 360) + 360) % 360;\n\t\tconst w = clamp(Number.parseFloat(match[2]), 0, 100);\n\t\tconst b = clamp(Number.parseFloat(match[3]), 0, 100);\n\t\tconst a = clamp(Number.isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function (...rgba) {\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function (...rgba) {\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function (...rgba) {\n\tconst r = Math.round(rgba[0] / 255 * 100);\n\tconst g = Math.round(rgba[1] / 255 * 100);\n\tconst b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function (...hsla) {\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// Hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function (...hwba) {\n\tlet a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (...rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// Helpers\nfunction clamp(number_, min, max) {\n\treturn Math.min(Math.max(min, number_), max);\n}\n\nfunction hexDouble(number_) {\n\tconst string_ = Math.round(number_).toString(16).toUpperCase();\n\treturn (string_.length < 2) ? '0' + string_ : string_;\n}\n\nexport default cs;\n","const colors = {\n\taliceblue: [240, 248, 255],\n\tantiquewhite: [250, 235, 215],\n\taqua: [0, 255, 255],\n\taquamarine: [127, 255, 212],\n\tazure: [240, 255, 255],\n\tbeige: [245, 245, 220],\n\tbisque: [255, 228, 196],\n\tblack: [0, 0, 0],\n\tblanchedalmond: [255, 235, 205],\n\tblue: [0, 0, 255],\n\tblueviolet: [138, 43, 226],\n\tbrown: [165, 42, 42],\n\tburlywood: [222, 184, 135],\n\tcadetblue: [95, 158, 160],\n\tchartreuse: [127, 255, 0],\n\tchocolate: [210, 105, 30],\n\tcoral: [255, 127, 80],\n\tcornflowerblue: [100, 149, 237],\n\tcornsilk: [255, 248, 220],\n\tcrimson: [220, 20, 60],\n\tcyan: [0, 255, 255],\n\tdarkblue: [0, 0, 139],\n\tdarkcyan: [0, 139, 139],\n\tdarkgoldenrod: [184, 134, 11],\n\tdarkgray: [169, 169, 169],\n\tdarkgreen: [0, 100, 0],\n\tdarkgrey: [169, 169, 169],\n\tdarkkhaki: [189, 183, 107],\n\tdarkmagenta: [139, 0, 139],\n\tdarkolivegreen: [85, 107, 47],\n\tdarkorange: [255, 140, 0],\n\tdarkorchid: [153, 50, 204],\n\tdarkred: [139, 0, 0],\n\tdarksalmon: [233, 150, 122],\n\tdarkseagreen: [143, 188, 143],\n\tdarkslateblue: [72, 61, 139],\n\tdarkslategray: [47, 79, 79],\n\tdarkslategrey: [47, 79, 79],\n\tdarkturquoise: [0, 206, 209],\n\tdarkviolet: [148, 0, 211],\n\tdeeppink: [255, 20, 147],\n\tdeepskyblue: [0, 191, 255],\n\tdimgray: [105, 105, 105],\n\tdimgrey: [105, 105, 105],\n\tdodgerblue: [30, 144, 255],\n\tfirebrick: [178, 34, 34],\n\tfloralwhite: [255, 250, 240],\n\tforestgreen: [34, 139, 34],\n\tfuchsia: [255, 0, 255],\n\tgainsboro: [220, 220, 220],\n\tghostwhite: [248, 248, 255],\n\tgold: [255, 215, 0],\n\tgoldenrod: [218, 165, 32],\n\tgray: [128, 128, 128],\n\tgreen: [0, 128, 0],\n\tgreenyellow: [173, 255, 47],\n\tgrey: [128, 128, 128],\n\thoneydew: [240, 255, 240],\n\thotpink: [255, 105, 180],\n\tindianred: [205, 92, 92],\n\tindigo: [75, 0, 130],\n\tivory: [255, 255, 240],\n\tkhaki: [240, 230, 140],\n\tlavender: [230, 230, 250],\n\tlavenderblush: [255, 240, 245],\n\tlawngreen: [124, 252, 0],\n\tlemonchiffon: [255, 250, 205],\n\tlightblue: [173, 216, 230],\n\tlightcoral: [240, 128, 128],\n\tlightcyan: [224, 255, 255],\n\tlightgoldenrodyellow: [250, 250, 210],\n\tlightgray: [211, 211, 211],\n\tlightgreen: [144, 238, 144],\n\tlightgrey: [211, 211, 211],\n\tlightpink: [255, 182, 193],\n\tlightsalmon: [255, 160, 122],\n\tlightseagreen: [32, 178, 170],\n\tlightskyblue: [135, 206, 250],\n\tlightslategray: [119, 136, 153],\n\tlightslategrey: [119, 136, 153],\n\tlightsteelblue: [176, 196, 222],\n\tlightyellow: [255, 255, 224],\n\tlime: [0, 255, 0],\n\tlimegreen: [50, 205, 50],\n\tlinen: [250, 240, 230],\n\tmagenta: [255, 0, 255],\n\tmaroon: [128, 0, 0],\n\tmediumaquamarine: [102, 205, 170],\n\tmediumblue: [0, 0, 205],\n\tmediumorchid: [186, 85, 211],\n\tmediumpurple: [147, 112, 219],\n\tmediumseagreen: [60, 179, 113],\n\tmediumslateblue: [123, 104, 238],\n\tmediumspringgreen: [0, 250, 154],\n\tmediumturquoise: [72, 209, 204],\n\tmediumvioletred: [199, 21, 133],\n\tmidnightblue: [25, 25, 112],\n\tmintcream: [245, 255, 250],\n\tmistyrose: [255, 228, 225],\n\tmoccasin: [255, 228, 181],\n\tnavajowhite: [255, 222, 173],\n\tnavy: [0, 0, 128],\n\toldlace: [253, 245, 230],\n\tolive: [128, 128, 0],\n\tolivedrab: [107, 142, 35],\n\torange: [255, 165, 0],\n\torangered: [255, 69, 0],\n\torchid: [218, 112, 214],\n\tpalegoldenrod: [238, 232, 170],\n\tpalegreen: [152, 251, 152],\n\tpaleturquoise: [175, 238, 238],\n\tpalevioletred: [219, 112, 147],\n\tpapayawhip: [255, 239, 213],\n\tpeachpuff: [255, 218, 185],\n\tperu: [205, 133, 63],\n\tpink: [255, 192, 203],\n\tplum: [221, 160, 221],\n\tpowderblue: [176, 224, 230],\n\tpurple: [128, 0, 128],\n\trebeccapurple: [102, 51, 153],\n\tred: [255, 0, 0],\n\trosybrown: [188, 143, 143],\n\troyalblue: [65, 105, 225],\n\tsaddlebrown: [139, 69, 19],\n\tsalmon: [250, 128, 114],\n\tsandybrown: [244, 164, 96],\n\tseagreen: [46, 139, 87],\n\tseashell: [255, 245, 238],\n\tsienna: [160, 82, 45],\n\tsilver: [192, 192, 192],\n\tskyblue: [135, 206, 235],\n\tslateblue: [106, 90, 205],\n\tslategray: [112, 128, 144],\n\tslategrey: [112, 128, 144],\n\tsnow: [255, 250, 250],\n\tspringgreen: [0, 255, 127],\n\tsteelblue: [70, 130, 180],\n\ttan: [210, 180, 140],\n\tteal: [0, 128, 128],\n\tthistle: [216, 191, 216],\n\ttomato: [255, 99, 71],\n\tturquoise: [64, 224, 208],\n\tviolet: [238, 130, 238],\n\twheat: [245, 222, 179],\n\twhite: [255, 255, 255],\n\twhitesmoke: [245, 245, 245],\n\tyellow: [255, 255, 0],\n\tyellowgreen: [154, 205, 50],\n}\n\nfor (const key in colors) Object.freeze(colors[key]);\nexport default Object.freeze(colors);","/* MIT license */\n/* eslint-disable no-mixed-operators */\nimport cssKeywords from 'color-name';\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nconst reverseKeywords = {};\nfor (const key of Object.keys(cssKeywords)) {\n\treverseKeywords[cssKeywords[key]] = key;\n}\n\nconst convert = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\toklab: {channels: 3, labels: ['okl', 'oka', 'okb']},\n\tlch: {channels: 3, labels: 'lch'},\n\toklch: {channels: 3, labels: ['okl', 'okc', 'okh']},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']},\n};\n\nexport default convert;\n\n// LAB f(t) constant\nconst LAB_FT = (6 / 29) ** 3;\n\n// SRGB non-linear transform functions\nfunction srgbNonlinearTransform(c) {\n\tconst cc = c > 0.003_130_8\n\t\t? ((1.055 * (c ** (1 / 2.4))) - 0.055)\n\t\t: c * 12.92;\n\treturn Math.min(Math.max(0, cc), 1);\n}\n\nfunction srgbNonlinearTransformInv(c) {\n\treturn c > 0.040_45 ? (((c + 0.055) / 1.055) ** 2.4) : (c / 12.92);\n}\n\n// Hide .channels and .labels properties\nfor (const model of Object.keys(convert)) {\n\tif (!('channels' in convert[model])) {\n\t\tthrow new Error('missing channels property: ' + model);\n\t}\n\n\tif (!('labels' in convert[model])) {\n\t\tthrow new Error('missing channel labels property: ' + model);\n\t}\n\n\tif (convert[model].labels.length !== convert[model].channels) {\n\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t}\n\n\tconst {channels, labels} = convert[model];\n\tdelete convert[model].channels;\n\tdelete convert[model].labels;\n\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\tObject.defineProperty(convert[model], 'labels', {value: labels});\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst min = Math.min(r, g, b);\n\tconst max = Math.max(r, g, b);\n\tconst delta = max - min;\n\tlet h;\n\tlet s;\n\n\tswitch (max) {\n\t\tcase min: {\n\t\t\th = 0;\n\n\t\t\tbreak;\n\t\t}\n\n\t\tcase r: {\n\t\t\th = (g - b) / delta;\n\n\t\t\tbreak;\n\t\t}\n\n\t\tcase g: {\n\t\t\th = 2 + (b - r) / delta;\n\n\t\t\tbreak;\n\t\t}\n\n\t\tcase b: {\n\t\t\th = 4 + (r - g) / delta;\n\n\t\t\tbreak;\n\t\t}\n\t// No default\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst l = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tlet rdif;\n\tlet gdif;\n\tlet bdif;\n\tlet h;\n\tlet s;\n\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst v = Math.max(r, g, b);\n\tconst diff = v - Math.min(r, g, b);\n\tconst diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = 0;\n\t\ts = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tswitch (v) {\n\t\t\tcase r: {\n\t\t\t\th = bdif - gdif;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase g: {\n\t\t\t\th = (1 / 3) + rdif - bdif;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase b: {\n\t\t\t\th = (2 / 3) + gdif - rdif;\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t// No default\n\t\t}\n\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100,\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tconst r = rgb[0];\n\tconst g = rgb[1];\n\tlet b = rgb[2];\n\tconst h = convert.rgb.hsl(rgb)[0];\n\tconst w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.oklab = function (rgb) {\n\t// Assume sRGB\n\tconst r = srgbNonlinearTransformInv(rgb[0] / 255);\n\tconst g = srgbNonlinearTransformInv(rgb[1] / 255);\n\tconst b = srgbNonlinearTransformInv(rgb[2] / 255);\n\n\tconst lp = Math.cbrt(0.412_221_470_8 * r + 0.536_332_536_3 * g + 0.051_445_992_9 * b);\n\tconst mp = Math.cbrt(0.211_903_498_2 * r + 0.680_699_545_1 * g + 0.107_396_956_6 * b);\n\tconst sp = Math.cbrt(0.088_302_461_9 * r + 0.281_718_837_6 * g + 0.629_978_700_5 * b);\n\n\tconst l = 0.210_454_255_3 * lp + 0.793_617_785 * mp - 0.004_072_046_8 * sp;\n\tconst aa = 1.977_998_495_1 * lp - 2.428_592_205 * mp + 0.450_593_709_9 * sp;\n\tconst bb = 0.025_904_037_1 * lp + 0.782_771_766_2 * mp - 0.808_675_766 * sp;\n\n\treturn [l * 100, aa * 100, bb * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\n\tconst k = Math.min(1 - r, 1 - g, 1 - b);\n\tconst c = (1 - r - k) / (1 - k) || 0;\n\tconst m = (1 - g - k) / (1 - k) || 0;\n\tconst y = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\nfunction comparativeDistance(x, y) {\n\t/*\n\t\tSee https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n\t*/\n\treturn (\n\t\t((x[0] - y[0]) ** 2) +\n\t\t((x[1] - y[1]) ** 2) +\n\t\t((x[2] - y[2]) ** 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tconst reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tlet currentClosestDistance = Number.POSITIVE_INFINITY;\n\tlet currentClosestKeyword;\n\n\tfor (const keyword of Object.keys(cssKeywords)) {\n\t\tconst value = cssKeywords[keyword];\n\n\t\t// Compute comparative distance\n\t\tconst distance = comparativeDistance(rgb, value);\n\n\t\t// Check if its less, if so set as closest\n\t\tif (distance < currentClosestDistance) {\n\t\t\tcurrentClosestDistance = distance;\n\t\t\tcurrentClosestKeyword = keyword;\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn [...cssKeywords[keyword]];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\t// Assume sRGB\n\tconst r = srgbNonlinearTransformInv(rgb[0] / 255);\n\tconst g = srgbNonlinearTransformInv(rgb[1] / 255);\n\tconst b = srgbNonlinearTransformInv(rgb[2] / 255);\n\n\tconst x = (r * 0.412_456_4) + (g * 0.357_576_1) + (b * 0.180_437_5);\n\tconst y = (r * 0.212_672_9) + (g * 0.715_152_2) + (b * 0.072_175);\n\tconst z = (r * 0.019_333_9) + (g * 0.119_192) + (b * 0.950_304_1);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tconst xyz = convert.rgb.xyz(rgb);\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > LAB_FT ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > LAB_FT ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > LAB_FT ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tconst h = hsl[0] / 360;\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\tlet t3;\n\tlet value;\n\n\tif (s === 0) {\n\t\tvalue = l * 255;\n\t\treturn [value, value, value];\n\t}\n\n\tconst t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\n\tconst t1 = 2 * l - t2;\n\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tvalue = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tvalue = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tvalue = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tvalue = t1;\n\t\t}\n\n\t\trgb[i] = value * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tconst h = hsl[0];\n\tlet s = hsl[1] / 100;\n\tlet l = hsl[2] / 100;\n\tlet smin = s;\n\tconst lmin = Math.max(l, 0.01);\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tconst v = (l + s) / 2;\n\tconst sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tconst h = hsv[0] / 60;\n\tconst s = hsv[1] / 100;\n\tlet v = hsv[2] / 100;\n\tconst hi = Math.floor(h) % 6;\n\n\tconst f = h - Math.floor(h);\n\tconst p = 255 * v * (1 - s);\n\tconst q = 255 * v * (1 - (s * f));\n\tconst t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0: {\n\t\t\treturn [v, t, p];\n\t\t}\n\n\t\tcase 1: {\n\t\t\treturn [q, v, p];\n\t\t}\n\n\t\tcase 2: {\n\t\t\treturn [p, v, t];\n\t\t}\n\n\t\tcase 3: {\n\t\t\treturn [p, q, v];\n\t\t}\n\n\t\tcase 4: {\n\t\t\treturn [t, p, v];\n\t\t}\n\n\t\tcase 5: {\n\t\t\treturn [v, p, q];\n\t\t}\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tconst h = hsv[0];\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\tconst vmin = Math.max(v, 0.01);\n\tlet sl;\n\tlet l;\n\n\tl = (2 - s) * v;\n\tconst lmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tconst h = hwb[0] / 360;\n\tlet wh = hwb[1] / 100;\n\tlet bl = hwb[2] / 100;\n\tconst ratio = wh + bl;\n\tlet f;\n\n\t// Wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\tconst i = Math.floor(6 * h);\n\tconst v = 1 - bl;\n\tf = 6 * h - i;\n\n\t// eslint-disable-next-line no-bitwise\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tconst n = wh + f * (v - wh); // Linear interpolation\n\n\tlet r;\n\tlet g;\n\tlet b;\n\t/* eslint-disable max-statements-per-line,no-multi-spaces, default-case-last */\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: { r = v;  g = n;  b = wh; break;\n\t\t}\n\n\t\tcase 1: { r = n;  g = v;  b = wh; break;\n\t\t}\n\n\t\tcase 2: { r = wh; g = v;  b = n; break;\n\t\t}\n\n\t\tcase 3: { r = wh; g = n;  b = v; break;\n\t\t}\n\n\t\tcase 4: { r = n;  g = wh; b = v; break;\n\t\t}\n\n\t\tcase 5: { r = v;  g = wh; b = n; break;\n\t\t}\n\t}\n\t/* eslint-enable max-statements-per-line,no-multi-spaces, default-case-last */\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tconst c = cmyk[0] / 100;\n\tconst m = cmyk[1] / 100;\n\tconst y = cmyk[2] / 100;\n\tconst k = cmyk[3] / 100;\n\n\tconst r = 1 - Math.min(1, c * (1 - k) + k);\n\tconst g = 1 - Math.min(1, m * (1 - k) + k);\n\tconst b = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\tlet r;\n\tlet g;\n\tlet b;\n\n\tr = (x * 3.240_454_2) + (y * -1.537_138_5) + (z * -0.498_531_4);\n\tg = (x * -0.969_266) + (y * 1.876_010_8) + (z * 0.041_556);\n\tb = (x * 0.055_643_4) + (y * -0.204_025_9) + (z * 1.057_225_2);\n\n\t// Assume sRGB\n\tr = srgbNonlinearTransform(r);\n\tg = srgbNonlinearTransform(g);\n\tb = srgbNonlinearTransform(b);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > LAB_FT ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > LAB_FT ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > LAB_FT ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.xyz.oklab = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\n\tconst lp = Math.cbrt(0.818_933_010_1 * x + 0.361_866_742_4 * y - 0.128_859_713_7 * z);\n\tconst mp = Math.cbrt(0.032_984_543_6 * x + 0.929_311_871_5 * y + 0.036_145_638_7 * z);\n\tconst sp = Math.cbrt(0.048_200_301_8 * x + 0.264_366_269_1 * y + 0.633_851_707 * z);\n\n\tconst l = 0.210_454_255_3 * lp + 0.793_617_785 * mp - 0.004_072_046_8 * sp;\n\tconst a = 1.977_998_495_1 * lp - 2.428_592_205 * mp + 0.450_593_709_9 * sp;\n\tconst b = 0.025_904_037_1 * lp + 0.782_771_766_2 * mp - 0.808_675_766 * sp;\n\n\treturn [l * 100, a * 100, b * 100];\n};\n\nconvert.oklab.oklch = function (oklab) {\n\treturn convert.lab.lch(oklab);\n};\n\nconvert.oklab.xyz = function (oklab) {\n\tconst ll = oklab[0] / 100;\n\tconst a = oklab[1] / 100;\n\tconst b = oklab[2] / 100;\n\n\tconst l = (0.999_999_998 * ll + 0.396_337_792 * a + 0.215_803_758 * b) ** 3;\n\tconst m = (1.000_000_008 * ll - 0.105_561_342 * a - 0.063_854_175 * b) ** 3;\n\tconst s = (1.000_000_055 * ll - 0.089_484_182 * a - 1.291_485_538 * b) ** 3;\n\n\tconst x = 1.227_013_851 * l - 0.557_799_98 * m + 0.281_256_149 * s;\n\tconst y = -0.040_580_178 * l + 1.112_256_87 * m - 0.071_676_679 * s;\n\tconst z = -0.076_381_285 * l - 0.421_481_978 * m + 1.586_163_22 * s;\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.oklab.rgb = function (oklab) {\n\tconst ll = oklab[0] / 100;\n\tconst aa = oklab[1] / 100;\n\tconst bb = oklab[2] / 100;\n\n\tconst l = (ll + 0.396_337_777_4 * aa + 0.215_803_757_3 * bb) ** 3;\n\tconst m = (ll - 0.105_561_345_8 * aa - 0.063_854_172_8 * bb) ** 3;\n\tconst s = (ll - 0.089_484_177_5 * aa - 1.291_485_548 * bb) ** 3;\n\n\t// Assume sRGB\n\tconst r = srgbNonlinearTransform(4.076_741_662_1 * l - 3.307_711_591_3 * m + 0.230_969_929_2 * s);\n\tconst g = srgbNonlinearTransform(-1.268_438_004_6 * l + 2.609_757_401_1 * m - 0.341_319_396_5 * s);\n\tconst b = srgbNonlinearTransform(-0.004_196_086_3 * l - 0.703_418_614_7 * m + 1.707_614_701 * s);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.oklch.oklab = function (oklch) {\n\treturn convert.lch.lab(oklch);\n};\n\nconvert.lab.xyz = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet x;\n\tlet y;\n\tlet z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tconst y2 = y ** 3;\n\tconst x2 = x ** 3;\n\tconst z2 = z ** 3;\n\ty = y2 > LAB_FT ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > LAB_FT ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > LAB_FT ? z2 : (z - 16 / 116) / 7.787;\n\n\t// Illuminant D65 XYZ Tristrimulus Values\n\t// https://en.wikipedia.org/wiki/CIE_1931_color_space\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet h;\n\n\tconst hr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst c = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tconst l = lch[0];\n\tconst c = lch[1];\n\tconst h = lch[2];\n\n\tconst hr = h / 360 * 2 * Math.PI;\n\tconst a = c * Math.cos(hr);\n\tconst b = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args, saturation = null) {\n\tconst [r, g, b] = args;\n\tlet value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tlet ansi = 30\n\t\t/* eslint-disable no-bitwise */\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\t\t/* eslint-enable no-bitwise */\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// Optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tconst r = args[0];\n\tconst g = args[1];\n\tconst b = args[2];\n\n\t// We use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\t// eslint-disable-next-line no-bitwise\n\tif (r >> 4 === g >> 4 && g >> 4 === b >> 4) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tconst ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\targs = args[0];\n\n\tlet color = args % 10;\n\n\t// Handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tconst mult = (Math.trunc(args > 50) + 1) * 0.5;\n\t/* eslint-disable no-bitwise */\n\tconst r = ((color & 1) * mult) * 255;\n\tconst g = (((color >> 1) & 1) * mult) * 255;\n\tconst b = (((color >> 2) & 1) * mult) * 255;\n\t/* eslint-enable no-bitwise */\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\targs = args[0];\n\n\t// Handle greyscale\n\tif (args >= 232) {\n\t\tconst c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tlet rem;\n\tconst r = Math.floor(args / 36) / 5 * 255;\n\tconst g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tconst b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\t/* eslint-disable no-bitwise */\n\tconst integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\t/* eslint-enable no-bitwise */\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.slice(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tconst match = args.toString(16).match(/[a-f\\d]{6}|[a-f\\d]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tlet colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = [...colorString].map(char => char + char).join('');\n\t}\n\n\tconst integer = Number.parseInt(colorString, 16);\n\t/* eslint-disable no-bitwise */\n\tconst r = (integer >> 16) & 0xFF;\n\tconst g = (integer >> 8) & 0xFF;\n\tconst b = integer & 0xFF;\n\t/* eslint-enable no-bitwise */\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst max = Math.max(Math.max(r, g), b);\n\tconst min = Math.min(Math.min(r, g), b);\n\tconst chroma = (max - min);\n\tlet hue;\n\n\tconst grayscale = chroma < 1 ? min / (1 - chroma) : 0;\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else if (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else if (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\n\tconst c = l < 0.5 ? (2 * s * l) : (2 * s * (1 - l));\n\n\tlet f = 0;\n\tif (c < 1) {\n\t\tf = (l - 0.5 * c) / (1 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\n\tconst c = s * v;\n\tlet f = 0;\n\n\tif (c < 1) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tconst h = hcg[0] / 360;\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tif (c === 0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tconst pure = [0, 0, 0];\n\tconst hi = (h % 1) * 6;\n\tconst v = hi % 1;\n\tconst w = 1 - v;\n\tlet mg = 0;\n\n\t/* eslint-disable max-statements-per-line */\n\tswitch (Math.floor(hi)) {\n\t\tcase 0: {\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\t}\n\n\t\tcase 1: {\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\t}\n\n\t\tcase 2: {\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\t}\n\n\t\tcase 3: {\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\t}\n\n\t\tcase 4: {\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\t}\n\n\t\tdefault: {\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t\t}\n\t}\n\t/* eslint-enable max-statements-per-line */\n\n\tmg = (1 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255,\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst v = c + g * (1 - c);\n\tlet f = 0;\n\n\tif (v > 0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst l = g * (1 - c) + 0.5 * c;\n\tlet s = 0;\n\n\tif (l > 0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else if (l >= 0.5 && l < 1) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\tconst v = c + g * (1 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tconst w = hwb[1] / 100;\n\tconst b = hwb[2] / 100;\n\tconst v = 1 - b;\n\tconst c = v - w;\n\tlet g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65_535) * 255, (apple[1] / 65_535) * 255, (apple[2] / 65_535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65_535, (rgb[1] / 255) * 65_535, (rgb[2] / 255) * 65_535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hsv = convert.gray.hsl;\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\t/* eslint-disable no-bitwise */\n\tconst value = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tconst integer = (value << 16) + (value << 8) + value;\n\t/* eslint-enable no-bitwise */\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.slice(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tconst value = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [value / 255 * 100];\n};\n","import conversions from './conversions.js';\n\n/*\n\tThis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tconst graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tconst models = Object.keys(conversions);\n\n\tfor (let {length} = models, i = 0; i < length; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null,\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tconst graph = buildGraph();\n\tconst queue = [fromModel]; // Unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length > 0) {\n\t\tconst current = queue.pop();\n\t\tconst adjacents = Object.keys(conversions[current]);\n\n\t\tfor (let {length} = adjacents, i = 0; i < length; i++) {\n\t\t\tconst adjacent = adjacents[i];\n\t\t\tconst node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tconst path = [graph[toModel].parent, toModel];\n\tlet fn = conversions[graph[toModel].parent][toModel];\n\n\tlet cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nfunction route(fromModel) {\n\tconst graph = deriveBFS(fromModel);\n\tconst conversion = {};\n\n\tconst models = Object.keys(graph);\n\tfor (let {length} = models, i = 0; i < length; i++) {\n\t\tconst toModel = models[i];\n\t\tconst node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// No possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n}\n\nexport default route;\n","import conversions from './conversions.js';\nimport route from './route.js';\n\nconst convert = {};\n\nconst models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\tconst result = fn(args);\n\n\t\t// We're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (let {length} = result, i = 0; i < length; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfor (const fromModel of models) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tconst routes = route(fromModel);\n\tconst routeModels = Object.keys(routes);\n\n\tfor (const toModel of routeModels) {\n\t\tconst fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t}\n}\n\nexport default convert;\n","import colorString from 'color-string';\nimport convert from 'color-convert';\n\nconst skippedModels = [\n\t// To be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// Gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// Shouldn't really be in color-convert either...\n\t'hex',\n];\n\nconst hashedModelKeys = {};\nfor (const model of Object.keys(convert)) {\n\thashedModelKeys[[...convert[model].labels].sort().join('')] = model;\n}\n\nconst limiters = {};\n\nfunction Color(object, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(object, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tlet i;\n\tlet channels;\n\n\tif (object == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (object instanceof Color) {\n\t\tthis.model = object.model;\n\t\tthis.color = [...object.color];\n\t\tthis.valpha = object.valpha;\n\t} else if (typeof object === 'string') {\n\t\tconst result = colorString.get(object);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + object);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (object.length > 0) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tconst newArray = Array.prototype.slice.call(object, 0, channels);\n\t\tthis.color = zeroArray(newArray, channels);\n\t\tthis.valpha = typeof object[channels] === 'number' ? object[channels] : 1;\n\t} else if (typeof object === 'number') {\n\t\t// This is always RGB - can be converted later on.\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(object >> 16) & 0xFF,\n\t\t\t(object >> 8) & 0xFF,\n\t\t\tobject & 0xFF,\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tconst keys = Object.keys(object);\n\t\tif ('alpha' in object) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof object.alpha === 'number' ? object.alpha : 0;\n\t\t}\n\n\t\tconst hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(object));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tconst {labels} = convert[this.model];\n\t\tconst color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(object[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// Perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tconst limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString() {\n\t\treturn this.string();\n\t},\n\n\ttoJSON() {\n\t\treturn this[this.model]();\n\t},\n\n\tstring(places) {\n\t\tlet self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tconst arguments_ = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to[self.model](...arguments_);\n\t},\n\n\tpercentString(places) {\n\t\tconst self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tconst arguments_ = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to.rgb.percent(...arguments_);\n\t},\n\n\tarray() {\n\t\treturn this.valpha === 1 ? [...this.color] : [...this.color, this.valpha];\n\t},\n\n\tobject() {\n\t\tconst result = {};\n\t\tconst {channels} = convert[this.model];\n\t\tconst {labels} = convert[this.model];\n\n\t\tfor (let i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray() {\n\t\tconst rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject() {\n\t\tconst rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround(places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color([...this.color.map(roundToPlace(places)), this.valpha], this.model);\n\t},\n\n\talpha(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color([...this.color, Math.max(0, Math.min(1, value))], this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// Rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, value => ((value % 360) + 360) % 360),\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(95.047)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(108.833)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn colorString.to.hex(...this.rgb().round().color);\n\t},\n\n\thexa(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\tconst rgbArray = this.rgb().round().color;\n\n\t\tlet alphaHex = Math.round(this.valpha * 255).toString(16).toUpperCase();\n\t\tif (alphaHex.length === 1) {\n\t\t\talphaHex = '0' + alphaHex;\n\t\t}\n\n\t\treturn colorString.to.hex(...rgbArray) + alphaHex;\n\t},\n\n\trgbNumber() {\n\t\tconst rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity() {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tconst rgb = this.rgb().color;\n\n\t\tconst lum = [];\n\t\tfor (const [i, element] of rgb.entries()) {\n\t\t\tconst chan = element / 255;\n\t\t\tlum[i] = (chan <= 0.04045) ? chan / 12.92 : ((chan + 0.055) / 1.055) ** 2.4;\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast(color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tconst lum1 = this.luminosity();\n\t\tconst lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel(color2) {\n\t\t// https://www.w3.org/TR/WCAG/#contrast-enhanced\n\t\tconst contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark() {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tconst rgb = this.rgb().color;\n\t\tconst yiq = (rgb[0] * 2126 + rgb[1] * 7152 + rgb[2] * 722) / 10000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight() {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate() {\n\t\tconst rgb = this.rgb();\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tlighten(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale() {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_colour_to_grayscale\n\t\tconst rgb = this.rgb().color;\n\t\tconst value = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(value, value, value);\n\t},\n\n\tfade(ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer(ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate(degrees) {\n\t\tconst hsl = this.hsl();\n\t\tlet hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix(mixinColor, weight) {\n\t\t// Ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\n\t\tconst color1 = mixinColor.rgb();\n\t\tconst color2 = this.rgb();\n\t\tconst p = weight === undefined ? 0.5 : weight;\n\n\t\tconst w = 2 * p - 1;\n\t\tconst a = color1.alpha() - color2.alpha();\n\n\t\tconst w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2;\n\t\tconst w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n};\n\n// Model conversion methods and static constructors\nfor (const model of Object.keys(convert)) {\n\tif (skippedModels.includes(model)) {\n\t\tcontinue;\n\t}\n\n\tconst {channels} = convert[model];\n\n\t// Conversion methods\n\tColor.prototype[model] = function (...arguments_) {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (arguments_.length > 0) {\n\t\t\treturn new Color(arguments_, model);\n\t\t}\n\n\t\treturn new Color([...assertArray(convert[this.model][model].raw(this.color)), this.valpha], model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (...arguments_) {\n\t\tlet color = arguments_[0];\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(arguments_, channels);\n\t\t}\n\n\t\treturn new Color(color, model);\n\t};\n}\n\nfunction roundTo(number, places) {\n\treturn Number(number.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (number) {\n\t\treturn roundTo(number, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tfor (const m of model) {\n\t\t(limiters[m] ||= [])[channel] = modifier;\n\t}\n\n\tmodel = model[0];\n\n\treturn function (value) {\n\t\tlet result;\n\n\t\tif (value !== undefined) {\n\t\t\tif (modifier) {\n\t\t\t\tvalue = modifier(value);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = value;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(value) {\n\treturn Array.isArray(value) ? value : [value];\n}\n\nfunction zeroArray(array, length) {\n\tfor (let i = 0; i < length; i++) {\n\t\tif (typeof array[i] !== 'number') {\n\t\t\tarray[i] = 0;\n\t\t}\n\t}\n\n\treturn array;\n}\n\nexport default Color;\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport Color from 'color';\n/**\n * Is the current theme dark?\n */\nexport function isDarkModeEnabled() {\n    const darkModePreference = window?.matchMedia?.('(prefers-color-scheme: dark)')?.matches;\n    const darkModeSetting = document.body.getAttribute('data-themes')?.includes('dark');\n    return darkModeSetting || darkModePreference || false;\n}\n/**\n * Is the current theme high contrast?\n */\nexport function isHighContrastModeEnabled() {\n    const highContrastPreference = window?.matchMedia?.('(forced-colors: active)')?.matches;\n    const highContrastSetting = document.body.getAttribute('data-themes')?.includes('highcontrast');\n    return highContrastSetting || highContrastPreference || false;\n}\n/**\n * Should we invert the text on this background color?\n *\n * @param color RGB color value as a hex string\n * @return boolean\n */\nexport function invertTextColor(color) {\n    return colorContrast(color, '#ffffff') < 4.5;\n}\n/**\n * Is this color too bright?\n *\n * @param color RGB color value as a hex string\n * @return boolean\n */\nexport function isBrightColor(color) {\n    return calculateLuma(color) > 0.6;\n}\n/**\n * Get color for on-page elements\n * theme color by default, grey if theme color is too bright.\n *\n * @param color the color to contrast against, e.g. #ffffff\n * @param backgroundColor the background color to contrast against, e.g. #000000\n */\nexport function elementColor(color, backgroundColor) {\n    const brightBackground = isBrightColor(backgroundColor);\n    const blurredBackground = mix(backgroundColor, brightBackground ? color : '#ffffff', 66);\n    let contrast = colorContrast(color, blurredBackground);\n    const minContrast = isHighContrastModeEnabled() ? 5.6 : 3.2;\n    let iteration = 0;\n    let result = color;\n    const epsilon = (brightBackground ? -100 : 100) / 255;\n    while (contrast < minContrast && iteration++ < 100) {\n        const hsl = hexToHSL(result);\n        const l = Math.max(0, Math.min(255, hsl.l + epsilon));\n        result = hslToHex({ h: hsl.h, s: hsl.s, l });\n        contrast = colorContrast(result, blurredBackground);\n    }\n    return result;\n}\n/**\n * Get color for on-page text:\n * black if background is bright, white if background is dark.\n *\n * @param color1 the color to contrast against, e.g. #ffffff\n * @param color2 the background color to contrast against, e.g. #000000\n * @param factor the factor to mix the colors between -100 and 100, e.g. 66\n */\nexport function mix(color1, color2, factor) {\n    if (factor < -100 || factor > 100) {\n        throw new RangeError('Factor must be between -100 and 100');\n    }\n    return new Color(color2).mix(new Color(color1), (factor + 100) / 200).hex();\n}\n/**\n * Lighten a color by a factor\n *\n * @param color the color to lighten, e.g. #000000\n * @param factor the factor to lighten the color by between -100 and 100, e.g. -41\n */\nexport function lighten(color, factor) {\n    if (factor < -100 || factor > 100) {\n        throw new RangeError('Factor must be between -100 and 100');\n    }\n    return new Color(color).lighten((factor + 100) / 200).hex();\n}\n/**\n * Darken a color by a factor\n *\n * @param color the color to darken, e.g. #ffffff\n * @param factor the factor to darken the color by between -100 and 100, e.g. 32\n */\nexport function darken(color, factor) {\n    if (factor < -100 || factor > 100) {\n        throw new RangeError('Factor must be between -100 and 100');\n    }\n    return new Color(color).darken((factor + 100) / 200).hex();\n}\n/**\n * Calculate the luminance of a color\n *\n * @param color the color to calculate the luminance of, e.g. #ffffff\n */\nexport function calculateLuminance(color) {\n    return hexToHSL(color).l;\n}\n/**\n * Calculate the luma of a color\n *\n * @param color the color to calculate the luma of, e.g. #ffffff\n */\nexport function calculateLuma(color) {\n    const rgb = hexToRGB(color).map((value) => {\n        value /= 255;\n        return value <= 0.03928\n            ? value / 12.92\n            : Math.pow((value + 0.055) / 1.055, 2.4);\n    });\n    const [red, green, blue] = rgb;\n    return 0.2126 * red + 0.7152 * green + 0.0722 * blue;\n}\n/**\n * Calculate the contrast between two colors\n *\n * @param color1 the first color to calculate the contrast of, e.g. #ffffff\n * @param color2 the second color to calculate the contrast of, e.g. #000000\n */\nexport function colorContrast(color1, color2) {\n    const luminance1 = calculateLuma(color1) + 0.05;\n    const luminance2 = calculateLuma(color2) + 0.05;\n    return Math.max(luminance1, luminance2) / Math.min(luminance1, luminance2);\n}\n/**\n * Convert hex color to RGB\n *\n * @param color RGB color value as a hex string\n */\nexport function hexToRGB(color) {\n    return new Color(color).rgb().array();\n}\n/**\n * Convert RGB color to hex\n *\n * @param color RGB color value as a hex string\n */\nexport function hexToHSL(color) {\n    const hsl = new Color(color).hsl();\n    return { h: hsl.color[0], s: hsl.color[1], l: hsl.color[2] };\n}\n/**\n * Convert HSL color to hex\n *\n * @param hsl HSL color value as an object\n * @param hsl.h hue\n * @param hsl.s saturation\n * @param hsl.l lightness\n */\nexport function hslToHex(hsl) {\n    return new Color(hsl).hex();\n}\n/**\n * Convert RGB color to hex\n *\n * @param r red\n * @param g green\n * @param b blue\n */\nexport function rgbToHex(r, g, b) {\n    const hex = ((1 << 24) | (r << 16) | (g << 8) | b).toString(16).slice(1);\n    return `#${hex}`;\n}\n","import { XMLParser, XMLBuilder } from \"fast-xml-parser\";\nexport function generateLockXML(ownerHREF) {\n    return getBuilder().build(namespace({\n        lockinfo: {\n            \"@_xmlns:d\": \"DAV:\",\n            lockscope: {\n                exclusive: {}\n            },\n            locktype: {\n                write: {}\n            },\n            owner: {\n                href: ownerHREF\n            }\n        }\n    }, \"d\"));\n}\nfunction getBuilder() {\n    return new XMLBuilder({\n        attributeNamePrefix: \"@_\",\n        format: true,\n        ignoreAttributes: false,\n        suppressEmptyNode: true\n    });\n}\nfunction getParser() {\n    return new XMLParser({\n        removeNSPrefix: true,\n        parseAttributeValue: true,\n        parseTagValue: true\n    });\n}\nfunction namespace(obj, ns) {\n    const copy = { ...obj };\n    for (const key in copy) {\n        if (!copy.hasOwnProperty(key)) {\n            continue;\n        }\n        if (copy[key] && typeof copy[key] === \"object\" && key.indexOf(\":\") === -1) {\n            copy[`${ns}:${key}`] = namespace(copy[key], ns);\n            delete copy[key];\n        }\n        else if (/^@_/.test(key) === false) {\n            copy[`${ns}:${key}`] = copy[key];\n            delete copy[key];\n        }\n    }\n    return copy;\n}\nexport function parseGenericResponse(xml) {\n    return getParser().parse(xml);\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath, getAllDirectories, normalisePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { getStat } from \"./stat.js\";\nexport async function createDirectory(context, dirPath, options = {}) {\n    if (options.recursive === true)\n        return createDirectoryRecursively(context, dirPath, options);\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, ensureCollectionPath(encodePath(dirPath))),\n        method: \"MKCOL\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n/**\n * Ensure the path is a proper \"collection\" path by ensuring it has a trailing \"/\".\n * The proper format of collection according to the specification does contain the trailing slash.\n * http://www.webdav.org/specs/rfc4918.html#rfc.section.5.2\n * @param path Path of the collection\n * @return string Path of the collection with appended trailing \"/\" in case the `path` does not have it.\n */\nfunction ensureCollectionPath(path) {\n    if (!path.endsWith(\"/\")) {\n        return path + \"/\";\n    }\n    return path;\n}\nasync function createDirectoryRecursively(context, dirPath, options = {}) {\n    const paths = getAllDirectories(normalisePath(dirPath));\n    paths.sort((a, b) => {\n        if (a.length > b.length) {\n            return 1;\n        }\n        else if (b.length > a.length) {\n            return -1;\n        }\n        return 0;\n    });\n    let creating = false;\n    for (const testPath of paths) {\n        if (creating) {\n            await createDirectory(context, testPath, {\n                ...options,\n                recursive: false\n            });\n            continue;\n        }\n        try {\n            const testStat = (await getStat(context, testPath));\n            if (testStat.type !== \"directory\") {\n                throw new Error(`Path includes a file: ${dirPath}`);\n            }\n        }\n        catch (err) {\n            const error = err;\n            if (error.status === 404) {\n                creating = true;\n                await createDirectory(context, testPath, {\n                    ...options,\n                    recursive: false\n                });\n            }\n            else {\n                throw err;\n            }\n        }\n    }\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport axios from '@nextcloud/axios';\nimport { emit } from '@nextcloud/event-bus';\nimport { t } from '@nextcloud/l10n';\nimport { confirmPassword } from '@nextcloud/password-confirmation';\nimport { generateOcsUrl, generateUrl } from '@nextcloud/router';\nimport logger from '../logger.ts';\nimport { formatTag, parseIdFromLocation, parseTags } from '../utils.ts';\nimport { davClient } from './davClient.js';\nexport const fetchTagsPayload = `<?xml version=\"1.0\"?>\n<d:propfind xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t<d:prop>\n\t\t<oc:id />\n\t\t<oc:display-name />\n\t\t<oc:user-visible />\n\t\t<oc:user-assignable />\n\t\t<oc:can-assign />\n\t\t<d:getetag />\n\t\t<nc:color />\n\t</d:prop>\n</d:propfind>`;\n/**\n *\n */\nexport async function fetchTags() {\n    const path = '/systemtags';\n    try {\n        const { data: tags } = await davClient.getDirectoryContents(path, {\n            data: fetchTagsPayload,\n            details: true,\n            glob: '/systemtags/*', // Filter out first empty tag\n        });\n        return parseTags(tags);\n    }\n    catch (error) {\n        logger.error(t('systemtags', 'Failed to load tags'), { error });\n        throw new Error(t('systemtags', 'Failed to load tags'));\n    }\n}\n/**\n *\n * @param tagId\n */\nexport async function fetchTag(tagId) {\n    const path = '/systemtags/' + tagId;\n    try {\n        const { data: tag } = await davClient.stat(path, {\n            data: fetchTagsPayload,\n            details: true,\n        });\n        return parseTags([tag])[0];\n    }\n    catch (error) {\n        logger.error(t('systemtags', 'Failed to load tag'), { error });\n        throw new Error(t('systemtags', 'Failed to load tag'));\n    }\n}\n/**\n *\n */\nexport async function fetchLastUsedTagIds() {\n    const url = generateUrl('/apps/systemtags/lastused');\n    try {\n        const { data: lastUsedTagIds } = await axios.get(url);\n        return lastUsedTagIds.map(Number);\n    }\n    catch (error) {\n        logger.error(t('systemtags', 'Failed to load last used tags'), { error });\n        throw new Error(t('systemtags', 'Failed to load last used tags'));\n    }\n}\n/**\n * Create a tag and return the Id of the newly created tag.\n *\n * @param tag The tag to create\n */\nexport async function createTag(tag) {\n    const path = '/systemtags';\n    const tagToPost = formatTag(tag);\n    try {\n        const { headers } = await davClient.customRequest(path, {\n            method: 'POST',\n            data: tagToPost,\n        });\n        const contentLocation = headers.get('content-location');\n        if (contentLocation) {\n            emit('systemtags:tag:created', tag);\n            return parseIdFromLocation(contentLocation);\n        }\n        logger.error(t('systemtags', 'Missing \"Content-Location\" header'));\n        throw new Error(t('systemtags', 'Missing \"Content-Location\" header'));\n    }\n    catch (error) {\n        if (error?.response?.status === 409) {\n            logger.error(t('systemtags', 'A tag with the same name already exists'), { error });\n            throw new Error(t('systemtags', 'A tag with the same name already exists'));\n        }\n        logger.error(t('systemtags', 'Failed to create tag'), { error });\n        throw new Error(t('systemtags', 'Failed to create tag'));\n    }\n}\n/**\n *\n * @param tag\n */\nexport async function updateTag(tag) {\n    const path = '/systemtags/' + tag.id;\n    const data = `<?xml version=\"1.0\"?>\n\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<oc:display-name>${tag.displayName}</oc:display-name>\n\t\t\t\t<oc:user-visible>${tag.userVisible}</oc:user-visible>\n\t\t\t\t<oc:user-assignable>${tag.userAssignable}</oc:user-assignable>\n\t\t\t\t<nc:color>${tag?.color || null}</nc:color>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;\n    try {\n        await davClient.customRequest(path, {\n            method: 'PROPPATCH',\n            data,\n        });\n        emit('systemtags:tag:updated', tag);\n    }\n    catch (error) {\n        logger.error(t('systemtags', 'Failed to update tag'), { error });\n        throw new Error(t('systemtags', 'Failed to update tag'));\n    }\n}\n/**\n *\n * @param tag\n */\nexport async function deleteTag(tag) {\n    const path = '/systemtags/' + tag.id;\n    try {\n        await davClient.deleteFile(path);\n        emit('systemtags:tag:deleted', tag);\n    }\n    catch (error) {\n        logger.error(t('systemtags', 'Failed to delete tag'), { error });\n        throw new Error(t('systemtags', 'Failed to delete tag'));\n    }\n}\n/**\n *\n * @param tag\n * @param type\n */\nexport async function getTagObjects(tag, type) {\n    const path = `/systemtags/${tag.id}/${type}`;\n    const data = `<?xml version=\"1.0\"?>\n\t<d:propfind xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:prop>\n\t\t\t<nc:object-ids />\n\t\t\t<d:getetag />\n\t\t</d:prop>\n\t</d:propfind>`;\n    const response = await davClient.stat(path, { data, details: true });\n    const etag = response?.data?.props?.getetag || '\"\"';\n    const objects = Object.values(response?.data?.props?.['object-ids'] || []).flat();\n    return {\n        etag,\n        objects,\n    };\n}\n/**\n * Set the objects for a tag.\n * Warning: This will overwrite the existing objects.\n *\n * @param tag The tag to set the objects for\n * @param type The type of the objects\n * @param objectIds The objects to set\n * @param etag Strongly recommended to avoid conflict and data loss.\n */\nexport async function setTagObjects(tag, type, objectIds, etag = '') {\n    const path = `/systemtags/${tag.id}/${type}`;\n    let data = `<?xml version=\"1.0\"?>\n\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<nc:object-ids>${objectIds.map(({ id, type }) => `<nc:object-id><nc:id>${id}</nc:id><nc:type>${type}</nc:type></nc:object-id>`).join('')}</nc:object-ids>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;\n    if (objectIds.length === 0) {\n        data = `<?xml version=\"1.0\"?>\n\t\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t\t<d:remove>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<nc:object-ids />\n\t\t\t\t</d:prop>\n\t\t\t</d:remove>\n\t\t</d:propertyupdate>`;\n    }\n    await davClient.customRequest(path, {\n        method: 'PROPPATCH',\n        data,\n        headers: {\n            'if-match': etag,\n        },\n    });\n}\n/**\n *\n * @param isAllowed\n */\nexport async function updateSystemTagsAdminRestriction(isAllowed) {\n    // Convert to string for compatibility\n    const isAllowedString = isAllowed ? '1' : '0';\n    const url = generateOcsUrl('/apps/provisioning_api/api/v1/config/apps/{appId}/{key}', {\n        appId: 'systemtags',\n        key: 'restrict_creation_to_admin',\n    });\n    await confirmPassword();\n    const res = await axios.post(url, {\n        value: isAllowedString,\n    });\n    return res.data;\n}\n","import { Layerr } from \"layerr\";\nimport Stream from \"stream\";\nimport { fromBase64 } from \"../tools/encode.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { calculateDataLength } from \"../tools/size.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nexport async function putFileContents(context, filePath, data, options = {}) {\n    const { contentLength = true, overwrite = true } = options;\n    const headers = {\n        \"Content-Type\": \"application/octet-stream\"\n    };\n    if (!isWeb() &&\n        !isReactNative() &&\n        typeof Stream !== \"undefined\" &&\n        typeof Stream?.Readable !== \"undefined\" &&\n        data instanceof Stream.Readable) {\n        // Skip, no content-length\n    }\n    else if (contentLength === false) {\n        // Skip, disabled\n    }\n    else if (typeof contentLength === \"number\") {\n        headers[\"Content-Length\"] = `${contentLength}`;\n    }\n    else {\n        headers[\"Content-Length\"] = `${calculateDataLength(data)}`;\n    }\n    if (!overwrite) {\n        headers[\"If-None-Match\"] = \"*\";\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    try {\n        handleResponseCode(context, response);\n    }\n    catch (err) {\n        const error = err;\n        if (error.status === 412 && !overwrite) {\n            return false;\n        }\n        else {\n            throw error;\n        }\n    }\n    return true;\n}\nexport function getFileUploadLink(context, filePath) {\n    let url = `${joinURL(context.remoteURL, encodePath(filePath))}?Content-Type=application/octet-stream`;\n    const protocol = /^https:/i.test(url) ? \"https\" : \"http\";\n    switch (context.authType) {\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password: {\n            const authPart = context.headers.Authorization.replace(/^Basic /i, \"\").trim();\n            const authContents = fromBase64(authPart);\n            url = url.replace(/^https?:\\/\\//, `${protocol}://${authContents}@`);\n            break;\n        }\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.LinkUnsupportedAuthType\n                }\n            }, `Unsupported auth type for file link: ${context.authType}`);\n    }\n    return url;\n}\n","import { Layerr } from \"layerr\";\nimport { createDigestContext } from \"./digest.js\";\nimport { generateBasicAuthHeader } from \"./basic.js\";\nimport { generateTokenAuthHeader } from \"./oauth.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nexport function setupAuth(context, username, password, oauthToken, ha1) {\n    switch (context.authType) {\n        case AuthType.Auto:\n            if (username && password) {\n                context.headers.Authorization = generateBasicAuthHeader(username, password);\n            }\n            break;\n        case AuthType.Digest:\n            context.digest = createDigestContext(username, password, ha1);\n            break;\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password:\n            context.headers.Authorization = generateBasicAuthHeader(username, password);\n            break;\n        case AuthType.Token:\n            context.headers.Authorization = generateTokenAuthHeader(oauthToken);\n            break;\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.InvalidAuthType\n                }\n            }, `Invalid auth type: ${context.authType}`);\n    }\n}\n","import Stream from \"stream\";\nimport { isArrayBuffer } from \"../compat/arrayBuffer.js\";\nimport { isBuffer } from \"../compat/buffer.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nexport function requestDataToFetchBody(data) {\n    if (!isWeb() && !isReactNative() && data instanceof Stream.Readable) {\n        // @ts-ignore\n        return [data, {}];\n    }\n    if (typeof data === \"string\") {\n        return [data, {}];\n    }\n    else if (isBuffer(data)) {\n        return [data, {}];\n    }\n    else if (isArrayBuffer(data)) {\n        return [data, {}];\n    }\n    else if (data && typeof data === \"object\") {\n        return [\n            JSON.stringify(data),\n            {\n                \"content-type\": \"application/json\"\n            }\n        ];\n    }\n    throw new Error(`Unable to convert request body: Unexpected body type: ${typeof data}`);\n}\n","import nestedProp from \"nested-property\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { generateLockXML, parseGenericResponse } from \"../tools/xml.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { createErrorFromResponse, handleResponseCode } from \"../response.js\";\nconst DEFAULT_TIMEOUT = \"Infinite, Second-4100000000\";\nexport async function lock(context, path, options = {}) {\n    const { refreshToken, timeout = DEFAULT_TIMEOUT } = options;\n    const headers = {\n        Accept: \"text/plain,application/xml\",\n        Timeout: timeout\n    };\n    if (refreshToken) {\n        headers.If = refreshToken;\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(path)),\n        method: \"LOCK\",\n        headers,\n        data: generateLockXML(context.contactHref)\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const lockPayload = parseGenericResponse(responseData);\n    const token = nestedProp.get(lockPayload, \"prop.lockdiscovery.activelock.locktoken.href\");\n    const serverTimeout = nestedProp.get(lockPayload, \"prop.lockdiscovery.activelock.timeout\");\n    if (!token) {\n        const err = createErrorFromResponse(response, \"No lock token received: \");\n        throw err;\n    }\n    return {\n        token,\n        serverTimeout\n    };\n}\nexport async function unlock(context, path, token, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(path)),\n        method: \"UNLOCK\",\n        headers: {\n            \"Lock-Token\": token\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    if (response.status !== 204 && response.status !== 200) {\n        const err = createErrorFromResponse(response);\n        throw err;\n    }\n}\n","const hasArrayBuffer = typeof ArrayBuffer === \"function\";\nconst { toString: objToString } = Object.prototype;\n// Taken from: https://github.com/fengyuanchen/is-array-buffer/blob/master/src/index.js\nexport function isArrayBuffer(value) {\n    return (hasArrayBuffer &&\n        (value instanceof ArrayBuffer || objToString.call(value) === \"[object ArrayBuffer]\"));\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function copyFile(context, filename, destination, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"COPY\",\n        headers: {\n            Destination: joinURL(context.remoteURL, encodePath(destination)),\n            /**\n             * From RFC4918 section 10.6: If the overwrite header is not included in a COPY or MOVE request,\n             * then the resource MUST treat the request as if it has an overwrite header of value \"T\".\n             *\n             * Meaning the overwrite header is always set to \"T\" EXCEPT the option is explicitly set to false.\n             */\n            Overwrite: options.overwrite === false ? \"F\" : \"T\",\n            /**\n             * From RFC4918 section 9.8.3: A client may submit a Depth header on a COPY on a collection with a value of \"0\"\n             * or \"infinity\". The COPY method on a collection without a Depth header MUST act as if\n             * a Depth header with value \"infinity\" was included.\n             */\n            Depth: options.shallow ? \"0\" : \"infinity\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport camelCase from 'camelcase';\nimport Vue from 'vue';\nexport const defaultBaseTag = {\n    userVisible: true,\n    userAssignable: true,\n    canAssign: true,\n};\n/**\n *\n * @param tags\n */\nexport function parseTags(tags) {\n    return tags.map(({ props }) => Object.fromEntries(Object.entries(props)\n        .map(([key, value]) => [camelCase(key), camelCase(key) === 'displayName' ? String(value) : value])));\n}\n/**\n * Parse id from `Content-Location` header\n *\n * @param url URL to parse\n */\nexport function parseIdFromLocation(url) {\n    const queryPos = url.indexOf('?');\n    if (queryPos > 0) {\n        url = url.substring(0, queryPos);\n    }\n    const parts = url.split('/');\n    let result;\n    do {\n        result = parts[parts.length - 1];\n        parts.pop();\n        // note: first result can be empty when there is a trailing slash,\n        // so we take the part before that\n    } while (!result && parts.length > 0);\n    return Number(result);\n}\n/**\n *\n * @param initialTag\n */\nexport function formatTag(initialTag) {\n    if ('name' in initialTag && !('displayName' in initialTag)) {\n        return { ...initialTag };\n    }\n    const tag = { ...initialTag };\n    tag.name = tag.displayName;\n    delete tag.displayName;\n    return tag;\n}\n/**\n *\n * @param node\n */\nexport function getNodeSystemTags(node) {\n    const attribute = node.attributes?.['system-tags']?.['system-tag'];\n    if (attribute === undefined) {\n        return [];\n    }\n    // if there is only one tag it is a single string or prop object\n    // if there are multiple then its an array - so we flatten it to be always an array of string or prop objects\n    return [attribute]\n        .flat()\n        .map((tag) => (typeof tag === 'string'\n        // its a plain text prop (the tag name) without prop attributes\n        ? tag\n        // its a prop object with attributes, the tag name is in the 'text' attribute\n        : tag.text));\n}\n/**\n *\n * @param node\n * @param tags\n */\nexport function setNodeSystemTags(node, tags) {\n    Vue.set(node.attributes, 'system-tags', {\n        'system-tag': tags,\n    });\n}\n","import base64 from \"base-64\";\nimport { decodeHTML } from \"entities\";\nimport { isWeb } from \"../compat/env.js\";\nexport function decodeHTMLEntities(text) {\n    if (isWeb()) {\n        const txt = document.createElement(\"textarea\");\n        txt.innerHTML = text;\n        return txt.value;\n    }\n    return decodeHTML(text);\n}\nexport function fromBase64(text) {\n    return base64.decode(text);\n}\nexport function toBase64(text) {\n    return base64.encode(text);\n}\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","import { l as logger, F as FileType } from \"./chunks/folder-Bf-tAYWu.mjs\";\nimport { a, b, N, c, P } from \"./chunks/folder-Bf-tAYWu.mjs\";\nimport { TypedEventTarget } from \"typescript-event-target\";\nimport isSvg from \"is-svg\";\nimport { getCapabilities } from \"@nextcloud/capabilities\";\nimport { extname, basename } from \"@nextcloud/paths\";\nimport { getCanonicalLocale, getLanguage } from \"@nextcloud/l10n\";\nvar DefaultType = /* @__PURE__ */ ((DefaultType2) => {\n  DefaultType2[\"DEFAULT\"] = \"default\";\n  DefaultType2[\"HIDDEN\"] = \"hidden\";\n  return DefaultType2;\n})(DefaultType || {});\nclass FileAction {\n  _action;\n  constructor(action) {\n    this.validateAction(action);\n    this._action = action;\n  }\n  get id() {\n    return this._action.id;\n  }\n  get displayName() {\n    return this._action.displayName;\n  }\n  get title() {\n    return this._action.title;\n  }\n  get iconSvgInline() {\n    return this._action.iconSvgInline;\n  }\n  get enabled() {\n    return this._action.enabled;\n  }\n  get exec() {\n    return this._action.exec;\n  }\n  get execBatch() {\n    return this._action.execBatch;\n  }\n  get hotkey() {\n    return this._action.hotkey;\n  }\n  get order() {\n    return this._action.order;\n  }\n  get parent() {\n    return this._action.parent;\n  }\n  get default() {\n    return this._action.default;\n  }\n  get destructive() {\n    return this._action.destructive;\n  }\n  get inline() {\n    return this._action.inline;\n  }\n  get renderInline() {\n    return this._action.renderInline;\n  }\n  validateAction(action) {\n    if (!action.id || typeof action.id !== \"string\") {\n      throw new Error(\"Invalid id\");\n    }\n    if (!action.displayName || typeof action.displayName !== \"function\") {\n      throw new Error(\"Invalid displayName function\");\n    }\n    if (\"title\" in action && typeof action.title !== \"function\") {\n      throw new Error(\"Invalid title function\");\n    }\n    if (!action.iconSvgInline || typeof action.iconSvgInline !== \"function\") {\n      throw new Error(\"Invalid iconSvgInline function\");\n    }\n    if (!action.exec || typeof action.exec !== \"function\") {\n      throw new Error(\"Invalid exec function\");\n    }\n    if (\"enabled\" in action && typeof action.enabled !== \"function\") {\n      throw new Error(\"Invalid enabled function\");\n    }\n    if (\"execBatch\" in action && typeof action.execBatch !== \"function\") {\n      throw new Error(\"Invalid execBatch function\");\n    }\n    if (\"order\" in action && typeof action.order !== \"number\") {\n      throw new Error(\"Invalid order\");\n    }\n    if (action.destructive !== void 0 && typeof action.destructive !== \"boolean\") {\n      throw new Error(\"Invalid destructive flag\");\n    }\n    if (\"parent\" in action && typeof action.parent !== \"string\") {\n      throw new Error(\"Invalid parent\");\n    }\n    if (action.default && !Object.values(DefaultType).includes(action.default)) {\n      throw new Error(\"Invalid default\");\n    }\n    if (\"inline\" in action && typeof action.inline !== \"function\") {\n      throw new Error(\"Invalid inline function\");\n    }\n    if (\"renderInline\" in action && typeof action.renderInline !== \"function\") {\n      throw new Error(\"Invalid renderInline function\");\n    }\n    if (\"hotkey\" in action && action.hotkey !== void 0) {\n      if (typeof action.hotkey !== \"object\") {\n        throw new Error(\"Invalid hotkey configuration\");\n      }\n      if (typeof action.hotkey.key !== \"string\" || !action.hotkey.key) {\n        throw new Error(\"Missing or invalid hotkey key\");\n      }\n      if (typeof action.hotkey.description !== \"string\" || !action.hotkey.description) {\n        throw new Error(\"Missing or invalid hotkey description\");\n      }\n    }\n  }\n}\nconst registerFileAction = function(action) {\n  if (typeof window._nc_fileactions === \"undefined\") {\n    window._nc_fileactions = [];\n    logger.debug(\"FileActions initialized\");\n  }\n  if (window._nc_fileactions.find((search) => search.id === action.id)) {\n    logger.error(`FileAction ${action.id} already registered`, { action });\n    return;\n  }\n  window._nc_fileactions.push(action);\n};\nconst getFileActions = function() {\n  if (typeof window._nc_fileactions === \"undefined\") {\n    window._nc_fileactions = [];\n    logger.debug(\"FileActions initialized\");\n  }\n  return window._nc_fileactions;\n};\nclass FileListAction {\n  _action;\n  constructor(action) {\n    this.validateAction(action);\n    this._action = action;\n  }\n  get id() {\n    return this._action.id;\n  }\n  get displayName() {\n    return this._action.displayName;\n  }\n  get iconSvgInline() {\n    return this._action.iconSvgInline;\n  }\n  get order() {\n    return this._action.order;\n  }\n  get enabled() {\n    return this._action.enabled;\n  }\n  get exec() {\n    return this._action.exec;\n  }\n  validateAction(action) {\n    if (!action.id || typeof action.id !== \"string\") {\n      throw new Error(\"Invalid id\");\n    }\n    if (!action.displayName || typeof action.displayName !== \"function\") {\n      throw new Error(\"Invalid displayName function\");\n    }\n    if (\"iconSvgInline\" in action && typeof action.iconSvgInline !== \"function\") {\n      throw new Error(\"Invalid iconSvgInline function\");\n    }\n    if (\"order\" in action && typeof action.order !== \"number\") {\n      throw new Error(\"Invalid order\");\n    }\n    if (\"enabled\" in action && typeof action.enabled !== \"function\") {\n      throw new Error(\"Invalid enabled function\");\n    }\n    if (!action.exec || typeof action.exec !== \"function\") {\n      throw new Error(\"Invalid exec function\");\n    }\n  }\n}\nconst registerFileListAction = (action) => {\n  if (typeof window._nc_filelistactions === \"undefined\") {\n    window._nc_filelistactions = [];\n  }\n  if (window._nc_filelistactions.find((listAction) => listAction.id === action.id)) {\n    logger.error(`FileListAction with id \"${action.id}\" is already registered`, { action });\n    return;\n  }\n  window._nc_filelistactions.push(action);\n};\nconst getFileListActions = () => {\n  if (typeof window._nc_filelistactions === \"undefined\") {\n    window._nc_filelistactions = [];\n  }\n  return window._nc_filelistactions;\n};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nvar debug_1;\nvar hasRequiredDebug;\nfunction requireDebug() {\n  if (hasRequiredDebug) return debug_1;\n  hasRequiredDebug = 1;\n  const debug = typeof process === \"object\" && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? (...args) => console.error(\"SEMVER\", ...args) : () => {\n  };\n  debug_1 = debug;\n  return debug_1;\n}\nvar constants;\nvar hasRequiredConstants;\nfunction requireConstants() {\n  if (hasRequiredConstants) return constants;\n  hasRequiredConstants = 1;\n  const SEMVER_SPEC_VERSION = \"2.0.0\";\n  const MAX_LENGTH = 256;\n  const MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */\n  9007199254740991;\n  const MAX_SAFE_COMPONENT_LENGTH = 16;\n  const MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6;\n  const RELEASE_TYPES = [\n    \"major\",\n    \"premajor\",\n    \"minor\",\n    \"preminor\",\n    \"patch\",\n    \"prepatch\",\n    \"prerelease\"\n  ];\n  constants = {\n    MAX_LENGTH,\n    MAX_SAFE_COMPONENT_LENGTH,\n    MAX_SAFE_BUILD_LENGTH,\n    MAX_SAFE_INTEGER,\n    RELEASE_TYPES,\n    SEMVER_SPEC_VERSION,\n    FLAG_INCLUDE_PRERELEASE: 1,\n    FLAG_LOOSE: 2\n  };\n  return constants;\n}\nvar re = { exports: {} };\nvar hasRequiredRe;\nfunction requireRe() {\n  if (hasRequiredRe) return re.exports;\n  hasRequiredRe = 1;\n  (function(module, exports) {\n    const {\n      MAX_SAFE_COMPONENT_LENGTH,\n      MAX_SAFE_BUILD_LENGTH,\n      MAX_LENGTH\n    } = requireConstants();\n    const debug = requireDebug();\n    exports = module.exports = {};\n    const re2 = exports.re = [];\n    const safeRe = exports.safeRe = [];\n    const src = exports.src = [];\n    const safeSrc = exports.safeSrc = [];\n    const t = exports.t = {};\n    let R = 0;\n    const LETTERDASHNUMBER = \"[a-zA-Z0-9-]\";\n    const safeRegexReplacements = [\n      [\"\\\\s\", 1],\n      [\"\\\\d\", MAX_LENGTH],\n      [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH]\n    ];\n    const makeSafeRegex = (value) => {\n      for (const [token, max] of safeRegexReplacements) {\n        value = value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`);\n      }\n      return value;\n    };\n    const createToken = (name, value, isGlobal) => {\n      const safe = makeSafeRegex(value);\n      const index = R++;\n      debug(name, index, value);\n      t[name] = index;\n      src[index] = value;\n      safeSrc[index] = safe;\n      re2[index] = new RegExp(value, isGlobal ? \"g\" : void 0);\n      safeRe[index] = new RegExp(safe, isGlobal ? \"g\" : void 0);\n    };\n    createToken(\"NUMERICIDENTIFIER\", \"0|[1-9]\\\\d*\");\n    createToken(\"NUMERICIDENTIFIERLOOSE\", \"\\\\d+\");\n    createToken(\"NONNUMERICIDENTIFIER\", `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);\n    createToken(\"MAINVERSION\", `(${src[t.NUMERICIDENTIFIER]})\\\\.(${src[t.NUMERICIDENTIFIER]})\\\\.(${src[t.NUMERICIDENTIFIER]})`);\n    createToken(\"MAINVERSIONLOOSE\", `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`);\n    createToken(\"PRERELEASEIDENTIFIER\", `(?:${src[t.NONNUMERICIDENTIFIER]}|${src[t.NUMERICIDENTIFIER]})`);\n    createToken(\"PRERELEASEIDENTIFIERLOOSE\", `(?:${src[t.NONNUMERICIDENTIFIER]}|${src[t.NUMERICIDENTIFIERLOOSE]})`);\n    createToken(\"PRERELEASE\", `(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`);\n    createToken(\"PRERELEASELOOSE\", `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);\n    createToken(\"BUILDIDENTIFIER\", `${LETTERDASHNUMBER}+`);\n    createToken(\"BUILD\", `(?:\\\\+(${src[t.BUILDIDENTIFIER]}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`);\n    createToken(\"FULLPLAIN\", `v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);\n    createToken(\"FULL\", `^${src[t.FULLPLAIN]}$`);\n    createToken(\"LOOSEPLAIN\", `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);\n    createToken(\"LOOSE\", `^${src[t.LOOSEPLAIN]}$`);\n    createToken(\"GTLT\", \"((?:<|>)?=?)\");\n    createToken(\"XRANGEIDENTIFIERLOOSE\", `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`);\n    createToken(\"XRANGEIDENTIFIER\", `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`);\n    createToken(\"XRANGEPLAIN\", `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\\\.(${src[t.XRANGEIDENTIFIER]})(?:\\\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`);\n    createToken(\"XRANGEPLAINLOOSE\", `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`);\n    createToken(\"XRANGE\", `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`);\n    createToken(\"XRANGELOOSE\", `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`);\n    createToken(\"COERCEPLAIN\", `${\"(^|[^\\\\d])(\\\\d{1,\"}${MAX_SAFE_COMPONENT_LENGTH}})(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);\n    createToken(\"COERCE\", `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`);\n    createToken(\"COERCEFULL\", src[t.COERCEPLAIN] + `(?:${src[t.PRERELEASE]})?(?:${src[t.BUILD]})?(?:$|[^\\\\d])`);\n    createToken(\"COERCERTL\", src[t.COERCE], true);\n    createToken(\"COERCERTLFULL\", src[t.COERCEFULL], true);\n    createToken(\"LONETILDE\", \"(?:~>?)\");\n    createToken(\"TILDETRIM\", `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true);\n    exports.tildeTrimReplace = \"$1~\";\n    createToken(\"TILDE\", `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);\n    createToken(\"TILDELOOSE\", `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);\n    createToken(\"LONECARET\", \"(?:\\\\^)\");\n    createToken(\"CARETTRIM\", `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true);\n    exports.caretTrimReplace = \"$1^\";\n    createToken(\"CARET\", `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);\n    createToken(\"CARETLOOSE\", `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);\n    createToken(\"COMPARATORLOOSE\", `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`);\n    createToken(\"COMPARATOR\", `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`);\n    createToken(\"COMPARATORTRIM\", `(\\\\s*)${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);\n    exports.comparatorTrimReplace = \"$1$2$3\";\n    createToken(\"HYPHENRANGE\", `^\\\\s*(${src[t.XRANGEPLAIN]})\\\\s+-\\\\s+(${src[t.XRANGEPLAIN]})\\\\s*$`);\n    createToken(\"HYPHENRANGELOOSE\", `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})\\\\s+-\\\\s+(${src[t.XRANGEPLAINLOOSE]})\\\\s*$`);\n    createToken(\"STAR\", \"(<|>)?=?\\\\s*\\\\*\");\n    createToken(\"GTE0\", \"^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$\");\n    createToken(\"GTE0PRE\", \"^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$\");\n  })(re, re.exports);\n  return re.exports;\n}\nvar parseOptions_1;\nvar hasRequiredParseOptions;\nfunction requireParseOptions() {\n  if (hasRequiredParseOptions) return parseOptions_1;\n  hasRequiredParseOptions = 1;\n  const looseOption = Object.freeze({ loose: true });\n  const emptyOpts = Object.freeze({});\n  const parseOptions = (options) => {\n    if (!options) {\n      return emptyOpts;\n    }\n    if (typeof options !== \"object\") {\n      return looseOption;\n    }\n    return options;\n  };\n  parseOptions_1 = parseOptions;\n  return parseOptions_1;\n}\nvar identifiers;\nvar hasRequiredIdentifiers;\nfunction requireIdentifiers() {\n  if (hasRequiredIdentifiers) return identifiers;\n  hasRequiredIdentifiers = 1;\n  const numeric = /^[0-9]+$/;\n  const compareIdentifiers = (a2, b2) => {\n    if (typeof a2 === \"number\" && typeof b2 === \"number\") {\n      return a2 === b2 ? 0 : a2 < b2 ? -1 : 1;\n    }\n    const anum = numeric.test(a2);\n    const bnum = numeric.test(b2);\n    if (anum && bnum) {\n      a2 = +a2;\n      b2 = +b2;\n    }\n    return a2 === b2 ? 0 : anum && !bnum ? -1 : bnum && !anum ? 1 : a2 < b2 ? -1 : 1;\n  };\n  const rcompareIdentifiers = (a2, b2) => compareIdentifiers(b2, a2);\n  identifiers = {\n    compareIdentifiers,\n    rcompareIdentifiers\n  };\n  return identifiers;\n}\nvar semver;\nvar hasRequiredSemver;\nfunction requireSemver() {\n  if (hasRequiredSemver) return semver;\n  hasRequiredSemver = 1;\n  const debug = requireDebug();\n  const { MAX_LENGTH, MAX_SAFE_INTEGER } = requireConstants();\n  const { safeRe: re2, t } = requireRe();\n  const parseOptions = requireParseOptions();\n  const { compareIdentifiers } = requireIdentifiers();\n  class SemVer {\n    constructor(version, options) {\n      options = parseOptions(options);\n      if (version instanceof SemVer) {\n        if (version.loose === !!options.loose && version.includePrerelease === !!options.includePrerelease) {\n          return version;\n        } else {\n          version = version.version;\n        }\n      } else if (typeof version !== \"string\") {\n        throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`);\n      }\n      if (version.length > MAX_LENGTH) {\n        throw new TypeError(\n          `version is longer than ${MAX_LENGTH} characters`\n        );\n      }\n      debug(\"SemVer\", version, options);\n      this.options = options;\n      this.loose = !!options.loose;\n      this.includePrerelease = !!options.includePrerelease;\n      const m = version.trim().match(options.loose ? re2[t.LOOSE] : re2[t.FULL]);\n      if (!m) {\n        throw new TypeError(`Invalid Version: ${version}`);\n      }\n      this.raw = version;\n      this.major = +m[1];\n      this.minor = +m[2];\n      this.patch = +m[3];\n      if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n        throw new TypeError(\"Invalid major version\");\n      }\n      if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n        throw new TypeError(\"Invalid minor version\");\n      }\n      if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n        throw new TypeError(\"Invalid patch version\");\n      }\n      if (!m[4]) {\n        this.prerelease = [];\n      } else {\n        this.prerelease = m[4].split(\".\").map((id) => {\n          if (/^[0-9]+$/.test(id)) {\n            const num = +id;\n            if (num >= 0 && num < MAX_SAFE_INTEGER) {\n              return num;\n            }\n          }\n          return id;\n        });\n      }\n      this.build = m[5] ? m[5].split(\".\") : [];\n      this.format();\n    }\n    format() {\n      this.version = `${this.major}.${this.minor}.${this.patch}`;\n      if (this.prerelease.length) {\n        this.version += `-${this.prerelease.join(\".\")}`;\n      }\n      return this.version;\n    }\n    toString() {\n      return this.version;\n    }\n    compare(other) {\n      debug(\"SemVer.compare\", this.version, this.options, other);\n      if (!(other instanceof SemVer)) {\n        if (typeof other === \"string\" && other === this.version) {\n          return 0;\n        }\n        other = new SemVer(other, this.options);\n      }\n      if (other.version === this.version) {\n        return 0;\n      }\n      return this.compareMain(other) || this.comparePre(other);\n    }\n    compareMain(other) {\n      if (!(other instanceof SemVer)) {\n        other = new SemVer(other, this.options);\n      }\n      if (this.major < other.major) {\n        return -1;\n      }\n      if (this.major > other.major) {\n        return 1;\n      }\n      if (this.minor < other.minor) {\n        return -1;\n      }\n      if (this.minor > other.minor) {\n        return 1;\n      }\n      if (this.patch < other.patch) {\n        return -1;\n      }\n      if (this.patch > other.patch) {\n        return 1;\n      }\n      return 0;\n    }\n    comparePre(other) {\n      if (!(other instanceof SemVer)) {\n        other = new SemVer(other, this.options);\n      }\n      if (this.prerelease.length && !other.prerelease.length) {\n        return -1;\n      } else if (!this.prerelease.length && other.prerelease.length) {\n        return 1;\n      } else if (!this.prerelease.length && !other.prerelease.length) {\n        return 0;\n      }\n      let i = 0;\n      do {\n        const a2 = this.prerelease[i];\n        const b2 = other.prerelease[i];\n        debug(\"prerelease compare\", i, a2, b2);\n        if (a2 === void 0 && b2 === void 0) {\n          return 0;\n        } else if (b2 === void 0) {\n          return 1;\n        } else if (a2 === void 0) {\n          return -1;\n        } else if (a2 === b2) {\n          continue;\n        } else {\n          return compareIdentifiers(a2, b2);\n        }\n      } while (++i);\n    }\n    compareBuild(other) {\n      if (!(other instanceof SemVer)) {\n        other = new SemVer(other, this.options);\n      }\n      let i = 0;\n      do {\n        const a2 = this.build[i];\n        const b2 = other.build[i];\n        debug(\"build compare\", i, a2, b2);\n        if (a2 === void 0 && b2 === void 0) {\n          return 0;\n        } else if (b2 === void 0) {\n          return 1;\n        } else if (a2 === void 0) {\n          return -1;\n        } else if (a2 === b2) {\n          continue;\n        } else {\n          return compareIdentifiers(a2, b2);\n        }\n      } while (++i);\n    }\n    // preminor will bump the version up to the next minor release, and immediately\n    // down to pre-release. premajor and prepatch work the same way.\n    inc(release, identifier, identifierBase) {\n      if (release.startsWith(\"pre\")) {\n        if (!identifier && identifierBase === false) {\n          throw new Error(\"invalid increment argument: identifier is empty\");\n        }\n        if (identifier) {\n          const match = `-${identifier}`.match(this.options.loose ? re2[t.PRERELEASELOOSE] : re2[t.PRERELEASE]);\n          if (!match || match[1] !== identifier) {\n            throw new Error(`invalid identifier: ${identifier}`);\n          }\n        }\n      }\n      switch (release) {\n        case \"premajor\":\n          this.prerelease.length = 0;\n          this.patch = 0;\n          this.minor = 0;\n          this.major++;\n          this.inc(\"pre\", identifier, identifierBase);\n          break;\n        case \"preminor\":\n          this.prerelease.length = 0;\n          this.patch = 0;\n          this.minor++;\n          this.inc(\"pre\", identifier, identifierBase);\n          break;\n        case \"prepatch\":\n          this.prerelease.length = 0;\n          this.inc(\"patch\", identifier, identifierBase);\n          this.inc(\"pre\", identifier, identifierBase);\n          break;\n        // If the input is a non-prerelease version, this acts the same as\n        // prepatch.\n        case \"prerelease\":\n          if (this.prerelease.length === 0) {\n            this.inc(\"patch\", identifier, identifierBase);\n          }\n          this.inc(\"pre\", identifier, identifierBase);\n          break;\n        case \"release\":\n          if (this.prerelease.length === 0) {\n            throw new Error(`version ${this.raw} is not a prerelease`);\n          }\n          this.prerelease.length = 0;\n          break;\n        case \"major\":\n          if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) {\n            this.major++;\n          }\n          this.minor = 0;\n          this.patch = 0;\n          this.prerelease = [];\n          break;\n        case \"minor\":\n          if (this.patch !== 0 || this.prerelease.length === 0) {\n            this.minor++;\n          }\n          this.patch = 0;\n          this.prerelease = [];\n          break;\n        case \"patch\":\n          if (this.prerelease.length === 0) {\n            this.patch++;\n          }\n          this.prerelease = [];\n          break;\n        // This probably shouldn't be used publicly.\n        // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n        case \"pre\": {\n          const base = Number(identifierBase) ? 1 : 0;\n          if (this.prerelease.length === 0) {\n            this.prerelease = [base];\n          } else {\n            let i = this.prerelease.length;\n            while (--i >= 0) {\n              if (typeof this.prerelease[i] === \"number\") {\n                this.prerelease[i]++;\n                i = -2;\n              }\n            }\n            if (i === -1) {\n              if (identifier === this.prerelease.join(\".\") && identifierBase === false) {\n                throw new Error(\"invalid increment argument: identifier already exists\");\n              }\n              this.prerelease.push(base);\n            }\n          }\n          if (identifier) {\n            let prerelease = [identifier, base];\n            if (identifierBase === false) {\n              prerelease = [identifier];\n            }\n            if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n              if (isNaN(this.prerelease[1])) {\n                this.prerelease = prerelease;\n              }\n            } else {\n              this.prerelease = prerelease;\n            }\n          }\n          break;\n        }\n        default:\n          throw new Error(`invalid increment argument: ${release}`);\n      }\n      this.raw = this.format();\n      if (this.build.length) {\n        this.raw += `+${this.build.join(\".\")}`;\n      }\n      return this;\n    }\n  }\n  semver = SemVer;\n  return semver;\n}\nvar major_1;\nvar hasRequiredMajor;\nfunction requireMajor() {\n  if (hasRequiredMajor) return major_1;\n  hasRequiredMajor = 1;\n  const SemVer = requireSemver();\n  const major2 = (a2, loose) => new SemVer(a2, loose).major;\n  major_1 = major2;\n  return major_1;\n}\nvar majorExports = requireMajor();\nconst major = /* @__PURE__ */ getDefaultExportFromCjs(majorExports);\nvar parse_1;\nvar hasRequiredParse;\nfunction requireParse() {\n  if (hasRequiredParse) return parse_1;\n  hasRequiredParse = 1;\n  const SemVer = requireSemver();\n  const parse = (version, options, throwErrors = false) => {\n    if (version instanceof SemVer) {\n      return version;\n    }\n    try {\n      return new SemVer(version, options);\n    } catch (er) {\n      if (!throwErrors) {\n        return null;\n      }\n      throw er;\n    }\n  };\n  parse_1 = parse;\n  return parse_1;\n}\nvar valid_1;\nvar hasRequiredValid;\nfunction requireValid() {\n  if (hasRequiredValid) return valid_1;\n  hasRequiredValid = 1;\n  const parse = requireParse();\n  const valid2 = (version, options) => {\n    const v = parse(version, options);\n    return v ? v.version : null;\n  };\n  valid_1 = valid2;\n  return valid_1;\n}\nvar validExports = requireValid();\nconst valid = /* @__PURE__ */ getDefaultExportFromCjs(validExports);\n/*!\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\nclass ProxyBus {\n  bus;\n  constructor(bus2) {\n    if (typeof bus2.getVersion !== \"function\" || !valid(bus2.getVersion())) {\n      console.warn(\"Proxying an event bus with an unknown or invalid version\");\n    } else if (major(bus2.getVersion()) !== major(this.getVersion())) {\n      console.warn(\n        \"Proxying an event bus of version \" + bus2.getVersion() + \" with \" + this.getVersion()\n      );\n    }\n    this.bus = bus2;\n  }\n  getVersion() {\n    return \"3.3.3\";\n  }\n  subscribe(name, handler) {\n    this.bus.subscribe(name, handler);\n  }\n  unsubscribe(name, handler) {\n    this.bus.unsubscribe(name, handler);\n  }\n  emit(name, ...event) {\n    this.bus.emit(name, ...event);\n  }\n}\n/*!\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\nclass SimpleBus {\n  handlers = /* @__PURE__ */ new Map();\n  getVersion() {\n    return \"3.3.3\";\n  }\n  subscribe(name, handler) {\n    this.handlers.set(\n      name,\n      (this.handlers.get(name) || []).concat(\n        handler\n      )\n    );\n  }\n  unsubscribe(name, handler) {\n    this.handlers.set(\n      name,\n      (this.handlers.get(name) || []).filter((h) => h !== handler)\n    );\n  }\n  emit(name, ...event) {\n    const handlers = this.handlers.get(name) || [];\n    handlers.forEach((h) => {\n      try {\n        ;\n        h(event[0]);\n      } catch (e) {\n        console.error(\"could not invoke event listener\", e);\n      }\n    });\n  }\n}\n/*!\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\nlet bus = null;\nfunction getBus() {\n  if (bus !== null) {\n    return bus;\n  }\n  if (typeof window === \"undefined\") {\n    return new Proxy({}, {\n      get: () => {\n        return () => console.error(\n          \"Window not available, EventBus can not be established!\"\n        );\n      }\n    });\n  }\n  if (window.OC?._eventBus && typeof window._nc_event_bus === \"undefined\") {\n    console.warn(\n      \"found old event bus instance at OC._eventBus. Update your version!\"\n    );\n    window._nc_event_bus = window.OC._eventBus;\n  }\n  if (typeof window?._nc_event_bus !== \"undefined\") {\n    bus = new ProxyBus(window._nc_event_bus);\n  } else {\n    bus = window._nc_event_bus = new SimpleBus();\n  }\n  return bus;\n}\nfunction emit(name, ...event) {\n  getBus().emit(name, ...event);\n}\n/*!\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nclass FileListFilter extends TypedEventTarget {\n  id;\n  order;\n  constructor(id, order = 100) {\n    super();\n    this.id = id;\n    this.order = order;\n  }\n  filter(nodes) {\n    throw new Error(\"Not implemented\");\n  }\n  updateChips(chips) {\n    this.dispatchTypedEvent(\"update:chips\", new CustomEvent(\"update:chips\", { detail: chips }));\n  }\n  filterUpdated() {\n    this.dispatchTypedEvent(\"update:filter\", new CustomEvent(\"update:filter\"));\n  }\n}\nfunction registerFileListFilter(filter) {\n  if (!window._nc_filelist_filters) {\n    window._nc_filelist_filters = /* @__PURE__ */ new Map();\n  }\n  if (window._nc_filelist_filters.has(filter.id)) {\n    throw new Error(`File list filter \"${filter.id}\" already registered`);\n  }\n  window._nc_filelist_filters.set(filter.id, filter);\n  emit(\"files:filter:added\", filter);\n}\nfunction unregisterFileListFilter(filterId) {\n  if (window._nc_filelist_filters && window._nc_filelist_filters.has(filterId)) {\n    window._nc_filelist_filters.delete(filterId);\n    emit(\"files:filter:removed\", filterId);\n  }\n}\nfunction getFileListFilters() {\n  if (!window._nc_filelist_filters) {\n    return [];\n  }\n  return [...window._nc_filelist_filters.values()];\n}\nclass Header {\n  _header;\n  constructor(header) {\n    this.validateHeader(header);\n    this._header = header;\n  }\n  get id() {\n    return this._header.id;\n  }\n  get order() {\n    return this._header.order;\n  }\n  get enabled() {\n    return this._header.enabled;\n  }\n  get render() {\n    return this._header.render;\n  }\n  get updated() {\n    return this._header.updated;\n  }\n  validateHeader(header) {\n    if (!header.id || !header.render || !header.updated) {\n      throw new Error(\"Invalid header: id, render and updated are required\");\n    }\n    if (typeof header.id !== \"string\") {\n      throw new Error(\"Invalid id property\");\n    }\n    if (header.enabled !== void 0 && typeof header.enabled !== \"function\") {\n      throw new Error(\"Invalid enabled property\");\n    }\n    if (header.render && typeof header.render !== \"function\") {\n      throw new Error(\"Invalid render property\");\n    }\n    if (header.updated && typeof header.updated !== \"function\") {\n      throw new Error(\"Invalid updated property\");\n    }\n  }\n}\nconst registerFileListHeaders = function(header) {\n  if (typeof window._nc_filelistheader === \"undefined\") {\n    window._nc_filelistheader = [];\n    logger.debug(\"FileListHeaders initialized\");\n  }\n  if (window._nc_filelistheader.find((search) => search.id === header.id)) {\n    logger.error(`Header ${header.id} already registered`, { header });\n    return;\n  }\n  window._nc_filelistheader.push(header);\n};\nconst getFileListHeaders = function() {\n  if (typeof window._nc_filelistheader === \"undefined\") {\n    window._nc_filelistheader = [];\n    logger.debug(\"FileListHeaders initialized\");\n  }\n  return window._nc_filelistheader;\n};\nfunction checkOptionalProperty(obj, property, type) {\n  if (typeof obj[property] !== \"undefined\") {\n    if (type === \"array\") {\n      if (!Array.isArray(obj[property])) {\n        throw new Error(`View ${property} must be an array`);\n      }\n    } else if (typeof obj[property] !== type) {\n      throw new Error(`View ${property} must be a ${type}`);\n    } else if (type === \"object\" && (obj[property] === null || Array.isArray(obj[property]))) {\n      throw new Error(`View ${property} must be an object`);\n    }\n  }\n}\nclass Column {\n  _column;\n  constructor(column) {\n    validateColumn(column);\n    this._column = column;\n  }\n  get id() {\n    return this._column.id;\n  }\n  get title() {\n    return this._column.title;\n  }\n  get render() {\n    return this._column.render;\n  }\n  get sort() {\n    return this._column.sort;\n  }\n  get summary() {\n    return this._column.summary;\n  }\n}\nfunction validateColumn(column) {\n  if (typeof column !== \"object\" || column === null) {\n    throw new Error(\"View column must be an object\");\n  }\n  if (!column.id || typeof column.id !== \"string\") {\n    throw new Error(\"A column id is required\");\n  }\n  if (!column.title || typeof column.title !== \"string\") {\n    throw new Error(\"A column title is required\");\n  }\n  if (!column.render || typeof column.render !== \"function\") {\n    throw new Error(\"A render function is required\");\n  }\n  checkOptionalProperty(column, \"sort\", \"function\");\n  checkOptionalProperty(column, \"summary\", \"function\");\n}\nclass View {\n  _view;\n  constructor(view) {\n    validateView(view);\n    this._view = view;\n  }\n  get id() {\n    return this._view.id;\n  }\n  get name() {\n    return this._view.name;\n  }\n  get caption() {\n    return this._view.caption;\n  }\n  get emptyTitle() {\n    return this._view.emptyTitle;\n  }\n  get emptyCaption() {\n    return this._view.emptyCaption;\n  }\n  get getContents() {\n    return this._view.getContents;\n  }\n  get hidden() {\n    return this._view.hidden;\n  }\n  get icon() {\n    return this._view.icon;\n  }\n  set icon(icon) {\n    this._view.icon = icon;\n  }\n  get order() {\n    return this._view.order;\n  }\n  set order(order) {\n    this._view.order = order;\n  }\n  get params() {\n    return this._view.params;\n  }\n  set params(params) {\n    this._view.params = params;\n  }\n  get columns() {\n    return this._view.columns;\n  }\n  get emptyView() {\n    return this._view.emptyView;\n  }\n  get parent() {\n    return this._view.parent;\n  }\n  get sticky() {\n    return this._view.sticky;\n  }\n  get expanded() {\n    return this._view.expanded;\n  }\n  set expanded(expanded) {\n    this._view.expanded = expanded;\n  }\n  get defaultSortKey() {\n    return this._view.defaultSortKey;\n  }\n  get loadChildViews() {\n    return this._view.loadChildViews;\n  }\n}\nfunction validateView(view) {\n  if (!view.icon || typeof view.icon !== \"string\" || !isSvg(view.icon)) {\n    throw new Error(\"View icon is required and must be a valid svg string\");\n  }\n  if (!view.id || typeof view.id !== \"string\") {\n    throw new Error(\"View id is required and must be a string\");\n  }\n  if (!view.getContents || typeof view.getContents !== \"function\") {\n    throw new Error(\"View getContents is required and must be a function\");\n  }\n  if (!view.name || typeof view.name !== \"string\") {\n    throw new Error(\"View name is required and must be a string\");\n  }\n  checkOptionalProperty(view, \"caption\", \"string\");\n  checkOptionalProperty(view, \"columns\", \"array\");\n  checkOptionalProperty(view, \"defaultSortKey\", \"string\");\n  checkOptionalProperty(view, \"emptyCaption\", \"string\");\n  checkOptionalProperty(view, \"emptyTitle\", \"string\");\n  checkOptionalProperty(view, \"emptyView\", \"function\");\n  checkOptionalProperty(view, \"expanded\", \"boolean\");\n  checkOptionalProperty(view, \"hidden\", \"boolean\");\n  checkOptionalProperty(view, \"loadChildViews\", \"function\");\n  checkOptionalProperty(view, \"order\", \"number\");\n  checkOptionalProperty(view, \"params\", \"object\");\n  checkOptionalProperty(view, \"parent\", \"string\");\n  checkOptionalProperty(view, \"sticky\", \"boolean\");\n  if (view.columns) {\n    view.columns.forEach(validateColumn);\n    const columnIds = view.columns.reduce((set, column) => set.add(column.id), /* @__PURE__ */ new Set());\n    if (columnIds.size !== view.columns.length) {\n      throw new Error(\"View columns must have unique ids\");\n    }\n  }\n}\nclass Navigation extends TypedEventTarget {\n  _views = [];\n  _currentView = null;\n  /**\n   * Register a new view on the navigation\n   * @param view The view to register\n   * @throws {Error} if a view with the same id is already registered\n   * @throws {Error} if the registered view is invalid\n   */\n  register(view) {\n    if (this._views.find((search) => search.id === view.id)) {\n      throw new Error(`IView id ${view.id} is already registered`);\n    }\n    validateView(view);\n    this._views.push(view);\n    this.dispatchTypedEvent(\"update\", new CustomEvent(\"update\"));\n  }\n  /**\n   * Remove a registered view\n   * @param id The id of the view to remove\n   */\n  remove(id) {\n    const index = this._views.findIndex((view) => view.id === id);\n    if (index !== -1) {\n      this._views.splice(index, 1);\n      this.dispatchTypedEvent(\"update\", new CustomEvent(\"update\"));\n    }\n  }\n  /**\n   * Set the currently active view\n   *\n   * @param id - The id of the view to set as active\n   * @throws {Error} If no view with the given id was registered\n   * @fires UpdateActiveViewEvent\n   */\n  setActive(id) {\n    if (id === null) {\n      this._currentView = null;\n    } else {\n      const view = this._views.find(({ id: viewId }) => viewId === id);\n      if (!view) {\n        throw new Error(`No view with ${id} registered`);\n      }\n      this._currentView = view;\n    }\n    const event = new CustomEvent(\"updateActive\", { detail: this._currentView });\n    this.dispatchTypedEvent(\"updateActive\", event);\n  }\n  /**\n   * The currently active files view\n   */\n  get active() {\n    return this._currentView;\n  }\n  /**\n   * All registered views\n   */\n  get views() {\n    return this._views;\n  }\n}\nconst getNavigation = function() {\n  if (typeof window._nc_navigation === \"undefined\") {\n    window._nc_navigation = new Navigation();\n    logger.debug(\"Navigation service initialized\");\n  }\n  return window._nc_navigation;\n};\nvar NewMenuEntryCategory = /* @__PURE__ */ ((NewMenuEntryCategory2) => {\n  NewMenuEntryCategory2[NewMenuEntryCategory2[\"UploadFromDevice\"] = 0] = \"UploadFromDevice\";\n  NewMenuEntryCategory2[NewMenuEntryCategory2[\"CreateNew\"] = 1] = \"CreateNew\";\n  NewMenuEntryCategory2[NewMenuEntryCategory2[\"Other\"] = 2] = \"Other\";\n  return NewMenuEntryCategory2;\n})(NewMenuEntryCategory || {});\nclass NewMenu {\n  _entries = [];\n  registerEntry(entry) {\n    this.validateEntry(entry);\n    entry.category = entry.category ?? 1;\n    this._entries.push(entry);\n  }\n  unregisterEntry(entry) {\n    const entryIndex = typeof entry === \"string\" ? this.getEntryIndex(entry) : this.getEntryIndex(entry.id);\n    if (entryIndex === -1) {\n      logger.warn(\"Entry not found, nothing removed\", { entry, entries: this.getEntries() });\n      return;\n    }\n    this._entries.splice(entryIndex, 1);\n  }\n  /**\n   * Get the list of registered entries\n   *\n   * @param context - The creation context. Usually the current folder\n   */\n  getEntries(context) {\n    if (context) {\n      return this._entries.filter((entry) => typeof entry.enabled === \"function\" ? entry.enabled(context) : true);\n    }\n    return this._entries;\n  }\n  getEntryIndex(id) {\n    return this._entries.findIndex((entry) => entry.id === id);\n  }\n  validateEntry(entry) {\n    if (!entry.id || !entry.displayName || !entry.iconSvgInline || !entry.handler) {\n      throw new Error(\"Invalid entry\");\n    }\n    if (typeof entry.id !== \"string\" || typeof entry.displayName !== \"string\") {\n      throw new Error(\"Invalid id or displayName property\");\n    }\n    if (entry.iconSvgInline && typeof entry.iconSvgInline !== \"string\") {\n      throw new Error(\"Invalid icon provided\");\n    }\n    if (entry.enabled !== void 0 && typeof entry.enabled !== \"function\") {\n      throw new Error(\"Invalid enabled property\");\n    }\n    if (typeof entry.handler !== \"function\") {\n      throw new Error(\"Invalid handler property\");\n    }\n    if (\"order\" in entry && typeof entry.order !== \"number\") {\n      throw new Error(\"Invalid order property\");\n    }\n    if (this.getEntryIndex(entry.id) !== -1) {\n      throw new Error(\"Duplicate entry\");\n    }\n  }\n}\nfunction getNewFileMenu() {\n  if (typeof window._nc_newfilemenu === \"undefined\") {\n    window._nc_newfilemenu = new NewMenu();\n    logger.debug(\"NewFileMenu initialized\");\n  }\n  return window._nc_newfilemenu;\n}\nfunction addNewFileMenuEntry(entry) {\n  const newFileMenu = getNewFileMenu();\n  return newFileMenu.registerEntry(entry);\n}\nfunction removeNewFileMenuEntry(entry) {\n  const newFileMenu = getNewFileMenu();\n  return newFileMenu.unregisterEntry(entry);\n}\nfunction getNewFileMenuEntries(context) {\n  const newFileMenu = getNewFileMenu();\n  return newFileMenu.getEntries(context).sort((a2, b2) => {\n    if (a2.order !== void 0 && b2.order !== void 0 && a2.order !== b2.order) {\n      return a2.order - b2.order;\n    }\n    return a2.displayName.localeCompare(b2.displayName, void 0, { numeric: true, sensitivity: \"base\" });\n  });\n}\nfunction registerSidebarAction(action) {\n  validateSidebarAction(action);\n  window._nc_files_sidebar_actions ??= /* @__PURE__ */ new Map();\n  if (window._nc_files_sidebar_actions.has(action.id)) {\n    logger.warn(`Sidebar action with id \"${action.id}\" already registered. Skipping.`);\n    return;\n  }\n  window._nc_files_sidebar_actions.set(action.id, action);\n  logger.debug(`New sidebar action with id \"${action.id}\" registered.`);\n}\nfunction getSidebarActions() {\n  if (window._nc_files_sidebar_actions) {\n    return [...window._nc_files_sidebar_actions.values()];\n  }\n  return [];\n}\nfunction validateSidebarAction(action) {\n  if (typeof action !== \"object\") {\n    throw new Error(\"Sidebar action is not an object\");\n  }\n  if (!action.id || typeof action.id !== \"string\" || action.id !== CSS.escape(action.id)) {\n    throw new Error(\"Sidebar actions need to have an id conforming to the HTML id attribute specifications\");\n  }\n  if (!action.displayName || typeof action.displayName !== \"function\") {\n    throw new Error(\"Sidebar actions need to have a displayName function\");\n  }\n  if (!action.iconSvgInline || typeof action.iconSvgInline !== \"function\") {\n    throw new Error(\"Sidebar actions need to have a iconSvgInline function\");\n  }\n  if (!action.enabled || typeof action.enabled !== \"function\") {\n    throw new Error(\"Sidebar actions need to have an enabled function\");\n  }\n  if (!action.onClick || typeof action.onClick !== \"function\") {\n    throw new Error(\"Sidebar actions need to have an onClick function\");\n  }\n}\nfunction registerSidebarTab(tab) {\n  validateSidebarTab(tab);\n  window._nc_files_sidebar_tabs ??= /* @__PURE__ */ new Map();\n  if (window._nc_files_sidebar_tabs.has(tab.id)) {\n    logger.warn(`Sidebar tab with id \"${tab.id}\" already registered. Skipping.`);\n    return;\n  }\n  window._nc_files_sidebar_tabs.set(tab.id, tab);\n  logger.debug(`New sidebar tab with id \"${tab.id}\" registered.`);\n}\nfunction getSidebarTabs() {\n  if (window._nc_files_sidebar_tabs) {\n    return [...window._nc_files_sidebar_tabs.values()];\n  }\n  return [];\n}\nfunction validateSidebarTab(tab) {\n  if (typeof tab !== \"object\") {\n    throw new Error(\"Sidebar tab is not an object\");\n  }\n  if (!tab.id || typeof tab.id !== \"string\" || tab.id !== CSS.escape(tab.id)) {\n    throw new Error(\"Sidebar tabs need to have an id conforming to the HTML id attribute specifications\");\n  }\n  if (!tab.tagName || typeof tab.tagName !== \"string\") {\n    throw new Error(\"Sidebar tabs need to have the tagName name set\");\n  }\n  if (!tab.tagName.match(/^[a-z][a-z0-9-_]+$/)) {\n    throw new Error(\"Sidebar tabs tagName name is invalid\");\n  }\n  if (!tab.displayName || typeof tab.displayName !== \"string\") {\n    throw new Error(\"Sidebar tabs need to have a name set\");\n  }\n  if (typeof tab.iconSvgInline !== \"string\" || !isSvg(tab.iconSvgInline)) {\n    throw new Error(\"Sidebar tabs need to have an valid SVG icon\");\n  }\n  if (typeof tab.order !== \"number\") {\n    throw new Error(\"Sidebar tabs need to have a numeric order set\");\n  }\n  if (typeof tab.enabled !== \"function\") {\n    throw new Error('Sidebar tabs need to have an \"enabled\" method');\n  }\n}\nclass SidebarProxy {\n  get #impl() {\n    return window.OCA?.Files?._sidebar?.();\n  }\n  get available() {\n    return !!this.#impl;\n  }\n  get isOpen() {\n    return this.#impl?.isOpen ?? false;\n  }\n  get activeTab() {\n    return this.#impl?.activeTab;\n  }\n  get node() {\n    return this.#impl?.node;\n  }\n  open(node, tab) {\n    this.#impl?.open(node, tab);\n  }\n  close() {\n    this.#impl?.close();\n  }\n  setActiveTab(tabId) {\n    this.#impl?.setActiveTab(tabId);\n  }\n  registerTab(tab) {\n    registerSidebarTab(tab);\n  }\n  getTabs(context) {\n    return this.#impl?.getTabs(context) ?? [];\n  }\n  getActions(context) {\n    return this.#impl?.getActions(context) ?? [];\n  }\n  registerAction(action) {\n    registerSidebarAction(action);\n  }\n}\nfunction getSidebar() {\n  return new SidebarProxy();\n}\nvar InvalidFilenameErrorReason = /* @__PURE__ */ ((InvalidFilenameErrorReason2) => {\n  InvalidFilenameErrorReason2[\"ReservedName\"] = \"reserved name\";\n  InvalidFilenameErrorReason2[\"Character\"] = \"character\";\n  InvalidFilenameErrorReason2[\"Extension\"] = \"extension\";\n  return InvalidFilenameErrorReason2;\n})(InvalidFilenameErrorReason || {});\nclass InvalidFilenameError extends Error {\n  constructor(options) {\n    super(`Invalid ${options.reason} '${options.segment}' in filename '${options.filename}'`, { cause: options });\n  }\n  /**\n   * The filename that was validated\n   */\n  get filename() {\n    return this.cause.filename;\n  }\n  /**\n   * Reason why the validation failed\n   */\n  get reason() {\n    return this.cause.reason;\n  }\n  /**\n   * Part of the filename that caused this error\n   */\n  get segment() {\n    return this.cause.segment;\n  }\n}\nfunction validateFilename(filename) {\n  const capabilities = getCapabilities().files;\n  const forbiddenCharacters = capabilities.forbidden_filename_characters ?? [\"/\", \"\\\\\"];\n  for (const character of forbiddenCharacters) {\n    if (filename.includes(character)) {\n      throw new InvalidFilenameError({ segment: character, reason: \"character\", filename });\n    }\n  }\n  filename = filename.toLocaleLowerCase();\n  const forbiddenFilenames = capabilities.forbidden_filenames ?? [\".htaccess\"];\n  if (forbiddenFilenames.includes(filename)) {\n    throw new InvalidFilenameError({\n      filename,\n      segment: filename,\n      reason: \"reserved name\"\n      /* ReservedName */\n    });\n  }\n  const endOfBasename = filename.indexOf(\".\", 1);\n  const basename2 = filename.substring(0, endOfBasename === -1 ? void 0 : endOfBasename);\n  const forbiddenFilenameBasenames = capabilities.forbidden_filename_basenames ?? [];\n  if (forbiddenFilenameBasenames.includes(basename2)) {\n    throw new InvalidFilenameError({\n      filename,\n      segment: basename2,\n      reason: \"reserved name\"\n      /* ReservedName */\n    });\n  }\n  const forbiddenFilenameExtensions = capabilities.forbidden_filename_extensions ?? [];\n  for (const extension of forbiddenFilenameExtensions) {\n    if (filename.length > extension.length && filename.endsWith(extension)) {\n      throw new InvalidFilenameError({ segment: extension, reason: \"extension\", filename });\n    }\n  }\n}\nfunction isFilenameValid(filename) {\n  try {\n    validateFilename(filename);\n    return true;\n  } catch (error) {\n    if (error instanceof InvalidFilenameError) {\n      return false;\n    }\n    throw error;\n  }\n}\nfunction getUniqueName(name, otherNames, options) {\n  const opts = {\n    suffix: (n) => `(${n})`,\n    ignoreFileExtension: false,\n    ...options\n  };\n  let newName = name;\n  let i = 1;\n  while (otherNames.includes(newName)) {\n    const ext = opts.ignoreFileExtension ? \"\" : extname(name);\n    const base = basename(name, ext);\n    newName = `${base} ${opts.suffix(i++)}${ext}`;\n  }\n  return newName;\n}\nconst humanList = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\nconst humanListBinary = [\"B\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\"];\nfunction formatFileSize(size, skipSmallSizes = false, binaryPrefixes = false, base1000 = false) {\n  binaryPrefixes = binaryPrefixes && !base1000;\n  if (typeof size === \"string\") {\n    size = Number(size);\n  }\n  let order = size > 0 ? Math.floor(Math.log(size) / Math.log(base1000 ? 1e3 : 1024)) : 0;\n  order = Math.min((binaryPrefixes ? humanListBinary.length : humanList.length) - 1, order);\n  const readableFormat = binaryPrefixes ? humanListBinary[order] : humanList[order];\n  let relativeSize = (size / Math.pow(base1000 ? 1e3 : 1024, order)).toFixed(1);\n  if (skipSmallSizes === true && order === 0) {\n    return (relativeSize !== \"0.0\" ? \"< 1 \" : \"0 \") + (binaryPrefixes ? humanListBinary[1] : humanList[1]);\n  }\n  if (order < 2) {\n    relativeSize = parseFloat(relativeSize).toFixed(0);\n  } else {\n    relativeSize = parseFloat(relativeSize).toLocaleString(getCanonicalLocale());\n  }\n  return relativeSize + \" \" + readableFormat;\n}\nfunction parseFileSize(value, forceBinary = false) {\n  try {\n    value = `${value}`.toLocaleLowerCase().replaceAll(/\\s+/g, \"\").replaceAll(\",\", \".\");\n  } catch (e) {\n    return null;\n  }\n  const match = value.match(/^([0-9]*(\\.[0-9]*)?)([kmgtp]?)(i?)b?$/);\n  if (match === null || match[1] === \".\" || match[1] === \"\") {\n    return null;\n  }\n  const bytesArray = {\n    \"\": 0,\n    k: 1,\n    m: 2,\n    g: 3,\n    t: 4,\n    p: 5,\n    e: 6\n  };\n  const decimalString = `${match[1]}`;\n  const base = match[4] === \"i\" || forceBinary ? 1024 : 1e3;\n  return Math.round(Number.parseFloat(decimalString) * base ** bytesArray[match[3]]);\n}\nfunction stringify(value) {\n  if (value instanceof Date) {\n    return value.toISOString();\n  }\n  return String(value);\n}\nfunction orderBy(collection, identifiers2, orders) {\n  identifiers2 = identifiers2 ?? [(value) => value];\n  orders = orders ?? [];\n  const sorting = identifiers2.map((_, index) => (orders[index] ?? \"asc\") === \"asc\" ? 1 : -1);\n  const collator = Intl.Collator(\n    [getLanguage(), getCanonicalLocale()],\n    {\n      // handle 10 as ten and not as one-zero\n      numeric: true,\n      usage: \"sort\"\n    }\n  );\n  return [...collection].sort((a2, b2) => {\n    for (const [index, identifier] of identifiers2.entries()) {\n      const value = collator.compare(stringify(identifier(a2)), stringify(identifier(b2)));\n      if (value !== 0) {\n        return value * sorting[index];\n      }\n    }\n    return 0;\n  });\n}\nvar FilesSortingMode = /* @__PURE__ */ ((FilesSortingMode2) => {\n  FilesSortingMode2[\"Name\"] = \"basename\";\n  FilesSortingMode2[\"Modified\"] = \"mtime\";\n  FilesSortingMode2[\"Size\"] = \"size\";\n  return FilesSortingMode2;\n})(FilesSortingMode || {});\nfunction sortNodes(nodes, options = {}) {\n  const sortingOptions = {\n    // Default to sort by name\n    sortingMode: \"basename\",\n    // Default to sort ascending\n    sortingOrder: \"asc\",\n    ...options\n  };\n  function basename2(node) {\n    const name = node.displayname || node.attributes?.displayname || node.basename || \"\";\n    if (node.type === FileType.Folder) {\n      return name;\n    }\n    return name.lastIndexOf(\".\") > 0 ? name.slice(0, name.lastIndexOf(\".\")) : name;\n  }\n  const identifiers2 = [\n    // 1: Sort favorites first if enabled\n    ...sortingOptions.sortFavoritesFirst ? [(v) => v.attributes?.favorite !== 1] : [],\n    // 2: Sort folders first if sorting by name\n    ...sortingOptions.sortFoldersFirst ? [(v) => v.type !== \"folder\"] : [],\n    // 3: Use sorting mode if NOT basename (to be able to use display name too)\n    ...sortingOptions.sortingMode !== \"basename\" ? [(v) => v[sortingOptions.sortingMode] ?? v.attributes[sortingOptions.sortingMode]] : [],\n    // 4: Use display name if available, fallback to name\n    (v) => basename2(v),\n    // 5: Finally, use basename if all previous sorting methods failed\n    (v) => v.basename\n  ];\n  const orders = [\n    // (for 1): always sort favorites before normal files\n    ...sortingOptions.sortFavoritesFirst ? [\"asc\"] : [],\n    // (for 2): always sort folders before files\n    ...sortingOptions.sortFoldersFirst ? [\"asc\"] : [],\n    // (for 3): Reverse if sorting by mtime as mtime higher means edited more recent -> lower\n    ...sortingOptions.sortingMode === \"mtime\" ? [sortingOptions.sortingOrder === \"asc\" ? \"desc\" : \"asc\"] : [],\n    // (also for 3 so make sure not to conflict with 2 and 3)\n    ...sortingOptions.sortingMode !== \"mtime\" && sortingOptions.sortingMode !== \"basename\" ? [sortingOptions.sortingOrder] : [],\n    // for 4: use configured sorting direction\n    sortingOptions.sortingOrder,\n    // for 5: use configured sorting direction\n    sortingOptions.sortingOrder\n  ];\n  return orderBy(nodes, identifiers2, orders);\n}\nexport {\n  Column,\n  DefaultType,\n  a as File,\n  FileAction,\n  FileListAction,\n  FileListFilter,\n  FileType,\n  FilesSortingMode,\n  b as Folder,\n  Header,\n  InvalidFilenameError,\n  InvalidFilenameErrorReason,\n  Navigation,\n  NewMenuEntryCategory,\n  N as Node,\n  c as NodeStatus,\n  P as Permission,\n  View,\n  addNewFileMenuEntry,\n  formatFileSize,\n  getFileActions,\n  getFileListActions,\n  getFileListFilters,\n  getFileListHeaders,\n  getNavigation,\n  getNewFileMenu,\n  getNewFileMenuEntries,\n  getSidebar,\n  getSidebarActions,\n  getSidebarTabs,\n  getUniqueName,\n  isFilenameValid,\n  orderBy,\n  parseFileSize,\n  registerFileAction,\n  registerFileListAction,\n  registerFileListFilter,\n  registerFileListHeaders,\n  registerSidebarAction,\n  registerSidebarTab,\n  removeNewFileMenuEntry,\n  sortNodes,\n  unregisterFileListFilter,\n  validateColumn,\n  validateFilename,\n  validateView\n};\n//# sourceMappingURL=index.mjs.map\n","import { getCurrentUser, onRequestTokenUpdate, getRequestToken } from \"@nextcloud/auth\";\nimport { isPublicShare, getSharingToken } from \"@nextcloud/sharing/public\";\nimport { generateRemoteUrl } from \"@nextcloud/router\";\nimport { createClient, getPatcher } from \"webdav\";\nimport { P as Permission, l as logger, c as NodeStatus, a as File, b as Folder } from \"./chunks/folder-Bf-tAYWu.mjs\";\nconst parsePermissions = function(permString = \"\") {\n  let permissions = Permission.NONE;\n  if (!permString) {\n    return permissions;\n  }\n  if (permString.includes(\"C\") || permString.includes(\"K\")) {\n    permissions |= Permission.CREATE;\n  }\n  if (permString.includes(\"G\")) {\n    permissions |= Permission.READ;\n  }\n  if (permString.includes(\"W\") || permString.includes(\"N\") || permString.includes(\"V\")) {\n    permissions |= Permission.UPDATE;\n  }\n  if (permString.includes(\"D\")) {\n    permissions |= Permission.DELETE;\n  }\n  if (permString.includes(\"R\")) {\n    permissions |= Permission.SHARE;\n  }\n  return permissions;\n};\nconst defaultDavProperties = [\n  \"d:getcontentlength\",\n  \"d:getcontenttype\",\n  \"d:getetag\",\n  \"d:getlastmodified\",\n  \"d:creationdate\",\n  \"d:displayname\",\n  \"d:quota-available-bytes\",\n  \"d:resourcetype\",\n  \"nc:has-preview\",\n  \"nc:is-encrypted\",\n  \"nc:mount-type\",\n  \"oc:comments-unread\",\n  \"oc:favorite\",\n  \"oc:fileid\",\n  \"oc:owner-display-name\",\n  \"oc:owner-id\",\n  \"oc:permissions\",\n  \"oc:size\"\n];\nconst defaultDavNamespaces = {\n  d: \"DAV:\",\n  nc: \"http://nextcloud.org/ns\",\n  oc: \"http://owncloud.org/ns\",\n  ocs: \"http://open-collaboration-services.org/ns\"\n};\nconst registerDavProperty = function(prop, namespace = { nc: \"http://nextcloud.org/ns\" }) {\n  if (typeof window._nc_dav_properties === \"undefined\") {\n    window._nc_dav_properties = [...defaultDavProperties];\n    window._nc_dav_namespaces = { ...defaultDavNamespaces };\n  }\n  const namespaces = { ...window._nc_dav_namespaces, ...namespace };\n  if (window._nc_dav_properties.find((search) => search === prop)) {\n    logger.warn(`${prop} already registered`, { prop });\n    return false;\n  }\n  if (prop.startsWith(\"<\") || prop.split(\":\").length !== 2) {\n    logger.error(`${prop} is not valid. See example: 'oc:fileid'`, { prop });\n    return false;\n  }\n  const ns = prop.split(\":\")[0];\n  if (!namespaces[ns]) {\n    logger.error(`${prop} namespace unknown`, { prop, namespaces });\n    return false;\n  }\n  window._nc_dav_properties.push(prop);\n  window._nc_dav_namespaces = namespaces;\n  return true;\n};\nconst getDavProperties = function() {\n  if (typeof window._nc_dav_properties === \"undefined\") {\n    window._nc_dav_properties = [...defaultDavProperties];\n  }\n  return window._nc_dav_properties.map((prop) => `<${prop} />`).join(\" \");\n};\nconst getDavNameSpaces = function() {\n  if (typeof window._nc_dav_namespaces === \"undefined\") {\n    window._nc_dav_namespaces = { ...defaultDavNamespaces };\n  }\n  return Object.keys(window._nc_dav_namespaces).map((ns) => `xmlns:${ns}=\"${window._nc_dav_namespaces?.[ns]}\"`).join(\" \");\n};\nconst getDefaultPropfind = function() {\n  return `<?xml version=\"1.0\"?>\n\t\t<d:propfind ${getDavNameSpaces()}>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t</d:propfind>`;\n};\nconst getFavoritesReport = function() {\n  return `<?xml version=\"1.0\"?>\n\t\t<oc:filter-files ${getDavNameSpaces()}>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t\t<oc:filter-rules>\n\t\t\t\t<oc:favorite>1</oc:favorite>\n\t\t\t</oc:filter-rules>\n\t\t</oc:filter-files>`;\n};\nconst getRecentSearch = function(lastModified) {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<d:searchrequest ${getDavNameSpaces()}\n\txmlns:ns=\"https://github.com/icewind1991/SearchDAV/ns\">\n\t<d:basicsearch>\n\t\t<d:select>\n\t\t\t<d:prop>\n\t\t\t\t${getDavProperties()}\n\t\t\t</d:prop>\n\t\t</d:select>\n\t\t<d:from>\n\t\t\t<d:scope>\n\t\t\t\t<d:href>/files/${getCurrentUser()?.uid}/</d:href>\n\t\t\t\t<d:depth>infinity</d:depth>\n\t\t\t</d:scope>\n\t\t</d:from>\n\t\t<d:where>\n\t\t\t<d:and>\n\t\t\t\t<d:or>\n\t\t\t\t\t<d:not>\n\t\t\t\t\t\t<d:eq>\n\t\t\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t\t\t<d:getcontenttype/>\n\t\t\t\t\t\t\t</d:prop>\n\t\t\t\t\t\t\t<d:literal>httpd/unix-directory</d:literal>\n\t\t\t\t\t\t</d:eq>\n\t\t\t\t\t</d:not>\n\t\t\t\t\t<d:eq>\n\t\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t\t<oc:size/>\n\t\t\t\t\t\t</d:prop>\n\t\t\t\t\t\t<d:literal>0</d:literal>\n\t\t\t\t\t</d:eq>\n\t\t\t\t</d:or>\n\t\t\t\t<d:gt>\n\t\t\t\t\t<d:prop>\n\t\t\t\t\t\t<d:getlastmodified/>\n\t\t\t\t\t</d:prop>\n\t\t\t\t\t<d:literal>${lastModified}</d:literal>\n\t\t\t\t</d:gt>\n\t\t\t</d:and>\n\t\t</d:where>\n\t\t<d:orderby>\n\t\t\t<d:order>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<d:getlastmodified/>\n\t\t\t\t</d:prop>\n\t\t\t\t<d:descending/>\n\t\t\t</d:order>\n\t\t</d:orderby>\n\t\t<d:limit>\n\t\t\t<d:nresults>100</d:nresults>\n\t\t\t<ns:firstresult>0</ns:firstresult>\n\t\t</d:limit>\n\t</d:basicsearch>\n</d:searchrequest>`;\n};\nfunction getRootPath() {\n  if (isPublicShare()) {\n    return `/files/${getSharingToken()}`;\n  }\n  return `/files/${getCurrentUser()?.uid}`;\n}\nconst defaultRootPath = getRootPath();\nfunction getRemoteURL() {\n  const url = generateRemoteUrl(\"dav\");\n  if (isPublicShare()) {\n    return url.replace(\"remote.php\", \"public.php\");\n  }\n  return url;\n}\nconst defaultRemoteURL = getRemoteURL();\nconst getClient = function(remoteURL = defaultRemoteURL, headers = {}) {\n  const client = createClient(remoteURL, { headers });\n  function setHeaders(token) {\n    client.setHeaders({\n      ...headers,\n      // Add this so the server knows it is an request from the browser\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      // Inject user auth\n      requesttoken: token ?? \"\"\n    });\n  }\n  onRequestTokenUpdate(setHeaders);\n  setHeaders(getRequestToken());\n  const patcher = getPatcher();\n  patcher.patch(\"fetch\", (url, options) => {\n    const headers2 = options.headers;\n    if (headers2?.method) {\n      options.method = headers2.method;\n      delete headers2.method;\n    }\n    return fetch(url, options);\n  });\n  return client;\n};\nasync function getFavoriteNodes(options = {}) {\n  const client = options.client ?? getClient();\n  const path = options.path ?? \"/\";\n  const davRoot = options.davRoot ?? defaultRootPath;\n  const contentsResponse = await client.getDirectoryContents(`${davRoot}${path}`, {\n    signal: options.signal,\n    details: true,\n    data: getFavoritesReport(),\n    headers: {\n      // see getClient for patched webdav client\n      method: \"REPORT\"\n    },\n    includeSelf: true\n  });\n  return contentsResponse.data.filter((node) => node.filename !== path).map((result) => resultToNode(result, davRoot));\n}\nconst resultToNode = function(node, filesRoot = defaultRootPath, remoteURL = defaultRemoteURL) {\n  let userId = getCurrentUser()?.uid;\n  if (isPublicShare()) {\n    userId = userId ?? \"anonymous\";\n  } else if (!userId) {\n    throw new Error(\"No user id found\");\n  }\n  const props = node.props;\n  const permissions = parsePermissions(props?.permissions);\n  const owner = String(props?.[\"owner-id\"] || userId);\n  const id = props.fileid || 0;\n  const mtime = new Date(Date.parse(node.lastmod));\n  const crtime = new Date(Date.parse(props.creationdate));\n  const nodeData = {\n    id,\n    source: `${remoteURL}${node.filename}`,\n    mtime: !isNaN(mtime.getTime()) && mtime.getTime() !== 0 ? mtime : void 0,\n    crtime: !isNaN(crtime.getTime()) && crtime.getTime() !== 0 ? crtime : void 0,\n    mime: node.mime || \"application/octet-stream\",\n    // Manually cast to work around for https://github.com/perry-mitchell/webdav-client/pull/380\n    displayname: props.displayname !== void 0 ? String(props.displayname) : void 0,\n    size: props?.size || Number.parseInt(props.getcontentlength || \"0\"),\n    // The fileid is set to -1 for failed requests\n    status: id < 0 ? NodeStatus.FAILED : void 0,\n    permissions,\n    owner,\n    root: filesRoot,\n    attributes: {\n      ...node,\n      ...props,\n      hasPreview: props?.[\"has-preview\"]\n    }\n  };\n  delete nodeData.attributes?.props;\n  return node.type === \"file\" ? new File(nodeData) : new Folder(nodeData);\n};\nexport {\n  defaultDavNamespaces,\n  defaultDavProperties,\n  defaultRemoteURL,\n  defaultRootPath,\n  getClient,\n  getDavNameSpaces,\n  getDavProperties,\n  getDefaultPropfind,\n  getFavoriteNodes,\n  getFavoritesReport,\n  getRecentSearch,\n  getRemoteURL,\n  getRootPath,\n  parsePermissions,\n  registerDavProperty,\n  resultToNode\n};\n//# sourceMappingURL=dav.mjs.map\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport TagMultipleSvg from '@mdi/svg/svg/tag-multiple-outline.svg?raw';\nimport { FileAction, Permission } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport { isPublicShare } from '@nextcloud/sharing/public';\nimport { spawnDialog } from '@nextcloud/vue/functions/dialog';\nimport { defineAsyncComponent } from 'vue';\n/**\n * Spawn a dialog to add or remove tags from multiple nodes.\n *\n * @param nodes Nodes to modify tags for\n * @param nodes.nodes\n */\nasync function execBatch({ nodes }) {\n    const response = await new Promise((resolve) => {\n        spawnDialog(defineAsyncComponent(() => import('../components/SystemTagPicker.vue')), {\n            nodes,\n        }, (status) => {\n            resolve(status);\n        });\n    });\n    return Array(nodes.length).fill(response);\n}\nexport const action = new FileAction({\n    id: 'systemtags:bulk',\n    displayName: () => t('systemtags', 'Manage tags'),\n    iconSvgInline: () => TagMultipleSvg,\n    // If the app is disabled, the action is not available anyway\n    enabled({ nodes }) {\n        if (isPublicShare()) {\n            return false;\n        }\n        if (nodes.length === 0) {\n            return false;\n        }\n        // Disabled for non dav resources\n        if (nodes.some((node) => !node.isDavResource)) {\n            return false;\n        }\n        // We need to have the update permission on all nodes\n        return !nodes.some((node) => (node.permissions & Permission.UPDATE) === 0);\n    },\n    async exec({ nodes }) {\n        return execBatch({ nodes })[0];\n    },\n    execBatch,\n});\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./fileEntryInlineSystemTags.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./fileEntryInlineSystemTags.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { subscribe } from '@nextcloud/event-bus';\nimport { FileAction } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport logger from '../logger.ts';\nimport { fetchTags } from '../services/api.ts';\nimport { getNodeSystemTags } from '../utils.ts';\nimport { elementColor, isDarkModeEnabled } from '../utils/colorUtils.ts';\nimport '../css/fileEntryInlineSystemTags.scss';\n// Init tag cache\nconst cache = [];\nexport const action = new FileAction({\n    id: 'system-tags',\n    displayName: () => '',\n    iconSvgInline: () => '',\n    enabled({ nodes }) {\n        // Only show the action on single nodes\n        if (nodes.length !== 1) {\n            return false;\n        }\n        // Always show the action, even if there are no tags\n        // This will render an empty tag list and allow events to update it\n        return true;\n    },\n    exec: async () => null,\n    renderInline: ({ nodes }) => {\n        if (nodes.length !== 1 || !nodes[0]) {\n            return Promise.resolve(null);\n        }\n        return renderInline(nodes[0]);\n    },\n    order: 0,\n    hotkey: {\n        description: t('files', 'Manage tags'),\n        key: 'T',\n    },\n});\n// Subscribe to the events\nsubscribe('systemtags:node:updated', updateSystemTagsHtml);\nsubscribe('systemtags:tag:created', addTag);\nsubscribe('systemtags:tag:deleted', removeTag);\nsubscribe('systemtags:tag:updated', updateTag);\n/**\n * Update the system tags html when the node is updated\n *\n * @param node - The updated node\n */\nfunction updateSystemTagsHtml(node) {\n    renderInline(node).then((systemTagsHtml) => {\n        document.querySelectorAll(`[data-systemtags-fileid=\"${node.fileid}\"]`).forEach((element) => {\n            element.replaceWith(systemTagsHtml);\n        });\n    });\n}\n/**\n * Add and remove tags from the cache\n *\n * @param tag - The tag to add\n */\nfunction addTag(tag) {\n    cache.push(tag);\n}\n/**\n * Remove a tag from the cache\n *\n * @param tag - The tag to remove\n */\nfunction removeTag(tag) {\n    cache.splice(cache.findIndex((t) => t.id === tag.id), 1);\n}\n/**\n * Update a tag in the cache\n *\n * @param tag - The tag to update\n */\nfunction updateTag(tag) {\n    const index = cache.findIndex((t) => t.id === tag.id);\n    if (index !== -1) {\n        cache[index] = tag;\n    }\n    updateSystemTagsColorAttribute(tag);\n}\n/**\n * Update the color attribute of the system tags\n *\n * @param tag - The tag to update\n */\nfunction updateSystemTagsColorAttribute(tag) {\n    document.querySelectorAll(`[data-systemtag-name=\"${tag.displayName}\"]`).forEach((element) => {\n        element.style.setProperty('--systemtag-color', `#${tag.color}`);\n    });\n}\n/**\n *\n * @param tag\n * @param isMore\n */\nfunction renderTag(tag, isMore = false) {\n    const tagElement = document.createElement('li');\n    tagElement.classList.add('files-list__system-tag');\n    tagElement.setAttribute('data-systemtag-name', tag);\n    tagElement.textContent = tag;\n    // Set the color if it exists\n    const cachedTag = cache.find((t) => t.displayName === tag);\n    if (cachedTag?.color) {\n        // Make sure contrast is good and follow WCAG guidelines\n        const mainBackgroundColor = getComputedStyle(document.body)\n            .getPropertyValue('--color-main-background')\n            .replace('#', '') || (isDarkModeEnabled() ? '000000' : 'ffffff');\n        const primaryElement = elementColor(`#${cachedTag.color}`, `#${mainBackgroundColor}`);\n        tagElement.style.setProperty('--systemtag-color', primaryElement);\n        tagElement.setAttribute('data-systemtag-color', 'true');\n    }\n    if (isMore) {\n        tagElement.classList.add('files-list__system-tag--more');\n    }\n    return tagElement;\n}\n/**\n *\n * @param node\n */\nasync function renderInline(node) {\n    // Ensure we have the system tags as an array\n    const tags = getNodeSystemTags(node);\n    const systemTagsElement = document.createElement('ul');\n    systemTagsElement.classList.add('files-list__system-tags');\n    systemTagsElement.setAttribute('aria-label', t('files', 'Assigned collaborative tags'));\n    systemTagsElement.setAttribute('data-systemtags-fileid', node.fileid?.toString() || '');\n    if (tags.length === 0) {\n        return systemTagsElement;\n    }\n    // Fetch the tags if the cache is empty\n    if (cache.length === 0) {\n        try {\n            // Best would be to support attributes from webdav,\n            // but currently the library does not support it\n            cache.push(...await fetchTags());\n        }\n        catch (error) {\n            logger.error('Failed to fetch tags', { error });\n        }\n    }\n    systemTagsElement.append(renderTag(tags[0]));\n    if (tags.length === 2) {\n        // Special case only two tags:\n        // the overflow fake tag would take the same space as this, so render it\n        systemTagsElement.append(renderTag(tags[1]));\n    }\n    else if (tags.length > 1) {\n        // More tags than the one we're showing\n        // So we add a overflow element indicating there are more tags\n        const moreTagElement = renderTag('+' + (tags.length - 1), true);\n        moreTagElement.setAttribute('title', tags.slice(1).join(', '));\n        // because the title is not accessible we hide this element for screen readers (see alternative below)\n        moreTagElement.setAttribute('aria-hidden', 'true');\n        moreTagElement.setAttribute('role', 'presentation');\n        systemTagsElement.append(moreTagElement);\n        // For accessibility the tags are listed, as the title is not accessible\n        // but those tags are visually hidden\n        for (const tag of tags.slice(1)) {\n            const tagElement = renderTag(tag);\n            tagElement.classList.add('hidden-visually');\n            systemTagsElement.append(tagElement);\n        }\n    }\n    return systemTagsElement;\n}\n","import { getCurrentUser } from '@nextcloud/auth';\nimport { Folder, Permission } from '@nextcloud/files';\nimport { getClient, getDavNameSpaces, getDavProperties, getRemoteURL, getRootPath, resultToNode } from '@nextcloud/files/dav';\nimport { fetchTags } from './api.ts';\nconst rootPath = '/systemtags';\nconst client = getClient();\n/**\n *\n * @param tagId\n */\nfunction formatReportPayload(tagId) {\n    return `<?xml version=\"1.0\"?>\n<oc:filter-files ${getDavNameSpaces()}>\n\t<d:prop>\n\t\t${getDavProperties()}\n\t</d:prop>\n\t<oc:filter-rules>\n\t\t<oc:systemtag>${tagId}</oc:systemtag>\n\t</oc:filter-rules>\n</oc:filter-files>`;\n}\n/**\n *\n * @param tag\n */\nfunction tagToNode(tag) {\n    return new Folder({\n        id: tag.id,\n        source: `${getRemoteURL()}${rootPath}/${tag.id}`,\n        owner: String(getCurrentUser()?.uid ?? 'anonymous'),\n        root: rootPath,\n        displayname: tag.displayName,\n        permissions: Permission.READ,\n        attributes: {\n            ...tag,\n            'is-tag': true,\n        },\n    });\n}\n/**\n *\n * @param path\n */\nexport async function getContents(path = '/') {\n    // List tags in the root\n    const tagsCache = (await fetchTags()).filter((tag) => tag.userVisible);\n    if (path === '/') {\n        return {\n            folder: new Folder({\n                id: 0,\n                source: `${getRemoteURL()}${rootPath}`,\n                owner: getCurrentUser()?.uid,\n                root: rootPath,\n                permissions: Permission.NONE,\n            }),\n            contents: tagsCache.map(tagToNode),\n        };\n    }\n    const tagId = parseInt(path.split('/', 2)[1]);\n    const tag = tagsCache.find((tag) => tag.id === tagId);\n    if (!tag) {\n        throw new Error('Tag not found');\n    }\n    const folder = tagToNode(tag);\n    const contentsResponse = await client.getDirectoryContents(getRootPath(), {\n        details: true,\n        // Only filter favorites if we're at the root\n        data: formatReportPayload(tagId),\n        headers: {\n            // Patched in WebdavClient.ts\n            method: 'REPORT',\n        },\n    });\n    return {\n        folder,\n        contents: contentsResponse.data.map((stat) => resultToNode(stat)),\n    };\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport svgTagMultiple from '@mdi/svg/svg/tag-multiple-outline.svg?raw';\nimport { getNavigation, View } from '@nextcloud/files';\nimport { translate as t } from '@nextcloud/l10n';\nimport { getContents } from '../services/systemtags.js';\nexport const systemTagsViewId = 'tags';\n/**\n * Register the system tags files view\n */\nexport function registerSystemTagsView() {\n    const Navigation = getNavigation();\n    Navigation.register(new View({\n        id: systemTagsViewId,\n        name: t('systemtags', 'Tags'),\n        caption: t('systemtags', 'List of tags and their associated files and folders.'),\n        emptyTitle: t('systemtags', 'No tags found'),\n        emptyCaption: t('systemtags', 'Tags you have created will show up here.'),\n        icon: svgTagMultiple,\n        order: 25,\n        getContents,\n    }));\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { DefaultType, FileAction, FileType } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport { systemTagsViewId } from '../files_views/systemtagsView.ts';\nexport const action = new FileAction({\n    id: 'systemtags:open-in-files',\n    displayName: () => t('systemtags', 'Open in Files'),\n    iconSvgInline: () => '',\n    enabled({ nodes, view }) {\n        // Only for the system tags view\n        if (view.id !== systemTagsViewId) {\n            return false;\n        }\n        // Only for single nodes\n        if (nodes.length !== 1 || !nodes[0]) {\n            return false;\n        }\n        // Do not open tags (keep the default action) and only open folders\n        return nodes[0].attributes['is-tag'] !== true\n            && nodes[0].type === FileType.Folder;\n    },\n    async exec({ nodes }) {\n        if (!nodes[0] || nodes.length !== 1) {\n            return false;\n        }\n        let dir = nodes[0].dirname;\n        if (nodes[0].type === FileType.Folder) {\n            dir = nodes[0].path;\n        }\n        window.OCP.Files.Router.goToRoute(null, // use default route\n        { view: 'files', fileid: String(nodes[0].fileid) }, { dir, openfile: 'true' });\n        return null;\n    },\n    // Before openFolderAction\n    order: -1000,\n    default: DefaultType.HIDDEN,\n});\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getLoggerBuilder } from '@nextcloud/logger';\nexport default getLoggerBuilder()\n    .setApp('files')\n    .detectUser()\n    .build();\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { subscribe } from '@nextcloud/event-bus';\nimport { getNavigation } from '@nextcloud/files';\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport logger from '../logger.ts';\nexport const useActiveStore = defineStore('active', () => {\n    /**\n     * The currently active action\n     */\n    const activeAction = ref();\n    /**\n     * The currently active folder\n     */\n    const activeFolder = ref();\n    /**\n     * The current active node within the folder\n     */\n    const activeNode = ref();\n    /**\n     * The current active view\n     */\n    const activeView = ref();\n    initialize();\n    /**\n     * Unset the active node if deleted\n     *\n     * @param node - The node thats deleted\n     */\n    function onDeletedNode(node) {\n        if (activeNode.value && activeNode.value.source === node.source) {\n            activeNode.value = undefined;\n        }\n    }\n    /**\n     * Callback to update the current active view\n     *\n     * @param view - The new active view\n     */\n    function onChangedView(view = null) {\n        logger.debug('Setting active view', { view });\n        activeView.value = view ?? undefined;\n        activeNode.value = undefined;\n    }\n    /**\n     * Initalize the store - connect all event listeners.\n     *\n     */\n    function initialize() {\n        const navigation = getNavigation();\n        // Make sure we only register the listeners once\n        subscribe('files:node:deleted', onDeletedNode);\n        onChangedView(navigation.active);\n        // Or you can react to changes of the current active view\n        navigation.addEventListener('updateActive', (event) => {\n            onChangedView(event.detail);\n        });\n    }\n    return {\n        activeAction,\n        activeFolder,\n        activeNode,\n        activeView,\n    };\n});\n","/*!\n * SPDX-FileCopyrightText: 2016 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { registerFileAction } from '@nextcloud/files';\nimport { registerDavProperty } from '@nextcloud/files/dav';\nimport { action as bulkSystemTagsAction } from './files_actions/bulkSystemTagsAction.ts';\nimport { registerFileSidebarAction } from './files_actions/filesSidebarAction.ts';\nimport { action as inlineSystemTagsAction } from './files_actions/inlineSystemTagsAction.ts';\nimport { action as openInFilesAction } from './files_actions/openInFilesAction.ts';\nimport { registerSystemTagsView } from './files_views/systemtagsView.ts';\nimport { registerHotkeys } from './services/HotKeysService.ts';\nregisterDavProperty('nc:system-tags');\nregisterFileAction(bulkSystemTagsAction);\nregisterFileAction(inlineSystemTagsAction);\nregisterFileAction(openInFilesAction);\nregisterSystemTagsView();\nregisterFileSidebarAction();\ndocument.addEventListener('DOMContentLoaded', () => {\n    registerHotkeys();\n});\n","/*!\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport tagSvg from '@mdi/svg/svg/tag-outline.svg?raw';\nimport { registerSidebarAction } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport { spawnDialog } from '@nextcloud/vue/functions/dialog';\nimport { defineAsyncComponent } from 'vue';\n/**\n * Register the \"Add tags\" action in the file sidebar\n */\nexport function registerFileSidebarAction() {\n    registerSidebarAction({\n        id: 'systemtags',\n        order: 20,\n        displayName() {\n            return t('systemtags', 'Add tags');\n        },\n        enabled() {\n            return true;\n        },\n        iconSvgInline() {\n            return tagSvg;\n        },\n        onClick({ node }) {\n            return spawnDialog(defineAsyncComponent(() => import('../components/SystemTagPicker.vue')), {\n                nodes: [node],\n            });\n        },\n    });\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { useHotKey } from '@nextcloud/vue/composables/useHotKey';\nimport { executeAction } from '../../../files/src/utils/actionUtils.ts';\nimport { action as manageTagAction } from '../files_actions/bulkSystemTagsAction.ts';\nimport logger from '../logger.ts';\n/**\n * This register the hotkeys for the Files app.\n * As much as possible, we try to have all the hotkeys in one place.\n * Please make sure to add tests for the hotkeys after adding a new one.\n */\nexport function registerHotkeys() {\n    // t opens the tag management dialog\n    useHotKey('t', () => executeAction(manageTagAction), {\n        stop: true,\n        prevent: true,\n    });\n    logger.debug('Hotkeys registered');\n}\n","import { showError, showSuccess } from '@nextcloud/dialogs';\nimport { NodeStatus } from '@nextcloud/files';\nimport { t } from '@nextcloud/l10n';\nimport Vue from 'vue';\nimport logger from '../logger.ts';\nimport { useActiveStore } from '../store/active.ts';\n/**\n * Execute an action on the current active node\n *\n * @param action The action to execute\n */\nexport async function executeAction(action) {\n    const activeStore = useActiveStore();\n    const currentFolder = activeStore.activeFolder;\n    const currentNode = activeStore.activeNode;\n    const currentView = activeStore.activeView;\n    if (!currentFolder || !currentNode || !currentView) {\n        logger.error('No active folder, node or view', { folder: currentFolder, node: currentNode, view: currentView });\n        return;\n    }\n    if (currentNode.status === NodeStatus.LOADING) {\n        logger.debug('Node is already loading', { node: currentNode });\n        return;\n    }\n    // @ts-expect-error _children is private\n    const contents = currentFolder?._children || [];\n    const context = {\n        nodes: [currentNode],\n        view: currentView,\n        folder: currentFolder,\n        contents,\n    };\n    if (!action.enabled(context)) {\n        logger.debug('Action is not not available for the current context', { action, node: currentNode, view: currentView });\n        return;\n    }\n    let displayName = action.id;\n    try {\n        displayName = action.displayName(context);\n    }\n    catch (error) {\n        logger.error('Error while getting action display name', { action, error });\n    }\n    try {\n        // Set the loading marker\n        Vue.set(currentNode, 'status', NodeStatus.LOADING);\n        activeStore.activeAction = action;\n        const success = await action.exec(context);\n        // If the action returns null, we stay silent\n        if (success === null || success === undefined) {\n            return;\n        }\n        if (success) {\n            showSuccess(t('files', '{displayName}: done', { displayName }));\n            return;\n        }\n        showError(t('files', '{displayName}: failed', { displayName }));\n    }\n    catch (error) {\n        logger.error('Error while executing action', { action, error });\n        showError(t('files', '{displayName}: failed', { displayName }));\n    }\n    finally {\n        // Reset the loading marker\n        Vue.set(currentNode, 'status', undefined);\n        activeStore.activeAction = undefined;\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Calculate the byte lengths for utf8 encoded strings.\n */\nfunction byteLength(str) {\n    if (!str) {\n        return 0;\n    }\n    str = str.toString();\n    var len = str.length;\n    for (var i = str.length; i--;) {\n        var code = str.charCodeAt(i);\n        if (0xdc00 <= code && code <= 0xdfff) {\n            i--;\n        }\n        if (0x7f < code && code <= 0x7ff) {\n            len++;\n        }\n        else if (0x7ff < code && code <= 0xffff) {\n            len += 2;\n        }\n    }\n    return len;\n}\nexports.byteLength = byteLength;\n//# sourceMappingURL=index.js.map","import Stream from \"stream\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nconst NOOP = () => { };\nexport function createReadStream(context, filePath, options = {}) {\n    const PassThroughStream = Stream.PassThrough;\n    const outStream = new PassThroughStream();\n    getFileStream(context, filePath, options)\n        .then(stream => {\n        stream.pipe(outStream);\n    })\n        .catch(err => {\n        outStream.emit(\"error\", err);\n    });\n    return outStream;\n}\nexport function createWriteStream(context, filePath, options = {}, callback = NOOP) {\n    const PassThroughStream = Stream.PassThrough;\n    const writeStream = new PassThroughStream();\n    const headers = {};\n    if (options.overwrite === false) {\n        headers[\"If-None-Match\"] = \"*\";\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data: writeStream,\n        maxRedirects: 0\n    }, context, options);\n    request(requestOptions, context)\n        .then(response => handleResponseCode(context, response))\n        .then(response => {\n        // Fire callback asynchronously to avoid errors\n        setTimeout(() => {\n            callback(response);\n        }, 0);\n    })\n        .catch(err => {\n        writeStream.emit(\"error\", err);\n    });\n    return writeStream;\n}\nasync function getFileStream(context, filePath, options = {}) {\n    const headers = {};\n    if (typeof options.range === \"object\" && typeof options.range.start === \"number\") {\n        let rangeHeader = `bytes=${options.range.start}-`;\n        if (typeof options.range.end === \"number\") {\n            rangeHeader = `${rangeHeader}${options.range.end}`;\n        }\n        headers.Range = rangeHeader;\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\",\n        headers\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    if (headers.Range && response.status !== 206) {\n        const responseError = new Error(`Invalid response code for partial request: ${response.status}`);\n        responseError.status = response.status;\n        throw responseError;\n    }\n    if (options.callback) {\n        setTimeout(() => {\n            options.callback(response);\n        }, 0);\n    }\n    // @ts-ignore\n    return response.body;\n}\n","const UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/u;\nconst SEPARATORS = /[_.\\- ]+/;\n\n// The |$ alternative allows matching at end-of-string, capturing empty string\n// This enables NUMBERS_AND_IDENTIFIER to match digits at string end (e.g., \"test123\")\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\n\nconst LEADING_SEPARATORS = new RegExp('^' + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, 'gu');\nconst NUMBERS_AND_IDENTIFIER = new RegExp(String.raw`\\d+` + IDENTIFIER.source, 'gu');\n\nconst preserveCamelCase = (string, toLowerCase, toUpperCase, preserveConsecutiveUppercase) => {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\tlet isLastLastCharPreserved = false;\n\n\tfor (let index = 0; index < string.length; index++) {\n\t\tconst character = string[index];\n\n\t\t// Was the character 3 positions back inserted as a separator?\n\t\t// Prevents excessive separators by checking if we recently inserted one\n\t\t// index - 3 accounts for: current character, inserted separator, previous character\n\t\t// Default true for early positions activates the preserveConsecutiveUppercase guard\n\t\tisLastLastCharPreserved = index > 2 ? string[index - 3] === '-' : true;\n\n\t\tif (isLastCharLower && UPPERCASE.test(character)) {\n\t\t\t// FooBar  Foo-Bar (insert separator before uppercase)\n\t\t\tstring = string.slice(0, index) + '-' + string.slice(index);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\tindex++;\n\t\t} else if (\n\t\t\tisLastCharUpper\n\t\t\t&& isLastLastCharUpper\n\t\t\t&& LOWERCASE.test(character)\n\t\t\t&& (!isLastLastCharPreserved || preserveConsecutiveUppercase)\n\t\t) {\n\t\t\t// FOOBar  FOO-Bar\n\t\t\tstring = string.slice(0, index - 1) + '-' + string.slice(index - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower\n\t\t\t\t= toLowerCase(character) === character\n\t\t\t\t\t&& toUpperCase(character) !== character;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper\n\t\t\t\t= toUpperCase(character) === character\n\t\t\t\t\t&& toLowerCase(character) !== character;\n\t\t}\n\t}\n\n\treturn string;\n};\n\nconst preserveConsecutiveUppercase = (input, toLowerCase) => input.replace(LEADING_CAPITAL, match => toLowerCase(match));\n\nconst processWithCasePreservation = (input, toLowerCase, preserveConsecutiveUppercase) => {\n\tlet result = '';\n\tlet previousWasNumber = false;\n\tlet previousWasUppercase = false;\n\n\t// Convert input to array for lookahead capability\n\tconst characters = [...input];\n\n\tfor (let index = 0; index < characters.length; index++) {\n\t\tconst character = characters[index];\n\t\tconst isUpperCase = UPPERCASE.test(character);\n\t\tconst nextCharIsUpperCase = index + 1 < characters.length && UPPERCASE.test(characters[index + 1]);\n\n\t\tif (previousWasNumber && /[\\p{Alpha}]/u.test(character)) {\n\t\t\t// Letter after number - preserve original case\n\t\t\tresult += character;\n\t\t\tpreviousWasNumber = false;\n\t\t\tpreviousWasUppercase = isUpperCase;\n\t\t} else if (preserveConsecutiveUppercase && isUpperCase && (previousWasUppercase || nextCharIsUpperCase)) {\n\t\t\t// Part of consecutive uppercase sequence when preserveConsecutiveUppercase is true - keep it\n\t\t\tresult += character;\n\t\t\tpreviousWasUppercase = true;\n\t\t} else if (/\\d/.test(character)) {\n\t\t\t// Number - keep as-is and track it\n\t\t\tresult += character;\n\t\t\tpreviousWasNumber = true;\n\t\t\tpreviousWasUppercase = false;\n\t\t} else if (SEPARATORS.test(character)) {\n\t\t\t// Separator - keep as-is and maintain previousWasNumber state\n\t\t\tresult += character;\n\t\t\tpreviousWasUppercase = false;\n\t\t} else {\n\t\t\t// Regular character - lowercase it\n\t\t\tresult += toLowerCase(character);\n\t\t\tpreviousWasNumber = false;\n\t\t\tpreviousWasUppercase = false;\n\t\t}\n\t}\n\n\treturn result;\n};\n\n/**\nCore post-processing:\n- Collapses separators and uppercases the following identifier character.\n- Optionally uppercases the identifier following a numeric sequence.\n\nTwo-pass strategy prevents conflicts:\n1. NUMBERS_AND_IDENTIFIER: handles digit-to-letter transitions\n2. SEPARATORS_AND_IDENTIFIER: handles separator-to-identifier transitions\n\nExample: \"b2b_registration\" with capitalizeAfterNumber: true\n- Pass 1: \"2b\" matches, next char is \"_\" (separator), so don't capitalize  \"b2b_registration\"\n- Pass 2: \"_r\" matches, replace with \"R\"  \"b2bRegistration\"\n*/\nconst postProcess = (input, toUpperCase, {capitalizeAfterNumber}) => {\n\tconst transformNumericIdentifier = capitalizeAfterNumber\n\t\t? (match, identifier, offset, string) => {\n\t\t\tconst nextCharacter = string.charAt(offset + match.length);\n\n\t\t\t// If the numeric+identifier run is immediately followed by a separator,\n\t\t\t// treat it as a continued token and do not force a new word.\n\t\t\tif (SEPARATORS.test(nextCharacter)) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\t// Only uppercase the identifier part (not the digits) for efficiency\n\t\t\treturn identifier ? match.slice(0, -identifier.length) + toUpperCase(identifier) : match;\n\t\t}\n\t\t// When false: numbers do not create a word boundary.\n\t\t: match => match;\n\n\treturn input\n\t\t.replaceAll(NUMBERS_AND_IDENTIFIER, transformNumericIdentifier)\n\t\t.replaceAll(\n\t\t\tSEPARATORS_AND_IDENTIFIER,\n\t\t\t(_, identifier) => toUpperCase(identifier),\n\t\t);\n};\n\nexport default function camelCase(input, options) {\n\tif (!(typeof input === 'string' || Array.isArray(input))) {\n\t\tthrow new TypeError('Expected the input to be `string | string[]`');\n\t}\n\n\toptions = {\n\t\tpascalCase: false,\n\t\tpreserveConsecutiveUppercase: false,\n\t\tcapitalizeAfterNumber: true,\n\t\t...options,\n\t};\n\n\tif (Array.isArray(input)) {\n\t\tinput = input\n\t\t\t.map(element => element.trim())\n\t\t\t.filter(element => element.length > 0)\n\t\t\t.join('-');\n\t} else {\n\t\tinput = input.trim();\n\t}\n\n\tif (input.length === 0) {\n\t\treturn '';\n\t}\n\n\t// Preserve leading _ and $ as they have semantic meaning\n\tconst leadingPrefix = input.match(/^[_$]*/)[0];\n\tinput = input.slice(leadingPrefix.length);\n\n\tif (input.length === 0) {\n\t\treturn leadingPrefix;\n\t}\n\n\tconst toLowerCase = options.locale === false\n\t\t? string => string.toLowerCase()\n\t\t: string => string.toLocaleLowerCase(options.locale);\n\n\tconst toUpperCase = options.locale === false\n\t\t? string => string.toUpperCase()\n\t\t: string => string.toLocaleUpperCase(options.locale);\n\n\tif (input.length === 1) {\n\t\tif (SEPARATORS.test(input)) {\n\t\t\treturn leadingPrefix;\n\t\t}\n\n\t\treturn leadingPrefix + (options.pascalCase\n\t\t\t? toUpperCase(input)\n\t\t\t: toLowerCase(input));\n\t}\n\n\tconst hasUpperCase = input !== toLowerCase(input);\n\n\tif (hasUpperCase) {\n\t\tinput = preserveCamelCase(\n\t\t\tinput,\n\t\t\ttoLowerCase,\n\t\t\ttoUpperCase,\n\t\t\toptions.preserveConsecutiveUppercase,\n\t\t);\n\t}\n\n\t// Strip leading separators eagerly so they do not affect word detection\n\tinput = input.replace(LEADING_SEPARATORS, '');\n\n\t// Normalize base casing while preserving intended consecutive uppers\n\tif (options.capitalizeAfterNumber) {\n\t\t// Standard behavior - lowercase everything (or preserve consecutive uppercase)\n\t\tinput = options.preserveConsecutiveUppercase\n\t\t\t? preserveConsecutiveUppercase(input, toLowerCase)\n\t\t\t: toLowerCase(input);\n\t} else {\n\t\t// Preserve case after numbers (processWithCasePreservation handles preserveConsecutiveUppercase internally)\n\t\tinput = processWithCasePreservation(input, toLowerCase, options.preserveConsecutiveUppercase);\n\t}\n\n\tif (options.pascalCase && input.length > 0) {\n\t\tinput = toUpperCase(input[0]) + input.slice(1);\n\t}\n\n\treturn leadingPrefix + postProcess(input, toUpperCase, options);\n}\n","import { Layerr } from \"layerr\";\nimport { byteLength } from \"byte-length\";\nimport { isArrayBuffer } from \"../compat/arrayBuffer.js\";\nimport { isBuffer } from \"../compat/buffer.js\";\nimport { ErrorCode } from \"../types.js\";\nexport function calculateDataLength(data) {\n    if (isArrayBuffer(data)) {\n        return data.byteLength;\n    }\n    else if (isBuffer(data)) {\n        return data.length;\n    }\n    else if (typeof data === \"string\") {\n        return byteLength(data);\n    }\n    throw new Layerr({\n        info: {\n            code: ErrorCode.DataTypeNoLength\n        }\n    }, \"Cannot calculate data length: Invalid type\");\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.files-list__system-tags{--min-size: 32px;display:none;justify-content:center;align-items:center;min-width:calc(var(--min-size)*2);max-width:300px}.files-list__system-tag{padding:5px 10px;border:1px solid;border-radius:var(--border-radius-pill);border-color:var(--color-border);color:var(--color-text-maxcontrast);height:var(--min-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:20px;text-align:center}.files-list__system-tag--more{overflow:visible;text-overflow:initial}.files-list__system-tag+.files-list__system-tag{margin-inline-start:5px}.files-list__system-tag[data-systemtag-color]{border-color:var(--systemtag-color);color:var(--systemtag-color);border-width:2px;line-height:18px}@media(min-width: 512px){.files-list__system-tags{display:flex}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/systemtags/src/css/fileEntryInlineSystemTags.scss\"],\"names\":[],\"mappings\":\"AAKA,yBACC,gBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iCAAA,CACA,eAAA,CAGD,wBACC,gBAAA,CACA,gBAAA,CACA,uCAAA,CACA,gCAAA,CACA,mCAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CACA,iBAAA,CAEA,8BACC,gBAAA,CACA,qBAAA,CAID,gDACC,uBAAA,CAID,8CACC,mCAAA,CACA,4BAAA,CACA,gBAAA,CACA,gBAAA,CAIF,yBACC,yBACC,YAAA,CAAA\",\"sourcesContent\":[\"/**\\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\\n * SPDX-License-Identifier: AGPL-3.0-or-later\\n */\\n\\n.files-list__system-tags {\\n\\t--min-size: 32px;\\n\\tdisplay: none;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tmin-width: calc(var(--min-size) * 2);\\n\\tmax-width: 300px;\\n}\\n\\n.files-list__system-tag {\\n\\tpadding: 5px 10px;\\n\\tborder: 1px solid;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tborder-color: var(--color-border);\\n\\tcolor: var(--color-text-maxcontrast);\\n\\theight: var(--min-size);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tline-height: 20px; // min-size - 2 * 5px padding - 2 * 1px border\\n\\ttext-align: center;\\n\\n\\t&--more {\\n\\t\\toverflow: visible;\\n\\t\\ttext-overflow: initial;\\n\\t}\\n\\n\\t// Proper spacing if multiple shown\\n\\t& + .files-list__system-tag {\\n\\t\\tmargin-inline-start: 5px;\\n\\t}\\n\\n\\t// With color\\n\\t&[data-systemtag-color] {\\n\\t\\tborder-color: var(--systemtag-color);\\n\\t\\tcolor: var(--systemtag-color);\\n\\t\\tborder-width: 2px;\\n\\t\\tline-height: 18px; // min-size - 2 * 5px padding - 2 * 2px border\\n\\t}\\n}\\n\\n@media (min-width: 512px) {\\n\\t.files-list__system-tags {\\n\\t\\tdisplay: flex;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import pathPosix from \"path-posix\";\nimport { joinURL, normaliseHREF } from \"../tools/url.js\";\nimport { encodePath, makePathAbsolute, normalisePath } from \"../tools/path.js\";\nimport { parseXML, prepareFileFromProps } from \"../tools/dav.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processGlobFilter, processResponsePayload } from \"../response.js\";\nexport async function getDirectoryContents(context, remotePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(remotePath), \"/\"),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: options.deep ? \"infinity\" : \"1\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    if (!responseData) {\n        throw new Error(\"Failed parsing directory contents: Empty response\");\n    }\n    const davResp = await parseXML(responseData);\n    const _remotePath = makePathAbsolute(remotePath);\n    const remoteBasePath = makePathAbsolute(context.remoteBasePath || context.remotePath);\n    let files = getDirectoryFiles(davResp, remoteBasePath, _remotePath, options.details, options.includeSelf);\n    if (options.glob) {\n        files = processGlobFilter(files, options.glob);\n    }\n    return processResponsePayload(response, files, options.details);\n}\nfunction getDirectoryFiles(result, serverremoteBasePath, requestPath, isDetailed = false, includeSelf = false) {\n    const serverBase = pathPosix.join(serverremoteBasePath, \"/\");\n    // Extract the response items (directory contents)\n    const { multistatus: { response: responseItems } } = result;\n    // Map all items to a consistent output structure (results)\n    const nodes = responseItems.map(item => {\n        // HREF is the file path (in full) - The href is already XML entities decoded (e.g. foo&amp;bar is reverted to foo&bar)\n        const href = normaliseHREF(item.href);\n        // Each item should contain a stat object\n        const { propstat: { prop: props } } = item;\n        // Process the true full filename (minus the base server path)\n        const filename = serverBase === \"/\"\n            ? decodeURIComponent(normalisePath(href))\n            : normalisePath(pathPosix.relative(decodeURIComponent(serverBase), decodeURIComponent(href)));\n        return prepareFileFromProps(props, filename, isDetailed);\n    });\n    // If specified, also return the current directory\n    if (includeSelf) {\n        return nodes;\n    }\n    // Else, filter out the item pointing to the current directory (not needed)\n    return nodes.filter(item => item.basename &&\n        (item.type === \"file\" || item.filename !== requestPath.replace(/\\/$/, \"\")));\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getRequestToken, onRequestTokenUpdate } from '@nextcloud/auth';\nimport { generateRemoteUrl } from '@nextcloud/router';\nimport { createClient } from 'webdav';\n// init webdav client\nconst rootUrl = generateRemoteUrl('dav');\nexport const davClient = createClient(rootUrl);\n// set CSRF token header\n/**\n *\n * @param token\n */\nfunction setHeaders(token) {\n    davClient.setHeaders({\n        // Add this so the server knows it is an request from the browser\n        'X-Requested-With': 'XMLHttpRequest',\n        // Inject user auth\n        requesttoken: token ?? '',\n    });\n}\n// refresh headers when request token changes\nonRequestTokenUpdate(setHeaders);\nsetHeaders(getRequestToken());\n","import { getStat } from \"./stat.js\";\nexport async function exists(context, remotePath, options = {}) {\n    try {\n        await getStat(context, remotePath, options);\n        return true;\n    }\n    catch (err) {\n        if (err.status === 404) {\n            return false;\n        }\n        throw err;\n    }\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function customRequest(context, remotePath, requestOptions) {\n    if (!requestOptions.url) {\n        requestOptions.url = joinURL(context.remoteURL, encodePath(remotePath));\n    }\n    const finalOptions = prepareRequestOptions(requestOptions, context, {});\n    const response = await request(finalOptions, context);\n    handleResponseCode(context, response);\n    return response;\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function moveFile(context, filename, destination, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"MOVE\",\n        headers: {\n            Destination: joinURL(context.remoteURL, encodePath(destination)),\n            /**\n             * From RFC4918 section 10.6: If the overwrite header is not included in a COPY or MOVE request,\n             * then the resource MUST treat the request as if it has an overwrite header of value \"T\".\n             *\n             * Meaning the overwrite header is always set to \"T\" EXCEPT the option is explicitly set to false.\n             */\n            Overwrite: options.overwrite === false ? \"F\" : \"T\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function deleteFile(context, filename, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"DELETE\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { parseSearch, parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nexport async function getSearch(context, searchArbiter, options = {}) {\n    const { details: isDetailed = false } = options;\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(searchArbiter)),\n        method: \"SEARCH\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            // Ensure a Content-Type header is set was this is required by e.g. sabre/dav\n            \"Content-Type\": context.headers[\"Content-Type\"] || \"application/xml; charset=utf-8\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseText = await response.text();\n    const responseData = await parseXML(responseText);\n    const results = parseSearch(responseData, searchArbiter, isDetailed);\n    return processResponsePayload(response, results, isDetailed);\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getLoggerBuilder } from '@nextcloud/logger';\nexport default getLoggerBuilder()\n    .setApp('systemtags')\n    .detectUser()\n    .build();\n","import { Layerr } from \"layerr\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { getDAVCompliance } from \"./getDAVCompliance.js\";\nimport { ErrorCode } from \"../types.js\";\nexport async function partialUpdateFileContents(context, filePath, start, end, data, options = {}) {\n    const compliance = await getDAVCompliance(context, filePath, options);\n    if (compliance.compliance.includes(\"sabredav-partialupdate\")) {\n        return await partialUpdateFileContentsSabredav(context, filePath, start, end, data, options);\n    }\n    if (compliance.server.includes(\"Apache\") &&\n        compliance.compliance.includes(\"<http://apache.org/dav/propset/fs/1>\")) {\n        return await partialUpdateFileContentsApache(context, filePath, start, end, data, options);\n    }\n    throw new Layerr({\n        info: {\n            code: ErrorCode.NotSupported\n        }\n    }, \"Not supported\");\n}\nasync function partialUpdateFileContentsSabredav(context, filePath, start, end, data, options = {}) {\n    if (start > end || start < 0) {\n        // Actually, SabreDAV support negative start value,\n        // Do not support here for compatibility with Apache-style way\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidUpdateRange\n            }\n        }, `Invalid update range ${start} for partial update`);\n    }\n    const headers = {\n        \"Content-Type\": \"application/x-sabredav-partialupdate\",\n        \"Content-Length\": `${end - start + 1}`,\n        \"X-Update-Range\": `bytes=${start}-${end}`\n    };\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PATCH\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\nasync function partialUpdateFileContentsApache(context, filePath, start, end, data, options = {}) {\n    if (start > end || start < 0) {\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidUpdateRange\n            }\n        }, `Invalid update range ${start} for partial update`);\n    }\n    const headers = {\n        \"Content-Type\": \"application/octet-stream\",\n        \"Content-Length\": `${end - start + 1}`,\n        \"Content-Range\": `bytes ${start}-${end}/*`\n    };\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { parseStat, parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nexport async function getStat(context, filename, options = {}) {\n    const { details: isDetailed = false } = options;\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: \"0\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const stat = parseStat(result, filename, isDetailed);\n    return processResponsePayload(response, stat, isDetailed);\n}\n","import { extractURLPath } from \"./tools/url.js\";\nimport { setupAuth } from \"./auth/index.js\";\nimport { copyFile } from \"./operations/copyFile.js\";\nimport { createDirectory } from \"./operations/createDirectory.js\";\nimport { createReadStream, createWriteStream } from \"./operations/createStream.js\";\nimport { customRequest } from \"./operations/customRequest.js\";\nimport { deleteFile } from \"./operations/deleteFile.js\";\nimport { exists } from \"./operations/exists.js\";\nimport { getDirectoryContents } from \"./operations/directoryContents.js\";\nimport { getFileContents, getFileDownloadLink } from \"./operations/getFileContents.js\";\nimport { lock, unlock } from \"./operations/lock.js\";\nimport { getQuota } from \"./operations/getQuota.js\";\nimport { getStat } from \"./operations/stat.js\";\nimport { getSearch } from \"./operations/search.js\";\nimport { moveFile } from \"./operations/moveFile.js\";\nimport { getFileUploadLink, putFileContents } from \"./operations/putFileContents.js\";\nimport { partialUpdateFileContents } from \"./operations/partialUpdateFileContents.js\";\nimport { getDAVCompliance } from \"./operations/getDAVCompliance.js\";\nimport { AuthType } from \"./types.js\";\nconst DEFAULT_CONTACT_HREF = \"https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md\";\nexport function createClient(remoteURL, options = {}) {\n    const { authType: authTypeRaw = null, remoteBasePath, contactHref = DEFAULT_CONTACT_HREF, ha1, headers = {}, httpAgent, httpsAgent, password, token, username, withCredentials } = options;\n    let authType = authTypeRaw;\n    if (!authType) {\n        authType = username || password ? AuthType.Password : AuthType.None;\n    }\n    const context = {\n        authType,\n        remoteBasePath,\n        contactHref,\n        ha1,\n        headers: Object.assign({}, headers),\n        httpAgent,\n        httpsAgent,\n        password,\n        remotePath: extractURLPath(remoteURL),\n        remoteURL,\n        token,\n        username,\n        withCredentials\n    };\n    setupAuth(context, username, password, token, ha1);\n    return {\n        copyFile: (filename, destination, options) => copyFile(context, filename, destination, options),\n        createDirectory: (path, options) => createDirectory(context, path, options),\n        createReadStream: (filename, options) => createReadStream(context, filename, options),\n        createWriteStream: (filename, options, callback) => createWriteStream(context, filename, options, callback),\n        customRequest: (path, requestOptions) => customRequest(context, path, requestOptions),\n        deleteFile: (filename, options) => deleteFile(context, filename, options),\n        exists: (path, options) => exists(context, path, options),\n        getDirectoryContents: (path, options) => getDirectoryContents(context, path, options),\n        getFileContents: (filename, options) => getFileContents(context, filename, options),\n        getFileDownloadLink: (filename) => getFileDownloadLink(context, filename),\n        getFileUploadLink: (filename) => getFileUploadLink(context, filename),\n        getHeaders: () => Object.assign({}, context.headers),\n        getQuota: (options) => getQuota(context, options),\n        lock: (path, options) => lock(context, path, options),\n        moveFile: (filename, destinationFilename, options) => moveFile(context, filename, destinationFilename, options),\n        putFileContents: (filename, data, options) => putFileContents(context, filename, data, options),\n        partialUpdateFileContents: (filePath, start, end, data, options) => partialUpdateFileContents(context, filePath, start, end, data, options),\n        getDAVCompliance: (path) => getDAVCompliance(context, path),\n        search: (path, options) => getSearch(context, path, options),\n        setHeaders: (headers) => {\n            context.headers = Object.assign({}, headers);\n        },\n        stat: (path, options) => getStat(context, path, options),\n        unlock: (path, token, options) => unlock(context, path, token, options)\n    };\n}\n","import URL from \"url-parse\";\nimport { Layerr } from \"layerr\";\nimport _joinURL from \"url-join\";\nimport { normalisePath } from \"./path.js\";\nexport function extractURLPath(fullURL) {\n    const url = new URL(fullURL);\n    let urlPath = url.pathname;\n    if (urlPath.length <= 0) {\n        urlPath = \"/\";\n    }\n    return normalisePath(urlPath);\n}\nexport function joinURL(...parts) {\n    return _joinURL(parts.reduce((output, nextPart, partIndex) => {\n        if (partIndex === 0 ||\n            nextPart !== \"/\" ||\n            (nextPart === \"/\" && output[output.length - 1] !== \"/\")) {\n            output.push(nextPart);\n        }\n        return output;\n    }, []));\n}\nexport function normaliseHREF(href) {\n    try {\n        const normalisedHref = href.replace(/^https?:\\/\\/[^\\/]+/, \"\");\n        return normalisedHref;\n    }\n    catch (err) {\n        throw new Layerr(err, \"Failed normalising HREF\");\n    }\n}\n","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","import { prepareRequestOptions, request } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nimport { parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { parseQuota } from \"../tools/quota.js\";\nexport async function getQuota(context, options = {}) {\n    const path = options.path || \"/\";\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, path),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: \"0\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const quota = parseQuota(result);\n    return processResponsePayload(response, quota, options.details);\n}\n","import { Agent as HTTPAgent } from \"http\";\nimport { Agent as HTTPSAgent } from \"https\";\nimport { fetch } from \"@buttercup/fetch\";\nimport { getPatcher } from \"./compat/patcher.js\";\nimport { isReactNative, isWeb } from \"./compat/env.js\";\nimport { generateDigestAuthHeader, parseDigestAuth, responseIndicatesDigestAuth } from \"./auth/digest.js\";\nimport { cloneShallow, merge } from \"./tools/merge.js\";\nimport { mergeHeaders } from \"./tools/headers.js\";\nimport { requestDataToFetchBody } from \"./tools/body.js\";\nimport { AuthType } from \"./types.js\";\nimport { setupAuth } from \"./auth/index.js\";\nfunction getFetchOptions(requestOptions) {\n    let headers = {};\n    // Handle standard options\n    const opts = {\n        method: requestOptions.method\n    };\n    if (requestOptions.headers) {\n        headers = mergeHeaders(headers, requestOptions.headers);\n    }\n    if (typeof requestOptions.data !== \"undefined\") {\n        const [body, newHeaders] = requestDataToFetchBody(requestOptions.data);\n        opts.body = body;\n        headers = mergeHeaders(headers, newHeaders);\n    }\n    if (requestOptions.signal) {\n        opts.signal = requestOptions.signal;\n    }\n    if (requestOptions.withCredentials) {\n        opts.credentials = \"include\";\n    }\n    // Check for node-specific options\n    if (!isWeb() && !isReactNative()) {\n        if (requestOptions.httpAgent || requestOptions.httpsAgent) {\n            opts.agent = (parsedURL) => {\n                if (parsedURL.protocol === \"http:\") {\n                    return requestOptions.httpAgent || new HTTPAgent();\n                }\n                return requestOptions.httpsAgent || new HTTPSAgent();\n            };\n        }\n    }\n    // Attach headers\n    opts.headers = headers;\n    return opts;\n}\nexport function prepareRequestOptions(requestOptions, context, userOptions) {\n    const finalOptions = cloneShallow(requestOptions);\n    finalOptions.headers = mergeHeaders(context.headers, finalOptions.headers || {}, userOptions.headers || {});\n    if (typeof userOptions.data !== \"undefined\") {\n        finalOptions.data = userOptions.data;\n    }\n    if (userOptions.signal) {\n        finalOptions.signal = userOptions.signal;\n    }\n    if (context.httpAgent) {\n        finalOptions.httpAgent = context.httpAgent;\n    }\n    if (context.httpsAgent) {\n        finalOptions.httpsAgent = context.httpsAgent;\n    }\n    if (context.digest) {\n        finalOptions._digest = context.digest;\n    }\n    if (typeof context.withCredentials === \"boolean\") {\n        finalOptions.withCredentials = context.withCredentials;\n    }\n    return finalOptions;\n}\nexport async function request(requestOptions, context) {\n    if (context.authType === AuthType.Auto) {\n        return requestAuto(requestOptions, context);\n    }\n    if (requestOptions._digest) {\n        return requestDigest(requestOptions);\n    }\n    return requestStandard(requestOptions);\n}\nasync function requestAuto(requestOptions, context) {\n    const response = await requestStandard(requestOptions);\n    if (response.ok) {\n        context.authType = AuthType.Password;\n        return response;\n    }\n    if (response.status == 401 && responseIndicatesDigestAuth(response)) {\n        context.authType = AuthType.Digest;\n        setupAuth(context, context.username, context.password, undefined, undefined);\n        requestOptions._digest = context.digest;\n        return requestDigest(requestOptions);\n    }\n    return response;\n}\nasync function requestDigest(requestOptions) {\n    // Remove client's digest authentication object from request options\n    const _digest = requestOptions._digest;\n    delete requestOptions._digest;\n    // If client is already using digest authentication, include the digest authorization header\n    if (_digest.hasDigestAuth) {\n        requestOptions = merge(requestOptions, {\n            headers: {\n                Authorization: generateDigestAuthHeader(requestOptions, _digest)\n            }\n        });\n    }\n    // Perform digest request + check\n    const response = await requestStandard(requestOptions);\n    if (response.status == 401) {\n        _digest.hasDigestAuth = parseDigestAuth(response, _digest);\n        if (_digest.hasDigestAuth) {\n            requestOptions = merge(requestOptions, {\n                headers: {\n                    Authorization: generateDigestAuthHeader(requestOptions, _digest)\n                }\n            });\n            const response2 = await requestStandard(requestOptions);\n            if (response2.status == 401) {\n                _digest.hasDigestAuth = false;\n            }\n            else {\n                _digest.nc++;\n            }\n            return response2;\n        }\n    }\n    else {\n        _digest.nc++;\n    }\n    return response;\n}\nfunction requestStandard(requestOptions) {\n    const patcher = getPatcher();\n    return patcher.patchInline(\"request\", (options) => patcher.patchInline(\"fetch\", fetch, options.url, getFetchOptions(options)), requestOptions);\n}\n","import md5 from \"md5\";\nimport { ha1Compute } from \"../tools/crypto.js\";\nconst NONCE_CHARS = \"abcdef0123456789\";\nconst NONCE_SIZE = 32;\nexport function createDigestContext(username, password, ha1) {\n    return { username, password, ha1, nc: 0, algorithm: \"md5\", hasDigestAuth: false };\n}\nexport function generateDigestAuthHeader(options, digest) {\n    const url = options.url.replace(\"//\", \"\");\n    const uri = url.indexOf(\"/\") == -1 ? \"/\" : url.slice(url.indexOf(\"/\"));\n    const method = options.method ? options.method.toUpperCase() : \"GET\";\n    const qop = /(^|,)\\s*auth\\s*($|,)/.test(digest.qop) ? \"auth\" : false;\n    const ncString = `00000000${digest.nc}`.slice(-8);\n    const ha1 = ha1Compute(digest.algorithm, digest.username, digest.realm, digest.password, digest.nonce, digest.cnonce, digest.ha1);\n    const ha2 = md5(`${method}:${uri}`);\n    const digestResponse = qop\n        ? md5(`${ha1}:${digest.nonce}:${ncString}:${digest.cnonce}:${qop}:${ha2}`)\n        : md5(`${ha1}:${digest.nonce}:${ha2}`);\n    const authValues = {\n        username: digest.username,\n        realm: digest.realm,\n        nonce: digest.nonce,\n        uri,\n        qop,\n        response: digestResponse,\n        nc: ncString,\n        cnonce: digest.cnonce,\n        algorithm: digest.algorithm,\n        opaque: digest.opaque\n    };\n    const authHeader = [];\n    for (const k in authValues) {\n        if (authValues[k]) {\n            if (k === \"qop\" || k === \"nc\" || k === \"algorithm\") {\n                authHeader.push(`${k}=${authValues[k]}`);\n            }\n            else {\n                authHeader.push(`${k}=\"${authValues[k]}\"`);\n            }\n        }\n    }\n    return `Digest ${authHeader.join(\", \")}`;\n}\nfunction makeNonce() {\n    let uid = \"\";\n    for (let i = 0; i < NONCE_SIZE; ++i) {\n        uid = `${uid}${NONCE_CHARS[Math.floor(Math.random() * NONCE_CHARS.length)]}`;\n    }\n    return uid;\n}\nexport function parseDigestAuth(response, _digest) {\n    const isDigest = responseIndicatesDigestAuth(response);\n    if (!isDigest) {\n        return false;\n    }\n    const re = /([a-z0-9_-]+)=(?:\"([^\"]+)\"|([a-z0-9_-]+))/gi;\n    for (;;) {\n        const authHeader = (response.headers && response.headers.get(\"www-authenticate\")) || \"\";\n        const match = re.exec(authHeader);\n        if (!match) {\n            break;\n        }\n        _digest[match[1]] = match[2] || match[3];\n    }\n    _digest.nc += 1;\n    _digest.cnonce = makeNonce();\n    return true;\n}\nexport function responseIndicatesDigestAuth(response) {\n    const authHeader = (response.headers && response.headers.get(\"www-authenticate\")) || \"\";\n    return authHeader.split(/\\s/)[0].toLowerCase() === \"digest\";\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"594\":\"f5af3d132040859cb666\",\"620\":\"e5d77a046303aedd05c5\",\"2391\":\"6d29c12fea2fbb265756\",\"2605\":\"6990f57475c4c6a756d6\",\"2880\":\"803b63f847e6d68bcf0d\",\"4325\":\"b597fcd1212503c968df\",\"5862\":\"580b9c2e231a9169a12f\",\"7145\":\"1f907ab7a1c83e8a6617\",\"8339\":\"b2246be0f4c885a9d524\"}[chunkId] + \"\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 2766;","var scriptUrl;\nif (globalThis.importScripts) scriptUrl = globalThis.location + \"\";\nvar document = globalThis.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t2766: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunknextcloud_ui_legacy\"] = globalThis[\"webpackChunknextcloud_ui_legacy\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4208], () => (__webpack_require__(63066)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","parseQuota","result","responseItem","multistatus","response","propstat","prop","quotaUsed","quotaAvail","used","parseInt","String","available","err","async","getDAVCompliance","context","filePath","options","requestOptions","url","remoteURL","method","compliance","headers","get","split","map","item","trim","server","http","https","module","exports","key","hasOwnProperty","validateParams","params","parse","protocol","Error","request","cb","call","this","ClientRequest","extend","statusCodes","opts","defaultProtocol","location","search","host","hostname","port","path","indexOf","toUpperCase","req","on","end","IncomingMessage","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","Layerr","constructor","errorOptionsOrMessage","messageText","args","arguments","shortMessage","message","cause","super","name","Object","defineProperty","value","info","assign","_info","captureStackTrace","ctor","constructorOpt","_cause","fullStack","stack","output","toString","prototype","TRANSFORM_RETAIN_FORMAT","v","getFileContents","format","code","InvalidOutputFormat","Accept","transformResponse","body","text","details","getFileContentsString","arrayBuffer","Buffer","from","getFileContentsBuffer","getFileDownloadLink","test","authType","None","Password","authPart","Authorization","replace","authContents","LinkUnsupportedAuthType","generateBasicAuthHeader","username","password","colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","freeze","reverseNames","create","hasOwn","cs","to","clamp","number_","min","max","Math","hexDouble","string_","round","length","string","model","slice","toLowerCase","hsl","hwb","rgb","match","i","hexAlpha","i2","Number","parseFloat","alpha","isNaN","hex","rgba","percent","r","g","b","hsla","hwba","a","keyword","reverseKeywords","keys","convert","channels","labels","hsv","cmyk","xyz","lab","oklab","lch","oklch","ansi16","ansi256","hcg","apple","LAB_FT","srgbNonlinearTransform","c","cc","srgbNonlinearTransformInv","comparativeDistance","x","y","wrapConversion","toModel","graph","parent","fn","conversions","cur","unshift","conversion","delta","h","s","l","rdif","gdif","bdif","diff","diffc","w","lp","cbrt","mp","sp","k","reversed","currentClosestKeyword","currentClosestDistance","POSITIVE_INFINITY","distance","z","t3","t2","t1","smin","lmin","hi","floor","f","p","q","t","vmin","sl","wh","bl","ratio","n","m","ll","aa","bb","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","saturation","ansi","color","mult","trunc","rem","colorString","char","join","integer","chroma","hue","pure","mg","fromModel","models","buildGraph","queue","current","pop","adjacents","adjacent","node","deriveBFS","wrapRaw","wrappedFn","arg0","wrapRounded","routes","routeModels","raw","skippedModels","hashedModelKeys","sort","limiters","object","valpha","newArray","Array","zeroArray","splice","hashedKeys","JSON","stringify","push","limit","toJSON","places","self","arguments_","percentString","array","unitArray","unitObject","roundToPlace","undefined","getset","maxfn","saturationl","lightness","saturationv","wblack","hexa","rgbArray","alphaHex","rgbNumber","luminosity","lum","element","entries","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","darken","saturate","desaturate","whiten","blacken","grayscale","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","includes","isArray","number","toFixed","roundTo","channel","modifier","isDarkModeEnabled","darkModePreference","window","matchMedia","matches","darkModeSetting","document","getAttribute","invertTextColor","colorContrast","elementColor","backgroundColor","brightBackground","calculateLuma","isBrightColor","blurredBackground","Color","minContrast","highContrastPreference","highContrastSetting","isHighContrastModeEnabled","iteration","epsilon","hexToHSL","hslToHex","hexToRGB","pow","luminance1","luminance2","generateLockXML","ownerHREF","XMLBuilder","attributeNamePrefix","ignoreAttributes","suppressEmptyNode","build","namespace","lockinfo","lockscope","exclusive","locktype","write","owner","href","obj","ns","copy","parseGenericResponse","xml","XMLParser","removeNSPrefix","parseAttributeValue","parseTagValue","createDirectory","dirPath","recursive","paths","creating","testPath","type","status","createDirectoryRecursively","endsWith","fetchTagsPayload","fetchTags","data","tags","davClient","getDirectoryContents","glob","parseTags","error","logger","fetchTag","tagId","tag","stat","createTag","tagToPost","formatTag","customRequest","contentLocation","emit","parseIdFromLocation","updateTag","id","displayName","userVisible","userAssignable","getTagObjects","etag","props","getetag","objects","values","flat","setTagObjects","objectIds","putFileContents","contentLength","overwrite","Readable","getFileUploadLink","setupAuth","oauthToken","ha1","Auto","Digest","digest","Token","InvalidAuthType","requestDataToFetchBody","DEFAULT_TIMEOUT","lock","refreshToken","timeout","Timeout","If","contactHref","responseData","lockPayload","token","serverTimeout","unlock","hasArrayBuffer","ArrayBuffer","objToString","isArrayBuffer","copyFile","filename","destination","Destination","Overwrite","Depth","shallow","fromEntries","camelCase","queryPos","substring","parts","initialTag","getNodeSystemTags","attribute","attributes","setNodeSystemTags","Vue","fromBase64","toBase64","required","qs","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","str","rules","address","isSpecial","NaN","ignore","hash","query","lolcation","loc","finaldestination","Url","unescape","pathname","scheme","extractProtocol","rest","exec","forwardSlashes","otherSlashes","slashesCount","parser","relative","extracted","instruction","index","instructions","lastIndexOf","charAt","base","concat","last","up","resolve","auth","encodeURIComponent","decodeURIComponent","origin","set","part","ins","DefaultType","DefaultType2","FileAction","_action","action","validateAction","title","iconSvgInline","enabled","execBatch","hotkey","order","default","destructive","inline","renderInline","description","registerFileAction","_nc_fileactions","debug","find","debug_1","hasRequiredDebug","constants","hasRequiredConstants","requireDebug","process","env","NODE_DEBUG","console","requireConstants","MAX_SAFE_INTEGER","MAX_LENGTH","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","RELEASE_TYPES","SEMVER_SPEC_VERSION","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","hasRequiredRe","parseOptions_1","hasRequiredParseOptions","identifiers","hasRequiredIdentifiers","semver","hasRequiredSemver","major_1","hasRequiredMajor","parse_1","hasRequiredParse","valid_1","hasRequiredValid","re","requireSemver","safeRe","re2","src","safeSrc","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","makeSafeRegex","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","parseOptions","looseOption","loose","emptyOpts","requireParseOptions","compareIdentifiers","numeric","a2","b2","anum","bnum","rcompareIdentifiers","requireIdentifiers","SemVer","version","includePrerelease","TypeError","LOOSE","FULL","major","minor","patch","prerelease","num","compare","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","startsWith","checkOptionalProperty","property","validateColumn","column","render","requireMajor","throwErrors","er","requireParse","requireValid","validateView","view","icon","getContents","columns","forEach","reduce","add","Set","size","Navigation","_views","_currentView","register","dispatchTypedEvent","CustomEvent","remove","findIndex","setActive","viewId","event","detail","active","views","getNavigation","_nc_navigation","defaultDavProperties","defaultDavNamespaces","d","nc","oc","ocs","getRootPath","uid","defaultRootPath","getRemoteURL","defaultRemoteURL","nodes","Promise","spawnDialog","defineAsyncComponent","fill","TagMultipleSvg","isPublicShare","some","isDavResource","permissions","Permission","UPDATE","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","cache","renderTag","isMore","tagElement","createElement","classList","setAttribute","textContent","cachedTag","mainBackgroundColor","getComputedStyle","getPropertyValue","primaryElement","style","setProperty","systemTagsElement","fileid","append","moreTagElement","subscribe","then","systemTagsHtml","querySelectorAll","replaceWith","updateSystemTagsColorAttribute","rootPath","client","setHeaders","requesttoken","headers2","fetch","getClient","formatReportPayload","_nc_dav_namespaces","_nc_dav_properties","tagToNode","Folder","source","getCurrentUser","root","displayname","READ","systemTagsViewId","FileType","dir","dirname","OCP","Files","Router","goToRoute","openfile","HIDDEN","getLoggerBuilder","setApp","detectUser","useActiveStore","defineStore","activeAction","ref","activeFolder","activeNode","activeView","onDeletedNode","onChangedView","navigation","addEventListener","initialize","namespaces","warn","registerDavProperty","bulkSystemTagsAction","inlineSystemTagsAction","openInFilesAction","_view","caption","emptyTitle","emptyCaption","hidden","emptyView","sticky","expanded","defaultSortKey","loadChildViews","svgTagMultiple","tagsCache","filter","folder","NONE","contents","filesRoot","userId","permString","P","CREATE","DELETE","SHARE","parsePermissions","mtime","Date","lastmod","crtime","creationdate","nodeData","getTime","mime","getcontentlength","FAILED","hasPreview","resultToNode","CSS","escape","onClick","validateSidebarAction","_nc_files_sidebar_actions","Map","has","registerSidebarAction","useHotKey","activeStore","currentFolder","currentNode","currentView","NodeStatus","LOADING","_children","success","showSuccess","showError","executeAction","manageTagAction","stop","prevent","len","charCodeAt","NOOP","createReadStream","outStream","PassThroughStream","range","start","rangeHeader","Range","responseError","callback","setTimeout","getFileStream","stream","pipe","catch","createWriteStream","writeStream","maxRedirects","UPPERCASE","LOWERCASE","LEADING_CAPITAL","SEPARATORS","IDENTIFIER","LEADING_SEPARATORS","SEPARATORS_AND_IDENTIFIER","NUMBERS_AND_IDENTIFIER","input","pascalCase","preserveConsecutiveUppercase","capitalizeAfterNumber","leadingPrefix","locale","toLocaleLowerCase","toLocaleUpperCase","isLastCharLower","isLastCharUpper","isLastLastCharUpper","isLastLastCharPreserved","character","preserveCamelCase","previousWasNumber","previousWasUppercase","characters","isUpperCase","nextCharIsUpperCase","processWithCasePreservation","transformNumericIdentifier","offset","nextCharacter","replaceAll","_","postProcess","calculateDataLength","byteLength","DataTypeNoLength","___CSS_LOADER_EXPORT___","remotePath","deep","davResp","_remotePath","files","serverremoteBasePath","requestPath","isDetailed","includeSelf","serverBase","responseItems","basename","getDirectoryFiles","remoteBasePath","rootUrl","generateRemoteUrl","createClient","onRequestTokenUpdate","getRequestToken","exists","finalOptions","moveFile","deleteFile","getSearch","searchArbiter","responseText","results","partialUpdateFileContents","InvalidUpdateRange","partialUpdateFileContentsSabredav","partialUpdateFileContentsApache","NotSupported","getStat","DEFAULT_CONTACT_HREF","authTypeRaw","httpAgent","httpsAgent","withCredentials","getHeaders","getQuota","destinationFilename","extractURLPath","fullURL","urlPath","joinURL","nextPart","partIndex","normaliseHREF","freeGlobal","global","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","base64","buffer","padding","position","bitStorage","bitCounter","fromCharCode","quota","prepareRequestOptions","userOptions","signal","_digest","requestStandard","ok","requestDigest","requestAuto","hasDigestAuth","response2","patcher","patchInline","newHeaders","credentials","agent","parsedURL","getFetchOptions","createDigestContext","algorithm","generateDigestAuthHeader","uri","qop","ncString","realm","nonce","cnonce","ha2","digestResponse","authValues","opaque","authHeader","parseDigestAuth","responseIndicatesDigestAuth","NONCE_CHARS","random","makeNonce","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","getter","__esModule","definition","o","enumerable","e","chunkId","all","promises","u","done","script","needAttach","scripts","getElementsByTagName","charset","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","target","head","appendChild","Symbol","toStringTag","nmd","children","scriptUrl","globalThis","importScripts","currentScript","tagName","baseURI","installedChunks","installedChunkData","promise","reject","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}