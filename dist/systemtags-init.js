(()=>{var e,t,r,n={8828(e,t,r){"use strict";r.d(t,{R:()=>a});var n=r(21777),i=r(63814),o=r(60669);const s=(0,i.dC)("dav"),a=(0,o.UU)(s);function l(e){a.setHeaders({"X-Requested-With":"XMLHttpRequest",requesttoken:e??""})}(0,n.zo)(l),l((0,n.do)())},12686(e,t,r){"use strict";r.d(t,{GX:()=>s,Pq:()=>c,_3:()=>a,rA:()=>l,rL:()=>o});var n=r(71654),i=r(85471);function o(e){return e.map(({props:e})=>Object.fromEntries(Object.entries(e).map(([e,t])=>[(0,n.A)(e),"displayName"===(0,n.A)(e)?String(t):t])))}function s(e){const t=e.indexOf("?");t>0&&(e=e.substring(0,t));const r=e.split("/");let n;do{n=r[r.length-1],r.pop()}while(!n&&r.length>0);return Number(n)}function a(e){if("name"in e&&!("displayName"in e))return{...e};const t={...e};return t.name=t.displayName,delete t.displayName,t}function l(e){const t=e.attributes?.["system-tags"]?.["system-tag"];return void 0===t?[]:[t].flat().map(e=>"string"==typeof e?e:e.text)}function c(e,t){i.Ay.set(e.attributes,"system-tags",{"system-tag":t})}},15340(){},15673(e,t,r){"use strict";var n=r(44013),i=r(380),o=r(20005),s=r(53334),a=r(65606),l=(e=>(e.DEFAULT="default",e.HIDDEN="hidden",e))(l||{});class c{_action;constructor(e){this.validateAction(e),this._action=e}get id(){return this._action.id}get displayName(){return this._action.displayName}get title(){return this._action.title}get iconSvgInline(){return this._action.iconSvgInline}get enabled(){return this._action.enabled}get exec(){return this._action.exec}get execBatch(){return this._action.execBatch}get hotkey(){return this._action.hotkey}get order(){return this._action.order}get parent(){return this._action.parent}get default(){return this._action.default}get destructive(){return this._action.destructive}get inline(){return this._action.inline}get renderInline(){return this._action.renderInline}validateAction(e){if(!e.id||"string"!=typeof e.id)throw new Error("Invalid id");if(!e.displayName||"function"!=typeof e.displayName)throw new Error("Invalid displayName function");if("title"in e&&"function"!=typeof e.title)throw new Error("Invalid title function");if(!e.iconSvgInline||"function"!=typeof e.iconSvgInline)throw new Error("Invalid iconSvgInline function");if(!e.exec||"function"!=typeof e.exec)throw new Error("Invalid exec function");if("enabled"in e&&"function"!=typeof e.enabled)throw new Error("Invalid enabled function");if("execBatch"in e&&"function"!=typeof e.execBatch)throw new Error("Invalid execBatch function");if("order"in e&&"number"!=typeof e.order)throw new Error("Invalid order");if(void 0!==e.destructive&&"boolean"!=typeof e.destructive)throw new Error("Invalid destructive flag");if("parent"in e&&"string"!=typeof e.parent)throw new Error("Invalid parent");if(e.default&&!Object.values(l).includes(e.default))throw new Error("Invalid default");if("inline"in e&&"function"!=typeof e.inline)throw new Error("Invalid inline function");if("renderInline"in e&&"function"!=typeof e.renderInline)throw new Error("Invalid renderInline function");if("hotkey"in e&&void 0!==e.hotkey){if("object"!=typeof e.hotkey)throw new Error("Invalid hotkey configuration");if("string"!=typeof e.hotkey.key||!e.hotkey.key)throw new Error("Missing or invalid hotkey key");if("string"!=typeof e.hotkey.description||!e.hotkey.description)throw new Error("Missing or invalid hotkey description")}}}const d=function(e){void 0===window._nc_fileactions&&(window._nc_fileactions=[],n.l.debug("FileActions initialized")),window._nc_fileactions.find(t=>t.id===e.id)?n.l.error(`FileAction ${e.id} already registered`,{action:e}):window._nc_fileactions.push(e)};var u,h,p,f;function g(){if(h)return u;h=1;const e="object"==typeof a&&a.env&&a.env.NODE_DEBUG&&/\bsemver\b/i.test(a.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return u=e}function m(){if(f)return p;f=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return p={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}var b,y,w,v,E,A,I,N,k,R,L,_,O,x={exports:{}};function C(){if(I)return A;I=1;const e=g(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=m(),{safeRe:n,t:i}=(b||(b=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=m(),o=g(),s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],d=t.t={};let u=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[h,n]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=u++;o(e,i,t),d[e]=i,l[i]=t,c[i]=n,s[i]=new RegExp(t,r?"g":void 0),a[i]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),f("FULL",`^${l[d.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),f("LOOSE",`^${l[d.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),f("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",l[d.COERCE],!0),f("COERCERTLFULL",l[d.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(x,x.exports)),x.exports),o=function(){if(w)return y;w=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return y=r=>r?"object"!=typeof r?e:r:t,y}(),{compareIdentifiers:s}=function(){if(E)return v;E=1;const e=/^[0-9]+$/,t=(t,r)=>{if("number"==typeof t&&"number"==typeof r)return t===r?0:t<r?-1:1;const n=e.test(t),i=e.test(r);return n&&i&&(t=+t,r=+r),t===r?0:n&&!i?-1:i&&!n?1:t<r?-1:1};return v={compareIdentifiers:t,rcompareIdentifiers:(e,r)=>t(r,e)}}();class a{constructor(s,l){if(l=o(l),s instanceof a){if(s.loose===!!l.loose&&s.includePrerelease===!!l.includePrerelease)return s;s=s.version}else if("string"!=typeof s)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",s,l),this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease;const c=s.trim().match(l.loose?n[i.LOOSE]:n[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof a)){if("string"==typeof t&&t===this.version)return 0;t=new a(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof a||(e=new a(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(t){if(t instanceof a||(t=new a(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(e("prerelease compare",r,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return s(n,i)}while(++r)}compareBuild(t){t instanceof a||(t=new a(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(e("build compare",r,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return s(n,i)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===s(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return A=a}function $(e,t,r){if(void 0!==e[t])if("array"===r){if(!Array.isArray(e[t]))throw new Error(`View ${t} must be an array`)}else{if(typeof e[t]!==r)throw new Error(`View ${t} must be a ${r}`);if("object"===r&&(null===e[t]||Array.isArray(e[t])))throw new Error(`View ${t} must be an object`)}}function M(e){if("object"!=typeof e||null===e)throw new Error("View column must be an object");if(!e.id||"string"!=typeof e.id)throw new Error("A column id is required");if(!e.title||"string"!=typeof e.title)throw new Error("A column title is required");if(!e.render||"function"!=typeof e.render)throw new Error("A render function is required");$(e,"sort","function"),$(e,"summary","function")}!function(){if(k)return N;k=1;const e=C();N=(t,r)=>new e(t,r).major}(),function(){if(O)return _;O=1;const e=function(){if(L)return R;L=1;const e=C();return R=(t,r,n=!1)=>{if(t instanceof e)return t;try{return new e(t,r)}catch(e){if(!n)return null;throw e}},R}();_=(t,r)=>{const n=e(t,r);return n?n.version:null}}(),i.m;function T(e){if(!e.icon||"string"!=typeof e.icon||!(0,o.A)(e.icon))throw new Error("View icon is required and must be a valid svg string");if(!e.id||"string"!=typeof e.id)throw new Error("View id is required and must be a string");if(!e.getContents||"function"!=typeof e.getContents)throw new Error("View getContents is required and must be a function");if(!e.name||"string"!=typeof e.name)throw new Error("View name is required and must be a string");if($(e,"caption","string"),$(e,"columns","array"),$(e,"defaultSortKey","string"),$(e,"emptyCaption","string"),$(e,"emptyTitle","string"),$(e,"emptyView","function"),$(e,"expanded","boolean"),$(e,"hidden","boolean"),$(e,"loadChildViews","function"),$(e,"order","number"),$(e,"params","object"),$(e,"parent","string"),$(e,"sticky","boolean"),e.columns&&(e.columns.forEach(M),e.columns.reduce((e,t)=>e.add(t.id),new Set).size!==e.columns.length))throw new Error("View columns must have unique ids")}class S extends i.m{_views=[];_currentView=null;register(e){if(this._views.find(t=>t.id===e.id))throw new Error(`IView id ${e.id} is already registered`);T(e),this._views.push(e),this.dispatchTypedEvent("update",new CustomEvent("update"))}remove(e){const t=this._views.findIndex(t=>t.id===e);-1!==t&&(this._views.splice(t,1),this.dispatchTypedEvent("update",new CustomEvent("update")))}setActive(e){if(null===e)this._currentView=null;else{const t=this._views.find(({id:t})=>t===e);if(!t)throw new Error(`No view with ${e} registered`);this._currentView=t}const t=new CustomEvent("updateActive",{detail:this._currentView});this.dispatchTypedEvent("updateActive",t)}get active(){return this._currentView}get views(){return this._views}}const P=function(){return void 0===window._nc_navigation&&(window._nc_navigation=new S,n.l.debug("Navigation service initialized")),window._nc_navigation};Error;var j=r(21777),D=r(32505),F=r(63814),G=r(44719);const U=["d:getcontentlength","d:getcontenttype","d:getetag","d:getlastmodified","d:creationdate","d:displayname","d:quota-available-bytes","d:resourcetype","nc:has-preview","nc:is-encrypted","nc:mount-type","oc:comments-unread","oc:favorite","oc:fileid","oc:owner-display-name","oc:owner-id","oc:permissions","oc:size"],B={d:"DAV:",nc:"http://nextcloud.org/ns",oc:"http://owncloud.org/ns",ocs:"http://open-collaboration-services.org/ns"};function V(){return(0,D.f)()?`/files/${(0,D.G)()}`:`/files/${(0,j.HW)()?.uid}`}const q=V();function X(){const e=(0,F.dC)("dav");return(0,D.f)()?e.replace("remote.php","public.php"):e}const z=X(),H='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-tag-multiple-outline" viewBox="0 0 24 24"><path d="M6.5 10C7.3 10 8 9.3 8 8.5S7.3 7 6.5 7 5 7.7 5 8.5 5.7 10 6.5 10M9 6L16 13L11 18L4 11V6H9M9 4H4C2.9 4 2 4.9 2 6V11C2 11.6 2.2 12.1 2.6 12.4L9.6 19.4C9.9 19.8 10.4 20 11 20S12.1 19.8 12.4 19.4L17.4 14.4C17.8 14 18 13.5 18 13C18 12.4 17.8 11.9 17.4 11.6L10.4 4.6C10.1 4.2 9.6 4 9 4M13.5 5.7L14.5 4.7L21.4 11.6C21.8 12 22 12.5 22 13S21.8 14.1 21.4 14.4L16 19.8L15 18.8L20.7 13L13.5 5.7Z" /></svg>';var W=r(98469),K=r(85471);async function Y({nodes:e}){const t=await new Promise(t=>{(0,W.S)((0,K.$V)(()=>Promise.all([r.e(4208),r.e(9839)]).then(r.bind(r,79839))),{nodes:e},e=>{t(e)})});return Array(e.length).fill(t)}const Z=new c({id:"systemtags:bulk",displayName:()=>(0,s.t)("systemtags","Manage tags"),iconSvgInline:()=>H,enabled:({nodes:e})=>!(0,D.f)()&&0!==e.length&&!e.some(e=>!e.isDavResource)&&!e.some(e=>0===(e.permissions&n.P.UPDATE)),exec:async({nodes:e})=>Y({nodes:e})[0],execBatch:Y});var J=r(61338),Q=r(25631),ee=r(82528),te=r(12686),re=r(57599),ne=r(85072),ie=r.n(ne),oe=r(97825),se=r.n(oe),ae=r(77659),le=r.n(ae),ce=r(55056),de=r.n(ce),ue=r(10540),he=r.n(ue),pe=r(41113),fe=r.n(pe),ge=r(73911),me={};me.styleTagTransform=fe(),me.setAttributes=de(),me.insert=le().bind(null,"head"),me.domAPI=se(),me.insertStyleElement=he(),ie()(ge.A,me),ge.A&&ge.A.locals&&ge.A.locals;const be=[],ye=new c({id:"system-tags",displayName:()=>"",iconSvgInline:()=>"",enabled:({nodes:e})=>1===e.length,exec:async()=>null,renderInline:({nodes:e})=>1===e.length&&e[0]?ve(e[0]):Promise.resolve(null),order:0,hotkey:{description:(0,s.t)("files","Manage tags"),key:"T"}});function we(e,t=!1){const r=document.createElement("li");r.classList.add("files-list__system-tag"),r.setAttribute("data-systemtag-name",e),r.textContent=e;const n=be.find(t=>t.displayName===e);if(n?.color){const e=getComputedStyle(document.body).getPropertyValue("--color-main-background").replace("#","")||((0,re.j2)()?"000000":"ffffff"),t=(0,re.W7)(`#${n.color}`,`#${e}`);r.style.setProperty("--systemtag-color",t),r.setAttribute("data-systemtag-color","true")}return t&&r.classList.add("files-list__system-tag--more"),r}async function ve(e){const t=(0,te.rA)(e),r=document.createElement("ul");if(r.classList.add("files-list__system-tags"),r.setAttribute("aria-label",(0,s.t)("files","Assigned collaborative tags")),r.setAttribute("data-systemtags-fileid",e.fileid?.toString()||""),0===t.length)return r;if(0===be.length)try{be.push(...await(0,ee.un)())}catch(e){Q.A.error("Failed to fetch tags",{error:e})}if(r.append(we(t[0])),2===t.length)r.append(we(t[1]));else if(t.length>1){const e=we("+"+(t.length-1),!0);e.setAttribute("title",t.slice(1).join(", ")),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),r.append(e);for(const e of t.slice(1)){const t=we(e);t.classList.add("hidden-visually"),r.append(t)}}return r}(0,J.B1)("systemtags:node:updated",function(e){ve(e).then(t=>{document.querySelectorAll(`[data-systemtags-fileid="${e.fileid}"]`).forEach(e=>{e.replaceWith(t)})})}),(0,J.B1)("systemtags:tag:created",function(e){be.push(e)}),(0,J.B1)("systemtags:tag:deleted",function(e){be.splice(be.findIndex(t=>t.id===e.id),1)}),(0,J.B1)("systemtags:tag:updated",function(e){const t=be.findIndex(t=>t.id===e.id);-1!==t&&(be[t]=e),function(e){document.querySelectorAll(`[data-systemtag-name="${e.displayName}"]`).forEach(t=>{t.style.setProperty("--systemtag-color",`#${e.color}`)})}(e)});const Ee="/systemtags",Ae=function(e=z,t={}){const r=(0,G.UU)(e,{headers:t});function n(e){r.setHeaders({...t,"X-Requested-With":"XMLHttpRequest",requesttoken:e??""})}return(0,j.zo)(n),n((0,j.do)()),(0,G.Gu)().patch("fetch",(e,t)=>{const r=t.headers;return r?.method&&(t.method=r.method,delete r.method),fetch(e,t)}),r}();function Ie(e){return`<?xml version="1.0"?>\n<oc:filter-files ${void 0===window._nc_dav_namespaces&&(window._nc_dav_namespaces={...B}),Object.keys(window._nc_dav_namespaces).map(e=>`xmlns:${e}="${window._nc_dav_namespaces?.[e]}"`).join(" ")}>\n\t<d:prop>\n\t\t${void 0===window._nc_dav_properties&&(window._nc_dav_properties=[...U]),window._nc_dav_properties.map(e=>`<${e} />`).join(" ")}\n\t</d:prop>\n\t<oc:filter-rules>\n\t\t<oc:systemtag>${e}</oc:systemtag>\n\t</oc:filter-rules>\n</oc:filter-files>`}function Ne(e){return new n.b({id:e.id,source:`${X()}${Ee}/${e.id}`,owner:String((0,j.HW)()?.uid??"anonymous"),root:Ee,displayname:e.displayName,permissions:n.P.READ,attributes:{...e,"is-tag":!0}})}const ke="tags",Re=new c({id:"systemtags:open-in-files",displayName:()=>(0,s.t)("systemtags","Open in Files"),iconSvgInline:()=>"",enabled:({nodes:e,view:t})=>t.id===ke&&!(1!==e.length||!e[0])&&!0!==e[0].attributes["is-tag"]&&e[0].type===n.F.Folder,async exec({nodes:e}){if(!e[0]||1!==e.length)return!1;let t=e[0].dirname;return e[0].type===n.F.Folder&&(t=e[0].path),window.OCP.Files.Router.goToRoute(null,{view:"files",fileid:String(e[0].fileid)},{dir:t,openfile:"true"}),null},order:-1e3,default:l.HIDDEN});var Le=r(94205),_e=r(85168);const Oe=(0,r(35947).YK)().setApp("files").detectUser().build(),xe=(0,r(10810).nY)("active",()=>{const e=(0,K.KR)(),t=(0,K.KR)(),r=(0,K.KR)(),n=(0,K.KR)();function i(e){r.value&&r.value.source===e.source&&(r.value=void 0)}function o(e=null){Oe.debug("Setting active view",{view:e}),n.value=e??void 0,r.value=void 0}return function(){const e=P();(0,J.B1)("files:node:deleted",i),o(e.active),e.addEventListener("updateActive",e=>{o(e.detail)})}(),{activeAction:e,activeFolder:t,activeNode:r,activeView:n}});!function(e,t={nc:"http://nextcloud.org/ns"}){void 0===window._nc_dav_properties&&(window._nc_dav_properties=[...U],window._nc_dav_namespaces={...B});const r={...window._nc_dav_namespaces,...t};window._nc_dav_properties.find(t=>t===e)?n.l.warn(`${e} already registered`,{prop:e}):e.startsWith("<")||2!==e.split(":").length?n.l.error(`${e} is not valid. See example: 'oc:fileid'`,{prop:e}):r[e.split(":")[0]]?(window._nc_dav_properties.push(e),window._nc_dav_namespaces=r):n.l.error(`${e} namespace unknown`,{prop:e,namespaces:r})}("nc:system-tags"),d(Z),d(ye),d(Re),P().register(new class{_view;constructor(e){T(e),this._view=e}get id(){return this._view.id}get name(){return this._view.name}get caption(){return this._view.caption}get emptyTitle(){return this._view.emptyTitle}get emptyCaption(){return this._view.emptyCaption}get getContents(){return this._view.getContents}get hidden(){return this._view.hidden}get icon(){return this._view.icon}set icon(e){this._view.icon=e}get order(){return this._view.order}set order(e){this._view.order=e}get params(){return this._view.params}set params(e){this._view.params=e}get columns(){return this._view.columns}get emptyView(){return this._view.emptyView}get parent(){return this._view.parent}get sticky(){return this._view.sticky}get expanded(){return this._view.expanded}set expanded(e){this._view.expanded=e}get defaultSortKey(){return this._view.defaultSortKey}get loadChildViews(){return this._view.loadChildViews}}({id:ke,name:(0,s.Tl)("systemtags","Tags"),caption:(0,s.Tl)("systemtags","List of tags and their associated files and folders."),emptyTitle:(0,s.Tl)("systemtags","No tags found"),emptyCaption:(0,s.Tl)("systemtags","Tags you have created will show up here."),icon:H,order:25,getContents:async function(e="/"){const t=(await(0,ee.un)()).filter(e=>e.userVisible);if("/"===e)return{folder:new n.b({id:0,source:`${X()}${Ee}`,owner:(0,j.HW)()?.uid,root:Ee,permissions:n.P.NONE}),contents:t.map(Ne)};const r=parseInt(e.split("/",2)[1]),i=t.find(e=>e.id===r);if(!i)throw new Error("Tag not found");return{folder:Ne(i),contents:(await Ae.getDirectoryContents(V(),{details:!0,data:Ie(r),headers:{method:"REPORT"}})).data.map(e=>function(e,t=q,r=z){let i=(0,j.HW)()?.uid;if((0,D.f)())i=i??"anonymous";else if(!i)throw new Error("No user id found");const o=e.props,s=function(e=""){let t=n.P.NONE;return e?((e.includes("C")||e.includes("K"))&&(t|=n.P.CREATE),e.includes("G")&&(t|=n.P.READ),(e.includes("W")||e.includes("N")||e.includes("V"))&&(t|=n.P.UPDATE),e.includes("D")&&(t|=n.P.DELETE),e.includes("R")&&(t|=n.P.SHARE),t):t}(o?.permissions),a=String(o?.["owner-id"]||i),l=o.fileid||0,c=new Date(Date.parse(e.lastmod)),d=new Date(Date.parse(o.creationdate)),u={id:l,source:`${r}${e.filename}`,mtime:isNaN(c.getTime())||0===c.getTime()?void 0:c,crtime:isNaN(d.getTime())||0===d.getTime()?void 0:d,mime:e.mime||"application/octet-stream",displayname:void 0!==o.displayname?String(o.displayname):void 0,size:o?.size||Number.parseInt(o.getcontentlength||"0"),status:l<0?n.c.FAILED:void 0,permissions:s,owner:a,root:t,attributes:{...e,...o,hasPreview:o?.["has-preview"]}};return delete u.attributes?.props,"file"===e.type?new n.a(u):new n.b(u)}(e))}}})),document.addEventListener("DOMContentLoaded",()=>{(0,Le.C)("t",()=>async function(e){const t=xe(),r=t.activeFolder,i=t.activeNode,o=t.activeView;if(!r||!i||!o)return void Oe.error("No active folder, node or view",{folder:r,node:i,view:o});if(i.status===n.c.LOADING)return void Oe.debug("Node is already loading",{node:i});const a={nodes:[i],view:o,folder:r,contents:r?._children||[]};if(!e.enabled(a))return void Oe.debug("Action is not not available for the current context",{action:e,node:i,view:o});let l=e.id;try{l=e.displayName(a)}catch(t){Oe.error("Error while getting action display name",{action:e,error:t})}try{K.Ay.set(i,"status",n.c.LOADING),t.activeAction=e;const r=await e.exec(a);if(null==r)return;if(r)return void(0,_e.Te)((0,s.t)("files","{displayName}: done",{displayName:l}));(0,_e.Qg)((0,s.t)("files","{displayName}: failed",{displayName:l}))}catch(t){Oe.error("Error while executing action",{action:e,error:t}),(0,_e.Qg)((0,s.t)("files","{displayName}: failed",{displayName:l}))}finally{K.Ay.set(i,"status",void 0),t.activeAction=void 0}}(Z),{stop:!0,prevent:!0}),Q.A.debug("Hotkeys registered")})},25631(e,t,r){"use strict";r.d(t,{A:()=>n});const n=(0,r(35947).YK)().setApp("systemtags").detectUser().build()},42634(){},47790(){},51069(){},57599(e,t,r){"use strict";r.d(t,{W7:()=>D,Pj:()=>j,j2:()=>P});const n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const e in n)Object.freeze(n[e]);const i=Object.freeze(n),o=Object.create(null);for(const e in i)Object.hasOwn(i,e)&&(o[i[e]]=e);const s={to:{},get:{}};function a(e,t,r){return Math.min(Math.max(t,e),r)}function l(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){let t,r;switch(e.slice(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),r="hsl";break;case"hwb":t=s.get.hwb(e),r="hwb";break;default:t=s.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},s.get.rgb=function(e){if(!e)return null;let t,r,n,o=[0,0,0,1];if(t=e.match(/^#([a-f\d]{6})([a-f\d]{2})?$/i)){for(n=t[2],t=t[1],r=0;r<3;r++){const e=2*r;o[r]=Number.parseInt(t.slice(e,e+2),16)}n&&(o[3]=Number.parseInt(n,16)/255)}else if(t=e.match(/^#([a-f\d]{3,4})$/i)){for(t=t[1],n=t[3],r=0;r<3;r++)o[r]=Number.parseInt(t[r]+t[r],16);n&&(o[3]=Number.parseInt(n+n,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i)){for(r=0;r<3;r++)o[r]=Number.parseFloat(t[r+1]);t[4]&&(o[3]=t[5]?.01*Number.parseFloat(t[4]):Number.parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i)))return(t=e.toLowerCase().match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:Object.hasOwn(i,t[1])?(o=i[t[1]].slice(),o[3]=1,o):null:null;for(r=0;r<3;r++)o[r]=Math.round(2.55*Number.parseFloat(t[r+1]));t[4]&&(o[3]=t[5]?.01*Number.parseFloat(t[4]):Number.parseFloat(t[4]))}for(r=0;r<3;r++)o[r]=a(o[r],0,255);return o[3]=a(o[3],0,1),o},s.get.hsl=function(e){if(!e)return null;const t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i);if(t){const e=Number.parseFloat(t[4]);return[(Number.parseFloat(t[1])%360+360)%360,a(Number.parseFloat(t[2]),0,100),a(Number.parseFloat(t[3]),0,100),a(Number.isNaN(e)?1:e,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;const t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i);if(t){const e=Number.parseFloat(t[4]);return[(Number.parseFloat(t[1])%360+360)%360,a(Number.parseFloat(t[2]),0,100),a(Number.parseFloat(t[3]),0,100),a(Number.isNaN(e)?1:e,0,1)]}return null},s.to.hex=function(...e){return"#"+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(255*e[3])):"")},s.to.rgb=function(...e){return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},s.to.hsl=function(...e){return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(...e){let t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(...e){return o[e.slice(0,3)]};const c=s,d={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const e in d)Object.freeze(d[e]);const u=Object.freeze(d),h={};for(const e of Object.keys(u))h[u[e]]=e;const p={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},f=p,g=(6/29)**3;function m(e){const t=e>.0031308?1.055*e**(1/2.4)-.055:12.92*e;return Math.min(Math.max(0,t),1)}function b(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(p)){if(!("channels"in p[e]))throw new Error("missing channels property: "+e);if(!("labels"in p[e]))throw new Error("missing channel labels property: "+e);if(p[e].labels.length!==p[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=p[e];delete p[e].channels,delete p[e].labels,Object.defineProperty(p[e],"channels",{value:t}),Object.defineProperty(p[e],"labels",{value:r})}function y(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}function w(e,t){return function(r){return t(e(r))}}function v(e,t){const r=[t[e].parent,e];let n=f[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=w(f[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}p.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i;let a,l;switch(o){case i:a=0;break;case t:a=(r-n)/s;break;case r:a=2+(n-t)/s;break;case n:a=4+(t-r)/s}a=Math.min(60*a,360),a<0&&(a+=360);const c=(i+o)/2;return l=o===i?0:c<=.5?s/(o+i):s/(2-o-i),[a,100*l,100*c]},p.rgb.hsv=function(e){let t,r,n,i,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(s,a,l),d=c-Math.min(s,a,l),u=function(e){return(c-e)/6/d+.5};if(0===d)i=0,o=0;else{switch(o=d/c,t=u(s),r=u(a),n=u(l),c){case s:i=n-r;break;case a:i=1/3+t-n;break;case l:i=2/3+r-t}i<0?i+=1:i>1&&(i-=1)}return[360*i,100*o,100*c]},p.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=p.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,100*o,100*n]},p.rgb.oklab=function(e){const t=b(e[0]/255),r=b(e[1]/255),n=b(e[2]/255),i=Math.cbrt(.4122214708*t+.5363325363*r+.0514459929*n),o=Math.cbrt(.2119034982*t+.6806995451*r+.1073969566*n),s=Math.cbrt(.0883024619*t+.2817188376*r+.6299787005*n);return[100*(.2104542553*i+.793617785*o-.0040720468*s),100*(1.9779984951*i-2.428592205*o+.4505937099*s),100*(.0259040371*i+.7827717662*o-.808675766*s)]},p.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},p.rgb.keyword=function(e){const t=h[e];if(t)return t;let r,n=Number.POSITIVE_INFINITY;for(const t of Object.keys(u)){const i=y(e,u[t]);i<n&&(n=i,r=t)}return r},p.keyword.rgb=function(e){return[...u[e]]},p.rgb.xyz=function(e){const t=b(e[0]/255),r=b(e[1]/255),n=b(e[2]/255);return[100*(.4124564*t+.3575761*r+.1804375*n),100*(.2126729*t+.7151522*r+.072175*n),100*(.0193339*t+.119192*r+.9503041*n)]},p.rgb.lab=function(e){const t=p.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];return r/=95.047,n/=100,i/=108.883,r=r>g?r**(1/3):7.787*r+16/116,n=n>g?n**(1/3):7.787*n+16/116,i=i>g?i**(1/3):7.787*i+16/116,[116*n-16,500*(r-n),200*(n-i)]},p.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,o;if(0===r)return o=255*n,[o,o,o];const s=n<.5?n*(1+r):n+r-n*r,a=2*n-s,l=[0,0,0];for(let e=0;e<3;e++)i=t+1/3*-(e-1),i<0&&i++,i>1&&i--,o=6*i<1?a+6*(s-a)*i:2*i<1?s:3*i<2?a+(s-a)*(2/3-i)*6:a,l[e]=255*o;return l},p.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const o=Math.max(n,.01);return n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),(n+r)/2*100]},p.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),l=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,l,s];case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}},p.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,s;s=(2-r)*n;const a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},p.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let o;i>1&&(r/=i,n/=i);const s=Math.floor(6*t),a=1-n;o=6*t-s,1&s&&(o=1-o);const l=r+o*(a-r);let c,d,u;switch(s){default:case 6:case 0:c=a,d=l,u=r;break;case 1:c=l,d=a,u=r;break;case 2:c=r,d=a,u=l;break;case 3:c=r,d=l,u=a;break;case 4:c=l,d=r,u=a;break;case 5:c=a,d=r,u=l}return[255*c,255*d,255*u]},p.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},p.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,o,s;return i=3.2404542*t+-1.5371385*r+-.4985314*n,o=-.969266*t+1.8760108*r+.041556*n,s=.0556434*t+-.2040259*r+1.0572252*n,i=m(i),o=m(o),s=m(s),[255*i,255*o,255*s]},p.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];return t/=95.047,r/=100,n/=108.883,t=t>g?t**(1/3):7.787*t+16/116,r=r>g?r**(1/3):7.787*r+16/116,n=n>g?n**(1/3):7.787*n+16/116,[116*r-16,500*(t-r),200*(r-n)]},p.xyz.oklab=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=Math.cbrt(.8189330101*t+.3618667424*r-.1288597137*n),o=Math.cbrt(.0329845436*t+.9293118715*r+.0361456387*n),s=Math.cbrt(.0482003018*t+.2643662691*r+.633851707*n);return[100*(.2104542553*i+.793617785*o-.0040720468*s),100*(1.9779984951*i-2.428592205*o+.4505937099*s),100*(.0259040371*i+.7827717662*o-.808675766*s)]},p.oklab.oklch=function(e){return p.lab.lch(e)},p.oklab.xyz=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=(.999999998*t+.396337792*r+.215803758*n)**3,o=(1.000000008*t-.105561342*r-.063854175*n)**3,s=(1.000000055*t-.089484182*r-1.291485538*n)**3;return[100*(1.227013851*i-.55779998*o+.281256149*s),100*(-.040580178*i+1.11225687*o-.071676679*s),100*(-.076381285*i-.421481978*o+1.58616322*s)]},p.oklab.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=(t+.3963377774*r+.2158037573*n)**3,o=(t-.1055613458*r-.0638541728*n)**3,s=(t-.0894841775*r-1.291485548*n)**3;return[255*m(4.0767416621*i-3.3077115913*o+.2309699292*s),255*m(-1.2684380046*i+2.6097574011*o-.3413193965*s),255*m(-.0041960863*i-.7034186147*o+1.707614701*s)]},p.oklch.oklab=function(e){return p.lch.lab(e)},p.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const i=r**3,o=t**3,s=n**3;return r=i>g?i:(r-16/116)/7.787,t=o>g?o:(t-16/116)/7.787,n=s>g?s:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},p.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;return i=360*Math.atan2(n,r)/2/Math.PI,i<0&&(i+=360),[t,Math.sqrt(r*r+n*n),i]},p.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},p.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let o=null===t?p.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),0===o)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===o&&(s+=60),s},p.hsv.ansi16=function(e){return p.rgb.ansi16(p.hsv.rgb(e),e[2])},p.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];return t>>4==r>>4&&r>>4==n>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},p.ansi16.rgb=function(e){let t=(e=e[0])%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(Math.trunc(e>50)+1);return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},p.ansi256.rgb=function(e){if((e=e[0])>=232){const t=10*(e-232)+8;return[t,t,t]}let t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},p.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".slice(t.length)+t},p.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=[...r].map(e=>e+e).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},p.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),s=i-o;let a;return a=s<=0?0:i===t?(r-n)/s%6:i===r?2+(n-t)/s:4+(t-r)/s,a/=6,a%=1,[360*a,100*s,100*(s<1?o/(1-s):0)]},p.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},p.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},p.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[255*(r*i[0]+l),255*(r*i[1]+l),255*(r*i[2]+l)]},p.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},p.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},p.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},p.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},p.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},p.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},p.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},p.gray.hsl=function(e){return[0,0,e[0]]},p.gray.hsv=p.gray.hsl,p.gray.hwb=function(e){return[0,100,e[0]]},p.gray.cmyk=function(e){return[0,0,0,e[0]]},p.gray.lab=function(e){return[e[0],0,0]},p.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r},p.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const E=function(e){const t=function(e){const t=function(){const e={},t=Object.keys(f);for(let{length:r}=t,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length>0;){const e=r.pop(),n=Object.keys(f[e]);for(let{length:i}=n,o=0;o<i;o++){const i=n[o],s=t[i];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,r.unshift(i))}}return t}(e),r={},n=Object.keys(t);for(let{length:e}=n,i=0;i<e;i++){const e=n[i];null!==t[e].parent&&(r[e]=v(e,t))}return r},A={},I=Object.keys(f);function N(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function k(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let{length:e}=n,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of I){A[e]={},Object.defineProperty(A[e],"channels",{value:f[e].channels}),Object.defineProperty(A[e],"labels",{value:f[e].labels});const t=E(e),r=Object.keys(t);for(const n of r){const r=t[n];A[e][n]=k(r),A[e][n].raw=N(r)}}const R=A,L=["keyword","gray","hex"],_={};for(const e of Object.keys(R))_[[...R[e].labels].sort().join("")]=e;const O={};function x(e,t){if(!(this instanceof x))return new x(e,t);if(t&&t in L&&(t=null),t&&!(t in R))throw new Error("Unknown model: "+t);let r,n;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof x)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){const t=c.get(e);if(null===t)throw new Error("Unable to parse color from string: "+e);this.model=t.model,n=R[this.model].channels,this.color=t.value.slice(0,n),this.valpha="number"==typeof t.value[n]?t.value[n]:1}else if(e.length>0){this.model=t||"rgb",n=R[this.model].channels;const r=Array.prototype.slice.call(e,0,n);this.color=T(r,n),this.valpha="number"==typeof e[n]?e[n]:1}else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;const t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);const n=t.sort().join("");if(!(n in _))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=_[n];const{labels:i}=R[this.model],o=[];for(r=0;r<i.length;r++)o.push(e[i[r]]);this.color=T(o)}if(O[this.model])for(n=R[this.model].channels,r=0;r<n;r++){const e=O[this.model][r];e&&(this.color[r]=e(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}x.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in c.to?this:this.rgb();t=t.round("number"==typeof e?e:1);const r=1===t.valpha?t.color:[...t.color,this.valpha];return c.to[t.model](...r)},percentString(e){const t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:[...t.color,this.valpha];return c.to.rgb.percent(...r)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=R[this.model],{labels:r}=R[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new x([...this.color.map(C(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new x([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:$("rgb",0,M(255)),green:$("rgb",1,M(255)),blue:$("rgb",2,M(255)),hue:$(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:$("hsl",1,M(100)),lightness:$("hsl",2,M(100)),saturationv:$("hsv",1,M(100)),value:$("hsv",2,M(100)),chroma:$("hcg",1,M(100)),gray:$("hcg",2,M(100)),white:$("hwb",1,M(100)),wblack:$("hwb",2,M(100)),cyan:$("cmyk",0,M(100)),magenta:$("cmyk",1,M(100)),yellow:$("cmyk",2,M(100)),black:$("cmyk",3,M(100)),x:$("xyz",0,M(95.047)),y:$("xyz",1,M(100)),z:$("xyz",2,M(108.833)),l:$("lab",0,M(100)),a:$("lab",1),b:$("lab",2),keyword(e){return void 0!==e?new x(e):R[this.model].keyword(this.color)},hex(e){return void 0!==e?new x(e):c.to.hex(...this.rgb().round().color)},hexa(e){if(void 0!==e)return new x(e);const t=this.rgb().round().color;let r=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===r.length&&(r="0"+r),c.to.hex(...t)+r},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[r,n]of e.entries()){const e=n/255;t[r]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(2126*e[0]+7152*e[1]+722*e[2])/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return x.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),n=this.rgb(),i=void 0===t?.5:t,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,l=1-a;return x.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(const e of Object.keys(R)){if(L.includes(e))continue;const{channels:t}=R[e];x.prototype[e]=function(...t){return this.model===e?new x(this):t.length>0?new x(t,e):new x([...(r=R[this.model][e].raw(this.color),Array.isArray(r)?r:[r]),this.valpha],e);var r},x[e]=function(...r){let n=r[0];return"number"==typeof n&&(n=T(r,t)),new x(n,e)}}function C(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}function $(e,t,r){e=Array.isArray(e)?e:[e];for(const n of e)(O[n]||=[])[t]=r;return e=e[0],function(n){let i;return void 0!==n?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function M(e){return function(t){return Math.max(0,Math.min(e,t))}}function T(e,t){for(let r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}const S=x;function P(){const e=window?.matchMedia?.("(prefers-color-scheme: dark)")?.matches,t=document.body.getAttribute("data-themes")?.includes("dark");return t||e||!1}function j(e){return G(e,"#ffffff")<4.5}function D(e,t){const r=function(e){return F(e)>.6}(t),n=(i=t,new S(r?e:"#ffffff").mix(new S(i),.83).hex());var i;let o=G(e,n);const s=function(){const e=window?.matchMedia?.("(forced-colors: active)")?.matches,t=document.body.getAttribute("data-themes")?.includes("highcontrast");return t||e||!1}()?5.6:3.2;let a=0,l=e;const c=(r?-100:100)/255;for(;o<s&&a++<100;){const e=U(l),t=Math.max(0,Math.min(255,e.l+c));l=B({h:e.h,s:e.s,l:t}),o=G(l,n)}return l}function F(e){const t=function(e){return new S(e).rgb().array()}(e).map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)),[r,n,i]=t;return.2126*r+.7152*n+.0722*i}function G(e,t){const r=F(e)+.05,n=F(t)+.05;return Math.max(r,n)/Math.min(r,n)}function U(e){const t=new S(e).hsl();return{h:t.color[0],s:t.color[1],l:t.color[2]}}function B(e){return new S(e).hex()}},59169(){},63779(){},64688(){},66089(){},73776(){},73911(e,t,r){"use strict";r.d(t,{A:()=>a});var n=r(71354),i=r.n(n),o=r(76314),s=r.n(o)()(i());s.push([e.id,".files-list__system-tags{--min-size: 32px;display:none;justify-content:center;align-items:center;min-width:calc(var(--min-size)*2);max-width:300px}.files-list__system-tag{padding:5px 10px;border:1px solid;border-radius:var(--border-radius-pill);border-color:var(--color-border);color:var(--color-text-maxcontrast);height:var(--min-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:20px;text-align:center}.files-list__system-tag--more{overflow:visible;text-overflow:initial}.files-list__system-tag+.files-list__system-tag{margin-inline-start:5px}.files-list__system-tag[data-systemtag-color]{border-color:var(--systemtag-color);color:var(--systemtag-color);border-width:2px;line-height:18px}@media(min-width: 512px){.files-list__system-tags{display:flex}}","",{version:3,sources:["webpack://./apps/systemtags/src/css/fileEntryInlineSystemTags.scss"],names:[],mappings:"AAKA,yBACC,gBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iCAAA,CACA,eAAA,CAGD,wBACC,gBAAA,CACA,gBAAA,CACA,uCAAA,CACA,gCAAA,CACA,mCAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CACA,iBAAA,CAEA,8BACC,gBAAA,CACA,qBAAA,CAID,gDACC,uBAAA,CAID,8CACC,mCAAA,CACA,4BAAA,CACA,gBAAA,CACA,gBAAA,CAIF,yBACC,yBACC,YAAA,CAAA",sourcesContent:["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n.files-list__system-tags {\n\t--min-size: 32px;\n\tdisplay: none;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-width: calc(var(--min-size) * 2);\n\tmax-width: 300px;\n}\n\n.files-list__system-tag {\n\tpadding: 5px 10px;\n\tborder: 1px solid;\n\tborder-radius: var(--border-radius-pill);\n\tborder-color: var(--color-border);\n\tcolor: var(--color-text-maxcontrast);\n\theight: var(--min-size);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tline-height: 20px; // min-size - 2 * 5px padding - 2 * 1px border\n\ttext-align: center;\n\n\t&--more {\n\t\toverflow: visible;\n\t\ttext-overflow: initial;\n\t}\n\n\t// Proper spacing if multiple shown\n\t& + .files-list__system-tag {\n\t\tmargin-inline-start: 5px;\n\t}\n\n\t// With color\n\t&[data-systemtag-color] {\n\t\tborder-color: var(--systemtag-color);\n\t\tcolor: var(--systemtag-color);\n\t\tborder-width: 2px;\n\t\tline-height: 18px; // min-size - 2 * 5px padding - 2 * 2px border\n\t}\n}\n\n@media (min-width: 512px) {\n\t.files-list__system-tags {\n\t\tdisplay: flex;\n\t}\n}\n"],sourceRoot:""}]);const a=s},77199(){},77965(){},78982(){},79368(){},79838(){},82528(e,t,r){"use strict";r.d(t,{Gw:()=>h,T0:()=>f,VZ:()=>u,b0:()=>p,un:()=>c,xI:()=>d}),r(19051);var n=r(61338),i=r(53334),o=(r(47176),r(25631)),s=r(12686),a=r(8828);const l='<?xml version="1.0"?>\n<d:propfind xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns" xmlns:nc="http://nextcloud.org/ns">\n\t<d:prop>\n\t\t<oc:id />\n\t\t<oc:display-name />\n\t\t<oc:user-visible />\n\t\t<oc:user-assignable />\n\t\t<oc:can-assign />\n\t\t<d:getetag />\n\t\t<nc:color />\n\t</d:prop>\n</d:propfind>';async function c(){try{const{data:e}=await a.R.getDirectoryContents("/systemtags",{data:l,details:!0,glob:"/systemtags/*"});return(0,s.rL)(e)}catch(e){throw o.A.error((0,i.t)("systemtags","Failed to load tags"),{error:e}),new Error((0,i.t)("systemtags","Failed to load tags"))}}async function d(e){const t="/systemtags/"+e;try{const{data:e}=await a.R.stat(t,{data:l,details:!0});return(0,s.rL)([e])[0]}catch(e){throw o.A.error((0,i.t)("systemtags","Failed to load tag"),{error:e}),new Error((0,i.t)("systemtags","Failed to load tag"))}}async function u(e){const t=(0,s._3)(e);try{const{headers:r}=await a.R.customRequest("/systemtags",{method:"POST",data:t}),l=r.get("content-location");if(l)return(0,n.Ic)("systemtags:tag:created",e),(0,s.GX)(l);throw o.A.error((0,i.t)("systemtags",'Missing "Content-Location" header')),new Error((0,i.t)("systemtags",'Missing "Content-Location" header'))}catch(e){if(409===e?.response?.status)throw o.A.error((0,i.t)("systemtags","A tag with the same name already exists"),{error:e}),new Error((0,i.t)("systemtags","A tag with the same name already exists"));throw o.A.error((0,i.t)("systemtags","Failed to create tag"),{error:e}),new Error((0,i.t)("systemtags","Failed to create tag"))}}async function h(e){const t="/systemtags/"+e.id,r=`<?xml version="1.0"?>\n\t<d:propertyupdate xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns" xmlns:nc="http://nextcloud.org/ns">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<oc:display-name>${e.displayName}</oc:display-name>\n\t\t\t\t<oc:user-visible>${e.userVisible}</oc:user-visible>\n\t\t\t\t<oc:user-assignable>${e.userAssignable}</oc:user-assignable>\n\t\t\t\t<nc:color>${e?.color||null}</nc:color>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;try{await a.R.customRequest(t,{method:"PROPPATCH",data:r}),(0,n.Ic)("systemtags:tag:updated",e)}catch(e){throw o.A.error((0,i.t)("systemtags","Failed to update tag"),{error:e}),new Error((0,i.t)("systemtags","Failed to update tag"))}}async function p(e,t){const r=`/systemtags/${e.id}/${t}`,n=await a.R.stat(r,{data:'<?xml version="1.0"?>\n\t<d:propfind xmlns:d="DAV:" xmlns:nc="http://nextcloud.org/ns">\n\t\t<d:prop>\n\t\t\t<nc:object-ids />\n\t\t\t<d:getetag />\n\t\t</d:prop>\n\t</d:propfind>',details:!0});return{etag:n?.data?.props?.getetag||'""',objects:Object.values(n?.data?.props?.["object-ids"]||[]).flat()}}async function f(e,t,r,n=""){const i=`/systemtags/${e.id}/${t}`;let o=`<?xml version="1.0"?>\n\t<d:propertyupdate xmlns:d="DAV:" xmlns:nc="http://nextcloud.org/ns">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<nc:object-ids>${r.map(({id:e,type:t})=>`<nc:object-id><nc:id>${e}</nc:id><nc:type>${t}</nc:type></nc:object-id>`).join("")}</nc:object-ids>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;0===r.length&&(o='<?xml version="1.0"?>\n\t\t<d:propertyupdate xmlns:d="DAV:" xmlns:nc="http://nextcloud.org/ns">\n\t\t\t<d:remove>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<nc:object-ids />\n\t\t\t\t</d:prop>\n\t\t\t</d:remove>\n\t\t</d:propertyupdate>'),await a.R.customRequest(i,{method:"PROPPATCH",data:o,headers:{"if-match":n}})}},86833(){}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=n,e=[],o.O=(t,r,n,i)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,n,i]=e[d],a=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(o.O).every(e=>o.O[e](r[l]))?r.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,n,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,r)=>(o.f[r](e,t),t),[])),o.u=e=>e+"-"+e+".js?v="+{594:"f5af3d132040859cb666",620:"e5d77a046303aedd05c5",2391:"6d29c12fea2fbb265756",2880:"803b63f847e6d68bcf0d",4325:"2c2e8efde4f3230744bd",5862:"580b9c2e231a9169a12f",7145:"1f907ab7a1c83e8a6617",8339:"b2246be0f4c885a9d524",9839:"99dacec8c36e4a5fcb20"}[e],o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},r="nextcloud-ui-legacy:",o.l=(e,n,i,s)=>{if(t[e])t[e].push(n);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+i){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",r+i),a.src=e),t[e]=[n];var h=(r,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=t[e];if(delete t[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),r)return r(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=2766,(()=>{var e;globalThis.importScripts&&(e=globalThis.location+"");var t=globalThis.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={2766:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((r,i)=>n=e[t]=[r,i]);r.push(n[2]=i);var s=o.p+o.u(t),a=new Error;o.l(s,r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,n[1](a)}},"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[s,a,l]=r,c=0;if(s.some(t=>0!==e[t])){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var d=l(o)}for(t&&t(r);c<s.length;c++)i=s[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},r=globalThis.webpackChunknextcloud_ui_legacy=globalThis.webpackChunknextcloud_ui_legacy||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0;var s=o.O(void 0,[4208],()=>o(15673));s=o.O(s)})();
//# sourceMappingURL=systemtags-init.js.map?v=d7ed02bcaf25f95b487a