{"version":3,"file":"dav-settings-admin-caldav.mjs","sources":["../build/frontend/apps/dav/src/views/CalDavSettings.vue","../build/frontend/apps/dav/src/settings-admin.ts"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcSettingsSection\n\t\t:name=\"t('dav', 'Calendar server')\"\n\t\t:doc-url=\"userSyncCalendarsDocUrl\">\n\t\t<!-- Can use v-html as:\n\t\t\t- t passes the translated string through DOMPurify.sanitize,\n\t\t\t- replacement strings are not user-controlled. -->\n\t\t<!-- eslint-disable-next-line vue/no-v-html -->\n\t\t<p class=\"settings-hint\" v-html=\"hint\" />\n\t\t<p>\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tid=\"caldavSendInvitations\"\n\t\t\t\tv-model=\"sendInvitations\"\n\t\t\t\ttype=\"switch\">\n\t\t\t\t{{ t('dav', 'Send invitations to attendees') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t<!-- Can use v-html as:\n\t\t\t\t- t passes the translated string through DOMPurify.sanitize,\n\t\t\t\t- replacement strings are not user-controlled. -->\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html -->\n\t\t\t<em v-html=\"sendInvitationsHelpText\" />\n\t\t</p>\n\t\t<p>\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tid=\"caldavGenerateBirthdayCalendar\"\n\t\t\t\tv-model=\"generateBirthdayCalendar\"\n\t\t\t\ttype=\"switch\"\n\t\t\t\tclass=\"checkbox\">\n\t\t\t\t{{ t('dav', 'Automatically generate a birthday calendar') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t<em>\n\t\t\t\t{{ t('dav', 'Birthday calendars will be generated by a background job.') }}\n\t\t\t</em>\n\t\t\t<br>\n\t\t\t<em>\n\t\t\t\t{{ t('dav', 'Hence they will not be available immediately after enabling but will show up after some time.') }}\n\t\t\t</em>\n\t\t</p>\n\t\t<p>\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tid=\"caldavSendEventReminders\"\n\t\t\t\tv-model=\"sendEventReminders\"\n\t\t\t\ttype=\"switch\">\n\t\t\t\t{{ t('dav', 'Send notifications for events') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t<!-- Can use v-html as:\n\t\t\t\t- t passes the translated string through DOMPurify.sanitize,\n\t\t\t\t- replacement strings are not user-controlled. -->\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html -->\n\t\t\t<em v-html=\"sendEventRemindersHelpText\" />\n\t\t\t<br>\n\t\t\t<em>\n\t\t\t\t{{ t('dav', 'Notifications are sent via background jobs, so these must occur often enough.') }}\n\t\t\t</em>\n\t\t</p>\n\t\t<p class=\"indented\">\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tid=\"caldavSendEventRemindersToSharedGroupMembers\"\n\t\t\t\tv-model=\"sendEventRemindersToSharedUsers\"\n\t\t\t\ttype=\"switch\"\n\t\t\t\t:disabled=\"!sendEventReminders\">\n\t\t\t\t{{ t('dav', 'Send reminder notifications to calendar sharees as well') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t<em>\n\t\t\t\t{{ t('dav', 'Reminders are always sent to organizers and attendees.') }}\n\t\t\t</em>\n\t\t</p>\n\t\t<p class=\"indented\">\n\t\t\t<NcCheckboxRadioSwitch\n\t\t\t\tid=\"caldavSendEventRemindersPush\"\n\t\t\t\tv-model=\"sendEventRemindersPush\"\n\t\t\t\ttype=\"switch\"\n\t\t\t\t:disabled=\"!sendEventReminders\">\n\t\t\t\t{{ t('dav', 'Enable notifications for events via push') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</p>\n\t</NcSettingsSection>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { loadState } from '@nextcloud/initial-state'\nimport { t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcSettingsSection from '@nextcloud/vue/components/NcSettingsSection'\n\nconst userSyncCalendarsDocUrl = loadState('dav', 'userSyncCalendarsDocUrl', '#')\n\nexport default {\n\tname: 'CalDavSettings',\n\tcomponents: {\n\t\tNcCheckboxRadioSwitch,\n\t\tNcSettingsSection,\n\t},\n\n\tsetup() {\n\t\treturn { t }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tuserSyncCalendarsDocUrl,\n\t\t\tsendInvitations: loadState('dav', 'sendInvitations'),\n\t\t\tgenerateBirthdayCalendar: loadState(\n\t\t\t\t'dav',\n\t\t\t\t'generateBirthdayCalendar',\n\t\t\t),\n\n\t\t\tsendEventReminders: loadState('dav', 'sendEventReminders'),\n\t\t\tsendEventRemindersToSharedUsers: loadState(\n\t\t\t\t'dav',\n\t\t\t\t'sendEventRemindersToSharedUsers',\n\t\t\t),\n\n\t\t\tsendEventRemindersPush: loadState('dav', 'sendEventRemindersPush'),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thint() {\n\t\t\tconst translated = t(\n\t\t\t\t'dav',\n\t\t\t\t'Also install the {calendarappstoreopen}Calendar app{linkclose}, or {calendardocopen}connect your desktop & mobile for syncing â†—{linkclose}.',\n\t\t\t)\n\t\t\treturn translated\n\t\t\t\t.replace('{calendarappstoreopen}', '<a target=\"_blank\" href=\"../apps/office/calendar\">')\n\t\t\t\t.replace('{calendardocopen}', `<a target=\"_blank\" href=\"${userSyncCalendarsDocUrl}\" rel=\"noreferrer noopener\">`)\n\t\t\t\t.replace(/\\{linkclose\\}/g, '</a>')\n\t\t},\n\n\t\tsendInvitationsHelpText() {\n\t\t\tconst translated = t('dav', 'Please make sure to properly set up {emailopen}the email server{linkclose}.')\n\t\t\treturn translated\n\t\t\t\t.replace('{emailopen}', '<a href=\"../admin#mail_general_settings\">')\n\t\t\t\t.replace('{linkclose}', '</a>')\n\t\t},\n\n\t\tsendEventRemindersHelpText() {\n\t\t\tconst translated = t('dav', 'Please make sure to properly set up {emailopen}the email server{linkclose}.')\n\t\t\treturn translated\n\t\t\t\t.replace('{emailopen}', '<a href=\"../admin#mail_general_settings\">')\n\t\t\t\t.replace('{linkclose}', '</a>')\n\t\t},\n\t},\n\n\twatch: {\n\t\tgenerateBirthdayCalendar(value) {\n\t\t\tconst baseUrl = value ? '/apps/dav/enableBirthdayCalendar' : '/apps/dav/disableBirthdayCalendar'\n\t\t\taxios.post(generateUrl(baseUrl))\n\t\t},\n\n\t\tsendInvitations(value) {\n\t\t\tOCP.AppConfig.setValue(\n\t\t\t\t'dav',\n\t\t\t\t'sendInvitations',\n\t\t\t\tvalue ? 'yes' : 'no',\n\t\t\t)\n\t\t},\n\n\t\tsendEventReminders(value) {\n\t\t\tOCP.AppConfig.setValue('dav', 'sendEventReminders', value ? 'yes' : 'no')\n\t\t},\n\n\t\tsendEventRemindersToSharedUsers(value) {\n\t\t\tOCP.AppConfig.setValue(\n\t\t\t\t'dav',\n\t\t\t\t'sendEventRemindersToSharedUsers',\n\t\t\t\tvalue ? 'yes' : 'no',\n\t\t\t)\n\t\t},\n\n\t\tsendEventRemindersPush(value) {\n\t\t\tOCP.AppConfig.setValue('dav', 'sendEventRemindersPush', value ? 'yes' : 'no')\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n\t.indented {\n\t\tpadding-inline-start: 28px;\n\t}\n\t/** Use deep selector to affect v-html */\n\t* :deep(a) {\n\t\ttext-decoration: underline;\n\t}\n\n\t.settings-hint {\n\t\tmargin-top: -.2em;\n\t\tmargin-bottom: 1em;\n\t\topacity: .7;\n\t}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { createApp } from 'vue'\nimport CalDavSettings from './views/CalDavSettings.vue'\n\nconst app = createApp(CalDavSettings)\napp.mount('#settings-admin-caldav')\n"],"names":["userSyncCalendarsDocUrl","loadState","_sfc_main","NcCheckboxRadioSwitch","NcSettingsSection","t","value","baseUrl","axios","generateUrl","_hoisted_4","_hoisted_5","_createBlock","_component_NcSettingsSection","$setup","$data","_createElementVNode","$options","_createVNode","_component_NcCheckboxRadioSwitch","$event","_hoisted_2","_hoisted_3","app","createApp","CalDavSettings"],"mappings":"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"}