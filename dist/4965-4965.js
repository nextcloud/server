"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[4965],{20169:(t,n,e)=>{e.d(n,{A:()=>s});var a=e(71354),o=e.n(a),i=e(76314),p=e.n(i)()(o());p.push([t.id,"[data-v-4ec5855a] .app-changelog-dialog{min-height:50vh !important}.app-changelog-dialog__text[data-v-4ec5855a]{padding-inline:14px}","",{version:3,sources:["webpack://./apps/updatenotification/src/components/AppChangelogDialog.vue"],names:[],mappings:"AACA,wCACC,0BAAA,CAGD,6CACC,mBAAA",sourcesContent:["\n:deep(.app-changelog-dialog) {\n\tmin-height: 50vh !important;\n}\n\n.app-changelog-dialog__text {\n\tpadding-inline: 14px;\n}\n"],sourceRoot:""}]);const s=p},39858:(t,n,e)=>{e.d(n,{A:()=>s});var a=e(71354),o=e.n(a),i=e(76314),p=e.n(i)()(o());p.push([t.id,".markdown[data-v-4fb3448b] ul{list-style:disc;padding-inline-start:20px}.markdown[data-v-4fb3448b] h3,.markdown[data-v-4fb3448b] h4,.markdown[data-v-4fb3448b] h5,.markdown[data-v-4fb3448b] h6{font-weight:600;line-height:1.5;margin-top:24px;margin-bottom:12px;color:var(--color-main-text)}.markdown[data-v-4fb3448b] h3{font-size:20px}.markdown[data-v-4fb3448b] h4{font-size:18px}.markdown[data-v-4fb3448b] h5{font-size:17px}.markdown[data-v-4fb3448b] h6{font-size:var(--default-font-size)}","",{version:3,sources:["webpack://./apps/updatenotification/src/components/Markdown.vue"],names:[],mappings:"AAGE,8BACC,eAAA,CACA,yBAAA,CAGD,wHACC,eAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CACA,4BAAA,CAGD,8BACC,cAAA,CAGD,8BACC,cAAA,CAGD,8BACC,cAAA,CAGD,8BACC,kCAAA",sourcesContent:["\n.markdown {\n\t:deep {\n\t\tul {\n\t\t\tlist-style: disc;\n\t\t\tpadding-inline-start: 20px;\n\t\t}\n\n\t\th3, h4, h5, h6 {\n\t\t\tfont-weight: 600;\n\t\t\tline-height: 1.5;\n\t\t\tmargin-top: 24px;\n\t\t\tmargin-bottom: 12px;\n\t\t\tcolor: var(--color-main-text);\n\t\t}\n\n\t\th3 {\n\t\t\tfont-size: 20px;\n\t\t}\n\n\t\th4 {\n\t\t\tfont-size: 18px;\n\t\t}\n\n\t\th5 {\n\t\t\tfont-size: 17px;\n\t\t}\n\n\t\th6 {\n\t\t\tfont-size: var(--default-font-size);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=p},64965:(t,n,e)=>{e.r(n),e.d(n,{default:()=>G});var a=e(85471),o=e(53334),i=e(63814),p=e(65043),s=e(94219),r=e(60023),l=e(99418);const d=(0,a.pM)({__name:"Markdown",props:{markdown:null,minHeadingLevel:{default:2}},setup(t){const n=t,{html:e}=((t,n)=>{const e=(0,a.EW)(()=>Math.min(Math.max(n.value??1,1),6)),o=new r.xI.Renderer;return o.link=function(t,n,e){let a=`<a href="${t}" rel="noreferrer noopener" target="_blank"`;return n&&(a+=' title="'+n+'"'),a+=">"+e+"</a>",a},o.image=function(t,n,e){return e||(n??"")},o.heading=(t,n)=>{const a=Math.max(e.value,n);return`<h${a}>${t}</h${a}>`},{html:(0,a.EW)(()=>l.A.sanitize((0,r.xI)((t.value??"").trim(),{renderer:o,gfm:!1,breaks:!1,pedantic:!1}),{SAFE_FOR_JQUERY:!0,ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","p","a","ul","ol","li","em","del","blockquote"]}))}})((0,a.lW)(n,"markdown"),(0,a.lW)(n,"minHeadingLevel"));return{__sfc:!0,props:n,html:e}}});var c=e(85072),A=e.n(c),u=e(97825),m=e.n(u),h=e(77659),g=e.n(h),v=e(55056),f=e.n(v),C=e(10540),b=e.n(C),k=e(41113),w=e.n(k),x=e(39858),_={};_.styleTagTransform=w(),_.setAttributes=f(),_.insert=g().bind(null,"head"),_.domAPI=m(),_.insertStyleElement=b(),A()(x.A,_),x.A&&x.A.locals&&x.A.locals;var y=e(14486);const B=(0,y.A)(d,function(){var t=this,n=t._self._c,e=t._self._setupProxy;return n("div",{staticClass:"markdown",domProps:{innerHTML:t._s(e.html)}})},[],!1,null,"4fb3448b",null).exports,T=(0,a.pM)({__name:"AppChangelogDialog",props:{appId:null,version:{default:void 0},open:{type:Boolean,default:!0}},emits:["dismiss","update:open"],setup(t,n){let{emit:e}=n;const r=t,l=[{label:(0,o.Tl)("updatenotification","Give feedback"),callback:()=>{window.open(`https://apps.nextcloud.com/apps/${r.appId}#comments`,"_blank","noreferrer noopener")}},{label:(0,o.Tl)("updatenotification","Get started"),type:"primary",callback:()=>{e("dismiss"),e("update:open",!1)}}],d=(0,a.KR)(r.appId),c=(0,a.KR)(r.version??""),A=(0,a.KR)("");return(0,a.nT)(()=>{const t=r.version?(0,i.KT)("/apps/updatenotification/api/v1/changelog/{app}?version={version}",{version:r.version,app:r.appId}):(0,i.KT)("/apps/updatenotification/api/v1/changelog/{app}",{version:r.version,app:r.appId});p.Ay.get(t).then(t=>{let{data:n}=t;d.value=n.ocs.data.appName,c.value=n.ocs.data.version,A.value=n.ocs.data.content}).catch(t=>{404===t?.response?.status?(d.value=r.appId,A.value=(0,o.Tl)("updatenotification","No changelog available")):(console.error("Failed to load changelog entry",t),e("update:open",!1))})}),{__sfc:!0,props:r,emit:e,dialogButtons:l,appName:d,appVersion:c,markdown:A,t:o.Tl,NcDialog:s.A,Markdown:B}}});var z=e(20169),D={};D.styleTagTransform=w(),D.setAttributes=f(),D.insert=g().bind(null,"head"),D.domAPI=m(),D.insertStyleElement=b(),A()(z.A,D),z.A&&z.A.locals&&z.A.locals;const G=(0,y.A)(T,function(){var t=this,n=t._self._c,e=t._self._setupProxy;return n(e.NcDialog,{attrs:{"content-classes":"app-changelog-dialog",buttons:e.dialogButtons,name:e.t("updatenotification","What's new in {app} {version}",{app:e.appName,version:e.appVersion}),open:t.open&&void 0!==e.markdown,size:"normal"},on:{"update:open":function(n){return t.$emit("update:open",n)}}},[n(e.Markdown,{staticClass:"app-changelog-dialog__text",attrs:{markdown:e.markdown,"min-heading-level":3}})],1)},[],!1,null,"4ec5855a",null).exports}}]);
//# sourceMappingURL=4965-4965.js.map?v=f3767786737cc75f79aa