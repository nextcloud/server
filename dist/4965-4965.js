"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[4965],{20169:(a,e,n)=>{n.d(e,{A:()=>i});var t=n(71354),o=n.n(t),s=n(76314),p=n.n(s)()(o());p.push([a.id,"[data-v-4ec5855a] .app-changelog-dialog{min-height:50vh !important}.app-changelog-dialog__text[data-v-4ec5855a]{padding-inline:14px}","",{version:3,sources:["webpack://./apps/updatenotification/src/components/AppChangelogDialog.vue"],names:[],mappings:"AACA,wCACC,0BAAA,CAGD,6CACC,mBAAA",sourceRoot:""}]);const i=p},39858:(a,e,n)=>{n.d(e,{A:()=>i});var t=n(71354),o=n.n(t),s=n(76314),p=n.n(s)()(o());p.push([a.id,".markdown[data-v-4fb3448b] ul{list-style:disc;padding-inline-start:20px}.markdown[data-v-4fb3448b] h3,.markdown[data-v-4fb3448b] h4,.markdown[data-v-4fb3448b] h5,.markdown[data-v-4fb3448b] h6{font-weight:600;line-height:1.5;margin-top:24px;margin-bottom:12px;color:var(--color-main-text)}.markdown[data-v-4fb3448b] h3{font-size:20px}.markdown[data-v-4fb3448b] h4{font-size:18px}.markdown[data-v-4fb3448b] h5{font-size:17px}.markdown[data-v-4fb3448b] h6{font-size:var(--default-font-size)}","",{version:3,sources:["webpack://./apps/updatenotification/src/components/Markdown.vue"],names:[],mappings:"AAGE,8BACC,eAAA,CACA,yBAAA,CAGD,wHACC,eAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CACA,4BAAA,CAGD,8BACC,cAAA,CAGD,8BACC,cAAA,CAGD,8BACC,cAAA,CAGD,8BACC,kCAAA",sourceRoot:""}]);const i=p},64965:(a,e,n)=>{n.r(e),n.d(e,{default:()=>I});var t=n(85471),o=n(53334),s=n(63814),p=n(65043),i=n(94219),r=n(60023),l=n(99418);const d=(0,t.pM)({__name:"Markdown",props:{markdown:null,minHeadingLevel:{default:2}},setup(a){const e=a,{html:n}=((a,e)=>{const n=(0,t.EW)((()=>Math.min(Math.max(e.value??1,1),6))),o=new r.xI.Renderer;return o.link=function(a,e,n){let t=`<a href="${a}" rel="noreferrer noopener" target="_blank"`;return e&&(t+=' title="'+e+'"'),t+=">"+n+"</a>",t},o.image=function(a,e,n){return n||(e??"")},o.heading=(a,e)=>{const t=Math.max(n.value,e);return`<h${t}>${a}</h${t}>`},{html:(0,t.EW)((()=>l.A.sanitize((0,r.xI)((a.value??"").trim(),{renderer:o,gfm:!1,breaks:!1,pedantic:!1}),{SAFE_FOR_JQUERY:!0,ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","p","a","ul","ol","li","em","del","blockquote"]})))}})((0,t.lW)(e,"markdown"),(0,t.lW)(e,"minHeadingLevel"));return{__sfc:!0,props:e,html:n}}});var A=n(85072),c=n.n(A),u=n(97825),m=n.n(u),v=n(77659),h=n.n(v),g=n(55056),f=n.n(g),C=n(10540),b=n.n(C),k=n(41113),w=n.n(k),_=n(39858),x={};x.styleTagTransform=w(),x.setAttributes=f(),x.insert=h().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=b(),c()(_.A,x),_.A&&_.A.locals&&_.A.locals;var y=n(14486);const B=(0,y.A)(d,(function(){var a=this,e=a._self._c,n=a._self._setupProxy;return e("div",{staticClass:"markdown",domProps:{innerHTML:a._s(n.html)}})}),[],!1,null,"4fb3448b",null).exports,T=(0,t.pM)({__name:"AppChangelogDialog",props:{appId:null,version:{default:void 0},open:{type:Boolean,default:!0}},emits:["dismiss","update:open"],setup(a,e){let{emit:n}=e;const r=a,l=[{label:(0,o.Tl)("updatenotification","Give feedback"),callback:()=>{window.open(`https://apps.nextcloud.com/apps/${r.appId}#comments`,"_blank","noreferrer noopener")}},{label:(0,o.Tl)("updatenotification","Get started"),type:"primary",callback:()=>{n("dismiss"),n("update:open",!1)}}],d=(0,t.KR)(r.appId),A=(0,t.KR)(r.version??""),c=(0,t.KR)("");return(0,t.nT)((()=>{const a=r.version?(0,s.KT)("/apps/updatenotification/api/v1/changelog/{app}?version={version}",{version:r.version,app:r.appId}):(0,s.KT)("/apps/updatenotification/api/v1/changelog/{app}",{version:r.version,app:r.appId});p.Ay.get(a).then((a=>{let{data:e}=a;d.value=e.ocs.data.appName,A.value=e.ocs.data.version,c.value=e.ocs.data.content})).catch((a=>{404===a?.response?.status?(d.value=r.appId,c.value=(0,o.Tl)("updatenotification","No changelog available")):(console.error("Failed to load changelog entry",a),n("update:open",!1))}))})),{__sfc:!0,props:r,emit:n,dialogButtons:l,appName:d,appVersion:A,markdown:c,t:o.Tl,NcDialog:i.A,Markdown:B}}});var D=n(20169),G={};G.styleTagTransform=w(),G.setAttributes=f(),G.insert=h().bind(null,"head"),G.domAPI=m(),G.insertStyleElement=b(),c()(D.A,G),D.A&&D.A.locals&&D.A.locals;const I=(0,y.A)(T,(function(){var a=this,e=a._self._c,n=a._self._setupProxy;return e(n.NcDialog,{attrs:{"content-classes":"app-changelog-dialog",buttons:n.dialogButtons,name:n.t("updatenotification","What's new in {app} {version}",{app:n.appName,version:n.appVersion}),open:a.open&&void 0!==n.markdown,size:"normal"},on:{"update:open":function(e){return a.$emit("update:open",e)}}},[e(n.Markdown,{staticClass:"app-changelog-dialog__text",attrs:{markdown:n.markdown,"min-heading-level":3}})],1)}),[],!1,null,"4ec5855a",null).exports}}]);
//# sourceMappingURL=4965-4965.js.map?v=521fd979290b1d07d53f