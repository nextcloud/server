{"version":3,"file":"comments-comments-app.js?v=2ef53acf6c6a844613dc","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/node_modules/https-browserify/index.js","webpack:///nextcloud/node_modules/stream-http/index.js","webpack:///nextcloud/node_modules/layerr/dist/layerr.js","webpack:///nextcloud/apps/comments/src/components/Comment.vue?vue&type=style&index=0&id=70317f94&prod&lang=scss&scoped=true","webpack:///nextcloud/node_modules/url-parse/index.js","webpack:///nextcloud/node_modules/byte-length/dist/index.js","webpack:///nextcloud/apps/comments/src/logger.js","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyTextOutline.vue","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyTextOutline.vue?vue&type=script&lang=js","webpack://nextcloud/./node_modules/vue-material-design-icons/MessageReplyTextOutline.vue?87e1","webpack:///nextcloud/node_modules/vue-material-design-icons/MessageReplyTextOutline.vue?vue&type=template&id=5d6c4e92","webpack:///nextcloud/node_modules/webdav/dist/node/tools/url.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/digest.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/encode.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/basic.js","webpack:///nextcloud/node_modules/webdav/dist/node/auth/index.js","webpack:///nextcloud/node_modules/webdav/dist/node/compat/arrayBuffer.js","webpack:///nextcloud/node_modules/webdav/dist/node/request.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/body.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/stat.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/createDirectory.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/createStream.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/xml.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/lock.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getDAVCompliance.js","webpack:///nextcloud/node_modules/webdav/dist/node/factory.js","webpack:///nextcloud/apps/comments/src/utils/davUtils.js","webpack:///nextcloud/apps/comments/src/services/DavClient.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/copyFile.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/customRequest.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/deleteFile.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/exists.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/directoryContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/putFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/getQuota.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/quota.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/moveFile.js","webpack:///nextcloud/node_modules/webdav/dist/node/tools/size.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/partialUpdateFileContents.js","webpack:///nextcloud/node_modules/webdav/dist/node/operations/search.js","webpack:///nextcloud/apps/comments/src/utils/decodeHtmlEntities.js","webpack:///nextcloud/apps/comments/src/store/deletedCommentLimbo.js","webpack:///nextcloud/apps/comments/src/mixins/CommentMixin.js","webpack:///nextcloud/apps/comments/src/services/EditComment.js","webpack:///nextcloud/apps/comments/src/services/DeleteComment.js","webpack:///nextcloud/apps/comments/src/services/NewComment.js","webpack:///nextcloud/apps/comments/src/components/Comment.vue?vue&type=script&lang=js","webpack:///nextcloud/apps/comments/src/components/Comment.vue","webpack://nextcloud/./apps/comments/src/components/Comment.vue?7275","webpack://nextcloud/./apps/comments/src/components/Comment.vue?7f26","webpack://nextcloud/./apps/comments/src/components/Comment.vue?d1f7","webpack:///nextcloud/apps/comments/src/mixins/CommentView.ts","webpack:///nextcloud/apps/comments/src/services/GetComments.ts","webpack:///nextcloud/apps/comments/src/utils/cancelableRequest.js","webpack:///nextcloud/apps/comments/src/views/Comments.vue","webpack:///nextcloud/apps/comments/src/services/ReadComments.ts","webpack:///nextcloud/apps/comments/src/views/Comments.vue?vue&type=script&lang=js","webpack://nextcloud/./apps/comments/src/views/Comments.vue?4d55","webpack://nextcloud/./apps/comments/src/views/Comments.vue?f45b","webpack://nextcloud/./apps/comments/src/views/Comments.vue?0e41","webpack:///nextcloud/apps/comments/src/services/CommentsInstance.js","webpack:///nextcloud/apps/comments/src/comments-app.js","webpack:///nextcloud/node_modules/base-64/base64.js","webpack:///nextcloud/apps/comments/src/views/Comments.vue?vue&type=style&index=0&id=6c8c157a&prod&lang=scss&scoped=true","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud-ui-legacy:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","import { assertError, isError } from \"./error.js\";\nimport { getGlobalName } from \"./global.js\";\nimport { parseArguments } from \"./tools.js\";\nexport class Layerr extends Error {\n    constructor(errorOptionsOrMessage, messageText) {\n        const args = [...arguments];\n        const { options, shortMessage } = parseArguments(args);\n        let message = shortMessage;\n        if (options.cause) {\n            message = `${message}: ${options.cause.message}`;\n        }\n        super(message);\n        this.message = message;\n        if (options.name && typeof options.name === \"string\") {\n            this.name = options.name;\n        }\n        else {\n            this.name = getGlobalName();\n        }\n        if (options.cause) {\n            Object.defineProperty(this, \"_cause\", { value: options.cause });\n        }\n        Object.defineProperty(this, \"_info\", { value: {} });\n        if (options.info && typeof options.info === \"object\") {\n            Object.assign(this._info, options.info);\n        }\n        if (Error.captureStackTrace) {\n            const ctor = options.constructorOpt || this.constructor;\n            Error.captureStackTrace(this, ctor);\n        }\n    }\n    static cause(err) {\n        assertError(err);\n        if (!err._cause)\n            return null;\n        return isError(err._cause)\n            ? err._cause\n            : null;\n    }\n    static fullStack(err) {\n        assertError(err);\n        const cause = Layerr.cause(err);\n        if (cause) {\n            return `${err.stack}\\ncaused by: ${Layerr.fullStack(cause)}`;\n        }\n        return err.stack ?? \"\";\n    }\n    static info(err) {\n        assertError(err);\n        const output = {};\n        const cause = Layerr.cause(err);\n        if (cause) {\n            Object.assign(output, Layerr.info(cause));\n        }\n        if (err._info) {\n            Object.assign(output, err._info);\n        }\n        return output;\n    }\n    toString() {\n        let output = this.name ||\n            this.constructor.name ||\n            this.constructor.prototype.name;\n        if (this.message) {\n            output = `${output}: ${this.message}`;\n        }\n        return output;\n    }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.comment[data-v-70317f94]{display:flex;gap:8px;padding:5px 10px}.comment__side[data-v-70317f94]{display:flex;align-items:flex-start;padding-top:6px}.comment__body[data-v-70317f94]{display:flex;flex-grow:1;flex-direction:column;container-type:inline-size}.comment__header[data-v-70317f94]{display:flex;align-items:center;min-height:44px}.comment__actions[data-v-70317f94]{margin-inline-start:10px !important}.comment__author[data-v-70317f94]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:var(--color-text-maxcontrast)}.comment_loading[data-v-70317f94],.comment__timestamp[data-v-70317f94]{margin-inline-start:auto;text-align:end;white-space:nowrap;color:var(--color-text-maxcontrast)}.comment__editor-group[data-v-70317f94]{position:relative}.comment__editor-description[data-v-70317f94]{color:var(--color-text-maxcontrast);padding-block:var(--default-grid-baseline)}.comment__submit[data-v-70317f94]{position:absolute !important;bottom:5px;inset-inline-end:0}.comment__message[data-v-70317f94]{white-space:pre-wrap;word-break:normal;max-height:200px;overflow:auto;scrollbar-gutter:stable;scrollbar-width:thin;margin-top:-6px}.comment__message--expanded[data-v-70317f94]{max-height:none;overflow:visible}.comment__message[data-v-70317f94] img{max-width:100%;height:auto}.rich-contenteditable__input[data-v-70317f94]{min-height:44px;margin:0;padding:10px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/comments/src/components/Comment.vue\"],\"names\":[],\"mappings\":\"AAKA,0BACC,YAAA,CACA,OAAA,CACA,gBAAA,CAEA,gCACC,YAAA,CACA,sBAAA,CACA,eAAA,CAGD,gCACC,YAAA,CACA,WAAA,CACA,qBAAA,CACA,0BAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,eAAA,CAGD,mCACC,mCAAA,CAGD,kCACC,eAAA,CACA,kBAAA,CACA,sBAAA,CACA,mCAAA,CAGD,uEAEC,wBAAA,CACA,cAAA,CACA,kBAAA,CACA,mCAAA,CAGD,wCACC,iBAAA,CAGD,8CACC,mCAAA,CACA,0CAAA,CAGD,kCACC,4BAAA,CACA,UAAA,CACA,kBAAA,CAGD,mCACC,oBAAA,CACA,iBAAA,CACA,gBAAA,CACA,aAAA,CACA,uBAAA,CACA,oBAAA,CACA,eAAA,CACA,6CACC,eAAA,CACA,gBAAA,CAED,uCACC,cAAA,CACA,WAAA,CAKH,8CACC,eAAA,CACA,QAAA,CACA,YAlFiB\",\"sourcesContent\":[\"\\n@use \\\"sass:math\\\";\\n\\n$comment-padding: 10px;\\n\\n.comment {\\n\\tdisplay: flex;\\n\\tgap: 8px;\\n\\tpadding: 5px $comment-padding;\\n\\n\\t&__side {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-start;\\n\\t\\tpadding-top: 6px;\\n\\t}\\n\\n\\t&__body {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-grow: 1;\\n\\t\\tflex-direction: column;\\n\\t\\tcontainer-type: inline-size;\\n\\t}\\n\\n\\t&__header {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tmin-height: 44px;\\n\\t}\\n\\n\\t&__actions {\\n\\t\\tmargin-inline-start: $comment-padding !important;\\n\\t}\\n\\n\\t&__author {\\n\\t\\toverflow: hidden;\\n\\t\\twhite-space: nowrap;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t}\\n\\n\\t&_loading,\\n\\t&__timestamp {\\n\\t\\tmargin-inline-start: auto;\\n\\t\\ttext-align: end;\\n\\t\\twhite-space: nowrap;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t}\\n\\n\\t&__editor-group {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t&__editor-description {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\tpadding-block: var(--default-grid-baseline);\\n\\t}\\n\\n\\t&__submit {\\n\\t\\tposition: absolute !important;\\n\\t\\tbottom: 5px;\\n\\t\\tinset-inline-end: 0;\\n\\t}\\n\\n\\t&__message {\\n\\t\\twhite-space: pre-wrap;\\n\\t\\tword-break: normal;\\n\\t\\tmax-height: 200px;\\n\\t\\toverflow: auto;\\n\\t\\tscrollbar-gutter: stable;\\n\\t\\tscrollbar-width: thin;\\n\\t\\tmargin-top: -6px;\\n\\t\\t&--expanded {\\n\\t\\t\\tmax-height: none;\\n\\t\\t\\toverflow: visible;\\n\\t\\t}\\n\\t\\t:deep(img) {\\n\\t\\t\\tmax-width: 100%;\\n\\t\\t\\theight: auto;\\n\\t\\t}\\n\\t}\\n}\\n\\n.rich-contenteditable__input {\\n\\tmin-height: 44px;\\n\\tmargin: 0;\\n\\tpadding: $comment-padding;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Calculate the byte lengths for utf8 encoded strings.\n */\nfunction byteLength(str) {\n    if (!str) {\n        return 0;\n    }\n    str = str.toString();\n    var len = str.length;\n    for (var i = str.length; i--;) {\n        var code = str.charCodeAt(i);\n        if (0xdc00 <= code && code <= 0xdfff) {\n            i--;\n        }\n        if (0x7f < code && code <= 0x7ff) {\n            len++;\n        }\n        else if (0x7ff < code && code <= 0xffff) {\n            len += 2;\n        }\n    }\n    return len;\n}\nexports.byteLength = byteLength;\n//# sourceMappingURL=index.js.map","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getLoggerBuilder } from '@nextcloud/logger'\n\nexport default getLoggerBuilder()\n\t.setApp('comments')\n\t.detectUser()\n\t.build()\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon message-reply-text-outline-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M9 11H18V13H9V11M18 7H6V9H18V7M22 4V22L18 18H4C2.9 18 2 17.11 2 16V4C2 2.9 2.9 2 4 2H20C21.1 2 22 2.89 22 4M20 4H4V16H18.83L20 17.17V4Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"MessageReplyTextOutlineIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","import mod from \"-!../vue-loader/lib/index.js??vue-loader-options!./MessageReplyTextOutline.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../vue-loader/lib/index.js??vue-loader-options!./MessageReplyTextOutline.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageReplyTextOutline.vue?vue&type=template&id=5d6c4e92\"\nimport script from \"./MessageReplyTextOutline.vue?vue&type=script&lang=js\"\nexport * from \"./MessageReplyTextOutline.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',_vm._b({staticClass:\"material-design-icon message-reply-text-outline-icon\",attrs:{\"aria-hidden\":_vm.title ? null : 'true',\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},'span',_vm.$attrs,false),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M9 11H18V13H9V11M18 7H6V9H18V7M22 4V22L18 18H4C2.9 18 2 17.11 2 16V4C2 2.9 2.9 2 4 2H20C21.1 2 22 2.89 22 4M20 4H4V16H18.83L20 17.17V4Z\"}},[(_vm.title)?_c('title',[_vm._v(_vm._s(_vm.title))]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import URL from \"url-parse\";\nimport { Layerr } from \"layerr\";\nimport _joinURL from \"url-join\";\nimport { normalisePath } from \"./path.js\";\nexport function extractURLPath(fullURL) {\n    const url = new URL(fullURL);\n    let urlPath = url.pathname;\n    if (urlPath.length <= 0) {\n        urlPath = \"/\";\n    }\n    return normalisePath(urlPath);\n}\nexport function joinURL(...parts) {\n    return _joinURL(parts.reduce((output, nextPart, partIndex) => {\n        if (partIndex === 0 ||\n            nextPart !== \"/\" ||\n            (nextPart === \"/\" && output[output.length - 1] !== \"/\")) {\n            output.push(nextPart);\n        }\n        return output;\n    }, []));\n}\nexport function normaliseHREF(href) {\n    try {\n        const normalisedHref = href.replace(/^https?:\\/\\/[^\\/]+/, \"\");\n        return normalisedHref;\n    }\n    catch (err) {\n        throw new Layerr(err, \"Failed normalising HREF\");\n    }\n}\n","import md5 from \"md5\";\nimport { ha1Compute } from \"../tools/crypto.js\";\nconst NONCE_CHARS = \"abcdef0123456789\";\nconst NONCE_SIZE = 32;\nexport function createDigestContext(username, password, ha1) {\n    return { username, password, ha1, nc: 0, algorithm: \"md5\", hasDigestAuth: false };\n}\nexport function generateDigestAuthHeader(options, digest) {\n    const url = options.url.replace(\"//\", \"\");\n    const uri = url.indexOf(\"/\") == -1 ? \"/\" : url.slice(url.indexOf(\"/\"));\n    const method = options.method ? options.method.toUpperCase() : \"GET\";\n    const qop = /(^|,)\\s*auth\\s*($|,)/.test(digest.qop) ? \"auth\" : false;\n    const ncString = `00000000${digest.nc}`.slice(-8);\n    const ha1 = ha1Compute(digest.algorithm, digest.username, digest.realm, digest.password, digest.nonce, digest.cnonce, digest.ha1);\n    const ha2 = md5(`${method}:${uri}`);\n    const digestResponse = qop\n        ? md5(`${ha1}:${digest.nonce}:${ncString}:${digest.cnonce}:${qop}:${ha2}`)\n        : md5(`${ha1}:${digest.nonce}:${ha2}`);\n    const authValues = {\n        username: digest.username,\n        realm: digest.realm,\n        nonce: digest.nonce,\n        uri,\n        qop,\n        response: digestResponse,\n        nc: ncString,\n        cnonce: digest.cnonce,\n        algorithm: digest.algorithm,\n        opaque: digest.opaque\n    };\n    const authHeader = [];\n    for (const k in authValues) {\n        if (authValues[k]) {\n            if (k === \"qop\" || k === \"nc\" || k === \"algorithm\") {\n                authHeader.push(`${k}=${authValues[k]}`);\n            }\n            else {\n                authHeader.push(`${k}=\"${authValues[k]}\"`);\n            }\n        }\n    }\n    return `Digest ${authHeader.join(\", \")}`;\n}\nfunction makeNonce() {\n    let uid = \"\";\n    for (let i = 0; i < NONCE_SIZE; ++i) {\n        uid = `${uid}${NONCE_CHARS[Math.floor(Math.random() * NONCE_CHARS.length)]}`;\n    }\n    return uid;\n}\nexport function parseDigestAuth(response, _digest) {\n    const isDigest = responseIndicatesDigestAuth(response);\n    if (!isDigest) {\n        return false;\n    }\n    const re = /([a-z0-9_-]+)=(?:\"([^\"]+)\"|([a-z0-9_-]+))/gi;\n    for (;;) {\n        const authHeader = (response.headers && response.headers.get(\"www-authenticate\")) || \"\";\n        const match = re.exec(authHeader);\n        if (!match) {\n            break;\n        }\n        _digest[match[1]] = match[2] || match[3];\n    }\n    _digest.nc += 1;\n    _digest.cnonce = makeNonce();\n    return true;\n}\nexport function responseIndicatesDigestAuth(response) {\n    const authHeader = (response.headers && response.headers.get(\"www-authenticate\")) || \"\";\n    return authHeader.split(/\\s/)[0].toLowerCase() === \"digest\";\n}\n","import base64 from \"base-64\";\nimport { decodeHTML } from \"entities\";\nimport { isWeb } from \"../compat/env.js\";\nexport function decodeHTMLEntities(text) {\n    if (isWeb()) {\n        const txt = document.createElement(\"textarea\");\n        txt.innerHTML = text;\n        return txt.value;\n    }\n    return decodeHTML(text);\n}\nexport function fromBase64(text) {\n    return base64.decode(text);\n}\nexport function toBase64(text) {\n    return base64.encode(text);\n}\n","import { toBase64 } from \"../tools/encode.js\";\nexport function generateBasicAuthHeader(username, password) {\n    const encoded = toBase64(`${username}:${password}`);\n    return `Basic ${encoded}`;\n}\n","import { Layerr } from \"layerr\";\nimport { createDigestContext } from \"./digest.js\";\nimport { generateBasicAuthHeader } from \"./basic.js\";\nimport { generateTokenAuthHeader } from \"./oauth.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nexport function setupAuth(context, username, password, oauthToken, ha1) {\n    switch (context.authType) {\n        case AuthType.Auto:\n            if (username && password) {\n                context.headers.Authorization = generateBasicAuthHeader(username, password);\n            }\n            break;\n        case AuthType.Digest:\n            context.digest = createDigestContext(username, password, ha1);\n            break;\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password:\n            context.headers.Authorization = generateBasicAuthHeader(username, password);\n            break;\n        case AuthType.Token:\n            context.headers.Authorization = generateTokenAuthHeader(oauthToken);\n            break;\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.InvalidAuthType\n                }\n            }, `Invalid auth type: ${context.authType}`);\n    }\n}\n","const hasArrayBuffer = typeof ArrayBuffer === \"function\";\nconst { toString: objToString } = Object.prototype;\n// Taken from: https://github.com/fengyuanchen/is-array-buffer/blob/master/src/index.js\nexport function isArrayBuffer(value) {\n    return (hasArrayBuffer &&\n        (value instanceof ArrayBuffer || objToString.call(value) === \"[object ArrayBuffer]\"));\n}\n","import { Agent as HTTPAgent } from \"http\";\nimport { Agent as HTTPSAgent } from \"https\";\nimport { fetch } from \"@buttercup/fetch\";\nimport { getPatcher } from \"./compat/patcher.js\";\nimport { isReactNative, isWeb } from \"./compat/env.js\";\nimport { generateDigestAuthHeader, parseDigestAuth, responseIndicatesDigestAuth } from \"./auth/digest.js\";\nimport { cloneShallow, merge } from \"./tools/merge.js\";\nimport { mergeHeaders } from \"./tools/headers.js\";\nimport { requestDataToFetchBody } from \"./tools/body.js\";\nimport { AuthType } from \"./types.js\";\nimport { setupAuth } from \"./auth/index.js\";\nfunction getFetchOptions(requestOptions) {\n    let headers = {};\n    // Handle standard options\n    const opts = {\n        method: requestOptions.method\n    };\n    if (requestOptions.headers) {\n        headers = mergeHeaders(headers, requestOptions.headers);\n    }\n    if (typeof requestOptions.data !== \"undefined\") {\n        const [body, newHeaders] = requestDataToFetchBody(requestOptions.data);\n        opts.body = body;\n        headers = mergeHeaders(headers, newHeaders);\n    }\n    if (requestOptions.signal) {\n        opts.signal = requestOptions.signal;\n    }\n    if (requestOptions.withCredentials) {\n        opts.credentials = \"include\";\n    }\n    // Check for node-specific options\n    if (!isWeb() && !isReactNative()) {\n        if (requestOptions.httpAgent || requestOptions.httpsAgent) {\n            opts.agent = (parsedURL) => {\n                if (parsedURL.protocol === \"http:\") {\n                    return requestOptions.httpAgent || new HTTPAgent();\n                }\n                return requestOptions.httpsAgent || new HTTPSAgent();\n            };\n        }\n    }\n    // Attach headers\n    opts.headers = headers;\n    return opts;\n}\nexport function prepareRequestOptions(requestOptions, context, userOptions) {\n    const finalOptions = cloneShallow(requestOptions);\n    finalOptions.headers = mergeHeaders(context.headers, finalOptions.headers || {}, userOptions.headers || {});\n    if (typeof userOptions.data !== \"undefined\") {\n        finalOptions.data = userOptions.data;\n    }\n    if (userOptions.signal) {\n        finalOptions.signal = userOptions.signal;\n    }\n    if (context.httpAgent) {\n        finalOptions.httpAgent = context.httpAgent;\n    }\n    if (context.httpsAgent) {\n        finalOptions.httpsAgent = context.httpsAgent;\n    }\n    if (context.digest) {\n        finalOptions._digest = context.digest;\n    }\n    if (typeof context.withCredentials === \"boolean\") {\n        finalOptions.withCredentials = context.withCredentials;\n    }\n    return finalOptions;\n}\nexport async function request(requestOptions, context) {\n    if (context.authType === AuthType.Auto) {\n        return requestAuto(requestOptions, context);\n    }\n    if (requestOptions._digest) {\n        return requestDigest(requestOptions);\n    }\n    return requestStandard(requestOptions);\n}\nasync function requestAuto(requestOptions, context) {\n    const response = await requestStandard(requestOptions);\n    if (response.ok) {\n        context.authType = AuthType.Password;\n        return response;\n    }\n    if (response.status == 401 && responseIndicatesDigestAuth(response)) {\n        context.authType = AuthType.Digest;\n        setupAuth(context, context.username, context.password, undefined, undefined);\n        requestOptions._digest = context.digest;\n        return requestDigest(requestOptions);\n    }\n    return response;\n}\nasync function requestDigest(requestOptions) {\n    // Remove client's digest authentication object from request options\n    const _digest = requestOptions._digest;\n    delete requestOptions._digest;\n    // If client is already using digest authentication, include the digest authorization header\n    if (_digest.hasDigestAuth) {\n        requestOptions = merge(requestOptions, {\n            headers: {\n                Authorization: generateDigestAuthHeader(requestOptions, _digest)\n            }\n        });\n    }\n    // Perform digest request + check\n    const response = await requestStandard(requestOptions);\n    if (response.status == 401) {\n        _digest.hasDigestAuth = parseDigestAuth(response, _digest);\n        if (_digest.hasDigestAuth) {\n            requestOptions = merge(requestOptions, {\n                headers: {\n                    Authorization: generateDigestAuthHeader(requestOptions, _digest)\n                }\n            });\n            const response2 = await requestStandard(requestOptions);\n            if (response2.status == 401) {\n                _digest.hasDigestAuth = false;\n            }\n            else {\n                _digest.nc++;\n            }\n            return response2;\n        }\n    }\n    else {\n        _digest.nc++;\n    }\n    return response;\n}\nfunction requestStandard(requestOptions) {\n    const patcher = getPatcher();\n    return patcher.patchInline(\"request\", (options) => patcher.patchInline(\"fetch\", fetch, options.url, getFetchOptions(options)), requestOptions);\n}\n","import Stream from \"stream\";\nimport { isArrayBuffer } from \"../compat/arrayBuffer.js\";\nimport { isBuffer } from \"../compat/buffer.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nexport function requestDataToFetchBody(data) {\n    if (!isWeb() && !isReactNative() && data instanceof Stream.Readable) {\n        // @ts-ignore\n        return [data, {}];\n    }\n    if (typeof data === \"string\") {\n        return [data, {}];\n    }\n    else if (isBuffer(data)) {\n        return [data, {}];\n    }\n    else if (isArrayBuffer(data)) {\n        return [data, {}];\n    }\n    else if (data && typeof data === \"object\") {\n        return [\n            JSON.stringify(data),\n            {\n                \"content-type\": \"application/json\"\n            }\n        ];\n    }\n    throw new Error(`Unable to convert request body: Unexpected body type: ${typeof data}`);\n}\n","import { parseStat, parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nexport async function getStat(context, filename, options = {}) {\n    const { details: isDetailed = false } = options;\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: \"0\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const stat = parseStat(result, filename, isDetailed);\n    return processResponsePayload(response, stat, isDetailed);\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath, getAllDirectories, normalisePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { getStat } from \"./stat.js\";\nexport async function createDirectory(context, dirPath, options = {}) {\n    if (options.recursive === true)\n        return createDirectoryRecursively(context, dirPath, options);\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, ensureCollectionPath(encodePath(dirPath))),\n        method: \"MKCOL\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n/**\n * Ensure the path is a proper \"collection\" path by ensuring it has a trailing \"/\".\n * The proper format of collection according to the specification does contain the trailing slash.\n * http://www.webdav.org/specs/rfc4918.html#rfc.section.5.2\n * @param path Path of the collection\n * @return string Path of the collection with appended trailing \"/\" in case the `path` does not have it.\n */\nfunction ensureCollectionPath(path) {\n    if (!path.endsWith(\"/\")) {\n        return path + \"/\";\n    }\n    return path;\n}\nasync function createDirectoryRecursively(context, dirPath, options = {}) {\n    const paths = getAllDirectories(normalisePath(dirPath));\n    paths.sort((a, b) => {\n        if (a.length > b.length) {\n            return 1;\n        }\n        else if (b.length > a.length) {\n            return -1;\n        }\n        return 0;\n    });\n    let creating = false;\n    for (const testPath of paths) {\n        if (creating) {\n            await createDirectory(context, testPath, {\n                ...options,\n                recursive: false\n            });\n            continue;\n        }\n        try {\n            const testStat = (await getStat(context, testPath));\n            if (testStat.type !== \"directory\") {\n                throw new Error(`Path includes a file: ${dirPath}`);\n            }\n        }\n        catch (err) {\n            const error = err;\n            if (error.status === 404) {\n                creating = true;\n                await createDirectory(context, testPath, {\n                    ...options,\n                    recursive: false\n                });\n            }\n            else {\n                throw err;\n            }\n        }\n    }\n}\n","import Stream from \"stream\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nconst NOOP = () => { };\nexport function createReadStream(context, filePath, options = {}) {\n    const PassThroughStream = Stream.PassThrough;\n    const outStream = new PassThroughStream();\n    getFileStream(context, filePath, options)\n        .then(stream => {\n        stream.pipe(outStream);\n    })\n        .catch(err => {\n        outStream.emit(\"error\", err);\n    });\n    return outStream;\n}\nexport function createWriteStream(context, filePath, options = {}, callback = NOOP) {\n    const PassThroughStream = Stream.PassThrough;\n    const writeStream = new PassThroughStream();\n    const headers = {};\n    if (options.overwrite === false) {\n        headers[\"If-None-Match\"] = \"*\";\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data: writeStream,\n        maxRedirects: 0\n    }, context, options);\n    request(requestOptions, context)\n        .then(response => handleResponseCode(context, response))\n        .then(response => {\n        // Fire callback asynchronously to avoid errors\n        setTimeout(() => {\n            callback(response);\n        }, 0);\n    })\n        .catch(err => {\n        writeStream.emit(\"error\", err);\n    });\n    return writeStream;\n}\nasync function getFileStream(context, filePath, options = {}) {\n    const headers = {};\n    if (typeof options.range === \"object\" && typeof options.range.start === \"number\") {\n        let rangeHeader = `bytes=${options.range.start}-`;\n        if (typeof options.range.end === \"number\") {\n            rangeHeader = `${rangeHeader}${options.range.end}`;\n        }\n        headers.Range = rangeHeader;\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\",\n        headers\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    if (headers.Range && response.status !== 206) {\n        const responseError = new Error(`Invalid response code for partial request: ${response.status}`);\n        responseError.status = response.status;\n        throw responseError;\n    }\n    if (options.callback) {\n        setTimeout(() => {\n            options.callback(response);\n        }, 0);\n    }\n    // @ts-ignore\n    return response.body;\n}\n","import { Layerr } from \"layerr\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { fromBase64 } from \"../tools/encode.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nconst TRANSFORM_RETAIN_FORMAT = (v) => v;\nexport async function getFileContents(context, filePath, options = {}) {\n    const { format = \"binary\" } = options;\n    if (format !== \"binary\" && format !== \"text\") {\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidOutputFormat\n            }\n        }, `Invalid output format: ${format}`);\n    }\n    return format === \"text\"\n        ? getFileContentsString(context, filePath, options)\n        : getFileContentsBuffer(context, filePath, options);\n}\nasync function getFileContentsBuffer(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    let body;\n    if (isWeb() || isReactNative()) {\n        body = await response.arrayBuffer();\n    }\n    else {\n        body = Buffer.from(await response.arrayBuffer());\n    }\n    return processResponsePayload(response, body, options.details);\n}\nasync function getFileContentsString(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"GET\",\n        headers: {\n            Accept: \"text/plain\"\n        },\n        transformResponse: [TRANSFORM_RETAIN_FORMAT]\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const body = await response.text();\n    return processResponsePayload(response, body, options.details);\n}\nexport function getFileDownloadLink(context, filePath) {\n    let url = joinURL(context.remoteURL, encodePath(filePath));\n    const protocol = /^https:/i.test(url) ? \"https\" : \"http\";\n    switch (context.authType) {\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password: {\n            const authPart = context.headers.Authorization.replace(/^Basic /i, \"\").trim();\n            const authContents = fromBase64(authPart);\n            url = url.replace(/^https?:\\/\\//, `${protocol}://${authContents}@`);\n            break;\n        }\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.LinkUnsupportedAuthType\n                }\n            }, `Unsupported auth type for file link: ${context.authType}`);\n    }\n    return url;\n}\n","import { XMLParser, XMLBuilder } from \"fast-xml-parser\";\nexport function generateLockXML(ownerHREF) {\n    return getBuilder().build(namespace({\n        lockinfo: {\n            \"@_xmlns:d\": \"DAV:\",\n            lockscope: {\n                exclusive: {}\n            },\n            locktype: {\n                write: {}\n            },\n            owner: {\n                href: ownerHREF\n            }\n        }\n    }, \"d\"));\n}\nfunction getBuilder() {\n    return new XMLBuilder({\n        attributeNamePrefix: \"@_\",\n        format: true,\n        ignoreAttributes: false,\n        suppressEmptyNode: true\n    });\n}\nfunction getParser() {\n    return new XMLParser({\n        removeNSPrefix: true,\n        parseAttributeValue: true,\n        parseTagValue: true\n    });\n}\nfunction namespace(obj, ns) {\n    const copy = { ...obj };\n    for (const key in copy) {\n        if (!copy.hasOwnProperty(key)) {\n            continue;\n        }\n        if (copy[key] && typeof copy[key] === \"object\" && key.indexOf(\":\") === -1) {\n            copy[`${ns}:${key}`] = namespace(copy[key], ns);\n            delete copy[key];\n        }\n        else if (/^@_/.test(key) === false) {\n            copy[`${ns}:${key}`] = copy[key];\n            delete copy[key];\n        }\n    }\n    return copy;\n}\nexport function parseGenericResponse(xml) {\n    return getParser().parse(xml);\n}\n","import nestedProp from \"nested-property\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { generateLockXML, parseGenericResponse } from \"../tools/xml.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { createErrorFromResponse, handleResponseCode } from \"../response.js\";\nconst DEFAULT_TIMEOUT = \"Infinite, Second-4100000000\";\nexport async function lock(context, path, options = {}) {\n    const { refreshToken, timeout = DEFAULT_TIMEOUT } = options;\n    const headers = {\n        Accept: \"text/plain,application/xml\",\n        Timeout: timeout\n    };\n    if (refreshToken) {\n        headers.If = refreshToken;\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(path)),\n        method: \"LOCK\",\n        headers,\n        data: generateLockXML(context.contactHref)\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const lockPayload = parseGenericResponse(responseData);\n    const token = nestedProp.get(lockPayload, \"prop.lockdiscovery.activelock.locktoken.href\");\n    const serverTimeout = nestedProp.get(lockPayload, \"prop.lockdiscovery.activelock.timeout\");\n    if (!token) {\n        const err = createErrorFromResponse(response, \"No lock token received: \");\n        throw err;\n    }\n    return {\n        token,\n        serverTimeout\n    };\n}\nexport async function unlock(context, path, token, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(path)),\n        method: \"UNLOCK\",\n        headers: {\n            \"Lock-Token\": token\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    if (response.status !== 204 && response.status !== 200) {\n        const err = createErrorFromResponse(response);\n        throw err;\n    }\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function getDAVCompliance(context, filePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"OPTIONS\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    try {\n        handleResponseCode(context, response);\n    }\n    catch (err) {\n        const error = err;\n        throw error;\n    }\n    const davHeader = response.headers.get(\"DAV\") ?? \"\";\n    const compliance = davHeader.split(\",\").map(item => item.trim());\n    const server = response.headers.get(\"Server\") ?? \"\";\n    return {\n        compliance,\n        server\n    };\n}\n","import { extractURLPath } from \"./tools/url.js\";\nimport { setupAuth } from \"./auth/index.js\";\nimport { copyFile } from \"./operations/copyFile.js\";\nimport { createDirectory } from \"./operations/createDirectory.js\";\nimport { createReadStream, createWriteStream } from \"./operations/createStream.js\";\nimport { customRequest } from \"./operations/customRequest.js\";\nimport { deleteFile } from \"./operations/deleteFile.js\";\nimport { exists } from \"./operations/exists.js\";\nimport { getDirectoryContents } from \"./operations/directoryContents.js\";\nimport { getFileContents, getFileDownloadLink } from \"./operations/getFileContents.js\";\nimport { lock, unlock } from \"./operations/lock.js\";\nimport { getQuota } from \"./operations/getQuota.js\";\nimport { getStat } from \"./operations/stat.js\";\nimport { getSearch } from \"./operations/search.js\";\nimport { moveFile } from \"./operations/moveFile.js\";\nimport { getFileUploadLink, putFileContents } from \"./operations/putFileContents.js\";\nimport { partialUpdateFileContents } from \"./operations/partialUpdateFileContents.js\";\nimport { getDAVCompliance } from \"./operations/getDAVCompliance.js\";\nimport { AuthType } from \"./types.js\";\nconst DEFAULT_CONTACT_HREF = \"https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md\";\nexport function createClient(remoteURL, options = {}) {\n    const { authType: authTypeRaw = null, remoteBasePath, contactHref = DEFAULT_CONTACT_HREF, ha1, headers = {}, httpAgent, httpsAgent, password, token, username, withCredentials } = options;\n    let authType = authTypeRaw;\n    if (!authType) {\n        authType = username || password ? AuthType.Password : AuthType.None;\n    }\n    const context = {\n        authType,\n        remoteBasePath,\n        contactHref,\n        ha1,\n        headers: Object.assign({}, headers),\n        httpAgent,\n        httpsAgent,\n        password,\n        remotePath: extractURLPath(remoteURL),\n        remoteURL,\n        token,\n        username,\n        withCredentials\n    };\n    setupAuth(context, username, password, token, ha1);\n    return {\n        copyFile: (filename, destination, options) => copyFile(context, filename, destination, options),\n        createDirectory: (path, options) => createDirectory(context, path, options),\n        createReadStream: (filename, options) => createReadStream(context, filename, options),\n        createWriteStream: (filename, options, callback) => createWriteStream(context, filename, options, callback),\n        customRequest: (path, requestOptions) => customRequest(context, path, requestOptions),\n        deleteFile: (filename, options) => deleteFile(context, filename, options),\n        exists: (path, options) => exists(context, path, options),\n        getDirectoryContents: (path, options) => getDirectoryContents(context, path, options),\n        getFileContents: (filename, options) => getFileContents(context, filename, options),\n        getFileDownloadLink: (filename) => getFileDownloadLink(context, filename),\n        getFileUploadLink: (filename) => getFileUploadLink(context, filename),\n        getHeaders: () => Object.assign({}, context.headers),\n        getQuota: (options) => getQuota(context, options),\n        lock: (path, options) => lock(context, path, options),\n        moveFile: (filename, destinationFilename, options) => moveFile(context, filename, destinationFilename, options),\n        putFileContents: (filename, data, options) => putFileContents(context, filename, data, options),\n        partialUpdateFileContents: (filePath, start, end, data, options) => partialUpdateFileContents(context, filePath, start, end, data, options),\n        getDAVCompliance: (path) => getDAVCompliance(context, path),\n        search: (path, options) => getSearch(context, path, options),\n        setHeaders: (headers) => {\n            context.headers = Object.assign({}, headers);\n        },\n        stat: (path, options) => getStat(context, path, options),\n        unlock: (path, token, options) => unlock(context, path, token, options)\n    };\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { generateRemoteUrl } from '@nextcloud/router'\n\n/**\n *\n */\nfunction getRootPath() {\n\treturn generateRemoteUrl('dav/comments')\n}\n\nexport { getRootPath }\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getRequestToken, onRequestTokenUpdate } from '@nextcloud/auth'\nimport { createClient } from 'webdav'\nimport { getRootPath } from '../utils/davUtils.js'\n\n// init webdav client\nconst client = createClient(getRootPath())\n\n// set CSRF token header\n/**\n * @param token\n */\nfunction setHeaders(token) {\n\tclient.setHeaders({\n\t\t// Add this so the server knows it is an request from the browser\n\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t// Inject user auth\n\t\trequesttoken: token ?? '',\n\t})\n}\n\n// refresh headers when request token changes\nonRequestTokenUpdate(setHeaders)\nsetHeaders(getRequestToken())\n\nexport default client\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function copyFile(context, filename, destination, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"COPY\",\n        headers: {\n            Destination: joinURL(context.remoteURL, encodePath(destination)),\n            /**\n             * From RFC4918 section 10.6: If the overwrite header is not included in a COPY or MOVE request,\n             * then the resource MUST treat the request as if it has an overwrite header of value \"T\".\n             *\n             * Meaning the overwrite header is always set to \"T\" EXCEPT the option is explicitly set to false.\n             */\n            Overwrite: options.overwrite === false ? \"F\" : \"T\",\n            /**\n             * From RFC4918 section 9.8.3: A client may submit a Depth header on a COPY on a collection with a value of \"0\"\n             * or \"infinity\". The COPY method on a collection without a Depth header MUST act as if\n             * a Depth header with value \"infinity\" was included.\n             */\n            Depth: options.shallow ? \"0\" : \"infinity\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function customRequest(context, remotePath, requestOptions) {\n    if (!requestOptions.url) {\n        requestOptions.url = joinURL(context.remoteURL, encodePath(remotePath));\n    }\n    const finalOptions = prepareRequestOptions(requestOptions, context, {});\n    const response = await request(finalOptions, context);\n    handleResponseCode(context, response);\n    return response;\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function deleteFile(context, filename, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"DELETE\"\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { getStat } from \"./stat.js\";\nexport async function exists(context, remotePath, options = {}) {\n    try {\n        await getStat(context, remotePath, options);\n        return true;\n    }\n    catch (err) {\n        if (err.status === 404) {\n            return false;\n        }\n        throw err;\n    }\n}\n","import pathPosix from \"path-posix\";\nimport { joinURL, normaliseHREF } from \"../tools/url.js\";\nimport { encodePath, makePathAbsolute, normalisePath } from \"../tools/path.js\";\nimport { parseXML, prepareFileFromProps } from \"../tools/dav.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processGlobFilter, processResponsePayload } from \"../response.js\";\nexport async function getDirectoryContents(context, remotePath, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(remotePath), \"/\"),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: options.deep ? \"infinity\" : \"1\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    if (!responseData) {\n        throw new Error(\"Failed parsing directory contents: Empty response\");\n    }\n    const davResp = await parseXML(responseData);\n    const _remotePath = makePathAbsolute(remotePath);\n    const remoteBasePath = makePathAbsolute(context.remoteBasePath || context.remotePath);\n    let files = getDirectoryFiles(davResp, remoteBasePath, _remotePath, options.details, options.includeSelf);\n    if (options.glob) {\n        files = processGlobFilter(files, options.glob);\n    }\n    return processResponsePayload(response, files, options.details);\n}\nfunction getDirectoryFiles(result, serverremoteBasePath, requestPath, isDetailed = false, includeSelf = false) {\n    const serverBase = pathPosix.join(serverremoteBasePath, \"/\");\n    // Extract the response items (directory contents)\n    const { multistatus: { response: responseItems } } = result;\n    // Map all items to a consistent output structure (results)\n    const nodes = responseItems.map(item => {\n        // HREF is the file path (in full) - The href is already XML entities decoded (e.g. foo&amp;bar is reverted to foo&bar)\n        const href = normaliseHREF(item.href);\n        // Each item should contain a stat object\n        const { propstat: { prop: props } } = item;\n        // Process the true full filename (minus the base server path)\n        const filename = serverBase === \"/\"\n            ? decodeURIComponent(normalisePath(href))\n            : normalisePath(pathPosix.relative(decodeURIComponent(serverBase), decodeURIComponent(href)));\n        return prepareFileFromProps(props, filename, isDetailed);\n    });\n    // If specified, also return the current directory\n    if (includeSelf) {\n        return nodes;\n    }\n    // Else, filter out the item pointing to the current directory (not needed)\n    return nodes.filter(item => item.basename &&\n        (item.type === \"file\" || item.filename !== requestPath.replace(/\\/$/, \"\")));\n}\n","import { Layerr } from \"layerr\";\nimport Stream from \"stream\";\nimport { fromBase64 } from \"../tools/encode.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { calculateDataLength } from \"../tools/size.js\";\nimport { isReactNative, isWeb } from \"../compat/env.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { AuthType, ErrorCode } from \"../types.js\";\nexport async function putFileContents(context, filePath, data, options = {}) {\n    const { contentLength = true, overwrite = true } = options;\n    const headers = {\n        \"Content-Type\": \"application/octet-stream\"\n    };\n    if (!isWeb() &&\n        !isReactNative() &&\n        typeof Stream !== \"undefined\" &&\n        typeof Stream?.Readable !== \"undefined\" &&\n        data instanceof Stream.Readable) {\n        // Skip, no content-length\n    }\n    else if (contentLength === false) {\n        // Skip, disabled\n    }\n    else if (typeof contentLength === \"number\") {\n        headers[\"Content-Length\"] = `${contentLength}`;\n    }\n    else {\n        headers[\"Content-Length\"] = `${calculateDataLength(data)}`;\n    }\n    if (!overwrite) {\n        headers[\"If-None-Match\"] = \"*\";\n    }\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    try {\n        handleResponseCode(context, response);\n    }\n    catch (err) {\n        const error = err;\n        if (error.status === 412 && !overwrite) {\n            return false;\n        }\n        else {\n            throw error;\n        }\n    }\n    return true;\n}\nexport function getFileUploadLink(context, filePath) {\n    let url = `${joinURL(context.remoteURL, encodePath(filePath))}?Content-Type=application/octet-stream`;\n    const protocol = /^https:/i.test(url) ? \"https\" : \"http\";\n    switch (context.authType) {\n        case AuthType.None:\n            // Do nothing\n            break;\n        case AuthType.Password: {\n            const authPart = context.headers.Authorization.replace(/^Basic /i, \"\").trim();\n            const authContents = fromBase64(authPart);\n            url = url.replace(/^https?:\\/\\//, `${protocol}://${authContents}@`);\n            break;\n        }\n        default:\n            throw new Layerr({\n                info: {\n                    code: ErrorCode.LinkUnsupportedAuthType\n                }\n            }, `Unsupported auth type for file link: ${context.authType}`);\n    }\n    return url;\n}\n","import { prepareRequestOptions, request } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nimport { parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { parseQuota } from \"../tools/quota.js\";\nexport async function getQuota(context, options = {}) {\n    const path = options.path || \"/\";\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, path),\n        method: \"PROPFIND\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            Depth: \"0\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const quota = parseQuota(result);\n    return processResponsePayload(response, quota, options.details);\n}\n","import { translateDiskSpace } from \"./dav.js\";\nexport function parseQuota(result) {\n    try {\n        const [responseItem] = result.multistatus.response;\n        const { propstat: { prop: { \"quota-used-bytes\": quotaUsed, \"quota-available-bytes\": quotaAvail } } } = responseItem;\n        return typeof quotaUsed !== \"undefined\" && typeof quotaAvail !== \"undefined\"\n            ? {\n                // As it could be both a string or a number ensure we are working with a number\n                used: parseInt(String(quotaUsed), 10),\n                available: translateDiskSpace(quotaAvail)\n            }\n            : null;\n    }\n    catch (err) {\n        /* ignore */\n    }\n    return null;\n}\n","import { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nexport async function moveFile(context, filename, destination, options = {}) {\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filename)),\n        method: \"MOVE\",\n        headers: {\n            Destination: joinURL(context.remoteURL, encodePath(destination)),\n            /**\n             * From RFC4918 section 10.6: If the overwrite header is not included in a COPY or MOVE request,\n             * then the resource MUST treat the request as if it has an overwrite header of value \"T\".\n             *\n             * Meaning the overwrite header is always set to \"T\" EXCEPT the option is explicitly set to false.\n             */\n            Overwrite: options.overwrite === false ? \"F\" : \"T\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { Layerr } from \"layerr\";\nimport { byteLength } from \"byte-length\";\nimport { isArrayBuffer } from \"../compat/arrayBuffer.js\";\nimport { isBuffer } from \"../compat/buffer.js\";\nimport { ErrorCode } from \"../types.js\";\nexport function calculateDataLength(data) {\n    if (isArrayBuffer(data)) {\n        return data.byteLength;\n    }\n    else if (isBuffer(data)) {\n        return data.length;\n    }\n    else if (typeof data === \"string\") {\n        return byteLength(data);\n    }\n    throw new Layerr({\n        info: {\n            code: ErrorCode.DataTypeNoLength\n        }\n    }, \"Cannot calculate data length: Invalid type\");\n}\n","import { Layerr } from \"layerr\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode } from \"../response.js\";\nimport { getDAVCompliance } from \"./getDAVCompliance.js\";\nimport { ErrorCode } from \"../types.js\";\nexport async function partialUpdateFileContents(context, filePath, start, end, data, options = {}) {\n    const compliance = await getDAVCompliance(context, filePath, options);\n    if (compliance.compliance.includes(\"sabredav-partialupdate\")) {\n        return await partialUpdateFileContentsSabredav(context, filePath, start, end, data, options);\n    }\n    if (compliance.server.includes(\"Apache\") &&\n        compliance.compliance.includes(\"<http://apache.org/dav/propset/fs/1>\")) {\n        return await partialUpdateFileContentsApache(context, filePath, start, end, data, options);\n    }\n    throw new Layerr({\n        info: {\n            code: ErrorCode.NotSupported\n        }\n    }, \"Not supported\");\n}\nasync function partialUpdateFileContentsSabredav(context, filePath, start, end, data, options = {}) {\n    if (start > end || start < 0) {\n        // Actually, SabreDAV support negative start value,\n        // Do not support here for compatibility with Apache-style way\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidUpdateRange\n            }\n        }, `Invalid update range ${start} for partial update`);\n    }\n    const headers = {\n        \"Content-Type\": \"application/x-sabredav-partialupdate\",\n        \"Content-Length\": `${end - start + 1}`,\n        \"X-Update-Range\": `bytes=${start}-${end}`\n    };\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PATCH\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\nasync function partialUpdateFileContentsApache(context, filePath, start, end, data, options = {}) {\n    if (start > end || start < 0) {\n        throw new Layerr({\n            info: {\n                code: ErrorCode.InvalidUpdateRange\n            }\n        }, `Invalid update range ${start} for partial update`);\n    }\n    const headers = {\n        \"Content-Type\": \"application/octet-stream\",\n        \"Content-Length\": `${end - start + 1}`,\n        \"Content-Range\": `bytes ${start}-${end}/*`\n    };\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(filePath)),\n        method: \"PUT\",\n        headers,\n        data\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n}\n","import { parseSearch, parseXML } from \"../tools/dav.js\";\nimport { joinURL } from \"../tools/url.js\";\nimport { encodePath } from \"../tools/path.js\";\nimport { request, prepareRequestOptions } from \"../request.js\";\nimport { handleResponseCode, processResponsePayload } from \"../response.js\";\nexport async function getSearch(context, searchArbiter, options = {}) {\n    const { details: isDetailed = false } = options;\n    const requestOptions = prepareRequestOptions({\n        url: joinURL(context.remoteURL, encodePath(searchArbiter)),\n        method: \"SEARCH\",\n        headers: {\n            Accept: \"text/plain,application/xml\",\n            // Ensure a Content-Type header is set was this is required by e.g. sabre/dav\n            \"Content-Type\": context.headers[\"Content-Type\"] || \"application/xml; charset=utf-8\"\n        }\n    }, context, options);\n    const response = await request(requestOptions, context);\n    handleResponseCode(context, response);\n    const responseText = await response.text();\n    const responseData = await parseXML(responseText);\n    const results = parseSearch(responseData, searchArbiter, isDetailed);\n    return processResponsePayload(response, results, isDetailed);\n}\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * @param {any} value -\n * @param {any} passes -\n */\nexport function decodeHtmlEntities(value, passes = 1) {\n\tconst parser = new DOMParser()\n\tlet decoded = value\n\tfor (let i = 0; i < passes; i++) {\n\t\tdecoded = parser.parseFromString(decoded, 'text/html').documentElement.textContent\n\t}\n\treturn decoded\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { defineStore } from 'pinia'\n\nexport const useDeletedCommentLimbo = defineStore('deletedCommentLimbo', {\n\tstate: () => ({\n\t\tidsInLimbo: [],\n\t}),\n\tactions: {\n\t\taddId(id) {\n\t\t\tthis.idsInLimbo.push(id)\n\t\t},\n\n\t\tremoveId(id) {\n\t\t\tconst index = this.idsInLimbo.indexOf(id)\n\t\t\tif (index > -1) {\n\t\t\t\tthis.idsInLimbo.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\tcheckForId(id) {\n\t\t\treturn this.idsInLimbo.includes(id)\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { showError, showUndo, TOAST_UNDO_TIMEOUT } from '@nextcloud/dialogs'\nimport { mapStores } from 'pinia'\nimport logger from '../logger.js'\nimport DeleteComment from '../services/DeleteComment.js'\nimport EditComment from '../services/EditComment.js'\nimport NewComment from '../services/NewComment.js'\nimport { useDeletedCommentLimbo } from '../store/deletedCommentLimbo.js'\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tresourceId: {\n\t\t\ttype: [String, Number],\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'files',\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tdeleted: false,\n\t\t\tediting: false,\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapStores(useDeletedCommentLimbo),\n\t},\n\n\tmethods: {\n\t\t// EDITION\n\t\tonEdit() {\n\t\t\tthis.editing = true\n\t\t},\n\t\tonEditCancel() {\n\t\t\tthis.editing = false\n\t\t\t// Restore original value\n\t\t\tthis.updateLocalMessage(this.message)\n\t\t},\n\t\tasync onEditComment(message) {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tawait EditComment(this.resourceType, this.resourceId, this.id, message)\n\t\t\t\tlogger.debug('Comment edited', { resourceType: this.resourceType, resourceId: this.resourceId, id: this.id, message })\n\t\t\t\tthis.$emit('update:message', message)\n\t\t\t\tthis.editing = false\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to edit the comment'))\n\t\t\t\tlogger.error('An error occurred while trying to edit the comment', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t// DELETION\n\t\tonDeleteWithUndo() {\n\t\t\tthis.$emit('delete')\n\t\t\tthis.deleted = true\n\t\t\tthis.deletedCommentLimboStore.addId(this.id)\n\t\t\tconst timeOutDelete = setTimeout(this.onDelete, TOAST_UNDO_TIMEOUT)\n\t\t\tshowUndo(t('comments', 'Comment deleted'), () => {\n\t\t\t\tclearTimeout(timeOutDelete)\n\t\t\t\tthis.deleted = false\n\t\t\t\tthis.deletedCommentLimboStore.removeId(this.id)\n\t\t\t})\n\t\t},\n\t\tasync onDelete() {\n\t\t\ttry {\n\t\t\t\tawait DeleteComment(this.resourceType, this.resourceId, this.id)\n\t\t\t\tlogger.debug('Comment deleted', { resourceType: this.resourceType, resourceId: this.resourceId, id: this.id })\n\t\t\t\tthis.$emit('delete', this.id)\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to delete the comment'))\n\t\t\t\tlogger.error('An error occurred while trying to delete the comment', { error })\n\t\t\t\tthis.deleted = false\n\t\t\t\tthis.deletedCommentLimboStore.removeId(this.id)\n\t\t\t}\n\t\t},\n\n\t\t// CREATION\n\t\tasync onNewComment(message) {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst newComment = await NewComment(this.resourceType, this.resourceId, message)\n\t\t\t\tlogger.debug('New comment posted', { resourceType: this.resourceType, resourceId: this.resourceId, newComment })\n\t\t\t\tthis.$emit('new', newComment)\n\n\t\t\t\t// Clear old content\n\t\t\t\tthis.$emit('update:message', '')\n\t\t\t\tthis.localMessage = ''\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('comments', 'An error occurred while trying to create the comment'))\n\t\t\t\tlogger.error('An error occurred while trying to create the comment', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport client from './DavClient.js'\n\n/**\n * Edit an existing comment\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {number} commentId the comment iD\n * @param {string} message the message content\n */\nexport default async function(resourceType, resourceId, commentId, message) {\n\tconst commentPath = ['', resourceType, resourceId, commentId].join('/')\n\n\treturn await client.customRequest(commentPath, {\n\t\tmethod: 'PROPPATCH',\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:message>${message}</oc:message>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`,\n\t})\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport client from './DavClient.js'\n\n/**\n * Delete a comment\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {number} commentId the comment iD\n */\nexport default async function(resourceType, resourceId, commentId) {\n\tconst commentPath = ['', resourceType, resourceId, commentId].join('/')\n\n\t// Fetch newly created comment data\n\tawait client.deleteFile(commentPath)\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getCurrentUser } from '@nextcloud/auth'\nimport axios from '@nextcloud/axios'\nimport { getRootPath } from '../utils/davUtils.js'\nimport { decodeHtmlEntities } from '../utils/decodeHtmlEntities.js'\nimport client from './DavClient.js'\n\n/**\n * Retrieve the comments list\n *\n * @param {string} resourceType the resource type\n * @param {number} resourceId the resource ID\n * @param {string} message the message\n * @return {object} the new comment\n */\nexport default async function(resourceType, resourceId, message) {\n\tconst resourcePath = ['', resourceType, resourceId].join('/')\n\n\tconst response = await axios.post(getRootPath() + resourcePath, {\n\t\tactorDisplayName: getCurrentUser().displayName,\n\t\tactorId: getCurrentUser().uid,\n\t\tactorType: 'users',\n\t\tcreationDateTime: (new Date()).toUTCString(),\n\t\tmessage,\n\t\tobjectType: resourceType,\n\t\tverb: 'comment',\n\t})\n\n\t// Retrieve comment id from resource location\n\tconst commentId = parseInt(response.headers['content-location'].split('/').pop())\n\tconst commentPath = resourcePath + '/' + commentId\n\n\t// Fetch newly created comment data\n\tconst comment = await client.stat(commentPath, {\n\t\tdetails: true,\n\t})\n\n\tconst props = comment.data.props\n\t// Decode twice to handle potentially double-encoded entities\n\t// FIXME Remove this once https://github.com/nextcloud/server/issues/29306\n\t// is resolved\n\tprops.actorDisplayName = decodeHtmlEntities(props.actorDisplayName, 2)\n\tprops.message = decodeHtmlEntities(props.message, 2)\n\n\treturn comment.data\n}\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<component\n\t\t:is=\"tag\"\n\t\tv-show=\"!deleted && !isLimbo\"\n\t\t:class=\"{ 'comment--loading': loading }\"\n\t\tclass=\"comment\">\n\t\t<!-- Comment header toolbar -->\n\t\t<div class=\"comment__side\">\n\t\t\t<!-- Author -->\n\t\t\t<NcAvatar\n\t\t\t\tclass=\"comment__avatar\"\n\t\t\t\t:display-name=\"actorDisplayName\"\n\t\t\t\t:user=\"actorId\"\n\t\t\t\t:size=\"32\" />\n\t\t</div>\n\t\t<div class=\"comment__body\">\n\t\t\t<div class=\"comment__header\">\n\t\t\t\t<span class=\"comment__author\">{{ actorDisplayName }}</span>\n\n\t\t\t\t<!-- Comment actions,\n\t\t\t\t\tshow if we have a message id and current user is author -->\n\t\t\t\t<NcActions v-if=\"isOwnComment && id && !loading\" class=\"comment__actions\">\n\t\t\t\t\t<template v-if=\"!editing\">\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\tclose-after-click\n\t\t\t\t\t\t\t@click=\"onEdit\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconPencilOutline :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('comments', 'Edit comment') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionSeparator />\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\tclose-after-click\n\t\t\t\t\t\t\t@click=\"onDeleteWithUndo\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconTrashCanOutline :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('comments', 'Delete comment') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<NcActionButton v-else @click=\"onEditCancel\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconClose :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('comments', 'Cancel edit') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</NcActions>\n\n\t\t\t\t<!-- Show loading if we're editing or deleting, not on new ones -->\n\t\t\t\t<div v-if=\"id && loading\" class=\"comment_loading icon-loading-small\" />\n\n\t\t\t\t<!-- Relative time to the comment creation -->\n\t\t\t\t<NcDateTime\n\t\t\t\t\tv-else-if=\"creationDateTime\"\n\t\t\t\t\tclass=\"comment__timestamp\"\n\t\t\t\t\t:timestamp=\"timestamp\"\n\t\t\t\t\t:ignore-seconds=\"true\" />\n\t\t\t</div>\n\n\t\t\t<!-- Message editor -->\n\t\t\t<form v-if=\"editor || editing\" class=\"comment__editor\" @submit.prevent>\n\t\t\t\t<div class=\"comment__editor-group\">\n\t\t\t\t\t<NcRichContenteditable\n\t\t\t\t\t\tref=\"editor\"\n\t\t\t\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t\t\t\t:contenteditable=\"!loading\"\n\t\t\t\t\t\t:label=\"editor ? t('comments', 'New comment') : t('comments', 'Edit comment')\"\n\t\t\t\t\t\t:placeholder=\"t('comments', 'Write a comment')\"\n\t\t\t\t\t\t:model-value=\"localMessage\"\n\t\t\t\t\t\t:user-data=\"userData\"\n\t\t\t\t\t\taria-describedby=\"tab-comments__editor-description\"\n\t\t\t\t\t\t@update:value=\"updateLocalMessage\"\n\t\t\t\t\t\t@submit=\"onSubmit\" />\n\t\t\t\t\t<div class=\"comment__submit\">\n\t\t\t\t\t\t<NcButton\n\t\t\t\t\t\t\tvariant=\"tertiary-no-background\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t:aria-label=\"t('comments', 'Post comment')\"\n\t\t\t\t\t\t\t:disabled=\"isEmptyMessage\"\n\t\t\t\t\t\t\t@click=\"onSubmit\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" />\n\t\t\t\t\t\t\t\t<IconArrowRight v-else :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"tab-comments__editor-description\" class=\"comment__editor-description\">\n\t\t\t\t\t{{ t('comments', '@ for mentions, : for emoji, / for smart picker') }}\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<!-- Message content -->\n\t\t\t<NcRichText\n\t\t\t\tv-else\n\t\t\t\tclass=\"comment__message\"\n\t\t\t\t:class=\"{ 'comment__message--expanded': expanded }\"\n\t\t\t\t:text=\"richContent.message\"\n\t\t\t\t:arguments=\"richContent.mentions\"\n\t\t\t\tuse-markdown\n\t\t\t\t@click.native=\"onExpand\" />\n\t\t</div>\n\t</component>\n</template>\n\n<script>\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { translate as t } from '@nextcloud/l10n'\nimport { mapStores } from 'pinia'\nimport NcActionButton from '@nextcloud/vue/components/NcActionButton'\nimport NcActions from '@nextcloud/vue/components/NcActions'\nimport NcActionSeparator from '@nextcloud/vue/components/NcActionSeparator'\nimport NcAvatar from '@nextcloud/vue/components/NcAvatar'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcDateTime from '@nextcloud/vue/components/NcDateTime'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport NcUserBubble from '@nextcloud/vue/components/NcUserBubble'\nimport IconArrowRight from 'vue-material-design-icons/ArrowRight.vue'\nimport IconClose from 'vue-material-design-icons/Close.vue'\nimport IconPencilOutline from 'vue-material-design-icons/PencilOutline.vue'\nimport IconTrashCanOutline from 'vue-material-design-icons/TrashCanOutline.vue'\nimport CommentMixin from '../mixins/CommentMixin.js'\nimport { useDeletedCommentLimbo } from '../store/deletedCommentLimbo.js'\n\n// Dynamic loading\nconst NcRichContenteditable = () => import('@nextcloud/vue/components/NcRichContenteditable')\nconst NcRichText = () => import('@nextcloud/vue/components/NcRichText')\n\nexport default {\n\t/* eslint vue/multi-word-component-names: \"warn\" */\n\tname: 'Comment',\n\n\tcomponents: {\n\t\tIconArrowRight,\n\t\tIconClose,\n\t\tIconTrashCanOutline,\n\t\tIconPencilOutline,\n\t\tNcActionButton,\n\t\tNcActions,\n\t\tNcActionSeparator,\n\t\tNcAvatar,\n\t\tNcButton,\n\t\tNcDateTime,\n\t\tNcLoadingIcon,\n\t\tNcRichContenteditable,\n\t\tNcRichText,\n\t},\n\n\tmixins: [CommentMixin],\n\n\tinheritAttrs: false,\n\n\tprops: {\n\t\tactorDisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tactorId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tcreationDateTime: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\n\t\t/**\n\t\t * Force the editor display\n\t\t */\n\t\teditor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\t/**\n\t\t * Provide the autocompletion data\n\t\t */\n\t\tautoComplete: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\n\t\tuserData: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\n\t\ttag: {\n\t\t\ttype: String,\n\t\t\tdefault: 'div',\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\texpanded: false,\n\t\t\t// Only change data locally and update the original\n\t\t\t// parent data when the request is sent and resolved\n\t\t\tlocalMessage: '',\n\t\t\tsubmitted: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapStores(useDeletedCommentLimbo),\n\n\t\t/**\n\t\t * Is the current user the author of this comment\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisOwnComment() {\n\t\t\treturn getCurrentUser().uid === this.actorId\n\t\t},\n\n\t\trichContent() {\n\t\t\tconst mentions = {}\n\t\t\tlet message = this.localMessage\n\n\t\t\tObject.keys(this.userData).forEach((user, index) => {\n\t\t\t\tconst key = `mention-${index}`\n\t\t\t\tconst regex = new RegExp(`@${user}|@\"${user}\"`, 'g')\n\t\t\t\tmessage = message.replace(regex, `{${key}}`)\n\t\t\t\tmentions[key] = {\n\t\t\t\t\tcomponent: NcUserBubble,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tuser,\n\t\t\t\t\t\tdisplayName: this.userData[user].label,\n\t\t\t\t\t\tprimary: this.userData[user].primary,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn { mentions, message }\n\t\t},\n\n\t\tisEmptyMessage() {\n\t\t\treturn !this.localMessage || this.localMessage.trim() === ''\n\t\t},\n\n\t\t/**\n\t\t * Timestamp of the creation time (in ms UNIX time)\n\t\t */\n\t\ttimestamp() {\n\t\t\treturn Date.parse(this.creationDateTime)\n\t\t},\n\n\t\tisLimbo() {\n\t\t\treturn this.deletedCommentLimboStore.checkForId(this.id)\n\t\t},\n\t},\n\n\twatch: {\n\t\t// If the data change, update the local value\n\t\tmessage(message) {\n\t\t\tthis.updateLocalMessage(message)\n\t\t},\n\t},\n\n\tbeforeMount() {\n\t\t// Init localMessage\n\t\tthis.updateLocalMessage(this.message)\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Update local Message on outer change\n\t\t *\n\t\t * @param {string} message the message to set\n\t\t */\n\t\tupdateLocalMessage(message) {\n\t\t\tthis.localMessage = message.toString()\n\t\t\tthis.submitted = false\n\t\t},\n\n\t\t/**\n\t\t * Dispatch message between edit and create\n\t\t */\n\t\tonSubmit() {\n\t\t\t// Do not submit if message is empty\n\t\t\tif (this.localMessage.trim() === '') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.editor) {\n\t\t\t\tthis.onNewComment(this.localMessage.trim())\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// Focus the editor again\n\t\t\t\t\tthis.$refs.editor.$el.focus()\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.onEditComment(this.localMessage.trim())\n\t\t},\n\n\t\tonExpand() {\n\t\t\tthis.expanded = true\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n\n$comment-padding: 10px;\n\n.comment {\n\tdisplay: flex;\n\tgap: 8px;\n\tpadding: 5px $comment-padding;\n\n\t&__side {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tpadding-top: 6px;\n\t}\n\n\t&__body {\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t\tflex-direction: column;\n\t\tcontainer-type: inline-size;\n\t}\n\n\t&__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmin-height: 44px;\n\t}\n\n\t&__actions {\n\t\tmargin-inline-start: $comment-padding !important;\n\t}\n\n\t&__author {\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&_loading,\n\t&__timestamp {\n\t\tmargin-inline-start: auto;\n\t\ttext-align: end;\n\t\twhite-space: nowrap;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__editor-group {\n\t\tposition: relative;\n\t}\n\n\t&__editor-description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-block: var(--default-grid-baseline);\n\t}\n\n\t&__submit {\n\t\tposition: absolute !important;\n\t\tbottom: 5px;\n\t\tinset-inline-end: 0;\n\t}\n\n\t&__message {\n\t\twhite-space: pre-wrap;\n\t\tword-break: normal;\n\t\tmax-height: 200px;\n\t\toverflow: auto;\n\t\tscrollbar-gutter: stable;\n\t\tscrollbar-width: thin;\n\t\tmargin-top: -6px;\n\t\t&--expanded {\n\t\t\tmax-height: none;\n\t\t\toverflow: visible;\n\t\t}\n\t\t:deep(img) {\n\t\t\tmax-width: 100%;\n\t\t\theight: auto;\n\t\t}\n\t}\n}\n\n.rich-contenteditable__input {\n\tmin-height: 44px;\n\tmargin: 0;\n\tpadding: $comment-padding;\n}\n\n</style>\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=70317f94&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=70317f94&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=70317f94&scoped=true\"\nimport script from \"./Comment.vue?vue&type=script&lang=js\"\nexport * from \"./Comment.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=70317f94&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70317f94\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c(_vm.tag,{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.deleted && !_vm.isLimbo),expression:\"!deleted && !isLimbo\"}],tag:\"component\",staticClass:\"comment\",class:{ 'comment--loading': _vm.loading }},[_c('div',{staticClass:\"comment__side\"},[_c('NcAvatar',{staticClass:\"comment__avatar\",attrs:{\"display-name\":_vm.actorDisplayName,\"user\":_vm.actorId,\"size\":32}})],1),_vm._v(\" \"),_c('div',{staticClass:\"comment__body\"},[_c('div',{staticClass:\"comment__header\"},[_c('span',{staticClass:\"comment__author\"},[_vm._v(_vm._s(_vm.actorDisplayName))]),_vm._v(\" \"),(_vm.isOwnComment && _vm.id && !_vm.loading)?_c('NcActions',{staticClass:\"comment__actions\"},[(!_vm.editing)?[_c('NcActionButton',{attrs:{\"close-after-click\":\"\"},on:{\"click\":_vm.onEdit},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconPencilOutline',{attrs:{\"size\":20}})]},proxy:true}],null,false,3345211262)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Edit comment'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionSeparator'),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"close-after-click\":\"\"},on:{\"click\":_vm.onDeleteWithUndo},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconTrashCanOutline',{attrs:{\"size\":20}})]},proxy:true}],null,false,1034796883)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Delete comment'))+\"\\n\\t\\t\\t\\t\\t\")])]:_c('NcActionButton',{on:{\"click\":_vm.onEditCancel},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconClose',{attrs:{\"size\":20}})]},proxy:true}],null,false,2888946197)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Cancel edit'))+\"\\n\\t\\t\\t\\t\")])],2):_vm._e(),_vm._v(\" \"),(_vm.id && _vm.loading)?_c('div',{staticClass:\"comment_loading icon-loading-small\"}):(_vm.creationDateTime)?_c('NcDateTime',{staticClass:\"comment__timestamp\",attrs:{\"timestamp\":_vm.timestamp,\"ignore-seconds\":true}}):_vm._e()],1),_vm._v(\" \"),(_vm.editor || _vm.editing)?_c('form',{staticClass:\"comment__editor\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"comment__editor-group\"},[_c('NcRichContenteditable',{ref:\"editor\",attrs:{\"auto-complete\":_vm.autoComplete,\"contenteditable\":!_vm.loading,\"label\":_vm.editor ? _vm.t('comments', 'New comment') : _vm.t('comments', 'Edit comment'),\"placeholder\":_vm.t('comments', 'Write a comment'),\"model-value\":_vm.localMessage,\"user-data\":_vm.userData,\"aria-describedby\":\"tab-comments__editor-description\"},on:{\"update:value\":_vm.updateLocalMessage,\"submit\":_vm.onSubmit}}),_vm._v(\" \"),_c('div',{staticClass:\"comment__submit\"},[_c('NcButton',{attrs:{\"variant\":\"tertiary-no-background\",\"type\":\"submit\",\"aria-label\":_vm.t('comments', 'Post comment'),\"disabled\":_vm.isEmptyMessage},on:{\"click\":_vm.onSubmit},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('NcLoadingIcon'):_c('IconArrowRight',{attrs:{\"size\":20}})]},proxy:true}],null,false,758946661)})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"comment__editor-description\",attrs:{\"id\":\"tab-comments__editor-description\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', '@ for mentions, : for emoji, / for smart picker'))+\"\\n\\t\\t\\t\")])]):_c('NcRichText',{staticClass:\"comment__message\",class:{ 'comment__message--expanded': _vm.expanded },attrs:{\"text\":_vm.richContent.message,\"arguments\":_vm.richContent.mentions,\"use-markdown\":\"\"},nativeOn:{\"click\":function($event){return _vm.onExpand.apply(null, arguments)}}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getCurrentUser } from '@nextcloud/auth';\nimport axios from '@nextcloud/axios';\nimport { loadState } from '@nextcloud/initial-state';\nimport { generateOcsUrl } from '@nextcloud/router';\nimport { defineComponent } from 'vue';\nexport default defineComponent({\n    props: {\n        resourceId: {\n            type: Number,\n            required: true,\n        },\n        resourceType: {\n            type: String,\n            default: 'files',\n        },\n    },\n    data() {\n        return {\n            editorData: {\n                actorDisplayName: getCurrentUser().displayName,\n                actorId: getCurrentUser().uid,\n                key: 'editor',\n            },\n            userData: {},\n            currentResourceId: this.resourceId,\n        };\n    },\n    methods: {\n        /**\n         * Autocomplete `@mentions`\n         *\n         * @param search the query\n         * @param callback the callback to process the results with\n         */\n        async autoComplete(search, callback) {\n            const { data } = await axios.get(generateOcsUrl('core/autocomplete/get'), {\n                params: {\n                    search,\n                    itemType: this.resourceType,\n                    itemId: this.currentResourceId,\n                    sorter: 'commenters|share-recipients',\n                    limit: loadState('comments', 'maxAutoCompleteResults'),\n                },\n            });\n            // Save user data so it can be used by the editor to replace mentions\n            data.ocs.data.forEach((user) => {\n                this.userData[user.id] = user;\n            });\n            return callback(Object.values(this.userData));\n        },\n        /**\n         * Make sure we have all mentions as Array of objects\n         *\n         * @param mentions the mentions list\n         */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        genMentionsData(mentions) {\n            Object.values(mentions)\n                .flat()\n                .forEach((mention) => {\n                this.userData[mention.mentionId] = {\n                    // TODO: support groups\n                    icon: 'icon-user',\n                    id: mention.mentionId,\n                    label: mention.mentionDisplayName,\n                    source: 'users',\n                    primary: getCurrentUser()?.uid === mention.mentionId,\n                };\n            });\n            return this.userData;\n        },\n    },\n});\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { parseXML } from 'webdav';\nimport { processResponsePayload } from 'webdav/dist/node/response.js';\nimport { prepareFileFromProps } from 'webdav/dist/node/tools/dav.js';\nimport client from './DavClient.js';\nexport const DEFAULT_LIMIT = 20;\n/**\n * Retrieve the comments list\n *\n * @param data destructuring object\n * @param data.resourceType the resource type\n * @param data.resourceId the resource ID\n * @param [options] optional options for axios\n * @param [options.offset] the pagination offset\n * @param [options.limit] the pagination limit, defaults to 20\n * @param [options.datetime] optional date to query\n * @return the comments list\n */\nexport async function getComments({ resourceType, resourceId }, options) {\n    const resourcePath = ['', resourceType, resourceId].join('/');\n    const datetime = options.datetime ? `<oc:datetime>${options.datetime.toISOString()}</oc:datetime>` : '';\n    const response = await client.customRequest(resourcePath, {\n        method: 'REPORT',\n        data: `<?xml version=\"1.0\"?>\n\t\t\t<oc:filter-comments\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\"\n\t\t\t\txmlns:nc=\"http://nextcloud.org/ns\"\n\t\t\t\txmlns:ocs=\"http://open-collaboration-services.org/ns\">\n\t\t\t\t<oc:limit>${options.limit ?? DEFAULT_LIMIT}</oc:limit>\n\t\t\t\t<oc:offset>${options.offset || 0}</oc:offset>\n\t\t\t\t${datetime}\n\t\t\t</oc:filter-comments>`,\n        ...options,\n    });\n    const responseData = await response.text();\n    const result = await parseXML(responseData);\n    const stat = getDirectoryFiles(result, true);\n    // https://github.com/perry-mitchell/webdav-client/issues/339\n    return processResponsePayload(response, stat, true);\n}\n/**\n * https://github.com/perry-mitchell/webdav-client/blob/8d9694613c978ce7404e26a401c39a41f125f87f/source/operations/directoryContents.ts\n *\n * @param result\n * @param isDetailed\n */\nfunction getDirectoryFiles(result, isDetailed = false) {\n    // Extract the response items (directory contents)\n    const { multistatus: { response: responseItems }, } = result;\n    // Map all items to a consistent output structure (results)\n    return responseItems.map((item) => {\n        // Each item should contain a stat object\n        const props = item.propstat.prop;\n        return prepareFileFromProps(props, props.id.toString(), isDetailed);\n    });\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Creates a cancelable axios 'request object'.\n *\n * @param {Function} request the axios promise request\n * @return {object}\n */\nfunction cancelableRequest(request) {\n\tconst controller = new AbortController()\n\tconst signal = controller.signal\n\n\t/**\n\t * Execute the request\n\t *\n\t * @param {string} url the url to send the request to\n\t * @param {object} [options] optional config for the request\n\t */\n\tconst fetch = async function(url, options) {\n\t\tconst response = await request(\n\t\t\turl,\n\t\t\t{ signal, ...options },\n\t\t)\n\t\treturn response\n\t}\n\n\treturn {\n\t\trequest: fetch,\n\t\tabort: () => controller.abort(),\n\t}\n}\n\nexport default cancelableRequest\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div\n\t\tv-element-visibility=\"onVisibilityChange\"\n\t\tclass=\"comments\"\n\t\t:class=\"{ 'icon-loading': isFirstLoading }\">\n\t\t<!-- Editor -->\n\t\t<Comment\n\t\t\tv-bind=\"editorData\"\n\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t:resource-type=\"resourceType\"\n\t\t\t:editor=\"true\"\n\t\t\t:user-data=\"userData\"\n\t\t\t:resource-id=\"currentResourceId\"\n\t\t\tclass=\"comments__writer\"\n\t\t\t@new=\"onNewComment\" />\n\n\t\t<template v-if=\"!isFirstLoading\">\n\t\t\t<NcEmptyContent\n\t\t\t\tv-if=\"!hasComments && done\"\n\t\t\t\tclass=\"comments__empty\"\n\t\t\t\t:name=\"t('comments', 'No comments yet, start the conversation!')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconMessageReplyTextOutline />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t\t<ul v-else>\n\t\t\t\t<!-- Comments -->\n\t\t\t\t<Comment\n\t\t\t\t\tv-for=\"comment in comments\"\n\t\t\t\t\t:key=\"comment.props.id\"\n\t\t\t\t\ttag=\"li\"\n\t\t\t\t\tv-bind=\"comment.props\"\n\t\t\t\t\t:auto-complete=\"autoComplete\"\n\t\t\t\t\t:resource-type=\"resourceType\"\n\t\t\t\t\t:message.sync=\"comment.props.message\"\n\t\t\t\t\t:resource-id=\"currentResourceId\"\n\t\t\t\t\t:user-data=\"genMentionsData(comment.props.mentions)\"\n\t\t\t\t\tclass=\"comments__list\"\n\t\t\t\t\t@delete=\"onDelete\" />\n\t\t\t</ul>\n\n\t\t\t<!-- Loading more message -->\n\t\t\t<div v-if=\"loading && !isFirstLoading\" class=\"comments__info icon-loading\" />\n\n\t\t\t<div v-else-if=\"hasComments && done\" class=\"comments__info\">\n\t\t\t\t{{ t('comments', 'No more messages') }}\n\t\t\t</div>\n\n\t\t\t<!-- Error message -->\n\t\t\t<template v-else-if=\"error\">\n\t\t\t\t<NcEmptyContent class=\"comments__error\" :name=\"error\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconAlertCircleOutline />\n\t\t\t\t\t</template>\n\t\t\t\t</NcEmptyContent>\n\t\t\t\t<NcButton class=\"comments__retry\" @click=\"getComments\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconRefresh />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('comments', 'Retry') }}\n\t\t\t\t</NcButton>\n\t\t\t</template>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { vElementVisibility as elementVisibility } from '@vueuse/components'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\nimport IconAlertCircleOutline from 'vue-material-design-icons/AlertCircleOutline.vue'\nimport IconMessageReplyTextOutline from 'vue-material-design-icons/MessageReplyTextOutline.vue'\nimport IconRefresh from 'vue-material-design-icons/Refresh.vue'\nimport Comment from '../components/Comment.vue'\nimport logger from '../logger.js'\nimport CommentView from '../mixins/CommentView.ts'\nimport { DEFAULT_LIMIT, getComments } from '../services/GetComments.ts'\nimport { markCommentsAsRead } from '../services/ReadComments.ts'\nimport cancelableRequest from '../utils/cancelableRequest.js'\n\nexport default {\n\t/* eslint vue/multi-word-component-names: \"warn\" */\n\tname: 'Comments',\n\n\tcomponents: {\n\t\tComment,\n\t\tNcEmptyContent,\n\t\tNcButton,\n\t\tIconRefresh,\n\t\tIconMessageReplyTextOutline,\n\t\tIconAlertCircleOutline,\n\t},\n\n\tdirectives: {\n\t\telementVisibility,\n\t},\n\n\tmixins: [CommentView],\n\n\tdata() {\n\t\treturn {\n\t\t\terror: '',\n\t\t\tloading: false,\n\t\t\tdone: false,\n\n\t\t\toffset: 0,\n\t\t\tcomments: [],\n\n\t\t\tcancelRequest: () => {},\n\n\t\t\tComment,\n\t\t\tuserData: {},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasComments() {\n\t\t\treturn this.comments.length > 0\n\t\t},\n\n\t\tisFirstLoading() {\n\t\t\treturn this.loading && this.offset === 0\n\t\t},\n\t},\n\n\twatch: {\n\t\tresourceId() {\n\t\t\tthis.currentResourceId = this.resourceId\n\t\t},\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\tasync onVisibilityChange(isVisible) {\n\t\t\tif (isVisible) {\n\t\t\t\ttry {\n\t\t\t\t\tawait markCommentsAsRead(this.resourceType, this.currentResourceId, new Date())\n\t\t\t\t} catch (e) {\n\t\t\t\t\tshowError(e.message || t('comments', 'Failed to mark comments as read'))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update current resourceId and fetch new data\n\t\t *\n\t\t * @param {number} resourceId the current resourceId (fileId...)\n\t\t */\n\t\tasync update(resourceId) {\n\t\t\tthis.currentResourceId = resourceId\n\t\t\tthis.resetState()\n\t\t\tawait this.getComments()\n\t\t},\n\n\t\t/**\n\t\t * Ran when the bottom of the tab is reached\n\t\t */\n\t\tonScrollBottomReached() {\n\t\t\t/**\n\t\t\t * Do not fetch more if we:\n\t\t\t * - are showing an error\n\t\t\t * - already fetched everything\n\t\t\t * - are currently loading\n\t\t\t */\n\t\t\tif (this.error || this.done || this.loading) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.getComments()\n\t\t},\n\n\t\t/**\n\t\t * Get the existing shares infos\n\t\t */\n\t\tasync getComments() {\n\t\t\t// Cancel any ongoing request\n\t\t\tthis.cancelRequest('cancel')\n\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\t\t\t\tthis.error = ''\n\n\t\t\t\t// Init cancellable request\n\t\t\t\tconst { request, abort } = cancelableRequest(getComments)\n\t\t\t\tthis.cancelRequest = abort\n\n\t\t\t\t// Fetch comments\n\t\t\t\tconst { data: comments } = await request({\n\t\t\t\t\tresourceType: this.resourceType,\n\t\t\t\t\tresourceId: this.currentResourceId,\n\t\t\t\t}, { offset: this.offset }) || { data: [] }\n\n\t\t\t\tthis.logger.debug(`Processed ${comments.length} comments`, { comments })\n\n\t\t\t\t// We received less than the requested amount,\n\t\t\t\t// we're done fetching comments\n\t\t\t\tif (comments.length < DEFAULT_LIMIT) {\n\t\t\t\t\tthis.done = true\n\t\t\t\t}\n\n\t\t\t\t// Ensure actor id is a string\n\t\t\t\tfor (const comment of comments) {\n\t\t\t\t\tcomment.props.actorId = comment.props.actorId.toString()\n\t\t\t\t}\n\n\t\t\t\t// Insert results\n\t\t\t\tthis.comments = [...this.comments, ...comments]\n\n\t\t\t\t// Increase offset for next fetch\n\t\t\t\tthis.offset += DEFAULT_LIMIT\n\t\t\t} catch (error) {\n\t\t\t\tif (error.message === 'cancel') {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.error = t('comments', 'Unable to load the comments list')\n\t\t\t\tlogger.error('Error loading the comments list', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Add newly created comment to the list\n\t\t *\n\t\t * @param {object} comment the new comment\n\t\t */\n\t\tonNewComment(comment) {\n\t\t\tthis.comments.unshift(comment)\n\t\t},\n\n\t\t/**\n\t\t * Remove deleted comment from the list\n\t\t *\n\t\t * @param {number} id the deleted comment\n\t\t */\n\t\tonDelete(id) {\n\t\t\tconst index = this.comments.findIndex((comment) => comment.props.id === id)\n\t\t\tif (index > -1) {\n\t\t\t\tthis.comments.splice(index, 1)\n\t\t\t} else {\n\t\t\t\tlogger.error('Could not find the deleted comment in the list', { id })\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset the current view to its default state\n\t\t */\n\t\tresetState() {\n\t\t\tthis.error = ''\n\t\t\tthis.loading = false\n\t\t\tthis.done = false\n\t\t\tthis.offset = 0\n\t\t\tthis.comments = []\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.comments {\n\tmin-height: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__empty,\n\t&__error {\n\t\tflex: 1 0;\n\t}\n\n\t&__retry {\n\t\tmargin: 0 auto;\n\t}\n\n\t&__info {\n\t\theight: 60px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tline-height: 60px;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport client from './DavClient.js';\n/**\n * Mark comments older than the date timestamp as read\n *\n * @param resourceType the resource type\n * @param resourceId the resource ID\n * @param date the date object\n */\nexport function markCommentsAsRead(resourceType, resourceId, date) {\n    const resourcePath = ['', resourceType, resourceId].join('/');\n    const readMarker = date.toUTCString();\n    return client.customRequest(resourcePath, {\n        method: 'PROPPATCH',\n        data: `<?xml version=\"1.0\"?>\n\t\t\t<d:propertyupdate\n\t\t\t\txmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t<d:set>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:readMarker>${readMarker}</oc:readMarker>\n\t\t\t\t</d:prop>\n\t\t\t</d:set>\n\t\t\t</d:propertyupdate>`,\n    });\n}\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=style&index=0&id=6c8c157a&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comments.vue?vue&type=style&index=0&id=6c8c157a&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Comments.vue?vue&type=template&id=6c8c157a&scoped=true\"\nimport script from \"./Comments.vue?vue&type=script&lang=js\"\nexport * from \"./Comments.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comments.vue?vue&type=style&index=0&id=6c8c157a&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c8c157a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"element-visibility\",rawName:\"v-element-visibility\",value:(_vm.onVisibilityChange),expression:\"onVisibilityChange\"}],staticClass:\"comments\",class:{ 'icon-loading': _vm.isFirstLoading }},[_c('Comment',_vm._b({staticClass:\"comments__writer\",attrs:{\"auto-complete\":_vm.autoComplete,\"resource-type\":_vm.resourceType,\"editor\":true,\"user-data\":_vm.userData,\"resource-id\":_vm.currentResourceId},on:{\"new\":_vm.onNewComment}},'Comment',_vm.editorData,false)),_vm._v(\" \"),(!_vm.isFirstLoading)?[(!_vm.hasComments && _vm.done)?_c('NcEmptyContent',{staticClass:\"comments__empty\",attrs:{\"name\":_vm.t('comments', 'No comments yet, start the conversation!')},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconMessageReplyTextOutline')]},proxy:true}],null,false,326612300)}):_c('ul',_vm._l((_vm.comments),function(comment){return _c('Comment',_vm._b({key:comment.props.id,staticClass:\"comments__list\",attrs:{\"tag\":\"li\",\"auto-complete\":_vm.autoComplete,\"resource-type\":_vm.resourceType,\"message\":comment.props.message,\"resource-id\":_vm.currentResourceId,\"user-data\":_vm.genMentionsData(comment.props.mentions)},on:{\"update:message\":function($event){return _vm.$set(comment.props, \"message\", $event)},\"delete\":_vm.onDelete}},'Comment',comment.props,false))}),1),_vm._v(\" \"),(_vm.loading && !_vm.isFirstLoading)?_c('div',{staticClass:\"comments__info icon-loading\"}):(_vm.hasComments && _vm.done)?_c('div',{staticClass:\"comments__info\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('comments', 'No more messages'))+\"\\n\\t\\t\")]):(_vm.error)?[_c('NcEmptyContent',{staticClass:\"comments__error\",attrs:{\"name\":_vm.error},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconAlertCircleOutline')]},proxy:true}],null,false,3663249556)}),_vm._v(\" \"),_c('NcButton',{staticClass:\"comments__retry\",on:{\"click\":_vm.getComments},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconRefresh')]},proxy:true}],null,false,2997625269)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('comments', 'Retry'))+\"\\n\\t\\t\\t\")])]:_vm._e()]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getCSPNonce } from '@nextcloud/auth'\nimport { n, t } from '@nextcloud/l10n'\nimport { createPinia, PiniaVuePlugin } from 'pinia'\nimport Vue from 'vue'\nimport CommentsApp from '../views/Comments.vue'\nimport logger from '../logger.js'\n\nVue.use(PiniaVuePlugin)\n\n__webpack_nonce__ = getCSPNonce()\n\n// Add translates functions\nVue.mixin({\n\tdata() {\n\t\treturn {\n\t\t\tlogger,\n\t\t}\n\t},\n\tmethods: {\n\t\tt,\n\t\tn,\n\t},\n})\n\nexport default class CommentInstance {\n\t/**\n\t * Initialize a new Comments instance for the desired type\n\t *\n\t * @param {string} resourceType the comments endpoint type\n\t * @param  {object} options the vue options (propsData, parent, el...)\n\t */\n\tconstructor(resourceType = 'files', options = {}) {\n\t\tconst pinia = createPinia()\n\n\t\t// Merge options and set `resourceType` property\n\t\toptions = {\n\t\t\t...options,\n\t\t\tpropsData: {\n\t\t\t\t...(options.propsData ?? {}),\n\t\t\t\tresourceType,\n\t\t\t},\n\t\t\tpinia,\n\t\t}\n\t\t// Init Comments component\n\t\tconst View = Vue.extend(CommentsApp)\n\t\treturn new View(options)\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport logger from './logger.js'\nimport CommentsInstance from './services/CommentsInstance.js'\n\n// Init Comments\nif (window.OCA && !window.OCA.Comments) {\n\tObject.assign(window.OCA, { Comments: {} })\n}\n\n// Init Comments App view\nObject.assign(window.OCA.Comments, { View: CommentsInstance })\nlogger.debug('OCA.Comments.View initialized')\n","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.comments[data-v-6c8c157a]{min-height:100%;display:flex;flex-direction:column}.comments__empty[data-v-6c8c157a],.comments__error[data-v-6c8c157a]{flex:1 0}.comments__retry[data-v-6c8c157a]{margin:0 auto}.comments__info[data-v-6c8c157a]{height:60px;color:var(--color-text-maxcontrast);text-align:center;line-height:60px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./apps/comments/src/views/Comments.vue\"],\"names\":[],\"mappings\":\"AACA,2BACC,eAAA,CACA,YAAA,CACA,qBAAA,CAEA,oEAEC,QAAA,CAGD,kCACC,aAAA,CAGD,iCACC,WAAA,CACA,mCAAA,CACA,iBAAA,CACA,gBAAA\",\"sourcesContent\":[\"\\n.comments {\\n\\tmin-height: 100%;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\n\\t&__empty,\\n\\t&__error {\\n\\t\\tflex: 1 0;\\n\\t}\\n\\n\\t&__retry {\\n\\t\\tmargin: 0 auto;\\n\\t}\\n\\n\\t&__info {\\n\\t\\theight: 60px;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\ttext-align: center;\\n\\t\\tline-height: 60px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"594\":\"f5af3d132040859cb666\",\"620\":\"efadeb09ed40b2f78241\",\"2391\":\"6d29c12fea2fbb265756\",\"2880\":\"b7ea58dbe842a6c59642\",\"4325\":\"b496c21b366280f18e3c\",\"4508\":\"d82a3a5b45c59e826da3\",\"5528\":\"a2c796c3574e3e32b0c3\",\"5862\":\"580b9c2e231a9169a12f\",\"7145\":\"7cf397a0552103874fc6\",\"8339\":\"b2246be0f4c885a9d524\"}[chunkId] + \"\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 7062;","var scriptUrl;\nif (globalThis.importScripts) scriptUrl = globalThis.location + \"\";\nvar document = globalThis.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t7062: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunknextcloud_ui_legacy\"] = globalThis[\"webpackChunknextcloud_ui_legacy\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4208], () => (__webpack_require__(76894)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","http","url","https","module","exports","key","hasOwnProperty","validateParams","params","parse","protocol","Error","request","cb","call","this","get","ClientRequest","response","extend","statusCodes","opts","defaultProtocol","location","search","host","hostname","port","path","indexOf","method","toUpperCase","headers","req","on","end","IncomingMessage","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","Layerr","constructor","errorOptionsOrMessage","messageText","args","arguments","options","shortMessage","message","cause","super","name","Object","defineProperty","value","info","assign","_info","captureStackTrace","ctor","constructorOpt","err","_cause","fullStack","stack","output","toString","prototype","___CSS_LOADER_EXPORT___","push","id","required","qs","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","str","replace","rules","address","isSpecial","NaN","undefined","ignore","hash","query","lolcation","loc","window","self","finaldestination","type","Url","unescape","pathname","test","href","scheme","extractProtocol","rest","match","exec","toLowerCase","forwardSlashes","otherSlashes","slashesCount","length","slice","parser","relative","extracted","instruction","index","instructions","i","lastIndexOf","charAt","base","split","concat","last","unshift","up","splice","join","resolve","username","password","auth","encodeURIComponent","decodeURIComponent","origin","set","part","fn","pop","char","ins","stringify","result","len","code","charCodeAt","getLoggerBuilder","setApp","detectUser","build","emits","props","title","String","fillColor","default","size","Number","_vm","_c","_self","_b","staticClass","attrs","$event","$emit","$attrs","_v","_s","_e","extractURLPath","fullURL","urlPath","joinURL","parts","reduce","nextPart","partIndex","generateDigestAuthHeader","digest","uri","qop","ncString","nc","ha1","algorithm","realm","nonce","cnonce","ha2","md5","digestResponse","authValues","opaque","authHeader","k","responseIndicatesDigestAuth","fromBase64","text","base64","decode","generateBasicAuthHeader","encode","setupAuth","context","oauthToken","authType","Auto","Authorization","Digest","hasDigestAuth","createDigestContext","None","Password","Token","InvalidAuthType","hasArrayBuffer","ArrayBuffer","objToString","isArrayBuffer","prepareRequestOptions","requestOptions","userOptions","finalOptions","data","signal","httpAgent","httpsAgent","_digest","withCredentials","async","requestStandard","ok","status","requestDigest","requestAuto","merge","re","uid","Math","floor","NONCE_CHARS","random","makeNonce","parseDigestAuth","response2","patcher","patchInline","body","newHeaders","JSON","requestDataToFetchBody","credentials","agent","parsedURL","getFetchOptions","getStat","filename","details","isDetailed","remoteURL","Accept","Depth","responseData","stat","createDirectory","dirPath","recursive","paths","sort","a","b","creating","testPath","createDirectoryRecursively","endsWith","NOOP","TRANSFORM_RETAIN_FORMAT","v","generateLockXML","ownerHREF","XMLBuilder","attributeNamePrefix","format","ignoreAttributes","suppressEmptyNode","namespace","lockinfo","lockscope","exclusive","locktype","write","owner","obj","ns","copy","DEFAULT_TIMEOUT","getDAVCompliance","filePath","compliance","map","item","trim","server","DEFAULT_CONTACT_HREF","getRootPath","generateRemoteUrl","client","authTypeRaw","remoteBasePath","contactHref","token","remotePath","copyFile","destination","Destination","Overwrite","overwrite","shallow","createReadStream","outStream","PassThroughStream","range","start","rangeHeader","Range","responseError","callback","setTimeout","getFileStream","then","stream","pipe","catch","emit","createWriteStream","writeStream","maxRedirects","customRequest","deleteFile","exists","getDirectoryContents","deep","davResp","_remotePath","files","serverremoteBasePath","requestPath","includeSelf","serverBase","multistatus","responseItems","nodes","normaliseHREF","propstat","prop","filter","basename","getDirectoryFiles","glob","getFileContents","InvalidOutputFormat","transformResponse","getFileContentsString","arrayBuffer","Buffer","from","getFileContentsBuffer","getFileDownloadLink","authContents","LinkUnsupportedAuthType","getFileUploadLink","getHeaders","getQuota","quota","responseItem","quotaUsed","quotaAvail","used","parseInt","available","parseQuota","lock","refreshToken","timeout","Timeout","If","lockPayload","xml","XMLParser","removeNSPrefix","parseAttributeValue","parseTagValue","serverTimeout","moveFile","destinationFilename","putFileContents","contentLength","Readable","byteLength","DataTypeNoLength","calculateDataLength","error","partialUpdateFileContents","includes","InvalidUpdateRange","partialUpdateFileContentsSabredav","partialUpdateFileContentsApache","NotSupported","searchArbiter","responseText","results","getSearch","setHeaders","unlock","createClient","requesttoken","onRequestTokenUpdate","getRequestToken","decodeHtmlEntities","passes","DOMParser","decoded","parseFromString","documentElement","textContent","useDeletedCommentLimbo","defineStore","state","idsInLimbo","actions","addId","removeId","checkForId","resourceId","resourceType","deleted","editing","loading","computed","mapStores","methods","onEdit","onEditCancel","updateLocalMessage","onEditComment","commentId","commentPath","EditComment","logger","debug","showError","t","onDeleteWithUndo","deletedCommentLimboStore","timeOutDelete","onDelete","TOAST_UNDO_TIMEOUT","showUndo","clearTimeout","DeleteComment","onNewComment","newComment","resourcePath","axios","post","actorDisplayName","getCurrentUser","displayName","actorId","actorType","creationDateTime","Date","toUTCString","objectType","verb","comment","NewComment","localMessage","components","IconArrowRight","IconClose","IconTrashCanOutline","IconPencilOutline","NcActionButton","NcActions","NcActionSeparator","NcAvatar","NcButton","NcDateTime","NcLoadingIcon","NcRichContenteditable","NcRichText","mixins","CommentMixin","inheritAttrs","editor","Boolean","autoComplete","Function","userData","tag","expanded","submitted","isOwnComment","richContent","mentions","keys","forEach","user","regex","RegExp","component","NcUserBubble","label","primary","isEmptyMessage","timestamp","isLimbo","watch","beforeMount","onSubmit","$nextTick","$refs","$el","focus","onExpand","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","directives","rawName","expression","class","scopedSlots","_u","proxy","preventDefault","ref","nativeOn","apply","defineComponent","editorData","currentResourceId","generateOcsUrl","itemType","itemId","sorter","limit","loadState","ocs","values","genMentionsData","flat","mention","mentionId","icon","mentionDisplayName","source","getComments","datetime","toISOString","offset","prepareFileFromProps","parseXML","processResponsePayload","Comment","NcEmptyContent","IconRefresh","IconMessageReplyTextOutline","IconAlertCircleOutline","elementVisibility","CommentView","done","comments","cancelRequest","hasComments","isFirstLoading","onVisibilityChange","isVisible","date","readMarker","markCommentsAsRead","e","update","resetState","onScrollBottomReached","abort","controller","AbortController","cancelableRequest","findIndex","_l","$set","Vue","use","PiniaVuePlugin","__webpack_nonce__","getCSPNonce","mixin","n","OCA","Comments","View","pinia","createPinia","propsData","CommentsApp","freeGlobal","global","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","input","c","buffer","padding","position","bitStorage","bitCounter","fromCharCode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","getter","__esModule","d","definition","o","enumerable","f","chunkId","Promise","all","promises","u","l","script","needAttach","scripts","document","getElementsByTagName","s","getAttribute","createElement","charset","setAttribute","src","onScriptComplete","prev","event","onerror","onload","doneFns","parentNode","removeChild","bind","target","head","appendChild","Symbol","toStringTag","nmd","children","scriptUrl","globalThis","importScripts","currentScript","tagName","p","baseURI","installedChunks","installedChunkData","promise","reject","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}