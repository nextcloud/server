(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[3239],{96412:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".modal__header[data-v-17dd13c0]{margin:0}.modal__content[data-v-17dd13c0]{display:flex;flex-direction:column;align-items:center;padding:20px;gap:4px 0}.modal__button-row[data-v-17dd13c0]{display:flex;width:100%;justify-content:space-between}","",{version:3,sources:["webpack://./apps/settings/src/components/GroupListItem.vue"],names:[],mappings:"AAEC,gCACC,QAAA,CAGD,iCACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,YAAA,CACA,SAAA,CAGD,oCACC,YAAA,CACA,UAAA,CACA,6BAAA",sourcesContent:["\n.modal {\n\t&__header {\n\t\tmargin: 0;\n\t}\n\n\t&__content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 20px;\n\t\tgap: 4px 0;\n\t}\n\n\t&__button-row {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tjustify-content: space-between;\n\t}\n}\n"],sourceRoot:""}]);const o=r},91364:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".empty[data-v-1778b0bc] .icon-vue{width:64px;height:64px}.empty[data-v-1778b0bc] .icon-vue svg{max-width:64px;max-height:64px}","",{version:3,sources:["webpack://./apps/settings/src/components/UserList.vue"],names:[],mappings:"AAKE,kCACC,UAAA,CACA,WAAA,CAEA,sCACC,cAAA,CACA,eAAA",sourcesContent:["\n@import './Users/shared/styles.scss';\n\n.empty {\n\t:deep {\n\t\t.icon-vue {\n\t\t\twidth: 64px;\n\t\t\theight: 64px;\n\n\t\t\tsvg {\n\t\t\t\tmax-width: 64px;\n\t\t\t\tmax-height: 64px;\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const o=r},9499:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".modal__form[data-v-2fe7d69f]{display:flex;flex-direction:column;align-items:center;padding:20px;gap:4px 0}.modal__item[data-v-2fe7d69f]{width:100%}.modal__item[data-v-2fe7d69f]:not(:focus):not(:active){border-color:var(--color-border-dark)}.modal__hint[data-v-2fe7d69f]{color:var(--color-text-maxcontrast);margin-top:8px;align-self:flex-start}.modal__label[data-v-2fe7d69f]{display:block;padding:4px 0}.modal__select[data-v-2fe7d69f]{width:100%}.modal__submit[data-v-2fe7d69f]{margin-top:20px}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/NewUserModal.vue"],names:[],mappings:"AAEC,8BACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,YAAA,CACA,SAAA,CAGD,8BACC,UAAA,CAEA,uDACC,qCAAA,CAIF,8BACC,mCAAA,CACA,cAAA,CACA,qBAAA,CAGD,+BACC,aAAA,CACA,aAAA,CAGD,gCACC,UAAA,CAGD,gCACC,eAAA",sourcesContent:["\n.modal {\n\t&__form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 20px;\n\t\tgap: 4px 0;\n\t}\n\n\t&__item {\n\t\twidth: 100%;\n\n\t\t&:not(:focus):not(:active) {\n\t\t\tborder-color: var(--color-border-dark);\n\t\t}\n\t}\n\n\t&__hint {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tmargin-top: 8px;\n\t\talign-self: flex-start;\n\t}\n\n\t&__label {\n\t\tdisplay: block;\n\t\tpadding: 4px 0;\n\t}\n\n\t&__select {\n\t\twidth: 100%;\n\t}\n\n\t&__submit {\n\t\tmargin-top: 20px;\n\t}\n}\n"],sourceRoot:""}]);const o=r},23599:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".footer[data-v-3ec0b16a]{position:relative;display:flex;min-width:100%;width:fit-content;height:var(--row-height);background-color:var(--color-main-background)}.footer__cell[data-v-3ec0b16a]{display:flex;flex-direction:column;justify-content:center;padding:0 var(--cell-padding);min-width:var(--cell-width);width:var(--cell-width);color:var(--color-main-text)}.footer__cell strong[data-v-3ec0b16a],.footer__cell span[data-v-3ec0b16a],.footer__cell label[data-v-3ec0b16a]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow-wrap:anywhere}@media(min-width: 670px){.footer__cell--avatar[data-v-3ec0b16a],.footer__cell--displayname[data-v-3ec0b16a]{position:sticky;z-index:var(--sticky-column-z-index);background-color:var(--color-main-background)}.footer__cell--avatar[data-v-3ec0b16a]{left:0}.footer__cell--displayname[data-v-3ec0b16a]{left:var(--avatar-cell-width);border-right:1px solid var(--color-border)}}.footer__cell--avatar[data-v-3ec0b16a]{min-width:var(--avatar-cell-width);width:var(--avatar-cell-width);align-items:center;padding:0;user-select:none}.footer__cell--multiline span[data-v-3ec0b16a]{line-height:1.3em;white-space:unset}@supports(-webkit-line-clamp: 2){.footer__cell--multiline span[data-v-3ec0b16a]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}}.footer__cell--large[data-v-3ec0b16a]{min-width:var(--cell-width-large);width:var(--cell-width-large)}.footer__cell--obfuscated[data-v-3ec0b16a]{min-width:400px;width:400px}.footer__cell--fill[data-v-3ec0b16a]{min-width:var(--cell-width-large);width:100%}.footer__cell--actions[data-v-3ec0b16a]{position:sticky;right:0;z-index:var(--sticky-column-z-index);display:flex;flex-direction:row;align-items:center;min-width:110px;width:110px;background-color:var(--color-main-background);border-left:1px solid var(--color-border)}.footer__subtitle[data-v-3ec0b16a]{color:var(--color-text-maxcontrast)}.footer__cell[data-v-3ec0b16a]{position:sticky;color:var(--color-text-maxcontrast)}.footer__cell--loading[data-v-3ec0b16a]{left:0;min-width:var(--avatar-cell-width);width:var(--avatar-cell-width);align-items:center;padding:0}.footer__cell--count[data-v-3ec0b16a]{left:var(--avatar-cell-width);min-width:var(--cell-width);width:var(--cell-width)}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/UserListFooter.vue","webpack://./apps/settings/src/components/Users/shared/styles.scss"],names:[],mappings:"AAGA,yBCoBC,iBAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,wBAAA,CACA,6CAAA,CAIA,+BACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,6BAAA,CACA,2BAAA,CACA,uBAAA,CACA,4BAAA,CAEA,+GAGC,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,yBACC,mFAEC,eAAA,CACA,oCAAA,CACA,6CAAA,CAGD,uCACC,MAAA,CAGD,4CACC,6BAAA,CACA,0CAAA,CAAA,CAIF,uCACC,kCAAA,CACA,8BAAA,CACA,kBAAA,CACA,SAAA,CACA,gBAAA,CAIA,+CACC,iBAAA,CACA,iBAAA,CAEA,iCAJD,+CAKE,mBAAA,CACA,oBAAA,CACA,2BAAA,CAAA,CAKH,sCACC,iCAAA,CACA,6BAAA,CAGD,2CACC,eAAA,CACA,WAAA,CAID,qCACC,iCAAA,CACA,UAAA,CAGD,wCACC,eAAA,CACA,OAAA,CACA,oCAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,WAAA,CACA,6CAAA,CACA,yCAAA,CAIF,mCACC,mCAAA,CDjHD,+BACC,eAAA,CACA,mCAAA,CAEA,wCACC,MAAA,CACA,kCAAA,CACA,8BAAA,CACA,kBAAA,CACA,SAAA,CAGD,sCACC,6BAAA,CACA,2BAAA,CACA,uBAAA",sourcesContent:["\n@import './shared/styles.scss';\n\n.footer {\n\t@include row;\n\t@include cell;\n\n\t&__cell {\n\t\tposition: sticky;\n\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t&--loading {\n\t\t\tleft: 0;\n\t\t\tmin-width: var(--avatar-cell-width);\n\t\t\twidth: var(--avatar-cell-width);\n\t\t\talign-items: center;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\t&--count {\n\t\t\tleft: var(--avatar-cell-width);\n\t\t\tmin-width: var(--cell-width);\n\t\t\twidth: var(--cell-width);\n\t\t}\n\t}\n}\n","/**\n * @copyright 2023 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n@mixin row {\n\tposition: relative;\n\tdisplay: flex;\n\tmin-width: 100%;\n\twidth: fit-content;\n\theight: var(--row-height);\n\tbackground-color: var(--color-main-background);\n}\n\n@mixin cell {\n\t&__cell {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tpadding: 0 var(--cell-padding);\n\t\tmin-width: var(--cell-width);\n\t\twidth: var(--cell-width);\n\t\tcolor: var(--color-main-text);\n\n\t\tstrong,\n\t\tspan,\n\t\tlabel {\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow-wrap: anywhere;\n\t\t}\n\n\t\t@media (min-width: 670px) { /* Show one &--large column between stickied columns */\n\t\t\t&--avatar,\n\t\t\t&--displayname {\n\t\t\t\tposition: sticky;\n\t\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\t\tbackground-color: var(--color-main-background);\n\t\t\t}\n\n\t\t\t&--avatar {\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t&--displayname {\n\t\t\t\tleft: var(--avatar-cell-width);\n\t\t\t\tborder-right: 1px solid var(--color-border);\n\t\t\t}\n\t\t}\n\n\t\t&--avatar {\n\t\t\tmin-width: var(--avatar-cell-width);\n\t\t\twidth: var(--avatar-cell-width);\n\t\t\talign-items: center;\n\t\t\tpadding: 0;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t&--multiline {\n\t\t\tspan {\n\t\t\t\tline-height: 1.3em;\n\t\t\t\twhite-space: unset;\n\n\t\t\t\t@supports (-webkit-line-clamp: 2) {\n\t\t\t\t\tdisplay: -webkit-box;\n\t\t\t\t\t-webkit-line-clamp: 2;\n\t\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t&--large {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: var(--cell-width-large);\n\t\t}\n\n\t\t&--obfuscated {\n\t\t\tmin-width: 400px;\n\t\t\twidth: 400px;\n\t\t}\n\n\t\t// Fill remaining row space with cell\n\t\t&--fill {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&--actions {\n\t\t\tposition: sticky;\n\t\t\tright: 0;\n\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-items: center;\n\t\t\tmin-width: 110px;\n\t\t\twidth: 110px;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t\tborder-left: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t&__subtitle {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n"],sourceRoot:""}]);const o=r},77024:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".header[data-v-69afa821]{position:relative;display:flex;min-width:100%;width:fit-content;height:var(--row-height);background-color:var(--color-main-background);border-bottom:1px solid var(--color-border)}.header__cell[data-v-69afa821]{display:flex;flex-direction:column;justify-content:center;padding:0 var(--cell-padding);min-width:var(--cell-width);width:var(--cell-width);color:var(--color-main-text)}.header__cell strong[data-v-69afa821],.header__cell span[data-v-69afa821],.header__cell label[data-v-69afa821]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow-wrap:anywhere}@media(min-width: 670px){.header__cell--avatar[data-v-69afa821],.header__cell--displayname[data-v-69afa821]{position:sticky;z-index:var(--sticky-column-z-index);background-color:var(--color-main-background)}.header__cell--avatar[data-v-69afa821]{left:0}.header__cell--displayname[data-v-69afa821]{left:var(--avatar-cell-width);border-right:1px solid var(--color-border)}}.header__cell--avatar[data-v-69afa821]{min-width:var(--avatar-cell-width);width:var(--avatar-cell-width);align-items:center;padding:0;user-select:none}.header__cell--multiline span[data-v-69afa821]{line-height:1.3em;white-space:unset}@supports(-webkit-line-clamp: 2){.header__cell--multiline span[data-v-69afa821]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}}.header__cell--large[data-v-69afa821]{min-width:var(--cell-width-large);width:var(--cell-width-large)}.header__cell--obfuscated[data-v-69afa821]{min-width:400px;width:400px}.header__cell--fill[data-v-69afa821]{min-width:var(--cell-width-large);width:100%}.header__cell--actions[data-v-69afa821]{position:sticky;right:0;z-index:var(--sticky-column-z-index);display:flex;flex-direction:row;align-items:center;min-width:110px;width:110px;background-color:var(--color-main-background);border-left:1px solid var(--color-border)}.header__subtitle[data-v-69afa821]{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/UserListHeader.vue","webpack://./apps/settings/src/components/Users/shared/styles.scss"],names:[],mappings:"AAGA,yBCoBC,iBAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,wBAAA,CACA,6CAAA,CDrBA,2CAAA,CCyBA,+BACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,6BAAA,CACA,2BAAA,CACA,uBAAA,CACA,4BAAA,CAEA,+GAGC,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,yBACC,mFAEC,eAAA,CACA,oCAAA,CACA,6CAAA,CAGD,uCACC,MAAA,CAGD,4CACC,6BAAA,CACA,0CAAA,CAAA,CAIF,uCACC,kCAAA,CACA,8BAAA,CACA,kBAAA,CACA,SAAA,CACA,gBAAA,CAIA,+CACC,iBAAA,CACA,iBAAA,CAEA,iCAJD,+CAKE,mBAAA,CACA,oBAAA,CACA,2BAAA,CAAA,CAKH,sCACC,iCAAA,CACA,6BAAA,CAGD,2CACC,eAAA,CACA,WAAA,CAID,qCACC,iCAAA,CACA,UAAA,CAGD,wCACC,eAAA,CACA,OAAA,CACA,oCAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,WAAA,CACA,6CAAA,CACA,yCAAA,CAIF,mCACC,mCAAA",sourcesContent:["\n@import './shared/styles.scss';\n\n.header {\n\t@include row;\n\t@include cell;\n\n\tborder-bottom: 1px solid var(--color-border);\n}\n","/**\n * @copyright 2023 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n@mixin row {\n\tposition: relative;\n\tdisplay: flex;\n\tmin-width: 100%;\n\twidth: fit-content;\n\theight: var(--row-height);\n\tbackground-color: var(--color-main-background);\n}\n\n@mixin cell {\n\t&__cell {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tpadding: 0 var(--cell-padding);\n\t\tmin-width: var(--cell-width);\n\t\twidth: var(--cell-width);\n\t\tcolor: var(--color-main-text);\n\n\t\tstrong,\n\t\tspan,\n\t\tlabel {\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow-wrap: anywhere;\n\t\t}\n\n\t\t@media (min-width: 670px) { /* Show one &--large column between stickied columns */\n\t\t\t&--avatar,\n\t\t\t&--displayname {\n\t\t\t\tposition: sticky;\n\t\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\t\tbackground-color: var(--color-main-background);\n\t\t\t}\n\n\t\t\t&--avatar {\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t&--displayname {\n\t\t\t\tleft: var(--avatar-cell-width);\n\t\t\t\tborder-right: 1px solid var(--color-border);\n\t\t\t}\n\t\t}\n\n\t\t&--avatar {\n\t\t\tmin-width: var(--avatar-cell-width);\n\t\t\twidth: var(--avatar-cell-width);\n\t\t\talign-items: center;\n\t\t\tpadding: 0;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t&--multiline {\n\t\t\tspan {\n\t\t\t\tline-height: 1.3em;\n\t\t\t\twhite-space: unset;\n\n\t\t\t\t@supports (-webkit-line-clamp: 2) {\n\t\t\t\t\tdisplay: -webkit-box;\n\t\t\t\t\t-webkit-line-clamp: 2;\n\t\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t&--large {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: var(--cell-width-large);\n\t\t}\n\n\t\t&--obfuscated {\n\t\t\tmin-width: 400px;\n\t\t\twidth: 400px;\n\t\t}\n\n\t\t// Fill remaining row space with cell\n\t\t&--fill {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&--actions {\n\t\t\tposition: sticky;\n\t\t\tright: 0;\n\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-items: center;\n\t\t\tmin-width: 110px;\n\t\t\twidth: 110px;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t\tborder-left: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t&__subtitle {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n"],sourceRoot:""}]);const o=r},76101:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".user-list__row[data-v-6df56da4]{position:relative;display:flex;min-width:100%;width:fit-content;height:var(--row-height);background-color:var(--color-main-background)}.user-list__row[data-v-6df56da4]:hover{background-color:var(--color-background-hover)}.user-list__row:hover .row__cell[data-v-6df56da4]:not(.row__cell--actions){background-color:var(--color-background-hover)}.user-list__row .select--fill[data-v-6df56da4]{max-width:calc(var(--cell-width-large) - 2*var(--cell-padding))}.row__cell[data-v-6df56da4]{display:flex;flex-direction:column;justify-content:center;padding:0 var(--cell-padding);min-width:var(--cell-width);width:var(--cell-width);color:var(--color-main-text)}.row__cell strong[data-v-6df56da4],.row__cell span[data-v-6df56da4],.row__cell label[data-v-6df56da4]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow-wrap:anywhere}@media(min-width: 670px){.row__cell--avatar[data-v-6df56da4],.row__cell--displayname[data-v-6df56da4]{position:sticky;z-index:var(--sticky-column-z-index);background-color:var(--color-main-background)}.row__cell--avatar[data-v-6df56da4]{left:0}.row__cell--displayname[data-v-6df56da4]{left:var(--avatar-cell-width);border-right:1px solid var(--color-border)}}.row__cell--avatar[data-v-6df56da4]{min-width:var(--avatar-cell-width);width:var(--avatar-cell-width);align-items:center;padding:0;user-select:none}.row__cell--multiline span[data-v-6df56da4]{line-height:1.3em;white-space:unset}@supports(-webkit-line-clamp: 2){.row__cell--multiline span[data-v-6df56da4]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}}.row__cell--large[data-v-6df56da4]{min-width:var(--cell-width-large);width:var(--cell-width-large)}.row__cell--obfuscated[data-v-6df56da4]{min-width:400px;width:400px}.row__cell--fill[data-v-6df56da4]{min-width:var(--cell-width-large);width:100%}.row__cell--actions[data-v-6df56da4]{position:sticky;right:0;z-index:var(--sticky-column-z-index);display:flex;flex-direction:row;align-items:center;min-width:110px;width:110px;background-color:var(--color-main-background);border-left:1px solid var(--color-border)}.row__subtitle[data-v-6df56da4]{color:var(--color-text-maxcontrast)}.row__cell[data-v-6df56da4]{border-bottom:1px solid var(--color-border)}.row__cell[data-v-6df56da4] .v-select.select{min-width:var(--cell-min-width)}.row__progress[data-v-6df56da4]{margin-top:4px}.row__progress--warn[data-v-6df56da4]::-moz-progress-bar{background:var(--color-warning) !important}.row__progress--warn[data-v-6df56da4]::-webkit-progress-value{background:var(--color-warning) !important}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/UserRow.vue","webpack://./apps/settings/src/components/Users/shared/styles.scss"],names:[],mappings:"AAGA,iCCoBC,iBAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,wBAAA,CACA,6CAAA,CDtBA,uCACC,8CAAA,CAEA,2EACC,8CAAA,CAKF,+CACC,+DAAA,CCgBD,4BACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,6BAAA,CACA,2BAAA,CACA,uBAAA,CACA,4BAAA,CAEA,sGAGC,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,yBACC,6EAEC,eAAA,CACA,oCAAA,CACA,6CAAA,CAGD,oCACC,MAAA,CAGD,yCACC,6BAAA,CACA,0CAAA,CAAA,CAIF,oCACC,kCAAA,CACA,8BAAA,CACA,kBAAA,CACA,SAAA,CACA,gBAAA,CAIA,4CACC,iBAAA,CACA,iBAAA,CAEA,iCAJD,4CAKE,mBAAA,CACA,oBAAA,CACA,2BAAA,CAAA,CAKH,mCACC,iCAAA,CACA,6BAAA,CAGD,wCACC,eAAA,CACA,WAAA,CAID,kCACC,iCAAA,CACA,UAAA,CAGD,qCACC,eAAA,CACA,OAAA,CACA,oCAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,WAAA,CACA,6CAAA,CACA,yCAAA,CAIF,gCACC,mCAAA,CDjGD,4BACC,2CAAA,CAGC,6CACC,+BAAA,CAKH,gCACC,cAAA,CAGC,yDACC,0CAAA,CAED,8DACC,0CAAA",sourcesContent:["\n@import './shared/styles.scss';\n\n.user-list__row {\n\t@include row;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\n\t\t.row__cell:not(.row__cell--actions) {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\t}\n\n\t// Limit width of select in fill cell\n\t.select--fill {\n\t\tmax-width: calc(var(--cell-width-large) - (2 * var(--cell-padding)));\n\t}\n}\n\n.row {\n\t@include cell;\n\n\t&__cell {\n\t\tborder-bottom: 1px solid var(--color-border);\n\n\t\t:deep {\n\t\t\t.v-select.select {\n\t\t\t\tmin-width: var(--cell-min-width);\n\t\t\t}\n\t\t}\n\t}\n\n\t&__progress {\n\t\tmargin-top: 4px;\n\n\t\t&--warn {\n\t\t\t&::-moz-progress-bar {\n\t\t\t\tbackground: var(--color-warning) !important;\n\t\t\t}\n\t\t\t&::-webkit-progress-value {\n\t\t\t\tbackground: var(--color-warning) !important;\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @copyright 2023 Christopher Ng <chrng8@gmail.com>\n *\n * @author Christopher Ng <chrng8@gmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n@mixin row {\n\tposition: relative;\n\tdisplay: flex;\n\tmin-width: 100%;\n\twidth: fit-content;\n\theight: var(--row-height);\n\tbackground-color: var(--color-main-background);\n}\n\n@mixin cell {\n\t&__cell {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tpadding: 0 var(--cell-padding);\n\t\tmin-width: var(--cell-width);\n\t\twidth: var(--cell-width);\n\t\tcolor: var(--color-main-text);\n\n\t\tstrong,\n\t\tspan,\n\t\tlabel {\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow-wrap: anywhere;\n\t\t}\n\n\t\t@media (min-width: 670px) { /* Show one &--large column between stickied columns */\n\t\t\t&--avatar,\n\t\t\t&--displayname {\n\t\t\t\tposition: sticky;\n\t\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\t\tbackground-color: var(--color-main-background);\n\t\t\t}\n\n\t\t\t&--avatar {\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t&--displayname {\n\t\t\t\tleft: var(--avatar-cell-width);\n\t\t\t\tborder-right: 1px solid var(--color-border);\n\t\t\t}\n\t\t}\n\n\t\t&--avatar {\n\t\t\tmin-width: var(--avatar-cell-width);\n\t\t\twidth: var(--avatar-cell-width);\n\t\t\talign-items: center;\n\t\t\tpadding: 0;\n\t\t\tuser-select: none;\n\t\t}\n\n\t\t&--multiline {\n\t\t\tspan {\n\t\t\t\tline-height: 1.3em;\n\t\t\t\twhite-space: unset;\n\n\t\t\t\t@supports (-webkit-line-clamp: 2) {\n\t\t\t\t\tdisplay: -webkit-box;\n\t\t\t\t\t-webkit-line-clamp: 2;\n\t\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t&--large {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: var(--cell-width-large);\n\t\t}\n\n\t\t&--obfuscated {\n\t\t\tmin-width: 400px;\n\t\t\twidth: 400px;\n\t\t}\n\n\t\t// Fill remaining row space with cell\n\t\t&--fill {\n\t\t\tmin-width: var(--cell-width-large);\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&--actions {\n\t\t\tposition: sticky;\n\t\t\tright: 0;\n\t\t\tz-index: var(--sticky-column-z-index);\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-items: center;\n\t\t\tmin-width: 110px;\n\t\t\twidth: 110px;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t\tborder-left: 1px solid var(--color-border);\n\t\t}\n\t}\n\n\t&__subtitle {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n"],sourceRoot:""}]);const o=r},92004:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,"label[for=default-quota-select][data-v-b2364f72]{display:block;padding:4px 0}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/UserSettingsDialog.vue"],names:[],mappings:"AACA,iDACC,aAAA,CACA,aAAA",sourcesContent:['\nlabel[for="default-quota-select"] {\n\tdisplay: block;\n\tpadding: 4px 0;\n}\n'],sourceRoot:""}]);const o=r},55772:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".user-list[data-v-a583d0b2]{--avatar-cell-width: 48px;--cell-padding: 7px;--cell-width: 200px;--cell-width-large: 300px;--cell-min-width: calc(var(--cell-width) - (2 * var(--cell-padding)));--sticky-column-z-index: calc(var(--vs-dropdown-z-index) + 1);display:block;overflow:auto;height:100%}.user-list__header[data-v-a583d0b2],.user-list__footer[data-v-a583d0b2]{position:sticky;display:block}.user-list__header[data-v-a583d0b2]{top:0;z-index:calc(var(--sticky-column-z-index) + 1)}.user-list__footer[data-v-a583d0b2]{left:0}.user-list__body[data-v-a583d0b2]{display:flex;flex-direction:column;width:100%}","",{version:3,sources:["webpack://./apps/settings/src/components/Users/VirtualList.vue"],names:[],mappings:"AACA,4BACC,yBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,qEAAA,CACA,6DAAA,CAGA,aAAA,CACA,aAAA,CACA,WAAA,CAEA,wEAEC,eAAA,CAEA,aAAA,CAGD,oCACC,KAAA,CACA,8CAAA,CAGD,oCACC,MAAA,CAGD,kCACC,YAAA,CACA,qBAAA,CACA,UAAA",sourcesContent:["\n.user-list {\n\t--avatar-cell-width: 48px;\n\t--cell-padding: 7px;\n\t--cell-width: 200px;\n\t--cell-width-large: 300px;\n\t--cell-min-width: calc(var(--cell-width) - (2 * var(--cell-padding)));\n\t--sticky-column-z-index: calc(var(--vs-dropdown-z-index) + 1); // Keep the sticky column on top of the select dropdown\n\n\t// Necessary for virtual scroll optimized rendering\n\tdisplay: block;\n\toverflow: auto;\n\theight: 100%;\n\n\t&__header,\n\t&__footer {\n\t\tposition: sticky;\n\t\t// Fix sticky positioning in Firefox\n\t\tdisplay: block;\n\t}\n\n\t&__header {\n\t\ttop: 0;\n\t\tz-index: calc(var(--sticky-column-z-index) + 1);\n\t}\n\n\t&__footer {\n\t\tleft: 0;\n\t}\n\n\t&__body {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t}\n}\n"],sourceRoot:""}]);const o=r},65610:(t,e,s)=>{"use strict";s.d(e,{A:()=>o});var a=s(71354),i=s.n(a),n=s(76314),r=s.n(n)()(i());r.push([t.id,".app-content[data-v-baf5301a]{display:flex;overflow:hidden;flex-direction:column;max-height:100%}.app-navigation-entry__settings[data-v-baf5301a]{height:auto !important;flex:0 0 auto}","",{version:3,sources:["webpack://./apps/settings/src/views/Users.vue"],names:[],mappings:"AACA,8BAEC,YAAA,CACA,eAAA,CACA,qBAAA,CACA,eAAA,CAGD,iDACC,sBAAA,CAEA,aAAA",sourcesContent:["\n.app-content {\n\t// Virtual list needs to be full height and is scrollable\n\tdisplay: flex;\n\toverflow: hidden;\n\tflex-direction: column;\n\tmax-height: 100%;\n}\n\n.app-navigation-entry__settings {\n\theight: auto !important;\n\t// Prevent shrinking or growing\n\tflex: 0 0 auto;\n}\n"],sourceRoot:""}]);const o=r},45827:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ie});var i=a(85471),n=a(35973),r=a.n(n),o=a(54914),l=a(53334),d=a(85168),c=a(44131),u=a(63961),A=a(18195),g=a(42530),p=a(77191),h=a(52439),m=a(31927),v=a(46447),C=a(22378),w=a(70563),f=a(46222),_=a(72755);const b={name:"AccountOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var y=a(14486);const x=(0,y.A)(b,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon account-off-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,4A4,4 0 0,1 16,8C16,9.95 14.6,11.58 12.75,11.93L8.07,7.25C8.42,5.4 10.05,4 12,4M12.28,14L18.28,20L20,21.72L18.73,23L15.73,20H4V18C4,16.16 6.5,14.61 9.87,14.14L2.78,7.05L4.05,5.78L12.28,14M20,18V19.18L15.14,14.32C18,14.93 20,16.35 20,18Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports,k={name:"CogIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},U=(0,y.A)(k,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon cog-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports;var S=a(27577);const L={name:"ShieldAccountIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},G=(0,y.A)(L,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon shield-account-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports;var N=a(63420),B=a(9518),q=a(53278),O=a(48934),D=a(11037),M=a(93919);const I={name:"GroupListItem",components:{AccountGroup:_.A,Delete:D.A,Fragment:o.F,NcActionButton:N.A,NcActionInput:c.A,NcAppNavigationItem:h.A,NcButton:B.A,NcCounterBubble:w.A,NcModal:q.A,NcNoteCard:O.A,Pencil:M.A},props:{active:{type:Boolean,required:!0},count:{type:Number,default:null},id:{type:String,required:!0},name:{type:String,required:!0}},data:()=>({loadingRenameGroup:!1,openGroupMenu:!1,showRemoveGroupModal:!1}),computed:{settings(){return this.$store.getters.getServerData}},methods:{handleGroupMenuOpen(){this.openGroupMenu=!0},async renameGroup(t){if(""===t.trim())return;const e=this.$refs.displayNameInput.$el.querySelector('input[type="text"]').value;if(""!==e.trim())try{this.openGroupMenu=!1,this.loadingRenameGroup=!0,await this.$store.dispatch("renameGroup",{groupid:t.trim(),displayName:e.trim()}),this.loadingRenameGroup=!1}catch{this.openGroupMenu=!0,this.loadingRenameGroup=!1}},async removeGroup(){try{await this.$store.dispatch("removeGroup",this.id),this.showRemoveGroupModal=!1}catch(e){(0,d.Qg)(t("settings",'Failed to remove group "{group}"',{group:this.name}))}}}};var $=a(85072),z=a.n($),P=a(97825),F=a.n(P),T=a(77659),E=a.n(T),R=a(55056),Q=a.n(R),j=a(10540),H=a.n(j),Y=a(41113),W=a.n(Y),V=a(96412),K={};K.styleTagTransform=W(),K.setAttributes=Q(),K.insert=E().bind(null,"head"),K.domAPI=F(),K.insertStyleElement=H(),z()(V.A,K),V.A&&V.A.locals&&V.A.locals;const J=(0,y.A)(I,(function(){var t=this,e=t._self._c;return e("Fragment",[t.showRemoveGroupModal?e("NcModal",{on:{close:function(e){t.showRemoveGroupModal=!1}}},[e("div",{staticClass:"modal__content"},[e("h2",{staticClass:"modal__header"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Please confirm the group removal"))+"\n\t\t\t")]),t._v(" "),e("NcNoteCard",{attrs:{type:"warning","show-alert":""}},[t._v("\n\t\t\t\t"+t._s(t.t("settings",'You are about to remove the group "{group}". The accounts will NOT be deleted.',{group:t.name}))+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"modal__button-row"},[e("NcButton",{attrs:{type:"secondary"},on:{click:function(e){t.showRemoveGroupModal=!1}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","Cancel"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary"},on:{click:t.removeGroup}},[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","Confirm"))+"\n\t\t\t\t")])],1)],1)]):t._e(),t._v(" "),e("NcAppNavigationItem",{key:t.id,attrs:{exact:!0,name:t.name,to:{name:"group",params:{selectedGroup:encodeURIComponent(t.id)}},loading:t.loadingRenameGroup,"menu-open":t.openGroupMenu},on:{"update:menuOpen":t.handleGroupMenuOpen},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AccountGroup",{attrs:{size:20}})]},proxy:!0},{key:"counter",fn:function(){return[t.count?e("NcCounterBubble",{attrs:{type:t.active?"highlighted":void 0}},[t._v("\n\t\t\t\t"+t._s(t.count)+"\n\t\t\t")]):t._e()]},proxy:!0},{key:"actions",fn:function(){return["admin"!==t.id&&"disabled"!==t.id&&t.settings.isAdmin?e("NcActionInput",{ref:"displayNameInput",attrs:{"trailing-button-label":t.t("settings","Submit"),type:"text",value:t.name,label:t.t("settings","Rename group")},on:{submit:function(e){return t.renameGroup(t.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Pencil",{attrs:{size:20}})]},proxy:!0}],null,!1,580569589)}):t._e(),t._v(" "),"admin"!==t.id&&"disabled"!==t.id&&t.settings.isAdmin?e("NcActionButton",{on:{click:function(e){t.showRemoveGroupModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete",{attrs:{size:20}})]},proxy:!0}],null,!1,2705356561)},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Remove group"))+"\n\t\t\t")]):t._e()]},proxy:!0}])})],1)}),[],!1,null,"17dd13c0",null).exports;var Z=a(10833),X=a(6695),tt=a(61338),et=a(90769),st=a(17334),at=a(36620);i.Ay.directive("elementVisibility",et.Zx);const it=i.Ay.extend({name:"VirtualList",props:{dataComponent:{type:[Object,Function],required:!0},dataKey:{type:String,required:!0},dataSources:{type:Array,required:!0},itemHeight:{type:Number,required:!0},extraProps:{type:Object,default:()=>({})}},data:()=>({bufferItems:3,index:0,headerHeight:0,tableHeight:0,resizeObserver:null}),computed:{startIndex(){return Math.max(0,this.index-3)},shownItems(){return Math.ceil((this.tableHeight-this.headerHeight)/this.itemHeight)+6},renderedItems(){return this.dataSources.slice(this.startIndex,this.startIndex+this.shownItems)},tbodyStyle(){const t=this.startIndex+this.shownItems>this.dataSources.length,e=this.dataSources.length-this.startIndex-this.shownItems,s=Math.min(this.dataSources.length-this.startIndex,e);return{paddingTop:"".concat(this.startIndex*this.itemHeight,"px"),paddingBottom:t?0:"".concat(s*this.itemHeight,"px")}}},mounted(){var t,e;const s=this.$el,a=null===(t=this.$refs)||void 0===t?void 0:t.tfoot,i=null===(e=this.$refs)||void 0===e?void 0:e.thead;this.resizeObserver=new ResizeObserver((0,st.debounce)((()=>{var t,e;this.headerHeight=null!==(t=null==i?void 0:i.clientHeight)&&void 0!==t?t:0,this.tableHeight=null!==(e=null==s?void 0:s.clientHeight)&&void 0!==e?e:0,at.A.debug("VirtualList resizeObserver updated"),this.onScroll()}),100,!1)),this.resizeObserver.observe(s),this.resizeObserver.observe(a),this.resizeObserver.observe(i),this.$el.addEventListener("scroll",this.onScroll)},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{handleFooterVisibility(t){t&&this.$emit("scroll-end")},onScroll(){this.index=Math.max(0,Math.round(this.$el.scrollTop/this.itemHeight))}}});var nt=a(55772),rt={};rt.styleTagTransform=W(),rt.setAttributes=Q(),rt.insert=E().bind(null,"head"),rt.domAPI=F(),rt.insertStyleElement=H(),z()(nt.A,rt),nt.A&&nt.A.locals&&nt.A.locals;const ot=(0,y.A)(it,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("table",{staticClass:"user-list"},[t._t("before"),t._v(" "),e("thead",{ref:"thead",staticClass:"user-list__header",attrs:{role:"rowgroup"}},[t._t("header")],2),t._v(" "),e("tbody",{staticClass:"user-list__body",style:t.tbodyStyle},t._l(t.renderedItems,(function(s,a){return e(t.dataComponent,t._b({key:s[t.dataKey],tag:"component",attrs:{user:s,visible:(a>=t.bufferItems||t.index<=t.bufferItems)&&a<t.shownItems-t.bufferItems}},"component",t.extraProps,!1))})),1),t._v(" "),e("tfoot",{directives:[{name:"element-visibility",rawName:"v-element-visibility",value:t.handleFooterVisibility,expression:"handleFooterVisibility"}],ref:"tfoot",staticClass:"user-list__footer",attrs:{role:"rowgroup"}},[t._t("footer")],2)],2)}),[],!1,null,"a583d0b2",null).exports;var lt=a(16044),dt=a(67607),ct=a(82182);const ut={name:"NewUserModal",components:{NcButton:B.A,NcModal:q.A,NcPasswordField:lt.A,NcSelect:dt.A,NcTextField:ct.A},props:{loading:{type:Object,required:!0},newUser:{type:Object,required:!0},quotaOptions:{type:Array,required:!0}},data:()=>({possibleManagers:[],managerLabel:t("settings","Set user manager")}),computed:{showConfig(){return this.$store.getters.getShowConfig},settings(){return this.$store.getters.getServerData},usernameLabel(){return this.settings.newUserGenerateUserID?t("settings","Username will be autogenerated"):t("settings","Username (required)")},minPasswordLength(){return this.$store.getters.getPasswordPolicyMinLength},groups(){return this.$store.getters.getGroups.filter((t=>"disabled"!==t.id)).sort(((t,e)=>t.name.localeCompare(e.name)))},subAdminsGroups(){return this.$store.getters.getSubadminGroups},canAddGroups(){return this.groups.map((t=>((t=Object.assign({},t)).$isDisabled=!1===t.canAdd,t)))},languages(){return[{name:t("settings","Common languages"),languages:this.settings.languages.commonLanguages},...this.settings.languages.commonLanguages,{name:t("settings","Other languages"),languages:this.settings.languages.otherLanguages},...this.settings.languages.otherLanguages]}},async beforeMount(){await this.searchUserManager()},methods:{async createUser(){this.loading.all=!0;try{var t,e;await this.$store.dispatch("addUser",{userid:this.newUser.id,password:this.newUser.password,displayName:this.newUser.displayName,email:this.newUser.mailAddress,groups:this.newUser.groups.map((t=>t.id)),subadmin:this.newUser.subAdminsGroups.map((t=>t.id)),quota:this.newUser.quota.id,language:this.newUser.language.code,manager:this.newUser.manager.id}),this.$emit("reset"),null===(t=this.$refs.username)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.inputField)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.input)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t),this.$emit("close")}catch(t){if(this.loading.all=!1,t.response&&t.response.data&&t.response.data.ocs&&t.response.data.ocs.meta){const e=t.response.data.ocs.meta.statuscode;var s,a;if(102===e)null===(s=this.$refs.username)||void 0===s||null===(s=s.$refs)||void 0===s||null===(s=s.inputField)||void 0===s||null===(s=s.$refs)||void 0===s||null===(s=s.input)||void 0===s||null===(a=s.focus)||void 0===a||a.call(s);else if(107===e){var i,n;null===(i=this.$refs.password)||void 0===i||null===(i=i.$refs)||void 0===i||null===(i=i.inputField)||void 0===i||null===(i=i.$refs)||void 0===i||null===(i=i.input)||void 0===i||null===(n=i.focus)||void 0===n||n.call(i)}}}},handleGroupInput(t){this.newUser.groups=t.filter((t=>Boolean(t.id)))},async createGroup(t){let{name:e}=t;this.loading.groups=!0;try{await this.$store.dispatch("addGroup",e),this.newUser.groups.push(this.groups.find((t=>t.id===e))),this.loading.groups=!1}catch(t){this.loading.groups=!1}},validateQuota(t){const e=OC.Util.computerFileSize(t);return null!==e&&e>=0?(t=OC.Util.humanFileSize(OC.Util.computerFileSize(t)),this.newUser.quota={id:t,label:t},this.newUser.quota):(this.newUser.quota=this.quotaOptions[0],this.quotaOptions[0])},languageFilterBy:(t,e,s)=>t.languages?t.languages.some((t=>{let{name:e}=t;return e.toLocaleLowerCase().includes(s.toLocaleLowerCase())})):(e||"").toLocaleLowerCase().includes(s.toLocaleLowerCase()),async searchUserManager(t){await this.$store.dispatch("searchUsers",{offset:0,limit:10,search:t}).then((t=>{const e=null!=t&&t.data?Object.values(null==t?void 0:t.data.ocs.data.users):[];e.length>0&&(this.possibleManagers=e)}))}}};var At=a(9499),gt={};gt.styleTagTransform=W(),gt.setAttributes=Q(),gt.insert=E().bind(null,"head"),gt.domAPI=F(),gt.insertStyleElement=H(),z()(At.A,gt),At.A&&At.A.locals&&At.A.locals;const pt=(0,y.A)(ut,(function(){var t=this,e=t._self._c;return e("NcModal",t._g({staticClass:"modal",attrs:{size:"small"}},t.$listeners),[e("form",{staticClass:"modal__form",attrs:{"data-test":"form",disabled:t.loading.all},on:{submit:function(e){return e.preventDefault(),t.createUser.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("settings","New user")))]),t._v(" "),e("NcTextField",{ref:"username",staticClass:"modal__item",attrs:{"data-test":"username",value:t.newUser.id,disabled:t.settings.newUserGenerateUserID,label:t.usernameLabel,autocapitalize:"none",autocomplete:"off",spellcheck:"false",pattern:"[a-zA-Z0-9 _\\.@\\-']+",required:""},on:{"update:value":function(e){return t.$set(t.newUser,"id",e)}}}),t._v(" "),e("NcTextField",{staticClass:"modal__item",attrs:{"data-test":"displayName",value:t.newUser.displayName,label:t.t("settings","Display name"),autocapitalize:"none",autocomplete:"off",spellcheck:"false"},on:{"update:value":function(e){return t.$set(t.newUser,"displayName",e)}}}),t._v(" "),t.settings.newUserRequireEmail?t._e():e("span",{staticClass:"modal__hint",attrs:{id:"password-email-hint"}},[t._v("\n\t\t\t"+t._s(t.t("settings","Either password or email is required"))+"\n\t\t")]),t._v(" "),e("NcPasswordField",{ref:"password",staticClass:"modal__item",attrs:{"data-test":"password",value:t.newUser.password,minlength:t.minPasswordLength,maxlength:469,"aria-describedby":"password-email-hint",label:""===t.newUser.mailAddress?t.t("settings","Password (required)"):t.t("settings","Password"),autocapitalize:"none",autocomplete:"new-password",spellcheck:"false",required:""===t.newUser.mailAddress},on:{"update:value":function(e){return t.$set(t.newUser,"password",e)}}}),t._v(" "),e("NcTextField",{staticClass:"modal__item",attrs:{"data-test":"email",type:"email",value:t.newUser.mailAddress,"aria-describedby":"password-email-hint",label:""===t.newUser.password||t.settings.newUserRequireEmail?t.t("settings","Email (required)"):t.t("settings","Email"),autocapitalize:"none",autocomplete:"off",spellcheck:"false",required:""===t.newUser.password||t.settings.newUserRequireEmail},on:{"update:value":function(e){return t.$set(t.newUser,"mailAddress",e)}}}),t._v(" "),e("div",{staticClass:"modal__item"},[e("label",{staticClass:"modal__label",attrs:{for:"new-user-groups"}},[t._v("\n\t\t\t\t"+t._s(t.settings.isAdmin?t.t("settings","Groups"):t.t("settings","Groups (required)"))+"\n\t\t\t")]),t._v(" "),e("NcSelect",{staticClass:"modal__select",attrs:{"input-id":"new-user-groups",placeholder:t.t("settings","Set user groups"),disabled:t.loading.groups||t.loading.all,options:t.canAddGroups,value:t.newUser.groups,label:"name","close-on-select":!1,multiple:!0,taggable:!0,required:!t.settings.isAdmin},on:{input:t.handleGroupInput,"option:created":t.createGroup}})],1),t._v(" "),t.subAdminsGroups.length>0?e("div",{staticClass:"modal__item"},[e("label",{staticClass:"modal__label",attrs:{for:"new-user-sub-admin"}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Administered groups"))+"\n\t\t\t")]),t._v(" "),e("NcSelect",{staticClass:"modal__select",attrs:{"input-id":"new-user-sub-admin",placeholder:t.t("settings","Set user as admin for …"),options:t.subAdminsGroups,"close-on-select":!1,multiple:!0,label:"name"},model:{value:t.newUser.subAdminsGroups,callback:function(e){t.$set(t.newUser,"subAdminsGroups",e)},expression:"newUser.subAdminsGroups"}})],1):t._e(),t._v(" "),e("div",{staticClass:"modal__item"},[e("label",{staticClass:"modal__label",attrs:{for:"new-user-quota"}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Quota"))+"\n\t\t\t")]),t._v(" "),e("NcSelect",{staticClass:"modal__select",attrs:{"input-id":"new-user-quota",placeholder:t.t("settings","Set user quota"),options:t.quotaOptions,clearable:!1,taggable:!0,"create-option":t.validateQuota},model:{value:t.newUser.quota,callback:function(e){t.$set(t.newUser,"quota",e)},expression:"newUser.quota"}})],1),t._v(" "),t.showConfig.showLanguages?e("div",{staticClass:"modal__item"},[e("label",{staticClass:"modal__label",attrs:{for:"new-user-language"}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Language"))+"\n\t\t\t")]),t._v(" "),e("NcSelect",{staticClass:"modal__select",attrs:{"input-id":"new-user-language",placeholder:t.t("settings","Set default language"),clearable:!1,selectable:t=>!t.languages,"filter-by":t.languageFilterBy,options:t.languages,label:"name"},model:{value:t.newUser.language,callback:function(e){t.$set(t.newUser,"language",e)},expression:"newUser.language"}})],1):t._e(),t._v(" "),e("div",{class:["modal__item managers",{"icon-loading-small":t.loading.manager}]},[e("label",{staticClass:"modal__label",attrs:{for:"new-user-manager"}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Manager"))+"\n\t\t\t")]),t._v(" "),e("NcSelect",{staticClass:"modal__select",attrs:{"input-id":"new-user-manager",placeholder:t.managerLabel,options:t.possibleManagers,"user-select":!0,label:"displayname"},on:{search:t.searchUserManager},model:{value:t.newUser.manager,callback:function(e){t.$set(t.newUser,"manager",e)},expression:"newUser.manager"}})],1),t._v(" "),e("NcButton",{staticClass:"modal__submit",attrs:{"data-test":"submit",type:"primary","native-type":"submit"}},[t._v("\n\t\t\t"+t._s(t.t("settings","Add new user"))+"\n\t\t")])],1)])}),[],!1,null,"2fe7d69f",null).exports,ht=i.Ay.extend({name:"UserListFooter",components:{NcLoadingIcon:f.A},props:{loading:{type:Boolean,required:!0},filteredUsers:{type:Array,required:!0}},computed:{userCount(){return this.loading?this.n("settings","{userCount} user …","{userCount} users …",this.filteredUsers.length,{userCount:this.filteredUsers.length}):this.n("settings","{userCount} user","{userCount} users",this.filteredUsers.length,{userCount:this.filteredUsers.length})}},methods:{t:l.Tl,n:l.zw}});var mt=a(23599),vt={};vt.styleTagTransform=W(),vt.setAttributes=Q(),vt.insert=E().bind(null,"head"),vt.domAPI=F(),vt.insertStyleElement=H(),z()(mt.A,vt),mt.A&&mt.A.locals&&mt.A.locals;const Ct=(0,y.A)(ht,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("tr",{staticClass:"footer"},[e("th",{attrs:{scope:"row"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Total rows summary")))])]),t._v(" "),e("td",{staticClass:"footer__cell footer__cell--loading"},[t.loading?e("NcLoadingIcon",{attrs:{title:t.t("settings","Loading users …"),size:32}}):t._e()],1),t._v(" "),e("td",{staticClass:"footer__cell footer__cell--count footer__cell--multiline"},[e("span",{attrs:{"aria-describedby":"user-count-desc"}},[t._v(t._s(t.userCount))]),t._v(" "),e("span",{staticClass:"hidden-visually",attrs:{id:"user-count-desc"}},[t._v("\n\t\t\t"+t._s(t.t("settings","Scroll to load more rows"))+"\n\t\t")])])])}),[],!1,null,"3ec0b16a",null).exports,wt=i.Ay.extend({name:"UserListHeader",props:{hasObfuscated:{type:Boolean,required:!0}},computed:{showConfig(){return this.$store.getters.getShowConfig},settings(){return this.$store.getters.getServerData},subAdminsGroups(){return this.$store.getters.getSubadminGroups},passwordLabel(){return this.hasObfuscated?(0,l.Tl)("settings","Password or insufficient permissions message"):(0,l.Tl)("settings","Password")}},methods:{t:l.Tl}});var ft=a(77024),_t={};_t.styleTagTransform=W(),_t.setAttributes=Q(),_t.insert=E().bind(null,"head"),_t.domAPI=F(),_t.insertStyleElement=H(),z()(ft.A,_t),ft.A&&ft.A.locals&&ft.A.locals;const bt=(0,y.A)(wt,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("tr",{staticClass:"header"},[e("th",{staticClass:"header__cell header__cell--avatar",attrs:{"data-cy-user-list-header-avatar":"",scope:"col"}},[e("span",{staticClass:"hidden-visually"},[t._v("\n\t\t\t"+t._s(t.t("settings","Avatar"))+"\n\t\t")])]),t._v(" "),e("th",{staticClass:"header__cell header__cell--displayname",attrs:{"data-cy-user-list-header-displayname":"",scope:"col"}},[e("strong",[t._v("\n\t\t\t"+t._s(t.t("settings","Display name"))+"\n\t\t")]),t._v(" "),e("span",{staticClass:"header__subtitle"},[t._v("\n\t\t\t"+t._s(t.t("settings","Username"))+"\n\t\t")])]),t._v(" "),e("th",{staticClass:"header__cell",class:{"header__cell--obfuscated":t.hasObfuscated},attrs:{"data-cy-user-list-header-password":"",scope:"col"}},[e("span",[t._v(t._s(t.passwordLabel))])]),t._v(" "),e("th",{staticClass:"header__cell",attrs:{"data-cy-user-list-header-email":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Email")))])]),t._v(" "),e("th",{staticClass:"header__cell header__cell--large",attrs:{"data-cy-user-list-header-groups":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Groups")))])]),t._v(" "),t.subAdminsGroups.length>0&&t.settings.isAdmin?e("th",{staticClass:"header__cell header__cell--large",attrs:{"data-cy-user-list-header-subadmins":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Group admin for")))])]):t._e(),t._v(" "),e("th",{staticClass:"header__cell",attrs:{"data-cy-user-list-header-quota":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Quota")))])]),t._v(" "),t.showConfig.showLanguages?e("th",{staticClass:"header__cell header__cell--large",attrs:{"data-cy-user-list-header-languages":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Language")))])]):t._e(),t._v(" "),t.showConfig.showUserBackend||t.showConfig.showStoragePath?e("th",{staticClass:"header__cell header__cell--large",attrs:{"data-cy-user-list-header-storage-location":"",scope:"col"}},[t.showConfig.showUserBackend?e("span",[t._v("\n\t\t\t"+t._s(t.t("settings","User backend"))+"\n\t\t")]):t._e(),t._v(" "),t.showConfig.showStoragePath?e("span",{staticClass:"header__subtitle"},[t._v("\n\t\t\t"+t._s(t.t("settings","Storage location"))+"\n\t\t")]):t._e()]):t._e(),t._v(" "),t.showConfig.showLastLogin?e("th",{staticClass:"header__cell",attrs:{"data-cy-user-list-header-last-login":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Last login")))])]):t._e(),t._v(" "),e("th",{staticClass:"header__cell header__cell--large header__cell--fill",attrs:{"data-cy-user-list-header-manager":"",scope:"col"}},[e("span",[t._v(t._s(t.t("settings","Manager")))])]),t._v(" "),e("th",{staticClass:"header__cell header__cell--actions",attrs:{"data-cy-user-list-header-actions":"",scope:"col"}},[e("span",{staticClass:"hidden-visually"},[t._v("\n\t\t\t"+t._s(t.t("settings","User actions"))+"\n\t\t")])])])}),[],!1,null,"69afa821",null).exports;var yt=a(35810),xt=a(92457),kt=a(41944),Ut=a(95101),St=a(24764);const Lt=(0,i.pM)({components:{NcActionButton:N.A,NcActions:St.A,NcIconSvgWrapper:X.A},props:{actions:{type:Array,required:!0},disabled:{type:Boolean,required:!0},edit:{type:Boolean,required:!0},user:{type:Object,required:!0}},computed:{editSvg(){return this.edit?'<svg xmlns="http://www.w3.org/2000/svg" id="mdi-check" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>':'<svg xmlns="http://www.w3.org/2000/svg" id="mdi-pencil" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>'}},methods:{toggleEdit(){this.$emit("update:edit",!this.edit)}}}),Gt=(0,y.A)(Lt,(function(){var t=this,e=t._self._c;return t._self._setupProxy,e("NcActions",{attrs:{"aria-label":t.t("settings","Toggle account actions menu"),disabled:t.disabled,inline:1}},[e("NcActionButton",{attrs:{"data-cy-user-list-action-toggle-edit":"".concat(t.edit),disabled:t.disabled},on:{click:t.toggleEdit},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{key:t.editSvg,attrs:{svg:t.editSvg,"aria-hidden":"true"}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.edit?t.t("settings","Done"):t.t("settings","Edit"))+"\n\t\t")]),t._v(" "),t._l(t.actions,(function(s,a){let{action:i,icon:n,text:r}=s;return e("NcActionButton",{key:a,attrs:{disabled:t.disabled,"aria-label":r,icon:n},on:{click:e=>i(e,{...t.user})}},[t._v("\n\t\t"+t._s(r)+"\n\t")])}))],2)}),[],!1,null,null,null).exports,Nt={props:{user:{type:Object,required:!0},settings:{type:Object,default:()=>({})},groups:{type:Array,default:()=>[]},subAdminsGroups:{type:Array,default:()=>[]},quotaOptions:{type:Array,default:()=>[]},languages:{type:Array,required:!0},externalActions:{type:Array,default:()=>[]}},computed:{showConfig(){return this.$store.getters.getShowConfig},userGroups(){return this.groups.filter((t=>this.user.groups.includes(t.id)))},userSubAdminsGroups(){return this.subAdminsGroups.filter((t=>this.user.subadmin.includes(t.id)))},availableGroups(){return this.groups.map((t=>{const e=Object.assign({},t);return e.$isDisabled=!1===t.canAdd&&!this.user.groups.includes(t.id)||!1===t.canRemove&&this.user.groups.includes(t.id),e}))},usedSpace(){return this.user.quota.used?t("settings","{size} used",{size:OC.Util.humanFileSize(this.user.quota.used)}):t("settings","{size} used",{size:OC.Util.humanFileSize(0)})},usedQuota(){let t=this.user.quota.quota;return t=t>0?Math.min(100,Math.round(this.user.quota.used/t*100)):95*(1-1/(this.user.quota.used/(10*Math.pow(2,30))+1)),isNaN(t)?0:t},userQuota(){if(this.user.quota.quota>=0){const t=OC.Util.humanFileSize(this.user.quota.quota);return this.quotaOptions.find((e=>e.id===t))||{id:t,label:t}}return"default"===this.user.quota.quota?this.quotaOptions[0]:this.quotaOptions[1]},minPasswordLength(){return this.$store.getters.getPasswordPolicyMinLength},userLanguage(){const t=this.languages[0].languages.concat(this.languages[1].languages).find((t=>t.code===this.user.language));return"object"!=typeof t&&""!==this.user.language?{code:this.user.language,name:this.user.language}:""!==this.user.language&&t},userLastLoginTooltip(){return this.user.lastLogin>0?OC.Util.formatDate(this.user.lastLogin):""},userLastLogin(){return this.user.lastLogin>0?OC.Util.relativeModifiedDate(this.user.lastLogin):t("settings","Never")}}},Bt={id:"none",label:t("settings","Unlimited")},qt={id:"default",label:t("settings","Default quota")},Ot=t=>{const e=Object.keys(t);return 1===e.length&&"id"===e.at(0)};var Dt=a(96763);const Mt={name:"UserRow",components:{NcAvatar:kt.A,NcLoadingIcon:f.A,NcProgressBar:Ut.A,NcSelect:dt.A,NcTextField:ct.A,UserRowActions:Gt},mixins:[Nt],props:{user:{type:Object,required:!0},visible:{type:Boolean,required:!0},users:{type:Array,required:!0},hasObfuscated:{type:Boolean,required:!0},groups:{type:Array,default:()=>[]},subAdminsGroups:{type:Array,required:!0},quotaOptions:{type:Array,required:!0},languages:{type:Array,required:!0},settings:{type:Object,required:!0},externalActions:{type:Array,default:()=>[]}},data(){var t;return{selectedQuota:!1,rand:Math.random().toString(36).substring(2),loadingPossibleManagers:!1,possibleManagers:[],currentManager:"",editing:!1,loading:{all:!1,displayName:!1,password:!1,mailAddress:!1,groups:!1,subadmins:!1,quota:!1,delete:!1,disable:!1,languages:!1,wipe:!1,manager:!1},editedDisplayName:this.user.displayname,editedPassword:"",editedMail:null!==(t=this.user.email)&&void 0!==t?t:""}},computed:{managerLabel:()=>t("settings","Set line manager"),isObfuscated(){return Ot(this.user)},showConfig(){return this.$store.getters.getShowConfig},isLoadingUser(){return this.loading.delete||this.loading.disable||this.loading.wipe},isLoadingField(){return this.loading.delete||this.loading.disable||this.loading.all},uniqueId(){return encodeURIComponent(this.user.id+this.rand)},userGroupsLabels(){return this.userGroups.map((t=>t.name)).join(", ")},userSubAdminsGroupsLabels(){return this.userSubAdminsGroups.map((t=>t.name)).join(", ")},usedSpace(){var e,s;return null!==(e=this.user.quota)&&void 0!==e&&e.used?t("settings","{size} used",{size:(0,yt.v7)(null===(s=this.user.quota)||void 0===s?void 0:s.used)}):t("settings","{size} used",{size:(0,yt.v7)(0)})},canEdit(){return(0,xt.HW)().uid!==this.user.id||this.settings.isAdmin},userQuota(){var e;let s=null===(e=this.user.quota)||void 0===e?void 0:e.quota;return"default"===s&&(s=this.settings.defaultQuota,"none"!==s&&(s=(0,yt.lT)(s,!0))),"none"===s||-3===s?t("settings","Unlimited"):s>=0?(0,yt.v7)(s):(0,yt.v7)(0)},userActions(){const e=[{icon:"icon-delete",text:t("settings","Delete account"),action:this.deleteUser},{icon:"icon-delete",text:t("settings","Wipe all devices"),action:this.wipeUserDevices},{icon:this.user.enabled?"icon-close":"icon-add",text:this.user.enabled?t("settings","Disable account"):t("settings","Enable account"),action:this.enableDisableUser}];return null!==this.user.email&&""!==this.user.email&&e.push({icon:"icon-mail",text:t("settings","Resend welcome email"),action:this.sendWelcomeMail}),e.concat(this.externalActions)},editedUserQuota:{get(){return!1!==this.selectedQuota?this.selectedQuota:this.settings.defaultQuota!==Bt.id&&(0,yt.lT)(this.settings.defaultQuota,!0)>=0?{id:this.settings.defaultQuota,label:this.settings.defaultQuota}:Bt},set(t){this.selectedQuota=t}},availableLanguages(){return this.languages[0].languages.concat(this.languages[1].languages)}},async beforeMount(){this.user.manager&&await this.initManager(this.user.manager)},methods:{wipeUserDevices(){const e=this.user.id;OC.dialogs.confirmDestructive(t("settings","In case of lost device or exiting the organization, this can remotely wipe the Nextcloud data from all devices associated with {userid}. Only works if the devices are connected to the internet.",{userid:e}),t("settings","Remote wipe of devices"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("settings","Wipe {userid}'s devices",{userid:e}),confirmClasses:"error",cancel:t("settings","Cancel")},(s=>{s&&(this.loading.wipe=!0,this.loading.all=!0,this.$store.dispatch("wipeUserDevices",e).then((()=>(0,d.Te)(t("settings","Wiped {userid}'s devices",{userid:e}))),{timeout:2e3}).finally((()=>{this.loading.wipe=!1,this.loading.all=!1})))}),!0)},filterManagers(t){return t.filter((t=>t.id!==this.user.id))},async initManager(t){await this.$store.dispatch("getUser",t).then((t=>{this.currentManager=null==t?void 0:t.data.ocs.data}))},async searchInitialUserManager(){this.loadingPossibleManagers=!0,await this.searchUserManager(),this.loadingPossibleManagers=!1},async searchUserManager(t){await this.$store.dispatch("searchUsers",{offset:0,limit:10,search:t}).then((t=>{const e=null!=t&&t.data?this.filterManagers(Object.values(null==t?void 0:t.data.ocs.data.users)):[];e.length>0&&(this.possibleManagers=e)}))},async updateUserManager(e){null===e&&(this.currentManager=""),this.loading.manager=!0;try{await this.$store.dispatch("setUserData",{userid:this.user.id,key:"manager",value:this.currentManager?this.currentManager.id:""})}catch(e){(0,d.Qg)(t("setting","Failed to update line manager")),Dt.error(e)}finally{this.loading.manager=!1}},deleteUser(){const e=this.user.id;OC.dialogs.confirmDestructive(t("settings","Fully delete {userid}'s account including all their personal files, app data, etc.",{userid:e}),t("settings","Account deletion"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("settings","Delete {userid}'s account",{userid:e}),confirmClasses:"error",cancel:t("settings","Cancel")},(t=>{if(t)return this.loading.delete=!0,this.loading.all=!0,this.$store.dispatch("deleteUser",e).then((()=>{this.loading.delete=!1,this.loading.all=!1}))}),!0)},enableDisableUser(){this.loading.delete=!0,this.loading.all=!0;const t=this.user.id,e=!this.user.enabled;return this.$store.dispatch("enableDisableUser",{userid:t,enabled:e}).then((()=>{this.loading.delete=!1,this.loading.all=!1}))},updateDisplayName(){this.loading.displayName=!0,this.$store.dispatch("setUserData",{userid:this.user.id,key:"displayname",value:this.editedDisplayName}).then((()=>{this.loading.displayName=!1,this.editedDisplayName===this.user.displayname&&(0,d.Te)(t("setting","Display name was successfully changed"))}))},updatePassword(){this.loading.password=!0,0===this.editedPassword.length?((0,d.Qg)(t("setting","Password can't be empty")),this.loading.password=!1):this.$store.dispatch("setUserData",{userid:this.user.id,key:"password",value:this.editedPassword}).then((()=>{this.loading.password=!1,this.editedPassword="",(0,d.Te)(t("setting","Password was successfully changed"))}))},updateEmail(){this.loading.mailAddress=!0,""===this.editedMail?((0,d.Qg)(t("setting","Email can't be empty")),this.loading.mailAddress=!1,this.editedMail=this.user.email):this.$store.dispatch("setUserData",{userid:this.user.id,key:"email",value:this.editedMail}).then((()=>{this.loading.mailAddress=!1,this.editedMail===this.user.email&&(0,d.Te)(t("setting","Email was successfully changed"))}))},async createGroup(t){let{name:e}=t;this.loading={groups:!0,subadmins:!0};try{await this.$store.dispatch("addGroup",e);const t=this.user.id;await this.$store.dispatch("addUserGroup",{userid:t,gid:e})}catch(t){Dt.error(t)}finally{this.loading={groups:!1,subadmins:!1}}return this.$store.getters.getGroups[this.groups.length]},async addUserGroup(t){if(t.isCreating)return;this.loading.groups=!0;const e=this.user.id,s=t.id;if(!1===t.canAdd)return!1;try{await this.$store.dispatch("addUserGroup",{userid:e,gid:s})}catch(t){Dt.error(t)}finally{this.loading.groups=!1}},async removeUserGroup(t){if(!1===t.canRemove)return!1;this.loading.groups=!0;const e=this.user.id,s=t.id;try{await this.$store.dispatch("removeUserGroup",{userid:e,gid:s}),this.loading.groups=!1,this.$route.params.selectedGroup===s&&this.$store.commit("deleteUser",e)}catch{this.loading.groups=!1}},async addUserSubAdmin(t){this.loading.subadmins=!0;const e=this.user.id,s=t.id;try{await this.$store.dispatch("addUserSubAdmin",{userid:e,gid:s}),this.loading.subadmins=!1}catch(t){Dt.error(t)}},async removeUserSubAdmin(t){this.loading.subadmins=!0;const e=this.user.id,s=t.id;try{await this.$store.dispatch("removeUserSubAdmin",{userid:e,gid:s})}catch(t){Dt.error(t)}finally{this.loading.subadmins=!1}},async setUserQuota(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";"none"===t&&(t=Bt),this.loading.quota=!0,t=t.id?t.id:t;try{const e=((0,yt.lT)(t,!0)||t).toString();await this.$store.dispatch("setUserData",{userid:this.user.id,key:"quota",value:e})}catch(t){Dt.error(t)}finally{this.loading.quota=!1}return t},validateQuota(t){var e;return"object"==typeof t&&(t=(null===(e=t)||void 0===e?void 0:e.id)||t.label),null===(0,yt.lT)(t,!0)?Bt:{id:t=(0,yt.v7)((0,yt.lT)(t,!0)),label:t}},async setUserLanguage(t){this.loading.languages=!0;try{await this.$store.dispatch("setUserData",{userid:this.user.id,key:"language",value:t.code}),this.loading.languages=!1}catch(t){Dt.error(t)}return t},sendWelcomeMail(){this.loading.all=!0,this.$store.dispatch("sendWelcomeMail",this.user.id).then((()=>(0,d.Te)(t("setting","Welcome mail sent!"),{timeout:2e3}))).finally((()=>{this.loading.all=!1}))},async toggleEdit(){var t;if(this.editing=!this.editing,this.editing&&(await this.$nextTick(),null===(t=this.$refs.displayNameField)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.inputField)||void 0===t||null===(t=t.$refs)||void 0===t||null===(t=t.input)||void 0===t||t.focus()),this.editedDisplayName!==this.user.displayname)this.editedDisplayName=this.user.displayname;else if(this.editedMail!==this.user.email){var e;this.editedMail=null!==(e=this.user.email)&&void 0!==e?e:""}}}};var It=a(76101),$t={};$t.styleTagTransform=W(),$t.setAttributes=Q(),$t.insert=E().bind(null,"head"),$t.domAPI=F(),$t.insertStyleElement=H(),z()(It.A,$t),It.A&&It.A.locals&&It.A.locals;var zt=(0,y.A)(Mt,(function(){var t,e,s,a,i=this,n=i._self._c;return n("tr",{staticClass:"user-list__row",attrs:{"data-cy-user-row":i.user.id}},[n("td",{staticClass:"row__cell row__cell--avatar",attrs:{"data-cy-user-list-cell-avatar":""}},[i.isLoadingUser?n("NcLoadingIcon",{attrs:{name:i.t("settings","Loading account …"),size:32}}):i.visible?n("NcAvatar",{attrs:{"disable-menu":"","show-user-status":!1,user:i.user.id}}):i._e()],1),i._v(" "),n("td",{staticClass:"row__cell row__cell--displayname",attrs:{"data-cy-user-list-cell-displayname":""}},[i.editing&&i.user.backendCapabilities.setDisplayName?[n("NcTextField",{ref:"displayNameField",staticClass:"user-row-text-field",class:{"icon-loading-small":i.loading.displayName},attrs:{"data-cy-user-list-input-displayname":"","data-loading":i.loading.displayName||void 0,"trailing-button-label":i.t("settings","Submit"),"show-trailing-button":!0,disabled:i.loading.displayName||i.isLoadingField,label:i.t("settings","Change display name"),"trailing-button-icon":"arrowRight",value:i.editedDisplayName,autocapitalize:"off",autocomplete:"off",spellcheck:"false"},on:{"update:value":function(t){i.editedDisplayName=t},"trailing-button-click":i.updateDisplayName}})]:[i.isObfuscated?i._e():n("strong",{attrs:{title:(null===(t=i.user.displayname)||void 0===t?void 0:t.length)>20?i.user.displayname:null}},[i._v("\n\t\t\t\t"+i._s(i.user.displayname)+"\n\t\t\t")]),i._v(" "),n("span",{staticClass:"row__subtitle"},[i._v(i._s(i.user.id))])]],2),i._v(" "),n("td",{staticClass:"row__cell",class:{"row__cell--obfuscated":i.hasObfuscated},attrs:{"data-cy-user-list-cell-password":""}},[i.editing&&i.settings.canChangePassword&&i.user.backendCapabilities.setPassword?[n("NcTextField",{staticClass:"user-row-text-field",class:{"icon-loading-small":i.loading.password},attrs:{"data-cy-user-list-input-password":"","data-loading":i.loading.password||void 0,"trailing-button-label":i.t("settings","Submit"),"show-trailing-button":!0,disabled:i.loading.password||i.isLoadingField,minlength:i.minPasswordLength,maxlength:"469",label:i.t("settings","Set new password"),"trailing-button-icon":"arrowRight",value:i.editedPassword,autocapitalize:"off",autocomplete:"new-password",required:"",spellcheck:"false",type:"password"},on:{"update:value":function(t){i.editedPassword=t},"trailing-button-click":i.updatePassword}})]:i.isObfuscated?n("span",[i._v("\n\t\t\t"+i._s(i.t("settings","You do not have permissions to see the details of this account"))+"\n\t\t")]):i._e()],2),i._v(" "),n("td",{staticClass:"row__cell",attrs:{"data-cy-user-list-cell-email":""}},[i.editing?[n("NcTextField",{staticClass:"user-row-text-field",class:{"icon-loading-small":i.loading.mailAddress},attrs:{"data-cy-user-list-input-email":"","data-loading":i.loading.mailAddress||void 0,"show-trailing-button":!0,"trailing-button-label":i.t("settings","Submit"),label:i.t("settings","Set new email address"),disabled:i.loading.mailAddress||i.isLoadingField,"trailing-button-icon":"arrowRight",value:i.editedMail,autocapitalize:"off",autocomplete:"email",spellcheck:"false",type:"email"},on:{"update:value":function(t){i.editedMail=t},"trailing-button-click":i.updateEmail}})]:i.isObfuscated?i._e():n("span",{attrs:{title:(null===(e=i.user.email)||void 0===e?void 0:e.length)>20?i.user.email:null}},[i._v("\n\t\t\t"+i._s(i.user.email)+"\n\t\t")])],2),i._v(" "),n("td",{staticClass:"row__cell row__cell--large row__cell--multiline",attrs:{"data-cy-user-list-cell-groups":""}},[i.editing?[n("label",{staticClass:"hidden-visually",attrs:{for:"groups"+i.uniqueId}},[i._v("\n\t\t\t\t"+i._s(i.t("settings","Add user to group"))+"\n\t\t\t")]),i._v(" "),n("NcSelect",{attrs:{"data-cy-user-list-input-groups":"","data-loading":i.loading.groups||void 0,"input-id":"groups"+i.uniqueId,"close-on-select":!1,disabled:i.isLoadingField,loading:i.loading.groups,multiple:!0,"append-to-body":!1,options:i.availableGroups,placeholder:i.t("settings","Add account to group"),taggable:i.settings.isAdmin,value:i.userGroups,label:"name","no-wrap":!0,"create-option":t=>({name:t,isCreating:!0})},on:{"option:created":i.createGroup,"option:selected":t=>i.addUserGroup(t.at(-1)),"option:deselected":i.removeUserGroup}})]:i.isObfuscated?i._e():n("span",{attrs:{title:(null===(s=i.userGroupsLabels)||void 0===s?void 0:s.length)>40?i.userGroupsLabels:null}},[i._v("\n\t\t\t"+i._s(i.userGroupsLabels)+"\n\t\t")])],2),i._v(" "),i.subAdminsGroups.length>0&&i.settings.isAdmin?n("td",{staticClass:"row__cell row__cell--large row__cell--multiline",attrs:{"data-cy-user-list-cell-subadmins":""}},[i.editing&&i.settings.isAdmin&&i.subAdminsGroups.length>0?[n("label",{staticClass:"hidden-visually",attrs:{for:"subadmins"+i.uniqueId}},[i._v("\n\t\t\t\t"+i._s(i.t("settings","Set account as admin for"))+"\n\t\t\t")]),i._v(" "),n("NcSelect",{attrs:{"data-cy-user-list-input-subadmins":"","data-loading":i.loading.subadmins||void 0,"input-id":"subadmins"+i.uniqueId,"close-on-select":!1,disabled:i.isLoadingField,loading:i.loading.subadmins,label:"name","append-to-body":!1,multiple:!0,"no-wrap":!0,options:i.subAdminsGroups,placeholder:i.t("settings","Set account as admin for"),value:i.userSubAdminsGroups},on:{"option:deselected":i.removeUserSubAdmin,"option:selected":t=>i.addUserSubAdmin(t.at(-1))}})]:i.isObfuscated?i._e():n("span",{attrs:{title:(null===(a=i.userSubAdminsGroupsLabels)||void 0===a?void 0:a.length)>40?i.userSubAdminsGroupsLabels:null}},[i._v("\n\t\t\t"+i._s(i.userSubAdminsGroupsLabels)+"\n\t\t")])],2):i._e(),i._v(" "),n("td",{staticClass:"row__cell",attrs:{"data-cy-user-list-cell-quota":""}},[i.editing?[n("label",{staticClass:"hidden-visually",attrs:{for:"quota"+i.uniqueId}},[i._v("\n\t\t\t\t"+i._s(i.t("settings","Select account quota"))+"\n\t\t\t")]),i._v(" "),n("NcSelect",{attrs:{"close-on-select":!0,"create-option":i.validateQuota,"data-cy-user-list-input-quota":"","data-loading":i.loading.quota||void 0,disabled:i.isLoadingField,loading:i.loading.quota,"append-to-body":!1,clearable:!1,"input-id":"quota"+i.uniqueId,options:i.quotaOptions,placeholder:i.t("settings","Select account quota"),taggable:!0},on:{"option:selected":i.setUserQuota},model:{value:i.editedUserQuota,callback:function(t){i.editedUserQuota=t},expression:"editedUserQuota"}})]:i.isObfuscated?i._e():[n("span",{attrs:{id:"quota-progress"+i.uniqueId}},[i._v(i._s(i.userQuota)+" ("+i._s(i.usedSpace)+")")]),i._v(" "),n("NcProgressBar",{staticClass:"row__progress",class:{"row__progress--warn":i.usedQuota>80},attrs:{"aria-labelledby":"quota-progress"+i.uniqueId,value:i.usedQuota}})]],2),i._v(" "),i.showConfig.showLanguages?n("td",{staticClass:"row__cell row__cell--large",attrs:{"data-cy-user-list-cell-language":""}},[i.editing?[n("label",{staticClass:"hidden-visually",attrs:{for:"language"+i.uniqueId}},[i._v("\n\t\t\t\t"+i._s(i.t("settings","Set the language"))+"\n\t\t\t")]),i._v(" "),n("NcSelect",{attrs:{id:"language"+i.uniqueId,"data-cy-user-list-input-language":"","data-loading":i.loading.languages||void 0,"allow-empty":!1,disabled:i.isLoadingField,loading:i.loading.languages,clearable:!1,"append-to-body":!1,options:i.availableLanguages,placeholder:i.t("settings","No language set"),value:i.userLanguage,label:"name"},on:{input:i.setUserLanguage}})]:i.isObfuscated?i._e():n("span",[i._v("\n\t\t\t"+i._s(i.userLanguage.name)+"\n\t\t")])],2):i._e(),i._v(" "),i.showConfig.showUserBackend||i.showConfig.showStoragePath?n("td",{staticClass:"row__cell row__cell--large",attrs:{"data-cy-user-list-cell-storage-location":""}},[i.isObfuscated?i._e():[i.showConfig.showUserBackend?n("span",[i._v(i._s(i.user.backend))]):i._e(),i._v(" "),i.showConfig.showStoragePath?n("span",{staticClass:"row__subtitle",attrs:{title:i.user.storageLocation}},[i._v("\n\t\t\t\t"+i._s(i.user.storageLocation)+"\n\t\t\t")]):i._e()]],2):i._e(),i._v(" "),i.showConfig.showLastLogin?n("td",{staticClass:"row__cell",attrs:{title:i.userLastLoginTooltip,"data-cy-user-list-cell-last-login":""}},[i.isObfuscated?i._e():n("span",[i._v(i._s(i.userLastLogin))])]):i._e(),i._v(" "),n("td",{staticClass:"row__cell row__cell--large row__cell--fill",attrs:{"data-cy-user-list-cell-manager":""}},[i.editing?[n("label",{staticClass:"hidden-visually",attrs:{for:"manager"+i.uniqueId}},[i._v("\n\t\t\t\t"+i._s(i.managerLabel)+"\n\t\t\t")]),i._v(" "),n("NcSelect",{staticClass:"select--fill",attrs:{"data-cy-user-list-input-manager":"","data-loading":i.loading.manager||void 0,"input-id":"manager"+i.uniqueId,"close-on-select":!0,disabled:i.isLoadingField,"append-to-body":!1,loading:i.loadingPossibleManagers||i.loading.manager,label:"displayname",options:i.possibleManagers,placeholder:i.managerLabel},on:{open:i.searchInitialUserManager,search:i.searchUserManager,"option:selected":i.updateUserManager},model:{value:i.currentManager,callback:function(t){i.currentManager=t},expression:"currentManager"}})]:i.isObfuscated?i._e():n("span",[i._v("\n\t\t\t"+i._s(i.user.manager)+"\n\t\t")])],2),i._v(" "),n("td",{staticClass:"row__cell row__cell--actions",attrs:{"data-cy-user-list-cell-actions":""}},[i.visible&&!i.isObfuscated&&i.canEdit&&!i.loading.all?n("UserRowActions",{attrs:{actions:i.userActions,disabled:i.isLoadingField,edit:i.editing,user:i.user},on:{"update:edit":i.toggleEdit}}):i._e()],1)])}),[],!1,null,"6df56da4",null);const Pt=zt.exports,Ft={id:"",displayName:"",password:"",mailAddress:"",groups:[],manager:"",subAdminsGroups:[],quota:qt,language:{code:"en",name:t("settings","Default language")}},Tt={name:"UserList",components:{Fragment:o.F,NcEmptyContent:Z.A,NcIconSvgWrapper:X.A,NcLoadingIcon:f.A,NewUserModal:pt,UserListFooter:Ct,UserListHeader:bt,VirtualList:ot},props:{selectedGroup:{type:String,default:null},externalActions:{type:Array,default:()=>[]}},data:()=>({UserRow:Pt,loading:{all:!1,groups:!1,users:!1},isInitialLoad:!0,rowHeight:55,usersSvg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><path d="M10 1C8.25 1 7 2.43 7 3.8c0 1.4.1 2.4.8 3.5.2.29.5.35.7.6.135.5.24 1 .1 1.5-.28.1-.525.22-.8.33-.085-.15-.23-.2-.47-.4C6.6 8.89 5.77 8.58 5 8.29c-.1-.37-.1-.65 0-1 .156-.166.37-.27.5-.43.46-.6.5-1.654.5-2.37 0-1.06-.954-1.9-2-1.9-1.17 0-2 1-2 1.9 0 .93.034 1.64.5 2.37.13.2.367.26.5.43.1.33.1.654 0 1-.85.3-1.6.64-2.34 1.04-.57.4-.52.205-.66 1.53-.11 1.06 2.335 1.13 4 1.13h.17c-.054.274-.1.63-.17 1.3-.16 1.59 3.5 1.7 6 1.7s6.16-.1 6-1.7c-.215-2-.23-1.71-1-2.3-1.1-.654-2.45-1.17-3.6-1.6-.15-.56-.04-.97.1-1.5.235-.25.5-.36.7-.6.7-.885.8-2.425.8-3.5 0-1.6-1.43-2.8-3-2.8z"/></svg>',searchQuery:"",newUser:Object.assign({},Ft)}),computed:{showConfig(){return this.$store.getters.getShowConfig},settings(){return this.$store.getters.getServerData},style(){return{"--row-height":"".concat(this.rowHeight,"px")}},hasObfuscated(){return this.filteredUsers.some((t=>Ot(t)))},users(){return this.$store.getters.getUsers},filteredUsers(){return"disabled"===this.selectedGroup?this.users.filter((t=>!1===t.enabled)):(this.settings.isAdmin,this.users.filter((t=>!1!==t.enabled)))},groups(){return this.$store.getters.getGroups.filter((t=>"disabled"!==t.id)).sort(((t,e)=>t.name.localeCompare(e.name)))},subAdminsGroups(){return this.$store.getters.getSubadminGroups},quotaOptions(){const t=this.settings.quotaPreset.reduce(((t,e)=>t.concat({id:e,label:e})),[]);return this.settings.allowUnlimitedQuota&&t.unshift(Bt),t.unshift(qt),t},usersOffset(){return this.$store.getters.getUsersOffset},usersLimit(){return this.$store.getters.getUsersLimit},disabledUsersOffset(){return this.$store.getters.getDisabledUsersOffset},disabledUsersLimit(){return this.$store.getters.getDisabledUsersLimit},usersCount(){return this.users.length},languages(){return[{label:t("settings","Common languages"),languages:this.settings.languages.commonLanguages},{label:t("settings","Other languages"),languages:this.settings.languages.otherLanguages}]}},watch:{async selectedGroup(t,e){this.isInitialLoad=!0,await this.redirectIfDisabled(),this.$store.commit("resetUsers"),await this.loadUsers(),this.setNewUserDefaultGroup(t)},filteredUsers(t){at.A.debug("".concat(t.length," filtered user(s)"))}},async created(){await this.loadUsers()},async mounted(){this.settings.canChangePassword||OC.Notification.showTemporary(t("settings","Password change is disabled because the master key is disabled")),this.resetForm(),(0,tt.B1)("nextcloud:unified-search.search",this.search),(0,tt.B1)("nextcloud:unified-search.reset",this.resetSearch),await this.redirectIfDisabled()},beforeDestroy(){(0,tt.al)("nextcloud:unified-search.search",this.search),(0,tt.al)("nextcloud:unified-search.reset",this.resetSearch)},methods:{async handleScrollEnd(){await this.loadUsers()},async loadUsers(){this.loading.users=!0;try{"disabled"===this.selectedGroup?await this.$store.dispatch("getDisabledUsers",{offset:this.disabledUsersOffset,limit:this.disabledUsersLimit}):await this.$store.dispatch("getUsers",{offset:this.usersOffset,limit:this.usersLimit,group:this.selectedGroup,search:this.searchQuery}),at.A.debug("".concat(this.users.length," total user(s) loaded"))}catch(t){at.A.error("Failed to load accounts",{error:t}),(0,d.Qg)("Failed to load accounts")}this.loading.users=!1,this.isInitialLoad=!1},closeModal(){this.$store.commit("setShowConfig",{key:"showNewUserForm",value:!1})},async search(t){let{query:e}=t;this.searchQuery=e,this.$store.commit("resetUsers"),await this.loadUsers()},resetSearch(){this.search({query:""})},resetForm(){this.newUser=Object.assign({},Ft),this.settings.defaultLanguage&&i.Ay.set(this.newUser.language,"code",this.settings.defaultLanguage),this.setNewUserDefaultGroup(this.selectedGroup),this.loading.all=!1},setNewUserDefaultGroup(t){if(t&&t.length>0){const e=this.groups.find((e=>e.id===t));if(e)return void(this.newUser.groups=[e])}this.newUser.groups=[]},async redirectIfDisabled(){const t=this.$store.getters.getGroups;"disabled"===this.selectedGroup&&t.findIndex((t=>"disabled"===t.id&&0===t.usercount))>-1&&(this.$router.push({name:"users"}),await this.loadUsers())}}};var Et=a(91364),Rt={};Rt.styleTagTransform=W(),Rt.setAttributes=Q(),Rt.insert=E().bind(null,"head"),Rt.domAPI=F(),Rt.insertStyleElement=H(),z()(Et.A,Rt),Et.A&&Et.A.locals&&Et.A.locals;const Qt=(0,y.A)(Tt,(function(){var t=this,e=t._self._c;return e("Fragment",[t.showConfig.showNewUserForm?e("NewUserModal",{attrs:{loading:t.loading,"new-user":t.newUser,"quota-options":t.quotaOptions},on:{reset:t.resetForm,close:t.closeModal}}):t._e(),t._v(" "),0===t.filteredUsers.length?e("NcEmptyContent",{staticClass:"empty",attrs:{name:t.isInitialLoad&&t.loading.users?null:t.t("settings","No accounts")},scopedSlots:t._u([{key:"icon",fn:function(){return[t.isInitialLoad&&t.loading.users?e("NcLoadingIcon",{attrs:{name:t.t("settings","Loading accounts …"),size:64}}):e("NcIconSvgWrapper",{attrs:{svg:t.usersSvg}})]},proxy:!0}],null,!1,1536527359)}):e("VirtualList",{style:t.style,attrs:{"data-component":t.UserRow,"data-sources":t.filteredUsers,"data-key":"id","data-cy-user-list":"","item-height":t.rowHeight,"extra-props":{users:t.users,settings:t.settings,hasObfuscated:t.hasObfuscated,groups:t.groups,subAdminsGroups:t.subAdminsGroups,quotaOptions:t.quotaOptions,languages:t.languages,externalActions:t.externalActions}},on:{"scroll-end":t.handleScrollEnd},scopedSlots:t._u([{key:"before",fn:function(){return[e("caption",{staticClass:"hidden-visually"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","List of accounts. This list is not fully rendered for performance reasons. The accounts will be rendered as you navigate through the list."))+"\n\t\t\t")])]},proxy:!0},{key:"header",fn:function(){return[e("UserListHeader",{attrs:{"has-obfuscated":t.hasObfuscated}})]},proxy:!0},{key:"footer",fn:function(){return[e("UserListFooter",{attrs:{loading:t.loading.users,"filtered-users":t.filteredUsers}})]},proxy:!0}])})],1)}),[],!1,null,"1778b0bc",null).exports;var jt=a(26287),Ht=a(99498),Yt=a(15869),Wt=a(947),Vt=a(32073),Kt=a(96763);const Jt={name:"UserSettingsDialog",components:{NcAppSettingsDialog:Yt.N,NcAppSettingsSection:Wt.A,NcCheckboxRadioSwitch:Vt.A,NcSelect:dt.A},props:{open:{type:Boolean,required:!0}},data:()=>({selectedQuota:!1,loadingSendMail:!1}),computed:{isModalOpen:{get(){return this.open},set(t){this.$emit("update:open",t)}},showConfig(){return this.$store.getters.getShowConfig},settings(){return this.$store.getters.getServerData},showLanguages:{get(){return this.getLocalstorage("showLanguages")},set(t){this.setLocalStorage("showLanguages",t)}},showLastLogin:{get(){return this.getLocalstorage("showLastLogin")},set(t){this.setLocalStorage("showLastLogin",t)}},showUserBackend:{get(){return this.getLocalstorage("showUserBackend")},set(t){this.setLocalStorage("showUserBackend",t)}},showStoragePath:{get(){return this.getLocalstorage("showStoragePath")},set(t){this.setLocalStorage("showStoragePath",t)}},quotaOptions(){const t=this.settings.quotaPreset.reduce(((t,e)=>t.concat({id:e,label:e})),[]);return this.settings.allowUnlimitedQuota&&t.unshift(Bt),t},defaultQuota:{get(){return!1!==this.selectedQuota?this.selectedQuota:this.settings.defaultQuota!==Bt.id&&OC.Util.computerFileSize(this.settings.defaultQuota)>=0?{id:this.settings.defaultQuota,label:this.settings.defaultQuota}:Bt},set(t){this.selectedQuota=t}},sendWelcomeMail:{get(){return this.settings.newUserSendEmail},async set(t){try{this.loadingSendMail=!0,this.$store.commit("setServerData",{...this.settings,newUserSendEmail:t}),await jt.A.post((0,Ht.Jv)("/settings/users/preferences/newUser.sendEmail"),{value:t?"yes":"no"})}catch(t){Kt.error("could not update newUser.sendEmail preference: "+t.message,t)}finally{this.loadingSendMail=!1}}}},methods:{getLocalstorage(t){const e=this.$localStorage.get(t);return this.$store.commit("setShowConfig",{key:t,value:null!==e?"true"===e:this.showConfig[t]}),this.showConfig[t]},setLocalStorage(t,e){return this.$store.commit("setShowConfig",{key:t,value:e}),this.$localStorage.set(t,e),e},validateQuota(t){var e;return"object"==typeof t&&(t=(null===(e=t)||void 0===e?void 0:e.id)||t.label),null===OC.Util.computerFileSize(t)?Bt:{id:t=OC.Util.humanFileSize(OC.Util.computerFileSize(t)),label:t}},setDefaultQuota(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";"none"===t&&(t=Bt),this.$store.dispatch("setAppConfig",{app:"files",key:"default_quota",value:t.id?t.id:t}).then((()=>{"object"!=typeof t&&(t={id:t,label:t}),this.defaultQuota=t}))}}};var Zt=a(92004),Xt={};Xt.styleTagTransform=W(),Xt.setAttributes=Q(),Xt.insert=E().bind(null,"head"),Xt.domAPI=F(),Xt.insertStyleElement=H(),z()(Zt.A,Xt),Zt.A&&Zt.A.locals&&Zt.A.locals;const te=(0,y.A)(Jt,(function(){var t=this,e=t._self._c;return e("NcAppSettingsDialog",{attrs:{open:t.isModalOpen,"show-navigation":!0,name:t.t("settings","Account management settings")},on:{"update:open":function(e){t.isModalOpen=e}}},[e("NcAppSettingsSection",{attrs:{id:"visibility-settings",name:t.t("settings","Visibility")}},[e("NcCheckboxRadioSwitch",{attrs:{type:"switch","data-test":"showLanguages",checked:t.showLanguages},on:{"update:checked":function(e){t.showLanguages=e}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Show language"))+"\n\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{type:"switch","data-test":"showUserBackend",checked:t.showUserBackend},on:{"update:checked":function(e){t.showUserBackend=e}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Show account backend"))+"\n\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{type:"switch","data-test":"showStoragePath",checked:t.showStoragePath},on:{"update:checked":function(e){t.showStoragePath=e}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Show storage path"))+"\n\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{type:"switch","data-test":"showLastLogin",checked:t.showLastLogin},on:{"update:checked":function(e){t.showLastLogin=e}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Show last login"))+"\n\t\t")])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"email-settings",name:t.t("settings","Send email")}},[e("NcCheckboxRadioSwitch",{attrs:{type:"switch","data-test":"sendWelcomeMail",checked:t.sendWelcomeMail,disabled:t.loadingSendMail},on:{"update:checked":function(e){t.sendWelcomeMail=e}}},[t._v("\n\t\t\t"+t._s(t.t("settings","Send welcome email to new accounts"))+"\n\t\t")])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"default-settings",name:t.t("settings","Defaults")}},[e("label",{attrs:{for:"default-quota-select"}},[t._v(t._s(t.t("settings","Default quota")))]),t._v(" "),e("NcSelect",{attrs:{"input-id":"default-quota-select",placement:"top",taggable:!0,options:t.quotaOptions,"create-option":t.validateQuota,placeholder:t.t("settings","Select default quota"),clearable:!1},on:{"option:selected":t.setDefaultQuota},model:{value:t.defaultQuota,callback:function(e){t.defaultQuota=e},expression:"defaultQuota"}})],1)],1)}),[],!1,null,"b2364f72",null).exports;i.Ay.use(r());const ee={name:"Users",components:{AccountGroup:_.A,AccountOff:x,Cog:U,Fragment:o.F,GroupListItem:J,NcActionInput:c.A,NcActionText:u.A,NcAppContent:A.A,NcAppNavigation:g.A,NcAppNavigationCaption:p.N,NcAppNavigationItem:h.A,NcAppNavigationList:m.A,NcAppNavigationNew:v.A,NcContent:C.A,NcCounterBubble:w.A,NcLoadingIcon:f.A,Plus:S.A,ShieldAccount:G,UserList:Qt,UserSettingsDialog:te},props:{selectedGroup:{type:String,default:null}},data:()=>({externalActions:[],newGroupName:"",isAddGroupOpen:!1,loadingAddGroup:!1,hasAddGroupError:!1,isDialogOpen:!1}),computed:{pageHeading(){var t;return null===this.selectedGroupDecoded?(0,l.Tl)("settings","Active accounts"):null!==(t={admin:(0,l.Tl)("settings","Admins"),disabled:(0,l.Tl)("settings","Disabled accounts")}[this.selectedGroupDecoded])&&void 0!==t?t:(0,l.Tl)("settings","Account group: {group}",{group:this.selectedGroupDecoded})},showConfig(){return this.$store.getters.getShowConfig},selectedGroupDecoded(){return this.selectedGroup?decodeURIComponent(this.selectedGroup):null},users(){return this.$store.getters.getUsers},groups(){return this.$store.getters.getGroups},usersOffset(){return this.$store.getters.getUsersOffset},usersLimit(){return this.$store.getters.getUsersLimit},userCount(){return this.$store.getters.getUserCount},settings(){return this.$store.getters.getServerData},groupList(){return(Array.isArray(this.groups)?this.groups:[]).filter((t=>"disabled"!==t.id&&"admin"!==t.id)).map((t=>this.formatGroupMenu(t)))},adminGroupMenu(){return this.formatGroupMenu(this.groups.find((t=>"admin"===t.id)))},disabledGroupMenu(){return this.formatGroupMenu(this.groups.find((t=>"disabled"===t.id)))}},beforeMount(){this.$store.commit("initGroups",{groups:this.$store.getters.getServerData.groups,orderBy:this.$store.getters.getServerData.sortGroups,userCount:this.$store.getters.getServerData.userCount}),this.$store.dispatch("getPasswordPolicyMinLength")},created(){Object.assign(OCA,{Settings:{UserList:{registerAction:this.registerAction}}})},methods:{t:l.Tl,showNewUserMenu(){this.$store.commit("setShowConfig",{key:"showNewUserForm",value:!0})},registerAction(t,e,s){return this.externalActions.push({icon:t,text:e,action:s}),this.externalActions},async createGroup(){this.hasAddGroupError=!1;const t=this.newGroupName.trim();if(""!==t){this.isAddGroupOpen=!1,this.loadingAddGroup=!0;try{await this.$store.dispatch("addGroup",t),await this.$router.push({name:"group",params:{selectedGroup:encodeURIComponent(t)}}),this.newGroupName=""}catch{(0,d.Qg)((0,l.Tl)("settings","Failed to create group"))}this.loadingAddGroup=!1}else this.hasAddGroupError=!0},formatGroupMenu(t){const e={};return void 0===t?{}:(e.id=t.id,e.title=t.name,e.usercount=t.usercount,t.usercount-t.disabled>0&&(e.count=t.usercount-t.disabled),e)}}};var se=a(65610),ae={};ae.styleTagTransform=W(),ae.setAttributes=Q(),ae.insert=E().bind(null,"head"),ae.domAPI=F(),ae.insertStyleElement=H(),z()(se.A,ae),se.A&&se.A.locals&&se.A.locals;const ie=(0,y.A)(ee,(function(){var t=this,e=t._self._c;return e("Fragment",[e("NcContent",{attrs:{"app-name":"settings"}},[e("NcAppNavigation",{attrs:{"aria-label":t.t("settings","Account management")},scopedSlots:t._u([{key:"footer",fn:function(){return[e("ul",{staticClass:"app-navigation-entry__settings"},[e("NcAppNavigationItem",{attrs:{name:t.t("settings","Account management settings")},on:{click:function(e){t.isDialogOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Cog",{attrs:{size:20}})]},proxy:!0}])})],1)]},proxy:!0}])},[e("NcAppNavigationNew",{attrs:{"button-id":"new-user-button",text:t.t("settings","New account")},on:{click:t.showNewUserMenu,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showNewUserMenu.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.showNewUserMenu.apply(null,arguments)}]},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:20}})]},proxy:!0}])}),t._v(" "),e("NcAppNavigationList",{attrs:{"data-cy-users-settings-navigation-groups":"system"}},[e("NcAppNavigationItem",{attrs:{id:"everyone",exact:!0,name:t.t("settings","Active accounts"),to:{name:"users"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AccountGroup",{attrs:{size:20}})]},proxy:!0},{key:"counter",fn:function(){return[t.userCount?e("NcCounterBubble",{attrs:{type:t.selectedGroupDecoded?void 0:"highlighted"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.userCount)+"\n\t\t\t\t\t\t")]):t._e()]},proxy:!0}])}),t._v(" "),t.settings.isAdmin?e("NcAppNavigationItem",{attrs:{id:"admin",exact:!0,name:t.t("settings","Admins"),to:{name:"group",params:{selectedGroup:"admin"}}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShieldAccount",{attrs:{size:20}})]},proxy:!0},t.adminGroupMenu.count>0?{key:"counter",fn:function(){return[e("NcCounterBubble",{attrs:{type:"admin"===t.selectedGroupDecoded?"highlighted":void 0}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.adminGroupMenu.count)+"\n\t\t\t\t\t\t")])]},proxy:!0}:null],null,!0)}):t._e(),t._v(" "),t.disabledGroupMenu.usercount>0||-1===t.disabledGroupMenu.usercount?e("NcAppNavigationItem",{attrs:{id:"disabled",exact:!0,name:t.t("settings","Disabled users"),to:{name:"group",params:{selectedGroup:"disabled"}}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AccountOff",{attrs:{size:20}})]},proxy:!0},t.disabledGroupMenu.usercount>0?{key:"counter",fn:function(){return[e("NcCounterBubble",{attrs:{type:"disabled"===t.selectedGroupDecoded?"highlighted":void 0}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.disabledGroupMenu.usercount)+"\n\t\t\t\t\t\t")])]},proxy:!0}:null],null,!0)}):t._e()],1),t._v(" "),e("NcAppNavigationCaption",{attrs:{name:t.t("settings","Groups"),disabled:t.loadingAddGroup,"aria-label":t.loadingAddGroup?t.t("settings","Creating group …"):t.t("settings","Create group"),"force-menu":"","is-heading":"",open:t.isAddGroupOpen},on:{"update:open":function(e){t.isAddGroupOpen=e}},scopedSlots:t._u([{key:"actionsTriggerIcon",fn:function(){return[t.loadingAddGroup?e("NcLoadingIcon"):e("Plus",{attrs:{size:20}})]},proxy:!0},{key:"actions",fn:function(){return[e("NcActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("AccountGroup",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("settings","Create group"))+"\n\t\t\t\t\t")]),t._v(" "),e("NcActionInput",{attrs:{label:t.t("settings","Group name"),"data-cy-users-settings-new-group-name":"","label-outside":!1,disabled:t.loadingAddGroup,value:t.newGroupName,error:t.hasAddGroupError,"helper-text":t.hasAddGroupError?t.t("settings","Please enter a valid group name"):""},on:{"update:value":function(e){t.newGroupName=e},submit:t.createGroup}})]},proxy:!0}])}),t._v(" "),e("NcAppNavigationList",{attrs:{"data-cy-users-settings-navigation-groups":"custom"}},t._l(t.groupList,(function(s){return e("GroupListItem",{key:s.id,attrs:{id:s.id,active:t.selectedGroupDecoded===s.id,name:s.title,count:s.count}})})),1)],1),t._v(" "),e("NcAppContent",{attrs:{"page-heading":t.pageHeading}},[e("UserList",{attrs:{"selected-group":t.selectedGroupDecoded,"external-actions":t.externalActions}})],1)],1),t._v(" "),e("UserSettingsDialog",{attrs:{open:t.isDialogOpen},on:{"update:open":function(e){t.isDialogOpen=e}}})],1)}),[],!1,null,"baf5301a",null).exports},35973:function(t,e,s){var a=s(65606),i=s(96763);t.exports=function(){"use strict";var t=function(){this._properties={},this._namespace="",this._isSupported=!0},e={namespace:{}};e.namespace.get=function(){return this._namespace},e.namespace.set=function(t){this._namespace=t?t+".":""},t.prototype._getLsKey=function(t){return""+this._namespace+t},t.prototype._lsSet=function(t,e,s){var a=this._getLsKey(t),i=s&&[Array,Object].includes(s)?JSON.stringify(e):e;window.localStorage.setItem(a,i)},t.prototype._lsGet=function(t){var e=this._getLsKey(t);return window.localStorage[e]},t.prototype.get=function(t,e,s){if(void 0===e&&(e=null),void 0===s&&(s=String),!this._isSupported)return null;if(this._lsGet(t)){var a=s;for(var i in this._properties)if(i===t){a=this._properties[i].type;break}return this._process(a,this._lsGet(t))}return null!==e?e:null},t.prototype.set=function(t,e){var s=this;if(!this._isSupported)return null;for(var a in s._properties){var i=s._properties[a].type;if(a===t)return s._lsSet(t,e,i),e}return this._lsSet(t,e),e},t.prototype.remove=function(t){return this._isSupported?window.localStorage.removeItem(t):null},t.prototype.addProperty=function(t,e,s){void 0===s&&(s=void 0),e=e||String,this._properties[t]={type:e},this._lsGet(t)||null===s||this._lsSet(t,s,e)},t.prototype._process=function(t,e){switch(t){case Boolean:return"true"===e;case Number:return parseFloat(e);case Array:try{var s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(t){return[]}case Object:try{return JSON.parse(e)}catch(t){return{}}default:return e}},Object.defineProperties(t.prototype,e);var s=new t;return{install:function(t,e){if(void 0===e&&(e={}),void 0===a||!(a.server||a.SERVER_BUILD||a.env&&"server"===a.env.VUE_ENV)){var n=!0;try{var r="__vue-localstorage-test__";window.localStorage.setItem(r,r),window.localStorage.removeItem(r)}catch(t){n=!1,s._isSupported=!1,i.error("Local storage is not supported")}var o=e.name||"localStorage",l=e.bind;e.namespace&&(s.namespace=e.namespace),t.mixin({beforeCreate:function(){var e=this;n&&this.$options[o]&&Object.keys(this.$options[o]).forEach((function(a){var n=e.$options[o][a],r=[n.type,n.default],d=r[0],c=r[1];if(s.addProperty(a,d,c),Object.getOwnPropertyDescriptor(s,a))t.config.silent||i.log(a+": is already defined and will be reused");else{var u={get:function(){return t.localStorage.get(a,c)},set:function(e){return t.localStorage.set(a,e)},configurable:!0};Object.defineProperty(s,a,u),t.util.defineReactive(s,a,c)}(l||n.bind)&&!1!==n.bind&&(e.$options.computed=e.$options.computed||{},e.$options.computed[a]||(e.$options.computed[a]={get:function(){return t.localStorage[a]},set:function(e){t.localStorage[a]=e}}))}))}}),t[o]=s,t.prototype["$"+o]=s}}}}()},26734:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},51338:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},57818:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},31926:t=>{"use strict";t.exports="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"}}]);
//# sourceMappingURL=settings-users-3239.js.map?v=53c9fe57a72c8114d3ce