{"version":3,"file":"SetStatusModal-VT77gtjx.chunk.mjs","sources":["../build/frontend/apps/user_status/src/services/clearAtOptionsService.js","../build/frontend/apps/user_status/src/components/ClearAtSelect.vue","../build/frontend/apps/user_status/src/components/CustomMessageInput.vue","../build/frontend/apps/user_status/src/components/OnlineStatusSelect.vue","../build/frontend/apps/user_status/src/components/PredefinedStatus.vue","../build/frontend/apps/user_status/src/components/PredefinedStatusesList.vue","../build/frontend/apps/user_status/src/components/PreviousStatus.vue","../build/frontend/apps/user_status/src/services/statusOptionsService.js","../build/frontend/apps/user_status/src/components/SetStatusModal.vue"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { t } from '@nextcloud/l10n'\n\n/**\n * Returns an array\n *\n * @return {object[]}\n */\nfunction getAllClearAtOptions() {\n\treturn [{\n\t\tlabel: t('user_status', 'Don\\'t clear'),\n\t\tclearAt: null,\n\t}, {\n\t\tlabel: t('user_status', '30 minutes'),\n\t\tclearAt: {\n\t\t\ttype: 'period',\n\t\t\ttime: 1800,\n\t\t},\n\t}, {\n\t\tlabel: t('user_status', '1 hour'),\n\t\tclearAt: {\n\t\t\ttype: 'period',\n\t\t\ttime: 3600,\n\t\t},\n\t}, {\n\t\tlabel: t('user_status', '4 hours'),\n\t\tclearAt: {\n\t\t\ttype: 'period',\n\t\t\ttime: 14400,\n\t\t},\n\t}, {\n\t\tlabel: t('user_status', 'Today'),\n\t\tclearAt: {\n\t\t\ttype: 'end-of',\n\t\t\ttime: 'day',\n\t\t},\n\t}, {\n\t\tlabel: t('user_status', 'This week'),\n\t\tclearAt: {\n\t\t\ttype: 'end-of',\n\t\t\ttime: 'week',\n\t\t},\n\t}]\n}\n\nexport {\n\tgetAllClearAtOptions,\n}\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"clear-at-select\">\n\t\t<label class=\"clear-at-select__label\" for=\"clearStatus\">\n\t\t\t{{ t('user_status', 'Clear status after') }}\n\t\t</label>\n\t\t<NcSelect\n\t\t\tinput-id=\"clearStatus\"\n\t\t\tclass=\"clear-at-select__select\"\n\t\t\t:options=\"options\"\n\t\t\t:model-value=\"option\"\n\t\t\t:clearable=\"false\"\n\t\t\tplacement=\"top\"\n\t\t\tlabel-outside\n\t\t\t@option:selected=\"select\" />\n\t</div>\n</template>\n\n<script>\nimport { t } from '@nextcloud/l10n'\nimport NcSelect from '@nextcloud/vue/components/NcSelect'\nimport { getAllClearAtOptions } from '../services/clearAtOptionsService.js'\nimport { clearAtFormat } from '../services/clearAtService.js'\n\nexport default {\n\tname: 'ClearAtSelect',\n\tcomponents: {\n\t\tNcSelect,\n\t},\n\n\tprops: {\n\t\tclearAt: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\temits: ['selectClearAt'],\n\n\tdata() {\n\t\treturn {\n\t\t\toptions: getAllClearAtOptions(),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Returns an object of the currently selected option\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\toption() {\n\t\t\treturn {\n\t\t\t\tclearAt: this.clearAt,\n\t\t\t\tlabel: clearAtFormat(this.clearAt),\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Triggered when the user selects a new option.\n\t\t *\n\t\t * @param {object=} option The new selected option\n\t\t */\n\t\tselect(option) {\n\t\t\tif (!option) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.$emit('selectClearAt', option.clearAt)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.clear-at-select {\n\tdisplay: flex;\n\tgap: calc(2 * var(--default-grid-baseline));\n\talign-items: center;\n\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n\n\t&__select {\n\t\tflex-grow: 1;\n\t\tmin-width: 215px;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"custom-input\" role=\"group\">\n\t\t<NcEmojiPicker container=\".custom-input\" @select=\"setIcon\">\n\t\t\t<NcButton\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t:aria-label=\"t('user_status', 'Emoji for your status message')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t{{ visibleIcon }}\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</NcEmojiPicker>\n\t\t<div class=\"custom-input__container\">\n\t\t\t<NcTextField\n\t\t\t\tref=\"input\"\n\t\t\t\tmaxlength=\"80\"\n\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t:placeholder=\"t('user_status', 'What is your status?')\"\n\t\t\t\t:model-value=\"message\"\n\t\t\t\ttype=\"text\"\n\t\t\t\t:label=\"t('user_status', 'What is your status?')\"\n\t\t\t\t@update:model-value=\"onChange\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { t } from '@nextcloud/l10n'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcEmojiPicker from '@nextcloud/vue/components/NcEmojiPicker'\nimport NcTextField from '@nextcloud/vue/components/NcTextField'\n\nexport default {\n\tname: 'CustomMessageInput',\n\n\tcomponents: {\n\t\tNcTextField,\n\t\tNcButton,\n\t\tNcEmojiPicker,\n\t},\n\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\tdefault: 'ðŸ˜€',\n\t\t},\n\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\temits: [\n\t\t'change',\n\t\t'selectIcon',\n\t],\n\n\tcomputed: {\n\t\t/**\n\t\t * Returns the user-set icon or a smiley in case no icon is set\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tvisibleIcon() {\n\t\t\treturn this.icon || 'ðŸ˜€'\n\t\t},\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\tfocus() {\n\t\t\tthis.$refs.input.focus()\n\t\t},\n\n\t\t/**\n\t\t * Notifies the parent component about a changed input\n\t\t *\n\t\t * @param {string} value The new input value\n\t\t */\n\t\tonChange(value) {\n\t\t\tthis.$emit('change', value)\n\t\t},\n\n\t\tsetIcon(icon) {\n\t\t\tthis.$emit('selectIcon', icon)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-input {\n\tdisplay: flex;\n\talign-items: flex-end;\n\tgap: var(--default-grid-baseline);\n\twidth: 100%;\n\n\t&__container {\n\t\twidth: 100%;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"user-status-online-select\">\n\t\t<input\n\t\t\t:id=\"id\"\n\t\t\t:checked=\"checked\"\n\t\t\tclass=\"hidden-visually user-status-online-select__input\"\n\t\t\ttype=\"radio\"\n\t\t\tname=\"user-status-online\"\n\t\t\t@change=\"onChange\">\n\t\t<label :for=\"id\" class=\"user-status-online-select__label\">\n\t\t\t<span class=\"user-status-online-select__icon-wrapper\">\n\t\t\t\t<NcUserStatusIcon\n\t\t\t\t\t:status=\"type\"\n\t\t\t\t\tclass=\"user-status-online-select__icon\"\n\t\t\t\t\taria-hidden=\"true\" />\n\t\t\t</span>\n\t\t\t{{ label }}\n\t\t\t<em class=\"user-status-online-select__subline\">{{ subline }}</em>\n\t\t</label>\n\t</div>\n</template>\n\n<script>\nimport NcUserStatusIcon from '@nextcloud/vue/components/NcUserStatusIcon'\n\nexport default {\n\tname: 'OnlineStatusSelect',\n\n\tcomponents: {\n\t\tNcUserStatusIcon,\n\t},\n\n\tprops: {\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tsubline: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\temits: ['select'],\n\n\tcomputed: {\n\t\tid() {\n\t\t\treturn `user-status-online-status-${this.type}`\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonChange() {\n\t\t\tthis.$emit('select', this.type)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-status-online-select {\n\t&__label {\n\t\tbox-sizing: inherit;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: var(--default-clickable-area) 1fr 2fr;\n\t\talign-items: center;\n\t\tgap: var(--default-grid-baseline);\n\t\tmin-height: var(--default-clickable-area);\n\t\tpadding: var(--default-grid-baseline);\n\t\tborder-radius: var(--border-radius-large);\n\t\tbackground-color: var(--color-background-hover);\n\n\t\t&, & * {\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\t}\n\n\t&__icon-wrapper {\n\t\theight: var(--default-clickable-area);\n\t\twidth: var(--default-clickable-area);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t&__icon {\n\t\theight: 20px;\n\t\twidth: 20px;\n\t}\n\n\t&__input:checked + &__label {\n\t\toutline: 2px solid var(--color-main-text);\n\t\tbackground-color: var(--color-background-dark);\n\t\tbox-shadow: 0 0 0 4px var(--color-main-background);\n\t}\n\n\t&__input:focus-visible + &__label {\n\t\toutline: 2px solid var(--color-primary-element) !important;\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\n\t&__subline {\n\t\tdisplay: block;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<li class=\"predefined-status\">\n\t\t<input\n\t\t\t:id=\"id\"\n\t\t\tclass=\"hidden-visually predefined-status__input\"\n\t\t\ttype=\"radio\"\n\t\t\tname=\"predefined-status\"\n\t\t\t:checked=\"selected\"\n\t\t\t@change=\"select\">\n\t\t<label class=\"predefined-status__label\" :for=\"id\">\n\t\t\t<span aria-hidden=\"true\" class=\"predefined-status__label--icon\">\n\t\t\t\t{{ icon }}\n\t\t\t</span>\n\t\t\t<span class=\"predefined-status__label--message\">\n\t\t\t\t{{ message }}\n\t\t\t</span>\n\t\t\t<span class=\"predefined-status__label--clear-at\">\n\t\t\t\t{{ formattedClearAt }}\n\t\t\t</span>\n\t\t</label>\n\t</li>\n</template>\n\n<script>\nimport { clearAtFormat } from '../services/clearAtService.js'\n\nexport default {\n\tname: 'PredefinedStatus',\n\n\tprops: {\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tclearAt: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\temits: ['select'],\n\n\tcomputed: {\n\t\tid() {\n\t\t\treturn `user-status-predefined-status-${this.messageId}`\n\t\t},\n\n\t\tformattedClearAt() {\n\t\t\treturn clearAtFormat(this.clearAt)\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Emits an event when the user clicks the row\n\t\t */\n\t\tselect() {\n\t\t\tthis.$emit('select')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.predefined-status {\n\t&__label {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\tjustify-content: flex-start;\n\t\tflex-basis: 100%;\n\t\tborder-radius: var(--border-radius);\n\t\talign-items: center;\n\t\tmin-height: var(--default-clickable-area);\n\t\tpadding-inline: var(--default-grid-baseline);\n\n\t\t&, & * {\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\n\t\t&--icon {\n\t\t\tflex-basis: var(--default-clickable-area);\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t&--message {\n\t\t\tfont-weight: bold;\n\t\t\tpadding: 0 6px;\n\t\t}\n\n\t\t&--clear-at {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t\t&::before {\n\t\t\t\tcontent: ' â€“ ';\n\t\t\t}\n\t\t}\n\t}\n\n\t&__input:checked + &__label,\n\t&__label:active {\n\t\toutline: 2px solid var(--color-main-text);\n\t\tbox-shadow: 0 0 0 4px var(--color-main-background);\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius-large);\n\t}\n\n\t&__input:focus-visible + &__label {\n\t\toutline: 2px solid var(--color-primary-element) !important;\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius-large);\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<ul\n\t\tv-if=\"statusesHaveLoaded\"\n\t\tclass=\"predefined-statuses-list\"\n\t\t:aria-label=\"t('user_status', 'Predefined statuses')\">\n\t\t<PredefinedStatus\n\t\t\tv-for=\"status in predefinedStatuses\"\n\t\t\t:key=\"status.id\"\n\t\t\t:message-id=\"status.id\"\n\t\t\t:icon=\"status.icon\"\n\t\t\t:message=\"status.message\"\n\t\t\t:clear-at=\"status.clearAt\"\n\t\t\t:selected=\"lastSelected === status.id\"\n\t\t\t@select=\"selectStatus(status)\" />\n\t</ul>\n\t<div\n\t\tv-else\n\t\tclass=\"predefined-statuses-list\">\n\t\t<div class=\"icon icon-loading-small\" />\n\t</div>\n</template>\n\n<script>\nimport { t } from '@nextcloud/l10n'\nimport { mapGetters, mapState } from 'vuex'\nimport PredefinedStatus from './PredefinedStatus.vue'\n\nexport default {\n\tname: 'PredefinedStatusesList',\n\tcomponents: {\n\t\tPredefinedStatus,\n\t},\n\n\temits: ['selectStatus'],\n\n\tdata() {\n\t\treturn {\n\t\t\tlastSelected: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapState({\n\t\t\tpredefinedStatuses: (state) => state.predefinedStatuses.predefinedStatuses,\n\t\t\tmessageId: (state) => state.userStatus.messageId,\n\t\t}),\n\n\t\t...mapGetters(['statusesHaveLoaded']),\n\t},\n\n\twatch: {\n\t\tmessageId: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.lastSelected = this.messageId\n\t\t\t},\n\t\t},\n\t},\n\n\t/**\n\t * Loads all predefined statuses from the server\n\t * when this component is mounted\n\t */\n\tcreated() {\n\t\tthis.$store.dispatch('loadAllPredefinedStatuses')\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Emits an event when the user selects a status\n\t\t *\n\t\t * @param {object} status The selected status\n\t\t */\n\t\tselectStatus(status) {\n\t\t\tthis.lastSelected = status.id\n\t\t\tthis.$emit('selectStatus', status)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.predefined-statuses-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--default-grid-baseline);\n\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div\n\t\tclass=\"predefined-status backup-status\"\n\t\ttabindex=\"0\"\n\t\t@keyup.enter=\"select\"\n\t\t@keyup.space=\"select\"\n\t\t@click=\"select\">\n\t\t<span class=\"predefined-status__icon\">\n\t\t\t{{ icon }}\n\t\t</span>\n\t\t<span class=\"predefined-status__message\">\n\t\t\t{{ message }}\n\t\t</span>\n\t\t<span class=\"predefined-status__clear-at\">\n\t\t\t{{ t('user_status', 'Previously set') }}\n\t\t</span>\n\n\t\t<div class=\"backup-status__reset-button\">\n\t\t\t<NcButton @click=\"select\">\n\t\t\t\t{{ t('user_status', 'Reset status') }}\n\t\t\t</NcButton>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { t } from '@nextcloud/l10n'\nimport NcButton from '@nextcloud/vue/components/NcButton'\n\nexport default {\n\tname: 'PreviousStatus',\n\n\tcomponents: {\n\t\tNcButton,\n\t},\n\n\tprops: {\n\t\ticon: {\n\t\t\ttype: [String, null],\n\t\t\trequired: true,\n\t\t},\n\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\temits: ['select'],\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Emits an event when the user clicks the row\n\t\t */\n\t\tselect() {\n\t\t\tthis.$emit('select')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.predefined-status {\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tjustify-content: flex-start;\n\tflex-basis: 100%;\n\tborder-radius: var(--border-radius);\n\talign-items: center;\n\tmin-height: var(--default-clickable-area);\n\tpadding-inline: var(--default-grid-baseline);\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&:active{\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\n\t&__icon {\n\t\tflex-basis: var(--default-clickable-area);\n\t\ttext-align: center;\n\t}\n\n\t&__message {\n\t\tfont-weight: bold;\n\t\tpadding: 0 6px;\n\t}\n\n\t&__clear-at {\n\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t&::before {\n\t\t\tcontent: ' â€“ ';\n\t\t}\n\t}\n}\n\n.backup-status {\n\t&__reset-button {\n\t\tjustify-content: flex-end;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { t } from '@nextcloud/l10n'\n\n/**\n * Returns a list of all user-definable statuses\n *\n * @return {object[]}\n */\nfunction getAllStatusOptions() {\n\treturn [{\n\t\ttype: 'online',\n\t\tlabel: t('user_status', 'Online'),\n\t}, {\n\t\ttype: 'away',\n\t\tlabel: t('user_status', 'Away'),\n\t}, {\n\t\ttype: 'busy',\n\t\tlabel: t('user_status', 'Busy'),\n\t}, {\n\t\ttype: 'dnd',\n\t\tlabel: t('user_status', 'Do not disturb'),\n\t\tsubline: t('user_status', 'Mute all notifications'),\n\t}, {\n\t\ttype: 'invisible',\n\t\tlabel: t('user_status', 'Invisible'),\n\t\tsubline: t('user_status', 'Appear offline'),\n\t}]\n}\n\nexport {\n\tgetAllStatusOptions,\n}\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcModal\n\t\tsize=\"normal\"\n\t\tlabel-id=\"user_status-set-dialog\"\n\t\tdark\n\t\t:set-return-focus=\"setReturnFocus\"\n\t\t@close=\"closeModal\">\n\t\t<div class=\"set-status-modal\">\n\t\t\t<!-- Status selector -->\n\t\t\t<h2 id=\"user_status-set-dialog\" class=\"set-status-modal__header\">\n\t\t\t\t{{ t('user_status', 'Online status') }}\n\t\t\t</h2>\n\t\t\t<div\n\t\t\t\tclass=\"set-status-modal__online-status\"\n\t\t\t\trole=\"radiogroup\"\n\t\t\t\t:aria-label=\"t('user_status', 'Online status')\">\n\t\t\t\t<OnlineStatusSelect\n\t\t\t\t\tv-for=\"status in statuses\"\n\t\t\t\t\t:key=\"status.type\"\n\t\t\t\t\tv-bind=\"status\"\n\t\t\t\t\t:checked=\"status.type === statusType\"\n\t\t\t\t\t@select=\"changeStatus\" />\n\t\t\t</div>\n\n\t\t\t<!-- Status message form -->\n\t\t\t<form @submit.prevent=\"saveStatus\" @reset=\"clearStatus\">\n\t\t\t\t<h3 class=\"set-status-modal__header\">\n\t\t\t\t\t{{ t('user_status', 'Status message') }}\n\t\t\t\t</h3>\n\t\t\t\t<div class=\"set-status-modal__custom-input\">\n\t\t\t\t\t<CustomMessageInput\n\t\t\t\t\t\tref=\"customMessageInput\"\n\t\t\t\t\t\t:icon=\"icon\"\n\t\t\t\t\t\t:message=\"editedMessage\"\n\t\t\t\t\t\t@change=\"setMessage\"\n\t\t\t\t\t\t@select-icon=\"setIcon\" />\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\tv-if=\"messageId === 'vacationing'\"\n\t\t\t\t\t\t:href=\"absencePageUrl\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t:aria-label=\"t('user_status', 'Set absence period')\">\n\t\t\t\t\t\t{{ t('user_status', 'Set absence period and replacement') + ' â†—' }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasBackupStatus\"\n\t\t\t\t\tclass=\"set-status-modal__automation-hint\">\n\t\t\t\t\t{{ t('user_status', 'Your status was set automatically') }}\n\t\t\t\t</div>\n\t\t\t\t<PreviousStatus\n\t\t\t\t\tv-if=\"hasBackupStatus\"\n\t\t\t\t\t:icon=\"backupIcon\"\n\t\t\t\t\t:message=\"backupMessage\"\n\t\t\t\t\t@select=\"revertBackupFromServer\" />\n\t\t\t\t<PredefinedStatusesList @select-status=\"selectPredefinedMessage\" />\n\t\t\t\t<ClearAtSelect\n\t\t\t\t\t:clear-at=\"clearAt\"\n\t\t\t\t\t@select-clear-at=\"setClearAt\" />\n\t\t\t\t<div class=\"status-buttons\">\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\t:aria-label=\"t('user_status', 'Clear status message')\"\n\t\t\t\t\t\t:disabled=\"isSavingStatus\">\n\t\t\t\t\t\t{{ t('user_status', 'Clear status message') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:aria-label=\"t('user_status', 'Set status message')\"\n\t\t\t\t\t\t:disabled=\"isSavingStatus\">\n\t\t\t\t\t\t{{ t('user_status', 'Set status message') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<script>\nimport { showError } from '@nextcloud/dialogs'\nimport { t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcModal from '@nextcloud/vue/components/NcModal'\nimport ClearAtSelect from './ClearAtSelect.vue'\nimport CustomMessageInput from './CustomMessageInput.vue'\nimport OnlineStatusSelect from './OnlineStatusSelect.vue'\nimport PredefinedStatusesList from './PredefinedStatusesList.vue'\nimport PreviousStatus from './PreviousStatus.vue'\nimport { logger } from '../logger.ts'\nimport OnlineStatusMixin from '../mixins/OnlineStatusMixin.js'\nimport { getAllStatusOptions } from '../services/statusOptionsService.js'\n\nexport default {\n\tname: 'SetStatusModal',\n\n\tcomponents: {\n\t\tClearAtSelect,\n\t\tCustomMessageInput,\n\t\tNcModal,\n\t\tOnlineStatusSelect,\n\t\tPredefinedStatusesList,\n\t\tPreviousStatus,\n\t\tNcButton,\n\t},\n\n\tmixins: [OnlineStatusMixin],\n\n\tprops: {\n\t\t/**\n\t\t * Whether the component should be rendered as a Dashboard Status or a User Menu Entries\n\t\t * true = Dashboard Status\n\t\t * false = User Menu Entries\n\t\t */\n\t\tinline: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\temits: ['close'],\n\n\tdata() {\n\t\treturn {\n\t\t\tclearAt: null,\n\t\t\teditedMessage: '',\n\t\t\tpredefinedMessageId: null,\n\t\t\tisSavingStatus: false,\n\t\t\tstatuses: getAllStatusOptions(),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmessageId() {\n\t\t\treturn this.$store.state.userStatus.messageId\n\t\t},\n\n\t\ticon() {\n\t\t\treturn this.$store.state.userStatus.icon\n\t\t},\n\n\t\tmessage() {\n\t\t\treturn this.$store.state.userStatus.message || ''\n\t\t},\n\n\t\thasBackupStatus() {\n\t\t\treturn this.messageId && (this.backupIcon || this.backupMessage)\n\t\t},\n\n\t\tbackupIcon() {\n\t\t\treturn this.$store.state.userBackupStatus.icon || ''\n\t\t},\n\n\t\tbackupMessage() {\n\t\t\treturn this.$store.state.userBackupStatus.message || ''\n\t\t},\n\n\t\tabsencePageUrl() {\n\t\t\treturn generateUrl('settings/user/availability#absence')\n\t\t},\n\n\t\tresetButtonText() {\n\t\t\tif (this.backupIcon && this.backupMessage) {\n\t\t\t\treturn t('user_status', 'Reset status to \"{icon} {message}\"', {\n\t\t\t\t\ticon: this.backupIcon,\n\t\t\t\t\tmessage: this.backupMessage,\n\t\t\t\t})\n\t\t\t} else if (this.backupMessage) {\n\t\t\t\treturn t('user_status', 'Reset status to \"{message}\"', {\n\t\t\t\t\tmessage: this.backupMessage,\n\t\t\t\t})\n\t\t\t} else if (this.backupIcon) {\n\t\t\t\treturn t('user_status', 'Reset status to \"{icon}\"', {\n\t\t\t\t\ticon: this.backupIcon,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn t('user_status', 'Reset status')\n\t\t},\n\n\t\tsetReturnFocus() {\n\t\t\tif (this.inline) {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t\treturn document.querySelector('[aria-controls=\"header-menu-user-menu\"]') ?? undefined\n\t\t},\n\t},\n\n\twatch: {\n\t\tmessage: {\n\t\t\timmediate: true,\n\t\t\thandler(newValue) {\n\t\t\t\tthis.editedMessage = newValue\n\t\t\t},\n\t\t},\n\t},\n\n\t/**\n\t * Loads the current status when a user opens dialog\n\t */\n\tmounted() {\n\t\tthis.$store.dispatch('fetchBackupFromServer')\n\n\t\tthis.predefinedMessageId = this.$store.state.userStatus.messageId\n\t\tif (this.$store.state.userStatus.clearAt !== null) {\n\t\t\tthis.clearAt = {\n\t\t\t\ttype: '_time',\n\t\t\t\ttime: this.$store.state.userStatus.clearAt,\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tt,\n\n\t\t/**\n\t\t * Closes the Set Status modal\n\t\t */\n\t\tcloseModal() {\n\t\t\tthis.$emit('close')\n\t\t},\n\n\t\t/**\n\t\t * Sets a new icon\n\t\t *\n\t\t * @param {string} icon The new icon\n\t\t */\n\t\tsetIcon(icon) {\n\t\t\tthis.predefinedMessageId = null\n\t\t\tthis.$store.dispatch('setCustomMessage', {\n\t\t\t\tmessage: this.message,\n\t\t\t\ticon,\n\t\t\t\tclearAt: this.clearAt,\n\t\t\t})\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.customMessageInput.focus()\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Sets a new message\n\t\t *\n\t\t * @param {string} message The new message\n\t\t */\n\t\tsetMessage(message) {\n\t\t\tthis.predefinedMessageId = null\n\t\t\tthis.editedMessage = message\n\t\t},\n\n\t\t/**\n\t\t * Sets a new clearAt value\n\t\t *\n\t\t * @param {object} clearAt The new clearAt object\n\t\t */\n\t\tsetClearAt(clearAt) {\n\t\t\tthis.clearAt = clearAt\n\t\t},\n\n\t\t/**\n\t\t * Sets new icon/message/clearAt based on a predefined message\n\t\t *\n\t\t * @param {object} status The predefined status object\n\t\t */\n\t\tselectPredefinedMessage(status) {\n\t\t\tthis.predefinedMessageId = status.id\n\t\t\tthis.clearAt = status.clearAt\n\t\t\tthis.$store.dispatch('setPredefinedMessage', {\n\t\t\t\tmessageId: status.id,\n\t\t\t\tclearAt: status.clearAt,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Saves the status and closes the\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync saveStatus() {\n\t\t\tif (this.isSavingStatus) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tthis.isSavingStatus = true\n\n\t\t\t\tif (this.predefinedMessageId === null) {\n\t\t\t\t\tawait this.$store.dispatch('setCustomMessage', {\n\t\t\t\t\t\tmessage: this.editedMessage,\n\t\t\t\t\t\ticon: this.icon,\n\t\t\t\t\t\tclearAt: this.clearAt,\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.$store.dispatch('setPredefinedMessage', {\n\t\t\t\t\t\tmessageId: this.predefinedMessageId,\n\t\t\t\t\t\tclearAt: this.clearAt,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tshowError(t('user_status', 'There was an error saving the status'))\n\t\t\t\tlogger.debug(err)\n\t\t\t\tthis.isSavingStatus = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.isSavingStatus = false\n\t\t\tthis.closeModal()\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync clearStatus() {\n\t\t\ttry {\n\t\t\t\tthis.isSavingStatus = true\n\n\t\t\t\tawait this.$store.dispatch('clearMessage')\n\t\t\t} catch (err) {\n\t\t\t\tshowError(t('user_status', 'There was an error clearing the status'))\n\t\t\t\tlogger.debug(err)\n\t\t\t\tthis.isSavingStatus = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.isSavingStatus = false\n\t\t\tthis.predefinedMessageId = null\n\t\t\tthis.closeModal()\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync revertBackupFromServer() {\n\t\t\ttry {\n\t\t\t\tthis.isSavingStatus = true\n\n\t\t\t\tawait this.$store.dispatch('revertBackupFromServer', {\n\t\t\t\t\tmessageId: this.messageId,\n\t\t\t\t})\n\t\t\t} catch (err) {\n\t\t\t\tshowError(t('user_status', 'There was an error reverting the status'))\n\t\t\t\tlogger.debug(err)\n\t\t\t\tthis.isSavingStatus = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.isSavingStatus = false\n\t\t\tthis.predefinedMessageId = this.$store.state.userStatus?.messageId\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.set-status-modal {\n\tpadding: 8px 20px 20px 20px;\n\n\t&, & * {\n\t\tbox-sizing: border-box;\n\t}\n\n\t&__header {\n\t\tfont-size: 21px;\n\t\ttext-align: center;\n\t\theight: fit-content;\n\t\tmin-height: var(--default-clickable-area);\n\t\tline-height: var(--default-clickable-area);\n\t\toverflow-wrap: break-word;\n\t\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__online-status {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: calc(2 * var(--default-grid-baseline));\n\t\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__custom-input {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: var(--default-grid-baseline);\n\t\twidth: 100%;\n\t\tpadding-inline-start: var(--default-grid-baseline);\n\t\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__automation-hint {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tmargin-block: 0 calc(2 * var(--default-grid-baseline));\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t.status-buttons {\n\t\tdisplay: flex;\n\t\tpadding: 3px;\n\t\tpadding-inline-start:0;\n\t\tgap: 3px;\n\t}\n}\n\n@media only screen and (max-width: 500px) {\n\t.set-status-modal__online-status {\n\t\tgrid-template-columns: none !important;\n\t}\n}\n\n</style>\n"],"names":["t","_sfc_main","_hoisted_1","_openBlock","_createElementBlock","_createElementVNode","_hoisted_2","_toDisplayString","_createVNode","NcTextField","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","_createBlock","_hoisted_3","_createCommentVNode","_mergeProps"],"mappings":"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"}