/*! third party licenses: dist/vendor.LICENSE.txt */
import{af as r,bR as l,bZ as c,ai as u,b_ as a,aV as o}from"./core-common.mjs";import"./chunks/index-PaKKd09k.mjs";import{z as p}from"./chunks/_plugin-vue2_normalizer-VrK6B12S-BQkexw0P.mjs";import{l as d}from"./chunks/logger-C7fGMvfA.mjs";import{n}from"./chunks/icons-TElqpmA8.mjs";import"./chunks/index-CiG5J8j_.mjs";const g={name:"GroupSelect",components:{NcSelect:r},props:{availableGroups:{type:Array,default:()=>[]},setting:{type:Object,required:!0},authorizedGroups:{type:Array,required:!0}},data(){return{selected:this.authorizedGroups.filter(e=>e.class===this.setting.class).map(e=>this.availableGroups.find(s=>s.gid===e.group_id)).filter(e=>e!==void 0)}},watch:{selected(){this.saveGroups()}},methods:{async saveGroups(){const e={newGroups:this.selected,class:this.setting.class};try{await l.post(c("/apps/settings/")+"/settings/authorizedgroups/saveSettings",e)}catch(s){p(t("settings","Unable to modify setting")),d.error("Unable to modify setting",s)}}}};var m=function(){var e=this,s=e._self._c;return s("NcSelect",{staticClass:"group-select",attrs:{"input-id":e.setting.id,placeholder:e.t("settings","None"),label:"displayName",options:e.availableGroups,multiple:!0,"close-on-select":!1},model:{value:e.selected,callback:function(i){e.selected=i},expression:"selected"}})},h=[],v=n(g,m,h,!1,null,null);const b=v.exports,f={name:"AdminDelegating",components:{GroupSelect:b,NcSettingsSection:u},data(){return{availableSettings:a("settings","available-settings"),availableGroups:a("settings","available-groups"),authorizedGroups:a("settings","authorized-groups"),authorizedSettingsDocLink:a("settings","authorized-settings-doc-link")}}};var G=function(){var e=this,s=e._self._c;return s("NcSettingsSection",{attrs:{name:e.t("settings","Administration privileges"),description:e.t("settings","Here you can decide which group can access certain sections of the administration settings."),"doc-url":e.authorizedSettingsDocLink}},[s("div",{staticClass:"setting-list"},e._l(e.availableSettings,function(i){return s("div",{key:i.class},[s("label",{attrs:{for:i.id}},[e._v(e._s(i.sectionName))]),s("GroupSelect",{attrs:{"available-groups":e.availableGroups,"authorized-groups":e.authorizedGroups,setting:i}})],1)}),0)])},y=[],S=n(f,G,y,!1,null,"4df44833");const z=S.exports;o.prototype.OC=OC,o.prototype.t=t;const _=o.extend(z),N=new _;N.$mount("#admin-right-sub-granting");
