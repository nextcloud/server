{"version":3,"file":"NcUserStatusIcon-CGEf7fej-CSAsMs-R.chunk.mjs","sources":["../node_modules/@nextcloud/vue/dist/chunks/NcUserStatusIcon-CGEf7fej.mjs"],"sourcesContent":["import '../assets/NcUserStatusIcon-B3aHoBAd.css';\nimport { defineComponent, mergeModels, useModel, computed, watch, createElementBlock, createCommentVNode, openBlock, normalizeClass } from \"vue\";\nimport axios from \"@nextcloud/axios\";\nimport { getCapabilities } from \"@nextcloud/capabilities\";\nimport { generateOcsUrl } from \"@nextcloud/router\";\nimport { r as register, y as t11, a as t } from \"./_l10n-DrTiip5c.mjs\";\nimport { l as logger } from \"./logger-D3RVzcfQ.mjs\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\nconst awaySvg = '<!--\\n  - SPDX-FileCopyrightText: 2020 Google Inc.\\n  - SPDX-License-Identifier: Apache-2.0\\n-->\\n<svg viewBox=\"0 -960 960 960\" width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\\n\t<path\\n\t\tfill=\"var(--user-status-color-away, var(--color-warning, #C88800))\"\\n\t\td=\"m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z\"/>\\n</svg>\\n';\nconst busySvg = '<!--\\n  - SPDX-FileCopyrightText: 2020 Google Inc.\\n  - SPDX-License-Identifier: Apache-2.0\\n-->\\n<svg viewBox=\"0 -960 960 960\" width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\\n\t<path\\n\t\tfill=\"var(--user-status-color-busy, var(--color-error, #DB0606))\"\\n\t\td=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z\"/>\\n</svg>\\n';\nconst dndSvg = '<!--\\n  - SPDX-FileCopyrightText: 2020 Google Inc.\\n  - SPDX-License-Identifier: Apache-2.0\\n-->\\n<svg viewBox=\"0 -960 960 960\" width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\\n\t<path\\n\t\tfill=\"var(--user-status-color-busy, var(--color-error, #DB0606))\"\\n\t\td=\"M280-440h400v-80H280v80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z\"/>\\n</svg>\\n';\nconst invisibleSvg = '<!--\\n  - SPDX-FileCopyrightText: 2020 Google Inc.\\n  - SPDX-License-Identifier: Apache-2.0\\n-->\\n<svg viewBox=\"0 -960 960 960\" width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\\n\t<path\\n\t\tfill=\"var(--user-status-color-offline, var(--color-text-maxcontrast, #6B6B6B))\"\\n\t\td=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\"/>\\n</svg>\\n';\nconst onlineSvg = '<!--\\n  - SPDX-FileCopyrightText: 2020 Google Inc.\\n  - SPDX-License-Identifier: Apache-2.0\\n-->\\n<svg viewBox=\"0 -960 960 960\" width=\"24px\" height=\"24px\" xmlns=\"http://www.w3.org/2000/svg\">\\n\t<path\\n\t\tfill=\"var(--user-status-color-online, var(--color-success, #2D7B41))\"\\n\t\td=\"m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z\"/>\\n</svg>\\n';\nregister();\nregister(t11);\nfunction getUserStatusText(status) {\n  switch (status) {\n    case \"away\":\n      return t(\"away\");\n    // TRANSLATORS: User status if the user is currently away from keyboard\n    case \"busy\":\n      return t(\"busy\");\n    case \"dnd\":\n      return t(\"do not disturb\");\n    case \"online\":\n      return t(\"online\");\n    case \"invisible\":\n      return t(\"invisible\");\n    case \"offline\":\n      return t(\"offline\");\n    default:\n      return status;\n  }\n}\nconst _hoisted_1 = [\"aria-hidden\", \"aria-label\", \"innerHTML\"];\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"NcUserStatusIcon\",\n  props: /* @__PURE__ */ mergeModels({\n    user: { default: void 0 },\n    ariaHidden: { type: [Boolean, String], default: false }\n  }, {\n    \"status\": {},\n    \"statusModifiers\": {}\n  }),\n  emits: [\"update:status\"],\n  setup(__props) {\n    const status = useModel(__props, \"status\");\n    const props = __props;\n    const isInvisible = computed(() => status.value && [\"invisible\", \"offline\"].includes(status.value));\n    const ariaLabel = computed(() => status.value && (!props.ariaHidden || props.ariaHidden === \"false\") ? t(\"User status: {status}\", { status: getUserStatusText(status.value) }) : void 0);\n    watch(() => props.user, async (user) => {\n      if (!status.value && user && getCapabilities()?.user_status?.enabled) {\n        try {\n          const { data } = await axios.get(generateOcsUrl(\"/apps/user_status/api/v1/statuses/{user}\", { user }));\n          status.value = data.ocs?.data?.status;\n        } catch (error) {\n          logger.debug(\"Error while fetching user status\", { error });\n        }\n      }\n    }, { immediate: true });\n    const matchSvg = {\n      online: onlineSvg,\n      away: awaySvg,\n      busy: busySvg,\n      dnd: dndSvg,\n      invisible: invisibleSvg,\n      offline: invisibleSvg\n    };\n    const activeSvg = computed(() => status.value && matchSvg[status.value]);\n    return (_ctx, _cache) => {\n      return status.value ? (openBlock(), createElementBlock(\"span\", {\n        key: 0,\n        class: normalizeClass([\"user-status-icon\", {\n          \"user-status-icon--invisible\": isInvisible.value\n        }]),\n        \"aria-hidden\": !ariaLabel.value || void 0,\n        \"aria-label\": ariaLabel.value,\n        role: \"img\",\n        innerHTML: activeSvg.value\n      }, null, 10, _hoisted_1)) : createCommentVNode(\"\", true);\n    };\n  }\n});\nconst NcUserStatusIcon = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-881a79fb\"]]);\nexport {\n  NcUserStatusIcon as N,\n  getUserStatusText as g\n};\n//# sourceMappingURL=NcUserStatusIcon-CGEf7fej.mjs.map\n"],"names":["awaySvg","busySvg","dndSvg","invisibleSvg","onlineSvg","register","t11","getUserStatusText","status","t","_hoisted_1","_sfc_main","defineComponent","mergeModels","__props","useModel","props","isInvisible","computed","ariaLabel","watch","user","getCapabilities","data","axios","generateOcsUrl","error","logger","matchSvg","activeSvg","_ctx","_cache","openBlock","createElementBlock","normalizeClass","createCommentVNode","NcUserStatusIcon","_export_sfc"],"mappings":"4QAQA,MAAMA,EAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACVC,EAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACVC,EAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACTC,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACfC,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAClBC,EAAQ,EACRA,EAASC,CAAG,EACZ,SAASC,EAAkBC,EAAQ,CACjC,OAAQA,EAAM,CACZ,IAAK,OACH,OAAOC,EAAE,MAAM,EAEjB,IAAK,OACH,OAAOA,EAAE,MAAM,EACjB,IAAK,MACH,OAAOA,EAAE,gBAAgB,EAC3B,IAAK,SACH,OAAOA,EAAE,QAAQ,EACnB,IAAK,YACH,OAAOA,EAAE,WAAW,EACtB,IAAK,UACH,OAAOA,EAAE,SAAS,EACpB,QACE,OAAOD,CACb,CACA,CACA,MAAME,EAAa,CAAC,cAAe,aAAc,WAAW,EACtDC,EAA4BC,EAAgB,CAChD,OAAQ,mBACR,MAAuBC,EAAY,CACjC,KAAM,CAAE,QAAS,MAAM,EACvB,WAAY,CAAE,KAAM,CAAC,QAAS,MAAM,EAAG,QAAS,EAAK,CACzD,EAAK,CACD,OAAU,CAAA,EACV,gBAAmB,CAAA,CACvB,CAAG,EACD,MAAO,CAAC,eAAe,EACvB,MAAMC,EAAS,CACb,MAAMN,EAASO,EAASD,EAAS,QAAQ,EACnCE,EAAQF,EACRG,EAAcC,EAAS,IAAMV,EAAO,OAAS,CAAC,YAAa,SAAS,EAAE,SAASA,EAAO,KAAK,CAAC,EAC5FW,EAAYD,EAAS,IAAMV,EAAO,QAAU,CAACQ,EAAM,YAAcA,EAAM,aAAe,SAAWP,EAAE,wBAAyB,CAAE,OAAQF,EAAkBC,EAAO,KAAK,EAAG,EAAI,MAAM,EACvLY,EAAM,IAAMJ,EAAM,KAAM,MAAOK,GAAS,CACtC,GAAI,CAACb,EAAO,OAASa,GAAQC,EAAe,GAAI,aAAa,QAC3D,GAAI,CACF,KAAM,CAAE,KAAAC,GAAS,MAAMC,EAAM,IAAIC,EAAe,2CAA4C,CAAE,KAAAJ,CAAI,CAAE,CAAC,EACrGb,EAAO,MAAQe,EAAK,KAAK,MAAM,MACjC,OAASG,EAAO,CACdC,EAAO,MAAM,mCAAoC,CAAE,MAAAD,CAAK,CAAE,CAC5D,CAEJ,EAAG,CAAE,UAAW,GAAM,EACtB,MAAME,EAAW,CACf,OAAQxB,EACR,KAAMJ,EACN,KAAMC,EACN,IAAKC,EACL,UAAWC,EACX,QAASA,CACf,EACU0B,EAAYX,EAAS,IAAMV,EAAO,OAASoB,EAASpB,EAAO,KAAK,CAAC,EACvE,MAAO,CAACsB,EAAMC,IACLvB,EAAO,OAASwB,EAAS,EAAIC,EAAmB,OAAQ,CAC7D,IAAK,EACL,MAAOC,EAAe,CAAC,mBAAoB,CACzC,8BAA+BjB,EAAY,KACrD,CAAS,CAAC,EACF,cAAe,CAACE,EAAU,OAAS,OACnC,aAAcA,EAAU,MACxB,KAAM,MACN,UAAWU,EAAU,KAC7B,EAAS,KAAM,GAAInB,CAAU,GAAKyB,EAAmB,GAAI,EAAI,CAE3D,CACF,CAAC,EACKC,EAAmCC,EAAY1B,EAAW,CAAC,CAAC,YAAa,iBAAiB,CAAC,CAAC","x_google_ignoreList":[0]}