/*! third party licenses: dist/vendor.LICENSE.txt */
import{n as f,ap as L}from"./icons-TElqpmA8.mjs";import{cj as q,aX as l,b_ as O,a_ as _,bZ as h,a1 as j,bu as p,ci as C,ck as W,bL as w}from"../core-common.mjs";import{L as N}from"./vue-router.esm-CkRP8kF4.mjs";const A=["post","showcase","carousel"],E={type:{type:String,required:!0,validator:e=>typeof e=="string"&&A.includes(e)},id:{type:String,required:!0},date:{type:Number,required:!1,default:void 0},expiryDate:{type:Number,required:!1,default:void 0},headline:{type:Object,required:!1,default:()=>null},link:{type:String,required:!1,default:()=>null}},T=(e,t)=>{var r,i,s;return(s=(i=(r=e[t])!=null?r:e[t.split("_")[0]])!=null?i:e.en)!=null?s:null},u=e=>{const t=q();return l(()=>e!=null&&e.value?T(e.value,t):null)},v=Object.fromEntries(Object.entries(O("core","apps")).map(([e,t])=>{var r;return[(r=t.app)!=null?r:e,t.href]})),U=_({name:"AppLink",components:{RouterLink:N},props:{href:{type:String,required:!0}},data(){return{routerProps:void 0,linkProps:void 0}},watch:{href:{immediate:!0,handler(){var e,t;const r=this.href.match(/^app:\/\/([^/]+)(\/.+)?$/);if(this.routerProps=void 0,this.linkProps=void 0,r===null){this.linkProps={href:this.href,target:"_blank",rel:"noreferrer noopener"};return}const i=r[1];if(r[2]){this.linkProps={href:h("/apps/".concat(i).concat(r[2]))};return}if(i in v){this.linkProps={href:v[i]};return}this.routerProps={to:{name:"apps-details",params:{category:(t=(e=this.$route.params)==null?void 0:e.category)!=null?t:"discover",id:i}}}}}}});var R=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.linkProps?t("a",e._b({},"a",e.linkProps,!1),[e._t("default")],2):e.routerProps?t("RouterLink",e._b({},"RouterLink",e.routerProps,!1),[e._t("default")],2):e._e()},z=[],F=f(U,R,z,!1,null,null);const H=F.exports,V=_({components:{AppLink:H,NcIconSvgWrapper:j},props:{...E,text:{type:Object,required:!1,default:()=>null},media:{type:Object,required:!1,default:()=>null},inline:{type:Boolean,required:!1,default:!1},domId:{type:String,required:!1,default:null}},setup(e){const t=u(l(()=>e.headline)),r=u(l(()=>e.text)),i=u(l(()=>{var a;return(a=e.media)==null?void 0:a.content})),s=l(()=>i.value!==null?[i.value.src].flat():void 0),g=l(()=>{var a,n;return(n=(a=i.value)==null?void 0:a.alt)!=null?n:""}),c=l(()=>{var a;return((a=s==null?void 0:s.value)==null?void 0:a[0].mime.startsWith("image/"))===!0}),y=l(()=>!t.value&&!r.value),k=l(()=>{var a,n;return(n=(a=i.value)==null?void 0:a.link)!=null?n:e.link}),d=p(!1),P=l(()=>{var a;return((a=i.value)==null?void 0:a.link)&&d.value}),m=p(),{width:b}=C(m),S=l(()=>b.value<600),x=a=>a.startsWith("/")?a:h("/settings/api/apps/media?fileName={fileName}",{fileName:a}),o=p(),I=W(o,{threshold:.3});return w(()=>{if(!c.value&&o.value){const a=o.value;I.value?(a.muted=!0,a.play()):(a.pause(),a.ended&&(a.currentTime=0,d.value=!1))}}),{mdiPlayCircleOutline:L,container:m,translatedText:r,translatedHeadline:t,mediaElement:o,mediaSources:s,mediaAlt:g,mediaLink:k,hasPlaybackEnded:d,showPlayVideo:P,isFullWidth:y,isSmallWidth:S,isImage:c,generatePrivacyUrl:x}}});var $=function(){var r,i;var e=this,t=e._self._c;return e._self._setupProxy,t("article",{ref:"container",staticClass:"app-discover-post",class:{"app-discover-post--reverse":e.media&&e.media.alignment==="start","app-discover-post--small":e.isSmallWidth},attrs:{id:e.domId}},[e.headline||e.text?t(e.link?"AppLink":"div",{tag:"component",staticClass:"app-discover-post__text",attrs:{href:e.link}},[t(e.inline?"h4":"h3",{tag:"component"},[e._v(" "+e._s(e.translatedHeadline)+" ")]),t("p",[e._v(e._s(e.translatedText))])],1):e._e(),e.mediaSources?t(e.mediaLink?"AppLink":"div",{tag:"component",staticClass:"app-discover-post__media",class:{"app-discover-post__media--fullwidth":e.isFullWidth,"app-discover-post__media--start":((r=e.media)==null?void 0:r.alignment)==="start","app-discover-post__media--end":((i=e.media)==null?void 0:i.alignment)==="end"},attrs:{href:e.mediaLink}},[t(e.isImage?"picture":"video",{ref:"mediaElement",tag:"component",staticClass:"app-discover-post__media-element",attrs:{muted:!e.isImage,playsinline:!e.isImage,preload:!e.isImage&&"auto"},on:{ended:function(s){e.hasPlaybackEnded=!0}}},[e._l(e.mediaSources,function(s){return t("source",{key:s.src,attrs:{src:e.isImage?void 0:e.generatePrivacyUrl(s.src),srcset:e.isImage?e.generatePrivacyUrl(s.src):void 0,type:s.mime}})}),e.isImage?t("img",{attrs:{src:e.generatePrivacyUrl(e.mediaSources[0].src),alt:e.mediaAlt}}):e._e()],2),t("div",{staticClass:"app-discover-post__play-icon-wrapper"},[!e.isImage&&e.showPlayVideo?t("NcIconSvgWrapper",{staticClass:"app-discover-post__play-icon",attrs:{path:e.mdiPlayCircleOutline,size:92}}):e._e()],1)],1):e._e()],1)},B=[],D=f(V,$,B,!1,null,"e31cfdf3");const M=D.exports,Z=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{M as P,Z as a,E as c,u};
