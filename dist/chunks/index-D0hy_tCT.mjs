const __vite__fileDeps=["./index-CqRCpcyw-BsQDTmMm.mjs","./preload-helper-BG02UnR2.mjs","../core-common.mjs"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
/*! third party licenses: dist/vendor.LICENSE.txt */
var H=Object.defineProperty;var N=e=>{throw TypeError(e)};var T=(e,t,s)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var i=(e,t,s)=>T(e,typeof t!="symbol"?t+"":t,s),V=(e,t,s)=>t.has(e)||N("Cannot "+s);var o=(e,t,s)=>(V(e,t,"read from private field"),s?s.call(e):t.get(e)),u=(e,t,s)=>t.has(e)?N("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),r=(e,t,s,n)=>(V(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s);import{_ as P}from"./preload-helper-BG02UnR2.mjs";import{p as S}from"./index-PaKKd09k.mjs";import{aV as k,bz as D,a_ as L,bj as $,bo as B,T as E,a7 as R}from"../core-common.mjs";import{C as p,P as j,R as Z}from"./_plugin-vue2_normalizer-VrK6B12S-BQkexw0P.mjs";const M=(e,t,s=()=>{})=>{const n=document.createElement("div");(document.querySelector(t==null?void 0:t.container)||document.body).appendChild(n);const l=new k({el:n,name:"VueDialogHelper",render:a=>a(e,{props:t,on:{close:(...h)=>{s(...h.map(c=>D(c))),l.$destroy()}}})});return l},q='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-folder-move" viewBox="0 0 24 24"><path d="M14,18V15H10V11H14V8L19,13M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z" /></svg>',z='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-folder-multiple" viewBox="0 0 24 24"><path d="M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z" /></svg>';var G=(e=>(e[e.Choose=1]="Choose",e[e.Move=2]="Move",e[e.Copy=3]="Copy",e[e.CopyMove=4]="CopyMove",e[e.Custom=5]="Custom",e))(G||{});class I extends Error{}class O{constructor(t,s,n,l,a,h,c,F,x=!1){i(this,"title");i(this,"multiSelect");i(this,"mimeTypeFilter");i(this,"directoriesAllowed");i(this,"buttons");i(this,"path");i(this,"filter");i(this,"container");i(this,"disabledNavigation");this.title=t,this.multiSelect=s,this.mimeTypeFilter=n,this.directoriesAllowed=l,this.path=h,this.filter=c,this.buttons=a,this.container=F,this.disabledNavigation=x}async pick(){const{FilePickerVue:t}=await P(async()=>{const{FilePickerVue:s}=await import("./index-CqRCpcyw-BsQDTmMm.mjs");return{FilePickerVue:s}},__vite__mapDeps([0,1,2]),import.meta.url);return new Promise((s,n)=>{M(t,{allowPickDirectory:this.directoriesAllowed,buttons:this.buttons,container:this.container,name:this.title,path:this.path,mimetypeFilter:this.mimeTypeFilter,multiselect:this.multiSelect,filterFn:this.filter,disabledNavigation:this.disabledNavigation},(...l)=>{var h;const[a]=l;!Array.isArray(a)||a.length===0?n(new I("FilePicker: No nodes selected")):this.multiSelect?s(a.map(c=>c.path)):s(((h=a[0])==null?void 0:h.path)||"/")})})}}class U{constructor(t){i(this,"title");i(this,"multiSelect",!1);i(this,"mimeTypeFilter",[]);i(this,"directoriesAllowed",!1);i(this,"path");i(this,"filter");i(this,"buttons",[]);i(this,"container");i(this,"disabledNavigation",!1);this.title=t}setContainer(t){return this.container=t,this}setMultiSelect(t){return this.multiSelect=t,this}addMimeTypeFilter(t){return this.mimeTypeFilter.push(t),this}setMimeTypeFilter(t){return this.mimeTypeFilter=t,this}addButton(t){return typeof this.buttons=="function"&&(console.warn("FilePicker buttons were set to factory, now overwritten with button object."),this.buttons=[]),this.buttons.push(t),this}setButtonFactory(t){return this.buttons=t,this}setType(t){return this.buttons=(s,n)=>{var c,F,x;const l=[],a=((F=(c=s==null?void 0:s[0])==null?void 0:c.attributes)==null?void 0:F.displayName)||((x=s==null?void 0:s[0])==null?void 0:x.basename),h=a||S.basename(n);if(t===1){let A=p("Choose");s.length===1?A=p("Choose {file}",{file:a}):this.multiSelect&&(A=j("Choose %n file","Choose %n files",s.length)),l.push({callback:()=>{},type:"primary",label:A})}return(t===4||t===3)&&l.push({callback:()=>{},label:h?p("Copy to {target}",{target:h}):p("Copy"),type:"primary",icon:z}),(t===2||t===4)&&l.push({callback:()=>{},label:h?p("Move to {target}",{target:h}):p("Move"),type:t===2?"primary":"secondary",icon:q}),l},this}allowDirectories(t=!0){return this.directoriesAllowed=t,this}startAt(t){return this.path=t,this}setFilter(t){return this.filter=t,this}disableNavigation(){return this.disabledNavigation=!0,this}build(){return new O(this.title,this.multiSelect,this.mimeTypeFilter,this.directoriesAllowed,this.buttons,this.path,this.filter,this.container,this.disabledNavigation)}}function ot(e){return new U(e)}const J=L({__name:"GenericDialog",props:{name:null,text:null,html:null,buttons:null,severity:null},setup(e){const t=e,s=()=>"".concat(t.name,": ").concat(t.text);return $(()=>window.addEventListener("unload",s)),B(()=>window.removeEventListener("unload",s)),{__sfc:!0,props:t,handleUnload:s,NcDialog:E,NcNoteCard:R}}});var K=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t(s.NcDialog,{attrs:{"dialog-classes":"nc-generic-dialog",buttons:e.buttons,name:e.name,message:e.text},on:{"update:open":function(n){return e.$emit("close")}}},[e.severity?t(s.NcNoteCard,{attrs:{type:e.severity}},[t("p",{domProps:{textContent:e._s(e.text)}})]):e._e(),e.html?t("div",{domProps:{innerHTML:e._s(e.html)}}):e._e()],1)},Q=[],W=Z(J,K,Q,!1,null,null);const X=W.exports;var g,f,C,_,d,y;class Y{constructor(t,s,n=[],l){u(this,g);u(this,f);u(this,C);u(this,_);u(this,d);u(this,y);r(this,g,t),r(this,f,s),r(this,C,n),r(this,_,l),r(this,d,void 0),r(this,y,void 0)}setHTML(t){return r(this,y,t),this}show(){return o(this,d)&&o(this,d).$destroy(),new Promise(t=>{r(this,d,M(X,{buttons:o(this,C),name:o(this,g),text:o(this,f),severity:o(this,_),html:o(this,y)},t))})}hide(){var t;(t=o(this,d))==null||t.$destroy()}}g=new WeakMap,f=new WeakMap,C=new WeakMap,_=new WeakMap,d=new WeakMap,y=new WeakMap;var b,v,w,m;class nt{constructor(){u(this,b);u(this,v);u(this,w);u(this,m);r(this,b,void 0),r(this,v,""),r(this,w,""),r(this,m,[])}setName(t){return r(this,w,t),this}setText(t){return r(this,v,t),this}setSeverity(t){return r(this,b,t),this}setButtons(t){return o(this,m).length>0&&console.warn("[@nextcloud/dialogs] Dialog buttons are already set - this overrides previous buttons."),r(this,m,t),this}addButton(t){return o(this,m).push(t),this}build(){return new Y(o(this,w),o(this,v),o(this,m),o(this,b))}}b=new WeakMap,v=new WeakMap,w=new WeakMap,m=new WeakMap;export{nt as $,G as C,I as M,ot as R,M as u};
