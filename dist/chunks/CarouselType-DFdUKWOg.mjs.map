{"version":3,"file":"CarouselType-DFdUKWOg.mjs","sources":["../../apps/settings/src/components/AppStoreDiscover/CarouselType.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<section :aria-roledescription=\"t('settings', 'Carousel')\" :aria-labelledby=\"headingId ? `${headingId}` : undefined\">\n\t\t<h3 v-if=\"headline\" :id=\"headingId\">\n\t\t\t{{ translatedHeadline }}\n\t\t</h3>\n\t\t<div class=\"app-discover-carousel__wrapper\">\n\t\t\t<div class=\"app-discover-carousel__button-wrapper\">\n\t\t\t\t<NcButton class=\"app-discover-carousel__button app-discover-carousel__button--previous\"\n\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t:aria-label=\"t('settings', 'Previous slide')\"\n\t\t\t\t\t:disabled=\"!hasPrevious\"\n\t\t\t\t\t@click=\"currentIndex -= 1\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiChevronLeft\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\n\t\t\t<Transition :name=\"transitionName\" mode=\"out-in\">\n\t\t\t\t<PostType v-bind=\"shownElement\"\n\t\t\t\t\t:key=\"shownElement.id ?? currentIndex\"\n\t\t\t\t\t:aria-labelledby=\"`${internalId}-tab-${currentIndex}`\"\n\t\t\t\t\t:dom-id=\"`${internalId}-tabpanel-${currentIndex}`\"\n\t\t\t\t\tinline\n\t\t\t\t\trole=\"tabpanel\" />\n\t\t\t</Transition>\n\n\t\t\t<div class=\"app-discover-carousel__button-wrapper\">\n\t\t\t\t<NcButton class=\"app-discover-carousel__button app-discover-carousel__button--next\"\n\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t:aria-label=\"t('settings', 'Next slide')\"\n\t\t\t\t\t:disabled=\"!hasNext\"\n\t\t\t\t\t@click=\"currentIndex += 1\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiChevronRight\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"app-discover-carousel__tabs\" role=\"tablist\" :aria-label=\"t('settings', 'Choose slide to display')\">\n\t\t\t<NcButton v-for=\"index of content.length\"\n\t\t\t\t:id=\"`${internalId}-tab-${index}`\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:aria-label=\"t('settings', '{index} of {total}', { index, total: content.length })\"\n\t\t\t\t:aria-controls=\"`${internalId}-tabpanel-${index}`\"\n\t\t\t\t:aria-selected=\"`${currentIndex === (index - 1)}`\"\n\t\t\t\trole=\"tab\"\n\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t@click=\"currentIndex = index - 1\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path=\"currentIndex === (index - 1) ? mdiCircleSlice8 : mdiCircleOutline\" />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t</div>\n\t</section>\n</template>\n\n<script lang=\"ts\">\nimport type { PropType } from 'vue'\nimport type { IAppDiscoverCarousel } from '../../constants/AppDiscoverTypes.ts'\n\nimport { mdiChevronLeft, mdiChevronRight, mdiCircleOutline, mdiCircleSlice8 } from '@mdi/js'\nimport { translate as t } from '@nextcloud/l10n'\nimport { computed, defineComponent, nextTick, ref, watch } from 'vue'\nimport { commonAppDiscoverProps } from './common.ts'\nimport { useLocalizedValue } from '../../composables/useGetLocalizedValue.ts'\n\nimport NcButton from '@nextcloud/vue/dist/Components/NcButton.js'\nimport NcIconSvgWrapper from '@nextcloud/vue/dist/Components/NcIconSvgWrapper.js'\nimport PostType from './PostType.vue'\n\nexport default defineComponent({\n\tname: 'CarouselType',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tNcIconSvgWrapper,\n\t\tPostType,\n\t},\n\n\tprops: {\n\t\t...commonAppDiscoverProps,\n\n\t\t/**\n\t\t * The content of the carousel\n\t\t */\n\t\tcontent: {\n\t\t\ttype: Array as PropType<IAppDiscoverCarousel['content']>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tsetup(props) {\n\t\tconst translatedHeadline = useLocalizedValue(computed(() => props.headline))\n\n\t\tconst currentIndex = ref(Math.min(1, props.content.length - 1))\n\t\tconst shownElement = ref(props.content[currentIndex.value])\n\t\tconst hasNext = computed(() => currentIndex.value < (props.content.length - 1))\n\t\tconst hasPrevious = computed(() => currentIndex.value > 0)\n\n\t\tconst internalId = computed(() => props.id ?? (Math.random() + 1).toString(36).substring(7))\n\t\tconst headingId = computed(() => `${internalId.value}-h`)\n\n\t\tconst transitionName = ref('slide-in')\n\t\twatch(() => currentIndex.value, (o, n) => {\n\t\t\tif (o < n) {\n\t\t\t\ttransitionName.value = 'slide-in'\n\t\t\t} else {\n\t\t\t\ttransitionName.value = 'slide-out'\n\t\t\t}\n\n\t\t\t// Wait next tick\n\t\t\tnextTick(() => {\n\t\t\t\tshownElement.value = props.content[currentIndex.value]\n\t\t\t})\n\t\t})\n\n\t\treturn {\n\t\t\tt,\n\t\t\tinternalId,\n\t\t\theadingId,\n\n\t\t\thasNext,\n\t\t\thasPrevious,\n\t\t\tcurrentIndex,\n\t\t\tshownElement,\n\n\t\t\ttransitionName,\n\n\t\t\ttranslatedHeadline,\n\n\t\t\tmdiChevronLeft,\n\t\t\tmdiChevronRight,\n\t\t\tmdiCircleOutline,\n\t\t\tmdiCircleSlice8,\n\t\t}\n\t},\n})\n</script>\n\n<style scoped lang=\"scss\">\nh3 {\n\tfont-size: 24px;\n\tfont-weight: 600;\n\tmargin-block: 0 1em;\n}\n\n.app-discover-carousel {\n\t&__wrapper {\n\t\tdisplay: flex;\n\t}\n\n\t&__button {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tposition: absolute;\n\t\ttop: calc(50% - 22px); // 50% minus half of button height\n\n\t\t&-wrapper {\n\t\t\tposition: relative;\n\t\t}\n\n\t\t// See padding of discover section\n\t\t&--next {\n\t\t\tright: -54px;\n\t\t}\n\t\t&--previous {\n\t\t\tleft: -54px;\n\t\t}\n\t}\n\n\t&__tabs {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\n\t\t> * {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n}\n</style>\n\n<style>\n.slide-in-enter-active,\n.slide-in-leave-active,\n.slide-out-enter-active,\n.slide-out-leave-active {\n  transition: all .4s ease-out;\n}\n\n.slide-in-leave-to,\n.slide-out-enter {\n  opacity: 0;\n  transform: translateX(50%);\n}\n\n.slide-in-enter,\n.slide-out-leave-to {\n  opacity: 0;\n  transform: translateX(-50%);\n}\n</style>\n"],"names":["_sfc_main","defineComponent","NcButton","NcIconSvgWrapper","PostType","commonAppDiscoverProps","props","translatedHeadline","useLocalizedValue","computed","currentIndex","ref","shownElement","hasNext","hasPrevious","internalId","_a","headingId","transitionName","watch","o","n","nextTick","t","mdiChevronLeft","mdiChevronRight","mdiCircleOutline","mdiCircleSlice8"],"mappings":";oQA2EA,MAAAA,EAAAC,EAAA,CACA,KAAA,eAEA,WAAA,CAAA,SACAC,EAAA,iBACAC,EACA,SAAAC,CACA,EAEA,MAAA,CACA,GAAAC,EAKA,QAAA,CACA,KAAA,MACA,SAAA,EACA,CACA,EAEA,MAAAC,EAAA,CACA,MAAAC,EAAAC,EAAAC,EAAA,IAAAH,EAAA,QAAA,CAAA,EAEAI,EAAAC,EAAA,KAAA,IAAA,EAAAL,EAAA,QAAA,OAAA,CAAA,CAAA,EACAM,EAAAD,EAAAL,EAAA,QAAAI,EAAA,KAAA,CAAA,EACAG,EAAAJ,EAAA,IAAAC,EAAA,MAAAJ,EAAA,QAAA,OAAA,CAAA,EACAQ,EAAAL,EAAA,IAAAC,EAAA,MAAA,CAAA,EAEAK,EAAAN,EAAA,IAAA,OAAA,OAAAO,EAAAV,EAAA,KAAA,KAAAU,GAAA,KAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,UAAA,CAAA,CAAA,CAAA,EACAC,EAAAR,EAAA,IAAA,GAAA,OAAAM,EAAA,MAAA,IAAA,CAAA,EAEAG,EAAAP,EAAA,UAAA,EACA,OAAAQ,EAAA,IAAAT,EAAA,MAAA,CAAAU,EAAAC,IAAA,CACAD,EAAAC,EACAH,EAAA,MAAA,WAEAA,EAAA,MAAA,YAIAI,EAAA,IAAA,CACAV,EAAA,MAAAN,EAAA,QAAAI,EAAA,KAAA,CAAA,CACA,CAAA,CACA,EAEA,CAAA,EACAa,EACA,WAAAR,EACA,UAAAE,EAEA,QAAAJ,EACA,YAAAC,EACA,aAAAJ,EACA,aAAAE,EAEA,eAAAM,EAEA,mBAAAX,EAEA,eAAAiB,EACA,gBAAAC,EACA,iBAAAC,EACA,gBAAAC,CAAA,CAEA,CACA,CAAA"}