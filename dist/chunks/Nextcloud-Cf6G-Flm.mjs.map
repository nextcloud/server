{"version":3,"mappings":"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","names":["L10n","loadTranslations","register","unregister","translate","translatePlural","Handlebars","app","text","VERSION","root","global","ArrayProto","ObjProto","SymbolProto","push","slice","toString","hasOwnProperty","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","_isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","func","startIndex","length","rest","index","args","isObject","obj","type","isNull","isUndefined","isBoolean","isElement","tagTester","name","tag","isString","isNumber","isDate","isRegExp","isError","isSymbol","isArrayBuffer","isFunction","nodelist","isFunction$1","hasObjectTag","hasStringTagBug","isIE11","isDataView","ie10IsDataView","isDataView$1","isArray","has","key","isArguments","isArguments$1","isFinite","isNaN","constant","value","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","getByteLength","isBufferLike","typedArrayPattern","isTypedArray","isTypedArray$1","getLength","emulatedSet","keys","hash","l","i","collectNonEnumProps","nonEnumIdx","constructor","proto","prop","isEmpty","isMatch","object","attrs","_keys","_","toBufferView","bufferSource","tagDataView","eq","a","b","aStack","bStack","deepEq","className","areArrays","byteLength","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","hasName","commonInit","mapTail","mapMethods","setMethods","isMap","isWeakMap","isSet","isWeakSet","values","pairs","invert","result","functions","names","createAssigner","keysFunc","defaults","source","extend","extendOwn","ctor","baseCreate","prototype","Ctor","create","props","clone","tap","interceptor","toPath","path","deepGet","get","defaultValue","_has","identity","matcher","property","optimizeCb","context","argCount","accumulator","baseIteratee","iteratee","cb","mapObject","results","currentKey","noop","propertyOf","times","n","accum","random","min","max","now","createEscaper","map","escaper","match","testRegexp","replaceRegexp","string","escapeMap","escape","unescapeMap","unescape","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","settings","oldSettings","interpolate","evaluate","offset","argument","render","e","data","fallback","idCounter","uniqueId","prefix","id","chain","instance","executeBound","sourceFunc","boundFunc","callingContext","self","partial","boundArgs","placeholder","bound","position","bind","callArgs","isArrayLike","flatten","input","depth","strict","output","idx","j","len","bindAll","memoize","hasher","cache","address","delay","wait","defer","throttle","options","timeout","previous","later","throttled","_now","remaining","debounce","immediate","passed","debounced","_args","wrap","wrapper","negate","predicate","compose","start","after","before","memo","once","findKey","createPredicateIndexFinder","dir","array","findIndex","findLastIndex","sortedIndex","low","high","mid","createIndexFinder","predicateFind","item","indexOf","lastIndexOf","find","keyFinder","findWhere","each","createReduce","reducer","initial","reduce","reduceRight","filter","list","reject","every","some","contains","fromIndex","guard","invoke","contextPath","method","pluck","where","lastComputed","computed","v","reStrSymbol","toArray","sample","last","rand","temp","shuffle","sortBy","left","right","group","behavior","partition","groupBy","indexBy","countBy","pass","size","keyInObj","pick","omit","first","compact","_flatten","difference","without","otherArrays","uniq","isSorted","seen","union","arrays","intersection","argsLength","unzip","zip","range","stop","step","chunk","count","chainResult","mixin","allExports","Notification","callback","$row","$","html","TOAST_PERMANENT_TIMEOUT","toast","showMessage","escapeHTML","TOAST_DEFAULT_TIMEOUT","ajaxConnectionLostHandler","processAjaxError","xhr","OC","timer","seconds","interval","registerXHRForErrorProcessing","loadCallback","errorCallback","dynamicSlideToggleEnabled","Apps","$el","registerAppsSlideToggle","buttons","event","button","areaSelector","area","hideArea","showArea","closest","call","endpoint","generateOcsUrl","getApps","getKeys","getValue","setValue","deleteKey","appConfig","AppConfig","appswebroots","factory","require$$0","require$$1","exports","Backbone","previousBackbone","Events","eventSplitter","_listening","eventsApi","events","opts","onApi","listeners","listeningTo","listening","Listening","error","tryCatchOn","handlers","ctx","offApi","ids","handler","onceMap","offer","triggerApi","objEvents","allEvents","triggerEvents","ev","a1","a2","a3","listener","cleanup","Model","attributes","attr","val","unset","silent","changes","changing","current","changed","prev","prevId","diff","old","hasChanged","model","success","resp","serverAttrs","wrapError","destroy","base","urlError","Collection","models","setOptions","addOptions","splice","insert","at","tail","singular","removed","set","toAdd","toMerge","toRemove","modelMap","add","merge","remove","sort","sortable","sortAttr","existing","orderChanged","replace","m","comparator","callbackOpts","idAttribute","CollectionIterator","ITERATOR_VALUES","ITERATOR_KEYS","ITERATOR_KEYSVALUES","$$iterator","kind","View","viewOptions","delegateEventSplitter","selector","element","el","eventName","tagName","addMethod","attribute","defaultVal","addUnderscoreMethods","Class","modelMatcher","collectionMethods","modelMethods","config","Base","mappings","methodMap","params","beforeSend","textStatus","errorThrown","Router","optionalParam","namedParam","splatParam","route","router","fragment","routes","optional","param","History","routeStripper","rootStripper","pathStripper","rootPath","window","body","iWindow","addEventListener","removeEventListener","url","decodedFragment","location","href","protoProps","staticProps","parent","child","dav","s","ch","properties","headers","namespace","ii","propName","propValue","responseType","fulfill","resultBody","propNode","content","subNodes","node","xmlBody","parser","doc","resolver","foo","responseIterator","responseNode","response","propStatIterator","propStatNode","propStat","propIterator","baseParts","parts","propertyName","client","parsePropFindResult","davProperties","subResult","propKey","parseIdFromLocation","queryPos","isSuccessStatus","status","convertModelAttributesToDavProperties","changedProp","callPropFind","propsMapping","callPropPatch","callMkCol","callMethod","responseJson","locationHeader","davCall","davSync","isCollection","VendorBackbone","parse","queryString","pos","components","part","build","coreApps","menuSpeed","PERMISSION_NONE","PERMISSION_CREATE","PERMISSION_READ","PERMISSION_UPDATE","PERMISSION_DELETE","PERMISSION_SHARE","PERMISSION_ALL","TAG_FAVORITE","rawUid","displayName","currentUser","getCurrentUser","Dialogs","title","modal","DialogBuilder","t","password","resolve","spawnDialog","defineAsyncComponent","__vitePreload","multiselect","mimetype","_modal","FilePickerType","legacyCallback","fn","getPath","nodes","nodeToLegacyFile","builder","getFilePickerBuilder","target","basename","IconCopy","IconMove","dialogType","allowHtml","dialog","buttonList","original","replacement","controller","dialogDeferred","getCroppedPreview","file","deferred","reader","blob","originalUrl","image","crop","img","canvas","targetSize","width","height","x","y","resampleHermite","W","H","W2","H2","img2","data2","ratio_w","ratio_h","ratio_w_half","ratio_h_half","x2","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","center_y","yy","dy","center_x","w0","xx","dx","w","addConflict","$conflicts","$conflict","$originalDiv","$replacementDiv","urlSpec","previewpath","checkboxId","dialogName","dialogId","$tmpl","$dlg","buttonlist","$primaryButton","updatePrimaryButton","checkedCount","$checkboxes","$checkbox","tmpl","OCEventSource","src","dataStr","joinChar","getToken","iframeId","namespaces","getCapabilities","realGetCapabilities","getProtocol","getHost","getHostName","getPort","currentMenu","currentMenuToggle","registerMenu","$toggle","$menuEl","toggle","headerMenu","isClickableElement","hideMenus","unregisterMenu","complete","lastMenu","showMenu","isAdmin","isUserAdmin","linkToRemoteBase","service","realGetRootUrl","msg","message","PasswordConfirmation","isPasswordConfirmationRequired","rejectCallback","confirmPassword","Plugins","targetName","plugin","plugins","targetObject","theme","strParams","patterns","pattern","query","chunkify","tz","c","Util","humanFileSize","bytes","bytesArray","matches","timestamp","format","moment","inner","outer","w1","w2","date","aa","bb","aNum","bNum","internalCallback","cookies","cookie","debug","redirect","targetURL","reload","webroot","webroot$1","OC$1","Config","EventSource","L10N","encodePath","dirname","isSamePath","joinPaths","getCanonicalLocale","getLocale","getLanguage","buildQueryString","parseQueryString","generateFilePath","generateUrl","getRootUrl","imagePath","getRequestToken","linkTo","version","generateRemoteUrl","subscribe","Nextcloud"],"ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,166,167],"sources":["../../core/src/OC/l10n.js","../../node_modules/underscore/modules/_setup.js","../../node_modules/underscore/modules/restArguments.js","../../node_modules/underscore/modules/isObject.js","../../node_modules/underscore/modules/isNull.js","../../node_modules/underscore/modules/isUndefined.js","../../node_modules/underscore/modules/isBoolean.js","../../node_modules/underscore/modules/isElement.js","../../node_modules/underscore/modules/_tagTester.js","../../node_modules/underscore/modules/isString.js","../../node_modules/underscore/modules/isNumber.js","../../node_modules/underscore/modules/isDate.js","../../node_modules/underscore/modules/isRegExp.js","../../node_modules/underscore/modules/isError.js","../../node_modules/underscore/modules/isSymbol.js","../../node_modules/underscore/modules/isArrayBuffer.js","../../node_modules/underscore/modules/isFunction.js","../../node_modules/underscore/modules/_hasObjectTag.js","../../node_modules/underscore/modules/_stringTagBug.js","../../node_modules/underscore/modules/isDataView.js","../../node_modules/underscore/modules/isArray.js","../../node_modules/underscore/modules/_has.js","../../node_modules/underscore/modules/isArguments.js","../../node_modules/underscore/modules/isFinite.js","../../node_modules/underscore/modules/isNaN.js","../../node_modules/underscore/modules/constant.js","../../node_modules/underscore/modules/_createSizePropertyCheck.js","../../node_modules/underscore/modules/_shallowProperty.js","../../node_modules/underscore/modules/_getByteLength.js","../../node_modules/underscore/modules/_isBufferLike.js","../../node_modules/underscore/modules/isTypedArray.js","../../node_modules/underscore/modules/_getLength.js","../../node_modules/underscore/modules/_collectNonEnumProps.js","../../node_modules/underscore/modules/keys.js","../../node_modules/underscore/modules/isEmpty.js","../../node_modules/underscore/modules/isMatch.js","../../node_modules/underscore/modules/underscore.js","../../node_modules/underscore/modules/_toBufferView.js","../../node_modules/underscore/modules/isEqual.js","../../node_modules/underscore/modules/allKeys.js","../../node_modules/underscore/modules/_methodFingerprint.js","../../node_modules/underscore/modules/isMap.js","../../node_modules/underscore/modules/isWeakMap.js","../../node_modules/underscore/modules/isSet.js","../../node_modules/underscore/modules/isWeakSet.js","../../node_modules/underscore/modules/values.js","../../node_modules/underscore/modules/pairs.js","../../node_modules/underscore/modules/invert.js","../../node_modules/underscore/modules/functions.js","../../node_modules/underscore/modules/_createAssigner.js","../../node_modules/underscore/modules/extend.js","../../node_modules/underscore/modules/extendOwn.js","../../node_modules/underscore/modules/defaults.js","../../node_modules/underscore/modules/_baseCreate.js","../../node_modules/underscore/modules/create.js","../../node_modules/underscore/modules/clone.js","../../node_modules/underscore/modules/tap.js","../../node_modules/underscore/modules/toPath.js","../../node_modules/underscore/modules/_toPath.js","../../node_modules/underscore/modules/_deepGet.js","../../node_modules/underscore/modules/get.js","../../node_modules/underscore/modules/has.js","../../node_modules/underscore/modules/identity.js","../../node_modules/underscore/modules/matcher.js","../../node_modules/underscore/modules/property.js","../../node_modules/underscore/modules/_optimizeCb.js","../../node_modules/underscore/modules/_baseIteratee.js","../../node_modules/underscore/modules/iteratee.js","../../node_modules/underscore/modules/_cb.js","../../node_modules/underscore/modules/mapObject.js","../../node_modules/underscore/modules/noop.js","../../node_modules/underscore/modules/propertyOf.js","../../node_modules/underscore/modules/times.js","../../node_modules/underscore/modules/random.js","../../node_modules/underscore/modules/now.js","../../node_modules/underscore/modules/_createEscaper.js","../../node_modules/underscore/modules/_escapeMap.js","../../node_modules/underscore/modules/escape.js","../../node_modules/underscore/modules/_unescapeMap.js","../../node_modules/underscore/modules/unescape.js","../../node_modules/underscore/modules/templateSettings.js","../../node_modules/underscore/modules/template.js","../../node_modules/underscore/modules/result.js","../../node_modules/underscore/modules/uniqueId.js","../../node_modules/underscore/modules/chain.js","../../node_modules/underscore/modules/_executeBound.js","../../node_modules/underscore/modules/partial.js","../../node_modules/underscore/modules/bind.js","../../node_modules/underscore/modules/_isArrayLike.js","../../node_modules/underscore/modules/_flatten.js","../../node_modules/underscore/modules/bindAll.js","../../node_modules/underscore/modules/memoize.js","../../node_modules/underscore/modules/delay.js","../../node_modules/underscore/modules/defer.js","../../node_modules/underscore/modules/throttle.js","../../node_modules/underscore/modules/debounce.js","../../node_modules/underscore/modules/wrap.js","../../node_modules/underscore/modules/negate.js","../../node_modules/underscore/modules/compose.js","../../node_modules/underscore/modules/after.js","../../node_modules/underscore/modules/before.js","../../node_modules/underscore/modules/once.js","../../node_modules/underscore/modules/findKey.js","../../node_modules/underscore/modules/_createPredicateIndexFinder.js","../../node_modules/underscore/modules/findIndex.js","../../node_modules/underscore/modules/findLastIndex.js","../../node_modules/underscore/modules/sortedIndex.js","../../node_modules/underscore/modules/_createIndexFinder.js","../../node_modules/underscore/modules/indexOf.js","../../node_modules/underscore/modules/lastIndexOf.js","../../node_modules/underscore/modules/find.js","../../node_modules/underscore/modules/findWhere.js","../../node_modules/underscore/modules/each.js","../../node_modules/underscore/modules/map.js","../../node_modules/underscore/modules/_createReduce.js","../../node_modules/underscore/modules/reduce.js","../../node_modules/underscore/modules/reduceRight.js","../../node_modules/underscore/modules/filter.js","../../node_modules/underscore/modules/reject.js","../../node_modules/underscore/modules/every.js","../../node_modules/underscore/modules/some.js","../../node_modules/underscore/modules/contains.js","../../node_modules/underscore/modules/invoke.js","../../node_modules/underscore/modules/pluck.js","../../node_modules/underscore/modules/where.js","../../node_modules/underscore/modules/max.js","../../node_modules/underscore/modules/min.js","../../node_modules/underscore/modules/toArray.js","../../node_modules/underscore/modules/sample.js","../../node_modules/underscore/modules/shuffle.js","../../node_modules/underscore/modules/sortBy.js","../../node_modules/underscore/modules/_group.js","../../node_modules/underscore/modules/groupBy.js","../../node_modules/underscore/modules/indexBy.js","../../node_modules/underscore/modules/countBy.js","../../node_modules/underscore/modules/partition.js","../../node_modules/underscore/modules/size.js","../../node_modules/underscore/modules/_keyInObj.js","../../node_modules/underscore/modules/pick.js","../../node_modules/underscore/modules/omit.js","../../node_modules/underscore/modules/initial.js","../../node_modules/underscore/modules/first.js","../../node_modules/underscore/modules/rest.js","../../node_modules/underscore/modules/last.js","../../node_modules/underscore/modules/compact.js","../../node_modules/underscore/modules/flatten.js","../../node_modules/underscore/modules/difference.js","../../node_modules/underscore/modules/without.js","../../node_modules/underscore/modules/uniq.js","../../node_modules/underscore/modules/union.js","../../node_modules/underscore/modules/intersection.js","../../node_modules/underscore/modules/unzip.js","../../node_modules/underscore/modules/zip.js","../../node_modules/underscore/modules/object.js","../../node_modules/underscore/modules/range.js","../../node_modules/underscore/modules/chunk.js","../../node_modules/underscore/modules/_chainResult.js","../../node_modules/underscore/modules/mixin.js","../../node_modules/underscore/modules/underscore-array-methods.js","../../node_modules/underscore/modules/index-default.js","../../core/src/OC/notification.js","../../core/src/OC/xhr-error.js","../../core/src/OC/apps.js","../../core/src/OCP/appconfig.js","../../core/src/OC/appconfig.js","../../core/src/OC/appswebroots.js","../../node_modules/backbone/backbone.js","../../node_modules/davclient.js/lib/client.js","../../core/src/OC/backbone-webdav.js","../../core/src/OC/backbone.js","../../core/src/OC/query-string.js","../../core/src/OC/config.js","../../core/src/OC/constants.js","../../core/src/OC/currentuser.js","../../core/src/OC/dialogs.js","../../core/src/OC/eventsource.js","../../core/src/OC/get_set.js","../../core/src/OC/capabilities.js","../../core/src/OC/host.js","../../core/src/OC/menu.js","../../core/src/OC/admin.js","../../core/src/OC/routing.js","../../core/src/OC/msg.js","../../core/src/OC/password-confirmation.js","../../core/src/OC/plugins.js","../../core/src/OC/theme.js","../../core/src/OC/util-history.js","../../core/src/OC/util.js","../../core/src/OC/debug.js","../../core/src/OC/navigation.js","../../core/src/OC/webroot.js","../../core/src/OC/index.js","../../core/src/mixins/Nextcloud.js"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2017 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2014 ownCloud, Inc.\n * SPDX-FileCopyrightText: 2005-2010 Zend Technologies USA Inc. (http://www.zend.com)\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Handlebars from 'handlebars'\nimport {\n\tloadTranslations,\n\ttranslate,\n\ttranslatePlural,\n\tregister,\n\tunregister,\n} from '@nextcloud/l10n'\n\n/**\n * L10N namespace with localization functions.\n *\n * @namespace OC.L10n\n * @deprecated 26.0.0 use https://www.npmjs.com/package/@nextcloud/l10n\n */\nconst L10n = {\n\n\t/**\n\t * Load an app's translation bundle if not loaded already.\n\t *\n\t * @deprecated 26.0.0 use `loadTranslations` from https://www.npmjs.com/package/@nextcloud/l10n\n\t *\n\t * @param {string} appName name of the app\n\t * @param {Function} callback callback to be called when\n\t * the translations are loaded\n\t * @return {Promise} promise\n\t */\n\tload: loadTranslations,\n\n\t/**\n\t * Register an app's translation bundle.\n\t *\n\t * @deprecated 26.0.0 use `register` from https://www.npmjs.com/package/@nextcloud/l10\n\t *\n\t * @param {string} appName name of the app\n\t * @param {Object<string, string>} bundle bundle\n\t */\n\tregister,\n\n\t/**\n\t * @private\n\t * @deprecated 26.0.0 use `unregister` from https://www.npmjs.com/package/@nextcloud/l10n\n\t */\n\t_unregister: unregister,\n\n\t/**\n\t * Translate a string\n\t *\n\t * @deprecated 26.0.0 use `translate` from https://www.npmjs.com/package/@nextcloud/l10n\n\t *\n\t * @param {string} app the id of the app for which to translate the string\n\t * @param {string} text the string to translate\n\t * @param {object} [vars] map of placeholder key to value\n\t * @param {number} [count] number to replace %n with\n\t * @param {Array} [options] options array\n\t * @param {boolean} [options.escape=true] enable/disable auto escape of placeholders (by default enabled)\n\t * @param {boolean} [options.sanitize=true] enable/disable sanitization (by default enabled)\n\t * @return {string}\n\t */\n\ttranslate,\n\n\t/**\n\t * Translate a plural string\n\t *\n\t * @deprecated 26.0.0 use `translatePlural` from https://www.npmjs.com/package/@nextcloud/l10n\n\t *\n\t * @param {string} app the id of the app for which to translate the string\n\t * @param {string} textSingular the string to translate for exactly one object\n\t * @param {string} textPlural the string to translate for n objects\n\t * @param {number} count number to determine whether to use singular or plural\n\t * @param {object} [vars] map of placeholder key to value\n\t * @param {Array} [options] options array\n\t * @param {boolean} [options.escape=true] enable/disable auto escape of placeholders (by default enabled)\n\t * @return {string} Translated string\n\t */\n\ttranslatePlural,\n}\n\nexport default L10n\n\nHandlebars.registerHelper('t', function(app, text) {\n\treturn translate(app, text)\n})\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the functions\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that objects\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because were not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result  either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/FisherYates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport _ from 'underscore'\n/** @typedef {import('jquery')} jQuery */\nimport $ from 'jquery'\nimport { showMessage, TOAST_DEFAULT_TIMEOUT, TOAST_PERMANENT_TIMEOUT } from '@nextcloud/dialogs'\n\n/**\n * @todo Write documentation\n * @deprecated 17.0.0 use the `@nextcloud/dialogs` package instead\n * @namespace OC.Notification\n */\nexport default {\n\n\tupdatableNotification: null,\n\n\tgetDefaultNotificationFunction: null,\n\n\t/**\n\t * @param {Function} callback callback function\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tsetDefault(callback) {\n\t\tthis.getDefaultNotificationFunction = callback\n\t},\n\n\t/**\n\t * Hides a notification.\n\t *\n\t * If a row is given, only hide that one.\n\t * If no row is given, hide all notifications.\n\t *\n\t * @param {jQuery} [$row] notification row\n\t * @param {Function} [callback] callback\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\thide($row, callback) {\n\t\tif (_.isFunction($row)) {\n\t\t\t// first arg is the callback\n\t\t\tcallback = $row\n\t\t\t$row = undefined\n\t\t}\n\n\t\tif (!$row) {\n\t\t\tconsole.error('Missing argument $row in OC.Notification.hide() call, caller needs to be adjusted to only dismiss its own notification')\n\t\t\treturn\n\t\t}\n\n\t\t// remove the row directly\n\t\t$row.each(function() {\n\t\t\tif ($(this)[0].toastify) {\n\t\t\t\t$(this)[0].toastify.hideToast()\n\t\t\t} else {\n\t\t\t\tconsole.error('cannot hide toast because object is not set')\n\t\t\t}\n\t\t\tif (this === this.updatableNotification) {\n\t\t\t\tthis.updatableNotification = null\n\t\t\t}\n\t\t})\n\t\tif (callback) {\n\t\t\tcallback.call()\n\t\t}\n\t\tif (this.getDefaultNotificationFunction) {\n\t\t\tthis.getDefaultNotificationFunction()\n\t\t}\n\t},\n\n\t/**\n\t * Shows a notification as HTML without being sanitized before.\n\t * If you pass unsanitized user input this may lead to a XSS vulnerability.\n\t * Consider using show() instead of showHTML()\n\t *\n\t * @param {string} html Message to display\n\t * @param {object} [options] options\n\t * @param {string} [options.type] notification type\n\t * @param {number} [options.timeout=0] timeout value, defaults to 0 (permanent)\n\t * @return {jQuery} jQuery element for notification row\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tshowHtml(html, options) {\n\t\toptions = options || {}\n\t\toptions.isHTML = true\n\t\toptions.timeout = (!options.timeout) ? TOAST_PERMANENT_TIMEOUT : options.timeout\n\t\tconst toast = showMessage(html, options)\n\t\ttoast.toastElement.toastify = toast\n\t\treturn $(toast.toastElement)\n\t},\n\n\t/**\n\t * Shows a sanitized notification\n\t *\n\t * @param {string} text Message to display\n\t * @param {object} [options] options\n\t * @param {string} [options.type] notification type\n\t * @param {number} [options.timeout=0] timeout value, defaults to 0 (permanent)\n\t * @return {jQuery} jQuery element for notification row\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tshow(text, options) {\n\t\tconst escapeHTML = function(text) {\n\t\t\treturn text.toString()\n\t\t\t\t.split('&').join('&amp;')\n\t\t\t\t.split('<').join('&lt;')\n\t\t\t\t.split('>').join('&gt;')\n\t\t\t\t.split('\"').join('&quot;')\n\t\t\t\t.split('\\'').join('&#039;')\n\t\t}\n\n\t\toptions = options || {}\n\t\toptions.timeout = (!options.timeout) ? TOAST_PERMANENT_TIMEOUT : options.timeout\n\t\tconst toast = showMessage(escapeHTML(text), options)\n\t\ttoast.toastElement.toastify = toast\n\t\treturn $(toast.toastElement)\n\t},\n\n\t/**\n\t * Updates (replaces) a sanitized notification.\n\t *\n\t * @param {string} text Message to display\n\t * @return {jQuery} JQuery element for notificaiton row\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tshowUpdate(text) {\n\t\tif (this.updatableNotification) {\n\t\t\tthis.updatableNotification.hideToast()\n\t\t}\n\t\tthis.updatableNotification = showMessage(text, { timeout: TOAST_PERMANENT_TIMEOUT })\n\t\tthis.updatableNotification.toastElement.toastify = this.updatableNotification\n\t\treturn $(this.updatableNotification.toastElement)\n\t},\n\n\t/**\n\t * Shows a notification that disappears after x seconds, default is\n\t * 7 seconds\n\t *\n\t * @param {string} text Message to show\n\t * @param {Array} [options] options array\n\t * @param {number} [options.timeout=7] timeout in seconds, if this is 0 it will show the message permanently\n\t * @param {boolean} [options.isHTML=false] an indicator for HTML notifications (true) or text (false)\n\t * @param {string} [options.type] notification type\n\t * @return {JQuery} the toast element\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tshowTemporary(text, options) {\n\t\toptions = options || {}\n\t\toptions.timeout = options.timeout || TOAST_DEFAULT_TIMEOUT\n\t\tconst toast = showMessage(text, options)\n\t\ttoast.toastElement.toastify = toast\n\t\treturn $(toast.toastElement)\n\t},\n\n\t/**\n\t * Returns whether a notification is hidden.\n\t *\n\t * @return {boolean}\n\t * @deprecated 17.0.0 use the `@nextcloud/dialogs` package\n\t */\n\tisHidden() {\n\t\treturn !$('#content').find('.toastify').length\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport _ from 'underscore'\nimport $ from 'jquery'\n\nimport OC from './index.js'\nimport Notification from './notification.js'\n\n/**\n * Warn users that the connection to the server was lost temporarily\n *\n * This function is throttled to prevent stacked notfications.\n * After 7sec the first notification is gone, then we can show another one\n * if necessary.\n */\nexport const ajaxConnectionLostHandler = _.throttle(() => {\n\tNotification.showTemporary(t('core', 'Connection to server lost'))\n}, 7 * 1000, { trailing: false })\n\n/**\n * Process ajax error, redirects to main page\n * if an error/auth error status was returned.\n *\n * @param {XMLHttpRequest} xhr xhr request\n */\nexport const processAjaxError = xhr => {\n\t// purposefully aborted request ?\n\t// OC._userIsNavigatingAway needed to distinguish ajax calls cancelled by navigating away\n\t// from calls cancelled by failed cross-domain ajax due to SSO redirect\n\tif (xhr.status === 0 && (xhr.statusText === 'abort' || xhr.statusText === 'timeout' || OC._reloadCalled)) {\n\t\treturn\n\t}\n\n\tif (_.contains([302, 303, 307, 401], xhr.status) && OC.currentUser) {\n\t\t// sometimes \"beforeunload\" happens later, so need to defer the reload a bit\n\t\tsetTimeout(function() {\n\t\t\tif (!OC._userIsNavigatingAway && !OC._reloadCalled) {\n\t\t\t\tlet timer = 0\n\t\t\t\tconst seconds = 5\n\t\t\t\tconst interval = setInterval(function() {\n\t\t\t\t\tNotification.showUpdate(n('core', 'Problem loading page, reloading in %n second', 'Problem loading page, reloading in %n seconds', seconds - timer))\n\t\t\t\t\tif (timer >= seconds) {\n\t\t\t\t\t\tclearInterval(interval)\n\t\t\t\t\t\tOC.reload()\n\t\t\t\t\t}\n\t\t\t\t\ttimer++\n\t\t\t\t}, 1000 // 1 second interval\n\t\t\t\t)\n\n\t\t\t\t// only call reload once\n\t\t\t\tOC._reloadCalled = true\n\t\t\t}\n\t\t}, 100)\n\t} else if (xhr.status === 0) {\n\t\t// Connection lost (e.g. WiFi disconnected or server is down)\n\t\tsetTimeout(function() {\n\t\t\tif (!OC._userIsNavigatingAway && !OC._reloadCalled) {\n\t\t\t\t// TODO: call method above directly\n\t\t\t\tOC._ajaxConnectionLostHandler()\n\t\t\t}\n\t\t}, 100)\n\t}\n}\n\n/**\n * Registers XmlHttpRequest object for global error processing.\n *\n * This means that if this XHR object returns 401 or session timeout errors,\n * the current page will automatically be reloaded.\n *\n * @param {XMLHttpRequest} xhr xhr request\n */\nexport const registerXHRForErrorProcessing = xhr => {\n\tconst loadCallback = () => {\n\t\tif (xhr.readyState !== 4) {\n\t\t\treturn\n\t\t}\n\n\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\n\t\t\treturn\n\t\t}\n\n\t\t// fire jquery global ajax error handler\n\t\t$(document).trigger(new $.Event('ajaxError'), xhr)\n\t}\n\n\tconst errorCallback = () => {\n\t\t// fire jquery global ajax error handler\n\t\t$(document).trigger(new $.Event('ajaxError'), xhr)\n\t}\n\n\tif (xhr.addEventListener) {\n\t\txhr.addEventListener('load', loadCallback)\n\t\txhr.addEventListener('error', errorCallback)\n\t}\n\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2014 ownCloud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport $ from 'jquery'\n\nlet dynamicSlideToggleEnabled = false\n\nconst Apps = {\n\tenableDynamicSlideToggle() {\n\t\tdynamicSlideToggleEnabled = true\n\t},\n}\n\n/**\n * Shows the #app-sidebar and add .with-app-sidebar to subsequent siblings\n *\n * @param {object} [$el] sidebar element to show, defaults to $('#app-sidebar')\n */\nApps.showAppSidebar = function($el) {\n\tconst $appSidebar = $el || $('#app-sidebar')\n\t$appSidebar.removeClass('disappear').show()\n\t$('#app-content').trigger(new $.Event('appresized'))\n}\n\n/**\n * Shows the #app-sidebar and removes .with-app-sidebar from subsequent\n * siblings\n *\n * @param {object} [$el] sidebar element to hide, defaults to $('#app-sidebar')\n */\nApps.hideAppSidebar = function($el) {\n\tconst $appSidebar = $el || $('#app-sidebar')\n\t$appSidebar.hide().addClass('disappear')\n\t$('#app-content').trigger(new $.Event('appresized'))\n}\n\n/**\n * Provides a way to slide down a target area through a button and slide it\n * up if the user clicks somewhere else. Used for the news app settings and\n * add new field.\n *\n * Usage:\n * <button data-apps-slide-toggle=\".slide-area\">slide</button>\n * <div class=\".slide-area\" class=\"hidden\">I'm sliding up</div>\n */\nexport const registerAppsSlideToggle = () => {\n\tlet buttons = $('[data-apps-slide-toggle]')\n\n\tif (buttons.length === 0) {\n\t\t$('#app-navigation').addClass('without-app-settings')\n\t}\n\n\t$(document).click(function(event) {\n\n\t\tif (dynamicSlideToggleEnabled) {\n\t\t\tbuttons = $('[data-apps-slide-toggle]')\n\t\t}\n\n\t\tbuttons.each(function(index, button) {\n\n\t\t\tconst areaSelector = $(button).data('apps-slide-toggle')\n\t\t\tconst area = $(areaSelector)\n\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tfunction hideArea() {\n\t\t\t\tarea.slideUp(OC.menuSpeed * 4, function() {\n\t\t\t\t\tarea.trigger(new $.Event('hide'))\n\t\t\t\t})\n\t\t\t\tarea.removeClass('opened')\n\t\t\t\t$(button).removeClass('opened')\n\t\t\t\t$(button).attr('aria-expanded', 'false')\n\t\t\t}\n\n\t\t\t/**\n\t\t\t *\n\t\t\t */\n\t\t\tfunction showArea() {\n\t\t\t\tarea.slideDown(OC.menuSpeed * 4, function() {\n\t\t\t\t\tarea.trigger(new $.Event('show'))\n\t\t\t\t})\n\t\t\t\tarea.addClass('opened')\n\t\t\t\t$(button).addClass('opened')\n\t\t\t\t$(button).attr('aria-expanded', 'true')\n\t\t\t\tconst input = $(areaSelector + ' [autofocus]')\n\t\t\t\tif (input.length === 1) {\n\t\t\t\t\tinput.focus()\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// do nothing if the area is animated\n\t\t\tif (!area.is(':animated')) {\n\n\t\t\t\t// button toggles the area\n\t\t\t\tif ($(button).is($(event.target).closest('[data-apps-slide-toggle]'))) {\n\t\t\t\t\tif (area.is(':visible')) {\n\t\t\t\t\t\thideArea()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowArea()\n\t\t\t\t\t}\n\n\t\t\t\t\t// all other areas that have not been clicked but are open\n\t\t\t\t\t// should be slid up\n\t\t\t\t} else {\n\t\t\t\t\tconst closest = $(event.target).closest(areaSelector)\n\t\t\t\t\tif (area.is(':visible') && closest[0] !== area[0]) {\n\t\t\t\t\t\thideArea()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t})\n}\n\nexport default Apps\n","/**\n * SPDX-FileCopyrightText: 2016 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2016 ownCloud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport $ from 'jquery'\nimport { generateOcsUrl } from '@nextcloud/router'\n\nimport OC from '../OC/index.js'\n\n/**\n * @param {string} method 'post' or 'delete'\n * @param {string} endpoint endpoint\n * @param {object} [options] destructuring object\n * @param {object} [options.data] option data\n * @param {Function} [options.success] success callback\n * @param {Function} [options.error] error callback\n */\nfunction call(method, endpoint, options) {\n\tif ((method === 'post' || method === 'delete') && OC.PasswordConfirmation.requiresPasswordConfirmation()) {\n\t\tOC.PasswordConfirmation.requirePasswordConfirmation(_.bind(call, this, method, endpoint, options))\n\t\treturn\n\t}\n\n\toptions = options || {}\n\t$.ajax({\n\t\ttype: method.toUpperCase(),\n\t\turl: generateOcsUrl('apps/provisioning_api/api/v1/config/apps') + endpoint,\n\t\tdata: options.data || {},\n\t\tsuccess: options.success,\n\t\terror: options.error,\n\t})\n}\n\n/**\n * @param {object} [options] destructuring object\n * @param {Function} [options.success] success callback\n * @since 11.0.0\n */\nexport function getApps(options) {\n\tcall('get', '', options)\n}\n\n/**\n * @param {string} app app id\n * @param {object} [options] destructuring object\n * @param {Function} [options.success] success callback\n * @param {Function} [options.error] error callback\n * @since 11.0.0\n */\nexport function getKeys(app, options) {\n\tcall('get', '/' + app, options)\n}\n\n/**\n * @param {string} app app id\n * @param {string} key key\n * @param {string | Function} defaultValue default value\n * @param {object} [options] destructuring object\n * @param {Function} [options.success] success callback\n * @param {Function} [options.error] error callback\n * @since 11.0.0\n */\nexport function getValue(app, key, defaultValue, options) {\n\toptions = options || {}\n\toptions.data = {\n\t\tdefaultValue,\n\t}\n\n\tcall('get', '/' + app + '/' + key, options)\n}\n\n/**\n * @param {string} app app id\n * @param {string} key key\n * @param {string} value value\n * @param {object} [options] destructuring object\n * @param {Function} [options.success] success callback\n * @param {Function} [options.error] error callback\n * @since 11.0.0\n */\nexport function setValue(app, key, value, options) {\n\toptions = options || {}\n\toptions.data = {\n\t\tvalue,\n\t}\n\n\tcall('post', '/' + app + '/' + key, options)\n}\n\n/**\n * @param {string} app app id\n * @param {string} key key\n * @param {object} [options] destructuring object\n * @param {Function} [options.success] success callback\n * @param {Function} [options.error] error callback\n * @since 11.0.0\n */\nexport function deleteKey(app, key, options) {\n\tcall('delete', '/' + app + '/' + key, options)\n}\n","/**\n * SPDX-FileCopyrightText: 2016 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2014 ownCloud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/* eslint-disable */\n import { getValue, setValue, getApps, getKeys, deleteKey } from '../OCP/appconfig.js'\n\nexport const appConfig = window.oc_appconfig || {}\n\n/**\n * @namespace\n * @deprecated 16.0.0 Use OCP.AppConfig instead\n */\nexport const AppConfig = {\n\t/**\n\t * @deprecated Use OCP.AppConfig.getValue() instead\n\t */\n\tgetValue: function(app, key, defaultValue, callback) {\n\t\tgetValue(app, key, defaultValue, {\n\t\t\tsuccess: callback\n\t\t})\n\t},\n\n\t/**\n\t * @deprecated Use OCP.AppConfig.setValue() instead\n\t */\n\tsetValue: function(app, key, value) {\n\t\tsetValue(app, key, value)\n\t},\n\n\t/**\n\t * @deprecated Use OCP.AppConfig.getApps() instead\n\t */\n\tgetApps: function(callback) {\n\t\tgetApps({\n\t\t\tsuccess: callback\n\t\t})\n\t},\n\n\t/**\n\t * @deprecated Use OCP.AppConfig.getKeys() instead\n\t */\n\tgetKeys: function(app, callback) {\n\t\tgetKeys(app, {\n\t\t\tsuccess: callback\n\t\t})\n\t},\n\n\t/**\n\t * @deprecated Use OCP.AppConfig.deleteKey() instead\n\t */\n\tdeleteKey: function(app, key) {\n\t\tdeleteKey(app, key)\n\t}\n\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst appswebroots = (window._oc_appswebroots !== undefined) ? window._oc_appswebroots : false\n\nexport default appswebroots\n","//     Backbone.js 1.6.0\n\n//     (c) 2010-2024 Jeremy Ashkenas and DocumentCloud\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global;\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch (e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\n  }\n\n})(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.6.0';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // A private global variable to share between listeners and listenees.\n  var _listening;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space-separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    this._events = eventsApi(onApi, this._events || {}, name, callback, {\n      context: context,\n      ctx: this,\n      listening: _listening\n    });\n\n    if (_listening) {\n      var listeners = this._listeners || (this._listeners = {});\n      listeners[_listening.id] = _listening;\n      // Allow the listening to use a counter, instead of tracking\n      // callbacks for library interop\n      _listening.interop = false;\n    }\n\n    return this;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo = function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = _listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = _listening = listeningTo[id] = new Listening(this, obj);\n    }\n\n    // Bind callbacks on obj.\n    var error = tryCatchOn(obj, name, callback, this);\n    _listening = void 0;\n\n    if (error) throw error;\n    // If the target obj is not Backbone.Events, track events manually.\n    if (listening.interop) listening.on(name, callback);\n\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n    }\n    return events;\n  };\n\n  // An try-catch guarded #on function, to prevent poisoning the global\n  // `_listening` variable.\n  var tryCatchOn = function(obj, name, callback, context) {\n    try {\n      obj.on(name, callback, context);\n    } catch (e) {\n      return e;\n    }\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off = function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: context,\n      listeners: this._listeners\n    });\n\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening = function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n      if (listening.interop) listening.off(name, callback);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var context = options.context, listeners = options.listeners;\n    var i = 0, names;\n\n    // Delete all event listeners and \"drop\" events.\n    if (!name && !context && !callback) {\n      for (names = _.keys(listeners); i < names.length; i++) {\n        listeners[names[i]].cleanup();\n      }\n      return;\n    }\n\n    names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Find any remaining events.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          var listening = handler.listening;\n          if (listening) listening.off(name, callback);\n        }\n      }\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n\n    return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once = function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\n    if (typeof name === 'string' && context == null) callback = void 0;\n    return this.on(events, callback, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce = function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger = function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, callback, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // A listening class that tracks and cleans up memory bindings\n  // when all callbacks have been offed.\n  var Listening = function(listener, obj) {\n    this.id = listener._listenId;\n    this.listener = listener;\n    this.obj = obj;\n    this.interop = true;\n    this.count = 0;\n    this._events = void 0;\n  };\n\n  Listening.prototype.on = Events.on;\n\n  // Offs a callback (or several).\n  // Uses an optimized counter if the listenee uses Backbone.Events.\n  // Otherwise, falls back to manual tracking to support events\n  // library interop.\n  Listening.prototype.off = function(name, callback) {\n    var cleanup;\n    if (this.interop) {\n      this._events = eventsApi(offApi, this._events, name, callback, {\n        context: void 0,\n        listeners: void 0\n      });\n      cleanup = !this._events;\n    } else {\n      this.count--;\n      cleanup = this.count === 0;\n    }\n    if (cleanup) this.cleanup();\n  };\n\n  // Cleans up memory bindings between the listener and the listenee.\n  Listening.prototype.cleanup = function() {\n    delete this.listener._listeningTo[this.obj._listenId];\n    if (!this.interop) delete this.obj._listeners[this.id];\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    var defaults = _.result(this, 'defaults');\n\n    // Just _.defaults would work fine, but the additional _.extends\n    // is in there for historical reasons. See #3843.\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Model.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      if (this.idAttribute in attrs) {\n        var prevId = this.id;\n        this.id = this.get(this.idAttribute);\n        this.trigger('changeId', this, prevId, options);\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      var hasChanged;\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n        hasChanged = true;\n      }\n      return hasChanged ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else if (!this._validate(attrs, options)) {\n        return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend({}, options, {validate: true}));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    var i;\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Collection.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed.length) {\n        options.changes = {added: [], merged: [], removed: removed};\n        this.trigger('update', this, options);\n      }\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.extend({}, setOptions, options);\n      if (options.parse && !this._isModel(models)) {\n        models = this.parse(models, options) || [];\n      }\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at > this.length) at = this.length;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toMerge = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && at == null && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model, i;\n      for (i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            toMerge.push(existing);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n          return m !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length || toMerge.length) {\n          options.changes = {\n            added: toAdd,\n            removed: toRemove,\n            merged: toMerge\n          };\n          this.trigger('update', this, options);\n        }\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id, cid, model object with id or cid\n    // properties, or an attributes object that is transformed through modelId.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] ||\n        this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj, obj.idAttribute)] ||\n        obj.cid && this._byId[obj.cid];\n    },\n\n    // Returns `true` if the model is in the collection.\n    has: function(obj) {\n      return this.get(obj) != null;\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = comparator.bind(this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return this.map(attr + '');\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(m, resp, callbackOpts) {\n        if (wait) {\n          m.off('error', collection._forwardPristineError, collection);\n          collection.add(m, callbackOpts);\n        }\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n      };\n      // In case of wait:true, our collection is not listening to any\n      // of the model's events yet, so it will not forward the error\n      // event. In this special case, we need to listen for it\n      // separately and handle the event just once.\n      // (The reason we don't need to do this for the sync event is\n      // in the success handler above: we add the model first, which\n      // causes the collection to listen, and then invoke the callback\n      // that triggers the event.)\n      if (wait) {\n        model.once('error', this._forwardPristineError, this);\n      }\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function(attrs, idAttribute) {\n      return attrs[idAttribute || this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Get an iterator of all models in this collection.\n    values: function() {\n      return new CollectionIterator(this, ITERATOR_VALUES);\n    },\n\n    // Get an iterator of all model IDs in this collection.\n    keys: function() {\n      return new CollectionIterator(this, ITERATOR_KEYS);\n    },\n\n    // Get an iterator of all [ID, model] tuples in this collection.\n    entries: function() {\n      return new CollectionIterator(this, ITERATOR_KEYSVALUES);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n\n      var model;\n      if (this.model.prototype) {\n        model = new this.model(attrs, options);\n      } else {\n        // ES class methods didn't have prototype\n        model = this.model(attrs, options);\n      }\n\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        // Remove references before triggering 'remove' event to prevent an\n        // infinite loop. #3693\n        delete this._byId[model.cid];\n        var id = this.modelId(model.attributes, model.idAttribute);\n        if (id != null) delete this._byId[id];\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      if (models.length > 0 && !options.silent) delete options.index;\n      return removed;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function(model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes, model.idAttribute);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes, model.idAttribute);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'changeId') {\n          var prevId = this.modelId(model.previousAttributes(), model.idAttribute);\n          var id = this.modelId(model.attributes, model.idAttribute);\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n      this.trigger.apply(this, arguments);\n    },\n\n    // Internal callback method used in `create`. It serves as a\n    // stand-in for the `_onModelEvent` method, which is not yet bound\n    // during the `wait` period of the `create` call. We still want to\n    // forward any `'error'` event at the end of the `wait` period,\n    // hence a customized callback.\n    _forwardPristineError: function(model, collection, options) {\n      // Prevent double forward if the model was already in the\n      // collection before the call to `create`.\n      if (this.has(model)) return;\n      this._onModelEvent('error', model, collection, options);\n    }\n  });\n\n  // Defining an @@iterator method implements JavaScript's Iterable protocol.\n  // In modern ES2015 browsers, this value is found at Symbol.iterator.\n  /* global Symbol */\n  var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\n  if ($$iterator) {\n    Collection.prototype[$$iterator] = Collection.prototype.values;\n  }\n\n  // CollectionIterator\n  // ------------------\n\n  // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\n  // use of `for of` loops in modern browsers and interoperation between\n  // Backbone.Collection and other JavaScript functions and third-party libraries\n  // which can operate on Iterables.\n  var CollectionIterator = function(collection, kind) {\n    this._collection = collection;\n    this._kind = kind;\n    this._index = 0;\n  };\n\n  // This \"enum\" defines the three possible kinds of values which can be emitted\n  // by a CollectionIterator that correspond to the values(), keys() and entries()\n  // methods on Collection, respectively.\n  var ITERATOR_VALUES = 1;\n  var ITERATOR_KEYS = 2;\n  var ITERATOR_KEYSVALUES = 3;\n\n  // All Iterators should themselves be Iterable.\n  if ($$iterator) {\n    CollectionIterator.prototype[$$iterator] = function() {\n      return this;\n    };\n  }\n\n  CollectionIterator.prototype.next = function() {\n    if (this._collection) {\n\n      // Only continue iterating if the iterated collection is long enough.\n      if (this._index < this._collection.length) {\n        var model = this._collection.at(this._index);\n        this._index++;\n\n        // Construct a value depending on what kind of values should be iterated.\n        var value;\n        if (this._kind === ITERATOR_VALUES) {\n          value = model;\n        } else {\n          var id = this._collection.modelId(model.attributes, model.idAttribute);\n          if (this._kind === ITERATOR_KEYS) {\n            value = id;\n          } else { // ITERATOR_KEYSVALUES\n            value = [id, model];\n          }\n        }\n        return {value: value, done: false};\n      }\n\n      // Once exhausted, remove the reference to the collection so future\n      // calls to the next method always return done.\n      this._collection = void 0;\n    }\n\n    return {value: void 0, done: true};\n  };\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    this.preinitialize.apply(this, arguments);\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the View\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], method.bind(this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(base, length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return base[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return base[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return base[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return base[method].apply(base, args);\n      };\n    }\n  };\n\n  var addUnderscoreMethods = function(Class, base, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n    foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n    select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n    contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n    head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n    without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n    isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n    sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n    omit: 0, chain: 1, isEmpty: 1};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n\n  _.each([\n    [Collection, collectionMethods, 'models'],\n    [Model, modelMethods, 'attributes']\n  ], function(config) {\n    var Base = config[0],\n        methods = config[1],\n        attribute = config[2];\n\n    Base.mixin = function(obj) {\n      var mappings = _.reduce(_.functions(obj), function(memo, name) {\n        memo[name] = 0;\n        return memo;\n      }, {});\n      addUnderscoreMethods(Base, obj, mappings, attribute);\n    };\n\n    addUnderscoreMethods(Base, _, methods, attribute);\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch': 'PATCH',\n    'delete': 'DELETE',\n    'read': 'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Router.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n      .replace(optionalParam, '(?:$1)?')\n      .replace(namedParam, function(match, optional) {\n        return optional ? match : '([^/?]+)';\n      })\n      .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = this.checkUrl.bind(this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\n      return rootPath === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._trailingSlash   = this.options.trailingSlash;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var rootPath = this.root.slice(0, -1) || '/';\n          this.location.replace(rootPath + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function(eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) {\n        if (!this.matchRoot()) return this.notfound();\n        return false;\n      }\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return this.notfound();\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      }) || this.notfound();\n    },\n\n    // When no route could be matched, this method is called internally to\n    // trigger the `'notfound'` event. It returns `false` so that it can be used\n    // in tail position.\n    notfound: function() {\n      this.trigger('notfound');\n      return false;\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Strip trailing slash on the root unless _trailingSlash is true\n      var rootPath = this.root;\n      if (!this._trailingSlash && (fragment === '' || fragment.charAt(0) === '?')) {\n        rootPath = rootPath.slice(0, -1) || '/';\n      }\n      var url = rootPath + fragment;\n\n      // Strip the fragment of the query and hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      // Decode for matching.\n      var decodedFragment = this.decodeFragment(fragment);\n\n      if (this.fragment === decodedFragment) return;\n      this.fragment = decodedFragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function and add the prototype properties.\n    child.prototype = _.create(parent.prototype, protoProps);\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  // Provide useful information when things go wrong. This method is not meant\n  // to be used directly; it merely provides the necessary introspection for the\n  // external `debugInfo` function.\n  Backbone._debug = function() {\n    return {root: root, _: _};\n  };\n\n  return Backbone;\n});\n","/*\n * vim: expandtab shiftwidth=4 softtabstop=4\n */\n\nconst dav = {}\n\ndav._XML_CHAR_MAP = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\"': '&quot;',\n    \"'\": '&apos;'\n};\n\ndav._escapeXml = function(s) {\n    return s.replace(/[<>&\"']/g, function (ch) {\n        return dav._XML_CHAR_MAP[ch];\n    });\n};\n\ndav.Client = function(options) {\n    var i;\n    for(i in options) {\n        this[i] = options[i];\n    }\n\n};\n\ndav.Client.prototype = {\n\n    baseUrl : null,\n\n    userName : null,\n\n    password : null,\n\n\n    xmlNamespaces : {\n        'DAV:' : 'd'\n    },\n\n    /**\n     * Generates a propFind request.\n     *\n     * @param {string} url Url to do the propfind request on\n     * @param {Array} properties List of properties to retrieve.\n     * @param {string} depth \"0\", \"1\" or \"infinity\"\n     * @param {Object} [headers] headers\n     * @return {Promise}\n     */\n    propFind : function(url, properties, depth, headers) {\n\n        if(typeof depth === \"undefined\") {\n            depth = '0';\n        }\n\n        // depth header must be a string, in case a number was passed in\n        depth = '' + depth;\n\n        headers = headers || {};\n\n        headers['Depth'] = depth;\n        headers['Content-Type'] = 'application/xml; charset=utf-8';\n\n        var body =\n            '<?xml version=\"1.0\"?>\\n' +\n            '<d:propfind ';\n        var namespace;\n        for (namespace in this.xmlNamespaces) {\n            body += ' xmlns:' + this.xmlNamespaces[namespace] + '=\"' + namespace + '\"';\n        }\n        body += '>\\n' +\n            '  <d:prop>\\n';\n\n        for(var ii in properties) {\n            if (!properties.hasOwnProperty(ii)) {\n                continue;\n            }\n\n            var property = this.parseClarkNotation(properties[ii]);\n            if (this.xmlNamespaces[property.namespace]) {\n                body+='    <' + this.xmlNamespaces[property.namespace] + ':' + property.name + ' />\\n';\n            } else {\n                body+='    <x:' + property.name + ' xmlns:x=\"' + property.namespace + '\" />\\n';\n            }\n\n        }\n        body+='  </d:prop>\\n';\n        body+='</d:propfind>';\n\n        return this.request('PROPFIND', url, headers, body).then(\n            function(result) {\n\n                if (depth === '0') {\n                    return {\n                        status: result.status,\n                        body: result.body[0],\n                        xhr: result.xhr\n                    };\n                } else {\n                    return {\n                        status: result.status,\n                        body: result.body,\n                        xhr: result.xhr\n                    };\n                }\n\n            }.bind(this)\n        );\n\n    },\n\n    /**\n     * Renders a \"d:set\" block for the given properties.\n     *\n     * @param {Object.<String,String>} properties\n     * @return {String} XML \"<d:set>\" block\n     */\n    _renderPropSet: function(properties) {\n        var body = '  <d:set>\\n' +\n            '   <d:prop>\\n';\n\n        for(var ii in properties) {\n            if (!properties.hasOwnProperty(ii)) {\n                continue;\n            }\n\n            var property = this.parseClarkNotation(ii);\n            var propName;\n            var propValue = properties[ii];\n            if (this.xmlNamespaces[property.namespace]) {\n                propName = this.xmlNamespaces[property.namespace] + ':' + property.name;\n            } else {\n                propName = 'x:' + property.name + ' xmlns:x=\"' + property.namespace + '\"';\n            }\n\n            // FIXME: hard-coded for now until we allow properties to\n            // specify whether to be escaped or not\n            if (propName !== 'd:resourcetype') {\n                propValue = dav._escapeXml(propValue);\n            }\n            body += '      <' + propName + '>' + propValue + '</' + propName + '>\\n';\n        }\n        body +='    </d:prop>\\n';\n        body +='  </d:set>\\n';\n        return body;\n    },\n\n    /**\n     * Generates a propPatch request.\n     *\n     * @param {string} url Url to do the proppatch request on\n     * @param {Object.<String,String>} properties List of properties to store.\n     * @param {Object} [headers] headers\n     * @return {Promise}\n     */\n    propPatch : function(url, properties, headers) {\n        headers = headers || {};\n\n        headers['Content-Type'] = 'application/xml; charset=utf-8';\n\n        var body =\n            '<?xml version=\"1.0\"?>\\n' +\n            '<d:propertyupdate ';\n        var namespace;\n        for (namespace in this.xmlNamespaces) {\n            body += ' xmlns:' + this.xmlNamespaces[namespace] + '=\"' + namespace + '\"';\n        }\n        body += '>\\n' + this._renderPropSet(properties);\n        body += '</d:propertyupdate>';\n\n        return this.request('PROPPATCH', url, headers, body).then(\n            function(result) {\n                return {\n                    status: result.status,\n                    body: result.body,\n                    xhr: result.xhr\n                };\n            }.bind(this)\n        );\n\n    },\n\n    /**\n     * Generates a MKCOL request.\n     * If attributes are given, it will use an extended MKCOL request.\n     *\n     * @param {string} url Url to do the proppatch request on\n     * @param {Object.<String,String>} [properties] list of properties to store.\n     * @param {Object} [headers] headers\n     * @return {Promise}\n     */\n    mkcol : function(url, properties, headers) {\n        var body = '';\n        headers = headers || {};\n        headers['Content-Type'] = 'application/xml; charset=utf-8';\n\n        if (properties) {\n            body =\n                '<?xml version=\"1.0\"?>\\n' +\n                '<d:mkcol';\n            var namespace;\n            for (namespace in this.xmlNamespaces) {\n                body += ' xmlns:' + this.xmlNamespaces[namespace] + '=\"' + namespace + '\"';\n            }\n            body += '>\\n' + this._renderPropSet(properties);\n            body +='</d:mkcol>';\n        }\n\n        return this.request('MKCOL', url, headers, body).then(\n            function(result) {\n                return {\n                    status: result.status,\n                    body: result.body,\n                    xhr: result.xhr\n                };\n            }.bind(this)\n        );\n\n    },\n\n    /**\n     * Performs a HTTP request, and returns a Promise\n     *\n     * @param {string} method HTTP method\n     * @param {string} url Relative or absolute url\n     * @param {Object} headers HTTP headers as an object.\n     * @param {string} body HTTP request body.\n     * @param {string} responseType HTTP request response type.\n     * @param {Object} options\n     * @param {Function} options.onProgress progress callback\n     * @return {Promise}\n     */\n    request : function(method, url, headers, body, responseType, options) {\n\n        var self = this;\n        var xhr = this.xhrProvider();\n        headers = headers || {};\n        responseType = responseType || \"\";\n        \n        if (this.userName) {\n            headers['Authorization'] = 'Basic ' + btoa(this.userName + ':' + this.password);\n            // xhr.open(method, this.resolveUrl(url), true, this.userName, this.password);\n        }\n        xhr.open(method, this.resolveUrl(url), true);\n        var ii;\n        for(ii in headers) {\n            xhr.setRequestHeader(ii, headers[ii]);\n        }\n        xhr.responseType = responseType;\n\n        if (options && typeof(options.onProgress) === 'function') {\n            if (method === 'PUT' || method === 'POST') {\n                xhr.upload.addEventListener('progress', function (e) {\n                  options.onProgress(e)\n                }, false)\n            }\n            else {\n                xhr.addEventListener('progress', function (e) {\n                  options.onProgress(e)\n                }, false)\n            }\n        }\n\n        // Work around for edge\n        if (body === undefined) {\n            xhr.send();\n        } else {\n            xhr.send(body);\n        }\n\n        return new Promise(function(fulfill, reject) {\n\n            xhr.onreadystatechange = function() {\n\n                if (xhr.readyState !== 4) {\n                    return;\n                }\n\n                var resultBody = xhr.response;\n                if (xhr.status === 207) {\n                    resultBody = self.parseMultiStatus(xhr.response);\n                }\n\n                fulfill({\n                    body: resultBody,\n                    status: xhr.status,\n                    xhr: xhr\n                });\n\n            };\n\n            xhr.ontimeout = function() {\n\n                reject(new Error('Timeout exceeded'));\n\n            };\n\n        });\n\n    },\n\n    /**\n     * Returns an XMLHttpRequest object.\n     *\n     * This is in its own method, so it can be easily overridden.\n     *\n     * @return {XMLHttpRequest}\n     */\n    xhrProvider : function() {\n\n        return new XMLHttpRequest();\n\n    },\n\n    /**\n     * Parses a property node.\n     *\n     * Either returns a string if the node only contains text, or returns an\n     * array of non-text subnodes.\n     *\n     * @param {Object} propNode node to parse\n     * @return {string|Array} text content as string or array of subnodes, excluding text nodes\n     */\n    _parsePropNode: function(propNode) {\n        var content = null;\n        if (propNode.childNodes && propNode.childNodes.length > 0) {\n            var subNodes = [];\n            // filter out text nodes\n            for (var j = 0; j < propNode.childNodes.length; j++) {\n                var node = propNode.childNodes[j];\n                if (node.nodeType === 1) {\n                    subNodes.push(node);\n                }\n            }\n            if (subNodes.length) {\n                content = subNodes;\n            }\n        }\n\n        return content || propNode.textContent || propNode.text || '';\n    },\n\n    /**\n     * Parses a multi-status response body.\n     *\n     * @param {string} xmlBody\n     * @param {Array}\n     */\n    parseMultiStatus : function(xmlBody) {\n\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(xmlBody, \"application/xml\");\n\n        var resolver = function(foo) {\n            var ii;\n            for(ii in this.xmlNamespaces) {\n                if (this.xmlNamespaces[ii] === foo) {\n                    return ii;\n                }\n            }\n        }.bind(this);\n\n        var responseIterator = doc.evaluate('/d:multistatus/d:response', doc, resolver, XPathResult.ANY_TYPE, null);\n\n        var result = [];\n        var responseNode = responseIterator.iterateNext();\n\n        while(responseNode) {\n\n            var response = {\n                href : null,\n                propStat : []\n            };\n\n            response.href = doc.evaluate('string(d:href)', responseNode, resolver, XPathResult.ANY_TYPE, null).stringValue;\n\n            var propStatIterator = doc.evaluate('d:propstat', responseNode, resolver, XPathResult.ANY_TYPE, null);\n            var propStatNode = propStatIterator.iterateNext();\n\n            while(propStatNode) {\n                var propStat = {\n                    status : doc.evaluate('string(d:status)', propStatNode, resolver, XPathResult.ANY_TYPE, null).stringValue,\n                    properties : {},\n                };\n\n                var propIterator = doc.evaluate('d:prop/*', propStatNode, resolver, XPathResult.ANY_TYPE, null);\n\n                var propNode = propIterator.iterateNext();\n                while(propNode) {\n                    var content = this._parsePropNode(propNode);\n                    propStat.properties['{' + propNode.namespaceURI + '}' + propNode.localName] = content;\n                    propNode = propIterator.iterateNext();\n\n                }\n                response.propStat.push(propStat);\n                propStatNode = propStatIterator.iterateNext();\n\n\n            }\n\n            result.push(response);\n            responseNode = responseIterator.iterateNext();\n\n        }\n\n        return result;\n\n    },\n\n    /**\n     * Takes a relative url, and maps it to an absolute url, using the baseUrl\n     *\n     * @param {string} url\n     * @return {string}\n     */\n    resolveUrl : function(url) {\n\n        // Note: this is rudamentary.. not sure yet if it handles every case.\n        if (/^https?:\\/\\//i.test(url)) {\n            // absolute\n            return url;\n        }\n\n        var baseParts = this.parseUrl(this.baseUrl);\n        if (url.charAt('/')) {\n            // Url starts with a slash\n            return baseParts.root + url;\n        }\n\n        // Url does not start with a slash, we need grab the base url right up until the last slash.\n        var newUrl = baseParts.root + '/';\n        if (baseParts.path.lastIndexOf('/')!==-1) {\n            newUrl = newUrl = baseParts.path.subString(0, baseParts.path.lastIndexOf('/')) + '/';\n        }\n        newUrl+=url;\n        return url;\n\n    },\n\n    /**\n     * Parses a url and returns its individual components.\n     *\n     * @param {String} url\n     * @return {Object}\n     */\n    parseUrl : function(url) {\n\n         var parts = url.match(/^(?:([A-Za-z]+):)?(\\/{0,3})([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$/);\n         var result = {\n             url : parts[0],\n             scheme : parts[1],\n             host : parts[3],\n             port : parts[4],\n             path : parts[5],\n             query : parts[6],\n             fragment : parts[7],\n         };\n         result.root =\n            result.scheme + '://' +\n            result.host +\n            (result.port ? ':' + result.port : '');\n\n         return result;\n\n    },\n\n    parseClarkNotation : function(propertyName) {\n\n        var result = propertyName.match(/^{([^}]+)}(.*)$/);\n        if (!result) {\n            return;\n        }\n\n        return {\n            name : result[2],\n            namespace : result[1]\n        };\n\n    }\n\n};\n\nmodule.exports = {\n    dav,\n    Client: dav.Client,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/* eslint-disable */\nimport _ from 'underscore'\nimport { dav } from 'davclient.js'\n\nconst methodMap = {\n\tcreate: 'POST',\n\tupdate: 'PROPPATCH',\n\tpatch: 'PROPPATCH',\n\tdelete: 'DELETE',\n\tread: 'PROPFIND'\n}\n\n// Throw an error when a URL is needed, and none is supplied.\nfunction urlError() {\n\tthrow new Error('A \"url\" property or function must be specified')\n}\n\n/**\n * Convert a single propfind result to JSON\n *\n * @param {Object} result\n * @param {Object} davProperties properties mapping\n */\nfunction parsePropFindResult(result, davProperties) {\n\tif (_.isArray(result)) {\n\t\treturn _.map(result, function(subResult) {\n\t\t\treturn parsePropFindResult(subResult, davProperties)\n\t\t})\n\t}\n\tvar props = {\n\t\thref: result.href\n\t}\n\n\t_.each(result.propStat, function(propStat) {\n\t\tif (propStat.status !== 'HTTP/1.1 200 OK') {\n\t\t\treturn\n\t\t}\n\n\t\tfor (var key in propStat.properties) {\n\t\t\tvar propKey = key\n\t\t\tif (key in davProperties) {\n\t\t\t\tpropKey = davProperties[key]\n\t\t\t}\n\t\t\tprops[propKey] = propStat.properties[key]\n\t\t}\n\t})\n\n\tif (!props.id) {\n\t\t// parse id from href\n\t\tprops.id = parseIdFromLocation(props.href)\n\t}\n\n\treturn props\n}\n\n/**\n * Parse ID from location\n *\n * @param {string} url url\n * @returns {string} id\n */\nfunction parseIdFromLocation(url) {\n\tvar queryPos = url.indexOf('?')\n\tif (queryPos > 0) {\n\t\turl = url.substr(0, queryPos)\n\t}\n\n\tvar parts = url.split('/')\n\tvar result\n\tdo {\n\t\tresult = parts[parts.length - 1]\n\t\tparts.pop()\n\t\t// note: first result can be empty when there is a trailing slash,\n\t\t// so we take the part before that\n\t} while (!result && parts.length > 0)\n\n\treturn result\n}\n\nfunction isSuccessStatus(status) {\n\treturn status >= 200 && status <= 299\n}\n\nfunction convertModelAttributesToDavProperties(attrs, davProperties) {\n\tvar props = {}\n\tvar key\n\tfor (key in attrs) {\n\t\tvar changedProp = davProperties[key]\n\t\tvar value = attrs[key]\n\t\tif (!changedProp) {\n\t\t\tconsole.warn('No matching DAV property for property \"' + key)\n\t\t\tchangedProp = key\n\t\t}\n\t\tif (_.isBoolean(value) || _.isNumber(value)) {\n\t\t\t// convert to string\n\t\t\tvalue = '' + value\n\t\t}\n\t\tprops[changedProp] = value\n\t}\n\treturn props\n}\n\nfunction callPropFind(client, options, model, headers) {\n\treturn client.propFind(\n\t\toptions.url,\n\t\t_.values(options.davProperties) || [],\n\t\toptions.depth,\n\t\theaders\n\t).then(function(response) {\n\t\tif (isSuccessStatus(response.status)) {\n\t\t\tif (_.isFunction(options.success)) {\n\t\t\t\tvar propsMapping = _.invert(options.davProperties)\n\t\t\t\tvar results = parsePropFindResult(response.body, propsMapping)\n\t\t\t\tif (options.depth > 0) {\n\t\t\t\t\t// discard root entry\n\t\t\t\t\tresults.shift()\n\t\t\t\t}\n\n\t\t\t\toptions.success(results)\n\n\t\t\t}\n\t\t} else if (_.isFunction(options.error)) {\n\t\t\toptions.error(response)\n\t\t}\n\t})\n}\n\nfunction callPropPatch(client, options, model, headers) {\n\treturn client.propPatch(\n\t\toptions.url,\n\t\tconvertModelAttributesToDavProperties(model.changed, options.davProperties),\n\t\theaders\n\t).then(function(result) {\n\t\tif (isSuccessStatus(result.status)) {\n\t\t\tif (_.isFunction(options.success)) {\n\t\t\t\t// pass the object's own values because the server\n\t\t\t\t// does not return the updated model\n\t\t\t\toptions.success(model.toJSON())\n\t\t\t}\n\t\t} else if (_.isFunction(options.error)) {\n\t\t\toptions.error(result)\n\t\t}\n\t})\n\n}\n\nfunction callMkCol(client, options, model, headers) {\n\t// call MKCOL without data, followed by PROPPATCH\n\treturn client.request(\n\t\toptions.type,\n\t\toptions.url,\n\t\theaders,\n\t\tnull\n\t).then(function(result) {\n\t\tif (!isSuccessStatus(result.status)) {\n\t\t\tif (_.isFunction(options.error)) {\n\t\t\t\toptions.error(result)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tcallPropPatch(client, options, model, headers)\n\t})\n}\n\nfunction callMethod(client, options, model, headers) {\n\theaders['Content-Type'] = 'application/json'\n\treturn client.request(\n\t\toptions.type,\n\t\toptions.url,\n\t\theaders,\n\t\toptions.data\n\t).then(function(result) {\n\t\tif (!isSuccessStatus(result.status)) {\n\t\t\tif (_.isFunction(options.error)) {\n\t\t\t\toptions.error(result)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif (_.isFunction(options.success)) {\n\t\t\tif (options.type === 'PUT' || options.type === 'POST' || options.type === 'MKCOL') {\n\t\t\t\t// pass the object's own values because the server\n\t\t\t\t// does not return anything\n\t\t\t\tvar responseJson = result.body || model.toJSON()\n\t\t\t\tvar locationHeader = result.xhr.getResponseHeader('Content-Location')\n\t\t\t\tif (options.type === 'POST' && locationHeader) {\n\t\t\t\t\tresponseJson.id = parseIdFromLocation(locationHeader)\n\t\t\t\t}\n\t\t\t\toptions.success(responseJson)\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// if multi-status, parse\n\t\t\tif (result.status === 207) {\n\t\t\t\tvar propsMapping = _.invert(options.davProperties)\n\t\t\t\toptions.success(parsePropFindResult(result.body, propsMapping))\n\t\t\t} else {\n\t\t\t\toptions.success(result.body)\n\t\t\t}\n\t\t}\n\t})\n}\n\nexport const davCall = (options, model) => {\n\tvar client = new dav.Client({\n\t\tbaseUrl: options.url,\n\t\txmlNamespaces: _.extend({\n\t\t\t'DAV:': 'd',\n\t\t\t'http://owncloud.org/ns': 'oc'\n\t\t}, options.xmlNamespaces || {})\n\t})\n\tclient.resolveUrl = function() {\n\t\treturn options.url\n\t}\n\tvar headers = _.extend({\n\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t'requesttoken': OC.requestToken\n\t}, options.headers)\n\tif (options.type === 'PROPFIND') {\n\t\treturn callPropFind(client, options, model, headers)\n\t} else if (options.type === 'PROPPATCH') {\n\t\treturn callPropPatch(client, options, model, headers)\n\t} else if (options.type === 'MKCOL') {\n\t\treturn callMkCol(client, options, model, headers)\n\t} else {\n\t\treturn callMethod(client, options, model, headers)\n\t}\n}\n\n/**\n * DAV transport\n */\nexport const davSync = Backbone => (method, model, options) => {\n\tvar params = { type: methodMap[method] || method }\n\tvar isCollection = (model instanceof Backbone.Collection)\n\n\tif (method === 'update') {\n\t\t// if a model has an inner collection, it must define an\n\t\t// attribute \"hasInnerCollection\" that evaluates to true\n\t\tif (model.hasInnerCollection) {\n\t\t\t// if the model itself is a Webdav collection, use MKCOL\n\t\t\tparams.type = 'MKCOL'\n\t\t} else if (model.usePUT || (model.collection && model.collection.usePUT)) {\n\t\t\t// use PUT instead of PROPPATCH\n\t\t\tparams.type = 'PUT'\n\t\t}\n\t}\n\n\t// Ensure that we have a URL.\n\tif (!options.url) {\n\t\tparams.url = _.result(model, 'url') || urlError()\n\t}\n\n\t// Ensure that we have the appropriate request data.\n\tif (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n\t\tparams.data = JSON.stringify(options.attrs || model.toJSON(options))\n\t}\n\n\t// Don't process data on a non-GET request.\n\tif (params.type !== 'PROPFIND') {\n\t\tparams.processData = false\n\t}\n\n\tif (params.type === 'PROPFIND' || params.type === 'PROPPATCH') {\n\t\tvar davProperties = model.davProperties\n\t\tif (!davProperties && model.model) {\n\t\t\t// use dav properties from model in case of collection\n\t\t\tdavProperties = model.model.prototype.davProperties\n\t\t}\n\t\tif (davProperties) {\n\t\t\tif (_.isFunction(davProperties)) {\n\t\t\t\tparams.davProperties = davProperties.call(model)\n\t\t\t} else {\n\t\t\t\tparams.davProperties = davProperties\n\t\t\t}\n\t\t}\n\n\t\tparams.davProperties = _.extend(params.davProperties || {}, options.davProperties)\n\n\t\tif (_.isUndefined(options.depth)) {\n\t\t\tif (isCollection) {\n\t\t\t\toptions.depth = 1\n\t\t\t} else {\n\t\t\t\toptions.depth = 0\n\t\t\t}\n\t\t}\n\t}\n\n\t// Pass along `textStatus` and `errorThrown` from jQuery.\n\tvar error = options.error\n\toptions.error = function(xhr, textStatus, errorThrown) {\n\t\toptions.textStatus = textStatus\n\t\toptions.errorThrown = errorThrown\n\t\tif (error) {\n\t\t\terror.call(options.context, xhr, textStatus, errorThrown)\n\t\t}\n\t}\n\n\t// Make the request, allowing the user to override any Ajax options.\n\tvar xhr = options.xhr = Backbone.davCall(_.extend(params, options), model)\n\tmodel.trigger('request', model, xhr, options)\n\treturn xhr\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport VendorBackbone from 'backbone'\nimport { davCall, davSync } from './backbone-webdav.js'\n\nconst Backbone = VendorBackbone.noConflict()\n\n// Patch Backbone for DAV\nObject.assign(Backbone, {\n\tdavCall,\n\tdavSync: davSync(Backbone),\n})\n\nexport default Backbone\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport $ from 'jquery'\n\n/**\n * Parses a URL query string into a JS map\n *\n * @param {string} queryString query string in the format param1=1234&param2=abcde&param3=xyz\n * @return {Object<string, string>} map containing key/values matching the URL parameters\n */\nexport const parse = queryString => {\n\tlet pos\n\tlet components\n\tconst result = {}\n\tlet key\n\tif (!queryString) {\n\t\treturn null\n\t}\n\tpos = queryString.indexOf('?')\n\tif (pos >= 0) {\n\t\tqueryString = queryString.substr(pos + 1)\n\t}\n\tconst parts = queryString.replace(/\\+/g, '%20').split('&')\n\tfor (let i = 0; i < parts.length; i++) {\n\t\t// split on first equal sign\n\t\tconst part = parts[i]\n\t\tpos = part.indexOf('=')\n\t\tif (pos >= 0) {\n\t\t\tcomponents = [\n\t\t\t\tpart.substr(0, pos),\n\t\t\t\tpart.substr(pos + 1),\n\t\t\t]\n\t\t} else {\n\t\t\t// key only\n\t\t\tcomponents = [part]\n\t\t}\n\t\tif (!components.length) {\n\t\t\tcontinue\n\t\t}\n\t\tkey = decodeURIComponent(components[0])\n\t\tif (!key) {\n\t\t\tcontinue\n\t\t}\n\t\t// if equal sign was there, return string\n\t\tif (components.length > 1) {\n\t\t\tresult[key] = decodeURIComponent(components[1])\n\t\t} else {\n\t\t\t// no equal sign => null value\n\t\t\tresult[key] = null\n\t\t}\n\t}\n\treturn result\n}\n\n/**\n * Builds a URL query from a JS map.\n *\n * @param {Object<string, string>} params map containing key/values matching the URL parameters\n * @return {string} String containing a URL query (without question) mark\n */\nexport const build = params => {\n\tif (!params) {\n\t\treturn ''\n\t}\n\treturn $.map(params, function(value, key) {\n\t\tlet s = encodeURIComponent(key)\n\t\tif (value !== null && typeof (value) !== 'undefined') {\n\t\t\ts += '=' + encodeURIComponent(value)\n\t\t}\n\t\treturn s\n\t}).join('&')\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst config = window._oc_config || {}\n\nexport default config\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport const coreApps = ['', 'admin', 'log', 'core/search', 'core', '3rdparty']\nexport const menuSpeed = 50\nexport const PERMISSION_NONE = 0\nexport const PERMISSION_CREATE = 4\nexport const PERMISSION_READ = 1\nexport const PERMISSION_UPDATE = 2\nexport const PERMISSION_DELETE = 8\nexport const PERMISSION_SHARE = 16\nexport const PERMISSION_ALL = 31\nexport const TAG_FAVORITE = '_$!<Favorite>!$_'\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst rawUid = document\n\t.getElementsByTagName('head')[0]\n\t.getAttribute('data-user')\nconst displayName = document\n\t.getElementsByTagName('head')[0]\n\t.getAttribute('data-user-displayname')\n\nexport const currentUser = rawUid !== undefined ? rawUid : false\n\nexport const getCurrentUser = () => {\n\treturn {\n\t\tuid: currentUser,\n\t\tdisplayName,\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2016 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2015 ownCloud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/* eslint-disable */\nimport _ from 'underscore'\nimport $ from 'jquery'\n\nimport IconMove from '@mdi/svg/svg/folder-move.svg?raw'\nimport IconCopy from '@mdi/svg/svg/folder-multiple.svg?raw'\n\nimport OC from './index.js'\nimport { DialogBuilder, FilePickerType, getFilePickerBuilder, spawnDialog } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { basename } from 'path'\nimport { defineAsyncComponent } from 'vue'\n\n/**\n * this class to ease the usage of jquery dialogs\n */\nconst Dialogs = {\n\t// dialog button types\n\t/** @deprecated use `@nextcloud/dialogs` */\n\tYES_NO_BUTTONS: 70,\n\t/** @deprecated use `@nextcloud/dialogs` */\n\tOK_BUTTONS: 71,\n\n\t/** @deprecated use FilePickerType from `@nextcloud/dialogs` */\n\tFILEPICKER_TYPE_CHOOSE: 1,\n\t/** @deprecated use FilePickerType from `@nextcloud/dialogs` */\n\tFILEPICKER_TYPE_MOVE: 2,\n\t/** @deprecated use FilePickerType from `@nextcloud/dialogs` */\n\tFILEPICKER_TYPE_COPY: 3,\n\t/** @deprecated use FilePickerType from `@nextcloud/dialogs` */\n\tFILEPICKER_TYPE_COPY_MOVE: 4,\n\t/** @deprecated use FilePickerType from `@nextcloud/dialogs` */\n\tFILEPICKER_TYPE_CUSTOM: 5,\n\n\t/**\n\t * displays alert dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {function} callback which will be triggered when user presses OK\n\t * @param {boolean} [modal] make the dialog modal\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\talert: function(text, title, callback, modal) {\n\t\tthis.message(\n\t\t\ttext,\n\t\t\ttitle,\n\t\t\t'alert',\n\t\t\tDialogs.OK_BUTTON,\n\t\t\tcallback,\n\t\t\tmodal\n\t\t)\n\t},\n\n\t/**\n\t * displays info dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {function} callback which will be triggered when user presses OK\n\t * @param {boolean} [modal] make the dialog modal\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\tinfo: function(text, title, callback, modal) {\n\t\tthis.message(text, title, 'info', Dialogs.OK_BUTTON, callback, modal)\n\t},\n\n\t/**\n\t * displays confirmation dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\n\t * @param {boolean} [modal] make the dialog modal\n\t * @returns {Promise}\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\tconfirm: function(text, title, callback, modal) {\n\t\treturn this.message(\n\t\t\ttext,\n\t\t\ttitle,\n\t\t\t'notice',\n\t\t\tDialogs.YES_NO_BUTTONS,\n\t\t\tcallback,\n\t\t\tmodal\n\t\t)\n\t},\n\t/**\n\t * displays confirmation dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {(number|{type: number, confirm: string, cancel: string, confirmClasses: string})} buttons text content of buttons\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\n\t * @param {boolean} [modal] make the dialog modal\n\t * @returns {Promise}\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\tconfirmDestructive: function(text, title, buttons = Dialogs.OK_BUTTONS, callback = () => {}, modal) {\n\t\treturn (new DialogBuilder())\n\t\t\t.setName(title)\n\t\t\t.setText(text)\n\t\t\t.setButtons(\n\t\t\t\tbuttons === Dialogs.OK_BUTTONS\n\t\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: t('core', 'Yes'),\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tcallback.clicked = true\n\t\t\t\t\t\t\tcallback(true)\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t\t: Dialogs._getLegacyButtons(buttons, callback)\n\t\t\t)\n\t\t\t.build()\n\t\t\t.show()\n\t\t\t.then(() => {\n\t\t\t\tif (!callback.clicked) {\n\t\t\t\t\tcallback(false)\n\t\t\t\t}\n\t\t\t})\n\t},\n\t/**\n\t * displays confirmation dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\n\t * @param {boolean} [modal] make the dialog modal\n\t * @returns {Promise}\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\tconfirmHtml: function(text, title, callback, modal) {\n\t\treturn (new DialogBuilder())\n\t\t\t.setName(title)\n\t\t\t.setText('')\n\t\t\t.setButtons([\n\t\t\t\t{\n\t\t\t\t\tlabel: t('core', 'No'),\n\t\t\t\t\tcallback: () => {},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('core', 'Yes'),\n\t\t\t\t\ttype: 'primary',\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tcallback.clicked = true\n\t\t\t\t\t\tcallback(true)\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t])\n\t\t\t.build()\n\t\t\t.setHTML(text)\n\t\t\t.show()\n\t\t\t.then(() => {\n\t\t\t\tif (!callback.clicked) {\n\t\t\t\t\tcallback(false)\n\t\t\t\t}\n\t\t\t})\n\t},\n\t/**\n\t * displays prompt dialog\n\t * @param {string} text content of dialog\n\t * @param {string} title dialog title\n\t * @param {function} callback which will be triggered when user presses OK (true or false would be passed to callback respectively)\n\t * @param {boolean} [modal] make the dialog modal\n\t * @param {string} name name of the input field\n\t * @param {boolean} password whether the input should be a password input\n\t * @returns {Promise}\n\t *\n\t * @deprecated Use NcDialog from `@nextcloud/vue` instead\n\t */\n\tprompt: function(text, title, callback, modal, name, password) {\n\t\treturn new Promise((resolve) => {\n\t\t\tspawnDialog(\n\t\t\t\tdefineAsyncComponent(() => import('../components/LegacyDialogPrompt.vue')),\n\t\t\t\t{\n\t\t\t\t\ttext,\n\t\t\t\t\tname: title,\n\t\t\t\t\tcallback,\n\t\t\t\t\tinputName: name,\n\t\t\t\t\tisPassword: !!password\n\t\t\t\t},\n\t\t\t\t(...args) => {\n\t\t\t\t\tcallback(...args)\n\t\t\t\t\tresolve()\n\t\t\t\t},\n\t\t\t)\n\t\t})\n\t},\n\n\t/**\n\t * Legacy wrapper to the new Vue based filepicker from `@nextcloud/dialogs`\n\t *\n\t * Prefer to use the Vue filepicker directly instead.\n\t *\n\t * In order to pick several types of mime types they need to be passed as an\n\t * array of strings.\n\t *\n\t * When no mime type filter is given only files can be selected. In order to\n\t * be able to select both files and folders \"['*', 'httpd/unix-directory']\"\n\t * should be used instead.\n\t *\n\t * @param {string} title dialog title\n\t * @param {Function} callback which will be triggered when user presses Choose\n\t * @param {boolean} [multiselect] whether it should be possible to select multiple files\n\t * @param {string[]} [mimetype] mimetype to filter by - directories will always be included\n\t * @param {boolean} [_modal] do not use\n\t * @param {string} [type] Type of file picker : Choose, copy, move, copy and move\n\t * @param {string} [path] path to the folder that the the file can be picket from\n\t * @param {object} [options] additonal options that need to be set\n\t * @param {Function} [options.filter] filter function for advanced filtering\n\t * @param {boolean} [options.allowDirectoryChooser] Allow to select directories\n\t * @deprecated since 27.1.0 use the filepicker from `@nextcloud/dialogs` instead\n\t */\n\tfilepicker(title, callback, multiselect = false, mimetype = undefined, _modal = undefined, type = FilePickerType.Choose, path = undefined, options = undefined) {\n\n\t\t/**\n\t\t * Create legacy callback wrapper to support old filepicker syntax\n\t\t * @param fn The original callback\n\t\t * @param type The file picker type which was used to pick the file(s)\n\t\t */\n\t\tconst legacyCallback = (fn, type) => {\n\t\t\tconst getPath = (node) => {\n\t\t\t\tconst root = node?.root || ''\n\t\t\t\tlet path = node?.path || ''\n\t\t\t\t// TODO: Fix this in @nextcloud/files\n\t\t\t\tif (path.startsWith(root)) {\n\t\t\t\t\tpath = path.slice(root.length) || '/'\n\t\t\t\t}\n\t\t\t\treturn path\n\t\t\t}\n\n\t\t\tif (multiselect) {\n\t\t\t\treturn (nodes) => fn(nodes.map(getPath), type)\n\t\t\t} else {\n\t\t\t\treturn (nodes) => fn(getPath(nodes[0]), type)\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Coverting a Node into a legacy file info to support the OC.dialogs.filepicker filter function\n\t\t * @param node The node to convert\n\t\t */\n\t\tconst nodeToLegacyFile = (node) => ({\n\t\t\tid: node.fileid || null,\n\t\t\tpath: node.path,\n\t\t\tmimetype: node.mime || null,\n\t\t\tmtime: node.mtime?.getTime() || null,\n\t\t\tpermissions: node.permissions,\n\t\t\tname: node.attributes?.displayName || node.basename,\n\t\t\tetag: node.attributes?.etag || null,\n\t\t\thasPreview: node.attributes?.hasPreview || null,\n\t\t\tmountType: node.attributes?.mountType || null,\n\t\t\tquotaAvailableBytes: node.attributes?.quotaAvailableBytes || null,\n\t\t\ticon: null,\n\t\t\tsharePermissions: null,\n\t\t})\n\n\t\tconst builder = getFilePickerBuilder(title)\n\n\t\t// Setup buttons\n\t\tif (type === this.FILEPICKER_TYPE_CUSTOM) {\n\t\t\t(options.buttons || []).forEach((button) => {\n\t\t\t\tbuilder.addButton({\n\t\t\t\t\tcallback: legacyCallback(callback, button.type),\n\t\t\t\t\tlabel: button.text,\n\t\t\t\t\ttype: button.defaultButton ? 'primary' : 'secondary',\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\tbuilder.setButtonFactory((nodes, path) => {\n\t\t\t\tconst buttons = []\n\t\t\t\tconst node = nodes?.[0]?.attributes?.displayName || nodes?.[0]?.basename\n\t\t\t\tconst target = node || basename(path)\n\n\t\t\t\tif (type === FilePickerType.Choose) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\tcallback: legacyCallback(callback, FilePickerType.Choose),\n\t\t\t\t\t\tlabel: node && !this.multiSelect ? t('core', 'Choose {file}', { file: node }) : t('core', 'Choose'),\n\t\t\t\t\t\ttype: 'primary',\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (type === FilePickerType.CopyMove || type === FilePickerType.Copy) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\tcallback: legacyCallback(callback, FilePickerType.Copy),\n\t\t\t\t\t\tlabel: target ? t('core', 'Copy to {target}', { target }) : t('core', 'Copy'),\n\t\t\t\t\t\ttype: 'primary',\n\t\t\t\t\t\ticon: IconCopy,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (type === FilePickerType.Move || type === FilePickerType.CopyMove) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\tcallback: legacyCallback(callback, FilePickerType.Move),\n\t\t\t\t\t\tlabel: target ? t('core', 'Move to {target}', { target }) : t('core', 'Move'),\n\t\t\t\t\t\ttype: type === FilePickerType.Move ? 'primary' : 'secondary',\n\t\t\t\t\t\ticon: IconMove,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn buttons\n\t\t\t})\n\t\t}\n\n\t\tif (mimetype) {\n\t\t\tbuilder.setMimeTypeFilter(typeof mimetype === 'string' ? [mimetype] : (mimetype || []))\n\t\t}\n\t\tif (typeof options?.filter === 'function') {\n\t\t\tbuilder.setFilter((node) => options.filter(nodeToLegacyFile(node)))\n\t\t}\n\t\tbuilder.allowDirectories(options?.allowDirectoryChooser === true || mimetype?.includes('httpd/unix-directory') || false)\n\t\t\t.setMultiSelect(multiselect)\n\t\t\t.startAt(path)\n\t\t\t.build()\n\t\t\t.pick()\n\t},\n\n\t/**\n\t * Displays raw dialog\n\t * You better use a wrapper instead ...\n\t *\n\t * @deprecated 30.0.0 Use `@nextcloud/dialogs` instead or build your own with `@nextcloud/vue` NcDialog\n\t */\n\tmessage: function(content, title, dialogType, buttons, callback = () => {}, modal, allowHtml) {\n\t\tconst builder = (new DialogBuilder())\n\t\t\t.setName(title)\n\t\t\t.setText(allowHtml ? '' : content)\n\t\t\t.setButtons(Dialogs._getLegacyButtons(buttons, callback))\n\n\t\tswitch (dialogType) {\n\t\t\tcase 'alert':\n\t\t\t\tbuilder.setSeverity('warning')\n\t\t\t\tbreak\n\t\t\tcase 'notice':\n\t\t\t\tbuilder.setSeverity('info')\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\n\t\tconst dialog = builder.build()\n\t\n\t\tif (allowHtml) {\n\t\t\tdialog.setHTML(content)\n\t\t}\n\n\t\treturn dialog.show().then(() => {\n\t\t\tif(!callback._clicked) {\n\t\t\t\tcallback(false)\n\t\t\t}\n\t\t})\n\t},\n\n\t/**\n\t * Helper for legacy API\n\t * @deprecated\n\t */\n\t_getLegacyButtons(buttons, callback) {\n\t\tconst buttonList = []\n\n\t\tswitch (typeof buttons === 'object' ? buttons.type : buttons) {\n\t\t\tcase Dialogs.YES_NO_BUTTONS:\n\t\t\t\tbuttonList.push({\n\t\t\t\t\tlabel: buttons?.cancel ?? t('core', 'No'),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tcallback._clicked = true\n\t\t\t\t\t\tcallback(false)\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbuttonList.push({\n\t\t\t\t\tlabel: buttons?.confirm ?? t('core', 'Yes'),\n\t\t\t\t\ttype: 'primary',\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tcallback._clicked = true\n\t\t\t\t\t\tcallback(true)\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tcase Dialogs.OK_BUTTONS:\n\t\t\t\tbuttonList.push({\n\t\t\t\t\tlabel: buttons?.confirm ?? t('core', 'OK'),\n\t\t\t\t\ttype: 'primary',\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tcallback._clicked = true\n\t\t\t\t\t\tcallback(true)\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tconsole.error('Invalid call to OC.dialogs')\n\t\t\t\tbreak\n\t\t}\n\t\treturn buttonList\n\t},\n\n\t_fileexistsshown: false,\n\t/**\n\t * Displays file exists dialog\n\t * @param {object} data upload object\n\t * @param {object} original file with name, size and mtime\n\t * @param {object} replacement file with name, size and mtime\n\t * @param {object} controller with onCancel, onSkip, onReplace and onRename methods\n\t * @returns {Promise} jquery promise that resolves after the dialog template was loaded\n\t *\n\t * @deprecated 29.0.0 Use openConflictPicker from the @nextcloud/upload package instead\n\t */\n\tfileexists: function(data, original, replacement, controller) {\n\t\tvar self = this\n\t\tvar dialogDeferred = new $.Deferred()\n\n\t\tvar getCroppedPreview = function(file) {\n\t\t\tvar deferred = new $.Deferred()\n\t\t\t// Only process image files.\n\t\t\tvar type = file.type && file.type.split('/').shift()\n\t\t\tif (window.FileReader && type === 'image') {\n\t\t\t\tvar reader = new FileReader()\n\t\t\t\treader.onload = function(e) {\n\t\t\t\t\tvar blob = new Blob([e.target.result])\n\t\t\t\t\twindow.URL = window.URL || window.webkitURL\n\t\t\t\t\tvar originalUrl = window.URL.createObjectURL(blob)\n\t\t\t\t\tvar image = new Image()\n\t\t\t\t\timage.src = originalUrl\n\t\t\t\t\timage.onload = function() {\n\t\t\t\t\t\tvar url = crop(image)\n\t\t\t\t\t\tdeferred.resolve(url)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t} else {\n\t\t\t\tdeferred.reject()\n\t\t\t}\n\t\t\treturn deferred\n\t\t}\n\n\t\tvar crop = function(img) {\n\t\t\tvar canvas = document.createElement('canvas')\n\t\t\tvar targetSize = 96\n\t\t\tvar width = img.width\n\t\t\tvar height = img.height\n\t\t\tvar x; var y; var size\n\n\t\t\t// Calculate the width and height, constraining the proportions\n\t\t\tif (width > height) {\n\t\t\t\ty = 0\n\t\t\t\tx = (width - height) / 2\n\t\t\t} else {\n\t\t\t\ty = (height - width) / 2\n\t\t\t\tx = 0\n\t\t\t}\n\t\t\tsize = Math.min(width, height)\n\n\t\t\t// Set canvas size to the cropped area\n\t\t\tcanvas.width = size\n\t\t\tcanvas.height = size\n\t\t\tvar ctx = canvas.getContext('2d')\n\t\t\tctx.drawImage(img, x, y, size, size, 0, 0, size, size)\n\n\t\t\t// Resize the canvas to match the destination (right size uses 96px)\n\t\t\tresampleHermite(canvas, size, size, targetSize, targetSize)\n\n\t\t\treturn canvas.toDataURL('image/png', 0.7)\n\t\t}\n\n\t\t/**\n\t\t * Fast image resize/resample using Hermite filter with JavaScript.\n\t\t *\n\t\t * @author: ViliusL\n\t\t *\n\t\t * @param {*} canvas\n\t\t * @param {number} W\n\t\t * @param {number} H\n\t\t * @param {number} W2\n\t\t * @param {number} H2\n\t\t */\n\t\tvar resampleHermite = function(canvas, W, H, W2, H2) {\n\t\t\tW2 = Math.round(W2)\n\t\t\tH2 = Math.round(H2)\n\t\t\tvar img = canvas.getContext('2d').getImageData(0, 0, W, H)\n\t\t\tvar img2 = canvas.getContext('2d').getImageData(0, 0, W2, H2)\n\t\t\tvar data = img.data\n\t\t\tvar data2 = img2.data\n\t\t\tvar ratio_w = W / W2\n\t\t\tvar ratio_h = H / H2\n\t\t\tvar ratio_w_half = Math.ceil(ratio_w / 2)\n\t\t\tvar ratio_h_half = Math.ceil(ratio_h / 2)\n\n\t\t\tfor (var j = 0; j < H2; j++) {\n\t\t\t\tfor (var i = 0; i < W2; i++) {\n\t\t\t\t\tvar x2 = (i + j * W2) * 4\n\t\t\t\t\tvar weight = 0\n\t\t\t\t\tvar weights = 0\n\t\t\t\t\tvar weights_alpha = 0\n\t\t\t\t\tvar gx_r = 0\n\t\t\t\t\tvar gx_g = 0\n\t\t\t\t\tvar gx_b = 0\n\t\t\t\t\tvar gx_a = 0\n\t\t\t\t\tvar center_y = (j + 0.5) * ratio_h\n\t\t\t\t\tfor (var yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++) {\n\t\t\t\t\t\tvar dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half\n\t\t\t\t\t\tvar center_x = (i + 0.5) * ratio_w\n\t\t\t\t\t\tvar w0 = dy * dy // pre-calc part of w\n\t\t\t\t\t\tfor (var xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++) {\n\t\t\t\t\t\t\tvar dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half\n\t\t\t\t\t\t\tvar w = Math.sqrt(w0 + dx * dx)\n\t\t\t\t\t\t\tif (w >= -1 && w <= 1) {\n\t\t\t\t\t\t\t\t// hermite filter\n\t\t\t\t\t\t\t\tweight = 2 * w * w * w - 3 * w * w + 1\n\t\t\t\t\t\t\t\tif (weight > 0) {\n\t\t\t\t\t\t\t\t\tdx = 4 * (xx + yy * W)\n\t\t\t\t\t\t\t\t\t// alpha\n\t\t\t\t\t\t\t\t\tgx_a += weight * data[dx + 3]\n\t\t\t\t\t\t\t\t\tweights_alpha += weight\n\t\t\t\t\t\t\t\t\t// colors\n\t\t\t\t\t\t\t\t\tif (data[dx + 3] < 255) { weight = weight * data[dx + 3] / 250 }\n\t\t\t\t\t\t\t\t\tgx_r += weight * data[dx]\n\t\t\t\t\t\t\t\t\tgx_g += weight * data[dx + 1]\n\t\t\t\t\t\t\t\t\tgx_b += weight * data[dx + 2]\n\t\t\t\t\t\t\t\t\tweights += weight\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata2[x2] = gx_r / weights\n\t\t\t\t\tdata2[x2 + 1] = gx_g / weights\n\t\t\t\t\tdata2[x2 + 2] = gx_b / weights\n\t\t\t\t\tdata2[x2 + 3] = gx_a / weights_alpha\n\t\t\t\t}\n\t\t\t}\n\t\t\tcanvas.getContext('2d').clearRect(0, 0, Math.max(W, W2), Math.max(H, H2))\n\t\t\tcanvas.width = W2\n\t\t\tcanvas.height = H2\n\t\t\tcanvas.getContext('2d').putImageData(img2, 0, 0)\n\t\t}\n\n\t\tvar addConflict = function($conflicts, original, replacement) {\n\n\t\t\tvar $conflict = $conflicts.find('.template').clone().removeClass('template').addClass('conflict')\n\t\t\tvar $originalDiv = $conflict.find('.original')\n\t\t\tvar $replacementDiv = $conflict.find('.replacement')\n\n\t\t\t$conflict.data('data', data)\n\n\t\t\t$conflict.find('.filename').text(original.name)\n\t\t\t$originalDiv.find('.size').text(OC.Util.humanFileSize(original.size))\n\t\t\t$originalDiv.find('.mtime').text(OC.Util.formatDate(original.mtime))\n\t\t\t// ie sucks\n\t\t\tif (replacement.size && replacement.lastModified) {\n\t\t\t\t$replacementDiv.find('.size').text(OC.Util.humanFileSize(replacement.size))\n\t\t\t\t$replacementDiv.find('.mtime').text(OC.Util.formatDate(replacement.lastModified))\n\t\t\t}\n\t\t\tvar path = original.directory + '/' + original.name\n\t\t\tvar urlSpec = {\n\t\t\t\tfile: path,\n\t\t\t\tx: 96,\n\t\t\t\ty: 96,\n\t\t\t\tc: original.etag,\n\t\t\t\tforceIcon: 0\n\t\t\t}\n\t\t\tvar previewpath = Files.generatePreviewUrl(urlSpec)\n\t\t\t// Escaping single quotes\n\t\t\tpreviewpath = previewpath.replace(/'/g, '%27')\n\t\t\t$originalDiv.find('.icon').css({ 'background-image': \"url('\" + previewpath + \"')\" })\n\t\t\tgetCroppedPreview(replacement).then(\n\t\t\t\tfunction(path) {\n\t\t\t\t\t$replacementDiv.find('.icon').css('background-image', 'url(' + path + ')')\n\t\t\t\t}, function() {\n\t\t\t\t\tpath = OC.MimeType.getIconUrl(replacement.type)\n\t\t\t\t\t$replacementDiv.find('.icon').css('background-image', 'url(' + path + ')')\n\t\t\t\t}\n\t\t\t)\n\t\t\t// connect checkboxes with labels\n\t\t\tvar checkboxId = $conflicts.find('.conflict').length\n\t\t\t$originalDiv.find('input:checkbox').attr('id', 'checkbox_original_' + checkboxId)\n\t\t\t$replacementDiv.find('input:checkbox').attr('id', 'checkbox_replacement_' + checkboxId)\n\n\t\t\t$conflicts.append($conflict)\n\n\t\t\t// set more recent mtime bold\n\t\t\t// ie sucks\n\t\t\tif (replacement.lastModified > original.mtime) {\n\t\t\t\t$replacementDiv.find('.mtime').css('font-weight', 'bold')\n\t\t\t} else if (replacement.lastModified < original.mtime) {\n\t\t\t\t$originalDiv.find('.mtime').css('font-weight', 'bold')\n\t\t\t} else {\n\t\t\t\t// TODO add to same mtime collection?\n\t\t\t}\n\n\t\t\t// set bigger size bold\n\t\t\tif (replacement.size && replacement.size > original.size) {\n\t\t\t\t$replacementDiv.find('.size').css('font-weight', 'bold')\n\t\t\t} else if (replacement.size && replacement.size < original.size) {\n\t\t\t\t$originalDiv.find('.size').css('font-weight', 'bold')\n\t\t\t} else {\n\t\t\t\t// TODO add to same size collection?\n\t\t\t}\n\n\t\t\t// TODO show skip action for files with same size and mtime in bottom row\n\n\t\t\t// always keep readonly files\n\n\t\t\tif (original.status === 'readonly') {\n\t\t\t\t$originalDiv\n\t\t\t\t\t.addClass('readonly')\n\t\t\t\t\t.find('input[type=\"checkbox\"]')\n\t\t\t\t\t.prop('checked', true)\n\t\t\t\t\t.prop('disabled', true)\n\t\t\t\t$originalDiv.find('.message')\n\t\t\t\t\t.text(t('core', 'read-only'))\n\t\t\t}\n\t\t}\n\t\t// var selection = controller.getSelection(data.originalFiles);\n\t\t// if (selection.defaultAction) {\n\t\t//\tcontroller[selection.defaultAction](data);\n\t\t// } else {\n\t\tvar dialogName = 'oc-dialog-fileexists-content'\n\t\tvar dialogId = '#' + dialogName\n\t\tif (this._fileexistsshown) {\n\t\t\t// add conflict\n\n\t\t\tvar $conflicts = $(dialogId + ' .conflicts')\n\t\t\taddConflict($conflicts, original, replacement)\n\n\t\t\tvar count = $(dialogId + ' .conflict').length\n\t\t\tvar title = n('core',\n\t\t\t\t'{count} file conflict',\n\t\t\t\t'{count} file conflicts',\n\t\t\t\tcount,\n\t\t\t\t{ count: count }\n\t\t\t)\n\t\t\t$(dialogId).parent().children('.oc-dialog-title').text(title)\n\n\t\t\t// recalculate dimensions\n\t\t\t$(window).trigger('resize')\n\t\t\tdialogDeferred.resolve()\n\t\t} else {\n\t\t\t// create dialog\n\t\t\tthis._fileexistsshown = true\n\t\t\t$.when(this._getFileExistsTemplate()).then(function($tmpl) {\n\t\t\t\tvar title = t('core', 'One file conflict')\n\t\t\t\tvar $dlg = $tmpl.octemplate({\n\t\t\t\t\tdialog_name: dialogName,\n\t\t\t\t\ttitle: title,\n\t\t\t\t\ttype: 'fileexists',\n\n\t\t\t\t\tallnewfiles: t('core', 'New Files'),\n\t\t\t\t\tallexistingfiles: t('core', 'Already existing files'),\n\n\t\t\t\t\twhy: t('core', 'Which files do you want to keep?'),\n\t\t\t\t\twhat: t('core', 'If you select both versions, the copied file will have a number added to its name.')\n\t\t\t\t})\n\t\t\t\t$('body').append($dlg)\n\n\t\t\t\tif (original && replacement) {\n\t\t\t\t\tvar $conflicts = $dlg.find('.conflicts')\n\t\t\t\t\taddConflict($conflicts, original, replacement)\n\t\t\t\t}\n\n\t\t\t\tvar buttonlist = [{\n\t\t\t\t\ttext: t('core', 'Cancel'),\n\t\t\t\t\tclasses: 'cancel',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tif (typeof controller.onCancel !== 'undefined') {\n\t\t\t\t\t\t\tcontroller.onCancel(data)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: t('core', 'Continue'),\n\t\t\t\t\tclasses: 'continue',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tif (typeof controller.onContinue !== 'undefined') {\n\t\t\t\t\t\t\tcontroller.onContinue($(dialogId + ' .conflict'))\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(dialogId).ocdialog('close')\n\t\t\t\t\t}\n\t\t\t\t}]\n\n\t\t\t\t$(dialogId).ocdialog({\n\t\t\t\t\twidth: 500,\n\t\t\t\t\tcloseOnEscape: true,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: buttonlist,\n\t\t\t\t\tcloseButton: null,\n\t\t\t\t\tclose: function() {\n\t\t\t\t\t\tself._fileexistsshown = false\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t$(this).ocdialog('destroy').remove()\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// ignore\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t$(dialogId).css('height', 'auto')\n\n\t\t\t\tvar $primaryButton = $dlg.closest('.oc-dialog').find('button.continue')\n\t\t\t\t$primaryButton.prop('disabled', true)\n\n\t\t\t\tfunction updatePrimaryButton() {\n\t\t\t\t\tvar checkedCount = $dlg.find('.conflicts .checkbox:checked').length\n\t\t\t\t\t$primaryButton.prop('disabled', checkedCount === 0)\n\t\t\t\t}\n\n\t\t\t\t// add checkbox toggling actions\n\t\t\t\t$(dialogId).find('.allnewfiles').on('click', function() {\n\t\t\t\t\tvar $checkboxes = $(dialogId).find('.conflict .replacement input[type=\"checkbox\"]')\n\t\t\t\t\t$checkboxes.prop('checked', $(this).prop('checked'))\n\t\t\t\t})\n\t\t\t\t$(dialogId).find('.allexistingfiles').on('click', function() {\n\t\t\t\t\tvar $checkboxes = $(dialogId).find('.conflict .original:not(.readonly) input[type=\"checkbox\"]')\n\t\t\t\t\t$checkboxes.prop('checked', $(this).prop('checked'))\n\t\t\t\t})\n\t\t\t\t$(dialogId).find('.conflicts').on('click', '.replacement,.original:not(.readonly)', function() {\n\t\t\t\t\tvar $checkbox = $(this).find('input[type=\"checkbox\"]')\n\t\t\t\t\t$checkbox.prop('checked', !$checkbox.prop('checked'))\n\t\t\t\t})\n\t\t\t\t$(dialogId).find('.conflicts').on('click', '.replacement input[type=\"checkbox\"],.original:not(.readonly) input[type=\"checkbox\"]', function() {\n\t\t\t\t\tvar $checkbox = $(this)\n\t\t\t\t\t$checkbox.prop('checked', !$checkbox.prop('checked'))\n\t\t\t\t})\n\n\t\t\t\t// update counters\n\t\t\t\t$(dialogId).on('click', '.replacement,.allnewfiles', function() {\n\t\t\t\t\tvar count = $(dialogId).find('.conflict .replacement input[type=\"checkbox\"]:checked').length\n\t\t\t\t\tif (count === $(dialogId + ' .conflict').length) {\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', true)\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text(t('core', '(all selected)'))\n\t\t\t\t\t} else if (count > 0) {\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', false)\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text(t('core', '({count} selected)', { count: count }))\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles').prop('checked', false)\n\t\t\t\t\t\t$(dialogId).find('.allnewfiles + .count').text('')\n\t\t\t\t\t}\n\t\t\t\t\tupdatePrimaryButton()\n\t\t\t\t})\n\t\t\t\t$(dialogId).on('click', '.original,.allexistingfiles', function() {\n\t\t\t\t\tvar count = $(dialogId).find('.conflict .original input[type=\"checkbox\"]:checked').length\n\t\t\t\t\tif (count === $(dialogId + ' .conflict').length) {\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', true)\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count').text(t('core', '(all selected)'))\n\t\t\t\t\t} else if (count > 0) {\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', false)\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count')\n\t\t\t\t\t\t\t.text(t('core', '({count} selected)', { count: count }))\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles').prop('checked', false)\n\t\t\t\t\t\t$(dialogId).find('.allexistingfiles + .count').text('')\n\t\t\t\t\t}\n\t\t\t\t\tupdatePrimaryButton()\n\t\t\t\t})\n\n\t\t\t\tdialogDeferred.resolve()\n\t\t\t})\n\t\t\t\t.fail(function() {\n\t\t\t\t\tdialogDeferred.reject()\n\t\t\t\t\talert(t('core', 'Error loading file exists template'))\n\t\t\t\t})\n\t\t}\n\t\t// }\n\t\treturn dialogDeferred.promise()\n\t},\n\n\t_getFileExistsTemplate: function() {\n\t\tvar defer = $.Deferred()\n\t\tif (!this.$fileexistsTemplate) {\n\t\t\tvar self = this\n\t\t\t$.get(OC.filePath('files', 'templates', 'fileexists.html'), function(tmpl) {\n\t\t\t\tself.$fileexistsTemplate = $(tmpl)\n\t\t\t\tdefer.resolve(self.$fileexistsTemplate)\n\t\t\t})\n\t\t\t\t.fail(function() {\n\t\t\t\t\tdefer.reject()\n\t\t\t\t})\n\t\t} else {\n\t\t\tdefer.resolve(this.$fileexistsTemplate)\n\t\t}\n\t\treturn defer.promise()\n\t},\n}\n\nexport default Dialogs\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2015 ownCloud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/* eslint-disable */\nimport $ from 'jquery'\n\nimport { getToken } from './requesttoken.js'\n\n/**\n * Create a new event source\n * @param {string} src\n * @param {object} [data] to be send as GET\n *\n * @constructs OCEventSource\n */\nconst OCEventSource = function(src, data) {\n\tvar dataStr = ''\n\tvar name\n\tvar joinChar\n\tthis.typelessListeners = []\n\tthis.closed = false\n\tthis.listeners = {}\n\tif (data) {\n\t\tfor (name in data) {\n\t\t\tdataStr += name + '=' + encodeURIComponent(data[name]) + '&'\n\t\t}\n\t}\n\tdataStr += 'requesttoken=' + encodeURIComponent(getToken())\n\tif (!this.useFallBack && typeof EventSource !== 'undefined') {\n\t\tjoinChar = '&'\n\t\tif (src.indexOf('?') === -1) {\n\t\t\tjoinChar = '?'\n\t\t}\n\t\tthis.source = new EventSource(src + joinChar + dataStr)\n\t\tthis.source.onmessage = function(e) {\n\t\t\tfor (var i = 0; i < this.typelessListeners.length; i++) {\n\t\t\t\tthis.typelessListeners[i](JSON.parse(e.data))\n\t\t\t}\n\t\t}.bind(this)\n\t} else {\n\t\tvar iframeId = 'oc_eventsource_iframe_' + OCEventSource.iframeCount\n\t\tOCEventSource.fallBackSources[OCEventSource.iframeCount] = this\n\t\tthis.iframe = $('<iframe></iframe>')\n\t\tthis.iframe.attr('id', iframeId)\n\t\tthis.iframe.hide()\n\n\t\tjoinChar = '&'\n\t\tif (src.indexOf('?') === -1) {\n\t\t\tjoinChar = '?'\n\t\t}\n\t\tthis.iframe.attr('src', src + joinChar + 'fallback=true&fallback_id=' + OCEventSource.iframeCount + '&' + dataStr)\n\t\t$('body').append(this.iframe)\n\t\tthis.useFallBack = true\n\t\tOCEventSource.iframeCount++\n\t}\n\t// add close listener\n\tthis.listen('__internal__', function(data) {\n\t\tif (data === 'close') {\n\t\t\tthis.close()\n\t\t}\n\t}.bind(this))\n}\nOCEventSource.fallBackSources = []\nOCEventSource.iframeCount = 0// number of fallback iframes\nOCEventSource.fallBackCallBack = function(id, type, data) {\n\tOCEventSource.fallBackSources[id].fallBackCallBack(type, data)\n}\nOCEventSource.prototype = {\n\ttypelessListeners: [],\n\tiframe: null,\n\tlisteners: {}, // only for fallback\n\tuseFallBack: false,\n\t/**\n\t * Fallback callback for browsers that don't have the\n\t * native EventSource object.\n\t *\n\t * Calls the registered listeners.\n\t *\n\t * @private\n\t * @param {String} type event type\n\t * @param {Object} data received data\n\t */\n\tfallBackCallBack: function(type, data) {\n\t\tvar i\n\t\t// ignore messages that might appear after closing\n\t\tif (this.closed) {\n\t\t\treturn\n\t\t}\n\t\tif (type) {\n\t\t\tif (typeof this.listeners.done !== 'undefined') {\n\t\t\t\tfor (i = 0; i < this.listeners[type].length; i++) {\n\t\t\t\t\tthis.listeners[type][i](data)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < this.typelessListeners.length; i++) {\n\t\t\t\tthis.typelessListeners[i](data)\n\t\t\t}\n\t\t}\n\t},\n\tlastLength: 0, // for fallback\n\t/**\n\t * Listen to a given type of events.\n\t *\n\t * @param {String} type event type\n\t * @param {Function} callback event callback\n\t */\n\tlisten: function(type, callback) {\n\t\tif (callback && callback.call) {\n\n\t\t\tif (type) {\n\t\t\t\tif (this.useFallBack) {\n\t\t\t\t\tif (!this.listeners[type]) {\n\t\t\t\t\t\tthis.listeners[type] = []\n\t\t\t\t\t}\n\t\t\t\t\tthis.listeners[type].push(callback)\n\t\t\t\t} else {\n\t\t\t\t\tthis.source.addEventListener(type, function(e) {\n\t\t\t\t\t\tif (typeof e.data !== 'undefined') {\n\t\t\t\t\t\t\tcallback(JSON.parse(e.data))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback('')\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.typelessListeners.push(callback)\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Closes this event source.\n\t */\n\tclose: function() {\n\t\tthis.closed = true\n\t\tif (typeof this.source !== 'undefined') {\n\t\t\tthis.source.close()\n\t\t}\n\t}\n}\n\nexport default OCEventSource\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport const get = context => name => {\n\tconst namespaces = name.split('.')\n\tconst tail = namespaces.pop()\n\n\tfor (let i = 0; i < namespaces.length; i++) {\n\t\tcontext = context[namespaces[i]]\n\t\tif (!context) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn context[tail]\n}\n\n/**\n * Set a variable by name\n *\n * @param {string} context context\n * @return {Function} setter\n * @deprecated 19.0.0 use https://lodash.com/docs#set\n */\nexport const set = context => (name, value) => {\n\tconst namespaces = name.split('.')\n\tconst tail = namespaces.pop()\n\n\tfor (let i = 0; i < namespaces.length; i++) {\n\t\tif (!context[namespaces[i]]) {\n\t\t\tcontext[namespaces[i]] = {}\n\t\t}\n\t\tcontext = context[namespaces[i]]\n\t}\n\tcontext[tail] = value\n\treturn value\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getCapabilities as realGetCapabilities } from '@nextcloud/capabilities'\n\n/**\n * Returns the capabilities\n *\n * @return {Array} capabilities\n *\n * @since 14.0.0\n */\nexport const getCapabilities = () => {\n\tOC.debug && console.warn('OC.getCapabilities is deprecated and will be removed in Nextcloud 21. See @nextcloud/capabilities')\n\treturn realGetCapabilities()\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport const getProtocol = () => window.location.protocol.split(':')[0]\n\n/**\n * Returns the host used to access this Nextcloud instance\n * Host is sometimes the same as the hostname but now always.\n *\n * Examples:\n * http://example.com => example.com\n * https://example.com => example.com\n * http://example.com:8080 => example.com:8080\n *\n * @return {string} host\n *\n * @since 8.2.0\n * @deprecated 17.0.0 use window.location.host directly\n */\nexport const getHost = () => window.location.host\n\n/**\n * Returns the hostname used to access this Nextcloud instance\n * The hostname is always stripped of the port\n *\n * @return {string} hostname\n * @since 9.0.0\n * @deprecated 17.0.0 use window.location.hostname directly\n */\nexport const getHostName = () => window.location.hostname\n\n/**\n * Returns the port number used to access this Nextcloud instance\n *\n * @return {number} port number\n *\n * @since 8.2.0\n * @deprecated 17.0.0 use window.location.port directly\n */\nexport const getPort = () => window.location.port\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport _ from 'underscore'\n/** @typedef {import('jquery')} jQuery */\nimport $ from 'jquery'\n\nimport { menuSpeed } from './constants.js'\n\nexport let currentMenu = null\nexport let currentMenuToggle = null\n\n/**\n * For menu toggling\n *\n * @param {jQuery} $toggle the toggle element\n * @param {jQuery} $menuEl the menu container element\n * @param {Function | undefined} toggle callback invoked everytime the menu is opened\n * @param {boolean} headerMenu is this a top right header menu?\n * @return {void}\n */\nexport const registerMenu = function($toggle, $menuEl, toggle, headerMenu) {\n\t$menuEl.addClass('menu')\n\tconst isClickableElement = $toggle.prop('tagName') === 'A' || $toggle.prop('tagName') === 'BUTTON'\n\n\t// On link and button, the enter key trigger a click event\n\t// Only use the click to avoid two fired events\n\t$toggle.on(isClickableElement ? 'click.menu' : 'click.menu keyup.menu', function(event) {\n\t\t// prevent the link event (append anchor to URL)\n\t\tevent.preventDefault()\n\n\t\t// allow enter key as a trigger\n\t\tif (event.key && event.key !== 'Enter') {\n\t\t\treturn\n\t\t}\n\n\t\tif ($menuEl.is(currentMenu)) {\n\t\t\thideMenus()\n\t\t\treturn\n\t\t} else if (currentMenu) {\n\t\t\t// another menu was open?\n\t\t\t// close it\n\t\t\thideMenus()\n\t\t}\n\n\t\tif (headerMenu === true) {\n\t\t\t$menuEl.parent().addClass('openedMenu')\n\t\t}\n\n\t\t// Set menu to expanded\n\t\t$toggle.attr('aria-expanded', true)\n\n\t\t$menuEl.slideToggle(menuSpeed, toggle)\n\t\tcurrentMenu = $menuEl\n\t\tcurrentMenuToggle = $toggle\n\t})\n}\n\n/**\n * Unregister a previously registered menu\n *\n * @param {jQuery} $toggle the toggle element\n * @param {jQuery} $menuEl the menu container element\n */\nexport const unregisterMenu = ($toggle, $menuEl) => {\n\t// close menu if opened\n\tif ($menuEl.is(currentMenu)) {\n\t\thideMenus()\n\t}\n\t$toggle.off('click.menu').removeClass('menutoggle')\n\t$menuEl.removeClass('menu')\n}\n\n/**\n * Hides any open menus\n *\n * @param {Function} complete callback when the hiding animation is done\n */\nexport const hideMenus = function(complete) {\n\tif (currentMenu) {\n\t\tconst lastMenu = currentMenu\n\t\tcurrentMenu.trigger(new $.Event('beforeHide'))\n\t\tcurrentMenu.slideUp(menuSpeed, function() {\n\t\t\tlastMenu.trigger(new $.Event('afterHide'))\n\t\t\tif (complete) {\n\t\t\t\tcomplete.apply(this, arguments)\n\t\t\t}\n\t\t})\n\t}\n\n\t// Set menu to closed\n\t$('.menutoggle').attr('aria-expanded', false)\n\tif (currentMenuToggle) {\n\t\tcurrentMenuToggle.attr('aria-expanded', false)\n\t}\n\n\t$('.openedMenu').removeClass('openedMenu')\n\tcurrentMenu = null\n\tcurrentMenuToggle = null\n}\n\n/**\n * Shows a given element as menu\n *\n * @param {object} [$toggle=null] menu toggle\n * @param {object} $menuEl menu element\n * @param {Function} complete callback when the showing animation is done\n */\nexport const showMenu = ($toggle, $menuEl, complete) => {\n\tif ($menuEl.is(currentMenu)) {\n\t\treturn\n\t}\n\thideMenus()\n\tcurrentMenu = $menuEl\n\tcurrentMenuToggle = $toggle\n\t$menuEl.trigger(new $.Event('beforeShow'))\n\t$menuEl.show()\n\t$menuEl.trigger(new $.Event('afterShow'))\n\t// no animation\n\tif (_.isFunction(complete)) {\n\t\tcomplete()\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst isAdmin = !!window._oc_isadmin\n\n/**\n * Returns whether the current user is an administrator\n *\n * @return {boolean} true if the user is an admin, false otherwise\n * @since 9.0.0\n */\nexport const isUserAdmin = () => isAdmin\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport {\n\tgetRootUrl as realGetRootUrl,\n} from '@nextcloud/router'\n\n/**\n * Creates a relative url for remote use\n *\n * @param {string} service id\n * @return {string} the url\n */\nexport const linkToRemoteBase = service => {\n\treturn realGetRootUrl() + '/remote.php/' + service\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport $ from 'jquery'\n\n/**\n * A little class to manage a status field for a \"saving\" process.\n * It can be used to display a starting message (e.g. \"Saving...\") and then\n * replace it with a green success message or a red error message.\n *\n * @namespace OC.msg\n */\nexport default {\n\t/**\n\t * Displayes a \"Saving...\" message in the given message placeholder\n\t *\n\t * @param {object} selector    Placeholder to display the message in\n\t */\n\tstartSaving(selector) {\n\t\tthis.startAction(selector, t('core', 'Saving '))\n\t},\n\n\t/**\n\t * Displayes a custom message in the given message placeholder\n\t *\n\t * @param {object} selector    Placeholder to display the message in\n\t * @param {string} message    Plain text message to display (no HTML allowed)\n\t */\n\tstartAction(selector, message) {\n\t\t$(selector).text(message)\n\t\t\t.removeClass('success')\n\t\t\t.removeClass('error')\n\t\t\t.stop(true, true)\n\t\t\t.show()\n\t},\n\n\t/**\n\t * Displayes an success/error message in the given selector\n\t *\n\t * @param {object} selector    Placeholder to display the message in\n\t * @param {object} response    Response of the server\n\t * @param {object} response.data    Data of the servers response\n\t * @param {string} response.data.message    Plain text message to display (no HTML allowed)\n\t * @param {string} response.status    is being used to decide whether the message\n\t * is displayed as an error/success\n\t */\n\tfinishedSaving(selector, response) {\n\t\tthis.finishedAction(selector, response)\n\t},\n\n\t/**\n\t * Displayes an success/error message in the given selector\n\t *\n\t * @param {object} selector    Placeholder to display the message in\n\t * @param {object} response    Response of the server\n\t * @param {object} response.data Data of the servers response\n\t * @param {string} response.data.message Plain text message to display (no HTML allowed)\n\t * @param {string} response.status is being used to decide whether the message\n\t * is displayed as an error/success\n\t */\n\tfinishedAction(selector, response) {\n\t\tif (response.status === 'success') {\n\t\t\tthis.finishedSuccess(selector, response.data.message)\n\t\t} else {\n\t\t\tthis.finishedError(selector, response.data.message)\n\t\t}\n\t},\n\n\t/**\n\t * Displayes an success message in the given selector\n\t *\n\t * @param {object} selector Placeholder to display the message in\n\t * @param {string} message Plain text success message to display (no HTML allowed)\n\t */\n\tfinishedSuccess(selector, message) {\n\t\t$(selector).text(message)\n\t\t\t.addClass('success')\n\t\t\t.removeClass('error')\n\t\t\t.stop(true, true)\n\t\t\t.delay(3000)\n\t\t\t.fadeOut(900)\n\t\t\t.show()\n\t},\n\n\t/**\n\t * Displayes an error message in the given selector\n\t *\n\t * @param {object} selector Placeholder to display the message in\n\t * @param {string} message Plain text error message to display (no HTML allowed)\n\t */\n\tfinishedError(selector, message) {\n\t\t$(selector).text(message)\n\t\t\t.addClass('error')\n\t\t\t.removeClass('success')\n\t\t\t.show()\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { confirmPassword, isPasswordConfirmationRequired } from '@nextcloud/password-confirmation'\nimport '@nextcloud/password-confirmation/dist/style.css'\n\n/**\n * @namespace OC.PasswordConfirmation\n */\nexport default {\n\n\trequiresPasswordConfirmation() {\n\t\treturn isPasswordConfirmationRequired()\n\t},\n\n\t/**\n\t * @param {Function} callback success callback function\n\t * @param {object} options options currently not used by confirmPassword\n\t * @param {Function} rejectCallback error callback function\n\t */\n\trequirePasswordConfirmation(callback, options, rejectCallback) {\n\t\tconfirmPassword().then(callback, rejectCallback)\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport default {\n\n\t/**\n\t * @type {Array.<OC.Plugin>}\n\t */\n\t_plugins: {},\n\n\t/**\n\t * Register plugin\n\t *\n\t * @param {string} targetName app name / class name to hook into\n\t * @param {OC.Plugin} plugin plugin\n\t */\n\tregister(targetName, plugin) {\n\t\tlet plugins = this._plugins[targetName]\n\t\tif (!plugins) {\n\t\t\tplugins = this._plugins[targetName] = []\n\t\t}\n\t\tplugins.push(plugin)\n\t},\n\n\t/**\n\t * Returns all plugin registered to the given target\n\t * name / app name / class name.\n\t *\n\t * @param {string} targetName app name / class name to hook into\n\t * @return {Array.<OC.Plugin>} array of plugins\n\t */\n\tgetPlugins(targetName) {\n\t\treturn this._plugins[targetName] || []\n\t},\n\n\t/**\n\t * Call attach() on all plugins registered to the given target name.\n\t *\n\t * @param {string} targetName app name / class name\n\t * @param {object} targetObject to be extended\n\t * @param {object} [options] options\n\t */\n\tattach(targetName, targetObject, options) {\n\t\tconst plugins = this.getPlugins(targetName)\n\t\tfor (let i = 0; i < plugins.length; i++) {\n\t\t\tif (plugins[i].attach) {\n\t\t\t\tplugins[i].attach(targetObject, options)\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Call detach() on all plugins registered to the given target name.\n\t *\n\t * @param {string} targetName app name / class name\n\t * @param {object} targetObject to be extended\n\t * @param {object} [options] options\n\t */\n\tdetach(targetName, targetObject, options) {\n\t\tconst plugins = this.getPlugins(targetName)\n\t\tfor (let i = 0; i < plugins.length; i++) {\n\t\t\tif (plugins[i].detach) {\n\t\t\t\tplugins[i].detach(targetObject, options)\n\t\t\t}\n\t\t}\n\t},\n\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport const theme = window._theme || {}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport _ from 'underscore'\nimport OC from './index.js'\n\n/**\n * Utility class for the history API,\n * includes fallback to using the URL hash when\n * the browser doesn't support the history API.\n *\n * @namespace OC.Util.History\n */\nexport default {\n\n\t_handlers: [],\n\n\t/**\n\t * Push the current URL parameters to the history stack\n\t * and change the visible URL.\n\t * Note: this includes a workaround for IE8/IE9 that uses\n\t * the hash part instead of the search part.\n\t *\n\t * @param {object | string} params to append to the URL, can be either a string\n\t * or a map\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used,\n\t * using the params as query string\n\t * @param {boolean} [replace=false] whether to replace instead of pushing\n\t */\n\t_pushState(params, url, replace) {\n\t\tlet strParams\n\t\tif (typeof (params) === 'string') {\n\t\t\tstrParams = params\n\t\t} else {\n\t\t\tstrParams = OC.buildQueryString(params)\n\t\t}\n\n\t\tif (window.history.pushState) {\n\t\t\turl = url || location.pathname + '?' + strParams\n\t\t\t// Workaround for bug with SVG and window.history.pushState on Firefox < 51\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=652991\n\t\t\tconst isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n\t\t\tif (isFirefox && parseInt(navigator.userAgent.split('/').pop()) < 51) {\n\t\t\t\tconst patterns = document.querySelectorAll('[fill^=\"url(#\"], [stroke^=\"url(#\"], [filter^=\"url(#invert\"]')\n\t\t\t\tfor (let i = 0, ii = patterns.length, pattern; i < ii; i++) {\n\t\t\t\t\tpattern = patterns[i]\n\t\t\t\t\t// eslint-disable-next-line no-self-assign\n\t\t\t\t\tpattern.style.fill = pattern.style.fill\n\t\t\t\t\t// eslint-disable-next-line no-self-assign\n\t\t\t\t\tpattern.style.stroke = pattern.style.stroke\n\t\t\t\t\tpattern.removeAttribute('filter')\n\t\t\t\t\tpattern.setAttribute('filter', 'url(#invert)')\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (replace) {\n\t\t\t\twindow.history.replaceState(params, '', url)\n\t\t\t} else {\n\t\t\t\twindow.history.pushState(params, '', url)\n\t\t\t}\n\t\t} else {\n\t\t\t// use URL hash for IE8\n\t\t\twindow.location.hash = '?' + strParams\n\t\t\t// inhibit next onhashchange that just added itself\n\t\t\t// to the event queue\n\t\t\tthis._cancelPop = true\n\t\t}\n\t},\n\n\t/**\n\t * Push the current URL parameters to the history stack\n\t * and change the visible URL.\n\t * Note: this includes a workaround for IE8/IE9 that uses\n\t * the hash part instead of the search part.\n\t *\n\t * @param {object | string} params to append to the URL, can be either a string or a map\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used, using the params as query string\n\t */\n\tpushState(params, url) {\n\t\tthis._pushState(params, url, false)\n\t},\n\n\t/**\n\t * Push the current URL parameters to the history stack\n\t * and change the visible URL.\n\t * Note: this includes a workaround for IE8/IE9 that uses\n\t * the hash part instead of the search part.\n\t *\n\t * @param {object | string} params to append to the URL, can be either a string\n\t * or a map\n\t * @param {string} [url] URL to be used, otherwise the current URL will be used,\n\t * using the params as query string\n\t */\n\treplaceState(params, url) {\n\t\tthis._pushState(params, url, true)\n\t},\n\n\t/**\n\t * Add a popstate handler\n\t *\n\t * @param {Function} handler handler\n\t */\n\taddOnPopStateHandler(handler) {\n\t\tthis._handlers.push(handler)\n\t},\n\n\t/**\n\t * Parse a query string from the hash part of the URL.\n\t * (workaround for IE8 / IE9)\n\t *\n\t * @return {string}\n\t */\n\t_parseHashQuery() {\n\t\tconst hash = window.location.hash\n\t\tconst pos = hash.indexOf('?')\n\t\tif (pos >= 0) {\n\t\t\treturn hash.substr(pos + 1)\n\t\t}\n\t\tif (hash.length) {\n\t\t\t// remove hash sign\n\t\t\treturn hash.substr(1)\n\t\t}\n\t\treturn ''\n\t},\n\n\t_decodeQuery(query) {\n\t\treturn query.replace(/\\+/g, ' ')\n\t},\n\n\t/**\n\t * Parse the query/search part of the URL.\n\t * Also try and parse it from the URL hash (for IE8)\n\t *\n\t * @return {object} map of parameters\n\t */\n\tparseUrlQuery() {\n\t\tconst query = this._parseHashQuery()\n\t\tlet params\n\t\t// try and parse from URL hash first\n\t\tif (query) {\n\t\t\tparams = OC.parseQueryString(this._decodeQuery(query))\n\t\t}\n\t\t// else read from query attributes\n\t\tparams = _.extend(params || {}, OC.parseQueryString(this._decodeQuery(location.search)))\n\t\treturn params || {}\n\t},\n\n\t_onPopState(e) {\n\t\tif (this._cancelPop) {\n\t\t\tthis._cancelPop = false\n\t\t\treturn\n\t\t}\n\t\tlet params\n\t\tif (!this._handlers.length) {\n\t\t\treturn\n\t\t}\n\t\tparams = (e && e.state)\n\t\tif (_.isString(params)) {\n\t\t\tparams = OC.parseQueryString(params)\n\t\t} else if (!params) {\n\t\t\tparams = this.parseUrlQuery() || {}\n\t\t}\n\t\tfor (let i = 0; i < this._handlers.length; i++) {\n\t\t\tthis._handlers[i](params)\n\t\t}\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport moment from 'moment'\n\nimport History from './util-history.js'\nimport OC from './index.js'\nimport { formatFileSize as humanFileSize } from '@nextcloud/files'\n\n/**\n * @param {any} t -\n */\nfunction chunkify(t) {\n\t// Adapted from http://my.opera.com/GreyWyvern/blog/show.dml/1671288\n\tconst tz = []\n\tlet x = 0\n\tlet y = -1\n\tlet n = 0\n\tlet c\n\n\twhile (x < t.length) {\n\t\tc = t.charAt(x)\n\t\t// only include the dot in strings\n\t\tconst m = ((!n && c === '.') || (c >= '0' && c <= '9'))\n\t\tif (m !== n) {\n\t\t\t// next chunk\n\t\t\ty++\n\t\t\ttz[y] = ''\n\t\t\tn = m\n\t\t}\n\t\ttz[y] += c\n\t\tx++\n\t}\n\treturn tz\n}\n\n/**\n * Utility functions\n *\n * @namespace OC.Util\n */\nexport default {\n\n\tHistory,\n\n\t/**\n\t * @deprecated use https://nextcloud.github.io/nextcloud-files/functions/formatFileSize.html\n\t */\n\thumanFileSize,\n\n\t/**\n\t * Returns a file size in bytes from a humanly readable string\n\t * Makes 2kB to 2048.\n\t * Inspired by computerFileSize in helper.php\n\t *\n\t * @param  {string} string file size in human-readable format\n\t * @return {number} or null if string could not be parsed\n\t *\n\t *\n\t */\n\tcomputerFileSize(string) {\n\t\tif (typeof string !== 'string') {\n\t\t\treturn null\n\t\t}\n\n\t\tconst s = string.toLowerCase().trim()\n\t\tlet bytes = null\n\n\t\tconst bytesArray = {\n\t\t\tb: 1,\n\t\t\tk: 1024,\n\t\t\tkb: 1024,\n\t\t\tmb: 1024 * 1024,\n\t\t\tm: 1024 * 1024,\n\t\t\tgb: 1024 * 1024 * 1024,\n\t\t\tg: 1024 * 1024 * 1024,\n\t\t\ttb: 1024 * 1024 * 1024 * 1024,\n\t\t\tt: 1024 * 1024 * 1024 * 1024,\n\t\t\tpb: 1024 * 1024 * 1024 * 1024 * 1024,\n\t\t\tp: 1024 * 1024 * 1024 * 1024 * 1024,\n\t\t}\n\n\t\tconst matches = s.match(/^[\\s+]?([0-9]*)(\\.([0-9]+))?( +)?([kmgtp]?b?)$/i)\n\t\tif (matches !== null) {\n\t\t\tbytes = parseFloat(s)\n\t\t\tif (!isFinite(bytes)) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t\tif (matches[5]) {\n\t\t\tbytes = bytes * bytesArray[matches[5]]\n\t\t}\n\n\t\tbytes = Math.round(bytes)\n\t\treturn bytes\n\t},\n\n\t/**\n\t * @param {string|number} timestamp timestamp\n\t * @param {string} format date format, see momentjs docs\n\t * @return {string} timestamp formatted as requested\n\t */\n\tformatDate(timestamp, format) {\n\t\tif (window.TESTING === undefined) {\n\t\t\tOC.debug && console.warn('OC.Util.formatDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment')\n\t\t}\n\t\tformat = format || 'LLL'\n\t\treturn moment(timestamp).format(format)\n\t},\n\n\t/**\n\t * @param {string|number} timestamp timestamp\n\t * @return {string} human readable difference from now\n\t */\n\trelativeModifiedDate(timestamp) {\n\t\tif (window.TESTING === undefined) {\n\t\t\tOC.debug && console.warn('OC.Util.relativeModifiedDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment')\n\t\t}\n\t\tconst diff = moment().diff(moment(timestamp))\n\t\tif (diff >= 0 && diff < 45000) {\n\t\t\treturn t('core', 'seconds ago')\n\t\t}\n\t\treturn moment(timestamp).fromNow()\n\t},\n\n\t/**\n\t * Returns the width of a generic browser scrollbar\n\t *\n\t * @return {number} width of scrollbar\n\t */\n\tgetScrollBarWidth() {\n\t\tif (this._scrollBarWidth) {\n\t\t\treturn this._scrollBarWidth\n\t\t}\n\n\t\tconst inner = document.createElement('p')\n\t\tinner.style.width = '100%'\n\t\tinner.style.height = '200px'\n\n\t\tconst outer = document.createElement('div')\n\t\touter.style.position = 'absolute'\n\t\touter.style.top = '0px'\n\t\touter.style.left = '0px'\n\t\touter.style.visibility = 'hidden'\n\t\touter.style.width = '200px'\n\t\touter.style.height = '150px'\n\t\touter.style.overflow = 'hidden'\n\t\touter.appendChild(inner)\n\n\t\tdocument.body.appendChild(outer)\n\t\tconst w1 = inner.offsetWidth\n\t\touter.style.overflow = 'scroll'\n\t\tlet w2 = inner.offsetWidth\n\t\tif (w1 === w2) {\n\t\t\tw2 = outer.clientWidth\n\t\t}\n\n\t\tdocument.body.removeChild(outer)\n\n\t\tthis._scrollBarWidth = (w1 - w2)\n\n\t\treturn this._scrollBarWidth\n\t},\n\n\t/**\n\t * Remove the time component from a given date\n\t *\n\t * @param {Date} date date\n\t * @return {Date} date with stripped time\n\t */\n\tstripTime(date) {\n\t\t// FIXME: likely to break when crossing DST\n\t\t// would be better to use a library like momentJS\n\t\treturn new Date(date.getFullYear(), date.getMonth(), date.getDate())\n\t},\n\n\t/**\n\t * Compare two strings to provide a natural sort\n\t *\n\t * @param {string} a first string to compare\n\t * @param {string} b second string to compare\n\t * @return {number} -1 if b comes before a, 1 if a comes before b\n\t * or 0 if the strings are identical\n\t */\n\tnaturalSortCompare(a, b) {\n\t\tlet x\n\t\tconst aa = chunkify(a)\n\t\tconst bb = chunkify(b)\n\n\t\tfor (x = 0; aa[x] && bb[x]; x++) {\n\t\t\tif (aa[x] !== bb[x]) {\n\t\t\t\tconst aNum = Number(aa[x]); const bNum = Number(bb[x])\n\t\t\t\t// note: == is correct here\n\t\t\t\t/* eslint-disable-next-line */\n\t\t\t\tif (aNum == aa[x] && bNum == bb[x]) {\n\t\t\t\t\treturn aNum - bNum\n\t\t\t\t} else {\n\t\t\t\t\t// Note: This locale setting isn't supported by all browsers but for the ones\n\t\t\t\t\t// that do there will be more consistency between client-server sorting\n\t\t\t\t\treturn aa[x].localeCompare(bb[x], OC.getLanguage())\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn aa.length - bb.length\n\t},\n\n\t/**\n\t * Calls the callback in a given interval until it returns true\n\t *\n\t * @param {Function} callback function to call on success\n\t * @param {number} interval in milliseconds\n\t */\n\twaitFor(callback, interval) {\n\t\tconst internalCallback = function() {\n\t\t\tif (callback() !== true) {\n\t\t\t\tsetTimeout(internalCallback, interval)\n\t\t\t}\n\t\t}\n\n\t\tinternalCallback()\n\t},\n\n\t/**\n\t * Checks if a cookie with the given name is present and is set to the provided value.\n\t *\n\t * @param {string} name name of the cookie\n\t * @param {string} value value of the cookie\n\t * @return {boolean} true if the cookie with the given name has the given value\n\t */\n\tisCookieSetToValue(name, value) {\n\t\tconst cookies = document.cookie.split(';')\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tconst cookie = cookies[i].split('=')\n\t\t\tif (cookie[0].trim() === name && cookie[1].trim() === value) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nconst base = window._oc_debug\n\nexport const debug = base\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nexport const redirect = targetURL => { window.location = targetURL }\n\n/**\n * Reloads the current page\n *\n * @deprecated 17.0.0 use window.location.reload directly\n */\nexport const reload = () => { window.location.reload() }\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nlet webroot = window._oc_webroot\n\nif (typeof webroot === 'undefined') {\n\twebroot = location.pathname\n\tconst pos = webroot.indexOf('/index.php/')\n\tif (pos !== -1) {\n\t\twebroot = webroot.substr(0, pos)\n\t} else {\n\t\twebroot = webroot.substr(0, webroot.lastIndexOf('/'))\n\t}\n}\n\nexport default webroot\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { subscribe } from '@nextcloud/event-bus'\n\nimport {\n\tajaxConnectionLostHandler,\n\tprocessAjaxError,\n\tregisterXHRForErrorProcessing,\n} from './xhr-error.js'\nimport Apps from './apps.js'\nimport { AppConfig, appConfig } from './appconfig.js'\nimport appswebroots from './appswebroots.js'\nimport Backbone from './backbone.js'\nimport {\n\tbasename,\n\tdirname,\n\tencodePath,\n\tisSamePath,\n\tjoinPaths,\n} from '@nextcloud/paths'\nimport {\n\tbuild as buildQueryString,\n\tparse as parseQueryString,\n} from './query-string.js'\nimport Config from './config.js'\nimport {\n\tcoreApps,\n\tmenuSpeed,\n\tPERMISSION_ALL,\n\tPERMISSION_CREATE,\n\tPERMISSION_DELETE,\n\tPERMISSION_NONE,\n\tPERMISSION_READ,\n\tPERMISSION_SHARE,\n\tPERMISSION_UPDATE,\n\tTAG_FAVORITE,\n} from './constants.js'\nimport { currentUser, getCurrentUser } from './currentuser.js'\nimport Dialogs from './dialogs.js'\nimport EventSource from './eventsource.js'\nimport { get, set } from './get_set.js'\nimport { getCapabilities } from './capabilities.js'\nimport {\n\tgetHost,\n\tgetHostName,\n\tgetPort,\n\tgetProtocol,\n} from './host.js'\nimport {\n\tgetToken as getRequestToken,\n} from './requesttoken.js'\nimport {\n\thideMenus,\n\tregisterMenu,\n\tshowMenu,\n\tunregisterMenu,\n} from './menu.js'\nimport { isUserAdmin } from './admin.js'\nimport L10N from './l10n.js'\nimport {\n\tgetCanonicalLocale,\n\tgetLanguage,\n\tgetLocale,\n} from '@nextcloud/l10n'\n\nimport {\n\tgenerateUrl,\n\tgenerateFilePath,\n\tgenerateOcsUrl,\n\tgenerateRemoteUrl,\n\tgetRootUrl,\n\timagePath,\n\tlinkTo,\n} from '@nextcloud/router'\n\nimport {\n\tlinkToRemoteBase,\n} from './routing.js'\nimport msg from './msg.js'\nimport Notification from './notification.js'\nimport PasswordConfirmation from './password-confirmation.js'\nimport Plugins from './plugins.js'\nimport { theme } from './theme.js'\nimport Util from './util.js'\nimport { debug } from './debug.js'\nimport { redirect, reload } from './navigation.js'\nimport webroot from './webroot.js'\n\n/** @namespace OC */\nexport default {\n\t/*\n\t * Constants\n\t */\n\tcoreApps,\n\tmenuSpeed,\n\tPERMISSION_ALL,\n\tPERMISSION_CREATE,\n\tPERMISSION_DELETE,\n\tPERMISSION_NONE,\n\tPERMISSION_READ,\n\tPERMISSION_SHARE,\n\tPERMISSION_UPDATE,\n\tTAG_FAVORITE,\n\n\t/*\n\t * Deprecated helpers to be removed\n\t */\n\t/**\n\t * Check if a user file is allowed to be handled.\n\t *\n\t * @param {string} file to check\n\t * @return {boolean}\n\t * @deprecated 17.0.0\n\t */\n\tfileIsBlacklisted: file => !!(file.match(Config.blacklist_files_regex)),\n\tApps,\n\tAppConfig,\n\tappConfig,\n\tappswebroots,\n\tBackbone,\n\tconfig: Config,\n\t/**\n\t * Currently logged in user or null if none\n\t *\n\t * @type {string}\n\t * @deprecated use `getCurrentUser` from https://www.npmjs.com/package/@nextcloud/auth\n\t */\n\tcurrentUser,\n\tdialogs: Dialogs,\n\tEventSource,\n\t/**\n\t * Returns the currently logged in user or null if there is no logged in\n\t * user (public page mode)\n\t *\n\t * @since 9.0.0\n\t * @deprecated 19.0.0 use `getCurrentUser` from https://www.npmjs.com/package/@nextcloud/auth\n\t */\n\tgetCurrentUser,\n\tisUserAdmin,\n\tL10N,\n\n\t/**\n\t * Ajax error handlers\n\t *\n\t * @todo remove from here and keep internally -> requires new tests\n\t */\n\t_ajaxConnectionLostHandler: ajaxConnectionLostHandler,\n\t_processAjaxError: processAjaxError,\n\tregisterXHRForErrorProcessing,\n\n\t/**\n\t * Capabilities\n\t *\n\t * @type {Array}\n\t * @deprecated 20.0.0 use @nextcloud/capabilities instead\n\t */\n\tgetCapabilities,\n\n\t/*\n\t * Legacy menu helpers\n\t */\n\thideMenus,\n\tregisterMenu,\n\tshowMenu,\n\tunregisterMenu,\n\n\t/*\n\t * Path helpers\n\t */\n\t/**\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\n\t */\n\tbasename,\n\t/**\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\n\t */\n\tencodePath,\n\t/**\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\n\t */\n\tdirname,\n\t/**\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\n\t */\n\tisSamePath,\n\t/**\n\t * @deprecated 18.0.0 use https://www.npmjs.com/package/@nextcloud/paths\n\t */\n\tjoinPaths,\n\n\t/**\n\t * Host (url) helpers\n\t */\n\tgetHost,\n\tgetHostName,\n\tgetPort,\n\tgetProtocol,\n\n\t/**\n\t * @deprecated 20.0.0 use `getCanonicalLocale` from https://www.npmjs.com/package/@nextcloud/l10n\n\t */\n\tgetCanonicalLocale,\n\t/**\n\t * @deprecated 26.0.0 use `getLocale` from https://www.npmjs.com/package/@nextcloud/l10n\n\t */\n\tgetLocale,\n\t/**\n\t * @deprecated 26.0.0 use `getLanguage` from https://www.npmjs.com/package/@nextcloud/l10n\n\t */\n\tgetLanguage,\n\n\t/**\n\t * Query string helpers\n\t */\n\tbuildQueryString,\n\tparseQueryString,\n\n\tmsg,\n\tNotification,\n\t/**\n\t * @deprecated 28.0.0 use methods from '@nextcloud/password-confirmation'\n\t */\n\tPasswordConfirmation,\n\tPlugins,\n\ttheme,\n\tUtil,\n\tdebug,\n\t/**\n\t * @deprecated 19.0.0 use `generateFilePath` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tfilePath: generateFilePath,\n\t/**\n\t * @deprecated 19.0.0 use `generateUrl` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tgenerateUrl,\n\t/**\n\t * @deprecated 19.0.0 use https://lodash.com/docs#get\n\t */\n\tget: get(window),\n\t/**\n\t * @deprecated 19.0.0 use https://lodash.com/docs#set\n\t */\n\tset: set(window),\n\t/**\n\t * @deprecated 19.0.0 use `getRootUrl` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tgetRootPath: getRootUrl,\n\t/**\n\t * @deprecated 19.0.0 use `imagePath` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\timagePath,\n\tredirect,\n\treload,\n\trequestToken: getRequestToken(),\n\t/**\n\t * @deprecated 19.0.0 use `linkTo` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tlinkTo,\n\t/**\n\t * @param {string} service service name\n\t * @param {number} version OCS API version\n\t * @return {string} OCS API base path\n\t * @deprecated 19.0.0 use `generateOcsUrl` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tlinkToOCS: (service, version) => {\n\t\treturn generateOcsUrl(service, {}, {\n\t\t\tocsVersion: version || 1,\n\t\t}) + '/'\n\t},\n\t/**\n\t * @deprecated 19.0.0 use `generateRemoteUrl` from https://www.npmjs.com/package/@nextcloud/router\n\t */\n\tlinkToRemote: generateRemoteUrl,\n\tlinkToRemoteBase,\n\t/**\n\t * Relative path to Nextcloud root.\n\t * For example: \"/nextcloud\"\n\t *\n\t * @type {string}\n\t *\n\t * @deprecated 19.0.0 use `getRootUrl` from https://www.npmjs.com/package/@nextcloud/router\n\t * @see OC#getRootPath\n\t */\n\twebroot,\n}\n\n// Keep the request token prop in sync\nsubscribe('csrf-token-update', e => {\n\tOC.requestToken = e.token\n\n\t// Logging might help debug (Sentry) issues\n\tconsole.info('OC.requestToken changed', e.token)\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport L10n from '../OC/l10n.js'\nimport OC from '../OC/index.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tOC,\n\t\t}\n\t},\n\tmethods: {\n\t\tt: L10n.translate.bind(L10n),\n\t\tn: L10n.translatePlural.bind(L10n),\n\t},\n}\n"],"file":"chunks/Nextcloud-Cf6G-Flm.mjs"}