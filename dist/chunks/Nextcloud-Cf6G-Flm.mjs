const __vite__fileDeps=["./LegacyDialogPrompt-C0WCognN.mjs","../core-common.mjs","./icons-TElqpmA8.mjs"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
/*! third party licenses: dist/vendor.LICENSE.txt */
import{H as Cr}from"./handlebars-CXvOxsjd.mjs";import{bS as I,da as Nr,db as Or,dc as Tr,c5 as Ar,bX as re,b$ as Fn,ca as Ir,c6 as se,bV as Mr,aZ as Rr,cc as jr,bO as Un,c0 as Fr,c4 as Ur,cd as Br,cj as Lr,d7 as Dr,bZ as Hr,bT as zr,dd as qr,c1 as $r}from"../core-common.mjs";import{$ as m,j as Vr}from"./jquery-BdeSydBb.mjs";import{p as Yr}from"./index-PaKKd09k.mjs";import{M as Ne,d as oe,S as Wr}from"./_plugin-vue2_normalizer-VrK6B12S-BQkexw0P.mjs";import{b as Kr,e as Xr,d as Qr,i as Gr,j as Jr}from"./index-CPb3EwrS.mjs";import{_ as Zr}from"./preload-helper-BG02UnR2.mjs";import{bf as ts,bb as es}from"./icons-TElqpmA8.mjs";import{$ as Oe,u as ns,C as ct,R as is}from"./index-D0hy_tCT.mjs";import{g as Bn}from"./requesttoken-a6i8BQgd.mjs";import{I as rs,x as ss}from"./index-CDMqmWCu.mjs";/* empty css               */import{h as ae}from"./moment-Cr1O5WQr.mjs";import{i as os}from"./index-DG15V7L3.mjs";const Bt={load:Nr,register:Or,_unregister:Tr,translate:I,translatePlural:Ar};Cr.registerHelper("t",function(e,i){return I(e,i)});var Fe="1.13.6",Pn=typeof self=="object"&&self.self===self&&self||typeof re=="object"&&re.global===re&&re||Function("return this")()||{},ue=Array.prototype,Ue=Object.prototype,kn=typeof Symbol<"u"?Symbol.prototype:null,as=ue.push,Wt=ue.slice,Dt=Ue.toString,us=Ue.hasOwnProperty,Ln=typeof ArrayBuffer<"u",cs=typeof DataView<"u",ls=Array.isArray,Cn=Object.keys,Nn=Object.create,On=Ln&&ArrayBuffer.isView,hs=isNaN,fs=isFinite,Dn=!{toString:null}.propertyIsEnumerable("toString"),Tn=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ds=Math.pow(2,53)-1;function K(e,i){return i=i==null?e.length-1:+i,function(){for(var r=Math.max(arguments.length-i,0),s=Array(r),a=0;a<r;a++)s[a]=arguments[a+i];switch(i){case 0:return e.call(this,s);case 1:return e.call(this,arguments[0],s);case 2:return e.call(this,arguments[0],arguments[1],s)}var c=Array(i+1);for(a=0;a<i;a++)c[a]=arguments[a];return c[i]=s,e.apply(this,c)}}function _t(e){var i=typeof e;return i==="function"||i==="object"&&!!e}function Hn(e){return e===null}function Be(e){return e===void 0}function Le(e){return e===!0||e===!1||Dt.call(e)==="[object Boolean]"}function zn(e){return!!(e&&e.nodeType===1)}function V(e){var i="[object "+e+"]";return function(r){return Dt.call(r)===i}}const pe=V("String"),De=V("Number"),qn=V("Date"),$n=V("RegExp"),Vn=V("Error"),He=V("Symbol"),ze=V("ArrayBuffer");var Yn=V("Function"),ps=Pn.document&&Pn.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof ps!="function"&&(Yn=function(e){return typeof e=="function"||!1});const $=Yn,Wn=V("Object");var Kn=cs&&Wn(new DataView(new ArrayBuffer(8))),qe=typeof Map<"u"&&Wn(new Map),gs=V("DataView");function ms(e){return e!=null&&$(e.getInt8)&&ze(e.buffer)}const Ht=Kn?ms:gs,xt=ls||V("Array");function wt(e,i){return e!=null&&us.call(e,i)}var Ae=V("Arguments");(function(){Ae(arguments)||(Ae=function(e){return wt(e,"callee")})})();const ge=Ae;function Xn(e){return!He(e)&&fs(e)&&!isNaN(parseFloat(e))}function $e(e){return De(e)&&hs(e)}function Ve(e){return function(){return e}}function Qn(e){return function(i){var r=e(i);return typeof r=="number"&&r>=0&&r<=ds}}function Gn(e){return function(i){return i==null?void 0:i[e]}}const ce=Gn("byteLength"),vs=Qn(ce);var ys=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function bs(e){return On?On(e)&&!Ht(e):vs(e)&&ys.test(Dt.call(e))}const Ye=Ln?bs:Ve(!1),Q=Gn("length");function _s(e){for(var i={},r=e.length,s=0;s<r;++s)i[e[s]]=!0;return{contains:function(a){return i[a]===!0},push:function(a){return i[a]=!0,e.push(a)}}}function Jn(e,i){i=_s(i);var r=Tn.length,s=e.constructor,a=$(s)&&s.prototype||Ue,c="constructor";for(wt(e,c)&&!i.contains(c)&&i.push(c);r--;)c=Tn[r],c in e&&e[c]!==a[c]&&!i.contains(c)&&i.push(c)}function H(e){if(!_t(e))return[];if(Cn)return Cn(e);var i=[];for(var r in e)wt(e,r)&&i.push(r);return Dn&&Jn(e,i),i}function Zn(e){if(e==null)return!0;var i=Q(e);return typeof i=="number"&&(xt(e)||pe(e)||ge(e))?i===0:Q(H(e))===0}function We(e,i){var r=H(i),s=r.length;if(e==null)return!s;for(var a=Object(e),c=0;c<s;c++){var h=r[c];if(i[h]!==a[h]||!(h in a))return!1}return!0}function A(e){if(e instanceof A)return e;if(!(this instanceof A))return new A(e);this._wrapped=e}A.VERSION=Fe,A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return String(this._wrapped)};function An(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,ce(e))}var In="[object DataView]";function Ie(e,i,r,s){if(e===i)return e!==0||1/e===1/i;if(e==null||i==null)return!1;if(e!==e)return i!==i;var a=typeof e;return a!=="function"&&a!=="object"&&typeof i!="object"?!1:ti(e,i,r,s)}function ti(e,i,r,s){e instanceof A&&(e=e._wrapped),i instanceof A&&(i=i._wrapped);var a=Dt.call(e);if(a!==Dt.call(i))return!1;if(Kn&&a=="[object Object]"&&Ht(e)){if(!Ht(i))return!1;a=In}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+i;case"[object Number]":return+e!=+e?+i!=+i:+e==0?1/+e===1/i:+e==+i;case"[object Date]":case"[object Boolean]":return+e==+i;case"[object Symbol]":return kn.valueOf.call(e)===kn.valueOf.call(i);case"[object ArrayBuffer]":case In:return ti(An(e),An(i),r,s)}var c=a==="[object Array]";if(!c&&Ye(e)){var h=ce(e);if(h!==ce(i))return!1;if(e.buffer===i.buffer&&e.byteOffset===i.byteOffset)return!0;c=!0}if(!c){if(typeof e!="object"||typeof i!="object")return!1;var d=e.constructor,y=i.constructor;if(d!==y&&!($(d)&&d instanceof d&&$(y)&&y instanceof y)&&"constructor"in e&&"constructor"in i)return!1}r=r||[],s=s||[];for(var b=r.length;b--;)if(r[b]===e)return s[b]===i;if(r.push(e),s.push(i),c){if(b=e.length,b!==i.length)return!1;for(;b--;)if(!Ie(e[b],i[b],r,s))return!1}else{var E=H(e),v;if(b=E.length,H(i).length!==b)return!1;for(;b--;)if(v=E[b],!(wt(i,v)&&Ie(e[v],i[v],r,s)))return!1}return r.pop(),s.pop(),!0}function ei(e,i){return Ie(e,i)}function jt(e){if(!_t(e))return[];var i=[];for(var r in e)i.push(r);return Dn&&Jn(e,i),i}function Ke(e){var i=Q(e);return function(r){if(r==null)return!1;var s=jt(r);if(Q(s))return!1;for(var a=0;a<i;a++)if(!$(r[e[a]]))return!1;return e!==ri||!$(r[Xe])}}var Xe="forEach",ni="has",Qe=["clear","delete"],ii=["get",ni,"set"],xs=Qe.concat(Xe,ii),ri=Qe.concat(ii),ws=["add"].concat(Qe,Xe,ni);const si=qe?Ke(xs):V("Map"),oi=qe?Ke(ri):V("WeakMap"),ai=qe?Ke(ws):V("Set"),ui=V("WeakSet");function kt(e){for(var i=H(e),r=i.length,s=Array(r),a=0;a<r;a++)s[a]=e[i[a]];return s}function ci(e){for(var i=H(e),r=i.length,s=Array(r),a=0;a<r;a++)s[a]=[i[a],e[i[a]]];return s}function Ge(e){for(var i={},r=H(e),s=0,a=r.length;s<a;s++)i[e[r[s]]]=r[s];return i}function zt(e){var i=[];for(var r in e)$(e[r])&&i.push(r);return i.sort()}function Je(e,i){return function(r){var s=arguments.length;if(i&&(r=Object(r)),s<2||r==null)return r;for(var a=1;a<s;a++)for(var c=arguments[a],h=e(c),d=h.length,y=0;y<d;y++){var b=h[y];(!i||r[b]===void 0)&&(r[b]=c[b])}return r}}const Ze=Je(jt),Mt=Je(H),tn=Je(jt,!0);function Es(){return function(){}}function li(e){if(!_t(e))return{};if(Nn)return Nn(e);var i=Es();i.prototype=e;var r=new i;return i.prototype=null,r}function hi(e,i){var r=li(e);return i&&Mt(r,i),r}function fi(e){return _t(e)?xt(e)?e.slice():Ze({},e):e}function di(e,i){return i(e),e}function en(e){return xt(e)?e:[e]}A.toPath=en;function Kt(e){return A.toPath(e)}function nn(e,i){for(var r=i.length,s=0;s<r;s++){if(e==null)return;e=e[i[s]]}return r?e:void 0}function rn(e,i,r){var s=nn(e,Kt(i));return Be(s)?r:s}function pi(e,i){i=Kt(i);for(var r=i.length,s=0;s<r;s++){var a=i[s];if(!wt(e,a))return!1;e=e[a]}return!!r}function me(e){return e}function Pt(e){return e=Mt({},e),function(i){return We(i,e)}}function ve(e){return e=Kt(e),function(i){return nn(i,e)}}function Xt(e,i,r){if(i===void 0)return e;switch(r!=null?r:3){case 1:return function(s){return e.call(i,s)};case 3:return function(s,a,c){return e.call(i,s,a,c)};case 4:return function(s,a,c,h){return e.call(i,s,a,c,h)}}return function(){return e.apply(i,arguments)}}function gi(e,i,r){return e==null?me:$(e)?Xt(e,i,r):_t(e)&&!xt(e)?Pt(e):ve(e)}function ye(e,i){return gi(e,i,1/0)}A.iteratee=ye;function G(e,i,r){return A.iteratee!==ye?A.iteratee(e,i):gi(e,i,r)}function mi(e,i,r){i=G(i,r);for(var s=H(e),a=s.length,c={},h=0;h<a;h++){var d=s[h];c[d]=i(e[d],d,e)}return c}function sn(){}function vi(e){return e==null?sn:function(i){return rn(e,i)}}function yi(e,i,r){var s=Array(Math.max(0,e));i=Xt(i,r,1);for(var a=0;a<e;a++)s[a]=i(a);return s}function le(e,i){return i==null&&(i=e,e=0),e+Math.floor(Math.random()*(i-e+1))}const Rt=Date.now||function(){return new Date().getTime()};function bi(e){var i=function(c){return e[c]},r="(?:"+H(e).join("|")+")",s=RegExp(r),a=RegExp(r,"g");return function(c){return c=c==null?"":""+c,s.test(c)?c.replace(a,i):c}}const _i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},xi=bi(_i),Ss=Ge(_i),wi=bi(Ss),Ei=A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Te=/(.)^/,Ps={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ks=/\\|'|\r|\n|\u2028|\u2029/g;function Cs(e){return"\\"+Ps[e]}var Ns=/^\s*(\w|\$)+\s*$/;function Si(e,i,r){!i&&r&&(i=r),i=tn({},i,A.templateSettings);var s=RegExp([(i.escape||Te).source,(i.interpolate||Te).source,(i.evaluate||Te).source].join("|")+"|$","g"),a=0,c="__p+='";e.replace(s,function(b,E,v,U,F){return c+=e.slice(a,F).replace(ks,Cs),a=F+b.length,E?c+="'+\n((__t=("+E+"))==null?'':_.escape(__t))+\n'":v?c+="'+\n((__t=("+v+"))==null?'':__t)+\n'":U&&(c+="';\n"+U+"\n__p+='"),b}),c+="';\n";var h=i.variable;if(h){if(!Ns.test(h))throw new Error("variable is not a bare identifier: "+h)}else c="with(obj||{}){\n"+c+"}\n",h="obj";c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";var d;try{d=new Function(h,"_",c)}catch(b){throw b.source=c,b}var y=function(b){return d.call(this,b,A)};return y.source="function("+h+"){\n"+c+"}",y}function Pi(e,i,r){i=Kt(i);var s=i.length;if(!s)return $(r)?r.call(e):r;for(var a=0;a<s;a++){var c=e==null?void 0:e[i[a]];c===void 0&&(c=r,a=s),e=$(c)?c.call(e):c}return e}var Os=0;function ki(e){var i=++Os+"";return e?e+i:i}function Ci(e){var i=A(e);return i._chain=!0,i}function Ni(e,i,r,s,a){if(!(s instanceof i))return e.apply(r,a);var c=li(e.prototype),h=e.apply(c,a);return _t(h)?h:c}var Ct=K(function(e,i){var r=Ct.placeholder,s=function(){for(var a=0,c=i.length,h=Array(c),d=0;d<c;d++)h[d]=i[d]===r?arguments[a++]:i[d];for(;a<arguments.length;)h.push(arguments[a++]);return Ni(e,s,this,this,h)};return s});Ct.placeholder=A;const on=K(function(e,i,r){if(!$(e))throw new TypeError("Bind must be called on a function");var s=K(function(a){return Ni(e,s,i,this,r.concat(a))});return s}),tt=Qn(Q);function Nt(e,i,r,s){if(s=s||[],!i&&i!==0)i=1/0;else if(i<=0)return s.concat(e);for(var a=s.length,c=0,h=Q(e);c<h;c++){var d=e[c];if(tt(d)&&(xt(d)||ge(d)))if(i>1)Nt(d,i-1,r,s),a=s.length;else for(var y=0,b=d.length;y<b;)s[a++]=d[y++];else r||(s[a++]=d)}return s}const Oi=K(function(e,i){i=Nt(i,!1,!1);var r=i.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var s=i[r];e[s]=on(e[s],e)}return e});function Ti(e,i){var r=function(s){var a=r.cache,c=""+(i?i.apply(this,arguments):s);return wt(a,c)||(a[c]=e.apply(this,arguments)),a[c]};return r.cache={},r}const an=K(function(e,i,r){return setTimeout(function(){return e.apply(null,r)},i)}),Ai=Ct(an,A,1);function Ii(e,i,r){var s,a,c,h,d=0;r||(r={});var y=function(){d=r.leading===!1?0:Rt(),s=null,h=e.apply(a,c),s||(a=c=null)},b=function(){var E=Rt();!d&&r.leading===!1&&(d=E);var v=i-(E-d);return a=this,c=arguments,v<=0||v>i?(s&&(clearTimeout(s),s=null),d=E,h=e.apply(a,c),s||(a=c=null)):!s&&r.trailing!==!1&&(s=setTimeout(y,v)),h};return b.cancel=function(){clearTimeout(s),d=0,s=a=c=null},b}function Mi(e,i,r){var s,a,c,h,d,y=function(){var E=Rt()-a;i>E?s=setTimeout(y,i-E):(s=null,r||(h=e.apply(d,c)),s||(c=d=null))},b=K(function(E){return d=this,c=E,a=Rt(),s||(s=setTimeout(y,i),r&&(h=e.apply(d,c))),h});return b.cancel=function(){clearTimeout(s),s=c=d=null},b}function Ri(e,i){return Ct(i,e)}function be(e){return function(){return!e.apply(this,arguments)}}function ji(){var e=arguments,i=e.length-1;return function(){for(var r=i,s=e[i].apply(this,arguments);r--;)s=e[r].call(this,s);return s}}function Fi(e,i){return function(){if(--e<1)return i.apply(this,arguments)}}function un(e,i){var r;return function(){return--e>0&&(r=i.apply(this,arguments)),e<=1&&(i=null),r}}const Ui=Ct(un,2);function cn(e,i,r){i=G(i,r);for(var s=H(e),a,c=0,h=s.length;c<h;c++)if(a=s[c],i(e[a],a,e))return a}function Bi(e){return function(i,r,s){r=G(r,s);for(var a=Q(i),c=e>0?0:a-1;c>=0&&c<a;c+=e)if(r(i[c],c,i))return c;return-1}}const _e=Bi(1),ln=Bi(-1);function hn(e,i,r,s){r=G(r,s,1);for(var a=r(i),c=0,h=Q(e);c<h;){var d=Math.floor((c+h)/2);r(e[d])<a?c=d+1:h=d}return c}function Li(e,i,r){return function(s,a,c){var h=0,d=Q(s);if(typeof c=="number")e>0?h=c>=0?c:Math.max(c+d,h):d=c>=0?Math.min(c+1,d):c+d+1;else if(r&&c&&d)return c=r(s,a),s[c]===a?c:-1;if(a!==a)return c=i(Wt.call(s,h,d),$e),c>=0?c+h:-1;for(c=e>0?h:d-1;c>=0&&c<d;c+=e)if(s[c]===a)return c;return-1}}const fn=Li(1,_e,hn),Di=Li(-1,ln);function qt(e,i,r){var s=tt(e)?_e:cn,a=s(e,i,r);if(a!==void 0&&a!==-1)return e[a]}function Hi(e,i){return qt(e,Pt(i))}function ot(e,i,r){i=Xt(i,r);var s,a;if(tt(e))for(s=0,a=e.length;s<a;s++)i(e[s],s,e);else{var c=H(e);for(s=0,a=c.length;s<a;s++)i(e[c[s]],c[s],e)}return e}function gt(e,i,r){i=G(i,r);for(var s=!tt(e)&&H(e),a=(s||e).length,c=Array(a),h=0;h<a;h++){var d=s?s[h]:h;c[h]=i(e[d],d,e)}return c}function zi(e){var i=function(r,s,a,c){var h=!tt(r)&&H(r),d=(h||r).length,y=e>0?0:d-1;for(c||(a=r[h?h[y]:y],y+=e);y>=0&&y<d;y+=e){var b=h?h[y]:y;a=s(a,r[b],b,r)}return a};return function(r,s,a,c){var h=arguments.length>=3;return i(r,Xt(s,c,4),a,h)}}const At=zi(1),he=zi(-1);function bt(e,i,r){var s=[];return i=G(i,r),ot(e,function(a,c,h){i(a,c,h)&&s.push(a)}),s}function qi(e,i,r){return bt(e,be(G(i)),r)}function fe(e,i,r){i=G(i,r);for(var s=!tt(e)&&H(e),a=(s||e).length,c=0;c<a;c++){var h=s?s[c]:c;if(!i(e[h],h,e))return!1}return!0}function de(e,i,r){i=G(i,r);for(var s=!tt(e)&&H(e),a=(s||e).length,c=0;c<a;c++){var h=s?s[c]:c;if(i(e[h],h,e))return!0}return!1}function nt(e,i,r,s){return tt(e)||(e=kt(e)),(typeof r!="number"||s)&&(r=0),fn(e,i,r)>=0}const $i=K(function(e,i,r){var s,a;return $(i)?a=i:(i=Kt(i),s=i.slice(0,-1),i=i[i.length-1]),gt(e,function(c){var h=a;if(!h){if(s&&s.length&&(c=nn(c,s)),c==null)return;h=c[i]}return h==null?h:h.apply(c,r)})});function xe(e,i){return gt(e,ve(i))}function Vi(e,i){return bt(e,Pt(i))}function dn(e,i,r){var s=-1/0,a=-1/0,c,h;if(i==null||typeof i=="number"&&typeof e[0]!="object"&&e!=null){e=tt(e)?e:kt(e);for(var d=0,y=e.length;d<y;d++)c=e[d],c!=null&&c>s&&(s=c)}else i=G(i,r),ot(e,function(b,E,v){h=i(b,E,v),(h>a||h===-1/0&&s===-1/0)&&(s=b,a=h)});return s}function Yi(e,i,r){var s=1/0,a=1/0,c,h;if(i==null||typeof i=="number"&&typeof e[0]!="object"&&e!=null){e=tt(e)?e:kt(e);for(var d=0,y=e.length;d<y;d++)c=e[d],c!=null&&c<s&&(s=c)}else i=G(i,r),ot(e,function(b,E,v){h=i(b,E,v),(h<a||h===1/0&&s===1/0)&&(s=b,a=h)});return s}var Ts=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pn(e){return e?xt(e)?Wt.call(e):pe(e)?e.match(Ts):tt(e)?gt(e,me):kt(e):[]}function gn(e,i,r){if(i==null||r)return tt(e)||(e=kt(e)),e[le(e.length-1)];var s=pn(e),a=Q(s);i=Math.max(Math.min(i,a),0);for(var c=a-1,h=0;h<i;h++){var d=le(h,c),y=s[h];s[h]=s[d],s[d]=y}return s.slice(0,i)}function Wi(e){return gn(e,1/0)}function Ki(e,i,r){var s=0;return i=G(i,r),xe(gt(e,function(a,c,h){return{value:a,index:s++,criteria:i(a,c,h)}}).sort(function(a,c){var h=a.criteria,d=c.criteria;if(h!==d){if(h>d||h===void 0)return 1;if(h<d||d===void 0)return-1}return a.index-c.index}),"value")}function we(e,i){return function(r,s,a){var c=i?[[],[]]:{};return s=G(s,a),ot(r,function(h,d){var y=s(h,d,r);e(c,h,y)}),c}}const Xi=we(function(e,i,r){wt(e,r)?e[r].push(i):e[r]=[i]}),Qi=we(function(e,i,r){e[r]=i}),Gi=we(function(e,i,r){wt(e,r)?e[r]++:e[r]=1}),Ji=we(function(e,i,r){e[r?0:1].push(i)},!0);function Zi(e){return e==null?0:tt(e)?e.length:H(e).length}function As(e,i,r){return i in r}const mn=K(function(e,i){var r={},s=i[0];if(e==null)return r;$(s)?(i.length>1&&(s=Xt(s,i[1])),i=jt(e)):(s=As,i=Nt(i,!1,!1),e=Object(e));for(var a=0,c=i.length;a<c;a++){var h=i[a],d=e[h];s(d,h,e)&&(r[h]=d)}return r}),tr=K(function(e,i){var r=i[0],s;return $(r)?(r=be(r),i.length>1&&(s=i[1])):(i=gt(Nt(i,!1,!1),String),r=function(a,c){return!nt(i,c)}),mn(e,r,s)});function vn(e,i,r){return Wt.call(e,0,Math.max(0,e.length-(i==null||r?1:i)))}function It(e,i,r){return e==null||e.length<1?i==null||r?void 0:[]:i==null||r?e[0]:vn(e,e.length-i)}function St(e,i,r){return Wt.call(e,i==null||r?1:i)}function er(e,i,r){return e==null||e.length<1?i==null||r?void 0:[]:i==null||r?e[e.length-1]:St(e,Math.max(0,e.length-i))}function nr(e){return bt(e,Boolean)}function ir(e,i){return Nt(e,i,!1)}const yn=K(function(e,i){return i=Nt(i,!0,!0),bt(e,function(r){return!nt(i,r)})}),rr=K(function(e,i){return yn(e,i)});function $t(e,i,r,s){Le(i)||(s=r,r=i,i=!1),r!=null&&(r=G(r,s));for(var a=[],c=[],h=0,d=Q(e);h<d;h++){var y=e[h],b=r?r(y,h,e):y;i&&!r?((!h||c!==b)&&a.push(y),c=b):r?nt(c,b)||(c.push(b),a.push(y)):nt(a,y)||a.push(y)}return a}const sr=K(function(e){return $t(Nt(e,!0,!0))});function or(e){for(var i=[],r=arguments.length,s=0,a=Q(e);s<a;s++){var c=e[s];if(!nt(i,c)){var h;for(h=1;h<r&&nt(arguments[h],c);h++);h===r&&i.push(c)}}return i}function Vt(e){for(var i=e&&dn(e,Q).length||0,r=Array(i),s=0;s<i;s++)r[s]=xe(e,s);return r}const ar=K(Vt);function ur(e,i){for(var r={},s=0,a=Q(e);s<a;s++)i?r[e[s]]=i[s]:r[e[s][0]]=e[s][1];return r}function cr(e,i,r){i==null&&(i=e||0,e=0),r||(r=i<e?-1:1);for(var s=Math.max(Math.ceil((i-e)/r),0),a=Array(s),c=0;c<s;c++,e+=r)a[c]=e;return a}function lr(e,i){if(i==null||i<1)return[];for(var r=[],s=0,a=e.length;s<a;)r.push(Wt.call(e,s,s+=i));return r}function Me(e,i){return e._chain?A(i).chain():i}function bn(e){return ot(zt(e),function(i){var r=A[i]=e[i];A.prototype[i]=function(){var s=[this._wrapped];return as.apply(s,arguments),Me(this,r.apply(A,s))}}),A}ot(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var i=ue[e];A.prototype[e]=function(){var r=this._wrapped;return r!=null&&(i.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),Me(this,r)}}),ot(["concat","join","slice"],function(e){var i=ue[e];A.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=i.apply(r,arguments)),Me(this,r)}});const Is=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Fe,after:Fi,all:fe,allKeys:jt,any:de,assign:Mt,before:un,bind:on,bindAll:Oi,chain:Ci,chunk:lr,clone:fi,collect:gt,compact:nr,compose:ji,constant:Ve,contains:nt,countBy:Gi,create:hi,debounce:Mi,default:A,defaults:tn,defer:Ai,delay:an,detect:qt,difference:yn,drop:St,each:ot,escape:xi,every:fe,extend:Ze,extendOwn:Mt,filter:bt,find:qt,findIndex:_e,findKey:cn,findLastIndex:ln,findWhere:Hi,first:It,flatten:ir,foldl:At,foldr:he,forEach:ot,functions:zt,get:rn,groupBy:Xi,has:pi,head:It,identity:me,include:nt,includes:nt,indexBy:Qi,indexOf:fn,initial:vn,inject:At,intersection:or,invert:Ge,invoke:$i,isArguments:ge,isArray:xt,isArrayBuffer:ze,isBoolean:Le,isDataView:Ht,isDate:qn,isElement:zn,isEmpty:Zn,isEqual:ei,isError:Vn,isFinite:Xn,isFunction:$,isMap:si,isMatch:We,isNaN:$e,isNull:Hn,isNumber:De,isObject:_t,isRegExp:$n,isSet:ai,isString:pe,isSymbol:He,isTypedArray:Ye,isUndefined:Be,isWeakMap:oi,isWeakSet:ui,iteratee:ye,keys:H,last:er,lastIndexOf:Di,map:gt,mapObject:mi,matcher:Pt,matches:Pt,max:dn,memoize:Ti,methods:zt,min:Yi,mixin:bn,negate:be,noop:sn,now:Rt,object:ur,omit:tr,once:Ui,pairs:ci,partial:Ct,partition:Ji,pick:mn,pluck:xe,property:ve,propertyOf:vi,random:le,range:cr,reduce:At,reduceRight:he,reject:qi,rest:St,restArguments:K,result:Pi,sample:gn,select:bt,shuffle:Wi,size:Zi,some:de,sortBy:Ki,sortedIndex:hn,tail:St,take:It,tap:di,template:Si,templateSettings:Ei,throttle:Ii,times:yi,toArray:pn,toPath:en,transpose:Vt,unescape:wi,union:sr,uniq:$t,unique:$t,uniqueId:ki,unzip:Vt,values:kt,where:Vi,without:rr,wrap:Ri,zip:ar},Symbol.toStringTag,{value:"Module"}));var T=bn(Is);T._=T;const Ms=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Fe,after:Fi,all:fe,allKeys:jt,any:de,assign:Mt,before:un,bind:on,bindAll:Oi,chain:Ci,chunk:lr,clone:fi,collect:gt,compact:nr,compose:ji,constant:Ve,contains:nt,countBy:Gi,create:hi,debounce:Mi,default:T,defaults:tn,defer:Ai,delay:an,detect:qt,difference:yn,drop:St,each:ot,escape:xi,every:fe,extend:Ze,extendOwn:Mt,filter:bt,find:qt,findIndex:_e,findKey:cn,findLastIndex:ln,findWhere:Hi,first:It,flatten:ir,foldl:At,foldr:he,forEach:ot,functions:zt,get:rn,groupBy:Xi,has:pi,head:It,identity:me,include:nt,includes:nt,indexBy:Qi,indexOf:fn,initial:vn,inject:At,intersection:or,invert:Ge,invoke:$i,isArguments:ge,isArray:xt,isArrayBuffer:ze,isBoolean:Le,isDataView:Ht,isDate:qn,isElement:zn,isEmpty:Zn,isEqual:ei,isError:Vn,isFinite:Xn,isFunction:$,isMap:si,isMatch:We,isNaN:$e,isNull:Hn,isNumber:De,isObject:_t,isRegExp:$n,isSet:ai,isString:pe,isSymbol:He,isTypedArray:Ye,isUndefined:Be,isWeakMap:oi,isWeakSet:ui,iteratee:ye,keys:H,last:er,lastIndexOf:Di,map:gt,mapObject:mi,matcher:Pt,matches:Pt,max:dn,memoize:Ti,methods:zt,min:Yi,mixin:bn,negate:be,noop:sn,now:Rt,object:ur,omit:tr,once:Ui,pairs:ci,partial:Ct,partition:Ji,pick:mn,pluck:xe,property:ve,propertyOf:vi,random:le,range:cr,reduce:At,reduceRight:he,reject:qi,rest:St,restArguments:K,result:Pi,sample:gn,select:bt,shuffle:Wi,size:Zi,some:de,sortBy:Ki,sortedIndex:hn,tail:St,take:It,tap:di,template:Si,templateSettings:Ei,throttle:Ii,times:yi,toArray:pn,toPath:en,transpose:Vt,unescape:wi,union:sr,uniq:$t,unique:$t,uniqueId:ki,unzip:Vt,values:kt,where:Vi,without:rr,wrap:Ri,zip:ar},Symbol.toStringTag,{value:"Module"})),_n={updatableNotification:null,getDefaultNotificationFunction:null,setDefault(e){this.getDefaultNotificationFunction=e},hide(e,i){if(T.isFunction(e)&&(i=e,e=void 0),!e){console.error("Missing argument $row in OC.Notification.hide() call, caller needs to be adjusted to only dismiss its own notification");return}e.each(function(){m(this)[0].toastify?m(this)[0].toastify.hideToast():console.error("cannot hide toast because object is not set"),this===this.updatableNotification&&(this.updatableNotification=null)}),i&&i.call(),this.getDefaultNotificationFunction&&this.getDefaultNotificationFunction()},showHtml(e,i){i=i||{},i.isHTML=!0,i.timeout=i.timeout?i.timeout:Ne;const r=oe(e,i);return r.toastElement.toastify=r,m(r.toastElement)},show(e,i){const r=function(a){return a.toString().split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;").split("'").join("&#039;")};i=i||{},i.timeout=i.timeout?i.timeout:Ne;const s=oe(r(e),i);return s.toastElement.toastify=s,m(s.toastElement)},showUpdate(e){return this.updatableNotification&&this.updatableNotification.hideToast(),this.updatableNotification=oe(e,{timeout:Ne}),this.updatableNotification.toastElement.toastify=this.updatableNotification,m(this.updatableNotification.toastElement)},showTemporary(e,i){i=i||{},i.timeout=i.timeout||Wr;const r=oe(e,i);return r.toastElement.toastify=r,m(r.toastElement)},isHidden(){return!m("#content").find(".toastify").length}},Rs=T.throttle(()=>{_n.showTemporary(t("core","Connection to server lost"))},7*1e3,{trailing:!1}),js=e=>{e.status===0&&(e.statusText==="abort"||e.statusText==="timeout"||M._reloadCalled)||(T.contains([302,303,307,401],e.status)&&M.currentUser?setTimeout(function(){if(!M._userIsNavigatingAway&&!M._reloadCalled){let i=0;const r=5,s=setInterval(function(){_n.showUpdate(n("core","Problem loading page, reloading in %n second","Problem loading page, reloading in %n seconds",r-i)),i>=r&&(clearInterval(s),M.reload()),i++},1e3);M._reloadCalled=!0}},100):e.status===0&&setTimeout(function(){!M._userIsNavigatingAway&&!M._reloadCalled&&M._ajaxConnectionLostHandler()},100))},Fs=e=>{const i=()=>{e.readyState===4&&(e.status>=200&&e.status<300||e.status===304||m(document).trigger(new m.Event("ajaxError"),e))},r=()=>{m(document).trigger(new m.Event("ajaxError"),e)};e.addEventListener&&(e.addEventListener("load",i),e.addEventListener("error",r))};let hr=!1;const Re={enableDynamicSlideToggle(){hr=!0}};Re.showAppSidebar=function(e){(e||m("#app-sidebar")).removeClass("disappear").show(),m("#app-content").trigger(new m.Event("appresized"))},Re.hideAppSidebar=function(e){(e||m("#app-sidebar")).hide().addClass("disappear"),m("#app-content").trigger(new m.Event("appresized"))};const Xo=()=>{let e=m("[data-apps-slide-toggle]");e.length===0&&m("#app-navigation").addClass("without-app-settings"),m(document).click(function(i){hr&&(e=m("[data-apps-slide-toggle]")),e.each(function(r,s){const a=m(s).data("apps-slide-toggle"),c=m(a);function h(){c.slideUp(OC.menuSpeed*4,function(){c.trigger(new m.Event("hide"))}),c.removeClass("opened"),m(s).removeClass("opened"),m(s).attr("aria-expanded","false")}function d(){c.slideDown(OC.menuSpeed*4,function(){c.trigger(new m.Event("show"))}),c.addClass("opened"),m(s).addClass("opened"),m(s).attr("aria-expanded","true");const y=m(a+" [autofocus]");y.length===1&&y.focus()}if(!c.is(":animated"))if(m(s).is(m(i.target).closest("[data-apps-slide-toggle]")))c.is(":visible")?h():d();else{const y=m(i.target).closest(a);c.is(":visible")&&y[0]!==c[0]&&h()}})})};function Ft(e,i,r){if((e==="post"||e==="delete")&&M.PasswordConfirmation.requiresPasswordConfirmation()){M.PasswordConfirmation.requirePasswordConfirmation(_.bind(Ft,this,e,i,r));return}r=r||{},m.ajax({type:e.toUpperCase(),url:Fn("apps/provisioning_api/api/v1/config/apps")+i,data:r.data||{},success:r.success,error:r.error})}function fr(e){Ft("get","",e)}function dr(e,i){Ft("get","/"+e,i)}function pr(e,i,r,s){s=s||{},s.data={defaultValue:r},Ft("get","/"+e+"/"+i,s)}function gr(e,i,r,s){s=s||{},s.data={value:r},Ft("post","/"+e+"/"+i,s)}function mr(e,i,r){Ft("delete","/"+e+"/"+i,r)}const Qo=Object.freeze(Object.defineProperty({__proto__:null,deleteKey:mr,getApps:fr,getKeys:dr,getValue:pr,setValue:gr},Symbol.toStringTag,{value:"Module"})),Us=window.oc_appconfig||{},Bs={getValue:function(e,i,r,s){pr(e,i,r,{success:s})},setValue:function(e,i,r){gr(e,i,r)},getApps:function(e){fr({success:e})},getKeys:function(e,i){dr(e,{success:i})},deleteKey:function(e,i){mr(e,i)}},Ls=window._oc_appswebroots!==void 0?window._oc_appswebroots:!1;var vr={};const Ds=Ir(Ms);(function(e){(function(i){var r=typeof self=="object"&&self.self===self&&self||typeof se=="object"&&se.global===se&&se;{var s=Ds,a;try{a=Vr}catch{}i(r,e,s,a)}})(function(i,r,s,a){var c=i.Backbone,h=Array.prototype.slice;r.VERSION="1.6.0",r.$=a,r.noConflict=function(){return i.Backbone=c,this},r.emulateHTTP=!1,r.emulateJSON=!1;var d=r.Events={},y=/\s+/,b,E=function(o,u,l,f,p){var g=0,x;if(l&&typeof l=="object")for(f!==void 0&&("context"in p)&&p.context===void 0&&(p.context=f),x=s.keys(l);g<x.length;g++)u=E(o,u,x[g],l[x[g]],p);else if(l&&y.test(l))for(x=l.split(y);g<x.length;g++)u=o(u,x[g],f,p);else u=o(u,l,f,p);return u};d.on=function(o,u,l){if(this._events=E(v,this._events||{},o,u,{context:l,ctx:this,listening:b}),b){var f=this._listeners||(this._listeners={});f[b.id]=b,b.interop=!1}return this},d.listenTo=function(o,u,l){if(!o)return this;var f=o._listenId||(o._listenId=s.uniqueId("l")),p=this._listeningTo||(this._listeningTo={}),g=b=p[f];g||(this._listenId||(this._listenId=s.uniqueId("l")),g=b=p[f]=new k(this,o));var x=U(o,u,l,this);if(b=void 0,x)throw x;return g.interop&&g.on(u,l),this};var v=function(o,u,l,f){if(l){var p=o[u]||(o[u]=[]),g=f.context,x=f.ctx,C=f.listening;C&&C.count++,p.push({callback:l,context:g,ctx:g||x,listening:C})}return o},U=function(o,u,l,f){try{o.on(u,l,f)}catch(p){return p}};d.off=function(o,u,l){return this._events?(this._events=E(F,this._events,o,u,{context:l,listeners:this._listeners}),this):this},d.stopListening=function(o,u,l){var f=this._listeningTo;if(!f)return this;for(var p=o?[o._listenId]:s.keys(f),g=0;g<p.length;g++){var x=f[p[g]];if(!x)break;x.obj.off(u,l,this),x.interop&&x.off(u,l)}return s.isEmpty(f)&&(this._listeningTo=void 0),this};var F=function(o,u,l,f){if(o){var p=f.context,g=f.listeners,x=0,C;if(!u&&!p&&!l){for(C=s.keys(g);x<C.length;x++)g[C[x]].cleanup();return}for(C=u?[u]:s.keys(o);x<C.length;x++){u=C[x];var L=o[u];if(!L)break;for(var X=[],Y=0;Y<L.length;Y++){var j=L[Y];if(l&&l!==j.callback&&l!==j.callback._callback||p&&p!==j.context)X.push(j);else{var at=j.listening;at&&at.off(u,l)}}X.length?o[u]=X:delete o[u]}return o}};d.once=function(o,u,l){var f=E(R,{},o,u,this.off.bind(this));return typeof o=="string"&&l==null&&(u=void 0),this.on(f,u,l)},d.listenToOnce=function(o,u,l){var f=E(R,{},u,l,this.stopListening.bind(this,o));return this.listenTo(o,f)};var R=function(o,u,l,f){if(l){var p=o[u]=s.once(function(){f(u,p),l.apply(this,arguments)});p._callback=l}return o};d.trigger=function(o){if(!this._events)return this;for(var u=Math.max(0,arguments.length-1),l=Array(u),f=0;f<u;f++)l[f]=arguments[f+1];return E(P,this._events,o,void 0,l),this};var P=function(o,u,l,f){if(o){var p=o[u],g=o.all;p&&g&&(g=g.slice()),p&&S(p,f),g&&S(g,[u].concat(f))}return o},S=function(o,u){var l,f=-1,p=o.length,g=u[0],x=u[1],C=u[2];switch(u.length){case 0:for(;++f<p;)(l=o[f]).callback.call(l.ctx);return;case 1:for(;++f<p;)(l=o[f]).callback.call(l.ctx,g);return;case 2:for(;++f<p;)(l=o[f]).callback.call(l.ctx,g,x);return;case 3:for(;++f<p;)(l=o[f]).callback.call(l.ctx,g,x,C);return;default:for(;++f<p;)(l=o[f]).callback.apply(l.ctx,u);return}},k=function(o,u){this.id=o._listenId,this.listener=o,this.obj=u,this.interop=!0,this.count=0,this._events=void 0};k.prototype.on=d.on,k.prototype.off=function(o,u){var l;this.interop?(this._events=E(F,this._events,o,u,{context:void 0,listeners:void 0}),l=!this._events):(this.count--,l=this.count===0),l&&this.cleanup()},k.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},d.bind=d.on,d.unbind=d.off,s.extend(r,d);var N=r.Model=function(o,u){var l=o||{};u||(u={}),this.preinitialize.apply(this,arguments),this.cid=s.uniqueId(this.cidPrefix),this.attributes={},u.collection&&(this.collection=u.collection),u.parse&&(l=this.parse(l,u)||{});var f=s.result(this,"defaults");l=s.defaults(s.extend({},f,l),f),this.set(l,u),this.changed={},this.initialize.apply(this,arguments)};s.extend(N.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(o){return s.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(o){return this.attributes[o]},escape:function(o){return s.escape(this.get(o))},has:function(o){return this.get(o)!=null},matches:function(o){return!!s.iteratee(o,this)(this.attributes)},set:function(o,u,l){if(o==null)return this;var f;if(typeof o=="object"?(f=o,l=u):(f={})[o]=u,l||(l={}),!this._validate(f,l))return!1;var p=l.unset,g=l.silent,x=[],C=this._changing;this._changing=!0,C||(this._previousAttributes=s.clone(this.attributes),this.changed={});var L=this.attributes,X=this.changed,Y=this._previousAttributes;for(var j in f)u=f[j],s.isEqual(L[j],u)||x.push(j),s.isEqual(Y[j],u)?delete X[j]:X[j]=u,p?delete L[j]:L[j]=u;if(this.idAttribute in f){var at=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,at,l)}if(!g){x.length&&(this._pending=l);for(var vt=0;vt<x.length;vt++)this.trigger("change:"+x[vt],this,L[x[vt]],l)}if(C)return this;if(!g)for(;this._pending;)l=this._pending,this._pending=!1,this.trigger("change",this,l);return this._pending=!1,this._changing=!1,this},unset:function(o,u){return this.set(o,void 0,s.extend({},u,{unset:!0}))},clear:function(o){var u={};for(var l in this.attributes)u[l]=void 0;return this.set(u,s.extend({},o,{unset:!0}))},hasChanged:function(o){return o==null?!s.isEmpty(this.changed):s.has(this.changed,o)},changedAttributes:function(o){if(!o)return this.hasChanged()?s.clone(this.changed):!1;var u=this._changing?this._previousAttributes:this.attributes,l={},f;for(var p in o){var g=o[p];s.isEqual(u[p],g)||(l[p]=g,f=!0)}return f?l:!1},previous:function(o){return o==null||!this._previousAttributes?null:this._previousAttributes[o]},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(o){o=s.extend({parse:!0},o);var u=this,l=o.success;return o.success=function(f){var p=o.parse?u.parse(f,o):f;if(!u.set(p,o))return!1;l&&l.call(o.context,u,f,o),u.trigger("sync",u,f,o)},ie(this,o),this.sync("read",this,o)},save:function(o,u,l){var f;o==null||typeof o=="object"?(f=o,l=u):(f={})[o]=u,l=s.extend({validate:!0,parse:!0},l);var p=l.wait;if(f&&!p){if(!this.set(f,l))return!1}else if(!this._validate(f,l))return!1;var g=this,x=l.success,C=this.attributes;l.success=function(Y){g.attributes=C;var j=l.parse?g.parse(Y,l):Y;if(p&&(j=s.extend({},f,j)),j&&!g.set(j,l))return!1;x&&x.call(l.context,g,Y,l),g.trigger("sync",g,Y,l)},ie(this,l),f&&p&&(this.attributes=s.extend({},C,f));var L=this.isNew()?"create":l.patch?"patch":"update";L==="patch"&&!l.attrs&&(l.attrs=f);var X=this.sync(L,this,l);return this.attributes=C,X},destroy:function(o){o=o?s.clone(o):{};var u=this,l=o.success,f=o.wait,p=function(){u.stopListening(),u.trigger("destroy",u,u.collection,o)};o.success=function(x){f&&p(),l&&l.call(o.context,u,x,o),u.isNew()||u.trigger("sync",u,x,o)};var g=!1;return this.isNew()?s.defer(o.success):(ie(this,o),g=this.sync("delete",this,o)),f||p(),g},url:function(){var o=s.result(this,"urlRoot")||s.result(this.collection,"url")||En();if(this.isNew())return o;var u=this.get(this.idAttribute);return o.replace(/[^\/]$/,"$&/")+encodeURIComponent(u)},parse:function(o,u){return o},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(o){return this._validate({},s.extend({},o,{validate:!0}))},_validate:function(o,u){if(!u.validate||!this.validate)return!0;o=s.extend({},this.attributes,o);var l=this.validationError=this.validate(o,u)||null;return l?(this.trigger("invalid",this,l,s.extend(u,{validationError:l})),!1):!0}});var O=r.Collection=function(o,u){u||(u={}),this.preinitialize.apply(this,arguments),u.model&&(this.model=u.model),u.comparator!==void 0&&(this.comparator=u.comparator),this._reset(),this.initialize.apply(this,arguments),o&&this.reset(o,s.extend({silent:!0},u))},B={add:!0,remove:!0,merge:!0},z={add:!0,remove:!1},w=function(o,u,l){l=Math.min(Math.max(l,0),o.length);var f=Array(o.length-l),p=u.length,g;for(g=0;g<f.length;g++)f[g]=o[g+l];for(g=0;g<p;g++)o[g+l]=u[g];for(g=0;g<f.length;g++)o[g+p+l]=f[g]};s.extend(O.prototype,d,{model:N,preinitialize:function(){},initialize:function(){},toJSON:function(o){return this.map(function(u){return u.toJSON(o)})},sync:function(){return r.sync.apply(this,arguments)},add:function(o,u){return this.set(o,s.extend({merge:!1},u,z))},remove:function(o,u){u=s.extend({},u);var l=!s.isArray(o);o=l?[o]:o.slice();var f=this._removeModels(o,u);return!u.silent&&f.length&&(u.changes={added:[],merged:[],removed:f},this.trigger("update",this,u)),l?f[0]:f},set:function(o,u){if(o!=null){u=s.extend({},B,u),u.parse&&!this._isModel(o)&&(o=this.parse(o,u)||[]);var l=!s.isArray(o);o=l?[o]:o.slice();var f=u.at;f!=null&&(f=+f),f>this.length&&(f=this.length),f<0&&(f+=this.length+1);var p=[],g=[],x=[],C=[],L={},X=u.add,Y=u.merge,j=u.remove,at=!1,vt=this.comparator&&f==null&&u.sort!==!1,Er=s.isString(this.comparator)?this.comparator:null,D,W;for(W=0;W<o.length;W++){D=o[W];var ut=this.get(D);if(ut){if(Y&&D!==ut){var Ce=this._isModel(D)?D.attributes:D;u.parse&&(Ce=ut.parse(Ce,u)),ut.set(Ce,u),x.push(ut),vt&&!at&&(at=ut.hasChanged(Er))}L[ut.cid]||(L[ut.cid]=!0,p.push(ut)),o[W]=ut}else X&&(D=o[W]=this._prepareModel(D,u),D&&(g.push(D),this._addReference(D,u),L[D.cid]=!0,p.push(D)))}if(j){for(W=0;W<this.length;W++)D=this.models[W],L[D.cid]||C.push(D);C.length&&this._removeModels(C,u)}var Sn=!1,Sr=!vt&&X&&j;if(p.length&&Sr?(Sn=this.length!==p.length||s.some(this.models,function(Pr,kr){return Pr!==p[kr]}),this.models.length=0,w(this.models,p,0),this.length=this.models.length):g.length&&(vt&&(at=!0),w(this.models,g,f!=null?f:this.length),this.length=this.models.length),at&&this.sort({silent:!0}),!u.silent){for(W=0;W<g.length;W++)f!=null&&(u.index=f+W),D=g[W],D.trigger("add",D,this,u);(at||Sn)&&this.trigger("sort",this,u),(g.length||C.length||x.length)&&(u.changes={added:g,removed:C,merged:x},this.trigger("update",this,u))}return l?o[0]:o}},reset:function(o,u){u=u?s.clone(u):{};for(var l=0;l<this.models.length;l++)this._removeReference(this.models[l],u);return u.previousModels=this.models,this._reset(),o=this.add(o,s.extend({silent:!0},u)),u.silent||this.trigger("reset",this,u),o},push:function(o,u){return this.add(o,s.extend({at:this.length},u))},pop:function(o){var u=this.at(this.length-1);return this.remove(u,o)},unshift:function(o,u){return this.add(o,s.extend({at:0},u))},shift:function(o){var u=this.at(0);return this.remove(u,o)},slice:function(){return h.apply(this.models,arguments)},get:function(o){if(o!=null)return this._byId[o]||this._byId[this.modelId(this._isModel(o)?o.attributes:o,o.idAttribute)]||o.cid&&this._byId[o.cid]},has:function(o){return this.get(o)!=null},at:function(o){return o<0&&(o+=this.length),this.models[o]},where:function(o,u){return this[u?"find":"filter"](o)},findWhere:function(o){return this.where(o,!0)},sort:function(o){var u=this.comparator;if(!u)throw new Error("Cannot sort a set without a comparator");o||(o={});var l=u.length;return s.isFunction(u)&&(u=u.bind(this)),l===1||s.isString(u)?this.models=this.sortBy(u):this.models.sort(u),o.silent||this.trigger("sort",this,o),this},pluck:function(o){return this.map(o+"")},fetch:function(o){o=s.extend({parse:!0},o);var u=o.success,l=this;return o.success=function(f){var p=o.reset?"reset":"set";l[p](f,o),u&&u.call(o.context,l,f,o),l.trigger("sync",l,f,o)},ie(this,o),this.sync("read",this,o)},create:function(o,u){u=u?s.clone(u):{};var l=u.wait;if(o=this._prepareModel(o,u),!o)return!1;l||this.add(o,u);var f=this,p=u.success;return u.success=function(g,x,C){l&&(g.off("error",f._forwardPristineError,f),f.add(g,C)),p&&p.call(C.context,g,x,C)},l&&o.once("error",this._forwardPristineError,this),o.save(null,u),o},parse:function(o,u){return o},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(o,u){return o[u||this.model.prototype.idAttribute||"id"]},values:function(){return new J(this,ht)},keys:function(){return new J(this,Qt)},entries:function(){return new J(this,Se)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(o,u){if(this._isModel(o))return o.collection||(o.collection=this),o;u=u?s.clone(u):{},u.collection=this;var l;return this.model.prototype?l=new this.model(o,u):l=this.model(o,u),l.validationError?(this.trigger("invalid",this,l.validationError,u),!1):l},_removeModels:function(o,u){for(var l=[],f=0;f<o.length;f++){var p=this.get(o[f]);if(p){var g=this.indexOf(p);this.models.splice(g,1),this.length--,delete this._byId[p.cid];var x=this.modelId(p.attributes,p.idAttribute);x!=null&&delete this._byId[x],u.silent||(u.index=g,p.trigger("remove",p,this,u)),l.push(p),this._removeReference(p,u)}}return o.length>0&&!u.silent&&delete u.index,l},_isModel:function(o){return o instanceof N},_addReference:function(o,u){this._byId[o.cid]=o;var l=this.modelId(o.attributes,o.idAttribute);l!=null&&(this._byId[l]=o),o.on("all",this._onModelEvent,this)},_removeReference:function(o,u){delete this._byId[o.cid];var l=this.modelId(o.attributes,o.idAttribute);l!=null&&delete this._byId[l],this===o.collection&&delete o.collection,o.off("all",this._onModelEvent,this)},_onModelEvent:function(o,u,l,f){if(u){if((o==="add"||o==="remove")&&l!==this)return;if(o==="destroy"&&this.remove(u,f),o==="changeId"){var p=this.modelId(u.previousAttributes(),u.idAttribute),g=this.modelId(u.attributes,u.idAttribute);p!=null&&delete this._byId[p],g!=null&&(this._byId[g]=u)}}this.trigger.apply(this,arguments)},_forwardPristineError:function(o,u,l){this.has(o)||this._onModelEvent("error",o,u,l)}});var q=typeof Symbol=="function"&&Symbol.iterator;q&&(O.prototype[q]=O.prototype.values);var J=function(o,u){this._collection=o,this._kind=u,this._index=0},ht=1,Qt=2,Se=3;q&&(J.prototype[q]=function(){return this}),J.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var o=this._collection.at(this._index);this._index++;var u;if(this._kind===ht)u=o;else{var l=this._collection.modelId(o.attributes,o.idAttribute);this._kind===Qt?u=l:u=[l,o]}return{value:u,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var ft=r.View=function(o){this.cid=s.uniqueId("view"),this.preinitialize.apply(this,arguments),s.extend(this,s.pick(o,Ot)),this._ensureElement(),this.initialize.apply(this,arguments)},mt=/^(\S+)\s*(.*)$/,Ot=["model","collection","el","id","attributes","className","tagName","events"];s.extend(ft.prototype,d,{tagName:"div",$:function(o){return this.$el.find(o)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(o){return this.undelegateEvents(),this._setElement(o),this.delegateEvents(),this},_setElement:function(o){this.$el=o instanceof r.$?o:r.$(o),this.el=this.$el[0]},delegateEvents:function(o){if(o||(o=s.result(this,"events")),!o)return this;this.undelegateEvents();for(var u in o){var l=o[u];if(s.isFunction(l)||(l=this[l]),!!l){var f=u.match(mt);this.delegate(f[1],f[2],l.bind(this))}}return this},delegate:function(o,u,l){return this.$el.on(o+".delegateEvents"+this.cid,u,l),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(o,u,l){return this.$el.off(o+".delegateEvents"+this.cid,u,l),this},_createElement:function(o){return document.createElement(o)},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"));else{var o=s.extend({},s.result(this,"attributes"));this.id&&(o.id=s.result(this,"id")),this.className&&(o.class=s.result(this,"className")),this.setElement(this._createElement(s.result(this,"tagName"))),this._setAttributes(o)}},_setAttributes:function(o){this.$el.attr(o)}});var et=function(o,u,l,f){switch(u){case 1:return function(){return o[l](this[f])};case 2:return function(p){return o[l](this[f],p)};case 3:return function(p,g){return o[l](this[f],Ut(p,this),g)};case 4:return function(p,g,x){return o[l](this[f],Ut(p,this),g,x)};default:return function(){var p=h.call(arguments);return p.unshift(this[f]),o[l].apply(o,p)}}},Et=function(o,u,l,f){s.each(l,function(p,g){u[g]&&(o.prototype[g]=et(u,p,g,f))})},Ut=function(o,u){return s.isFunction(o)?o:s.isObject(o)&&!u._isModel(o)?Gt(o):s.isString(o)?function(l){return l.get(o)}:o},Gt=function(o){var u=s.matches(o);return function(l){return u(l.attributes)}},Jt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Zt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s.each([[O,Jt,"models"],[N,Zt,"attributes"]],function(o){var u=o[0],l=o[1],f=o[2];u.mixin=function(p){var g=s.reduce(s.functions(p),function(x,C){return x[C]=0,x},{});Et(u,p,g,f)},Et(u,s,l,f)}),r.sync=function(o,u,l){var f=te[o];s.defaults(l||(l={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var p={type:f,dataType:"json"};if(l.url||(p.url=s.result(u,"url")||En()),l.data==null&&u&&(o==="create"||o==="update"||o==="patch")&&(p.contentType="application/json",p.data=JSON.stringify(l.attrs||u.toJSON(l))),l.emulateJSON&&(p.contentType="application/x-www-form-urlencoded",p.data=p.data?{model:p.data}:{}),l.emulateHTTP&&(f==="PUT"||f==="DELETE"||f==="PATCH")){p.type="POST",l.emulateJSON&&(p.data._method=f);var g=l.beforeSend;l.beforeSend=function(L){if(L.setRequestHeader("X-HTTP-Method-Override",f),g)return g.apply(this,arguments)}}p.type!=="GET"&&!l.emulateJSON&&(p.processData=!1);var x=l.error;l.error=function(L,X,Y){l.textStatus=X,l.errorThrown=Y,x&&x.call(l.context,L,X,Y)};var C=l.xhr=r.ajax(s.extend(p,l));return u.trigger("request",u,C,l),C};var te={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var ee=r.Router=function(o){o||(o={}),this.preinitialize.apply(this,arguments),o.routes&&(this.routes=o.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Tt=/\((.*?)\)/g,ne=/(\(\?)?:\w+/g,Pe=/\*\w+/g,ke=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(ee.prototype,d,{preinitialize:function(){},initialize:function(){},route:function(o,u,l){s.isRegExp(o)||(o=this._routeToRegExp(o)),s.isFunction(u)&&(l=u,u=""),l||(l=this[u]);var f=this;return r.history.route(o,function(p){var g=f._extractParameters(o,p);f.execute(l,g,u)!==!1&&(f.trigger.apply(f,["route:"+u].concat(g)),f.trigger("route",u,g),r.history.trigger("route",f,u,g))}),this},execute:function(o,u,l){o&&o.apply(this,u)},navigate:function(o,u){return r.history.navigate(o,u),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var o,u=s.keys(this.routes);(o=u.pop())!=null;)this.route(o,this.routes[o])}},_routeToRegExp:function(o){return o=o.replace(ke,"\\$&").replace(Tt,"(?:$1)?").replace(ne,function(u,l){return l?u:"([^/?]+)"}).replace(Pe,"([^?]*?)"),new RegExp("^"+o+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(o,u){var l=o.exec(u).slice(1);return s.map(l,function(f,p){return p===l.length-1?f||null:f?decodeURIComponent(f):null})}});var Z=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},it=/^[#\/]|\s+$/g,dt=/^\/+|\/+$/g,xr=/#.*$/;Z.started=!1,s.extend(Z.prototype,d,{interval:50,atRoot:function(){var o=this.location.pathname.replace(/[^\/]$/,"$&/");return o===this.root&&!this.getSearch()},matchRoot:function(){var o=this.decodeFragment(this.location.pathname),u=o.slice(0,this.root.length-1)+"/";return u===this.root},decodeFragment:function(o){return decodeURI(o.replace(/%25/g,"%2525"))},getSearch:function(){var o=this.location.href.replace(/#.*/,"").match(/\?.+/);return o?o[0]:""},getHash:function(o){var u=(o||this).location.href.match(/#(.*)$/);return u?u[1]:""},getPath:function(){var o=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return o.charAt(0)==="/"?o.slice(1):o},getFragment:function(o){return o==null&&(this._usePushState||!this._wantsHashChange?o=this.getPath():o=this.getHash()),o.replace(it,"")},start:function(o){if(Z.started)throw new Error("Backbone.history has already been started");if(Z.started=!0,this.options=s.extend({root:"/"},this.options,o),this.root=this.options.root,this._trailingSlash=this.options.trailingSlash,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(dt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var u=this.root.slice(0,-1)||"/";return this.location.replace(u+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var l=document.body,f=l.insertBefore(this.iframe,l.firstChild).contentWindow;f.document.open(),f.document.close(),f.location.hash="#"+this.fragment}var p=window.addEventListener||function(g,x){return attachEvent("on"+g,x)};if(this._usePushState?p("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?p("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var o=window.removeEventListener||function(u,l){return detachEvent("on"+u,l)};this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&o("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Z.started=!1},route:function(o,u){this.handlers.unshift({route:o,callback:u})},checkUrl:function(o){var u=this.getFragment();if(u===this.fragment&&this.iframe&&(u=this.getHash(this.iframe.contentWindow)),u===this.fragment)return this.matchRoot()?!1:this.notfound();this.iframe&&this.navigate(u),this.loadUrl()},loadUrl:function(o){return this.matchRoot()?(o=this.fragment=this.getFragment(o),s.some(this.handlers,function(u){if(u.route.test(o))return u.callback(o),!0})||this.notfound()):this.notfound()},notfound:function(){return this.trigger("notfound"),!1},navigate:function(o,u){if(!Z.started)return!1;(!u||u===!0)&&(u={trigger:!!u}),o=this.getFragment(o||"");var l=this.root;!this._trailingSlash&&(o===""||o.charAt(0)==="?")&&(l=l.slice(0,-1)||"/");var f=l+o;o=o.replace(xr,"");var p=this.decodeFragment(o);if(this.fragment!==p){if(this.fragment=p,this._usePushState)this.history[u.replace?"replaceState":"pushState"]({},document.title,f);else if(this._wantsHashChange){if(this._updateHash(this.location,o,u.replace),this.iframe&&o!==this.getHash(this.iframe.contentWindow)){var g=this.iframe.contentWindow;u.replace||(g.document.open(),g.document.close()),this._updateHash(g.location,o,u.replace)}}else return this.location.assign(f);if(u.trigger)return this.loadUrl(o)}},_updateHash:function(o,u,l){if(l){var f=o.href.replace(/(javascript:|#).*$/,"");o.replace(f+"#"+u)}else o.hash="#"+u}}),r.history=new Z;var wr=function(o,u){var l=this,f;return o&&s.has(o,"constructor")?f=o.constructor:f=function(){return l.apply(this,arguments)},s.extend(f,l,u),f.prototype=s.create(l.prototype,o),f.prototype.constructor=f,f.__super__=l.prototype,f};N.extend=O.extend=ee.extend=ft.extend=Z.extend=wr;var En=function(){throw new Error('A "url" property or function must be specified')},ie=function(o,u){var l=u.error;u.error=function(f){l&&l.call(u.context,o,f,u),o.trigger("error",o,f,u)}};return r._debug=function(){return{root:i,_:s}},r})})(vr);const Hs=Mr(vr),yt={};yt._XML_CHAR_MAP={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},yt._escapeXml=function(e){return e.replace(/[<>&"']/g,function(i){return yt._XML_CHAR_MAP[i]})},yt.Client=function(e){var i;for(i in e)this[i]=e[i]},yt.Client.prototype={baseUrl:null,userName:null,password:null,xmlNamespaces:{"DAV:":"d"},propFind:function(e,i,r,s){typeof r>"u"&&(r="0"),r=""+r,s=s||{},s.Depth=r,s["Content-Type"]="application/xml; charset=utf-8";var a='<?xml version="1.0"?>\n<d:propfind ',c;for(c in this.xmlNamespaces)a+=" xmlns:"+this.xmlNamespaces[c]+'="'+c+'"';a+=">\n  <d:prop>\n";for(var h in i)if(i.hasOwnProperty(h)){var d=this.parseClarkNotation(i[h]);this.xmlNamespaces[d.namespace]?a+="    <"+this.xmlNamespaces[d.namespace]+":"+d.name+" />\n":a+="    <x:"+d.name+' xmlns:x="'+d.namespace+'" />\n'}return a+="  </d:prop>\n",a+="</d:propfind>",this.request("PROPFIND",e,s,a).then((function(y){return r==="0"?{status:y.status,body:y.body[0],xhr:y.xhr}:{status:y.status,body:y.body,xhr:y.xhr}}).bind(this))},_renderPropSet:function(e){var i="  <d:set>\n   <d:prop>\n";for(var r in e)if(e.hasOwnProperty(r)){var s=this.parseClarkNotation(r),a,c=e[r];this.xmlNamespaces[s.namespace]?a=this.xmlNamespaces[s.namespace]+":"+s.name:a="x:"+s.name+' xmlns:x="'+s.namespace+'"',a!=="d:resourcetype"&&(c=yt._escapeXml(c)),i+="      <"+a+">"+c+"</"+a+">\n"}return i+="    </d:prop>\n",i+="  </d:set>\n",i},propPatch:function(e,i,r){r=r||{},r["Content-Type"]="application/xml; charset=utf-8";var s='<?xml version="1.0"?>\n<d:propertyupdate ',a;for(a in this.xmlNamespaces)s+=" xmlns:"+this.xmlNamespaces[a]+'="'+a+'"';return s+=">\n"+this._renderPropSet(i),s+="</d:propertyupdate>",this.request("PROPPATCH",e,r,s).then((function(c){return{status:c.status,body:c.body,xhr:c.xhr}}).bind(this))},mkcol:function(e,i,r){var s="";if(r=r||{},r["Content-Type"]="application/xml; charset=utf-8",i){s='<?xml version="1.0"?>\n<d:mkcol';var a;for(a in this.xmlNamespaces)s+=" xmlns:"+this.xmlNamespaces[a]+'="'+a+'"';s+=">\n"+this._renderPropSet(i),s+="</d:mkcol>"}return this.request("MKCOL",e,r,s).then((function(c){return{status:c.status,body:c.body,xhr:c.xhr}}).bind(this))},request:function(e,i,r,s,a,c){var h=this,d=this.xhrProvider();r=r||{},a=a||"",this.userName&&(r.Authorization="Basic "+btoa(this.userName+":"+this.password)),d.open(e,this.resolveUrl(i),!0);var y;for(y in r)d.setRequestHeader(y,r[y]);return d.responseType=a,c&&typeof c.onProgress=="function"&&(e==="PUT"||e==="POST"?d.upload.addEventListener("progress",function(b){c.onProgress(b)},!1):d.addEventListener("progress",function(b){c.onProgress(b)},!1)),s===void 0?d.send():d.send(s),new Promise(function(b,E){d.onreadystatechange=function(){if(d.readyState===4){var v=d.response;d.status===207&&(v=h.parseMultiStatus(d.response)),b({body:v,status:d.status,xhr:d})}},d.ontimeout=function(){E(new Error("Timeout exceeded"))}})},xhrProvider:function(){return new XMLHttpRequest},_parsePropNode:function(e){var i=null;if(e.childNodes&&e.childNodes.length>0){for(var r=[],s=0;s<e.childNodes.length;s++){var a=e.childNodes[s];a.nodeType===1&&r.push(a)}r.length&&(i=r)}return i||e.textContent||e.text||""},parseMultiStatus:function(e){for(var i=new DOMParser,r=i.parseFromString(e,"application/xml"),s=(function(R){var P;for(P in this.xmlNamespaces)if(this.xmlNamespaces[P]===R)return P}).bind(this),a=r.evaluate("/d:multistatus/d:response",r,s,XPathResult.ANY_TYPE,null),c=[],h=a.iterateNext();h;){var d={href:null,propStat:[]};d.href=r.evaluate("string(d:href)",h,s,XPathResult.ANY_TYPE,null).stringValue;for(var y=r.evaluate("d:propstat",h,s,XPathResult.ANY_TYPE,null),b=y.iterateNext();b;){for(var E={status:r.evaluate("string(d:status)",b,s,XPathResult.ANY_TYPE,null).stringValue,properties:{}},v=r.evaluate("d:prop/*",b,s,XPathResult.ANY_TYPE,null),U=v.iterateNext();U;){var F=this._parsePropNode(U);E.properties["{"+U.namespaceURI+"}"+U.localName]=F,U=v.iterateNext()}d.propStat.push(E),b=y.iterateNext()}c.push(d),h=a.iterateNext()}return c},resolveUrl:function(e){if(/^https?:\/\//i.test(e))return e;var i=this.parseUrl(this.baseUrl);return e.charAt("/")?i.root+e:(i.root+"",i.path.lastIndexOf("/")!==-1&&i.path.subString(0,i.path.lastIndexOf("/"))+"",e)},parseUrl:function(e){var i=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/),r={url:i[0],scheme:i[1],host:i[3],port:i[4],path:i[5],query:i[6],fragment:i[7]};return r.root=r.scheme+"://"+r.host+(r.port?":"+r.port:""),r},parseClarkNotation:function(e){var i=e.match(/^{([^}]+)}(.*)$/);if(i)return{name:i[2],namespace:i[1]}}};var zs={dav:yt,Client:yt.Client};const qs={create:"POST",update:"PROPPATCH",patch:"PROPPATCH",delete:"DELETE",read:"PROPFIND"};function $s(){throw new Error('A "url" property or function must be specified')}function xn(e,i){if(T.isArray(e))return T.map(e,function(s){return xn(s,i)});var r={href:e.href};return T.each(e.propStat,function(s){if(s.status==="HTTP/1.1 200 OK")for(var a in s.properties){var c=a;a in i&&(c=i[a]),r[c]=s.properties[a]}}),r.id||(r.id=yr(r.href)),r}function yr(e){var i=e.indexOf("?");i>0&&(e=e.substr(0,i));var r=e.split("/"),s;do s=r[r.length-1],r.pop();while(!s&&r.length>0);return s}function Ee(e){return e>=200&&e<=299}function Vs(e,i){var r={},s;for(s in e){var a=i[s],c=e[s];a||(console.warn('No matching DAV property for property "'+s),a=s),(T.isBoolean(c)||T.isNumber(c))&&(c=""+c),r[a]=c}return r}function Ys(e,i,r,s){return e.propFind(i.url,T.values(i.davProperties)||[],i.depth,s).then(function(a){if(Ee(a.status)){if(T.isFunction(i.success)){var c=T.invert(i.davProperties),h=xn(a.body,c);i.depth>0&&h.shift(),i.success(h)}}else T.isFunction(i.error)&&i.error(a)})}function br(e,i,r,s){return e.propPatch(i.url,Vs(r.changed,i.davProperties),s).then(function(a){Ee(a.status)?T.isFunction(i.success)&&i.success(r.toJSON()):T.isFunction(i.error)&&i.error(a)})}function Ws(e,i,r,s){return e.request(i.type,i.url,s,null).then(function(a){if(!Ee(a.status)){T.isFunction(i.error)&&i.error(a);return}br(e,i,r,s)})}function Ks(e,i,r,s){return s["Content-Type"]="application/json",e.request(i.type,i.url,s,i.data).then(function(a){if(!Ee(a.status)){T.isFunction(i.error)&&i.error(a);return}if(T.isFunction(i.success)){if(i.type==="PUT"||i.type==="POST"||i.type==="MKCOL"){var c=a.body||r.toJSON(),h=a.xhr.getResponseHeader("Content-Location");i.type==="POST"&&h&&(c.id=yr(h)),i.success(c);return}if(a.status===207){var d=T.invert(i.davProperties);i.success(xn(a.body,d))}else i.success(a.body)}})}const Xs=(e,i)=>{var r=new zs.dav.Client({baseUrl:e.url,xmlNamespaces:T.extend({"DAV:":"d","http://owncloud.org/ns":"oc"},e.xmlNamespaces||{})});r.resolveUrl=function(){return e.url};var s=T.extend({"X-Requested-With":"XMLHttpRequest",requesttoken:OC.requestToken},e.headers);return e.type==="PROPFIND"?Ys(r,e,i,s):e.type==="PROPPATCH"?br(r,e,i,s):e.type==="MKCOL"?Ws(r,e,i,s):Ks(r,e,i,s)},Qs=e=>(i,r,s)=>{var a={type:qs[i]||i},c=r instanceof e.Collection;if(i==="update"&&(r.hasInnerCollection?a.type="MKCOL":(r.usePUT||r.collection&&r.collection.usePUT)&&(a.type="PUT")),s.url||(a.url=T.result(r,"url")||$s()),s.data==null&&r&&(i==="create"||i==="update"||i==="patch")&&(a.data=JSON.stringify(s.attrs||r.toJSON(s))),a.type!=="PROPFIND"&&(a.processData=!1),a.type==="PROPFIND"||a.type==="PROPPATCH"){var h=r.davProperties;!h&&r.model&&(h=r.model.prototype.davProperties),h&&(T.isFunction(h)?a.davProperties=h.call(r):a.davProperties=h),a.davProperties=T.extend(a.davProperties||{},s.davProperties),T.isUndefined(s.depth)&&(c?s.depth=1:s.depth=0)}var d=s.error;s.error=function(b,E,v){s.textStatus=E,s.errorThrown=v,d&&d.call(s.context,b,E,v)};var y=s.xhr=e.davCall(T.extend(a,s),r);return r.trigger("request",r,y,s),y},je=Hs.noConflict();Object.assign(je,{davCall:Xs,davSync:Qs(je)});const Gs=e=>{let i,r;const s={};let a;if(!e)return null;i=e.indexOf("?"),i>=0&&(e=e.substr(i+1));const c=e.replace(/\+/g,"%20").split("&");for(let h=0;h<c.length;h++){const d=c[h];i=d.indexOf("="),i>=0?r=[d.substr(0,i),d.substr(i+1)]:r=[d],r.length&&(a=decodeURIComponent(r[0]),a&&(r.length>1?s[a]=decodeURIComponent(r[1]):s[a]=null))}return s},Js=e=>e?m.map(e,function(i,r){let s=encodeURIComponent(r);return i!==null&&typeof i<"u"&&(s+="="+encodeURIComponent(i)),s}).join("&"):"",Mn=window._oc_config||{},Zs=["","admin","log","core/search","core","3rdparty"],wn=50,to=0,eo=4,no=1,io=2,ro=8,so=16,oo=31,ao="_$!<Favorite>!$_",Rn=document.getElementsByTagName("head")[0].getAttribute("data-user"),uo=document.getElementsByTagName("head")[0].getAttribute("data-user-displayname"),_r=Rn!==void 0?Rn:!1,co=()=>({uid:_r,displayName:uo}),lt={YES_NO_BUTTONS:70,OK_BUTTONS:71,FILEPICKER_TYPE_CHOOSE:1,FILEPICKER_TYPE_MOVE:2,FILEPICKER_TYPE_COPY:3,FILEPICKER_TYPE_COPY_MOVE:4,FILEPICKER_TYPE_CUSTOM:5,alert:function(e,i,r,s){this.message(e,i,"alert",lt.OK_BUTTON,r,s)},info:function(e,i,r,s){this.message(e,i,"info",lt.OK_BUTTON,r,s)},confirm:function(e,i,r,s){return this.message(e,i,"notice",lt.YES_NO_BUTTONS,r,s)},confirmDestructive:function(e,i,r=lt.OK_BUTTONS,s=()=>{},a){return new Oe().setName(i).setText(e).setButtons(r===lt.OK_BUTTONS?[{label:I("core","Yes"),type:"error",callback:()=>{s.clicked=!0,s(!0)}}]:lt._getLegacyButtons(r,s)).build().show().then(()=>{s.clicked||s(!1)})},confirmHtml:function(e,i,r,s){return new Oe().setName(i).setText("").setButtons([{label:I("core","No"),callback:()=>{}},{label:I("core","Yes"),type:"primary",callback:()=>{r.clicked=!0,r(!0)}}]).build().setHTML(e).show().then(()=>{r.clicked||r(!1)})},prompt:function(e,i,r,s,a,c){return new Promise(h=>{ns(Rr(()=>Zr(()=>import("./LegacyDialogPrompt-C0WCognN.mjs"),__vite__mapDeps([0,1,2]),import.meta.url)),{text:e,name:i,callback:r,inputName:a,isPassword:!!c},(...d)=>{r(...d),h()})})},filepicker(e,i,r=!1,s=void 0,a=void 0,c=ct.Choose,h=void 0,d=void 0){const y=(v,U)=>{const F=R=>{const P=(R==null?void 0:R.root)||"";let S=(R==null?void 0:R.path)||"";return S.startsWith(P)&&(S=S.slice(P.length)||"/"),S};return r?R=>v(R.map(F),U):R=>v(F(R[0]),U)},b=v=>{var U,F,R,P,S,k;return{id:v.fileid||null,path:v.path,mimetype:v.mime||null,mtime:((U=v.mtime)==null?void 0:U.getTime())||null,permissions:v.permissions,name:((F=v.attributes)==null?void 0:F.displayName)||v.basename,etag:((R=v.attributes)==null?void 0:R.etag)||null,hasPreview:((P=v.attributes)==null?void 0:P.hasPreview)||null,mountType:((S=v.attributes)==null?void 0:S.mountType)||null,quotaAvailableBytes:((k=v.attributes)==null?void 0:k.quotaAvailableBytes)||null,icon:null,sharePermissions:null}},E=is(e);c===this.FILEPICKER_TYPE_CUSTOM?(d.buttons||[]).forEach(v=>{E.addButton({callback:y(i,v.type),label:v.text,type:v.defaultButton?"primary":"secondary"})}):E.setButtonFactory((v,U)=>{var S,k,N;const F=[],R=((k=(S=v==null?void 0:v[0])==null?void 0:S.attributes)==null?void 0:k.displayName)||((N=v==null?void 0:v[0])==null?void 0:N.basename),P=R||Yr.basename(U);return c===ct.Choose&&F.push({callback:y(i,ct.Choose),label:R&&!this.multiSelect?I("core","Choose {file}",{file:R}):I("core","Choose"),type:"primary"}),(c===ct.CopyMove||c===ct.Copy)&&F.push({callback:y(i,ct.Copy),label:P?I("core","Copy to {target}",{target:P}):I("core","Copy"),type:"primary",icon:ts}),(c===ct.Move||c===ct.CopyMove)&&F.push({callback:y(i,ct.Move),label:P?I("core","Move to {target}",{target:P}):I("core","Move"),type:c===ct.Move?"primary":"secondary",icon:es}),F}),s&&E.setMimeTypeFilter(typeof s=="string"?[s]:s||[]),typeof(d==null?void 0:d.filter)=="function"&&E.setFilter(v=>d.filter(b(v))),E.allowDirectories((d==null?void 0:d.allowDirectoryChooser)===!0||(s==null?void 0:s.includes("httpd/unix-directory"))||!1).setMultiSelect(r).startAt(h).build().pick()},message:function(e,i,r,s,a=()=>{},c,h){const d=new Oe().setName(i).setText(h?"":e).setButtons(lt._getLegacyButtons(s,a));switch(r){case"alert":d.setSeverity("warning");break;case"notice":d.setSeverity("info");break}const y=d.build();return h&&y.setHTML(e),y.show().then(()=>{a._clicked||a(!1)})},_getLegacyButtons(e,i){var s,a,c;const r=[];switch(typeof e=="object"?e.type:e){case lt.YES_NO_BUTTONS:r.push({label:(s=e==null?void 0:e.cancel)!=null?s:I("core","No"),callback:()=>{i._clicked=!0,i(!1)}}),r.push({label:(a=e==null?void 0:e.confirm)!=null?a:I("core","Yes"),type:"primary",callback:()=>{i._clicked=!0,i(!0)}});break;case lt.OK_BUTTONS:r.push({label:(c=e==null?void 0:e.confirm)!=null?c:I("core","OK"),type:"primary",callback:()=>{i._clicked=!0,i(!0)}});break;default:console.error("Invalid call to OC.dialogs");break}return r},_fileexistsshown:!1,fileexists:function(e,i,r,s){var a=this,c=new m.Deferred,h=function(P){var S=new m.Deferred,k=P.type&&P.type.split("/").shift();if(window.FileReader&&k==="image"){var N=new FileReader;N.onload=function(O){var B=new Blob([O.target.result]);window.URL=window.URL||window.webkitURL;var z=window.URL.createObjectURL(B),w=new Image;w.src=z,w.onload=function(){var q=d(w);S.resolve(q)}},N.readAsArrayBuffer(P)}else S.reject();return S},d=function(P){var S=document.createElement("canvas"),k=96,N=P.width,O=P.height,B,z,w;N>O?(z=0,B=(N-O)/2):(z=(O-N)/2,B=0),w=Math.min(N,O),S.width=w,S.height=w;var q=S.getContext("2d");return q.drawImage(P,B,z,w,w,0,0,w,w),y(S,w,w,k,k),S.toDataURL("image/png",.7)},y=function(P,S,k,N,O){N=Math.round(N),O=Math.round(O);for(var B=P.getContext("2d").getImageData(0,0,S,k),z=P.getContext("2d").getImageData(0,0,N,O),w=B.data,q=z.data,J=S/N,ht=k/O,Qt=Math.ceil(J/2),Se=Math.ceil(ht/2),ft=0;ft<O;ft++)for(var mt=0;mt<N;mt++){for(var Ot=(mt+ft*N)*4,et=0,Et=0,Ut=0,Gt=0,Jt=0,Zt=0,te=0,ee=(ft+.5)*ht,Tt=Math.floor(ft*ht);Tt<(ft+1)*ht;Tt++)for(var ne=Math.abs(ee-(Tt+.5))/Se,Pe=(mt+.5)*J,ke=ne*ne,Z=Math.floor(mt*J);Z<(mt+1)*J;Z++){var it=Math.abs(Pe-(Z+.5))/Qt,dt=Math.sqrt(ke+it*it);dt>=-1&&dt<=1&&(et=2*dt*dt*dt-3*dt*dt+1,et>0&&(it=4*(Z+Tt*S),te+=et*w[it+3],Ut+=et,w[it+3]<255&&(et=et*w[it+3]/250),Gt+=et*w[it],Jt+=et*w[it+1],Zt+=et*w[it+2],Et+=et))}q[Ot]=Gt/Et,q[Ot+1]=Jt/Et,q[Ot+2]=Zt/Et,q[Ot+3]=te/Ut}P.getContext("2d").clearRect(0,0,Math.max(S,N),Math.max(k,O)),P.width=N,P.height=O,P.getContext("2d").putImageData(z,0,0)},b=function(P,S,k){var N=P.find(".template").clone().removeClass("template").addClass("conflict"),O=N.find(".original"),B=N.find(".replacement");N.data("data",e),N.find(".filename").text(S.name),O.find(".size").text(M.Util.humanFileSize(S.size)),O.find(".mtime").text(M.Util.formatDate(S.mtime)),k.size&&k.lastModified&&(B.find(".size").text(M.Util.humanFileSize(k.size)),B.find(".mtime").text(M.Util.formatDate(k.lastModified)));var z=S.directory+"/"+S.name,w={file:z,x:96,y:96,c:S.etag,forceIcon:0},q=Files.generatePreviewUrl(w);q=q.replace(/'/g,"%27"),O.find(".icon").css({"background-image":"url('"+q+"')"}),h(k).then(function(ht){B.find(".icon").css("background-image","url("+ht+")")},function(){z=M.MimeType.getIconUrl(k.type),B.find(".icon").css("background-image","url("+z+")")});var J=P.find(".conflict").length;O.find("input:checkbox").attr("id","checkbox_original_"+J),B.find("input:checkbox").attr("id","checkbox_replacement_"+J),P.append(N),k.lastModified>S.mtime?B.find(".mtime").css("font-weight","bold"):k.lastModified<S.mtime&&O.find(".mtime").css("font-weight","bold"),k.size&&k.size>S.size?B.find(".size").css("font-weight","bold"):k.size&&k.size<S.size&&O.find(".size").css("font-weight","bold"),S.status==="readonly"&&(O.addClass("readonly").find('input[type="checkbox"]').prop("checked",!0).prop("disabled",!0),O.find(".message").text(I("core","read-only")))},E="oc-dialog-fileexists-content",v="#"+E;if(this._fileexistsshown){var U=m(v+" .conflicts");b(U,i,r);var F=m(v+" .conflict").length,R=n("core","{count} file conflict","{count} file conflicts",F,{count:F});m(v).parent().children(".oc-dialog-title").text(R),m(window).trigger("resize"),c.resolve()}else this._fileexistsshown=!0,m.when(this._getFileExistsTemplate()).then(function(P){var S=I("core","One file conflict"),k=P.octemplate({dialog_name:E,title:S,type:"fileexists",allnewfiles:I("core","New Files"),allexistingfiles:I("core","Already existing files"),why:I("core","Which files do you want to keep?"),what:I("core","If you select both versions, the copied file will have a number added to its name.")});if(m("body").append(k),i&&r){var N=k.find(".conflicts");b(N,i,r)}var O=[{text:I("core","Cancel"),classes:"cancel",click:function(){typeof s.onCancel<"u"&&s.onCancel(e),m(v).ocdialog("close")}},{text:I("core","Continue"),classes:"continue",click:function(){typeof s.onContinue<"u"&&s.onContinue(m(v+" .conflict")),m(v).ocdialog("close")}}];m(v).ocdialog({width:500,closeOnEscape:!0,modal:!0,buttons:O,closeButton:null,close:function(){a._fileexistsshown=!1;try{m(this).ocdialog("destroy").remove()}catch{}}}),m(v).css("height","auto");var B=k.closest(".oc-dialog").find("button.continue");B.prop("disabled",!0);function z(){var w=k.find(".conflicts .checkbox:checked").length;B.prop("disabled",w===0)}m(v).find(".allnewfiles").on("click",function(){var w=m(v).find('.conflict .replacement input[type="checkbox"]');w.prop("checked",m(this).prop("checked"))}),m(v).find(".allexistingfiles").on("click",function(){var w=m(v).find('.conflict .original:not(.readonly) input[type="checkbox"]');w.prop("checked",m(this).prop("checked"))}),m(v).find(".conflicts").on("click",".replacement,.original:not(.readonly)",function(){var w=m(this).find('input[type="checkbox"]');w.prop("checked",!w.prop("checked"))}),m(v).find(".conflicts").on("click",'.replacement input[type="checkbox"],.original:not(.readonly) input[type="checkbox"]',function(){var w=m(this);w.prop("checked",!w.prop("checked"))}),m(v).on("click",".replacement,.allnewfiles",function(){var w=m(v).find('.conflict .replacement input[type="checkbox"]:checked').length;w===m(v+" .conflict").length?(m(v).find(".allnewfiles").prop("checked",!0),m(v).find(".allnewfiles + .count").text(I("core","(all selected)"))):w>0?(m(v).find(".allnewfiles").prop("checked",!1),m(v).find(".allnewfiles + .count").text(I("core","({count} selected)",{count:w}))):(m(v).find(".allnewfiles").prop("checked",!1),m(v).find(".allnewfiles + .count").text("")),z()}),m(v).on("click",".original,.allexistingfiles",function(){var w=m(v).find('.conflict .original input[type="checkbox"]:checked').length;w===m(v+" .conflict").length?(m(v).find(".allexistingfiles").prop("checked",!0),m(v).find(".allexistingfiles + .count").text(I("core","(all selected)"))):w>0?(m(v).find(".allexistingfiles").prop("checked",!1),m(v).find(".allexistingfiles + .count").text(I("core","({count} selected)",{count:w}))):(m(v).find(".allexistingfiles").prop("checked",!1),m(v).find(".allexistingfiles + .count").text("")),z()}),c.resolve()}).fail(function(){c.reject(),alert(I("core","Error loading file exists template"))});return c.promise()},_getFileExistsTemplate:function(){var e=m.Deferred();if(this.$fileexistsTemplate)e.resolve(this.$fileexistsTemplate);else{var i=this;m.get(M.filePath("files","templates","fileexists.html"),function(r){i.$fileexistsTemplate=m(r),e.resolve(i.$fileexistsTemplate)}).fail(function(){e.reject()})}return e.promise()}},rt=function(e,i){var r="",s,a;if(this.typelessListeners=[],this.closed=!1,this.listeners={},i)for(s in i)r+=s+"="+encodeURIComponent(i[s])+"&";if(r+="requesttoken="+encodeURIComponent(Bn()),!this.useFallBack&&typeof EventSource<"u")a="&",e.indexOf("?")===-1&&(a="?"),this.source=new EventSource(e+a+r),this.source.onmessage=(function(h){for(var d=0;d<this.typelessListeners.length;d++)this.typelessListeners[d](JSON.parse(h.data))}).bind(this);else{var c="oc_eventsource_iframe_"+rt.iframeCount;rt.fallBackSources[rt.iframeCount]=this,this.iframe=m("<iframe></iframe>"),this.iframe.attr("id",c),this.iframe.hide(),a="&",e.indexOf("?")===-1&&(a="?"),this.iframe.attr("src",e+a+"fallback=true&fallback_id="+rt.iframeCount+"&"+r),m("body").append(this.iframe),this.useFallBack=!0,rt.iframeCount++}this.listen("__internal__",(function(h){h==="close"&&this.close()}).bind(this))};rt.fallBackSources=[],rt.iframeCount=0,rt.fallBackCallBack=function(e,i,r){rt.fallBackSources[e].fallBackCallBack(i,r)},rt.prototype={typelessListeners:[],iframe:null,listeners:{},useFallBack:!1,fallBackCallBack:function(e,i){var r;if(!this.closed)if(e){if(typeof this.listeners.done<"u")for(r=0;r<this.listeners[e].length;r++)this.listeners[e][r](i)}else for(r=0;r<this.typelessListeners.length;r++)this.typelessListeners[r](i)},lastLength:0,listen:function(e,i){i&&i.call&&(e?this.useFallBack?(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)):this.source.addEventListener(e,function(r){typeof r.data<"u"?i(JSON.parse(r.data)):i("")},!1):this.typelessListeners.push(i))},close:function(){this.closed=!0,typeof this.source<"u"&&this.source.close()}};const lo=e=>i=>{const r=i.split("."),s=r.pop();for(let a=0;a<r.length;a++)if(e=e[r[a]],!e)return!1;return e[s]},ho=e=>(i,r)=>{const s=i.split("."),a=s.pop();for(let c=0;c<s.length;c++)e[s[c]]||(e[s[c]]={}),e=e[s[c]];return e[a]=r,r},fo=()=>(OC.debug&&console.warn("OC.getCapabilities is deprecated and will be removed in Nextcloud 21. See @nextcloud/capabilities"),jr()),po=()=>window.location.protocol.split(":")[0],go=()=>window.location.host,mo=()=>window.location.hostname,vo=()=>window.location.port;let st=null,Lt=null;const yo=function(e,i,r,s){i.addClass("menu");const a=e.prop("tagName")==="A"||e.prop("tagName")==="BUTTON";e.on(a?"click.menu":"click.menu keyup.menu",function(c){if(c.preventDefault(),!(c.key&&c.key!=="Enter")){if(i.is(st)){Yt();return}else st&&Yt();s===!0&&i.parent().addClass("openedMenu"),e.attr("aria-expanded",!0),i.slideToggle(wn,r),st=i,Lt=e}})},bo=(e,i)=>{i.is(st)&&Yt(),e.off("click.menu").removeClass("menutoggle"),i.removeClass("menu")},Yt=function(e){if(st){const i=st;st.trigger(new m.Event("beforeHide")),st.slideUp(wn,function(){i.trigger(new m.Event("afterHide")),e&&e.apply(this,arguments)})}m(".menutoggle").attr("aria-expanded",!1),Lt&&Lt.attr("aria-expanded",!1),m(".openedMenu").removeClass("openedMenu"),st=null,Lt=null},_o=(e,i,r)=>{i.is(st)||(Yt(),st=i,Lt=e,i.trigger(new m.Event("beforeShow")),i.show(),i.trigger(new m.Event("afterShow")),T.isFunction(r)&&r())},xo=!!window._oc_isadmin,wo=()=>xo,Eo=e=>Un()+"/remote.php/"+e,So={startSaving(e){this.startAction(e,t("core","Saving "))},startAction(e,i){m(e).text(i).removeClass("success").removeClass("error").stop(!0,!0).show()},finishedSaving(e,i){this.finishedAction(e,i)},finishedAction(e,i){i.status==="success"?this.finishedSuccess(e,i.data.message):this.finishedError(e,i.data.message)},finishedSuccess(e,i){m(e).text(i).addClass("success").removeClass("error").stop(!0,!0).delay(3e3).fadeOut(900).show()},finishedError(e,i){m(e).text(i).addClass("error").removeClass("success").show()}},Po={requiresPasswordConfirmation(){return rs()},requirePasswordConfirmation(e,i,r){ss().then(e,r)}},ko={_plugins:{},register(e,i){let r=this._plugins[e];r||(r=this._plugins[e]=[]),r.push(i)},getPlugins(e){return this._plugins[e]||[]},attach(e,i,r){const s=this.getPlugins(e);for(let a=0;a<s.length;a++)s[a].attach&&s[a].attach(i,r)},detach(e,i,r){const s=this.getPlugins(e);for(let a=0;a<s.length;a++)s[a].detach&&s[a].detach(i,r)}},Co=window._theme||{},No={_handlers:[],_pushState(e,i,r){let s;if(typeof e=="string"?s=e:s=M.buildQueryString(e),window.history.pushState){if(i=i||location.pathname+"?"+s,navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&parseInt(navigator.userAgent.split("/").pop())<51){const a=document.querySelectorAll('[fill^="url(#"], [stroke^="url(#"], [filter^="url(#invert"]');for(let c=0,h=a.length,d;c<h;c++)d=a[c],d.style.fill=d.style.fill,d.style.stroke=d.style.stroke,d.removeAttribute("filter"),d.setAttribute("filter","url(#invert)")}r?window.history.replaceState(e,"",i):window.history.pushState(e,"",i)}else window.location.hash="?"+s,this._cancelPop=!0},pushState(e,i){this._pushState(e,i,!1)},replaceState(e,i){this._pushState(e,i,!0)},addOnPopStateHandler(e){this._handlers.push(e)},_parseHashQuery(){const e=window.location.hash,i=e.indexOf("?");return i>=0?e.substr(i+1):e.length?e.substr(1):""},_decodeQuery(e){return e.replace(/\+/g," ")},parseUrlQuery(){const e=this._parseHashQuery();let i;return e&&(i=M.parseQueryString(this._decodeQuery(e))),i=T.extend(i||{},M.parseQueryString(this._decodeQuery(location.search))),i||{}},_onPopState(e){if(this._cancelPop){this._cancelPop=!1;return}let i;if(this._handlers.length){i=e&&e.state,T.isString(i)?i=M.parseQueryString(i):i||(i=this.parseUrlQuery()||{});for(let r=0;r<this._handlers.length;r++)this._handlers[r](i)}}};function jn(e){const i=[];let r=0,s=-1,a=0,c;for(;r<e.length;){c=e.charAt(r);const h=!a&&c==="."||c>="0"&&c<="9";h!==a&&(s++,i[s]="",a=h),i[s]+=c,r++}return i}const Oo={History:No,humanFileSize:os,computerFileSize(e){if(typeof e!="string")return null;const i=e.toLowerCase().trim();let r=null;const s={b:1,k:1024,kb:1024,mb:1024*1024,m:1024*1024,gb:1024*1024*1024,g:1024*1024*1024,tb:1024*1024*1024*1024,t:1024*1024*1024*1024,pb:1024*1024*1024*1024*1024,p:1024*1024*1024*1024*1024},a=i.match(/^[\s+]?([0-9]*)(\.([0-9]+))?( +)?([kmgtp]?b?)$/i);if(a!==null){if(r=parseFloat(i),!isFinite(r))return null}else return null;return a[5]&&(r=r*s[a[5]]),r=Math.round(r),r},formatDate(e,i){return window.TESTING===void 0&&M.debug&&console.warn("OC.Util.formatDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment"),i=i||"LLL",ae(e).format(i)},relativeModifiedDate(e){window.TESTING===void 0&&M.debug&&console.warn("OC.Util.relativeModifiedDate is deprecated and will be removed in Nextcloud 21. See @nextcloud/moment");const i=ae().diff(ae(e));return i>=0&&i<45e3?t("core","seconds ago"):ae(e).fromNow()},getScrollBarWidth(){if(this._scrollBarWidth)return this._scrollBarWidth;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(e),document.body.appendChild(i);const r=e.offsetWidth;i.style.overflow="scroll";let s=e.offsetWidth;return r===s&&(s=i.clientWidth),document.body.removeChild(i),this._scrollBarWidth=r-s,this._scrollBarWidth},stripTime(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},naturalSortCompare(e,i){let r;const s=jn(e),a=jn(i);for(r=0;s[r]&&a[r];r++)if(s[r]!==a[r]){const c=Number(s[r]),h=Number(a[r]);return c==s[r]&&h==a[r]?c-h:s[r].localeCompare(a[r],M.getLanguage())}return s.length-a.length},waitFor(e,i){const r=function(){e()!==!0&&setTimeout(r,i)};r()},isCookieSetToValue(e,i){const r=document.cookie.split(";");for(let s=0;s<r.length;s++){const a=r[s].split("=");if(a[0].trim()===e&&a[1].trim()===i)return!0}return!1}},To=window._oc_debug,Ao=To,Io=e=>{window.location=e},Mo=()=>{window.location.reload()};let pt=window._oc_webroot;if(typeof pt>"u"){pt=location.pathname;const e=pt.indexOf("/index.php/");e!==-1?pt=pt.substr(0,e):pt=pt.substr(0,pt.lastIndexOf("/"))}const Ro=pt,M={coreApps:Zs,menuSpeed:wn,PERMISSION_ALL:oo,PERMISSION_CREATE:eo,PERMISSION_DELETE:ro,PERMISSION_NONE:to,PERMISSION_READ:no,PERMISSION_SHARE:so,PERMISSION_UPDATE:io,TAG_FAVORITE:ao,fileIsBlacklisted:e=>!!e.match(Mn.blacklist_files_regex),Apps:Re,AppConfig:Bs,appConfig:Us,appswebroots:Ls,Backbone:je,config:Mn,currentUser:_r,dialogs:lt,EventSource:rt,getCurrentUser:co,isUserAdmin:wo,L10N:Bt,_ajaxConnectionLostHandler:Rs,_processAjaxError:js,registerXHRForErrorProcessing:Fs,getCapabilities:fo,hideMenus:Yt,registerMenu:yo,showMenu:_o,unregisterMenu:bo,basename:Kr,encodePath:Xr,dirname:Qr,isSamePath:Gr,joinPaths:Jr,getHost:go,getHostName:mo,getPort:vo,getProtocol:po,getCanonicalLocale:Ur,getLocale:Br,getLanguage:Lr,buildQueryString:Js,parseQueryString:Gs,msg:So,Notification:_n,PasswordConfirmation:Po,Plugins:ko,theme:Co,Util:Oo,debug:Ao,filePath:Dr,generateUrl:Hr,get:lo(window),set:ho(window),getRootPath:Un,imagePath:zr,redirect:Io,reload:Mo,requestToken:Bn(),linkTo:qr,linkToOCS:(e,i)=>Fn(e,{},{ocsVersion:i||1})+"/",linkToRemote:$r,linkToRemoteBase:Eo,webroot:Ro};Fr("csrf-token-update",e=>{OC.requestToken=e.token,console.info("OC.requestToken changed",e.token)});const Go={data(){return{OC:M}},methods:{t:Bt.translate.bind(Bt),n:Bt.translatePlural.bind(Bt)}};export{Qo as A,Go as N,M as O,T as _,zs as c,Xo as r};
