/*! third party licenses: dist/vendor.LICENSE.txt */
import{a_ as m,bS as p,bu as r,bL as g,T as f,b$ as c,bR as b}from"../core-common.mjs";import{M as h}from"./Markdown-Dm4KOgdr.mjs";import{n as _}from"./icons-TElqpmA8.mjs";import"./marked.esm-C_q1v7Sb.mjs";const k=m({__name:"AppChangelogDialog",props:{appId:null,version:{default:void 0},open:{type:Boolean,default:!0}},emits:["dismiss","update:open"],setup(t,{emit:n}){var e;const a=t,u=[{label:p("updatenotification","Give feedback"),callback:()=>{window.open("https://apps.nextcloud.com/apps/".concat(a.appId,"#comments"),"_blank","noreferrer noopener")}},{label:p("updatenotification","Get started"),type:"primary",callback:()=>{n("dismiss"),n("update:open",!1)}}],s=r(a.appId),l=r((e=a.version)!=null?e:""),i=r("");return g(()=>{const v=a.version?c("/apps/updatenotification/api/v1/changelog/{app}?version={version}",{version:a.version,app:a.appId}):c("/apps/updatenotification/api/v1/changelog/{app}",{version:a.version,app:a.appId});b.get(v).then(({data:o})=>{s.value=o.ocs.data.appName,l.value=o.ocs.data.version,i.value=o.ocs.data.content}).catch(o=>{var d;((d=o==null?void 0:o.response)==null?void 0:d.status)===404?(s.value=a.appId,i.value=p("updatenotification","No changelog available")):(console.error("Failed to load changelog entry",o),n("update:open",!1))})}),{__sfc:!0,props:a,emit:n,dialogButtons:u,appName:s,appVersion:l,markdown:i,t:p,NcDialog:f,Markdown:h}}});var w=function(){var t=this,n=t._self._c,e=t._self._setupProxy;return n(e.NcDialog,{attrs:{"content-classes":"app-changelog-dialog",buttons:e.dialogButtons,name:e.t("updatenotification","What's new in {app} {version}",{app:e.appName,version:e.appVersion}),open:t.open&&e.markdown!==void 0,size:"normal"},on:{"update:open":function(a){return t.$emit("update:open",a)}}},[n(e.Markdown,{staticClass:"app-changelog-dialog__text",attrs:{markdown:e.markdown,"min-heading-level":3}})],1)},x=[],I=_(k,w,x,!1,null,"68dbca43");const D=I.exports;export{D as default};
