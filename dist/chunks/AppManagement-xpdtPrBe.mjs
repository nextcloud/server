/*! third party licenses: dist/vendor.LICENSE.txt */
import{a_ as n,a1 as l,bS as o,aX as i}from"../core-common.mjs";import{b as m,ad as f,ae as b,n as u,h as S,e as y}from"./icons-TElqpmA8.mjs";import"./index-PaKKd09k.mjs";import{z as p}from"./_plugin-vue2_normalizer-VrK6B12S-BQkexw0P.mjs";import{r}from"./rebuild-navigation-C1f1Ra5A.mjs";const v=n({name:"AppScore",components:{NcIconSvgWrapper:l},props:{score:{type:Number,required:!0}},setup(){return{mdiStar:m,mdiStarHalfFull:f,mdiStarOutline:b}},computed:{title(){const e=(this.score*5).toFixed(1);return o("settings","Community rating: {score}/5",{score:e})},fullStars(){return Math.floor(this.score*5+.25)},emptyStars(){return Math.min(Math.floor((1-this.score)*5+.25),5-this.fullStars)},hasHalfStar(){return this.fullStars+this.emptyStars<5}}});var _=function(){var e=this,s=e._self._c;return e._self._setupProxy,s("span",{staticClass:"app-score__wrapper",attrs:{role:"img","aria-label":e.title,title:e.title}},[e._l(e.fullStars,function(a){return s("NcIconSvgWrapper",{key:"full-star-".concat(a),attrs:{path:e.mdiStar,inline:""}})}),e.hasHalfStar?s("NcIconSvgWrapper",{attrs:{path:e.mdiStarHalfFull,inline:""}}):e._e(),e._l(e.emptyStars,function(a){return s("NcIconSvgWrapper",{key:"empty-star-".concat(a),attrs:{path:e.mdiStarOutline,inline:""}})})],2)},A=[],I=u(v,_,A,!1,null,"ce97f5e2");const G=I.exports,w=n({__name:"AppLevelBadge",props:{level:null},setup(e){const s=e,a=i(()=>s.level===300),d=i(()=>s.level===200),c=i(()=>a.value?S:y),h=i(()=>a.value?o("settings","Supported"):o("settings","Featured")),g=i(()=>a.value?o("settings","This app is supported via your current Nextcloud subscription."):o("settings","Featured apps are developed by and within the community. They offer central functionality and are ready for production use."));return{__sfc:!0,props:s,isSupported:a,isFeatured:d,badgeIcon:c,badgeText:h,badgeTitle:g,NcIconSvgWrapper:l}}});var x=function(){var e=this,s=e._self._c,a=e._self._setupProxy;return a.isSupported||a.isFeatured?s("span",{staticClass:"app-level-badge",class:{"app-level-badge--supported":a.isSupported},attrs:{title:a.badgeTitle}},[s(a.NcIconSvgWrapper,{attrs:{path:a.badgeIcon,size:20,inline:""}}),e._v(" "+e._s(a.badgeText)+" ")],1):e._e()},T=[],$=u(w,x,T,!1,null,"b4af3c56");const L=$.exports,W={computed:{appGroups(){return this.app.groups.map(e=>({id:e,name:e}))},installing(){return this.$store.getters.loading("install")},isLoading(){return this.app&&this.$store.getters.loading(this.app.id)},enableButtonText(){return this.app.needsDownload?t("settings","Download and enable"):t("settings","Enable")},forceEnableButtonText(){return this.app.needsDownload,t("settings","Allow untested app")},enableButtonTooltip(){return this.app.needsDownload?t("settings","The app will be downloaded from the App Store"):null},forceEnableButtonTooltip(){const e=t("settings","This app is not marked as compatible with your Nextcloud version. If you continue you will still be able to install the app. Note that the app might not work as expected.");return this.app.needsDownload?e+" "+t("settings","The app will be downloaded from the App Store"):e}},data(){return{groupCheckedAppsData:!1}},mounted(){this.app&&this.app.groups&&this.app.groups.length>0&&(this.groupCheckedAppsData=!0)},methods:{asyncFindGroup(e){return this.$store.dispatch("getGroups",{search:e,limit:5,offset:0})},isLimitedToGroups(e){return!!(this.app.groups.length||this.groupCheckedAppsData)},setGroupLimit(){this.groupCheckedAppsData||this.$store.dispatch("enableApp",{appId:this.app.id,groups:[]})},canLimitToGroups(e){return!(e.types&&e.types.includes("filesystem")||e.types.includes("prelogin")||e.types.includes("authentication")||e.types.includes("logging")||e.types.includes("prevent_group_restriction"))},addGroupLimitation(e){const s=e.pop(),a=this.app.groups.concat([]).concat([s.id]);this.$store.dispatch("enableApp",{appId:this.app.id,groups:a})},removeGroupLimitation(e){const s=this.app.groups.concat([]),a=s.indexOf(e.id);a>-1&&s.splice(a,1),this.$store.dispatch("enableApp",{appId:this.app.id,groups:s})},forceEnable(e){this.$store.dispatch("forceEnableApp",{appId:e,groups:[]}).then(s=>{r()}).catch(s=>{p(s)})},enable(e){this.$store.dispatch("enableApp",{appId:e,groups:[]}).then(s=>{r()}).catch(s=>{p(s)})},disable(e){this.$store.dispatch("disableApp",{appId:e}).then(s=>{r()}).catch(s=>{p(s)})},remove(e){this.$store.dispatch("uninstallApp",{appId:e}).then(s=>{r()}).catch(s=>{p(s)})},install(e){this.$store.dispatch("enableApp",{appId:e}).then(s=>{r()}).catch(s=>{p(s)})},update(e){this.$store.dispatch("updateApp",{appId:e}).then(s=>{r()}).catch(s=>{p(s)})}}};export{L as A,G as a,W as b};
