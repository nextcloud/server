{"version":3,"file":"comments-comments.js?v=84cdfb395e4e6cb9ac81","mappings":"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","sources":["webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/apps/comments/src/activitytabviewplugin.js","webpack:///nextcloud/apps/comments/src/app.js","webpack:///nextcloud/apps/comments/src/comments.js","webpack:///nextcloud/apps/comments/src/filesplugin.js","webpack:///nextcloud/apps/comments/src/templates.js","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/amd define","webpack:///nextcloud/webpack/runtime/amd options","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/runtimeId","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\n * Copyright (c) 2016\n *\n * @author Joas Schilling <coding@schilljs.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n(function() {\n\tOCA.Comments.ActivityTabViewPlugin = {\n\n\t\t/**\n\t\t * Prepare activity for display\n\t\t *\n\t\t * @param {OCA.Activity.ActivityModel} model for this activity\n\t\t * @param {jQuery} $el jQuery handle for this activity\n\t\t * @param {string} view The view that displayes this activity\n\t\t */\n\t\tprepareModelForDisplay(model, $el, view) {\n\t\t\tif (model.get('app') !== 'comments' || model.get('type') !== 'comments') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (view === 'ActivityTabView') {\n\t\t\t\t$el.addClass('comment')\n\t\t\t\tif (model.get('message') && this._isLong(model.get('message'))) {\n\t\t\t\t\t$el.addClass('collapsed')\n\t\t\t\t\tconst $overlay = $('<div>').addClass('message-overlay')\n\t\t\t\t\t$el.find('.activitymessage').after($overlay)\n\t\t\t\t\t$el.on('click', this._onClickCollapsedComment)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._onClickComment()\n\t\t */\n\t\t_onClickCollapsedComment(ev) {\n\t\t\tlet $row = $(ev.target)\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment')\n\t\t\t}\n\t\t\t$row.removeClass('collapsed')\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._isLong()\n\t\t */\n\t\t_isLong(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1\n\t\t},\n\t}\n\n})()\n\nOC.Plugins.register('OCA.Activity.RenderingPlugins', OCA.Comments.ActivityTabViewPlugin)\n","/**\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Vincent Petry <vincent@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n(function() {\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {}\n\t}\n\n})()\n","/**\n * @copyright Copyright (c) 2016 Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport './app'\nimport './templates'\nimport './filesplugin'\nimport './activitytabviewplugin'\n\nwindow.OCA.Comments = OCA.Comments\n","/**\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * @author Joas Schilling <coding@schilljs.com>\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n * @author Michael Jobst <mjobst+github@tecratech.de>\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n * @author Vincent Petry <vincent@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n(function() {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_COMMENTS_UNREAD: '{' + OC.Files.Client.NS_OWNCLOUD + '}comments-unread',\n\t})\n\n\tOCA.Comments = _.extend({}, OCA.Comments)\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {}\n\t}\n\n\t/**\n\t * @namespace\n\t */\n\tOCA.Comments.FilesPlugin = {\n\t\tignoreLists: [\n\t\t\t'trashbin',\n\t\t\t'files.public',\n\t\t],\n\n\t\t_formatCommentCount(count) {\n\t\t\treturn OCA.Comments.Templates.filesplugin({\n\t\t\t\tcount,\n\t\t\t\tcountMessage: n('comments', '%n unread comment', '%n unread comments', count),\n\t\t\t\ticonUrl: OC.imagePath('core', 'actions/comment'),\n\t\t\t})\n\t\t},\n\n\t\tattach(fileList) {\n\t\t\tconst self = this\n\t\t\tif (this.ignoreLists.indexOf(fileList.id) >= 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst oldGetWebdavProperties = fileList._getWebdavProperties\n\t\t\tfileList._getWebdavProperties = function() {\n\t\t\t\tconst props = oldGetWebdavProperties.apply(this, arguments)\n\t\t\t\tprops.push(OC.Files.Client.PROPERTY_COMMENTS_UNREAD)\n\t\t\t\treturn props\n\t\t\t}\n\n\t\t\tfileList.filesClient.addFileInfoParser(function(response) {\n\t\t\t\tconst data = {}\n\t\t\t\tconst props = response.propStat[0].properties\n\t\t\t\tconst commentsUnread = props[OC.Files.Client.PROPERTY_COMMENTS_UNREAD]\n\t\t\t\tif (!_.isUndefined(commentsUnread) && commentsUnread !== '') {\n\t\t\t\t\tdata.commentsUnread = parseInt(commentsUnread, 10)\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t})\n\n\t\t\tfileList.$el.addClass('has-comments')\n\t\t\tconst oldCreateRow = fileList._createRow\n\t\t\tfileList._createRow = function(fileData) {\n\t\t\t\tconst $tr = oldCreateRow.apply(this, arguments)\n\t\t\t\tif (fileData.commentsUnread) {\n\t\t\t\t\t$tr.attr('data-comments-unread', fileData.commentsUnread)\n\t\t\t\t}\n\t\t\t\treturn $tr\n\t\t\t}\n\n\t\t\t// register \"comment\" action for reading comments\n\t\t\tfileList.fileActions.registerAction({\n\t\t\t\tname: 'Comment',\n\t\t\t\tdisplayName(context) {\n\t\t\t\t\tif (context && context.$file) {\n\t\t\t\t\t\tconst unread = parseInt(context.$file.data('comments-unread'), 10)\n\t\t\t\t\t\tif (unread >= 0) {\n\t\t\t\t\t\t\treturn n('comments', '1 new comment', '{unread} new comments', unread, { unread })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn t('comments', 'Comment')\n\t\t\t\t},\n\t\t\t\tmime: 'all',\n\t\t\t\torder: -140,\n\t\t\t\ticonClass: 'icon-comment',\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ttype: OCA.Files.FileActions.TYPE_INLINE,\n\t\t\t\trender(actionSpec, isDefault, context) {\n\t\t\t\t\tconst $file = context.$file\n\t\t\t\t\tconst unreadComments = $file.data('comments-unread')\n\t\t\t\t\tif (unreadComments) {\n\t\t\t\t\t\tconst $actionLink = $(self._formatCommentCount(unreadComments))\n\t\t\t\t\t\tcontext.$file.find('a.name>span.fileactions').append($actionLink)\n\t\t\t\t\t\treturn $actionLink\n\t\t\t\t\t}\n\t\t\t\t\treturn ''\n\t\t\t\t},\n\t\t\t\tactionHandler(fileName, context) {\n\t\t\t\t\tcontext.$file.find('.action-comment').tooltip('hide')\n\t\t\t\t\t// open sidebar in comments section\n\t\t\t\t\tOCA.Files.Sidebar.setActiveTab('comments')\n\t\t\t\t\tOCA.Files.Sidebar.open(context.dir + '/' + fileName)\n\t\t\t\t},\n\t\t\t})\n\n\t\t\t// add attribute to \"elementToFile\"\n\t\t\tconst oldElementToFile = fileList.elementToFile\n\t\t\tfileList.elementToFile = function($el) {\n\t\t\t\tconst fileInfo = oldElementToFile.apply(this, arguments)\n\t\t\t\tconst commentsUnread = $el.data('comments-unread')\n\t\t\t\tif (commentsUnread) {\n\t\t\t\t\tfileInfo.commentsUnread = commentsUnread\n\t\t\t\t}\n\t\t\t\treturn fileInfo\n\t\t\t}\n\t\t},\n\t}\n\n})()\n\nOC.Plugins.register('OCA.Files.FileList', OCA.Comments.FilesPlugin)\n","(function() {\n  var template = Handlebars.template, templates = OCA.Comments.Templates = OCA.Comments.Templates || {};\ntemplates['filesplugin'] = template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<a class=\\\"action action-comment permanent\\\" title=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"countMessage\") || (depth0 != null ? lookupProperty(depth0,\"countMessage\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"countMessage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":50},\"end\":{\"line\":1,\"column\":66}}}) : helper)))\n    + \"\\\" href=\\\"#\\\">\\n\t<img class=\\\"svg\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"iconUrl\") || (depth0 != null ? lookupProperty(depth0,\"iconUrl\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconUrl\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":23},\"end\":{\"line\":2,\"column\":34}}}) : helper)))\n    + \"\\\"/>\\n</a>\\n\";\n},\"useData\":true});\n})();","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 258;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t258: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [874], () => (__webpack_require__(52098)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","OCA","Comments","ActivityTabViewPlugin","prepareModelForDisplay","model","$el","view","get","addClass","this","_isLong","$overlay","$","find","after","on","_onClickCollapsedComment","ev","$row","target","is","closest","removeClass","message","length","match","OC","Plugins","register","window","_","extend","Files","Client","PROPERTY_COMMENTS_UNREAD","NS_OWNCLOUD","FilesPlugin","ignoreLists","_formatCommentCount","count","Templates","filesplugin","countMessage","n","iconUrl","imagePath","attach","fileList","self","indexOf","id","oldGetWebdavProperties","_getWebdavProperties","props","apply","arguments","push","filesClient","addFileInfoParser","response","data","commentsUnread","propStat","properties","isUndefined","parseInt","oldCreateRow","_createRow","fileData","$tr","attr","fileActions","registerAction","name","displayName","context","$file","unread","t","mime","order","iconClass","permissions","PERMISSION_READ","type","FileActions","TYPE_INLINE","render","actionSpec","isDefault","unreadComments","$actionLink","append","actionHandler","fileName","tooltip","Sidebar","setActiveTab","open","dir","oldElementToFile","elementToFile","fileInfo","template","Handlebars","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","m","amdD","Error","amdO","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","Symbol","toStringTag","value","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","forEach","bind","__webpack_exports__"],"sourceRoot":""}