{"version":3,"file":"federatedfilesharing-settings-personal.mjs","sources":["../node_modules/vue-material-design-icons/Check.vue","../build/frontend/apps/federatedfilesharing/src/components/PersonalSettings.vue","../build/frontend/apps/federatedfilesharing/src/settings-personal.ts"],"sourcesContent":["<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon check-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CheckIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<script setup lang=\"ts\">\nimport { showSuccess } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { t } from '@nextcloud/l10n'\nimport { imagePath } from '@nextcloud/router'\nimport { computed, ref } from 'vue'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcInputField from '@nextcloud/vue/components/NcInputField'\nimport NcSettingsSection from '@nextcloud/vue/components/NcSettingsSection'\nimport IconCheck from 'vue-material-design-icons/Check.vue'\nimport IconClipboard from 'vue-material-design-icons/ContentCopy.vue'\nimport IconWeb from 'vue-material-design-icons/Web.vue'\n\nconst productName = window.OC.theme.productName\nconst color = loadState<string>('federatedfilesharing', 'color')\nconst textColor = loadState<string>('federatedfilesharing', 'textColor')\nconst cloudId = loadState<string>('federatedfilesharing', 'cloudId')\nconst docUrlFederated = loadState<string>('federatedfilesharing', 'docUrlFederated')\nconst logoPath = loadState<string>('federatedfilesharing', 'logoPath')\nconst reference = loadState<string>('federatedfilesharing', 'reference')\nconst urlFacebookIcon = imagePath('core', 'facebook')\nconst urlMastodonIcon = imagePath('core', 'mastodon')\nconst urlBlueSkyIcon = imagePath('core', 'bluesky')\nconst messageWithURL = t('federatedfilesharing', 'Share with me through my #Nextcloud Federated Cloud ID, see {url}', { url: reference })\nconst messageWithoutURL = t('federatedfilesharing', 'Share with me through my #Nextcloud Federated Cloud ID')\nconst shareMastodonUrl = `https://mastodon.social/?text=${encodeURIComponent(messageWithoutURL)}&url=${encodeURIComponent(reference)}`\nconst shareFacebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(reference)}`\nconst shareBlueSkyUrl = `https://bsky.app/intent/compose?text=${encodeURIComponent(messageWithURL)}`\nconst logoPathAbsolute = new URL(logoPath, location.origin)\n\nconst showHtml = ref(false)\nconst isCopied = ref(false)\n\nconst backgroundStyle = computed(() => `\n\tpadding:10px;\n\tbackground-color:${color};\n\tcolor:${textColor};\n\tborder-radius:3px;\n\tpadding-inline-start:4px;`)\n\nconst linkStyle = `background-image:url(${logoPathAbsolute});width:50px;height:30px;position:relative;top:8px;background-size:contain;display:inline-block;background-repeat:no-repeat; background-position: center center;`\nconst htmlCode = computed(() => `<a target=\"_blank\" rel=\"noreferrer noopener\" href=\"${reference}\" style=\"${backgroundStyle.value}\">\n\t<span style=\"${linkStyle}\"></span>\n\t${t('federatedfilesharing', 'Share with me via Nextcloud')}\n</a>`)\n\nconst copyLinkTooltip = computed(() => isCopied.value\n\t? t('federatedfilesharing', 'Cloud ID copied')\n\t: t('federatedfilesharing', 'Copy'))\n\n/**\n *\n */\nasync function copyCloudId(): Promise<void> {\n\ttry {\n\t\tawait navigator.clipboard.writeText(cloudId)\n\t\tshowSuccess(t('federatedfilesharing', 'Cloud ID copied'))\n\t} catch {\n\t\t// no secure context or really old browser - need a fallback\n\t\twindow.prompt(t('federatedfilesharing', 'Clipboard not available. Please copy the cloud ID manually.'), cloudId)\n\t}\n\tisCopied.value = true\n\tshowSuccess(t('federatedfilesharing', 'Copied!'))\n\tsetTimeout(() => {\n\t\tisCopied.value = false\n\t}, 2000)\n}\n</script>\n\n<template>\n\t<NcSettingsSection\n\t\t:name=\"t('federatedfilesharing', 'Federated Cloud')\"\n\t\t:description=\"t('federatedfilesharing', 'You can share with anyone who uses a {productName} server or other Open Cloud Mesh (OCM) compatible servers and services! Just put their Federated Cloud ID in the share dialog. It looks like person@cloud.example.com', { productName })\"\n\t\t:docUrl=\"docUrlFederated\">\n\t\t<NcInputField\n\t\t\tclass=\"federated-cloud__cloud-id\"\n\t\t\treadonly\n\t\t\t:label=\"t('federatedfilesharing', 'Your Federated Cloud ID')\"\n\t\t\t:modelValue=\"cloudId\"\n\t\t\t:success=\"isCopied\"\n\t\t\tshowTrailingButton\n\t\t\t:trailingButtonLabel=\"copyLinkTooltip\"\n\t\t\t@trailingButtonClick=\"copyCloudId\">\n\t\t\t<template #trailing-button-icon>\n\t\t\t\t<IconCheck v-if=\"isCopied\" :size=\"20\" fillColor=\"var(--color-border-success)\" />\n\t\t\t\t<IconClipboard v-else :size=\"20\" />\n\t\t\t</template>\n\t\t</NcInputField>\n\n\t\t<p class=\"social-button\">\n\t\t\t{{ t('federatedfilesharing', 'Share it so your friends can share files with you:') }}<br>\n\t\t\t<NcButton :href=\"shareBlueSkyUrl\">\n\t\t\t\t{{ t('federatedfilesharing', 'Bluesky') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<img class=\"social-button__icon\" :src=\"urlBlueSkyIcon\">\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton :href=\"shareFacebookUrl\">\n\t\t\t\t{{ t('federatedfilesharing', 'Facebook') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<img class=\"social-button__icon social-button__icon--bright\" :src=\"urlFacebookIcon\">\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton :href=\"shareMastodonUrl\">\n\t\t\t\t{{ t('federatedfilesharing', 'Mastodon') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<img class=\"social-button__icon\" :src=\"urlMastodonIcon\">\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<NcButton\n\t\t\t\tclass=\"social-button__website-button\"\n\t\t\t\t@click=\"showHtml = !showHtml\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconWeb :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('federatedfilesharing', 'Add to your website') }}\n\t\t\t</NcButton>\n\t\t</p>\n\n\t\t<template v-if=\"showHtml\">\n\t\t\t<p style=\"margin: 10px 0\">\n\t\t\t\t<a\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t:href=\"reference\"\n\t\t\t\t\t:style=\"backgroundStyle\">\n\t\t\t\t\t<span :style=\"linkStyle\" />\n\t\t\t\t\t{{ t('federatedfilesharing', 'Share with me via {productName}', { productName }) }}\n\t\t\t\t</a>\n\t\t\t</p>\n\n\t\t\t<div>\n\t\t\t\t<p>{{ t('federatedfilesharing', 'HTML Code:') }}</p>\n\t\t\t\t<br>\n\t\t\t\t<pre><code>{{ htmlCode }}</code></pre>\n\t\t\t</div>\n\t\t</template>\n\t</NcSettingsSection>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.social-button {\n\t\tmargin-top: 0.5rem;\n\n\t\tbutton, a {\n\t\t\tdisplay: inline-flex;\n\t\t\tmargin-inline-start: 0.5rem;\n\t\t\tmargin-top: 1rem;\n\t\t}\n\n\t\t&__website-button {\n\t\t\twidth: min(100%, 400px) !important;\n\t\t}\n\n\t\t&__icon {\n\t\t\theight: 20px;\n\t\t\twidth: 20px;\n\t\t\tfilter: var(--background-invert-if-dark);\n\n\t\t\t&--bright {\n\t\t\t\t// Some logos like the Facebook logo have bright color schema\n\t\t\t\tfilter: var(--background-invert-if-bright);\n\t\t\t}\n\t\t}\n\t}\n\n\t.federated-cloud__cloud-id {\n\t\tmax-width: 300px;\n\t}\n\n\tpre {\n\t\tmargin-top: 0;\n\t\twhite-space: pre-wrap;\n\t}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { createApp } from 'vue'\nimport PersonalSettings from './components/PersonalSettings.vue'\n\nimport 'vite/modulepreload-polyfill'\n\nconst app = createApp(PersonalSettings)\napp.mount('#vue-personal-federated')\n"],"names":["_sfc_main","_hoisted_3","_createElementBlock","_mergeProps","_ctx","$props","_cache","$event","_createElementVNode","_openBlock","productName","color","loadState","textColor","cloudId","docUrlFederated","logoPath","reference","urlFacebookIcon","imagePath","urlMastodonIcon","urlBlueSkyIcon","messageWithURL","t","messageWithoutURL","shareMastodonUrl","shareFacebookUrl","shareBlueSkyUrl","logoPathAbsolute","showHtml","ref","isCopied","backgroundStyle","computed","linkStyle","htmlCode","copyLinkTooltip","copyCloudId","showSuccess","_createBlock","_unref","NcSettingsSection","_createVNode","NcInputField","IconCheck","IconClipboard","_hoisted_1","NcButton","_createTextVNode","_toDisplayString","IconWeb","_Fragment","_hoisted_5","app","createApp","PersonalSettings"],"mappings":"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","x_google_ignoreList":[0]}