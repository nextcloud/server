{"version":3,"file":"systemtags-admin.js?v=81e337bbfaaac13056f3","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAkBA;AACA;;;;;;;;;;;;;;;;ACvCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAkBA;AACA;;;;;;;;;;;;;;;;ACtCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAkBA;AACA;;;;;;;;;;;;;;;;ACtCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxBA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACRA;AACA;AACA;AACA;AACA;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvFA;;;;;AEAA;AACA;AACA;AACA;AACA","sources":["webpack:///nextcloud/apps/systemtags/src/admin.ts","webpack:///nextcloud/apps/systemtags/src/components/SystemTagForm.vue","webpack://nextcloud/./apps/systemtags/src/components/SystemTagForm.vue?b4a6","webpack://nextcloud/./apps/systemtags/src/components/SystemTagForm.vue?a095","webpack://nextcloud/./apps/systemtags/src/components/SystemTagForm.vue?e875","webpack:///nextcloud/apps/systemtags/src/components/SystemTagsCreationControl.vue","webpack://nextcloud/./apps/systemtags/src/components/SystemTagsCreationControl.vue?d3bf","webpack://nextcloud/./apps/systemtags/src/components/SystemTagsCreationControl.vue?433b","webpack:///nextcloud/apps/systemtags/src/logger.ts","webpack:///nextcloud/apps/systemtags/src/services/api.ts","webpack:///nextcloud/apps/systemtags/src/services/davClient.ts","webpack:///nextcloud/apps/systemtags/src/utils.ts","webpack:///nextcloud/apps/systemtags/src/views/SystemTagsSection.vue","webpack://nextcloud/./apps/systemtags/src/views/SystemTagsSection.vue?19c8","webpack://nextcloud/./apps/systemtags/src/views/SystemTagsSection.vue?0ec2","webpack:///nextcloud/apps/systemtags/src/components/SystemTagForm.vue?vue&type=script&lang=ts","webpack:///nextcloud/apps/systemtags/src/components/SystemTagsCreationControl.vue?vue&type=script&lang=ts","webpack:///nextcloud/apps/systemtags/src/views/SystemTagsSection.vue?vue&type=script&lang=ts","webpack:///nextcloud/apps/systemtags/src/components/SystemTagForm.vue?vue&type=template&id=5e6ae519&scoped=true","webpack:///nextcloud/apps/systemtags/src/components/SystemTagsCreationControl.vue?vue&type=template&id=ab380480","webpack:///nextcloud/apps/systemtags/src/views/SystemTagsSection.vue?vue&type=template&id=32a39e09","webpack:///nextcloud/apps/systemtags/src/components/SystemTagForm.vue?vue&type=style&index=0&id=5e6ae519&lang=scss&scoped=true","webpack://nextcloud/./apps/systemtags/src/components/SystemTagForm.vue?7676","webpack:///nextcloud/ignored|/home/louis/workspace/nextcloud/instances/master/node_modules/stream-http/node_modules/readable-stream/lib/internal/streams|util","webpack:///nextcloud/ignored|/home/louis/workspace/nextcloud/instances/master/node_modules/stream-browserify/node_modules/readable-stream/lib|util","webpack:///nextcloud/ignored|/home/louis/workspace/nextcloud/instances/master/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams|util","webpack:///nextcloud/ignored|/home/louis/workspace/nextcloud/instances/master/node_modules/object-inspect|./util.inspect","webpack:///nextcloud/ignored|/home/louis/workspace/nextcloud/instances/master/node_modules/stream-http/node_modules/readable-stream/lib|util","webpack:///nextcloud/webpack/bootstrap","webpack:///nextcloud/webpack/runtime/chunk loaded","webpack:///nextcloud/webpack/runtime/compat get default export","webpack:///nextcloud/webpack/runtime/define property getters","webpack:///nextcloud/webpack/runtime/ensure chunk","webpack:///nextcloud/webpack/runtime/get javascript chunk filename","webpack:///nextcloud/webpack/runtime/global","webpack:///nextcloud/webpack/runtime/hasOwnProperty shorthand","webpack:///nextcloud/webpack/runtime/load script","webpack:///nextcloud/webpack/runtime/make namespace object","webpack:///nextcloud/webpack/runtime/node module decorator","webpack:///nextcloud/webpack/runtime/publicPath","webpack:///nextcloud/webpack/runtime/jsonp chunk loading","webpack:///nextcloud/webpack/runtime/nonce","webpack:///nextcloud/webpack/before-startup","webpack:///nextcloud/webpack/startup","webpack:///nextcloud/webpack/after-startup"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getCSPNonce } from '@nextcloud/auth';\nimport Vue from 'vue';\nimport SystemTagsSection from \"./views/SystemTagsSection.vue\";\n__webpack_nonce__ = getCSPNonce();\nconst SystemTagsSectionView = Vue.extend(SystemTagsSection);\nnew SystemTagsSectionView().$mount('#vue-admin-systemtags');","import { render, staticRenderFns } from \"./SystemTagForm.vue?vue&type=template&id=5e6ae519&scoped=true\"\nimport script from \"./SystemTagForm.vue?vue&type=script&lang=ts\"\nexport * from \"./SystemTagForm.vue?vue&type=script&lang=ts\"\nimport style0 from \"./SystemTagForm.vue?vue&type=style&index=0&id=5e6ae519&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e6ae519\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/louis/workspace/nextcloud/instances/master/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5e6ae519')) {\n      api.createRecord('5e6ae519', component.options)\n    } else {\n      api.reload('5e6ae519', component.options)\n    }\n    module.hot.accept(\"./SystemTagForm.vue?vue&type=template&id=5e6ae519&scoped=true\", function () {\n      api.rerender('5e6ae519', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/systemtags/src/components/SystemTagForm.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=script&lang=ts\"","export * from \"-!../../../../node_modules/style-loader/dist/cjs.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=style&index=0&id=5e6ae519&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=template&id=5e6ae519&scoped=true\"","import { render, staticRenderFns } from \"./SystemTagsCreationControl.vue?vue&type=template&id=ab380480\"\nimport script from \"./SystemTagsCreationControl.vue?vue&type=script&lang=ts\"\nexport * from \"./SystemTagsCreationControl.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/louis/workspace/nextcloud/instances/master/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('ab380480')) {\n      api.createRecord('ab380480', component.options)\n    } else {\n      api.reload('ab380480', component.options)\n    }\n    module.hot.accept(\"./SystemTagsCreationControl.vue?vue&type=template&id=ab380480\", function () {\n      api.rerender('ab380480', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/systemtags/src/components/SystemTagsCreationControl.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsCreationControl.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsCreationControl.vue?vue&type=script&lang=ts\"","export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsCreationControl.vue?vue&type=template&id=ab380480\"","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getLoggerBuilder } from '@nextcloud/logger';\nexport default getLoggerBuilder().setApp('systemtags').detectUser().build();","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport axios from '@nextcloud/axios';\nimport { generateUrl, generateOcsUrl } from '@nextcloud/router';\nimport { t } from '@nextcloud/l10n';\nimport { davClient } from \"./davClient.js\";\nimport { formatTag, parseIdFromLocation, parseTags } from \"../utils\";\nimport logger from \"../logger.ts\";\nimport { emit } from '@nextcloud/event-bus';\nimport { confirmPassword } from '@nextcloud/password-confirmation';\nexport const fetchTagsPayload = `<?xml version=\"1.0\"?>\n<d:propfind xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t<d:prop>\n\t\t<oc:id />\n\t\t<oc:display-name />\n\t\t<oc:user-visible />\n\t\t<oc:user-assignable />\n\t\t<oc:can-assign />\n\t\t<d:getetag />\n\t\t<nc:color />\n\t</d:prop>\n</d:propfind>`;\nexport const fetchTags = async () => {\n  const path = '/systemtags';\n  try {\n    const {\n      data: tags\n    } = await davClient.getDirectoryContents(path, {\n      data: fetchTagsPayload,\n      details: true,\n      glob: '/systemtags/*' // Filter out first empty tag\n    });\n    return parseTags(tags);\n  } catch (error) {\n    logger.error(t('systemtags', 'Failed to load tags'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to load tags'));\n  }\n};\nexport const fetchTag = async tagId => {\n  const path = '/systemtags/' + tagId;\n  try {\n    const {\n      data: tag\n    } = await davClient.stat(path, {\n      data: fetchTagsPayload,\n      details: true\n    });\n    return parseTags([tag])[0];\n  } catch (error) {\n    logger.error(t('systemtags', 'Failed to load tag'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to load tag'));\n  }\n};\nexport const fetchLastUsedTagIds = async () => {\n  const url = generateUrl('/apps/systemtags/lastused');\n  try {\n    const {\n      data: lastUsedTagIds\n    } = await axios.get(url);\n    return lastUsedTagIds.map(Number);\n  } catch (error) {\n    logger.error(t('systemtags', 'Failed to load last used tags'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to load last used tags'));\n  }\n};\n/**\n * Create a tag and return the Id of the newly created tag.\n *\n * @param tag The tag to create\n */\nexport const createTag = async tag => {\n  const path = '/systemtags';\n  const tagToPost = formatTag(tag);\n  try {\n    const {\n      headers\n    } = await davClient.customRequest(path, {\n      method: 'POST',\n      data: tagToPost\n    });\n    const contentLocation = headers.get('content-location');\n    if (contentLocation) {\n      emit('systemtags:tag:created', tag);\n      return parseIdFromLocation(contentLocation);\n    }\n    logger.error(t('systemtags', 'Missing \"Content-Location\" header'));\n    throw new Error(t('systemtags', 'Missing \"Content-Location\" header'));\n  } catch (error) {\n    if (error?.response?.status === 409) {\n      logger.error(t('systemtags', 'A tag with the same name already exists'), {\n        error\n      });\n      throw new Error(t('systemtags', 'A tag with the same name already exists'));\n    }\n    logger.error(t('systemtags', 'Failed to create tag'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to create tag'));\n  }\n};\nexport const updateTag = async tag => {\n  const path = '/systemtags/' + tag.id;\n  const data = `<?xml version=\"1.0\"?>\n\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<oc:display-name>${tag.displayName}</oc:display-name>\n\t\t\t\t<oc:user-visible>${tag.userVisible}</oc:user-visible>\n\t\t\t\t<oc:user-assignable>${tag.userAssignable}</oc:user-assignable>\n\t\t\t\t<nc:color>${tag?.color || null}</nc:color>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;\n  try {\n    await davClient.customRequest(path, {\n      method: 'PROPPATCH',\n      data\n    });\n    emit('systemtags:tag:updated', tag);\n  } catch (error) {\n    logger.error(t('systemtags', 'Failed to update tag'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to update tag'));\n  }\n};\nexport const deleteTag = async tag => {\n  const path = '/systemtags/' + tag.id;\n  try {\n    await davClient.deleteFile(path);\n    emit('systemtags:tag:deleted', tag);\n  } catch (error) {\n    logger.error(t('systemtags', 'Failed to delete tag'), {\n      error\n    });\n    throw new Error(t('systemtags', 'Failed to delete tag'));\n  }\n};\nexport const getTagObjects = async function (tag, type) {\n  const path = `/systemtags/${tag.id}/${type}`;\n  const data = `<?xml version=\"1.0\"?>\n\t<d:propfind xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:prop>\n\t\t\t<nc:object-ids />\n\t\t\t<d:getetag />\n\t\t</d:prop>\n\t</d:propfind>`;\n  const response = await davClient.stat(path, {\n    data,\n    details: true\n  });\n  const etag = response?.data?.props?.getetag || '\"\"';\n  const objects = Object.values(response?.data?.props?.['object-ids'] || []).flat();\n  return {\n    etag,\n    objects\n  };\n};\n/**\n * Set the objects for a tag.\n * Warning: This will overwrite the existing objects.\n * @param tag The tag to set the objects for\n * @param type The type of the objects\n * @param objectIds The objects to set\n * @param etag Strongly recommended to avoid conflict and data loss.\n */\nexport const setTagObjects = async function (tag, type, objectIds) {\n  let etag = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  const path = `/systemtags/${tag.id}/${type}`;\n  let data = `<?xml version=\"1.0\"?>\n\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t<d:set>\n\t\t\t<d:prop>\n\t\t\t\t<nc:object-ids>${objectIds.map(_ref => {\n    let {\n      id,\n      type\n    } = _ref;\n    return `<nc:object-id><nc:id>${id}</nc:id><nc:type>${type}</nc:type></nc:object-id>`;\n  }).join('')}</nc:object-ids>\n\t\t\t</d:prop>\n\t\t</d:set>\n\t</d:propertyupdate>`;\n  if (objectIds.length === 0) {\n    data = `<?xml version=\"1.0\"?>\n\t\t<d:propertyupdate xmlns:d=\"DAV:\" xmlns:nc=\"http://nextcloud.org/ns\">\n\t\t\t<d:remove>\n\t\t\t\t<d:prop>\n\t\t\t\t\t<nc:object-ids />\n\t\t\t\t</d:prop>\n\t\t\t</d:remove>\n\t\t</d:propertyupdate>`;\n  }\n  await davClient.customRequest(path, {\n    method: 'PROPPATCH',\n    data,\n    headers: {\n      'if-match': etag\n    }\n  });\n};\nexport const updateSystemTagsAdminRestriction = async isAllowed => {\n  // Convert to string for compatibility\n  const isAllowedString = isAllowed ? '1' : '0';\n  const url = generateOcsUrl('/apps/provisioning_api/api/v1/config/apps/{appId}/{key}', {\n    appId: 'systemtags',\n    key: 'restrict_creation_to_admin'\n  });\n  await confirmPassword();\n  const res = await axios.post(url, {\n    value: isAllowedString\n  });\n  return res.data;\n};","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { createClient } from \"webdav/dist/node/index.js\";\nimport { generateRemoteUrl } from '@nextcloud/router';\nimport { getRequestToken, onRequestTokenUpdate } from '@nextcloud/auth';\n// init webdav client\nconst rootUrl = generateRemoteUrl('dav');\nexport const davClient = createClient(rootUrl);\n// set CSRF token header\nconst setHeaders = token => {\n  davClient.setHeaders({\n    // Add this so the server knows it is an request from the browser\n    'X-Requested-With': 'XMLHttpRequest',\n    // Inject user auth\n    requesttoken: token ?? ''\n  });\n};\n// refresh headers when request token changes\nonRequestTokenUpdate(setHeaders);\nsetHeaders(getRequestToken());","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport camelCase from 'camelcase';\nimport Vue from 'vue';\nexport const defaultBaseTag = {\n  userVisible: true,\n  userAssignable: true,\n  canAssign: true\n};\nexport const parseTags = tags => {\n  return tags.map(_ref => {\n    let {\n      props\n    } = _ref;\n    return Object.fromEntries(Object.entries(props).map(_ref2 => {\n      let [key, value] = _ref2;\n      return [camelCase(key), camelCase(key) === 'displayName' ? String(value) : value];\n    }));\n  });\n};\n/**\n * Parse id from `Content-Location` header\n * @param url URL to parse\n */\nexport const parseIdFromLocation = url => {\n  const queryPos = url.indexOf('?');\n  if (queryPos > 0) {\n    url = url.substring(0, queryPos);\n  }\n  const parts = url.split('/');\n  let result;\n  do {\n    result = parts[parts.length - 1];\n    parts.pop();\n    // note: first result can be empty when there is a trailing slash,\n    // so we take the part before that\n  } while (!result && parts.length > 0);\n  return Number(result);\n};\nexport const formatTag = initialTag => {\n  if ('name' in initialTag && !('displayName' in initialTag)) {\n    return {\n      ...initialTag\n    };\n  }\n  const tag = {\n    ...initialTag\n  };\n  tag.name = tag.displayName;\n  delete tag.displayName;\n  return tag;\n};\nexport const getNodeSystemTags = function (node) {\n  const attribute = node.attributes?.['system-tags']?.['system-tag'];\n  if (attribute === undefined) {\n    return [];\n  }\n  // if there is only one tag it is a single string or prop object\n  // if there are multiple then its an array - so we flatten it to be always an array of string or prop objects\n  return [attribute].flat().map(tag => typeof tag === 'string'\n  // its a plain text prop (the tag name) without prop attributes\n  ? tag\n  // its a prop object with attributes, the tag name is in the 'text' attribute\n  : tag.text);\n};\nexport const setNodeSystemTags = function (node, tags) {\n  Vue.set(node.attributes, 'system-tags', {\n    'system-tag': tags\n  });\n};","import { render, staticRenderFns } from \"./SystemTagsSection.vue?vue&type=template&id=32a39e09\"\nimport script from \"./SystemTagsSection.vue?vue&type=script&lang=ts\"\nexport * from \"./SystemTagsSection.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/louis/workspace/nextcloud/instances/master/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('32a39e09')) {\n      api.createRecord('32a39e09', component.options)\n    } else {\n      api.reload('32a39e09', component.options)\n    }\n    module.hot.accept(\"./SystemTagsSection.vue?vue&type=template&id=32a39e09\", function () {\n      api.rerender('32a39e09', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"apps/systemtags/src/views/SystemTagsSection.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsSection.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??clonedRuleSet-4.use[1]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsSection.vue?vue&type=script&lang=ts\"","export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagsSection.vue?vue&type=template&id=32a39e09\"","/* eslint-disable */\nimport Vue from 'vue';\nimport NcButton from '@nextcloud/vue/components/NcButton';\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon';\nimport NcSelect from '@nextcloud/vue/components/NcSelect';\nimport NcSelectTags from '@nextcloud/vue/components/NcSelectTags';\nimport NcTextField from '@nextcloud/vue/components/NcTextField';\nimport { translate as t } from '@nextcloud/l10n';\nimport { showSuccess } from '@nextcloud/dialogs';\nimport { defaultBaseTag } from \"../utils.js\";\nimport { createTag, deleteTag, updateTag } from \"../services/api.js\";\nvar TagLevel;\n(function (TagLevel) {\n  TagLevel[\"Public\"] = \"Public\";\n  TagLevel[\"Restricted\"] = \"Restricted\";\n  TagLevel[\"Invisible\"] = \"Invisible\";\n})(TagLevel || (TagLevel = {}));\nconst tagLevelOptions = [{\n  id: TagLevel.Public,\n  label: t('systemtags', 'Public')\n}, {\n  id: TagLevel.Restricted,\n  label: t('systemtags', 'Restricted')\n}, {\n  id: TagLevel.Invisible,\n  label: t('systemtags', 'Invisible')\n}];\nconst getTagLevel = (userVisible, userAssignable) => {\n  const matchLevel = {\n    [[true, true].join(',')]: TagLevel.Public,\n    [[true, false].join(',')]: TagLevel.Restricted,\n    [[false, false].join(',')]: TagLevel.Invisible\n  };\n  return matchLevel[[userVisible, userAssignable].join(',')];\n};\nexport default Vue.extend({\n  name: 'SystemTagForm',\n  components: {\n    NcButton,\n    NcLoadingIcon,\n    NcSelect,\n    NcSelectTags,\n    NcTextField\n  },\n  props: {\n    tags: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      tagLevelOptions,\n      selectedTag: null,\n      errorMessage: '',\n      tagName: '',\n      tagLevel: TagLevel.Public\n    };\n  },\n  watch: {\n    selectedTag(tag) {\n      this.tagName = tag ? tag.displayName : '';\n      this.tagLevel = tag ? getTagLevel(tag.userVisible, tag.userAssignable) : TagLevel.Public;\n    }\n  },\n  computed: {\n    isCreating() {\n      return this.selectedTag === null;\n    },\n    isCreateDisabled() {\n      return this.tagName === '';\n    },\n    isUpdateDisabled() {\n      return this.tagName === '' || this.selectedTag?.displayName === this.tagName && getTagLevel(this.selectedTag?.userVisible, this.selectedTag?.userAssignable) === this.tagLevel;\n    },\n    isResetDisabled() {\n      if (this.isCreating) {\n        return this.tagName === '' && this.tagLevel === TagLevel.Public;\n      }\n      return this.selectedTag === null;\n    },\n    userVisible() {\n      const matchLevel = {\n        [TagLevel.Public]: true,\n        [TagLevel.Restricted]: true,\n        [TagLevel.Invisible]: false\n      };\n      return matchLevel[this.tagLevel];\n    },\n    userAssignable() {\n      const matchLevel = {\n        [TagLevel.Public]: true,\n        [TagLevel.Restricted]: false,\n        [TagLevel.Invisible]: false\n      };\n      return matchLevel[this.tagLevel];\n    },\n    tagProperties() {\n      return {\n        displayName: this.tagName,\n        userVisible: this.userVisible,\n        userAssignable: this.userAssignable\n      };\n    }\n  },\n  methods: {\n    t,\n    async handleSubmit() {\n      if (this.isCreating) {\n        await this.create();\n        return;\n      }\n      await this.update();\n    },\n    async create() {\n      const tag = {\n        ...defaultBaseTag,\n        ...this.tagProperties\n      };\n      this.loading = true;\n      try {\n        const id = await createTag(tag);\n        const createdTag = {\n          ...tag,\n          id\n        };\n        this.$emit('tag:created', createdTag);\n        showSuccess(t('systemtags', 'Created tag'));\n        this.reset();\n      } catch (error) {\n        this.errorMessage = t('systemtags', 'Failed to create tag');\n      }\n      this.loading = false;\n    },\n    async update() {\n      if (this.selectedTag === null) {\n        return;\n      }\n      const tag = {\n        ...this.selectedTag,\n        ...this.tagProperties\n      };\n      this.loading = true;\n      try {\n        await updateTag(tag);\n        this.selectedTag = tag;\n        this.$emit('tag:updated', tag);\n        showSuccess(t('systemtags', 'Updated tag'));\n        this.$refs.tagNameInput?.focus();\n      } catch (error) {\n        this.errorMessage = t('systemtags', 'Failed to update tag');\n      }\n      this.loading = false;\n    },\n    async handleDelete() {\n      if (this.selectedTag === null) {\n        return;\n      }\n      this.loading = true;\n      try {\n        await deleteTag(this.selectedTag);\n        this.$emit('tag:deleted', this.selectedTag);\n        showSuccess(t('systemtags', 'Deleted tag'));\n        this.reset();\n      } catch (error) {\n        this.errorMessage = t('systemtags', 'Failed to delete tag');\n      }\n      this.loading = false;\n    },\n    reset() {\n      this.selectedTag = null;\n      this.errorMessage = '';\n      this.tagName = '';\n      this.tagLevel = TagLevel.Public;\n      this.$refs.tagNameInput?.focus();\n    }\n  }\n});","import { loadState } from '@nextcloud/initial-state';\nimport { showError, showSuccess } from '@nextcloud/dialogs';\nimport { t } from '@nextcloud/l10n';\nimport { updateSystemTagsAdminRestriction } from \"../services/api.js\";\nimport logger from \"../logger.ts\";\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch';\nexport default {\n  name: 'SystemTagsCreationControl',\n  components: {\n    NcCheckboxRadioSwitch\n  },\n  setup() {\n    return {\n      t\n    };\n  },\n  data() {\n    return {\n      // By default, system tags creation is not restricted to admins\n      systemTagsCreationRestrictedToAdmin: loadState('systemtags', 'restrictSystemTagsCreationToAdmin', false)\n    };\n  },\n  methods: {\n    async updateSystemTagsDefault(isRestricted) {\n      try {\n        const responseData = await updateSystemTagsAdminRestriction(isRestricted);\n        console.debug('updateSystemTagsDefault', responseData);\n        this.handleResponse({\n          isRestricted,\n          status: responseData.ocs?.meta?.status\n        });\n      } catch (e) {\n        this.handleResponse({\n          errorMessage: t('systemtags', 'Unable to update setting'),\n          error: e\n        });\n      }\n    },\n    handleResponse(_ref) {\n      let {\n        isRestricted,\n        status,\n        errorMessage,\n        error\n      } = _ref;\n      if (status === 'ok') {\n        this.systemTagsCreationRestrictedToAdmin = isRestricted;\n        showSuccess(isRestricted ? t('systemtags', 'System tag creation is now restricted to administrators') : t('systemtags', 'System tag creation is now allowed for everybody'));\n        return;\n      }\n      if (errorMessage) {\n        showError(errorMessage);\n        logger.error(errorMessage, error);\n      }\n    }\n  }\n};","/* eslint-disable */\nimport Vue from 'vue';\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon';\nimport NcSettingsSection from '@nextcloud/vue/components/NcSettingsSection';\nimport { translate as t } from '@nextcloud/l10n';\nimport { showError } from '@nextcloud/dialogs';\nimport SystemTagForm from \"../components/SystemTagForm.vue\";\nimport SystemTagsCreationControl from \"../components/SystemTagsCreationControl.vue\";\nimport { fetchTags } from \"../services/api.js\";\nexport default Vue.extend({\n  name: 'SystemTagsSection',\n  components: {\n    NcLoadingIcon,\n    NcSettingsSection,\n    SystemTagForm,\n    SystemTagsCreationControl\n  },\n  data() {\n    return {\n      loadingTags: false,\n      tags: []\n    };\n  },\n  async created() {\n    this.loadingTags = true;\n    try {\n      this.tags = await fetchTags();\n    } catch (error) {\n      showError(t('systemtags', 'Failed to load tags'));\n    }\n    this.loadingTags = false;\n  },\n  methods: {\n    t,\n    handleCreate(tag) {\n      this.tags.unshift(tag);\n    },\n    handleUpdate(tag) {\n      const tagIndex = this.tags.findIndex(currTag => currTag.id === tag.id);\n      this.tags.splice(tagIndex, 1);\n      this.tags.unshift(tag);\n    },\n    handleDelete(tag) {\n      const tagIndex = this.tags.findIndex(currTag => currTag.id === tag.id);\n      this.tags.splice(tagIndex, 1);\n    }\n  }\n});","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c,\n    _setup = _vm._self._setupProxy;\n  return _c(\"form\", {\n    staticClass: \"system-tag-form\",\n    attrs: {\n      disabled: _vm.loading,\n      \"aria-labelledby\": \"system-tag-form-heading\"\n    },\n    on: {\n      submit: function ($event) {\n        $event.preventDefault();\n        return _vm.handleSubmit.apply(null, arguments);\n      },\n      reset: _vm.reset\n    }\n  }, [_c(\"h4\", {\n    attrs: {\n      id: \"system-tag-form-heading\"\n    }\n  }, [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Create or edit tags\")) + \"\\n\\t\")]), _vm._v(\" \"), _c(\"div\", {\n    staticClass: \"system-tag-form__group\"\n  }, [_c(\"label\", {\n    attrs: {\n      for: \"system-tags-input\"\n    }\n  }, [_vm._v(_vm._s(_vm.t(\"systemtags\", \"Search for a tag to edit\")))]), _vm._v(\" \"), _c(\"NcSelectTags\", {\n    attrs: {\n      \"input-id\": \"system-tags-input\",\n      placeholder: _vm.t(\"systemtags\", \"Collaborative tags …\"),\n      \"fetch-tags\": false,\n      options: _vm.tags,\n      multiple: false,\n      passthru: \"\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"no-options\",\n      fn: function () {\n        return [_vm._v(\"\\n\\t\\t\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"No tags to select\")) + \"\\n\\t\\t\\t\")];\n      },\n      proxy: true\n    }]),\n    model: {\n      value: _vm.selectedTag,\n      callback: function ($$v) {\n        _vm.selectedTag = $$v;\n      },\n      expression: \"selectedTag\"\n    }\n  })], 1), _vm._v(\" \"), _c(\"div\", {\n    staticClass: \"system-tag-form__group\"\n  }, [_c(\"label\", {\n    attrs: {\n      for: \"system-tag-name\"\n    }\n  }, [_vm._v(_vm._s(_vm.t(\"systemtags\", \"Tag name\")))]), _vm._v(\" \"), _c(\"NcTextField\", {\n    ref: \"tagNameInput\",\n    attrs: {\n      id: \"system-tag-name\",\n      value: _vm.tagName,\n      error: Boolean(_vm.errorMessage),\n      \"helper-text\": _vm.errorMessage,\n      \"label-outside\": \"\"\n    },\n    on: {\n      \"update:value\": function ($event) {\n        _vm.tagName = $event;\n      }\n    }\n  })], 1), _vm._v(\" \"), _c(\"div\", {\n    staticClass: \"system-tag-form__group\"\n  }, [_c(\"label\", {\n    attrs: {\n      for: \"system-tag-level\"\n    }\n  }, [_vm._v(_vm._s(_vm.t(\"systemtags\", \"Tag level\")))]), _vm._v(\" \"), _c(\"NcSelect\", {\n    attrs: {\n      \"input-id\": \"system-tag-level\",\n      options: _vm.tagLevelOptions,\n      reduce: level => level.id,\n      clearable: false,\n      disabled: _vm.loading\n    },\n    model: {\n      value: _vm.tagLevel,\n      callback: function ($$v) {\n        _vm.tagLevel = $$v;\n      },\n      expression: \"tagLevel\"\n    }\n  })], 1), _vm._v(\" \"), _c(\"div\", {\n    staticClass: \"system-tag-form__row\"\n  }, [_vm.isCreating ? _c(\"NcButton\", {\n    attrs: {\n      \"native-type\": \"submit\",\n      disabled: _vm.isCreateDisabled || _vm.loading\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Create\")) + \"\\n\\t\\t\")]) : [_c(\"NcButton\", {\n    attrs: {\n      \"native-type\": \"submit\",\n      disabled: _vm.isUpdateDisabled || _vm.loading\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Update\")) + \"\\n\\t\\t\\t\")]), _vm._v(\" \"), _c(\"NcButton\", {\n    attrs: {\n      disabled: _vm.loading\n    },\n    on: {\n      click: _vm.handleDelete\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Delete\")) + \"\\n\\t\\t\\t\")])], _vm._v(\" \"), _c(\"NcButton\", {\n    attrs: {\n      \"native-type\": \"reset\",\n      disabled: _vm.isResetDisabled || _vm.loading\n    }\n  }, [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Reset\")) + \"\\n\\t\\t\")]), _vm._v(\" \"), _vm.loading ? _c(\"NcLoadingIcon\", {\n    attrs: {\n      name: _vm.t(\"systemtags\", \"Loading …\"),\n      size: 32\n    }\n  }) : _vm._e()], 2)]);\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\nexport { render, staticRenderFns };","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c(\"div\", {\n    attrs: {\n      id: \"system-tags-creation-control\"\n    }\n  }, [_c(\"h4\", {\n    staticClass: \"inlineblock\"\n  }, [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"System tag management\")) + \"\\n\\t\")]), _vm._v(\" \"), _c(\"p\", {\n    staticClass: \"settings-hint\"\n  }, [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"If enabled, only administrators can create and edit tags. Accounts can still assign and remove them from files.\")) + \"\\n\\t\")]), _vm._v(\" \"), _c(\"NcCheckboxRadioSwitch\", {\n    attrs: {\n      type: \"switch\",\n      checked: _vm.systemTagsCreationRestrictedToAdmin\n    },\n    on: {\n      \"update:checked\": [function ($event) {\n        _vm.systemTagsCreationRestrictedToAdmin = $event;\n      }, _vm.updateSystemTagsDefault]\n    }\n  }, [_vm._v(\"\\n\\t\\t\" + _vm._s(_vm.t(\"systemtags\", \"Restrict tag creation and editing to administrators\")) + \"\\n\\t\")])], 1);\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\nexport { render, staticRenderFns };","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c,\n    _setup = _vm._self._setupProxy;\n  return _c(\"NcSettingsSection\", {\n    attrs: {\n      name: _vm.t(\"systemtags\", \"Collaborative tags\"),\n      description: _vm.t(\"systemtags\", \"Collaborative tags are available for all users. Restricted tags are visible to users but cannot be assigned by them. Invisible tags are for internal use, since users cannot see or assign them.\")\n    }\n  }, [_c(\"SystemTagsCreationControl\"), _vm._v(\" \"), _vm.loadingTags ? _c(\"NcLoadingIcon\", {\n    attrs: {\n      name: _vm.t(\"systemtags\", \"Loading collaborative tags …\"),\n      size: 32\n    }\n  }) : _c(\"SystemTagForm\", {\n    attrs: {\n      tags: _vm.tags\n    },\n    on: {\n      \"tag:created\": _vm.handleCreate,\n      \"tag:updated\": _vm.handleUpdate,\n      \"tag:deleted\": _vm.handleDelete\n    }\n  })], 1);\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\nexport { render, staticRenderFns };","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.system-tag-form[data-v-5e6ae519] {\n  display: flex;\n  flex-direction: column;\n  max-width: 400px;\n  gap: 8px 0;\n}\n.system-tag-form__group[data-v-5e6ae519] {\n  display: flex;\n  flex-direction: column;\n}\n.system-tag-form__row[data-v-5e6ae519] {\n  margin-top: 8px;\n  display: flex;\n  gap: 0 4px;\n}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=style&index=0&id=5e6ae519&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SystemTagForm.vue?vue&type=style&index=0&id=5e6ae519&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"-\" + chunkId + \".js?v=\" + {\"node_modules_nextcloud_dialogs_dist_chunks_index-BC-7VPxC_mjs\":\"2fcef36253529e5f48bc\",\"node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-BSFsDqYB_mjs\":\"f3a3966faa81f9b81fa8\",\"node_modules_nextcloud_dialogs_dist_chunks_FilePicker-CsU6FfAP_mjs\":\"8bce3ebf3ef868f175e5\",\"data_image_svg_xml_3c_21--_20-_20SPDX-FileCopyrightText_202020_20Google_20Inc_20-_20SPDX-Lice-cc29b1\":\"9fa10a9863e5b78deec8\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"nextcloud:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"systemtags-admin\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknextcloud\"] = self[\"webpackChunknextcloud\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"core-common\"], () => (__webpack_require__(\"./apps/systemtags/src/admin.ts\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}