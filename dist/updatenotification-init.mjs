const __vite__fileDeps=["./chunks/AppChangelogDialog-BwElkOXp.mjs","./core-common.mjs","./chunks/Markdown-Dm4KOgdr.mjs","./chunks/marked.esm-C_q1v7Sb.mjs","./chunks/icons-TElqpmA8.mjs"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
/*! third party licenses: dist/vendor.LICENSE.txt */
import{_ as d}from"./chunks/preload-helper-BG02UnR2.mjs";import{b_ as l,aZ as m,c0 as u,bR as f,b$ as _,aV as v}from"./core-common.mjs";const r=l("core","apps",{}),b=m(()=>d(()=>import("./chunks/AppChangelogDialog-BwElkOXp.mjs"),__vite__mapDeps([0,1,2,3,4]),import.meta.url));function w(o,n){const e=document.createElement("div");return document.body.appendChild(e),new Promise(i=>{let t=!1;const a=new v({el:e,render:c=>c(b,{props:{appId:o,version:n},on:{dismiss:()=>{t=!0},"update:open":p=>{var s;p||((s=a.$destroy)==null||s.call(a),i(t),t&&o in r&&(window.location=r[o].href))}}})})})}u("notifications:action:execute",o=>{var n;if(o.notification.objectType==="app_updated"){o.cancelAction=!0;const[e,i,t,a]=(n=o.action.url.match(new RegExp("(?<=\\/)([^?]+)?version=((\\d+.?)+)")))!=null?n:[];w(i||o.notification.objectId,t).then(c=>{c&&f.delete(_("apps/notifications/api/v2/notifications/{id}",{id:o.notification.notificationId}))})}});
