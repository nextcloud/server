{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./apps/comments/src/comments.js","webpack:///./apps/comments/src/app.js","webpack:///./apps/comments/src/templates.js","webpack:///./apps/comments/src/commentmodel.js","webpack:///./apps/comments/src/commentcollection.js","webpack:///./apps/comments/src/commentsummarymodel.js","webpack:///./apps/comments/src/commentstabview.js","webpack:///./apps/comments/src/commentsmodifymenu.js","webpack:///./apps/comments/src/filesplugin.js","webpack:///./apps/comments/src/activitytabviewplugin.js","webpack:///./apps/comments/src/search.js","webpack:///./apps/comments/src/vendor/Caret.js/dist/jquery.caret.min.js","webpack:///./apps/comments/src/vendor/At.js/dist/js/jquery.atwho.min.js","webpack:///./apps/comments/src/style/autocomplete.scss?7de9","webpack:///./apps/comments/src/style/autocomplete.scss","webpack:///./apps/comments/src/style/comments.scss?b4c3","webpack:///./apps/comments/src/style/comments.scss"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","_i","push","memo","stylesInDom","isOldIE","Boolean","window","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","listToStyles","options","styles","newStyles","base","part","css","media","parts","addStylesToDom","domStyle","j","refs","addStyle","insertStyleElement","style","createElement","attributes","nonce","nc","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","index","replacement","filter","applyToSingletonTag","remove","obj","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","singleton","singletonCounter","update","styleIndex","firstChild","parentNode","removeStyleElement","newObj","newList","mayRemove","_domStyle","__webpack_exports__","OCA","Comments","template","templates","Handlebars","Templates","1","container","depth0","helpers","partials","3","5","7","helper","escapeExpression","actorId","helperMissing","nullContext","hash","9","11","compiler","main","stack1","alias1","alias2","alias3","alias4","isUnread","fn","program","inverse","noop","isLong","_typeof","isUserAuthor","actorDisplayName","timestamp","altDate","date","formattedMessage","useData","iconClass","displayName","2","4","each","items","cancelText","tag","isEditMode","newMessagePlaceholder","message","submitText","countMessage","iconUrl","emptyResultLabel","moreLabel","OC","_","extend","Files","Client","PROPERTY_FILEID","NS_OWNCLOUD","PROPERTY_MESSAGE","PROPERTY_ACTORTYPE","PROPERTY_ACTORID","PROPERTY_ISUNREAD","PROPERTY_OBJECTID","PROPERTY_OBJECTTYPE","PROPERTY_ACTORDISPLAYNAME","PROPERTY_CREATIONDATETIME","PROPERTY_MENTIONS","CommentModel","Backbone","Model","sync","davSync","defaults","actorType","objectType","davProperties","creationDateTime","objectId","mentions","parse","_parseMentions","isUndefined","result","mention","localName","child","nextSibling","startsWith","textContent","CommentCollection","Collection","model","_objectType","_objectId","_endReached","_limit","initialize","models","url","linkToRemote","setObjectId","hasMoreResults","reset","_summaryModel","apply","arguments","fetchNext","self","body","success","resp","initial","set","trigger","getSummaryModel","CommentSummaryModel","updateReadMarker","save","readMarker","Date","toUTCString","PROPERTY_READMARKER","attrs","CommentsTabView","DetailTabView","className","_autoCompleteData","undefined","_commentsModifyMenu","events","submit .newCommentForm","click .showMore","click .cancel","click .comment","keyup div.message","change div.message","input div.message","paste div.message","_commentMaxLength","collection","on","_onRequest","_onEndRequest","_onAddModel","_onChangeModel","_commentMaxThreshold","bindAll","params","currentUser","getCurrentUser","uid","editCommentTemplate","commentTemplate","editTooltip","_isLong","getLabel","getIcon","setFileInfo","fileInfo","render","_initAutoComplete","$","find","silent","nextPage","$el","html","before","tooltip","$container","avatar","delegateEvents","_onTypeComment","autosize","focus","$target","limit","appConfig","comments","maxAutoCompleteResults","atwho","at","callbacks","remoteFilter","_onAutoComplete","highlighter","li","$li","sorter","q","displayTpl","escapeHTML","label","insertTpl","searchKey","je","_postRenderItem","parent","query","callback","_autoCompleteRequestTimer","clearTimeout","delay","_autoCompleteRequestCall","abort","ajax","linkToOCS","search","itemType","itemId","beforeSend","request","setRequestHeader","ocs","_formatItem","commentModel","getTime","Util","relativeModifiedDate","formatDate","_formatMessage","_toggleLoading","state","_loading","toggleClass","type","addClass","fileInfoModel","findWhere","$comment","eq","append","text","prop","oldMentions","fetch","isEqual","$updated","trim","previous","$row","closest","removeClass","$message","editionMode","inlineAvatars","context","hasClass","$this","attr","username","contactsMenu","modifyCommentMenu","CommentsModifyMenu","show","listenTo","ev","action","_onClickEditComment","_onClickDeleteComment","_postRenderMessage","user","editMode","replace","mentionId","indexOf","escape","regex","RegExp","_composeHTMLMention","mentionDisplayName","match","p1","OCP","plainToRich","preventDefault","commentId","commentToEdit","$formRow","after","replaceWith","clone","$field","len","$submitButton","count","max","limitExceeded","keyCode","shiftKey","click","_onClickComment","is","_onClickCloseComment","$loading","$moreIcon","destroy","error","Notification","showTemporary","_onClickShowMore","_onSubmitSuccess","$form","$submit","_commentBodyHTML2Plain","oldHtml","$inserted","userId","richToPlain","_onSubmitComment","$commentField","_onSubmitError","verb","wait","_onTextChange","empty","_onPaste","originalEvent","clipboardData","getData","execCommand","View","tagName","_scopes","click a.action","_onClickAction","event","currentTarget","hideMenus","_context","active","offsetIcon","offset","offsetContainer","position","top","left","right","width","showMenu","PROPERTY_COMMENTS_UNREAD","FilesPlugin","ignoreLists","_formatCommentCount","imagePath","attach","fileList","registerTabView","oldGetWebdavProperties","_getWebdavProperties","props","filesClient","addFileInfoParser","response","commentsUnread","propStat","properties","parseInt","oldCreateRow","_createRow","fileData","$tr","fileActions","registerAction","$file","unread","mime","order","permissions","PERMISSION_READ","FileActions","TYPE_INLINE","actionSpec","isDefault","unreadComments","$actionLink","actionHandler","fileName","showDetailsView","oldElementToFile","elementToFile","Plugins","register","ActivityTabViewPlugin","prepareModelForDisplay","view","$overlay","_onClickCollapsedComment","Comment","fileAppLoaded","App","renderCommentResult","$nofilterresults","updateLegacyMimetype","$pathDiv","path","$avatar","authorName","authorId","comment","prepend","link","dir","dirname","generateUrl","scrollto","handleCommentClick","changeDirectory","scrollTo","mime_type","setFileList","setRenderer","setHandler","Search","a","define","__WEBPACK_AMD_DEFINE_RESULT__","returnExportsGlobal","b","g","h","$inputor","domInputor","setPos","getIEPosition","getPosition","getOffset","getOldIEPos","selection","createRange","createTextRange","moveToElementText","setEndPoint","getPos","range","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","detach","getOldIEOffset","duplicate","moveStart","height","getBoundingClientRect","bottom","f","getSelection","setStart","insertNode","selectNode","scrollTop","scrollLeft","rangeCount","getRangeAt","getIEPos","parentElement","moveToBookmark","getBookmark","collapse","compareEndPoints","selectionStart","move","select","setSelectionRange","getIEOffset","boundingLeft","boundingTop","boundingHeight","test","navigator","userAgent","val","slice","rect","css_attr","mirrorCss","zIndex","$mirror","contentEditable","pos","iframe","contentWindow","caret","isPlainObject","EditableCaret","InputCaret","Utils","apis","__WEBPACK_AMD_DEFINE_ARRAY__","ESC","TAB","ENTER","CTRL","A","P","N","LEFT","UP","RIGHT","DOWN","BACKSPACE","SPACE","beforeSave","arrayToDefaultHash","matcher","decodeURI","exec","String","toLowerCase","atwho_order","sort","tplEval","beforeInsert","beforeReposition","afterMatchFailed","currentFlag","controllers","aliasMaps","setupRootElement","listen","createContainer","ownerDocument","defaultView","parentWindow","frameElement","debug","iframeAsRoot","controller","setContextFor","reg","alias","init","hide","isComposing","setTimeout","dispatch","onKeyup","onKeydown","expectedQueryCBId","getOpt","shutdown","off","lookUp","ctrlKey","visible","prev","next","highlighted","choose","app","setting","u","Math","random","substr","reload","callDefault","insertContentFor","atwho-at","renderView","isArray","catchQuery","_delayLookUp","_lookUp","now","previousCallTime","_stopDelayedCall","delayedCallTimeout","_generateQueryCBId","constructor","proxy","__super__","headPos","endPos","change","_getRange","_setRange","setEndAfter","setStartAfter","setEndBefore","setStartBefore","_clearRange","ctrl_a_pressed","removeAllRanges","addRange","_movingEvent","which","_unwrap","unwrap","nodeValue","collapsed","startContainer","contents","last","nodeType","ELEMENT_NODE","startOffset","cloneContents","TEXT_NODE","previousSibling","siblings","surroundContents","el","first","getClientRects","storage","saved","load","_load","dataType","done","$elUl","children","timeoutID","bindEvent","charCodeAt","clientX","clientY","expr","filters","stopShowing","reposition","offsetTop","offsetHeight","animate","isNaN","isSelecting","setIframe","run","Array","headerTpl","functionOverrides","suffix","hideWithoutSuffix","startWithSpace","acceptSpaceBar","highlightFirst","maxLen","minLen","displayTimeout","spaceSelectsMatch","tabSelectsMatch","editableAtwhoQueryAttrs","scrollDuration","suspendOnComposing","lookUpOnClick","locals"],"mappings":"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","file":"comments.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = jQuery;","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};","import './app'\nimport './templates'\nimport './commentmodel'\nimport './commentcollection'\nimport './commentsummarymodel'\nimport './commentstabview'\nimport './commentsmodifymenu'\nimport './filesplugin'\nimport './activitytabviewplugin'\nimport './search'\n\nimport './vendor/Caret.js/dist/jquery.caret.min'\nimport './vendor/At.js/dist/js/jquery.atwho.min'\n\nimport './style/autocomplete.scss'\nimport './style/comments.scss'\n\nwindow.OCA.Comments = OCA.Comments;\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {};\n\t}\n\n})();\n\n","(function() {\n  var template = Handlebars.template, templates = OCA.Comments.Templates = OCA.Comments.Templates || {};\ntemplates['comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" unread\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" collapsed\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" currentUser\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"data-username=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t<a href=\\\"#\\\" class=\\\"action more icon icon-more has-tooltip\\\"></a>\\n\t\t\t<div class=\\\"deleteLoading icon-loading-small hidden\\\"></div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t<div class=\\\"message-overlay\\\"></div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"comment\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUnread : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.actorId : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"> </div>\\n\t\t<div class=\\\"author\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t<div class=\\\"date has-tooltip live-relative-timestamp\\\" data-timestamp=\\\"\"\n    + alias4(((helper = (helper = helpers.timestamp || (depth0 != null ? depth0.timestamp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"timestamp\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.altDate || (depth0 != null ? depth0.altDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"altDate\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.date || (depth0 != null ? depth0.date : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"date\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t</div>\\n\t<div class=\\\"message\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.formattedMessage || (depth0 != null ? depth0.formattedMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"formattedMessage\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"useData\":true});\ntemplates['commentsmodifymenu'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"menuitem action \"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \" permanent\\\" data-action=\\\"\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.iconClass : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.displayName || (depth0 != null ? depth0.displayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"displayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t\t\t</a>\\n\t\t</li>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t\t\t<span class=\\\"icon \"\n    + container.escapeExpression(((helper = (helper = helpers.iconClass || (depth0 != null ? depth0.iconClass : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"iconClass\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></span>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t\t\t<span class=\\\"no-icon\\\"></span>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"useData\":true});\ntemplates['edit_comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t<div class=\\\"action-container\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"action cancel icon icon-close has-tooltip\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.cancelText || (depth0 != null ? depth0.cancelText : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancelText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></a>\\n\t\t\t</div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \" class=\\\"newCommentRow comment\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar currentUser\\\" data-username=\\\"\"\n    + alias4(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></div>\\n\t\t<div class=\\\"author currentUser\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isEditMode : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t</div>\\n\t<form class=\\\"newCommentForm\\\">\\n\t\t<div contentEditable=\\\"true\\\" class=\\\"message\\\" data-placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.newMessagePlaceholder || (depth0 != null ? depth0.newMessagePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newMessagePlaceholder\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t\t<input class=\\\"submit icon-confirm has-tooltip\\\" type=\\\"submit\\\" value=\\\"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.submitText || (depth0 != null ? depth0.submitText : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"submitText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n\t\t<div class=\\\"submitLoading icon-loading-small hidden\\\"></div>\\n\t</form>\\n</\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \">\\n\";\n},\"useData\":true});\ntemplates['filesplugin'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<a class=\\\"action action-comment permanent\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.countMessage || (depth0 != null ? depth0.countMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"countMessage\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" href=\\\"#\\\">\\n\t<img class=\\\"svg\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.iconUrl || (depth0 != null ? depth0.iconUrl : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconUrl\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n</a>\\n\";\n},\"useData\":true});\ntemplates['view'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<ul class=\\\"comments\\\">\\n</ul>\\n<div class=\\\"emptycontent hidden\\\"><div class=\\\"icon-comment\\\"></div>\\n\t<p>\"\n    + alias4(((helper = (helper = helpers.emptyResultLabel || (depth0 != null ? depth0.emptyResultLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"emptyResultLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p></div>\\n<input type=\\\"button\\\" class=\\\"showMore hidden\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.moreLabel || (depth0 != null ? depth0.moreLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"moreLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" name=\\\"show-more\\\" id=\\\"show-more\\\" />\\n<div class=\\\"loading hidden\\\" style=\\\"height: 50px\\\"></div>\\n\";\n},\"useData\":true});\n})();","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_FILEID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}id',\n\t\tPROPERTY_MESSAGE: \t'{' + OC.Files.Client.NS_OWNCLOUD + '}message',\n\t\tPROPERTY_ACTORTYPE:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorType',\n\t\tPROPERTY_ACTORID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorId',\n\t\tPROPERTY_ISUNREAD:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}isUnread',\n\t\tPROPERTY_OBJECTID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}objectId',\n\t\tPROPERTY_OBJECTTYPE:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}objectType',\n\t\tPROPERTY_ACTORDISPLAYNAME:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorDisplayName',\n\t\tPROPERTY_CREATIONDATETIME:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}creationDateTime',\n\t\tPROPERTY_MENTIONS: '{' + OC.Files.Client.NS_OWNCLOUD + '}mentions'\n\t});\n\n\t/**\n\t * @class OCA.Comments.CommentModel\n\t * @classdesc\n\t *\n\t * Comment\n\t *\n\t */\n\tvar CommentModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentModel.prototype */ {\n\t\tsync: OC.Backbone.davSync,\n\n\t\tdefaults: {\n\t\t\tactorType: 'users',\n\t\t\tobjectType: 'files'\n\t\t},\n\n\t\tdavProperties: {\n\t\t\t'id':\tOC.Files.Client.PROPERTY_FILEID,\n\t\t\t'message':\tOC.Files.Client.PROPERTY_MESSAGE,\n\t\t\t'actorType':\tOC.Files.Client.PROPERTY_ACTORTYPE,\n\t\t\t'actorId':\tOC.Files.Client.PROPERTY_ACTORID,\n\t\t\t'actorDisplayName':\tOC.Files.Client.PROPERTY_ACTORDISPLAYNAME,\n\t\t\t'creationDateTime':\tOC.Files.Client.PROPERTY_CREATIONDATETIME,\n\t\t\t'objectType':\tOC.Files.Client.PROPERTY_OBJECTTYPE,\n\t\t\t'objectId':\tOC.Files.Client.PROPERTY_OBJECTID,\n\t\t\t'isUnread':\tOC.Files.Client.PROPERTY_ISUNREAD,\n\t\t\t'mentions': OC.Files.Client.PROPERTY_MENTIONS\n\t\t},\n\n\t\tparse: function(data) {\n\t\t\treturn {\n\t\t\t\tid: data.id,\n\t\t\t\tmessage: data.message,\n\t\t\t\tactorType: data.actorType,\n\t\t\t\tactorId: data.actorId,\n\t\t\t\tactorDisplayName: data.actorDisplayName,\n\t\t\t\tcreationDateTime: data.creationDateTime,\n\t\t\t\tobjectType: data.objectType,\n\t\t\t\tobjectId: data.objectId,\n\t\t\t\tisUnread: (data.isUnread === 'true'),\n\t\t\t\tmentions: this._parseMentions(data.mentions)\n\t\t\t};\n\t\t},\n\n\t\t_parseMentions: function(mentions) {\n\t\t\tif(_.isUndefined(mentions)) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tvar result = {};\n\t\t\tfor(var i in mentions) {\n\t\t\t\tvar mention = mentions[i];\n\t\t\t\tif(_.isUndefined(mention.localName) || mention.localName !== 'mention') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tresult[i] = {};\n\t\t\t\tfor (var child = mention.firstChild; child; child = child.nextSibling) {\n\t\t\t\t\tif(_.isUndefined(child.localName) || !child.localName.startsWith('mention')) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tresult[i][child.localName] = child.textContent;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t});\n\n\tOCA.Comments.CommentModel = CommentModel;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t/**\n\t * @class OCA.Comments.CommentCollection\n\t * @classdesc\n\t *\n\t * Collection of comments assigned to a file\n\t *\n\t */\n\tvar CommentCollection = OC.Backbone.Collection.extend(\n\t\t/** @lends OCA.Comments.CommentCollection.prototype */ {\n\n\t\tsync: OC.Backbone.davSync,\n\n\t\tmodel: OCA.Comments.CommentModel,\n\n\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectType: 'files',\n\n\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectId: null,\n\n\t\t/**\n\t\t * True if there are no more page results left to fetch\n\t\t *\n\t\t * @type bool\n\t\t */\n\t\t_endReached: false,\n\n\t\t/**\n\t\t * Number of comments to fetch per page\n\t\t *\n\t\t * @type int\n\t\t */\n\t\t_limit : 20,\n\n\t\t/**\n\t\t * Initializes the collection\n\t\t *\n\t\t * @param {string} [options.objectType] object type\n\t\t * @param {string} [options.objectId] object id\n\t\t */\n\t\tinitialize: function(models, options) {\n\t\t\toptions = options || {};\n\t\t\tif (options.objectType) {\n\t\t\t\tthis._objectType = options.objectType;\n\t\t\t}\n\t\t\tif (options.objectId) {\n\t\t\t\tthis._objectId = options.objectId;\n\t\t\t}\n\t\t},\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/comments/' +\n\t\t\t\tencodeURIComponent(this._objectType) + '/' +\n\t\t\t\tencodeURIComponent(this._objectId) + '/';\n\t\t},\n\n\t\tsetObjectId: function(objectId) {\n\t\t\tthis._objectId = objectId;\n\t\t},\n\n\t\thasMoreResults: function() {\n\t\t\treturn !this._endReached;\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis._endReached = false;\n\t\t\tthis._summaryModel = null;\n\t\t\treturn OC.Backbone.Collection.prototype.reset.apply(this, arguments);\n\t\t},\n\n\t\t/**\n\t\t * Fetch the next set of results\n\t\t */\n\t\tfetchNext: function(options) {\n\t\t\tvar self = this;\n\t\t\tif (!this.hasMoreResults()) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar body = '<?xml version=\"1.0\" encoding=\"utf-8\" ?>\\n' +\n\t\t\t\t'<oc:filter-comments xmlns:D=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\">\\n' +\n\t\t\t\t// load one more so we know there is more\n\t\t\t\t'    <oc:limit>' + (this._limit + 1) + '</oc:limit>\\n' +\n\t\t\t\t'    <oc:offset>' + this.length + '</oc:offset>\\n' +\n\t\t\t\t'</oc:filter-comments>\\n';\n\n\t\t\toptions = options || {};\n\t\t\tvar success = options.success;\n\t\t\toptions = _.extend({\n\t\t\t\tremove: false,\n\t\t\t\tparse: true,\n\t\t\t\tdata: body,\n\t\t\t\tdavProperties: CommentCollection.prototype.model.prototype.davProperties,\n\t\t\t\tsuccess: function(resp) {\n\t\t\t\t\tif (resp.length <= self._limit) {\n\t\t\t\t\t\t// no new entries, end reached\n\t\t\t\t\t\tself._endReached = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove last entry, for next page load\n\t\t\t\t\t\tresp = _.initial(resp);\n\t\t\t\t\t}\n\t\t\t\t\tif (!self.set(resp, options)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tsuccess.apply(null, arguments);\n\t\t\t\t\t}\n\t\t\t\t\tself.trigger('sync', 'REPORT', self, options);\n\t\t\t\t}\n\t\t\t}, options);\n\n\t\t\treturn this.sync('REPORT', this, options);\n\t\t},\n\n\t\t/**\n\t\t * Returns the matching summary model\n\t\t *\n\t\t * @return {OCA.Comments.CommentSummaryModel} summary model\n\t\t */\n\t\tgetSummaryModel: function() {\n\t\t\tif (!this._summaryModel) {\n\t\t\t\tthis._summaryModel = new OCA.Comments.CommentSummaryModel({\n\t\t\t\t\tid: this._objectId,\n\t\t\t\t\tobjectType: this._objectType\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this._summaryModel;\n\t\t},\n\n\t\t/**\n\t\t * Updates the read marker for this comment thread\n\t\t *\n\t\t * @param {Date} [date] optional date, defaults to now\n\t\t * @param {Object} [options] backbone options\n\t\t */\n\t\tupdateReadMarker: function(date, options) {\n\t\t\toptions = options || {};\n\n\t\t\treturn this.getSummaryModel().save({\n\t\t\t\treadMarker: (date || new Date()).toUTCString()\n\t\t\t}, options);\n\t\t}\n\t});\n\n\tOCA.Comments.CommentCollection = CommentCollection;\n})(OC, OCA);\n\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_READMARKER:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}readMarker'\n\t});\n\n\t/**\n\t * @class OCA.Comments.CommentSummaryModel\n\t * @classdesc\n\t *\n\t * Model containing summary information related to comments\n\t * like the read marker.\n\t *\n\t */\n\tvar CommentSummaryModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentSummaryModel.prototype */ {\n\t\tsync: OC.Backbone.davSync,\n\n\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectType: 'files',\n\n\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectId: null,\n\n\t\tdavProperties: {\n\t\t\t'readMarker': OC.Files.Client.PROPERTY_READMARKER\n\t\t},\n\n\t\t/**\n\t\t * Initializes the summary model\n\t\t *\n\t\t * @param {string} [options.objectType] object type\n\t\t * @param {string} [options.objectId] object id\n\t\t */\n\t\tinitialize: function(attrs, options) {\n\t\t\toptions = options || {};\n\t\t\tif (options.objectType) {\n\t\t\t\tthis._objectType = options.objectType;\n\t\t\t}\n\t\t},\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/comments/' +\n\t\t\t\tencodeURIComponent(this._objectType) + '/' +\n\t\t\t\tencodeURIComponent(this.id) + '/';\n\t\t}\n\t});\n\n\tOCA.Comments.CommentSummaryModel = CommentSummaryModel;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars, escapeHTML */\n\n(function(OC, OCA) {\n\n\t/**\n\t * @memberof OCA.Comments\n\t */\n\tvar CommentsTabView = OCA.Files.DetailTabView.extend(\n\t\t/** @lends OCA.Comments.CommentsTabView.prototype */ {\n\t\tid: 'commentsTabView',\n\t\tclassName: 'tab commentsTabView',\n\t\t_autoCompleteData: undefined,\n\t\t_commentsModifyMenu: undefined,\n\n\t\tevents: {\n\t\t\t'submit .newCommentForm': '_onSubmitComment',\n\t\t\t'click .showMore': '_onClickShowMore',\n\t\t\t'click .cancel': '_onClickCloseComment',\n\t\t\t'click .comment': '_onClickComment',\n\t\t\t'keyup div.message': '_onTextChange',\n\t\t\t'change div.message': '_onTextChange',\n\t\t\t'input div.message': '_onTextChange',\n\t\t\t'paste div.message': '_onPaste'\n\t\t},\n\n\t\t_commentMaxLength: 1000,\n\n\t\tinitialize: function() {\n\t\t\tOCA.Files.DetailTabView.prototype.initialize.apply(this, arguments);\n\t\t\tthis.collection = new OCA.Comments.CommentCollection();\n\t\t\tthis.collection.on('request', this._onRequest, this);\n\t\t\tthis.collection.on('sync', this._onEndRequest, this);\n\t\t\tthis.collection.on('add', this._onAddModel, this);\n\t\t\tthis.collection.on('change:message', this._onChangeModel, this);\n\n\t\t\tthis._commentMaxThreshold = this._commentMaxLength * 0.9;\n\n\t\t\t// TODO: error handling\n\t\t\t_.bindAll(this, '_onTypeComment', '_initAutoComplete', '_onAutoComplete');\n\t\t},\n\n\t\ttemplate: function(params) {\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\treturn OCA.Comments.Templates['view'](_.extend({\n\t\t\t\tactorId: currentUser.uid,\n\t\t\t\tactorDisplayName: currentUser.displayName\n\t\t\t}, params));\n\t\t},\n\n\t\teditCommentTemplate: function(params) {\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\treturn OCA.Comments.Templates['edit_comment'](_.extend({\n\t\t\t\tactorId: currentUser.uid,\n\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\tnewMessagePlaceholder: t('comments', 'New comment '),\n\t\t\t\tsubmitText: t('comments', 'Post'),\n\t\t\t\tcancelText: t('comments', 'Cancel'),\n\t\t\t\ttag: 'li'\n\t\t\t}, params));\n\t\t},\n\n\t\tcommentTemplate: function(params) {\n\t\t\tparams = _.extend({\n\t\t\t\teditTooltip: t('comments', 'Edit comment'),\n\t\t\t\tisUserAuthor: OC.getCurrentUser().uid === params.actorId,\n\t\t\t\tisLong: this._isLong(params.message)\n\t\t\t}, params);\n\n\t\t\tif (params.actorType === 'deleted_users') {\n\t\t\t\t// makes the avatar a X\n\t\t\t\tparams.actorId = null;\n\t\t\t\tparams.actorDisplayName = t('comments', '[Deleted user]');\n\t\t\t}\n\n\t\t\treturn OCA.Comments.Templates['comment'](params);\n\t\t},\n\n\t\tgetLabel: function() {\n\t\t\treturn t('comments', 'Comments');\n\t\t},\n\n\t\tgetIcon: function() {\n\t\t\treturn 'icon-comment';\n\t\t},\n\n\t\tsetFileInfo: function(fileInfo) {\n\t\t\tif (fileInfo) {\n\t\t\t\tthis.model = fileInfo;\n\n\t\t\t\tthis.render();\n\t\t\t\tthis._initAutoComplete($('#commentsTabView').find('.newCommentForm .message'));\n\t\t\t\tthis.collection.setObjectId(this.model.id);\n\t\t\t\t// reset to first page\n\t\t\t\tthis.collection.reset([], {silent: true});\n\t\t\t\tthis.nextPage();\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t\tthis.render();\n\t\t\t\tthis.collection.reset();\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this.template({\n\t\t\t\temptyResultLabel: t('comments', 'No comments yet, start the conversation!'),\n\t\t\t\tmoreLabel: t('comments', 'More comments ')\n\t\t\t}));\n\t\t\tthis.$el.find('.comments').before(this.editCommentTemplate({ tag: 'div'}));\n\t\t\tthis.$el.find('.has-tooltip').tooltip();\n\t\t\tthis.$container = this.$el.find('ul.comments');\n\t\t\tthis.$el.find('.avatar').avatar(OC.getCurrentUser().uid, 32);\n\t\t\tthis.delegateEvents();\n\t\t\tthis.$el.find('.message').on('keydown input change', this._onTypeComment);\n\n\t\t\tautosize(this.$el.find('.newCommentRow .message'))\n\t\t\tthis.$el.find('.newCommentForm .message').focus();\t\n\t\t},\n\n\t\t_initAutoComplete: function($target) {\n\t\t\tvar s = this;\n\t\t\tvar limit = 10;\n\t\t\tif(!_.isUndefined(OC.appConfig.comments)) {\n\t\t\t\tlimit = OC.appConfig.comments.maxAutoCompleteResults;\n\t\t\t}\n\t\t\t$target.atwho({\n\t\t\t\tat: '@',\n\t\t\t\tlimit: limit,\n\t\t\t\tcallbacks: {\n\t\t\t\t\tremoteFilter: s._onAutoComplete,\n\t\t\t\t\thighlighter: function (li) {\n\t\t\t\t\t\t// misuse the highlighter callback to instead of\n\t\t\t\t\t\t// highlighting loads the avatars.\n\t\t\t\t\t\tvar $li = $(li);\n\t\t\t\t\t\t$li.find('.avatar').avatar(undefined, 32);\n\t\t\t\t\t\treturn $li;\n\t\t\t\t\t},\n\t\t\t\t\tsorter: function (q, items) { return items; }\n\t\t\t\t},\n\t\t\t\tdisplayTpl: function (item) {\n\t\t\t\t\treturn '<li>' +\n\t\t\t\t\t\t'<span class=\"avatar-name-wrapper\">' +\n\t\t\t\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t\t\t\t'data-username=\"' + escapeHTML(item.id) + '\" ' + // for avatars\n\t\t\t\t\t\t\t\t\t'data-user=\"' + escapeHTML(item.id) + '\" ' + // for contactsmenu\n\t\t\t\t\t\t\t\t\t'data-user-display-name=\"' + escapeHTML(item.label) + '\">' +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'<strong>' + escapeHTML(item.label) + '</strong>' +\n\t\t\t\t\t\t'</span></li>';\n\t\t\t\t},\n\t\t\t\tinsertTpl: function (item) {\n\t\t\t\t\treturn '' +\n\t\t\t\t\t\t'<span class=\"avatar-name-wrapper\">' +\n\t\t\t\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t\t\t\t'data-username=\"' + escapeHTML(item.id) + '\" ' + // for avatars\n\t\t\t\t\t\t\t\t\t'data-user=\"' + escapeHTML(item.id) + '\" ' + // for contactsmenu\n\t\t\t\t\t\t\t\t\t'data-user-display-name=\"' + escapeHTML(item.label) + '\">' +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'<strong>' + escapeHTML(item.label) + '</strong>' +\n\t\t\t\t\t\t'</span>';\n\t\t\t\t},\n\t\t\t\tsearchKey: \"label\"\n\t\t\t});\n\t\t\t$target.on('inserted.atwho', function (je, $el) {\n\t\t\t\tvar editionMode = true;\n\t\t\t\ts._postRenderItem(\n\t\t\t\t\t// we need to pass the parent of the inserted element\n\t\t\t\t\t// passing the whole comments form would re-apply and request\n\t\t\t\t\t// avatars from the server\n\t\t\t\t\t$(je.target).find(\n\t\t\t\t\t\t'span[data-username=\"' + $el.find('[data-username]').data('username') + '\"]'\n\t\t\t\t\t).parent(),\n\t\t\t\t\teditionMode\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\t_onAutoComplete: function(query, callback) {\n\t\t\tvar s = this;\n\t\t\tif(!_.isUndefined(this._autoCompleteRequestTimer)) {\n\t\t\t\tclearTimeout(this._autoCompleteRequestTimer);\n\t\t\t}\n\t\t\tthis._autoCompleteRequestTimer = _.delay(function() {\n\t\t\t\tif(!_.isUndefined(this._autoCompleteRequestCall)) {\n\t\t\t\t\tthis._autoCompleteRequestCall.abort();\n\t\t\t\t}\n\t\t\t\tthis._autoCompleteRequestCall = $.ajax({\n\t\t\t\t\turl: OC.linkToOCS('core', 2) + 'autocomplete/get',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsearch: query,\n\t\t\t\t\t\titemType: 'files',\n\t\t\t\t\t\titemId: s.model.get('id'),\n\t\t\t\t\t\tsorter: 'commenters|share-recipients',\n\t\t\t\t\t\tlimit: OC.appConfig.comments.maxAutoCompleteResults\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function (request) {\n\t\t\t\t\t\trequest.setRequestHeader('Accept', 'application/json');\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (result) {\n\t\t\t\t\t\tcallback(result.ocs.data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 400);\n\t\t},\n\n\t\t_formatItem: function(commentModel) {\n\t\t\tvar timestamp = new Date(commentModel.get('creationDateTime')).getTime();\n\t\t\tvar data = _.extend({\n\t\t\t\ttimestamp: timestamp,\n\t\t\t\tdate: OC.Util.relativeModifiedDate(timestamp),\n\t\t\t\taltDate: OC.Util.formatDate(timestamp),\n\t\t\t\tformattedMessage: this._formatMessage(commentModel.get('message'), commentModel.get('mentions'))\n\t\t\t}, commentModel.attributes);\n\t\t\treturn data;\n\t\t},\n\n\t\t_toggleLoading: function(state) {\n\t\t\tthis._loading = state;\n\t\t\tthis.$el.find('.loading').toggleClass('hidden', !state);\n\t\t},\n\n\t\t_onRequest: function(type) {\n\t\t\tif (type === 'REPORT') {\n\t\t\t\tthis._toggleLoading(true);\n\t\t\t\tthis.$el.find('.showMore').addClass('hidden');\n\t\t\t}\n\t\t},\n\n\t\t_onEndRequest: function(type) {\n\t\t\tvar fileInfoModel = this.model;\n\t\t\tthis._toggleLoading(false);\n\t\t\tthis.$el.find('.emptycontent').toggleClass('hidden', !!this.collection.length);\n\t\t\tthis.$el.find('.showMore').toggleClass('hidden', !this.collection.hasMoreResults());\n\n\t\t\tif (type !== 'REPORT') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// find first unread comment\n\t\t\tvar firstUnreadComment = this.collection.findWhere({isUnread: true});\n\t\t\tif (firstUnreadComment) {\n\t\t\t\t// update read marker\n\t\t\t\tthis.collection.updateReadMarker(\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\tfileInfoModel.set('commentsUnread', 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.$el.find('.newCommentForm .message').focus();\t\n\t\t\t\n\t\t},\n\n\t\t/**\n\t\t * takes care of post-rendering after a new comment was added to the\n\t\t * collection\n\t\t *\n\t\t * @param model\n\t\t * @param collection\n\t\t * @param options\n\t\t * @private\n\t\t */\n\t\t_onAddModel: function(model, collection, options) {\n\t\t\t// we need to render it immediately, to ensure that the right\n\t\t\t// order of comments is kept on opening comments tab\n\t\t\tvar $comment = $(this.commentTemplate(this._formatItem(model)));\n\t\t\tif (!_.isUndefined(options.at) && collection.length > 1) {\n\t\t\t\tthis.$container.find('li').eq(options.at).before($comment);\n\t\t\t} else {\n\t\t\t\tthis.$container.append($comment);\n\t\t\t}\n\t\t\tthis._postRenderItem($comment);\n\t\t\t$('#commentsTabView').find('.newCommentForm div.message').text('').prop('contenteditable', true);\n\n\t\t\t// we need to update the model, because it consists of client data\n\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\tvar oldMentions = model.get('mentions');\n\t\t\tvar self = this;\n\t\t\tmodel.fetch({\n\t\t\t\tsuccess: function (model) {\n\t\t\t\t\tif(_.isEqual(oldMentions, model.get('mentions'))) {\n\t\t\t\t\t\t// don't attempt to render if unnecessary, avoids flickering\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar $updated = $(self.commentTemplate(self._formatItem(model)));\n\t\t\t\t\t$comment.html($updated.html());\n\t\t\t\t\tself._postRenderItem($comment);\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\t\t/**\n\t\t * takes care of post-rendering after a new comment was edited\n\t\t *\n\t\t * @param model\n\t\t * @private\n\t\t */\n\t\t_onChangeModel: function (model) {\n\t\t\tif(model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $form = this.$container.find('.comment[data-id=\"' + model.id + '\"] form');\n\t\t\tvar $row = $form.closest('.comment');\n\t\t\tvar $target = $row.data('commentEl');\n\t\t\tif(_.isUndefined($target)) {\n\t\t\t\t// ignore noise  this is only set after editing a comment and hitting post\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar self = this;\n\n\t\t\t// we need to update the model, because it consists of client data\n\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\tmodel.fetch({\n\t\t\t\tsuccess: function (model) {\n\t\t\t\t\t$target.removeClass('hidden');\n\t\t\t\t\t$row.remove();\n\n\t\t\t\t\tvar $message = $target.find('.message');\n\t\t\t\t\t$message\n\t\t\t\t\t\t.html(self._formatMessage(model.get('message'), model.get('mentions')))\n\t\t\t\t\t\t.find('.avatar')\n\t\t\t\t\t\t.each(function () { $(this).avatar(); });\n\t\t\t\t\tself._postRenderItem($message);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_postRenderItem: function($el, editionMode) {\n\t\t\t$el.find('.has-tooltip').tooltip();\n\t\t\tvar inlineAvatars = $el.find('.message .avatar');\n\t\t\tif ($($el.context).hasClass('message')) {\n\t\t\t\tinlineAvatars = $el.find('.avatar');\n\t\t\t}\n\t\t\tinlineAvatars.each(function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.avatar($this.attr('data-username'), 16);\n\t\t\t});\n\t\t\t$el.find('.authorRow .avatar').each(function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.avatar($this.attr('data-username'), 32);\n\t\t\t});\n\n\t\t\tvar username = $el.find('.avatar').data('username');\n\t\t\tif (username !== OC.getCurrentUser().uid) {\n\t\t\t\t$el.find('.authorRow .avatar, .authorRow .author').contactsMenu(\n\t\t\t\t\tusername, 0, $el.find('.authorRow'));\n\t\t\t}\n\n\t\t\tvar $message = $el.find('.message');\n\t\t\tif($message.length === 0) {\n\t\t\t\t// it is the case when writing a comment and mentioning a person\n\t\t\t\t$message = $el;\n\t\t\t}\n\n\n\t\t\tif (!editionMode) {\n\t\t\t\tvar self = this;\n\t\t\t\t// add the dropdown menu to display the edit and delete option\n\t\t\t\tvar modifyCommentMenu = new OCA.Comments.CommentsModifyMenu();\n\t\t\t\t$el.find('.authorRow').append(modifyCommentMenu.$el);\n\t\t\t\t$el.find('.more').on('click', _.bind(modifyCommentMenu.show, modifyCommentMenu));\n\n\t\t\t\tself.listenTo(modifyCommentMenu, 'select:menu-item-clicked', function(ev, action) {\n\t\t\t\t\tif (action === 'edit') {\n\t\t\t\t\t\tself._onClickEditComment(ev);\n\t\t\t\t\t} else if (action === 'delete') {\n\t\t\t\t\t\tself._onClickDeleteComment(ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._postRenderMessage($message, editionMode);\n\t\t},\n\n\t\t_postRenderMessage: function($el, editionMode) {\n\t\t\tif (editionMode) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$el.find('.avatar-name-wrapper').each(function() {\n\t\t\t\tvar $this = $(this);\n\t\t\t\tvar $avatar = $this.find('.avatar');\n\n\t\t\t\tvar user = $avatar.data('user');\n\t\t\t\tif (user !== OC.getCurrentUser().uid) {\n\t\t\t\t\t$this.contactsMenu(user, 0, $this);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Convert a message to be displayed in HTML,\n\t\t * converts newlines to <br> tags.\n\t\t */\n\t\t_formatMessage: function(message, mentions, editMode) {\n\t\t\tmessage = escapeHTML(message).replace(/\\n/g, '<br/>');\n\n\t\t\tfor(var i in mentions) {\n\t\t\t\tif(!mentions.hasOwnProperty(i)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar mention = '@' + mentions[i].mentionId;\n\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\tmention = _.escape('@\"' + mentions[i].mentionId + '\"');\n\t\t\t\t}\n\n\t\t\t\t// escape possible regex characters in the name\n\t\t\t\tmention = mention.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\t\t\t\tvar regex = new RegExp(\"(^|\\\\s)(\" + mention + \")\\\\b\", 'g');\n\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\tregex = new RegExp(\"(^|\\\\s)(\" + mention + \")\", 'g');\n\t\t\t\t}\n\n\t\t\t\tvar displayName = this._composeHTMLMention(mentions[i].mentionId, mentions[i].mentionDisplayName);\n\n\t\t\t\t// replace every mention either at the start of the input or after a whitespace\n\t\t\t\t// followed by a non-word character.\n\t\t\t\tmessage = message.replace(regex,\n\t\t\t\t\tfunction(match, p1) {\n\t\t\t\t\t\t// to  get number of whitespaces (0 vs 1) right\n\t\t\t\t\t\treturn p1+displayName;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(editMode !== true) {\n\t\t\t\tmessage = OCP.Comments.plainToRich(message);\n\t\t\t}\n\t\t\treturn message;\n\t\t},\n\n\t\t_composeHTMLMention: function(uid, displayName) {\n\t\t\tvar avatar = '' +\n\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t'data-username=\"' + _.escape(uid) + '\" ' +\n\t\t\t\t\t\t'data-user=\"' + _.escape(uid) + '\" ' +\n\t\t\t\t\t\t'data-user-display-name=\"' + _.escape(displayName) + '\">' +\n\t\t\t\t'</span>';\n\n\t\t\tvar isCurrentUser = (uid === OC.getCurrentUser().uid);\n\n\t\t\treturn '' +\n\t\t\t\t'<span class=\"atwho-inserted\" contenteditable=\"false\">' +\n\t\t\t\t\t'<span class=\"avatar-name-wrapper' + (isCurrentUser ? ' currentUser' : '') + '\">' +\n\t\t\t\t\t\tavatar +\n\t\t\t\t\t\t'<strong>' + _.escape(displayName) + '</strong>' +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</span>';\n\t\t},\n\n\t\tnextPage: function() {\n\t\t\tif (this._loading || !this.collection.hasMoreResults()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.collection.fetchNext();\n\t\t},\n\n\t\t_onClickEditComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $comment = $(ev.target).closest('.comment');\n\t\t\tvar commentId = $comment.data('id');\n\t\t\tvar commentToEdit = this.collection.get(commentId);\n\t\t\tvar $formRow = $(this.editCommentTemplate(_.extend({\n\t\t\t\tisEditMode: true,\n\t\t\t\tsubmitText: t('comments', 'Save')\n\t\t\t}, commentToEdit.attributes)));\n\n\t\t\t$comment.addClass('hidden').removeClass('collapsed');\n\t\t\t// spawn form\n\t\t\t$comment.after($formRow);\n\t\t\t$formRow.data('commentEl', $comment);\n\t\t\t$formRow.find('.message').on('keydown input change', this._onTypeComment);\n\n\t\t\t// copy avatar element from original to avoid flickering\n\t\t\t$formRow.find('.avatar:first').replaceWith($comment.find('.avatar:first').clone());\n\t\t\t$formRow.find('.has-tooltip').tooltip();\n\n\t\t\tvar $message = $formRow.find('.message');\n\t\t\t$message\n\t\t\t\t.html(this._formatMessage(commentToEdit.get('message'), commentToEdit.get('mentions'), true))\n\t\t\t\t.find('.avatar')\n\t\t\t\t.each(function () { $(this).avatar(); });\n\t\t\tvar editionMode = true;\n\t\t\tthis._postRenderItem($message, editionMode);\n\n\t\t\t// Enable autosize\n\t\t\tautosize($formRow.find('.message'));\n\n\t\t\t// enable autocomplete\n\t\t\tthis._initAutoComplete($formRow.find('.message'));\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_onTypeComment: function(ev) {\n\t\t\tvar $field = $(ev.target);\n\t\t\tvar len = $field.text().length;\n\t\t\tvar $submitButton = $field.data('submitButtonEl');\n\t\t\tif (!$submitButton) {\n\t\t\t\t$submitButton = $field.closest('form').find('.submit');\n\t\t\t\t$field.data('submitButtonEl', $submitButton);\n\t\t\t}\n\t\t\t$field.tooltip('hide');\n\t\t\tif (len > this._commentMaxThreshold) {\n\t\t\t\t$field.attr('data-original-title', t('comments', 'Allowed characters {count} of {max}', {count: len, max: this._commentMaxLength}));\n\t\t\t\t$field.tooltip({trigger: 'manual'});\n\t\t\t\t$field.tooltip('show');\n\t\t\t\t$field.addClass('error');\n\t\t\t}\n\n\t\t\tvar limitExceeded = (len > this._commentMaxLength);\n\t\t\t$field.toggleClass('error', limitExceeded);\n\t\t\t$submitButton.prop('disabled', limitExceeded);\n\n\t\t\t// Submits form with Enter, but Shift+Enter is a new line. If the\n\t\t\t// autocomplete popover is being shown Enter does not submit the\n\t\t\t// form either; it will be handled by At.js which will add the\n\t\t\t// currently selected item to the message.\n\t\t\tif (ev.keyCode === 13 && !ev.shiftKey && !$field.atwho('isSelecting')) {\n\t\t\t\t$submitButton.click();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_onClickComment: function(ev) {\n\t\t\tvar $row = $(ev.target);\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment');\n\t\t\t}\n\t\t\t$row.removeClass('collapsed');\n\t\t},\n\n\t\t_onClickCloseComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $row = $(ev.target).closest('.comment');\n\t\t\t$row.data('commentEl').removeClass('hidden');\n\t\t\t$row.remove();\n\t\t\treturn false;\n\t\t},\n\n\t\t_onClickDeleteComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $comment = $(ev.target).closest('.comment');\n\t\t\tvar commentId = $comment.data('id');\n\t\t\tvar $loading = $comment.find('.deleteLoading');\n\t\t\tvar $moreIcon = $comment.find('.more');\n\n\t\t\t$comment.addClass('disabled');\n\t\t\t$loading.removeClass('hidden');\n\t\t\t$moreIcon.addClass('hidden');\n\n\t\t\t$comment.data('commentEl', $comment);\n\n\t\t\tthis.collection.get(commentId).destroy({\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$comment.data('commentEl').remove();\n\t\t\t\t\t$comment.remove();\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$moreIcon.removeClass('hidden');\n\t\t\t\t\t$comment.removeClass('disabled');\n\n\t\t\t\t\tOC.Notification.showTemporary(t('comments', 'Error occurred while retrieving comment with ID {id}', {id: commentId}));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_onClickShowMore: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tthis.nextPage();\n\t\t},\n\n\t\t/**\n\t\t * takes care of updating comment element states after submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {OC.Backbone.Model} model\n\t\t * @param {jQuery} $form\n\t\t * @private\n\t\t */\n\t\t_onSubmitSuccess: function(model, $form) {\n\t\t\tvar $submit = $form.find('.submit');\n\t\t\tvar $loading = $form.find('.submitLoading');\n\n\t\t\t$submit.removeClass('hidden');\n\t\t\t$loading.addClass('hidden');\n\t\t},\n\n\t\t_commentBodyHTML2Plain: function($el) {\n\t\t\tvar $comment = $el.clone();\n\n\t\t\t$comment.find('.avatar-name-wrapper').each(function () {\n\t\t\t\tvar $this = $(this),\n\t\t\t\t\t$inserted = $this.parent(),\n\t\t\t\t\tuserId = $this.find('.avatar').data('username');\n\t\t\t\tif (userId.indexOf(' ') !== -1) {\n\t\t\t\t\t$inserted.html('@\"' + userId + '\"');\n\t\t\t\t} else {\n\t\t\t\t\t$inserted.html('@' + userId);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$comment.html(OCP.Comments.richToPlain($comment.html()));\n\n\t\t\tvar oldHtml;\n\t\t\tvar html = $comment.html();\n\t\t\tdo {\n\t\t\t\t// replace works one by one\n\t\t\t\toldHtml = html;\n\t\t\t\thtml = oldHtml.replace(\"<br>\", \"\\n\");\t// preserve line breaks\n\t\t\t} while(oldHtml !== html);\n\t\t\t$comment.html(html);\n\n\t\t\treturn $comment.text();\n\t\t},\n\n\t\t_onSubmitComment: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar $form = $(e.target);\n\t\t\tvar commentId = $form.closest('.comment').data('id');\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\tvar $submit = $form.find('.submit');\n\t\t\tvar $loading = $form.find('.submitLoading');\n\t\t\tvar $commentField = $form.find('.message');\n\t\t\tvar message = $commentField.text().trim();\n\t\t\te.preventDefault();\n\n\t\t\tif (!message.length || message.length > this._commentMaxLength) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$commentField.prop('contenteditable', false);\n\t\t\t$submit.addClass('hidden');\n\t\t\t$loading.removeClass('hidden');\n\n\t\t\tmessage = this._commentBodyHTML2Plain($commentField);\n\t\t\tif (commentId) {\n\t\t\t\t// edit mode\n\t\t\t\tvar comment = this.collection.get(commentId);\n\t\t\t\tcomment.save({\n\t\t\t\t\tmessage: message\n\t\t\t\t}, {\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tself._onSubmitSuccess(model, $form);\n\t\t\t\t\t\tif(model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\t\t\t\t// model change event doesn't trigger, manually remove the row.\n\t\t\t\t\t\t\tvar $row = $form.closest('.comment');\n\t\t\t\t\t\t\t$row.data('commentEl').removeClass('hidden');\n\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tself._onSubmitError($form, commentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.collection.create({\n\t\t\t\t\tactorId: currentUser.uid,\n\t\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\t\tactorType: 'users',\n\t\t\t\t\tverb: 'comment',\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tcreationDateTime: (new Date()).toUTCString()\n\t\t\t\t}, {\n\t\t\t\t\tat: 0,\n\t\t\t\t\t// wait for real creation before adding\n\t\t\t\t\twait: true,\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tself._onSubmitSuccess(model, $form);\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tself._onSubmitError($form, undefined);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * takes care of updating the UI after an error on submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {jQuery} $form\n\t\t * @param {string|undefined} commentId\n\t\t * @private\n\t\t */\n\t\t_onSubmitError: function($form, commentId) {\n\t\t\t$form.find('.submit').removeClass('hidden');\n\t\t\t$form.find('.submitLoading').addClass('hidden');\n\t\t\t$form.find('.message').prop('contenteditable', true);\n\n\t\t\tif(!_.isUndefined(commentId)) {\n\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while updating comment with id {id}', {id: commentId}), {type: 'error'});\n\t\t\t} else {\n\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while posting comment'), {type: 'error'});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * ensures the contenteditable div is really empty, when user removed\n\t\t * all input, so that the placeholder will be shown again\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_onTextChange: function() {\n\t\t\tvar $message = $('#commentsTabView').find('.newCommentForm div.message');\n\t\t\tif(!$message.text().trim().length) {\n\t\t\t\t$message.empty();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Limit pasting to plain text\n\t\t *\n\t\t * @param e\n\t\t * @private\n\t\t */\n\t\t_onPaste: function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar text = e.originalEvent.clipboardData.getData(\"text/plain\");\n\t\t\tdocument.execCommand('insertText', false, text);\n\t\t},\n\n\t\t/**\n\t\t * Returns whether the given message is long and needs\n\t\t * collapsing\n\t\t */\n\t\t_isLong: function(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1;\n\t\t}\n\t});\n\n\tOCA.Comments.CommentsTabView = CommentsTabView;\n})(OC, OCA);\n","/*\n * Copyright (c) 2018\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n(function() {\n\n\t/**\n\t * Construct a new CommentsModifyMenuinstance\n\t * @constructs CommentsModifyMenu\n\t * @memberof OC.Comments\n\t * @private\n\t */\n\tvar CommentsModifyMenu = OC.Backbone.View.extend({\n\t\ttagName: 'div',\n\t\tclassName: 'commentsModifyMenu popovermenu bubble menu',\n\t\t_scopes: [\n\t\t\t{\n\t\t\t\tname: 'edit',\n\t\t\t\tdisplayName:  t('comments', 'Edit comment'),\n\t\t\t\ticonClass: 'icon-rename'\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'delete',\n\t\t\t\tdisplayName: t('comments', 'Delete comment'),\n\t\t\t\ticonClass: 'icon-delete'\n\t\t\t}\n\t\t],\n\t\tinitialize: function() {\n\n\t\t},\n\t\tevents: {\n\t\t\t'click a.action': '_onClickAction'\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever an action has been clicked within the menu\n\t\t *\n\t\t * @param {Object} event event object\n\t\t */\n\t\t_onClickAction: function(event) {\n\t\t\tvar $target = $(event.currentTarget);\n\t\t\tif (!$target.hasClass('menuitem')) {\n\t\t\t\t$target = $target.closest('.menuitem');\n\t\t\t}\n\n\t\t\tOC.hideMenus();\n\n\t\t\tthis.trigger('select:menu-item-clicked', event, $target.data('action'));\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu with the currently set items\n\t\t */\n\t\trender: function() {\n\t\t\tthis.$el.html(OCA.Comments.Templates['commentsmodifymenu']({\n\t\t\t\titems: this._scopes\n\t\t\t}));\n\t\t},\n\n\t\t/**\n\t\t * Displays the menu\n\t\t */\n\t\tshow: function(context) {\n\t\t\tthis._context = context;\n\n\t\t\tfor(var i in this._scopes) {\n\t\t\t\tthis._scopes[i].active = false;\n\t\t\t}\n\n\n\t\t\tvar $el = $(context.target);\n\t\t\tvar offsetIcon = $el.offset();\n\t\t\tvar offsetContainer = $el.closest('.authorRow').offset();\n\n\t\t\t// adding some extra top offset to push the menu below the button.\n\t\t\tvar position = {\n\t\t\t\ttop: offsetIcon.top - offsetContainer.top + 48,\n\t\t\t\tleft: '',\n\t\t\t\tright: ''\n\t\t\t};\n\n\t\t\tposition.left = offsetIcon.left - offsetContainer.left;\n\n\t\t\tif (position.left > 200) {\n\t\t\t\t// we need to position the menu to the right.\n\t\t\t\tposition.left = '';\n\t\t\t\tposition.right = this.$el.closest('.comment').find('.date').width();\n\t\t\t\tthis.$el.removeClass('menu-left').addClass('menu-right');\n\t\t\t} else {\n\t\t\t\tthis.$el.removeClass('menu-right').addClass('menu-left');\n\t\t\t}\n\t\t\tthis.$el.css(position);\n\t\t\tthis.render();\n\t\t\tthis.$el.removeClass('hidden');\n\n\t\t\tOC.showMenu(null, this.$el);\n\t\t}\n\t});\n\n\tOCA.Comments = OCA.Comments || {};\n\tOCA.Comments.CommentsModifyMenu = CommentsModifyMenu;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n\n(function() {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_COMMENTS_UNREAD:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}comments-unread'\n\t});\n\n\tOCA.Comments = _.extend({}, OCA.Comments);\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {};\n\t}\n\n\t/**\n\t * @namespace\n\t */\n\tOCA.Comments.FilesPlugin = {\n\t\tignoreLists: [\n\t\t\t'trashbin',\n\t\t\t'files.public'\n\t\t],\n\n\t\t_formatCommentCount: function(count) {\n\t\t\treturn OCA.Comments.Templates['filesplugin']({\n\t\t\t\tcount: count,\n\t\t\t\tcountMessage: n('comments', '%n unread comment', '%n unread comments', count),\n\t\t\t\ticonUrl: OC.imagePath('core', 'actions/comment')\n\t\t\t});\n\t\t},\n\n\t\tattach: function(fileList) {\n\t\t\tvar self = this;\n\t\t\tif (this.ignoreLists.indexOf(fileList.id) >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfileList.registerTabView(new OCA.Comments.CommentsTabView('commentsTabView'));\n\n\t\t\tvar oldGetWebdavProperties = fileList._getWebdavProperties;\n\t\t\tfileList._getWebdavProperties = function() {\n\t\t\t\tvar props = oldGetWebdavProperties.apply(this, arguments);\n\t\t\t\tprops.push(OC.Files.Client.PROPERTY_COMMENTS_UNREAD);\n\t\t\t\treturn props;\n\t\t\t};\n\n\t\t\tfileList.filesClient.addFileInfoParser(function(response) {\n\t\t\t\tvar data = {};\n\t\t\t\tvar props = response.propStat[0].properties;\n\t\t\t\tvar commentsUnread = props[OC.Files.Client.PROPERTY_COMMENTS_UNREAD];\n\t\t\t\tif (!_.isUndefined(commentsUnread) && commentsUnread !== '') {\n\t\t\t\t\tdata.commentsUnread = parseInt(commentsUnread, 10);\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t});\n\n\t\t\tfileList.$el.addClass('has-comments');\n\t\t\tvar oldCreateRow = fileList._createRow;\n\t\t\tfileList._createRow = function(fileData) {\n\t\t\t\tvar $tr = oldCreateRow.apply(this, arguments);\n\t\t\t\tif (fileData.commentsUnread) {\n\t\t\t\t\t$tr.attr('data-comments-unread', fileData.commentsUnread);\n\t\t\t\t}\n\t\t\t\treturn $tr;\n\t\t\t};\n\n\t\t\t// register \"comment\" action for reading comments\n\t\t\tfileList.fileActions.registerAction({\n\t\t\t\tname: 'Comment',\n\t\t\t\tdisplayName: function(context) {\n\t\t\t\t\tif (context && context.$file) {\n\t\t\t\t\t\tvar unread = parseInt(context.$file.data('comments-unread'), 10)\n\t\t\t\t\t\tif (unread >= 0) {\n\t\t\t\t\t\t\treturn n('comments', '1 new comment', '{unread} new comments', unread, { unread: unread })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn t('comments', 'Comment')\n\t\t\t\t},\n\t\t\t\tmime: 'all',\n\t\t\t\torder: -140,\n\t\t\t\ticonClass: 'icon-comment',\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ttype: OCA.Files.FileActions.TYPE_INLINE,\n\t\t\t\trender: function(actionSpec, isDefault, context) {\n\t\t\t\t\tvar $file = context.$file;\n\t\t\t\t\tvar unreadComments = $file.data('comments-unread');\n\t\t\t\t\tif (unreadComments) {\n\t\t\t\t\t\tvar $actionLink = $(self._formatCommentCount(unreadComments));\n\t\t\t\t\t\tcontext.$file.find('a.name>span.fileactions').append($actionLink);\n\t\t\t\t\t\treturn $actionLink;\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tactionHandler: function(fileName, context) {\n\t\t\t\t\tcontext.$file.find('.action-comment').tooltip('hide');\n\t\t\t\t\t// open sidebar in comments section\n\t\t\t\t\tcontext.fileList.showDetailsView(fileName, 'commentsTabView');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// add attribute to \"elementToFile\"\n\t\t\tvar oldElementToFile = fileList.elementToFile;\n\t\t\tfileList.elementToFile = function($el) {\n\t\t\t\tvar fileInfo = oldElementToFile.apply(this, arguments);\n\t\t\t\tvar commentsUnread = $el.data('comments-unread');\n\t\t\t\tif (commentsUnread) {\n\t\t\t\t\tfileInfo.commentsUnread = commentsUnread;\n\t\t\t\t}\n\t\t\t\treturn fileInfo;\n\t\t\t};\n\t\t}\n\t};\n\n})();\n\nOC.Plugins.register('OCA.Files.FileList', OCA.Comments.FilesPlugin);\n","/*\n * @author Joas Schilling <coding@schilljs.com>\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n */\n\n(function() {\n\tOCA.Comments.ActivityTabViewPlugin = {\n\n\t\t/**\n\t\t * Prepare activity for display\n\t\t *\n\t\t * @param {OCA.Activity.ActivityModel} model for this activity\n\t\t * @param {jQuery} $el jQuery handle for this activity\n\t\t * @param {string} view The view that displayes this activity\n\t\t */\n\t\tprepareModelForDisplay: function (model, $el, view) {\n\t\t\tif (model.get('app') !== 'comments' || model.get('type') !== 'comments') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (view === 'ActivityTabView') {\n\t\t\t\t$el.addClass('comment');\n\t\t\t\tif (model.get('message') && this._isLong(model.get('message'))) {\n\t\t\t\t\t$el.addClass('collapsed');\n\t\t\t\t\tvar $overlay = $('<div>').addClass('message-overlay');\n\t\t\t\t\t$el.find('.activitymessage').after($overlay);\n\t\t\t\t\t$el.on('click', this._onClickCollapsedComment);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._onClickComment()\n\t\t */\n\t\t_onClickCollapsedComment: function(ev) {\n\t\t\tvar $row = $(ev.target);\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment');\n\t\t\t}\n\t\t\t$row.removeClass('collapsed');\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._isLong()\n\t\t */\n\t\t_isLong: function(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1;\n\t\t}\n\t};\n\n\n})();\n\nOC.Plugins.register('OCA.Activity.RenderingPlugins', OCA.Comments.ActivityTabViewPlugin);\n","/*\n * Copyright (c) 2014\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n(function(OC, OCA, $) {\n\t\"use strict\";\n\n\t/**\n\t * Construct a new FileActions instance\n\t * @constructs Files\n\t */\n\tvar Comment = function() {\n\t\tthis.initialize();\n\t};\n\n\tComment.prototype = {\n\n\t\tfileList: null,\n\n\t\t/**\n\t\t * Initialize the file search\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tthis.fileAppLoaded = function() {\n\t\t\t\treturn !!OCA.Files && !!OCA.Files.App;\n\t\t\t};\n\t\t\tfunction inFileList($row, result) {\n\t\t\t\treturn false;\n\n\t\t\t\tif (! self.fileAppLoaded()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar dir = self.fileList.getCurrentDirectory().replace(/\\/+$/,'');\n\t\t\t\tvar resultDir = OC.dirname(result.path);\n\t\t\t\treturn dir === resultDir && self.fileList.inList(result.name);\n\t\t\t}\n\t\t\tfunction hideNoFilterResults() {\n\t\t\t\tvar $nofilterresults = $('.nofilterresults');\n\t\t\t\tif ( ! $nofilterresults.hasClass('hidden') ) {\n\t\t\t\t\t$nofilterresults.addClass('hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t *\n\t\t\t * @param {jQuery} $row\n\t\t\t * @param {Object} result\n\t\t\t * @param {int} result.id\n\t\t\t * @param {string} result.comment\n\t\t\t * @param {string} result.authorId\n\t\t\t * @param {string} result.authorName\n\t\t\t * @param {string} result.link\n\t\t\t * @param {string} result.fileName\n\t\t\t * @param {string} result.path\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tthis.renderCommentResult = function($row, result) {\n\t\t\t\tif (inFileList($row, result)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\thideNoFilterResults();\n\t\t\t\t/*render preview icon, show path beneath filename,\n\t\t\t\t show size and last modified date on the right */\n\t\t\t\tthis.updateLegacyMimetype(result);\n\n\t\t\t\tvar $pathDiv = $('<div>').addClass('path').text(result.path);\n\n\t\t\t\tvar $avatar = $('<div>');\n\t\t\t\t$avatar.addClass('avatar')\n\t\t\t\t\t.css('display', 'inline-block')\n\t\t\t\t\t.css('vertical-align', 'middle')\n\t\t\t\t\t.css('margin', '0 5px 2px 3px');\n\n\t\t\t\tif (result.authorName) {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21, undefined, false, undefined, result.authorName);\n\t\t\t\t} else {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21);\n\t\t\t\t}\n\n\t\t\t\t$row.find('td.info div.name').after($pathDiv).text(result.comment).prepend($('<span>').addClass('path').css('margin-right', '5px').text(result.authorName)).prepend($avatar);\n\t\t\t\t$row.find('td.result a').attr('href', result.link);\n\n\t\t\t\t$row.find('td.icon')\n\t\t\t\t\t.css('background-image', 'url(' + OC.imagePath('core', 'actions/comment') + ')')\n\t\t\t\t\t.css('opacity', '.4');\n\t\t\t\tvar dir = OC.dirname(result.path);\n\t\t\t\t// \"result.path\" does not include a leading \"/\", so \"OC.dirname\"\n\t\t\t\t// returns the path itself for files or folders in the root.\n\t\t\t\tif (dir === result.path) {\n\t\t\t\t\tdir = '/';\n\t\t\t\t}\n\t\t\t\t$row.find('td.info a').attr('href',\n\t\t\t\t\tOC.generateUrl('/apps/files/?dir={dir}&scrollto={scrollto}', {dir: dir, scrollto: result.fileName})\n\t\t\t\t);\n\n\t\t\t\treturn $row;\n\t\t\t};\n\n\t\t\tthis.handleCommentClick = function($row, result, event) {\n\t\t\t\tif (self.fileAppLoaded() && self.fileList.id === 'files') {\n\t\t\t\t\tself.fileList.changeDirectory(OC.dirname(result.path));\n\t\t\t\t\tself.fileList.scrollTo(result.name);\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.updateLegacyMimetype = function (result) {\n\t\t\t\t// backward compatibility:\n\t\t\t\tif (!result.mime && result.mime_type) {\n\t\t\t\t\tresult.mime = result.mime_type;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.setFileList = function (fileList) {\n\t\t\t\tthis.fileList = fileList;\n\t\t\t};\n\n\t\t\tOC.Plugins.register('OCA.Search.Core', this);\n\t\t},\n\t\tattach: function(search) {\n\t\t\tsearch.setRenderer('comment', this.renderCommentResult.bind(this));\n\t\t\tsearch.setHandler('comment', this.handleCommentClick.bind(this));\n\t\t}\n\t};\n\n\tOCA.Search.comment = new Comment();\n})(OC, OCA, $);\n","/*! jquery.caret 2015-02-01 */\n!function(a,b){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(c){return a.returnExportsGlobal=b(c)}):\"object\"==typeof exports?module.exports=b(require(\"jquery\")):b(jQuery)}(this,function(a){\"use strict\";var b,c,d,e,f,g,h,i,j,k,l;k=\"caret\",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(){return this.domInputor},b.prototype.getIEPosition=function(){return this.getPosition()},b.prototype.getPosition=function(){var a,b;return b=this.getOffset(),a=this.$inputor.offset(),b.left-=a.left,b.top-=a.top,b},b.prototype.getOldIEPos=function(){var a,b;return b=h.selection.createRange(),a=h.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint(\"EndToEnd\",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):h.selection?this.getOldIEPos():void 0},b.prototype.getOldIEOffset=function(){var a,b;return a=h.selection.createRange().duplicate(),a.moveStart(\"character\",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(){var b,c,d,e,f;return j.getSelection&&(d=this.range())?(d.endOffset-1>0&&d.endContainer===!this.domInputor&&(b=d.cloneRange(),b.setStart(d.endContainer,d.endOffset-1),b.setEnd(d.endContainer,d.endOffset),e=b.getBoundingClientRect(),c={height:e.height,left:e.left+e.width,top:e.top},b.detach()),c&&0!==(null!=c?c.height:void 0)||(b=d.cloneRange(),f=a(h.createTextNode(\"|\")),b.insertNode(f[0]),b.selectNode(f[0]),e=b.getBoundingClientRect(),c={height:e.height,left:e.left,top:e.top},f.remove(),b.detach())):h.selection&&(c=this.getOldIEOffset()),c&&(c.top+=a(j).scrollTop(),c.left+=a(j).scrollLeft()),c},b.prototype.range=function(){var a;if(j.getSelection)return a=j.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=h.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\\r\\n/g,\"\\n\"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints(\"StartToEnd\",a)>-1?c:-g.moveStart(\"character\",-c)),e},b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,h.selection?(c=b.createTextRange(),c.move(\"character\",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},b.prototype.getIEOffset=function(a){var b,c,d,e;return c=this.domInputor.createTextRange(),a||(a=this.getPos()),c.move(\"character\",a),d=c.boundingLeft,e=c.boundingTop,b=c.boundingHeight,{left:d,top:e,height:b}},b.prototype.getOffset=function(b){var c,d,e;return c=this.$inputor,h.selection?(d=this.getIEOffset(b),d.top+=a(j).scrollTop()+c.scrollTop(),d.left+=a(j).scrollLeft()+c.scrollLeft(),d):(d=c.offset(),e=this.getPosition(b),d={left:d.left+e.left-c.scrollLeft(),top:d.top+e.top-c.scrollTop(),height:e.height})},b.prototype.getPosition=function(a){var b,c,e,f,g,h,i;return b=this.$inputor,f=function(a){return a=a.replace(/<|>|`|\"|&/g,\"?\").replace(/\\r\\n|\\r|\\n/g,\"<br/>\"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\\s/g,\"&nbsp;\")),a},void 0===a&&(a=this.getPos()),i=b.val().slice(0,a),e=b.val().slice(a),g=\"<span style='position: relative; display: inline;'>\"+f(i)+\"</span>\",g+=\"<span id='caret' style='position: relative; display: inline;'>|</span>\",g+=\"<span style='position: relative; display: inline;'>\"+f(e)+\"</span>\",h=new d(b),c=h.create(g).rect()},b.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},b}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=[\"borderBottomWidth\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderLeftStyle\",\"borderTopWidth\",\"boxSizing\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"height\",\"letterSpacing\",\"lineHeight\",\"marginBottom\",\"marginLeft\",\"marginRight\",\"marginTop\",\"outlineWidth\",\"overflow\",\"overflowX\",\"overflowY\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"paddingTop\",\"textAlign\",\"textOverflow\",\"textTransform\",\"whiteSpace\",\"wordBreak\",\"wordWrap\"],b.prototype.mirrorCss=function(){var b,c=this;return b={position:\"absolute\",left:-9999,top:0,zIndex:-2e4},\"TEXTAREA\"===this.$inputor.prop(\"tagName\")&&this.css_attr.push(\"width\"),a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a(\"<div></div>\"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find(\"#caret\"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),e={contentEditable:function(a){return!(!a[0].contentEditable||\"true\"!==a[0].contentEditable)}},g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){var b;return b=this.getOffset(a)}},h=null,j=null,i=null,l=function(a){var b;return(b=null!=a?a.iframe:void 0)?(i=b,j=b.contentWindow,h=b.contentDocument||j.document):(i=void 0,j=window,h=document)},f=function(a){var b;h=a[0].ownerDocument,j=h.defaultView||h.parentWindow;try{return i=j.frameElement}catch(c){b=c}},a.fn.caret=function(d,f,h){var i;return g[d]?(a.isPlainObject(f)?(l(f),f=void 0):l(h),i=e.contentEditable(this)?new b(this):new c(this),g[d].apply(i,[f])):a.error(\"Method \"+d+\" does not exist on jQuery.caret\")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=g});","!function(t,e){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return e(t)}):\"object\"==typeof exports?module.exports=e(require(\"jquery\")):e(jQuery)}(this,function(t){var e,i;i={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return r.arrayToDefaultHash(t)},matcher:function(t,e,i,n){var r,o,s,a,h;return t=t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"),i&&(t=\"(?:^|\\\\s)\"+t),r=decodeURI(\"%C3%80\"),o=decodeURI(\"%C3%BF\"),h=n?\" \":\"\",a=new RegExp(t+\"([A-Za-z\"+r+\"-\"+o+\"0-9_\"+h+\"'.+-]*)$|\"+t+\"([^\\\\x00-\\\\xff]*)$\",\"gi\"),s=a.exec(e),s?s[2]||s[1]:null},filter:function(t,e,i){var n,r,o,s;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],~new String(o[i]).toLowerCase().indexOf(t.toLowerCase())&&n.push(o);return n},remoteFilter:null,sorter:function(t,e,i){var n,r,o,s;if(!t)return e;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],o.atwho_order=new String(o[i]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&n.push(o);return n.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var i,n,r;r=t;try{return\"string\"!=typeof t&&(r=t(e)),r.replace(/\\$\\{([^\\}]*)\\}/g,function(t,i,n){return e[i]})}catch(n){return i=n,\"\"}},highlighter:function(t,e){var i;return e?(i=new RegExp(\">\\\\s*([^<]*?)(\"+e.replace(\"+\",\"\\\\+\")+\")([^<]*)\\\\s*<\",\"ig\"),t.replace(i,function(t,e,i,n){return\"> \"+e+\"<strong>\"+i+\"</strong>\"+n+\" <\"})):t},beforeInsert:function(t,e,i){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}};var n;n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var i;return null!=(i=this.$el)&&i.remove(),t(e.body).append(this.$el=t(\"<div class='atwho-container'></div>\"))},e.prototype.setupRootElement=function(e,i){var n,r;if(null==i&&(i=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(r){if(n=r,this.iframe=null,t.fn.atwho.debug)throw new Error(\"iframe auto-discovery is failed.\\nPlease use `setIframe` to set the target iframe manually.\\n\"+n)}}return this.createContainer((this.iframeAsRoot=i)?this.document:document)},e.prototype.controller=function(t){var e,i,n,r;if(this.aliasMaps[t])i=this.controllers[this.aliasMaps[t]];else{r=this.controllers;for(n in r)if(e=r[n],n===t){i=e;break}}return i?i:this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var i,n;return n=(i=this.controllers)[t]||(i[t]=this.$inputor.is(\"[contentEditable]\")?new l(this,t):new s(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on(\"compositionstart\",function(t){return function(e){var i;return null!=(i=t.controller())&&i.view.hide(),t.isComposing=!0,null}}(this)).on(\"compositionend\",function(t){return function(e){return t.isComposing=!1,setTimeout(function(e){return t.dispatch(e)}),null}}(this)).on(\"keyup.atwhoInner\",function(t){return function(e){return t.onKeyup(e)}}(this)).on(\"keydown.atwhoInner\",function(t){return function(e){return t.onKeydown(e)}}(this)).on(\"blur.atwhoInner\",function(t){return function(e){var i;return(i=t.controller())?(i.expectedQueryCBId=null,i.view.hide(e,i.getOpt(\"displayTimeout\"))):void 0}}(this)).on(\"click.atwhoInner\",function(t){return function(e){return t.dispatch(e)}}(this)).on(\"scroll.atwhoInner\",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(i){var n,r;return n=i.target.scrollTop,e!==n&&null!=(r=t.controller())&&r.view.hide(i),e=n,!0}}}(this)())},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(\".atwhoInner\"),this.$el.remove()},e.prototype.dispatch=function(t){var e,i,n,r;n=this.controllers,r=[];for(e in n)i=n[e],r.push(i.lookUp(t));return r},e.prototype.onKeyup=function(e){var n;switch(e.keyCode){case i.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case i.DOWN:case i.UP:case i.CTRL:case i.ENTER:t.noop();break;case i.P:case i.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var n,r;if(r=null!=(n=this.controller())?n.view:void 0,r&&r.visible())switch(e.keyCode){case i.ESC:e.preventDefault(),r.hide(e);break;case i.UP:e.preventDefault(),r.prev();break;case i.DOWN:e.preventDefault(),r.next();break;case i.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case i.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case i.TAB:case i.ENTER:case i.SPACE:if(!r.visible())return;if(!this.controller().getOpt(\"spaceSelectsMatch\")&&e.keyCode===i.SPACE)return;if(!this.controller().getOpt(\"tabSelectsMatch\")&&e.keyCode===i.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var r,o=[].slice;r=function(){function i(e,i){this.app=e,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t(\"#atwho-ground-\"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t(\"<div id='atwho-ground-\"+this.id+\"'></div>\")),this.model=new u(this),this.view=new c(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+\"000000000\").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho[\"default\"],e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger(\"beforeDestroy\"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.callDefault=function(){var i,n,r,s;s=arguments[0],i=2<=arguments.length?o.call(arguments,1):[];try{return e[s].apply(this,i)}catch(r){return n=r,t.error(n+\" Or maybe At.js doesn't have function \"+s)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.getOpt(\"alias\"),n=i?t+\"-\"+i+\".atwho\":t+\".atwho\",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.getOpt(\"callbacks\")[t]||e[t]},i.prototype.getOpt=function(t,e){var i,n;try{return this.setting[t]}catch(n){return i=n,null}},i.prototype.insertContentFor=function(e){var i,n;return n=this.getOpt(\"insertTpl\"),i=t.extend({},e.data(\"item-data\"),{\"atwho-at\":this.at}),this.callbacks(\"tplEval\").call(this,n,i,\"onInsert\")},i.prototype.renderView=function(t){var e;return e=this.getOpt(\"searchKey\"),t=this.callbacks(\"sorter\").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt(\"limit\")))},i.arrayToDefaultHash=function(e){var i,n,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],t.isPlainObject(n)?o.push(n):o.push({name:n});return o},i.prototype.lookUp=function(t){var e,i;if((!t||\"click\"!==t.type||this.getOpt(\"lookUpOnClick\"))&&(!this.getOpt(\"suspendOnComposing\")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(i=this.getOpt(\"delay\"))?this._delayLookUp(e,i):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},i.prototype._delayLookUp=function(t,e){var i,n;return i=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=i),n=e-(i-this.previousCallTime),n>0&&e>n?(this.previousCallTime=i,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==i&&(this.previousCallTime=0),this._lookUp(t))},i.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},i.prototype._generateQueryCBId=function(){return{}},i.prototype._lookUp=function(e){var i;return i=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(i,this,this.expectedQueryCBId))},i}();var s,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.catchQuery=function(){var t,e,i,n,r,o,s;return e=this.$inputor.val(),t=this.$inputor.caret(\"pos\",{iframe:this.app.iframe}),s=e.slice(0,t),r=this.callbacks(\"matcher\").call(this,this.at,s,this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),n=\"string\"==typeof r,n&&r.length<this.getOpt(\"minLen\",0)?void 0:(n&&r.length<=this.getOpt(\"maxLen\",20)?(o=t-r.length,i=o+r.length,this.pos=o,r={text:r,headPos:o,endPos:i},this.trigger(\"matched\",[this.at,r.text])):(r=null,this.view.hide()),this.query=r)},i.prototype.rect=function(){var e,i,n;if(e=this.$inputor.caret(\"offset\",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(i=t(this.app.iframe).offset(),e.left+=i.left,e.top+=i.top),n=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+n}},i.prototype.insert=function(t,e){var i,n,r,o,s;return i=this.$inputor,n=i.val(),r=n.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\" \",t+=o,s=\"\"+r+t+n.slice(this.query.endPos||0),i.val(s),i.caret(\"pos\",r.length+t.length,{iframe:this.app.iframe}),i.is(\":focus\")||i.focus(),i.change()},i}(r);var l,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype._getRange=function(){var t;return t=this.app.window.getSelection(),t.rangeCount>0?t.getRangeAt(0):void 0},n.prototype._setRange=function(e,i,n){return null==n&&(n=this._getRange()),n&&i?(i=t(i)[0],\"after\"===e?(n.setEndAfter(i),n.setStartAfter(i)):(n.setEndBefore(i),n.setStartBefore(i)),n.collapse(!1),this._clearRange(n)):void 0},n.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},n.prototype._movingEvent=function(t){var e;return\"click\"===t.type||(e=t.which)===i.RIGHT||e===i.LEFT||e===i.UP||e===i.DOWN},n.prototype._unwrap=function(e){var i;return e=t(e).unwrap().get(0),(i=e.nextSibling)&&i.nodeValue&&(e.nodeValue+=i.nodeValue,t(i).remove()),e},n.prototype.catchQuery=function(e){var n,r,o,s,a,h,l,u,c,p,f,d;if((d=this._getRange())&&d.collapsed){if(e.which===i.ENTER)return(r=t(d.startContainer).closest(\".atwho-query\")).contents().unwrap(),r.is(\":empty\")&&r.remove(),(r=t(\".atwho-query\",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(d.startContainer).is(this.$inputor))return void this._clearRange();e.which===i.BACKSPACE&&d.startContainer.nodeType===document.ELEMENT_NODE&&(c=d.startOffset-1)>=0?(o=d.cloneRange(),o.setStart(d.startContainer,c),t(o.cloneContents()).contents().last().is(\".atwho-inserted\")&&(a=t(d.startContainer).contents().get(c),this._setRange(\"after\",t(a).contents().last()))):e.which===i.LEFT&&d.startContainer.nodeType===document.TEXT_NODE&&(n=t(d.startContainer.previousSibling),n.is(\".atwho-inserted\")&&0===d.startOffset&&this._setRange(\"after\",n.contents().last()))}if(t(d.startContainer).closest(\".atwho-inserted\").addClass(\"atwho-query\").siblings().removeClass(\"atwho-query\"),(r=t(\".atwho-query\",this.app.document)).length>0&&r.is(\":empty\")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass(\"atwho-inserted\"),r.length>0)switch(e.which){case i.LEFT:return this._setRange(\"before\",r.get(0),d),void r.removeClass(\"atwho-query\");case i.RIGHT:return this._setRange(\"after\",r.get(0).nextSibling,d),void r.removeClass(\"atwho-query\")}if(r.length>0&&(f=r.attr(\"data-atwho-at-query\"))&&(r.empty().html(f).attr(\"data-atwho-at-query\",null),this._setRange(\"after\",r.get(0),d)),o=d.cloneRange(),o.setStart(d.startContainer,0),u=this.callbacks(\"matcher\").call(this,this.at,o.toString(),this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),h=\"string\"==typeof u,0===r.length&&h&&(s=d.startOffset-this.at.length-u.length)>=0&&(d.setStart(d.startContainer,s),r=t(\"<span/>\",this.app.document).attr(this.getOpt(\"editableAtwhoQueryAttrs\")).addClass(\"atwho-query\"),d.surroundContents(r.get(0)),l=r.contents().last().get(0),l&&(/firefox/i.test(navigator.userAgent)?(d.setStart(l,l.length),d.setEnd(l,l.length),this._clearRange(d)):this._setRange(\"after\",l,d))),!(h&&u.length<this.getOpt(\"minLen\",0)))return h&&u.length<=this.getOpt(\"maxLen\",20)?(p={text:u,el:r},this.trigger(\"matched\",[this.at,p.text]),this.query=p):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass(\"atwho-inserted\")?r.removeClass(\"atwho-query\"):!1!==this.callbacks(\"afterMatchFailed\").call(this,this.at,r)&&this._setRange(\"after\",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var e,i,n;return n=this.query.el.offset(),n&&this.query.el[0].getClientRects().length?(this.app.iframe&&!this.app.iframeAsRoot&&(i=(e=t(this.app.iframe)).offset(),n.left+=i.left-this.$inputor.scrollLeft(),n.top+=i.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n):void 0},n.prototype.insert=function(t,e){var i,n,r,o,s;return this.$inputor.is(\":focus\")||this.$inputor.focus(),n=this.getOpt(\"functionOverrides\"),n.insert?n.insert.call(this,t,e):(o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\"\",i=e.data(\"item-data\"),this.query.el.removeClass(\"atwho-query\").addClass(\"atwho-inserted\").html(t).attr(\"data-atwho-at-query\",\"\"+i[\"atwho-at\"]+this.query.text).attr(\"contenteditable\",\"false\"),(r=this._getRange())&&(this.query.el.length&&r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(s=this.app.document.createTextNode(\"\"+o)),this._setRange(\"after\",s,r)),this.$inputor.is(\":focus\")||this.$inputor.focus(),this.$inputor.change())},n}(r);var u;u=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,r;return n=this.fetch(),r=this.context.getOpt(\"searchKey\"),n=this.context.callbacks(\"filter\").call(this.context,t,n,r)||[],i=this.context.callbacks(\"remoteFilter\"),n.length>0||!i&&0===n.length?e(n):i.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks(\"beforeSave\").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return\"string\"==typeof e?t.ajax(e,{dataType:\"json\"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}();var c;c=function(){function e(e){this.context=e,this.$el=t(\"<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>\"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt(\"alias\")||this.context.at.charCodeAt(0),t=this.context.getOpt(\"headerTpl\"),t&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:\"at-view-\"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,i,n;return e=this.$el.find(\"ul\"),i=0,n=0,e.on(\"mousemove.atwho-view\",\"li\",function(r){return function(r){var o;if((i!==r.clientX||n!==r.clientY)&&(i=r.clientX,n=r.clientY,o=t(r.currentTarget),!o.hasClass(\"cur\")))return e.find(\".cur\").removeClass(\"cur\"),o.addClass(\"cur\")}}(this)).on(\"click.atwho-view\",\"li\",function(i){return function(n){return e.find(\".cur\").removeClass(\"cur\"),t(n.currentTarget).addClass(\"cur\"),i.choose(n),n.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(\".cur\").length>0},e.prototype.choose=function(t){var e,i;return(e=this.$el.find(\".cur\")).length&&(i=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks(\"beforeInsert\").call(this.context,i,e,t),e),this.context.trigger(\"inserted\",[e,t]),this.hide(t)),this.context.getOpt(\"hideWithoutSuffix\")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var i,n,r,o;return i=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(i).scrollTop()>t(i).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(i).width()-this.$el.width()-5)&&(e.left=r),n={left:e.left,top:e.bottom},null!=(o=this.context.callbacks(\"beforeReposition\"))&&o.call(this.context,n),this.$el.offset(n),this.context.trigger(\"reposition\",[n])},e.prototype.next=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),e=t.next(),e.length||(e=this.$el.find(\"li:first\")),e.addClass(\"cur\"),i=e[0],n=i.offsetTop+i.offsetHeight+(i.nextSibling?i.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),i=t.prev(),i.length||(i=this.$el.find(\"li:last\")),i.addClass(\"cur\"),n=i[0],e=n.offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,e-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return e=this.context.getOpt(\"scrollDuration\"),e?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger(\"shown\")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger(\"hidden\",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(i,e))},e.prototype.render=function(e){var i,n,r,o,s,a,h;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find(\"ul\").empty(),n=this.$el.find(\"ul\"),h=this.context.getOpt(\"displayTpl\"),r=0,s=e.length;s>r;r++)o=e[r],o=t.extend({},o,{\"atwho-at\":this.context.at}),a=this.context.callbacks(\"tplEval\").call(this.context,h,o,\"onDisplay\"),i=t(this.context.callbacks(\"highlighter\").call(this.context,a,this.context.query.text)),i.data(\"item-data\",o),n.append(i);return this.show(),this.context.getOpt(\"highlightFirst\")?n.find(\"li:first\").addClass(\"cur\"):void 0},e}();var p;p={load:function(t,e){var i;return(i=this.controller(t))?i.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data(\"atwho\",null)}},t.fn.atwho=function(e){var i,r;return i=arguments,r=null,this.filter('textarea, input, [contenteditable=\"\"], [contenteditable=true]').each(function(){var o,s;return(s=(o=t(this)).data(\"atwho\"))||o.data(\"atwho\",s=new n(this)),\"object\"!=typeof e&&e?p[e]&&s?r=p[e].apply(s,Array.prototype.slice.call(i,1)):t.error(\"Method \"+e+\" does not exist on jQuery.atwho\"):s.reg(e.at,e)}),null!=r?r:this},t.fn.atwho[\"default\"]={at:void 0,alias:void 0,data:null,displayTpl:\"<li>${name}</li>\",insertTpl:\"${atwho-at}${name}\",headerTpl:null,callbacks:e,functionOverrides:{},searchKey:\"name\",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1});","var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./autocomplete.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/**\\n * based upon apps/comments/js/vendor/At.js/dist/css/jquery.atwho.css,\\n * only changed colors and font-weight\\n */\\n.atwho-view {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  display: none;\\n  margin-top: 18px;\\n  background: var(--color-main-background);\\n  color: var(--color-main-text);\\n  border: 1px solid var(--color-border);\\n  border-radius: var(--border-radius);\\n  box-shadow: 0 0 5px var(--color-box-shadow);\\n  min-width: 120px;\\n  z-index: 11110 !important; }\\n\\n.atwho-view .atwho-header {\\n  padding: 5px;\\n  margin: 5px;\\n  cursor: pointer;\\n  border-bottom: solid 1px var(--color-border);\\n  color: var(--color-main-text);\\n  font-size: 11px;\\n  font-weight: bold; }\\n\\n.atwho-view .atwho-header .small {\\n  color: var(--color-main-text);\\n  float: right;\\n  padding-top: 2px;\\n  margin-right: -5px;\\n  font-size: 12px;\\n  font-weight: normal; }\\n\\n.atwho-view .atwho-header:hover {\\n  cursor: default; }\\n\\n.atwho-view .cur {\\n  background: var(--color-primary);\\n  color: var(--color-primary-text); }\\n\\n.atwho-view .cur small {\\n  color: var(--color-primary-text); }\\n\\n.atwho-view strong {\\n  color: var(--color-main-text);\\n  font-weight: normal; }\\n\\n.atwho-view .cur strong {\\n  color: var(--color-primary-text);\\n  font-weight: normal; }\\n\\n.atwho-view ul {\\n  /* width: 100px; */\\n  list-style: none;\\n  padding: 0;\\n  margin: auto;\\n  max-height: 200px;\\n  overflow-y: auto; }\\n\\n.atwho-view ul li {\\n  display: block;\\n  padding: 5px 10px;\\n  border-bottom: 1px solid var(--color-border);\\n  cursor: pointer; }\\n\\n.atwho-view small {\\n  font-size: smaller;\\n  color: var(--color-main-text);\\n  font-weight: normal; }\\n\", \"\"]);\n","var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./comments.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/*\\n * Copyright (c) 2016\\n *\\n * This file is licensed under the Affero General Public License version 3\\n * or later.\\n *\\n * See the COPYING-README file.\\n *\\n */\\n#commentsTabView .emptycontent {\\n  margin-top: 0; }\\n\\n#commentsTabView .newCommentForm {\\n  margin-left: 36px;\\n  position: relative; }\\n\\n#commentsTabView .newCommentForm .message {\\n  width: 100%;\\n  padding: 10px;\\n  min-height: 44px;\\n  margin: 0;\\n  /* Prevent the text from overlapping with the submit button. */\\n  padding-right: 30px; }\\n\\n#commentsTabView .newCommentForm .submit,\\n#commentsTabView .newCommentForm .submitLoading {\\n  width: 44px;\\n  height: 44px;\\n  margin: 0;\\n  padding: 13px;\\n  background-color: transparent;\\n  border: none;\\n  opacity: .3;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0; }\\n\\n#commentsTabView .deleteLoading {\\n  padding: 14px;\\n  vertical-align: middle; }\\n\\n#commentsTabView .newCommentForm .submit:not(:disabled):hover,\\n#commentsTabView .newCommentForm .submit:not(:disabled):focus {\\n  opacity: 1; }\\n\\n#commentsTabView .newCommentForm div.message {\\n  resize: none; }\\n\\n#commentsTabView .newCommentForm div.message:empty:before {\\n  content: attr(data-placeholder);\\n  color: grey; }\\n\\n#commentsTabView .comment {\\n  position: relative;\\n  /** padding bottom is little more so that the top and bottom gap look uniform **/\\n  padding: 10px 0 15px; }\\n\\n#commentsTabView .comments .comment {\\n  border-top: 1px solid var(--color-border); }\\n\\n#commentsTabView .comment .avatar,\\n.atwho-view-ul * .avatar {\\n  width: 32px;\\n  height: 32px;\\n  line-height: 32px;\\n  margin-right: 5px; }\\n\\n#commentsTabView .comment .message .avatar,\\n.atwho-view-ul * .avatar {\\n  display: inline-block; }\\n\\n#activityTabView li.comment.collapsed .activitymessage,\\n#commentsTabView .comment.collapsed .message {\\n  white-space: pre-wrap; }\\n\\n#activityTabView li.comment.collapsed .activitymessage,\\n#commentsTabView .comment.collapsed .message {\\n  max-height: 70px;\\n  overflow: hidden; }\\n\\n#activityTabView li.comment .message-overlay,\\n#commentsTabView .comment .message-overlay {\\n  display: none; }\\n\\n#activityTabView li.comment.collapsed .message-overlay,\\n#commentsTabView .comment.collapsed .message-overlay {\\n  display: block;\\n  position: absolute;\\n  z-index: 2;\\n  height: 50px;\\n  pointer-events: none;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: -moz-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -webkit-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -o-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -ms-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background-repeat: no-repeat; }\\n\\n#commentsTabView .hidden {\\n  display: none !important; }\\n\\n/** set min-height as 44px to ensure that it fits the button sizes. **/\\n#commentsTabView .comment .authorRow {\\n  min-height: 44px; }\\n\\n#commentsTabView .comment .authorRow .tooltip {\\n  /** because of the padding on the element, the tooltip appear too far up,\\n\\t adding this brings them closer to the element**/\\n  margin-top: 5px; }\\n\\n.atwho-view-ul * .avatar-name-wrapper,\\n#commentsTabView .comment .authorRow {\\n  position: relative;\\n  display: inline-flex;\\n  align-items: center;\\n  width: 100%; }\\n\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser),\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar,\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar img,\\n#commentsTabView .comment .authorRow .avatar:not(.currentUser),\\n#commentsTabView .comment .authorRow .author:not(.currentUser) {\\n  cursor: pointer; }\\n\\n.atwho-view-ul .avatar-name-wrapper,\\n.atwho-view-ul .avatar-name-wrapper .avatar,\\n.atwho-view-ul .avatar-name-wrapper .avatar img {\\n  cursor: pointer; }\\n\\n#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper,\\n#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper {\\n  /* Make the wrapper the positioning context of its child contacts\\n\\t\\t * menu. */\\n  position: relative;\\n  display: inline;\\n  vertical-align: top;\\n  background-color: var(--color-background-dark);\\n  border-radius: 50vh;\\n  padding: 1px 7px 1px 1px;\\n  /* Ensure that the avatar and the user name will be kept together. */\\n  white-space: nowrap; }\\n  #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar,\\n  #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar {\\n    height: 16px;\\n    width: 16px;\\n    vertical-align: middle;\\n    padding: 1px;\\n    margin-top: -3px;\\n    margin-left: 0;\\n    margin-right: 2px; }\\n    #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar img,\\n    #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar img {\\n      vertical-align: top; }\\n  #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper strong,\\n  #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper strong {\\n    /* Ensure that the user name is shown in bold, as different browsers\\n\\t\\t\\t * use different font weights for strong elements. */\\n    font-weight: bold; }\\n\\n#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper.currentUser,\\n#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper.currentUser {\\n  background-color: var(--color-primary);\\n  color: var(--color-primary-text); }\\n\\n.atwho-view-ul * .avatar-name-wrapper {\\n  white-space: nowrap; }\\n\\n#commentsTabView .comment .author,\\n#commentsTabView .comment .date {\\n  opacity: .5; }\\n\\n#commentsTabView .comment .author {\\n  max-width: 210px;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap; }\\n\\n#commentsTabView .comment .date {\\n  margin-left: auto;\\n  /** this is to fix the tooltip being too close due to the margin-top applied\\n\\t to bring the tooltip closer for the action icons **/\\n  padding: 10px 0px; }\\n\\n#commentsTabView .comments > li:not(.newCommentRow) .message {\\n  padding-left: 40px;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word; }\\n\\n#commentsTabView .comment .action {\\n  opacity: 0.3;\\n  padding: 14px;\\n  display: block; }\\n\\n#commentsTabView .comment .action:hover,\\n#commentsTabView .comment .action:focus {\\n  opacity: 1; }\\n\\n#commentsTabView .newCommentRow .action-container {\\n  margin-left: auto; }\\n\\n#commentsTabView .comment.disabled .message {\\n  opacity: 0.3; }\\n\\n#commentsTabView .comment.disabled .action {\\n  display: none; }\\n\\n#commentsTabView .message.error {\\n  color: #e9322d;\\n  border-color: #e9322d;\\n  box-shadow: 0 0 6px #f8b9b7; }\\n\\n.app-files .action-comment {\\n  padding: 16px 14px; }\\n\\n#commentsTabView .comment .message .contactsmenu-popover {\\n  left: -6px;\\n  top: 24px; }\\n\", \"\"]);\n"],"sourceRoot":""}