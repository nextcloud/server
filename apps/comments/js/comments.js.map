{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/escape-html/index.js","webpack:///external \"jQuery\"","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///./apps/comments/src/app.js","webpack:///./apps/comments/src/templates.js","webpack:///./apps/comments/src/commentmodel.js","webpack:///./apps/comments/src/commentcollection.js","webpack:///./apps/comments/src/commentsummarymodel.js","webpack:///./apps/comments/src/commentsmodifymenu.js","webpack:///./apps/comments/src/filesplugin.js","webpack:///./apps/comments/src/activitytabviewplugin.js","webpack:///./apps/comments/src/search.js","webpack:///./apps/comments/src/vendor/Caret.js/dist/jquery.caret.min.js","webpack:///./apps/comments/src/vendor/At.js/dist/js/jquery.atwho.min.js","webpack:///./apps/comments/src/style/autocomplete.scss?75bd","webpack:///./apps/comments/src/style/autocomplete.scss","webpack:///./apps/comments/src/style/comments.scss?fd56","webpack:///./apps/comments/src/style/comments.scss","webpack:///./apps/comments/src/commentstabview.js","webpack:///./apps/comments/src/comments.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","matchHtmlRegExp","string","escape","str","match","exec","html","index","lastIndex","length","charCodeAt","substring","jQuery","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","id","_i","push","listToStyles","parentId","styles","newStyles","part","css","media","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","applyToTag","newObj","textStore","replaceText","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","firstChild","OCA","Comments","template","templates","Handlebars","Templates","container","depth0","helpers","partials","helper","escapeExpression","actorId","helperMissing","nullContext","stack1","alias1","alias2","alias3","alias4","isUnread","program","isLong","isUserAuthor","actorDisplayName","timestamp","altDate","date","formattedMessage","iconClass","displayName","each","items","cancelText","tag","isEditMode","newMessagePlaceholder","message","submitText","countMessage","iconUrl","emptyResultLabel","moreLabel","OC","_","extend","Files","Client","PROPERTY_FILEID","NS_OWNCLOUD","PROPERTY_MESSAGE","PROPERTY_ACTORTYPE","PROPERTY_ACTORID","PROPERTY_ISUNREAD","PROPERTY_OBJECTID","PROPERTY_OBJECTTYPE","PROPERTY_ACTORDISPLAYNAME","PROPERTY_CREATIONDATETIME","PROPERTY_MENTIONS","CommentModel","Backbone","Model","sync","davSync","defaults","actorType","objectType","davProperties","creationDateTime","objectId","mentions","parse","_parseMentions","isUndefined","result","mention","localName","child","nextSibling","startsWith","textContent","CommentCollection","Collection","model","_objectType","_objectId","_endReached","_limit","initialize","models","url","linkToRemote","setObjectId","hasMoreResults","reset","_summaryModel","apply","arguments","fetchNext","self","body","success","resp","initial","set","trigger","getSummaryModel","CommentSummaryModel","updateReadMarker","save","readMarker","Date","toUTCString","PROPERTY_READMARKER","attrs","CommentsModifyMenu","View","tagName","className","_scopes","events","_onClickAction","event","$target","$","currentTarget","hasClass","closest","hideMenus","render","$el","commentsmodifymenu","show","context","_context","active","target","offsetIcon","offset","offsetContainer","position","top","left","right","find","width","removeClass","addClass","showMenu","PROPERTY_COMMENTS_UNREAD","FilesPlugin","ignoreLists","_formatCommentCount","count","filesplugin","imagePath","attach","fileList","indexOf","registerTabView","CommentsTabView","oldGetWebdavProperties","_getWebdavProperties","props","filesClient","addFileInfoParser","response","commentsUnread","propStat","properties","parseInt","oldCreateRow","_createRow","fileData","$tr","attr","fileActions","registerAction","$file","unread","mime","order","permissions","PERMISSION_READ","FileActions","TYPE_INLINE","actionSpec","isDefault","unreadComments","$actionLink","append","actionHandler","fileName","tooltip","showDetailsView","oldElementToFile","elementToFile","fileInfo","Plugins","register","ActivityTabViewPlugin","prepareModelForDisplay","view","_isLong","$overlay","after","on","_onClickCollapsedComment","ev","$row","is","Comment","fileAppLoaded","App","renderCommentResult","$nofilterresults","updateLegacyMimetype","$pathDiv","text","path","$avatar","authorName","avatar","authorId","undefined","comment","prepend","link","dir","dirname","generateUrl","scrollto","handleCommentClick","changeDirectory","scrollTo","mime_type","setFileList","search","setRenderer","setHandler","Search","a","define","returnExportsGlobal","b","e","g","h","$inputor","domInputor","setPos","getIEPosition","getPosition","getOffset","getOldIEPos","selection","createRange","createTextRange","moveToElementText","setEndPoint","getPos","range","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","detach","getOldIEOffset","duplicate","moveStart","height","getBoundingClientRect","bottom","f","getSelection","setStart","insertNode","selectNode","scrollTop","scrollLeft","rangeCount","getRangeAt","getIEPos","parentElement","replace","moveToBookmark","getBookmark","collapse","compareEndPoints","selectionStart","move","select","setSelectionRange","getIEOffset","boundingLeft","boundingTop","boundingHeight","val","slice","rect","css_attr","mirrorCss","zIndex","prop","$mirror","contentEditable","pos","iframe","contentWindow","contentDocument","window","fn","caret","isPlainObject","error","EditableCaret","InputCaret","Utils","apis","ESC","TAB","ENTER","CTRL","A","P","N","LEFT","UP","RIGHT","DOWN","BACKSPACE","SPACE","beforeSave","arrayToDefaultHash","matcher","decodeURI","RegExp","String","remoteFilter","sorter","atwho_order","sort","tplEval","highlighter","beforeInsert","beforeReposition","afterMatchFailed","currentFlag","controllers","aliasMaps","setupRootElement","listen","createContainer","ownerDocument","defaultView","parentWindow","frameElement","atwho","debug","iframeAsRoot","controller","setContextFor","reg","alias","init","hide","isComposing","setTimeout","dispatch","onKeyup","onKeydown","expectedQueryCBId","getOpt","shutdown","destroy","off","lookUp","keyCode","preventDefault","ctrlKey","visible","prev","next","highlighted","choose","app","at","uid","setting","query","u","Math","random","substr","getTime","reload","callDefault","callbacks","insertContentFor","renderView","isArray","catchQuery","_delayLookUp","_lookUp","now","previousCallTime","_stopDelayedCall","delayedCallTimeout","clearTimeout","_generateQueryCBId","constructor","proxy","__super__","headPos","endPos","insert","max","focus","change","_getRange","_setRange","setEndAfter","setStartAfter","setEndBefore","setStartBefore","_clearRange","ctrl_a_pressed","removeAllRanges","addRange","_movingEvent","which","_unwrap","unwrap","nodeValue","collapsed","startContainer","contents","last","nodeType","ELEMENT_NODE","startOffset","cloneContents","TEXT_NODE","previousSibling","siblings","empty","surroundContents","el","first","getClientRects","storage","saved","fetch","load","_load","ajax","dataType","done","$elUl","children","timeoutID","bindEvent","clientX","clientY","expr","filters","stopShowing","reposition","offsetTop","offsetHeight","animate","isNaN","isSelecting","setIframe","run","Array","displayTpl","insertTpl","headerTpl","functionOverrides","searchKey","suffix","hideWithoutSuffix","startWithSpace","acceptSpaceBar","highlightFirst","limit","maxLen","minLen","displayTimeout","delay","spaceSelectsMatch","tabSelectsMatch","editableAtwhoQueryAttrs","scrollDuration","suspendOnComposing","lookUpOnClick","locals","add","default","___CSS_LOADER_API_IMPORT___","DetailTabView","_autoCompleteData","_commentsModifyMenu","_commentMaxLength","collection","_onRequest","_onEndRequest","_onAddModel","_onChangeModel","_commentMaxThreshold","bindAll","params","currentUser","getCurrentUser","editCommentTemplate","commentTemplate","editTooltip","getLabel","getIcon","setFileInfo","_initAutoComplete","silent","nextPage","before","$container","delegateEvents","_onTypeComment","autosize","appConfig","comments","maxAutoCompleteResults","_onAutoComplete","li","$li","q","escapeHTML","label","je","_postRenderItem","parent","callback","_autoCompleteRequestTimer","_autoCompleteRequestCall","abort","linkToOCS","itemType","itemId","beforeSend","request","setRequestHeader","ocs","_formatItem","commentModel","Util","relativeModifiedDate","formatDate","_formatMessage","attributes","_toggleLoading","state","_loading","toggleClass","fileInfoModel","findWhere","$comment","eq","oldMentions","isEqual","$updated","trim","previous","$message","editionMode","inlineAvatars","$this","username","contactsMenu","modifyCommentMenu","listenTo","action","_onClickEditComment","_onClickDeleteComment","_postRenderMessage","user","editMode","mentionId","regex","_composeHTMLMention","mentionDisplayName","p1","OCP","plainToRich","commentId","commentToEdit","$formRow","replaceWith","clone","$field","len","$submitButton","limitExceeded","shiftKey","click","_onClickComment","_onClickCloseComment","$loading","$moreIcon","Notification","showTemporary","_onClickShowMore","_onSubmitSuccess","$form","$submit","_commentBodyHTML2Plain","oldHtml","$inserted","userId","richToPlain","_onSubmitComment","$commentField","_onSubmitError","verb","wait","_onTextChange","_onPaste","originalEvent","clipboardData","getData","execCommand"],"mappings":"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","file":"comments.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","module.exports = jQuery;","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {}\n\t}\n\n})()\n","(function() {\n  var template = Handlebars.template, templates = OCA.Comments.Templates = OCA.Comments.Templates || {};\ntemplates['comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" unread\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" collapsed\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" currentUser\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"data-username=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t<a href=\\\"#\\\" class=\\\"action more icon icon-more has-tooltip\\\"></a>\\n\t\t\t<div class=\\\"deleteLoading icon-loading-small hidden\\\"></div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t<div class=\\\"message-overlay\\\"></div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"comment\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUnread : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.actorId : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"> </div>\\n\t\t<div class=\\\"author\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t<div class=\\\"date has-tooltip live-relative-timestamp\\\" data-timestamp=\\\"\"\n    + alias4(((helper = (helper = helpers.timestamp || (depth0 != null ? depth0.timestamp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"timestamp\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.altDate || (depth0 != null ? depth0.altDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"altDate\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.date || (depth0 != null ? depth0.date : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"date\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t</div>\\n\t<div class=\\\"message\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.formattedMessage || (depth0 != null ? depth0.formattedMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"formattedMessage\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"useData\":true});\ntemplates['commentsmodifymenu'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"menuitem action \"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \" permanent\\\" data-action=\\\"\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.iconClass : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.displayName || (depth0 != null ? depth0.displayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"displayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t\t\t</a>\\n\t\t</li>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t\t\t<span class=\\\"icon \"\n    + container.escapeExpression(((helper = (helper = helpers.iconClass || (depth0 != null ? depth0.iconClass : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"iconClass\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></span>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t\t\t<span class=\\\"no-icon\\\"></span>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"useData\":true});\ntemplates['edit_comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t<div class=\\\"action-container\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"action cancel icon icon-close has-tooltip\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.cancelText || (depth0 != null ? depth0.cancelText : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancelText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></a>\\n\t\t\t</div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \" class=\\\"newCommentRow comment\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar currentUser\\\" data-username=\\\"\"\n    + alias4(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></div>\\n\t\t<div class=\\\"author currentUser\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isEditMode : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t</div>\\n\t<form class=\\\"newCommentForm\\\">\\n\t\t<div contentEditable=\\\"true\\\" class=\\\"message\\\" data-placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.newMessagePlaceholder || (depth0 != null ? depth0.newMessagePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newMessagePlaceholder\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t\t<input class=\\\"submit icon-confirm has-tooltip\\\" type=\\\"submit\\\" value=\\\"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.submitText || (depth0 != null ? depth0.submitText : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"submitText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n\t\t<div class=\\\"submitLoading icon-loading-small hidden\\\"></div>\\n\t</form>\\n</\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \">\\n\";\n},\"useData\":true});\ntemplates['filesplugin'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<a class=\\\"action action-comment permanent\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.countMessage || (depth0 != null ? depth0.countMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"countMessage\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" href=\\\"#\\\">\\n\t<img class=\\\"svg\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.iconUrl || (depth0 != null ? depth0.iconUrl : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconUrl\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n</a>\\n\";\n},\"useData\":true});\ntemplates['view'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<ul class=\\\"comments\\\">\\n</ul>\\n<div class=\\\"emptycontent hidden\\\"><div class=\\\"icon-comment\\\"></div>\\n\t<p>\"\n    + alias4(((helper = (helper = helpers.emptyResultLabel || (depth0 != null ? depth0.emptyResultLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"emptyResultLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p></div>\\n<input type=\\\"button\\\" class=\\\"showMore hidden\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.moreLabel || (depth0 != null ? depth0.moreLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"moreLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" name=\\\"show-more\\\" id=\\\"show-more\\\" />\\n<div class=\\\"loading hidden\\\" style=\\\"height: 50px\\\"></div>\\n\";\n},\"useData\":true});\n})();","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_FILEID: '{' + OC.Files.Client.NS_OWNCLOUD + '}id',\n\t\tPROPERTY_MESSAGE: '{' + OC.Files.Client.NS_OWNCLOUD + '}message',\n\t\tPROPERTY_ACTORTYPE: '{' + OC.Files.Client.NS_OWNCLOUD + '}actorType',\n\t\tPROPERTY_ACTORID: '{' + OC.Files.Client.NS_OWNCLOUD + '}actorId',\n\t\tPROPERTY_ISUNREAD: '{' + OC.Files.Client.NS_OWNCLOUD + '}isUnread',\n\t\tPROPERTY_OBJECTID: '{' + OC.Files.Client.NS_OWNCLOUD + '}objectId',\n\t\tPROPERTY_OBJECTTYPE: '{' + OC.Files.Client.NS_OWNCLOUD + '}objectType',\n\t\tPROPERTY_ACTORDISPLAYNAME: '{' + OC.Files.Client.NS_OWNCLOUD + '}actorDisplayName',\n\t\tPROPERTY_CREATIONDATETIME: '{' + OC.Files.Client.NS_OWNCLOUD + '}creationDateTime',\n\t\tPROPERTY_MENTIONS: '{' + OC.Files.Client.NS_OWNCLOUD + '}mentions',\n\t})\n\n\t/**\n\t * @class OCA.Comments.CommentModel\n\t * @classdesc\n\t *\n\t * Comment\n\t *\n\t */\n\tconst CommentModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentModel.prototype */ {\n\t\t\tsync: OC.Backbone.davSync,\n\n\t\t\tdefaults: {\n\t\t\t\tactorType: 'users',\n\t\t\t\tobjectType: 'files',\n\t\t\t},\n\n\t\t\tdavProperties: {\n\t\t\t\tid: OC.Files.Client.PROPERTY_FILEID,\n\t\t\t\tmessage: OC.Files.Client.PROPERTY_MESSAGE,\n\t\t\t\tactorType: OC.Files.Client.PROPERTY_ACTORTYPE,\n\t\t\t\tactorId: OC.Files.Client.PROPERTY_ACTORID,\n\t\t\t\tactorDisplayName: OC.Files.Client.PROPERTY_ACTORDISPLAYNAME,\n\t\t\t\tcreationDateTime: OC.Files.Client.PROPERTY_CREATIONDATETIME,\n\t\t\t\tobjectType: OC.Files.Client.PROPERTY_OBJECTTYPE,\n\t\t\t\tobjectId: OC.Files.Client.PROPERTY_OBJECTID,\n\t\t\t\tisUnread: OC.Files.Client.PROPERTY_ISUNREAD,\n\t\t\t\tmentions: OC.Files.Client.PROPERTY_MENTIONS,\n\t\t\t},\n\n\t\t\tparse(data) {\n\t\t\t\treturn {\n\t\t\t\t\tid: data.id,\n\t\t\t\t\tmessage: data.message,\n\t\t\t\t\tactorType: data.actorType,\n\t\t\t\t\tactorId: data.actorId,\n\t\t\t\t\tactorDisplayName: data.actorDisplayName,\n\t\t\t\t\tcreationDateTime: data.creationDateTime,\n\t\t\t\t\tobjectType: data.objectType,\n\t\t\t\t\tobjectId: data.objectId,\n\t\t\t\t\tisUnread: (data.isUnread === 'true'),\n\t\t\t\t\tmentions: this._parseMentions(data.mentions),\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t_parseMentions(mentions) {\n\t\t\t\tif (_.isUndefined(mentions)) {\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t\tconst result = {}\n\t\t\t\tfor (const i in mentions) {\n\t\t\t\t\tconst mention = mentions[i]\n\t\t\t\t\tif (_.isUndefined(mention.localName) || mention.localName !== 'mention') {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tresult[i] = {}\n\t\t\t\t\tfor (let child = mention.firstChild; child; child = child.nextSibling) {\n\t\t\t\t\t\tif (_.isUndefined(child.localName) || !child.localName.startsWith('mention')) {\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult[i][child.localName] = child.textContent\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result\n\t\t\t},\n\t\t})\n\n\tOCA.Comments.CommentModel = CommentModel\n})(OC, OCA)\n","/* eslint-disable */\n/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t/**\n\t * @class OCA.Comments.CommentCollection\n\t * @classdesc\n\t *\n\t * Collection of comments assigned to a file\n\t *\n\t */\n\tvar CommentCollection = OC.Backbone.Collection.extend(\n\t\t/** @lends OCA.Comments.CommentCollection.prototype */ {\n\n\t\t\tsync: OC.Backbone.davSync,\n\n\t\t\tmodel: OCA.Comments.CommentModel,\n\n\t\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t\t_objectType: 'files',\n\n\t\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t\t_objectId: null,\n\n\t\t\t/**\n\t\t * True if there are no more page results left to fetch\n\t\t *\n\t\t * @type bool\n\t\t */\n\t\t\t_endReached: false,\n\n\t\t\t/**\n\t\t * Number of comments to fetch per page\n\t\t *\n\t\t * @type int\n\t\t */\n\t\t\t_limit: 20,\n\n\t\t\t/**\n\t\t * Initializes the collection\n\t\t *\n\t\t * @param {string} [options.objectType] object type\n\t\t * @param {string} [options.objectId] object id\n\t\t */\n\t\t\tinitialize: function(models, options) {\n\t\t\t\toptions = options || {}\n\t\t\t\tif (options.objectType) {\n\t\t\t\t\tthis._objectType = options.objectType\n\t\t\t\t}\n\t\t\t\tif (options.objectId) {\n\t\t\t\t\tthis._objectId = options.objectId\n\t\t\t\t}\n\t\t\t},\n\n\t\t\turl: function() {\n\t\t\t\treturn OC.linkToRemote('dav') + '/comments/'\n\t\t\t\t+ encodeURIComponent(this._objectType) + '/'\n\t\t\t\t+ encodeURIComponent(this._objectId) + '/'\n\t\t\t},\n\n\t\t\tsetObjectId: function(objectId) {\n\t\t\t\tthis._objectId = objectId\n\t\t\t},\n\n\t\t\thasMoreResults: function() {\n\t\t\t\treturn !this._endReached\n\t\t\t},\n\n\t\t\treset: function() {\n\t\t\t\tthis._endReached = false\n\t\t\t\tthis._summaryModel = null\n\t\t\t\treturn OC.Backbone.Collection.prototype.reset.apply(this, arguments)\n\t\t\t},\n\n\t\t\t/**\n\t\t * Fetch the next set of results\n\t\t */\n\t\t\tfetchNext: function(options) {\n\t\t\t\tvar self = this\n\t\t\t\tif (!this.hasMoreResults()) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\tvar body = '<?xml version=\"1.0\" encoding=\"utf-8\" ?>\\n'\n\t\t\t\t+ '<oc:filter-comments xmlns:D=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\">\\n'\n\t\t\t\t// load one more so we know there is more\n\t\t\t\t+ '    <oc:limit>' + (this._limit + 1) + '</oc:limit>\\n'\n\t\t\t\t+ '    <oc:offset>' + this.length + '</oc:offset>\\n'\n\t\t\t\t+ '</oc:filter-comments>\\n'\n\n\t\t\t\toptions = options || {}\n\t\t\t\tvar success = options.success\n\t\t\t\toptions = _.extend({\n\t\t\t\t\tremove: false,\n\t\t\t\t\tparse: true,\n\t\t\t\t\tdata: body,\n\t\t\t\t\tdavProperties: CommentCollection.prototype.model.prototype.davProperties,\n\t\t\t\t\tsuccess: function(resp) {\n\t\t\t\t\t\tif (resp.length <= self._limit) {\n\t\t\t\t\t\t// no new entries, end reached\n\t\t\t\t\t\t\tself._endReached = true\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove last entry, for next page load\n\t\t\t\t\t\t\tresp = _.initial(resp)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!self.set(resp, options)) {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tsuccess.apply(null, arguments)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.trigger('sync', 'REPORT', self, options)\n\t\t\t\t\t}\n\t\t\t\t}, options)\n\n\t\t\t\treturn this.sync('REPORT', this, options)\n\t\t\t},\n\n\t\t\t/**\n\t\t * Returns the matching summary model\n\t\t *\n\t\t * @returns {OCA.Comments.CommentSummaryModel} summary model\n\t\t */\n\t\t\tgetSummaryModel: function() {\n\t\t\t\tif (!this._summaryModel) {\n\t\t\t\t\tthis._summaryModel = new OCA.Comments.CommentSummaryModel({\n\t\t\t\t\t\tid: this._objectId,\n\t\t\t\t\t\tobjectType: this._objectType\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn this._summaryModel\n\t\t\t},\n\n\t\t\t/**\n\t\t * Updates the read marker for this comment thread\n\t\t *\n\t\t * @param {Date} [date] optional date, defaults to now\n\t\t * @param {Object} [options] backbone options\n\t\t */\n\t\t\tupdateReadMarker: function(date, options) {\n\t\t\t\toptions = options || {}\n\n\t\t\t\treturn this.getSummaryModel().save({\n\t\t\t\t\treadMarker: (date || new Date()).toUTCString()\n\t\t\t\t}, options)\n\t\t\t}\n\t\t})\n\n\tOCA.Comments.CommentCollection = CommentCollection\n})(OC, OCA)\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_READMARKER: '{' + OC.Files.Client.NS_OWNCLOUD + '}readMarker',\n\t})\n\n\t/**\n\t * @class OCA.Comments.CommentSummaryModel\n\t * @classdesc\n\t *\n\t * Model containing summary information related to comments\n\t * like the read marker.\n\t *\n\t */\n\tconst CommentSummaryModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentSummaryModel.prototype */ {\n\t\t\tsync: OC.Backbone.davSync,\n\n\t\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t\t_objectType: 'files',\n\n\t\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t\t_objectId: null,\n\n\t\t\tdavProperties: {\n\t\t\t\treadMarker: OC.Files.Client.PROPERTY_READMARKER,\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initializes the summary model\n\t\t\t *\n\t\t\t * @param {any} [attrs] ignored\n\t\t\t * @param {Object} [options] destructuring object\n\t\t\t * @param {string} [options.objectType] object type\n\t\t\t * @param {string} [options.objectId] object id\n\t\t\t */\n\t\t\tinitialize(attrs, options) {\n\t\t\t\toptions = options || {}\n\t\t\t\tif (options.objectType) {\n\t\t\t\t\tthis._objectType = options.objectType\n\t\t\t\t}\n\t\t\t},\n\n\t\t\turl() {\n\t\t\t\treturn OC.linkToRemote('dav') + '/comments/'\n\t\t\t\t+ encodeURIComponent(this._objectType) + '/'\n\t\t\t\t+ encodeURIComponent(this.id) + '/'\n\t\t\t},\n\t\t})\n\n\tOCA.Comments.CommentSummaryModel = CommentSummaryModel\n})(OC, OCA)\n","/*\n * Copyright (c) 2018\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\n\t/**\n\t * Construct a new CommentsModifyMenuinstance\n\t * @constructs CommentsModifyMenu\n\t * @memberof OC.Comments\n\t * @private\n\t */\n\tconst CommentsModifyMenu = OC.Backbone.View.extend({\n\t\ttagName: 'div',\n\t\tclassName: 'commentsModifyMenu popovermenu bubble menu',\n\t\t_scopes: [\n\t\t\t{\n\t\t\t\tname: 'edit',\n\t\t\t\tdisplayName: t('comments', 'Edit comment'),\n\t\t\t\ticonClass: 'icon-rename',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'delete',\n\t\t\t\tdisplayName: t('comments', 'Delete comment'),\n\t\t\t\ticonClass: 'icon-delete',\n\t\t\t},\n\t\t],\n\t\tinitialize() {\n\n\t\t},\n\t\tevents: {\n\t\t\t'click a.action': '_onClickAction',\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever an action has been clicked within the menu\n\t\t *\n\t\t * @param {Object} event event object\n\t\t */\n\t\t_onClickAction(event) {\n\t\t\tlet $target = $(event.currentTarget)\n\t\t\tif (!$target.hasClass('menuitem')) {\n\t\t\t\t$target = $target.closest('.menuitem')\n\t\t\t}\n\n\t\t\tOC.hideMenus()\n\n\t\t\tthis.trigger('select:menu-item-clicked', event, $target.data('action'))\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu with the currently set items\n\t\t */\n\t\trender() {\n\t\t\tthis.$el.html(OCA.Comments.Templates.commentsmodifymenu({\n\t\t\t\titems: this._scopes,\n\t\t\t}))\n\t\t},\n\n\t\t/**\n\t\t * Displays the menu\n\t\t * @param {Event} context the click event\n\t\t */\n\t\tshow(context) {\n\t\t\tthis._context = context\n\n\t\t\tfor (const i in this._scopes) {\n\t\t\t\tthis._scopes[i].active = false\n\t\t\t}\n\n\t\t\tconst $el = $(context.target)\n\t\t\tconst offsetIcon = $el.offset()\n\t\t\tconst offsetContainer = $el.closest('.authorRow').offset()\n\n\t\t\t// adding some extra top offset to push the menu below the button.\n\t\t\tconst position = {\n\t\t\t\ttop: offsetIcon.top - offsetContainer.top + 48,\n\t\t\t\tleft: '',\n\t\t\t\tright: '',\n\t\t\t}\n\n\t\t\tposition.left = offsetIcon.left - offsetContainer.left\n\n\t\t\tif (position.left > 200) {\n\t\t\t\t// we need to position the menu to the right.\n\t\t\t\tposition.left = ''\n\t\t\t\tposition.right = this.$el.closest('.comment').find('.date').width()\n\t\t\t\tthis.$el.removeClass('menu-left').addClass('menu-right')\n\t\t\t} else {\n\t\t\t\tthis.$el.removeClass('menu-right').addClass('menu-left')\n\t\t\t}\n\t\t\tthis.$el.css(position)\n\t\t\tthis.render()\n\t\t\tthis.$el.removeClass('hidden')\n\n\t\t\tOC.showMenu(null, this.$el)\n\t\t},\n\t})\n\n\tOCA.Comments = OCA.Comments || {}\n\tOCA.Comments.CommentsModifyMenu = CommentsModifyMenu\n})(OC, OCA)\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_COMMENTS_UNREAD: '{' + OC.Files.Client.NS_OWNCLOUD + '}comments-unread',\n\t})\n\n\tOCA.Comments = _.extend({}, OCA.Comments)\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {}\n\t}\n\n\t/**\n\t * @namespace\n\t */\n\tOCA.Comments.FilesPlugin = {\n\t\tignoreLists: [\n\t\t\t'trashbin',\n\t\t\t'files.public',\n\t\t],\n\n\t\t_formatCommentCount(count) {\n\t\t\treturn OCA.Comments.Templates.filesplugin({\n\t\t\t\tcount,\n\t\t\t\tcountMessage: n('comments', '%n unread comment', '%n unread comments', count),\n\t\t\t\ticonUrl: OC.imagePath('core', 'actions/comment'),\n\t\t\t})\n\t\t},\n\n\t\tattach(fileList) {\n\t\t\tconst self = this\n\t\t\tif (this.ignoreLists.indexOf(fileList.id) >= 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tfileList.registerTabView(new OCA.Comments.CommentsTabView('commentsTabView'))\n\n\t\t\tconst oldGetWebdavProperties = fileList._getWebdavProperties\n\t\t\tfileList._getWebdavProperties = function() {\n\t\t\t\tconst props = oldGetWebdavProperties.apply(this, arguments)\n\t\t\t\tprops.push(OC.Files.Client.PROPERTY_COMMENTS_UNREAD)\n\t\t\t\treturn props\n\t\t\t}\n\n\t\t\tfileList.filesClient.addFileInfoParser(function(response) {\n\t\t\t\tconst data = {}\n\t\t\t\tconst props = response.propStat[0].properties\n\t\t\t\tconst commentsUnread = props[OC.Files.Client.PROPERTY_COMMENTS_UNREAD]\n\t\t\t\tif (!_.isUndefined(commentsUnread) && commentsUnread !== '') {\n\t\t\t\t\tdata.commentsUnread = parseInt(commentsUnread, 10)\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t})\n\n\t\t\tfileList.$el.addClass('has-comments')\n\t\t\tconst oldCreateRow = fileList._createRow\n\t\t\tfileList._createRow = function(fileData) {\n\t\t\t\tconst $tr = oldCreateRow.apply(this, arguments)\n\t\t\t\tif (fileData.commentsUnread) {\n\t\t\t\t\t$tr.attr('data-comments-unread', fileData.commentsUnread)\n\t\t\t\t}\n\t\t\t\treturn $tr\n\t\t\t}\n\n\t\t\t// register \"comment\" action for reading comments\n\t\t\tfileList.fileActions.registerAction({\n\t\t\t\tname: 'Comment',\n\t\t\t\tdisplayName(context) {\n\t\t\t\t\tif (context && context.$file) {\n\t\t\t\t\t\tconst unread = parseInt(context.$file.data('comments-unread'), 10)\n\t\t\t\t\t\tif (unread >= 0) {\n\t\t\t\t\t\t\treturn n('comments', '1 new comment', '{unread} new comments', unread, { unread })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn t('comments', 'Comment')\n\t\t\t\t},\n\t\t\t\tmime: 'all',\n\t\t\t\torder: -140,\n\t\t\t\ticonClass: 'icon-comment',\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ttype: OCA.Files.FileActions.TYPE_INLINE,\n\t\t\t\trender(actionSpec, isDefault, context) {\n\t\t\t\t\tconst $file = context.$file\n\t\t\t\t\tconst unreadComments = $file.data('comments-unread')\n\t\t\t\t\tif (unreadComments) {\n\t\t\t\t\t\tconst $actionLink = $(self._formatCommentCount(unreadComments))\n\t\t\t\t\t\tcontext.$file.find('a.name>span.fileactions').append($actionLink)\n\t\t\t\t\t\treturn $actionLink\n\t\t\t\t\t}\n\t\t\t\t\treturn ''\n\t\t\t\t},\n\t\t\t\tactionHandler(fileName, context) {\n\t\t\t\t\tcontext.$file.find('.action-comment').tooltip('hide')\n\t\t\t\t\t// open sidebar in comments section\n\t\t\t\t\tcontext.fileList.showDetailsView(fileName, 'comments')\n\t\t\t\t},\n\t\t\t})\n\n\t\t\t// add attribute to \"elementToFile\"\n\t\t\tconst oldElementToFile = fileList.elementToFile\n\t\t\tfileList.elementToFile = function($el) {\n\t\t\t\tconst fileInfo = oldElementToFile.apply(this, arguments)\n\t\t\t\tconst commentsUnread = $el.data('comments-unread')\n\t\t\t\tif (commentsUnread) {\n\t\t\t\t\tfileInfo.commentsUnread = commentsUnread\n\t\t\t\t}\n\t\t\t\treturn fileInfo\n\t\t\t}\n\t\t},\n\t}\n\n})()\n\nOC.Plugins.register('OCA.Files.FileList', OCA.Comments.FilesPlugin)\n","/**\n * @author Joas Schilling <coding@schilljs.com>\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n */\n\n(function() {\n\tOCA.Comments.ActivityTabViewPlugin = {\n\n\t\t/**\n\t\t * Prepare activity for display\n\t\t *\n\t\t * @param {OCA.Activity.ActivityModel} model for this activity\n\t\t * @param {jQuery} $el jQuery handle for this activity\n\t\t * @param {string} view The view that displayes this activity\n\t\t */\n\t\tprepareModelForDisplay(model, $el, view) {\n\t\t\tif (model.get('app') !== 'comments' || model.get('type') !== 'comments') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (view === 'ActivityTabView') {\n\t\t\t\t$el.addClass('comment')\n\t\t\t\tif (model.get('message') && this._isLong(model.get('message'))) {\n\t\t\t\t\t$el.addClass('collapsed')\n\t\t\t\t\tconst $overlay = $('<div>').addClass('message-overlay')\n\t\t\t\t\t$el.find('.activitymessage').after($overlay)\n\t\t\t\t\t$el.on('click', this._onClickCollapsedComment)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._onClickComment()\n\t\t */\n\t\t_onClickCollapsedComment(ev) {\n\t\t\tlet $row = $(ev.target)\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment')\n\t\t\t}\n\t\t\t$row.removeClass('collapsed')\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._isLong()\n\t\t */\n\t\t_isLong(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1\n\t\t},\n\t}\n\n})()\n\nOC.Plugins.register('OCA.Activity.RenderingPlugins', OCA.Comments.ActivityTabViewPlugin)\n","/* eslint-disable */\n/*\n * Copyright (c) 2014\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n(function(OC, OCA, $) {\n\t'use strict'\n\n\t/**\n\t * Construct a new FileActions instance\n\t * @constructs Files\n\t */\n\tvar Comment = function() {\n\t\tthis.initialize()\n\t}\n\n\tComment.prototype = {\n\n\t\tfileList: null,\n\n\t\t/**\n\t\t * Initialize the file search\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tvar self = this\n\n\t\t\tthis.fileAppLoaded = function() {\n\t\t\t\treturn !!OCA.Files && !!OCA.Files.App\n\t\t\t}\n\t\t\tfunction inFileList($row, result) {\n\t\t\t\treturn false\n\n\t\t\t\tif (!self.fileAppLoaded()) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tvar dir = self.fileList.getCurrentDirectory().replace(/\\/+$/, '')\n\t\t\t\tvar resultDir = OC.dirname(result.path)\n\t\t\t\treturn dir === resultDir && self.fileList.inList(result.name)\n\t\t\t}\n\t\t\tfunction hideNoFilterResults() {\n\t\t\t\tvar $nofilterresults = $('.nofilterresults')\n\t\t\t\tif (!$nofilterresults.hasClass('hidden')) {\n\t\t\t\t\t$nofilterresults.addClass('hidden')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t *\n\t\t\t * @param {jQuery} $row\n\t\t\t * @param {Object} result\n\t\t\t * @param {int} result.id\n\t\t\t * @param {string} result.comment\n\t\t\t * @param {string} result.authorId\n\t\t\t * @param {string} result.authorName\n\t\t\t * @param {string} result.link\n\t\t\t * @param {string} result.fileName\n\t\t\t * @param {string} result.path\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tthis.renderCommentResult = function($row, result) {\n\t\t\t\tif (inFileList($row, result)) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\thideNoFilterResults()\n\t\t\t\t/* render preview icon, show path beneath filename,\n\t\t\t\t show size and last modified date on the right */\n\t\t\t\tthis.updateLegacyMimetype(result)\n\n\t\t\t\tvar $pathDiv = $('<div>').addClass('path').text(result.path)\n\n\t\t\t\tvar $avatar = $('<div>')\n\t\t\t\t$avatar.addClass('avatar')\n\t\t\t\t\t.css('display', 'inline-block')\n\t\t\t\t\t.css('vertical-align', 'middle')\n\t\t\t\t\t.css('margin', '0 5px 2px 3px')\n\n\t\t\t\tif (result.authorName) {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21, undefined, false, undefined, result.authorName)\n\t\t\t\t} else {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21)\n\t\t\t\t}\n\n\t\t\t\t$row.find('td.info div.name').after($pathDiv).text(result.comment).prepend($('<span>').addClass('path').css('margin-right', '5px').text(result.authorName)).prepend($avatar)\n\t\t\t\t$row.find('td.result a').attr('href', result.link)\n\n\t\t\t\t$row.find('td.icon')\n\t\t\t\t\t.css('background-image', 'url(' + OC.imagePath('core', 'actions/comment') + ')')\n\t\t\t\t\t.css('opacity', '.4')\n\t\t\t\tvar dir = OC.dirname(result.path)\n\t\t\t\t// \"result.path\" does not include a leading \"/\", so \"OC.dirname\"\n\t\t\t\t// returns the path itself for files or folders in the root.\n\t\t\t\tif (dir === result.path) {\n\t\t\t\t\tdir = '/'\n\t\t\t\t}\n\t\t\t\t$row.find('td.info a').attr('href',\n\t\t\t\t\tOC.generateUrl('/apps/files/?dir={dir}&scrollto={scrollto}', { dir: dir, scrollto: result.fileName })\n\t\t\t\t)\n\n\t\t\t\treturn $row\n\t\t\t}\n\n\t\t\tthis.handleCommentClick = function($row, result, event) {\n\t\t\t\tif (self.fileAppLoaded() && self.fileList.id === 'files') {\n\t\t\t\t\tself.fileList.changeDirectory(OC.dirname(result.path))\n\t\t\t\t\tself.fileList.scrollTo(result.name)\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.updateLegacyMimetype = function(result) {\n\t\t\t\t// backward compatibility:\n\t\t\t\tif (!result.mime && result.mime_type) {\n\t\t\t\t\tresult.mime = result.mime_type\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setFileList = function(fileList) {\n\t\t\t\tthis.fileList = fileList\n\t\t\t}\n\n\t\t\tOC.Plugins.register('OCA.Search.Core', this)\n\t\t},\n\t\tattach: function(search) {\n\t\t\tsearch.setRenderer('comment', this.renderCommentResult.bind(this))\n\t\t\tsearch.setHandler('comment', this.handleCommentClick.bind(this))\n\t\t}\n\t}\n\n\tOCA.Search.comment = new Comment()\n})(OC, OCA, $)\n","/*! jquery.caret 2015-02-01 */\n!function(a,b){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(c){return a.returnExportsGlobal=b(c)}):\"object\"==typeof exports?module.exports=b(require(\"jquery\")):b(jQuery)}(this,function(a){\"use strict\";var b,c,d,e,f,g,h,i,j,k,l;k=\"caret\",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(){return this.domInputor},b.prototype.getIEPosition=function(){return this.getPosition()},b.prototype.getPosition=function(){var a,b;return b=this.getOffset(),a=this.$inputor.offset(),b.left-=a.left,b.top-=a.top,b},b.prototype.getOldIEPos=function(){var a,b;return b=h.selection.createRange(),a=h.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint(\"EndToEnd\",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):h.selection?this.getOldIEPos():void 0},b.prototype.getOldIEOffset=function(){var a,b;return a=h.selection.createRange().duplicate(),a.moveStart(\"character\",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(){var b,c,d,e,f;return j.getSelection&&(d=this.range())?(d.endOffset-1>0&&d.endContainer===!this.domInputor&&(b=d.cloneRange(),b.setStart(d.endContainer,d.endOffset-1),b.setEnd(d.endContainer,d.endOffset),e=b.getBoundingClientRect(),c={height:e.height,left:e.left+e.width,top:e.top},b.detach()),c&&0!==(null!=c?c.height:void 0)||(b=d.cloneRange(),f=a(h.createTextNode(\"|\")),b.insertNode(f[0]),b.selectNode(f[0]),e=b.getBoundingClientRect(),c={height:e.height,left:e.left,top:e.top},f.remove(),b.detach())):h.selection&&(c=this.getOldIEOffset()),c&&(c.top+=a(j).scrollTop(),c.left+=a(j).scrollLeft()),c},b.prototype.range=function(){var a;if(j.getSelection)return a=j.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=h.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\\r\\n/g,\"\\n\"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints(\"StartToEnd\",a)>-1?c:-g.moveStart(\"character\",-c)),e},b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,h.selection?(c=b.createTextRange(),c.move(\"character\",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},b.prototype.getIEOffset=function(a){var b,c,d,e;return c=this.domInputor.createTextRange(),a||(a=this.getPos()),c.move(\"character\",a),d=c.boundingLeft,e=c.boundingTop,b=c.boundingHeight,{left:d,top:e,height:b}},b.prototype.getOffset=function(b){var c,d,e;return c=this.$inputor,h.selection?(d=this.getIEOffset(b),d.top+=a(j).scrollTop()+c.scrollTop(),d.left+=a(j).scrollLeft()+c.scrollLeft(),d):(d=c.offset(),e=this.getPosition(b),d={left:d.left+e.left-c.scrollLeft(),top:d.top+e.top-c.scrollTop(),height:e.height})},b.prototype.getPosition=function(a){var b,c,e,f,g,h,i;return b=this.$inputor,f=function(a){return a=a.replace(/<|>|`|\"|&/g,\"?\").replace(/\\r\\n|\\r|\\n/g,\"<br/>\"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\\s/g,\"&nbsp;\")),a},void 0===a&&(a=this.getPos()),i=b.val().slice(0,a),e=b.val().slice(a),g=\"<span style='position: relative; display: inline;'>\"+f(i)+\"</span>\",g+=\"<span id='caret' style='position: relative; display: inline;'>|</span>\",g+=\"<span style='position: relative; display: inline;'>\"+f(e)+\"</span>\",h=new d(b),c=h.create(g).rect()},b.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},b}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=[\"borderBottomWidth\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderLeftStyle\",\"borderTopWidth\",\"boxSizing\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"height\",\"letterSpacing\",\"lineHeight\",\"marginBottom\",\"marginLeft\",\"marginRight\",\"marginTop\",\"outlineWidth\",\"overflow\",\"overflowX\",\"overflowY\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"paddingTop\",\"textAlign\",\"textOverflow\",\"textTransform\",\"whiteSpace\",\"wordBreak\",\"wordWrap\"],b.prototype.mirrorCss=function(){var b,c=this;return b={position:\"absolute\",left:-9999,top:0,zIndex:-2e4},\"TEXTAREA\"===this.$inputor.prop(\"tagName\")&&this.css_attr.push(\"width\"),a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a(\"<div></div>\"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find(\"#caret\"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),e={contentEditable:function(a){return!(!a[0].contentEditable||\"true\"!==a[0].contentEditable)}},g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){var b;return b=this.getOffset(a)}},h=null,j=null,i=null,l=function(a){var b;return(b=null!=a?a.iframe:void 0)?(i=b,j=b.contentWindow,h=b.contentDocument||j.document):(i=void 0,j=window,h=document)},f=function(a){var b;h=a[0].ownerDocument,j=h.defaultView||h.parentWindow;try{return i=j.frameElement}catch(c){b=c}},a.fn.caret=function(d,f,h){var i;return g[d]?(a.isPlainObject(f)?(l(f),f=void 0):l(h),i=e.contentEditable(this)?new b(this):new c(this),g[d].apply(i,[f])):a.error(\"Method \"+d+\" does not exist on jQuery.caret\")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=g});","!function(t,e){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return e(t)}):\"object\"==typeof exports?module.exports=e(require(\"jquery\")):e(jQuery)}(this,function(t){var e,i;i={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return r.arrayToDefaultHash(t)},matcher:function(t,e,i,n){var r,o,s,a,h;return t=t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"),i&&(t=\"(?:^|\\\\s)\"+t),r=decodeURI(\"%C3%80\"),o=decodeURI(\"%C3%BF\"),h=n?\" \":\"\",a=new RegExp(t+\"([A-Za-z\"+r+\"-\"+o+\"0-9_\"+h+\"'.+-]*)$|\"+t+\"([^\\\\x00-\\\\xff]*)$\",\"gi\"),s=a.exec(e),s?s[2]||s[1]:null},filter:function(t,e,i){var n,r,o,s;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],~new String(o[i]).toLowerCase().indexOf(t.toLowerCase())&&n.push(o);return n},remoteFilter:null,sorter:function(t,e,i){var n,r,o,s;if(!t)return e;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],o.atwho_order=new String(o[i]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&n.push(o);return n.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var i,n,r;r=t;try{return\"string\"!=typeof t&&(r=t(e)),r.replace(/\\$\\{([^\\}]*)\\}/g,function(t,i,n){return e[i]})}catch(n){return i=n,\"\"}},highlighter:function(t,e){var i;return e?(i=new RegExp(\">\\\\s*([^<]*?)(\"+e.replace(\"+\",\"\\\\+\")+\")([^<]*)\\\\s*<\",\"ig\"),t.replace(i,function(t,e,i,n){return\"> \"+e+\"<strong>\"+i+\"</strong>\"+n+\" <\"})):t},beforeInsert:function(t,e,i){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}};var n;n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var i;return null!=(i=this.$el)&&i.remove(),t(e.body).append(this.$el=t(\"<div class='atwho-container'></div>\"))},e.prototype.setupRootElement=function(e,i){var n,r;if(null==i&&(i=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(r){if(n=r,this.iframe=null,t.fn.atwho.debug)throw new Error(\"iframe auto-discovery is failed.\\nPlease use `setIframe` to set the target iframe manually.\\n\"+n)}}return this.createContainer((this.iframeAsRoot=i)?this.document:document)},e.prototype.controller=function(t){var e,i,n,r;if(this.aliasMaps[t])i=this.controllers[this.aliasMaps[t]];else{r=this.controllers;for(n in r)if(e=r[n],n===t){i=e;break}}return i?i:this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var i,n;return n=(i=this.controllers)[t]||(i[t]=this.$inputor.is(\"[contentEditable]\")?new l(this,t):new s(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on(\"compositionstart\",function(t){return function(e){var i;return null!=(i=t.controller())&&i.view.hide(),t.isComposing=!0,null}}(this)).on(\"compositionend\",function(t){return function(e){return t.isComposing=!1,setTimeout(function(e){return t.dispatch(e)}),null}}(this)).on(\"keyup.atwhoInner\",function(t){return function(e){return t.onKeyup(e)}}(this)).on(\"keydown.atwhoInner\",function(t){return function(e){return t.onKeydown(e)}}(this)).on(\"blur.atwhoInner\",function(t){return function(e){var i;return(i=t.controller())?(i.expectedQueryCBId=null,i.view.hide(e,i.getOpt(\"displayTimeout\"))):void 0}}(this)).on(\"click.atwhoInner\",function(t){return function(e){return t.dispatch(e)}}(this)).on(\"scroll.atwhoInner\",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(i){var n,r;return n=i.target.scrollTop,e!==n&&null!=(r=t.controller())&&r.view.hide(i),e=n,!0}}}(this)())},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(\".atwhoInner\"),this.$el.remove()},e.prototype.dispatch=function(t){var e,i,n,r;n=this.controllers,r=[];for(e in n)i=n[e],r.push(i.lookUp(t));return r},e.prototype.onKeyup=function(e){var n;switch(e.keyCode){case i.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case i.DOWN:case i.UP:case i.CTRL:case i.ENTER:t.noop();break;case i.P:case i.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var n,r;if(r=null!=(n=this.controller())?n.view:void 0,r&&r.visible())switch(e.keyCode){case i.ESC:e.preventDefault(),r.hide(e);break;case i.UP:e.preventDefault(),r.prev();break;case i.DOWN:e.preventDefault(),r.next();break;case i.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case i.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case i.TAB:case i.ENTER:case i.SPACE:if(!r.visible())return;if(!this.controller().getOpt(\"spaceSelectsMatch\")&&e.keyCode===i.SPACE)return;if(!this.controller().getOpt(\"tabSelectsMatch\")&&e.keyCode===i.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var r,o=[].slice;r=function(){function i(e,i){this.app=e,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t(\"#atwho-ground-\"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t(\"<div id='atwho-ground-\"+this.id+\"'></div>\")),this.model=new u(this),this.view=new c(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+\"000000000\").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho[\"default\"],e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger(\"beforeDestroy\"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.callDefault=function(){var i,n,r,s;s=arguments[0],i=2<=arguments.length?o.call(arguments,1):[];try{return e[s].apply(this,i)}catch(r){return n=r,t.error(n+\" Or maybe At.js doesn't have function \"+s)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.getOpt(\"alias\"),n=i?t+\"-\"+i+\".atwho\":t+\".atwho\",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.getOpt(\"callbacks\")[t]||e[t]},i.prototype.getOpt=function(t,e){var i,n;try{return this.setting[t]}catch(n){return i=n,null}},i.prototype.insertContentFor=function(e){var i,n;return n=this.getOpt(\"insertTpl\"),i=t.extend({},e.data(\"item-data\"),{\"atwho-at\":this.at}),this.callbacks(\"tplEval\").call(this,n,i,\"onInsert\")},i.prototype.renderView=function(t){var e;return e=this.getOpt(\"searchKey\"),t=this.callbacks(\"sorter\").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt(\"limit\")))},i.arrayToDefaultHash=function(e){var i,n,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],t.isPlainObject(n)?o.push(n):o.push({name:n});return o},i.prototype.lookUp=function(t){var e,i;if((!t||\"click\"!==t.type||this.getOpt(\"lookUpOnClick\"))&&(!this.getOpt(\"suspendOnComposing\")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(i=this.getOpt(\"delay\"))?this._delayLookUp(e,i):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},i.prototype._delayLookUp=function(t,e){var i,n;return i=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=i),n=e-(i-this.previousCallTime),n>0&&e>n?(this.previousCallTime=i,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==i&&(this.previousCallTime=0),this._lookUp(t))},i.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},i.prototype._generateQueryCBId=function(){return{}},i.prototype._lookUp=function(e){var i;return i=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(i,this,this.expectedQueryCBId))},i}();var s,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.catchQuery=function(){var t,e,i,n,r,o,s;return e=this.$inputor.val(),t=this.$inputor.caret(\"pos\",{iframe:this.app.iframe}),s=e.slice(0,t),r=this.callbacks(\"matcher\").call(this,this.at,s,this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),n=\"string\"==typeof r,n&&r.length<this.getOpt(\"minLen\",0)?void 0:(n&&r.length<=this.getOpt(\"maxLen\",20)?(o=t-r.length,i=o+r.length,this.pos=o,r={text:r,headPos:o,endPos:i},this.trigger(\"matched\",[this.at,r.text])):(r=null,this.view.hide()),this.query=r)},i.prototype.rect=function(){var e,i,n;if(e=this.$inputor.caret(\"offset\",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(i=t(this.app.iframe).offset(),e.left+=i.left,e.top+=i.top),n=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+n}},i.prototype.insert=function(t,e){var i,n,r,o,s;return i=this.$inputor,n=i.val(),r=n.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\" \",t+=o,s=\"\"+r+t+n.slice(this.query.endPos||0),i.val(s),i.caret(\"pos\",r.length+t.length,{iframe:this.app.iframe}),i.is(\":focus\")||i.focus(),i.change()},i}(r);var l,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype._getRange=function(){var t;return t=this.app.window.getSelection(),t.rangeCount>0?t.getRangeAt(0):void 0},n.prototype._setRange=function(e,i,n){return null==n&&(n=this._getRange()),n&&i?(i=t(i)[0],\"after\"===e?(n.setEndAfter(i),n.setStartAfter(i)):(n.setEndBefore(i),n.setStartBefore(i)),n.collapse(!1),this._clearRange(n)):void 0},n.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},n.prototype._movingEvent=function(t){var e;return\"click\"===t.type||(e=t.which)===i.RIGHT||e===i.LEFT||e===i.UP||e===i.DOWN},n.prototype._unwrap=function(e){var i;return e=t(e).unwrap().get(0),(i=e.nextSibling)&&i.nodeValue&&(e.nodeValue+=i.nodeValue,t(i).remove()),e},n.prototype.catchQuery=function(e){var n,r,o,s,a,h,l,u,c,p,f,d;if((d=this._getRange())&&d.collapsed){if(e.which===i.ENTER)return(r=t(d.startContainer).closest(\".atwho-query\")).contents().unwrap(),r.is(\":empty\")&&r.remove(),(r=t(\".atwho-query\",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(d.startContainer).is(this.$inputor))return void this._clearRange();e.which===i.BACKSPACE&&d.startContainer.nodeType===document.ELEMENT_NODE&&(c=d.startOffset-1)>=0?(o=d.cloneRange(),o.setStart(d.startContainer,c),t(o.cloneContents()).contents().last().is(\".atwho-inserted\")&&(a=t(d.startContainer).contents().get(c),this._setRange(\"after\",t(a).contents().last()))):e.which===i.LEFT&&d.startContainer.nodeType===document.TEXT_NODE&&(n=t(d.startContainer.previousSibling),n.is(\".atwho-inserted\")&&0===d.startOffset&&this._setRange(\"after\",n.contents().last()))}if(t(d.startContainer).closest(\".atwho-inserted\").addClass(\"atwho-query\").siblings().removeClass(\"atwho-query\"),(r=t(\".atwho-query\",this.app.document)).length>0&&r.is(\":empty\")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass(\"atwho-inserted\"),r.length>0)switch(e.which){case i.LEFT:return this._setRange(\"before\",r.get(0),d),void r.removeClass(\"atwho-query\");case i.RIGHT:return this._setRange(\"after\",r.get(0).nextSibling,d),void r.removeClass(\"atwho-query\")}if(r.length>0&&(f=r.attr(\"data-atwho-at-query\"))&&(r.empty().html(f).attr(\"data-atwho-at-query\",null),this._setRange(\"after\",r.get(0),d)),o=d.cloneRange(),o.setStart(d.startContainer,0),u=this.callbacks(\"matcher\").call(this,this.at,o.toString(),this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),h=\"string\"==typeof u,0===r.length&&h&&(s=d.startOffset-this.at.length-u.length)>=0&&(d.setStart(d.startContainer,s),r=t(\"<span/>\",this.app.document).attr(this.getOpt(\"editableAtwhoQueryAttrs\")).addClass(\"atwho-query\"),d.surroundContents(r.get(0)),l=r.contents().last().get(0),l&&(/firefox/i.test(navigator.userAgent)?(d.setStart(l,l.length),d.setEnd(l,l.length),this._clearRange(d)):this._setRange(\"after\",l,d))),!(h&&u.length<this.getOpt(\"minLen\",0)))return h&&u.length<=this.getOpt(\"maxLen\",20)?(p={text:u,el:r},this.trigger(\"matched\",[this.at,p.text]),this.query=p):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass(\"atwho-inserted\")?r.removeClass(\"atwho-query\"):!1!==this.callbacks(\"afterMatchFailed\").call(this,this.at,r)&&this._setRange(\"after\",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var e,i,n;return n=this.query.el.offset(),n&&this.query.el[0].getClientRects().length?(this.app.iframe&&!this.app.iframeAsRoot&&(i=(e=t(this.app.iframe)).offset(),n.left+=i.left-this.$inputor.scrollLeft(),n.top+=i.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n):void 0},n.prototype.insert=function(t,e){var i,n,r,o,s;return this.$inputor.is(\":focus\")||this.$inputor.focus(),n=this.getOpt(\"functionOverrides\"),n.insert?n.insert.call(this,t,e):(o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\"\",i=e.data(\"item-data\"),this.query.el.removeClass(\"atwho-query\").addClass(\"atwho-inserted\").html(t).attr(\"data-atwho-at-query\",\"\"+i[\"atwho-at\"]+this.query.text).attr(\"contenteditable\",\"false\"),(r=this._getRange())&&(this.query.el.length&&r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(s=this.app.document.createTextNode(\"\"+o)),this._setRange(\"after\",s,r)),this.$inputor.is(\":focus\")||this.$inputor.focus(),this.$inputor.change())},n}(r);var u;u=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,r;return n=this.fetch(),r=this.context.getOpt(\"searchKey\"),n=this.context.callbacks(\"filter\").call(this.context,t,n,r)||[],i=this.context.callbacks(\"remoteFilter\"),n.length>0||!i&&0===n.length?e(n):i.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks(\"beforeSave\").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return\"string\"==typeof e?t.ajax(e,{dataType:\"json\"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}();var c;c=function(){function e(e){this.context=e,this.$el=t(\"<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>\"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt(\"alias\")||this.context.at.charCodeAt(0),t=this.context.getOpt(\"headerTpl\"),t&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:\"at-view-\"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,i,n;return e=this.$el.find(\"ul\"),i=0,n=0,e.on(\"mousemove.atwho-view\",\"li\",function(r){return function(r){var o;if((i!==r.clientX||n!==r.clientY)&&(i=r.clientX,n=r.clientY,o=t(r.currentTarget),!o.hasClass(\"cur\")))return e.find(\".cur\").removeClass(\"cur\"),o.addClass(\"cur\")}}(this)).on(\"click.atwho-view\",\"li\",function(i){return function(n){return e.find(\".cur\").removeClass(\"cur\"),t(n.currentTarget).addClass(\"cur\"),i.choose(n),n.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(\".cur\").length>0},e.prototype.choose=function(t){var e,i;return(e=this.$el.find(\".cur\")).length&&(i=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks(\"beforeInsert\").call(this.context,i,e,t),e),this.context.trigger(\"inserted\",[e,t]),this.hide(t)),this.context.getOpt(\"hideWithoutSuffix\")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var i,n,r,o;return i=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(i).scrollTop()>t(i).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(i).width()-this.$el.width()-5)&&(e.left=r),n={left:e.left,top:e.bottom},null!=(o=this.context.callbacks(\"beforeReposition\"))&&o.call(this.context,n),this.$el.offset(n),this.context.trigger(\"reposition\",[n])},e.prototype.next=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),e=t.next(),e.length||(e=this.$el.find(\"li:first\")),e.addClass(\"cur\"),i=e[0],n=i.offsetTop+i.offsetHeight+(i.nextSibling?i.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),i=t.prev(),i.length||(i=this.$el.find(\"li:last\")),i.addClass(\"cur\"),n=i[0],e=n.offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,e-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return e=this.context.getOpt(\"scrollDuration\"),e?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger(\"shown\")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger(\"hidden\",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(i,e))},e.prototype.render=function(e){var i,n,r,o,s,a,h;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find(\"ul\").empty(),n=this.$el.find(\"ul\"),h=this.context.getOpt(\"displayTpl\"),r=0,s=e.length;s>r;r++)o=e[r],o=t.extend({},o,{\"atwho-at\":this.context.at}),a=this.context.callbacks(\"tplEval\").call(this.context,h,o,\"onDisplay\"),i=t(this.context.callbacks(\"highlighter\").call(this.context,a,this.context.query.text)),i.data(\"item-data\",o),n.append(i);return this.show(),this.context.getOpt(\"highlightFirst\")?n.find(\"li:first\").addClass(\"cur\"):void 0},e}();var p;p={load:function(t,e){var i;return(i=this.controller(t))?i.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data(\"atwho\",null)}},t.fn.atwho=function(e){var i,r;return i=arguments,r=null,this.filter('textarea, input, [contenteditable=\"\"], [contenteditable=true]').each(function(){var o,s;return(s=(o=t(this)).data(\"atwho\"))||o.data(\"atwho\",s=new n(this)),\"object\"!=typeof e&&e?p[e]&&s?r=p[e].apply(s,Array.prototype.slice.call(i,1)):t.error(\"Method \"+e+\" does not exist on jQuery.atwho\"):s.reg(e.at,e)}),null!=r?r:this},t.fn.atwho[\"default\"]={at:void 0,alias:void 0,data:null,displayTpl:\"<li>${name}</li>\",insertTpl:\"${atwho-at}${name}\",headerTpl:null,callbacks:e,functionOverrides:{},searchKey:\"name\",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./autocomplete.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8e87fa8e\", content, true, {});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".atwho-view{position:absolute;top:0;left:0;display:none;margin-top:18px;background:var(--color-main-background);color:var(--color-main-text);border:1px solid var(--color-border);border-radius:var(--border-radius);box-shadow:0 0 5px var(--color-box-shadow);min-width:120px;z-index:11110 !important}.atwho-view .atwho-header{padding:5px;margin:5px;cursor:pointer;border-bottom:solid 1px var(--color-border);color:var(--color-main-text);font-size:11px;font-weight:bold}.atwho-view .atwho-header .small{color:var(--color-main-text);float:right;padding-top:2px;margin-right:-5px;font-size:12px;font-weight:normal}.atwho-view .atwho-header:hover{cursor:default}.atwho-view .cur{background:var(--color-primary);color:var(--color-primary-text)}.atwho-view .cur small{color:var(--color-primary-text)}.atwho-view strong{color:var(--color-main-text);font-weight:normal}.atwho-view .cur strong{color:var(--color-primary-text);font-weight:normal}.atwho-view ul{list-style:none;padding:0;margin:auto;max-height:200px;overflow-y:auto}.atwho-view ul li{display:block;padding:5px 10px;border-bottom:1px solid var(--color-border);cursor:pointer}.atwho-view small{font-size:smaller;color:var(--color-main-text);font-weight:normal}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./comments.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"477a5c21\", content, true, {});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#commentsTabView .emptycontent{margin-top:0}#commentsTabView .newCommentForm{margin-left:36px;position:relative}#commentsTabView .newCommentForm .message{width:100%;padding:10px;min-height:44px;margin:0;padding-right:30px}#commentsTabView .newCommentForm .submit,#commentsTabView .newCommentForm .submitLoading{width:44px;height:44px;margin:0;padding:13px;background-color:transparent;border:none;opacity:.3;position:absolute;bottom:0;right:0}#commentsTabView .deleteLoading{padding:14px;vertical-align:middle}#commentsTabView .newCommentForm .submit:not(:disabled):hover,#commentsTabView .newCommentForm .submit:not(:disabled):focus{opacity:1}#commentsTabView .newCommentForm div.message{resize:none}#commentsTabView .newCommentForm div.message:empty:before{content:attr(data-placeholder);color:grey}#commentsTabView .comment{position:relative;padding:10px 0 15px}#commentsTabView .comments .comment{border-top:1px solid var(--color-border)}#commentsTabView .comment .avatar,.atwho-view-ul * .avatar{width:32px;height:32px;line-height:32px;margin-right:5px}#commentsTabView .comment .message .avatar,.atwho-view-ul * .avatar{display:inline-block}#activityTabView li.comment.collapsed .activitymessage,#commentsTabView .comment.collapsed .message{white-space:pre-wrap}#activityTabView li.comment.collapsed .activitymessage,#commentsTabView .comment.collapsed .message{max-height:70px;overflow:hidden}#activityTabView li.comment .message-overlay,#commentsTabView .comment .message-overlay{display:none}#activityTabView li.comment.collapsed .message-overlay,#commentsTabView .comment.collapsed .message-overlay{display:block;position:absolute;z-index:2;height:50px;pointer-events:none;left:0;right:0;bottom:0;background:-moz-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-webkit-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-o-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:-ms-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background:linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));background-repeat:no-repeat}#commentsTabView .hidden{display:none !important}#commentsTabView .comment .authorRow{min-height:44px}#commentsTabView .comment .authorRow .tooltip{margin-top:5px}.atwho-view-ul * .avatar-name-wrapper,#commentsTabView .comment .authorRow{position:relative;display:inline-flex;align-items:center;width:100%}#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser),#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar,#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar img,#commentsTabView .comment .authorRow .avatar:not(.currentUser),#commentsTabView .comment .authorRow .author:not(.currentUser){cursor:pointer}.atwho-view-ul .avatar-name-wrapper,.atwho-view-ul .avatar-name-wrapper .avatar,.atwho-view-ul .avatar-name-wrapper .avatar img{cursor:pointer}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper{position:relative;display:inline;vertical-align:top;background-color:var(--color-background-dark);border-radius:50vh;padding:1px 7px 1px 1px;white-space:nowrap}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar{height:16px;width:16px;vertical-align:middle;padding:1px;margin-top:-3px;margin-left:0;margin-right:2px}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar img,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar img{vertical-align:top}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper strong,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper strong{font-weight:bold}#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper.currentUser,#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper.currentUser{background-color:var(--color-primary);color:var(--color-primary-text)}.atwho-view-ul * .avatar-name-wrapper{white-space:nowrap}#commentsTabView .comment .author,#commentsTabView .comment .date{opacity:.5}#commentsTabView .comment .author{max-width:210px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}#commentsTabView .comment .date{margin-left:auto;padding:10px 0px}#commentsTabView .comments>li:not(.newCommentRow) .message{padding-left:40px;word-wrap:break-word;overflow-wrap:break-word}#commentsTabView .comment .action{opacity:0.3;padding:14px;display:block}#commentsTabView .comment .action:hover,#commentsTabView .comment .action:focus{opacity:1}#commentsTabView .newCommentRow .action-container{margin-left:auto}#commentsTabView .comment.disabled .message{opacity:0.3}#commentsTabView .comment.disabled .action{display:none}#commentsTabView .message.error{color:#e9322d;border-color:#e9322d;box-shadow:0 0 6px #f8b9b7}.app-files .action-comment{padding:16px 14px}#commentsTabView .comment .message .contactsmenu-popover{left:-6px;top:24px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/* eslint-disable */\n/**\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n\nimport escapeHTML from 'escape-html'\n\n(function(OC, OCA) {\n\n\t/**\n\t * @memberof OCA.Comments\n\t */\n\tvar CommentsTabView = OCA.Files.DetailTabView.extend(\n\t\t/** @lends OCA.Comments.CommentsTabView.prototype */ {\n\t\t\tid: 'commentsTabView',\n\t\t\tclassName: 'tab commentsTabView',\n\t\t\t_autoCompleteData: undefined,\n\t\t\t_commentsModifyMenu: undefined,\n\n\t\t\tevents: {\n\t\t\t\t'submit .newCommentForm': '_onSubmitComment',\n\t\t\t\t'click .showMore': '_onClickShowMore',\n\t\t\t\t'click .cancel': '_onClickCloseComment',\n\t\t\t\t'click .comment': '_onClickComment',\n\t\t\t\t'keyup div.message': '_onTextChange',\n\t\t\t\t'change div.message': '_onTextChange',\n\t\t\t\t'input div.message': '_onTextChange',\n\t\t\t\t'paste div.message': '_onPaste'\n\t\t\t},\n\n\t\t\t_commentMaxLength: 1000,\n\n\t\t\tinitialize: function() {\n\t\t\t\tOCA.Files.DetailTabView.prototype.initialize.apply(this, arguments)\n\t\t\t\tthis.collection = new OCA.Comments.CommentCollection()\n\t\t\t\tthis.collection.on('request', this._onRequest, this)\n\t\t\t\tthis.collection.on('sync', this._onEndRequest, this)\n\t\t\t\tthis.collection.on('add', this._onAddModel, this)\n\t\t\t\tthis.collection.on('change:message', this._onChangeModel, this)\n\n\t\t\t\tthis._commentMaxThreshold = this._commentMaxLength * 0.9\n\n\t\t\t\t// TODO: error handling\n\t\t\t\t_.bindAll(this, '_onTypeComment', '_initAutoComplete', '_onAutoComplete')\n\t\t\t},\n\n\t\t\ttemplate: function(params) {\n\t\t\t\tvar currentUser = OC.getCurrentUser()\n\t\t\t\treturn OCA.Comments.Templates['view'](_.extend({\n\t\t\t\t\tactorId: currentUser.uid,\n\t\t\t\t\tactorDisplayName: currentUser.displayName\n\t\t\t\t}, params))\n\t\t\t},\n\n\t\t\teditCommentTemplate: function(params) {\n\t\t\t\tvar currentUser = OC.getCurrentUser()\n\t\t\t\treturn OCA.Comments.Templates['edit_comment'](_.extend({\n\t\t\t\t\tactorId: currentUser.uid,\n\t\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\t\tnewMessagePlaceholder: t('comments', 'New comment '),\n\t\t\t\t\tsubmitText: t('comments', 'Post'),\n\t\t\t\t\tcancelText: t('comments', 'Cancel'),\n\t\t\t\t\ttag: 'li'\n\t\t\t\t}, params))\n\t\t\t},\n\n\t\t\tcommentTemplate: function(params) {\n\t\t\t\tparams = _.extend({\n\t\t\t\t\teditTooltip: t('comments', 'Edit comment'),\n\t\t\t\t\tisUserAuthor: OC.getCurrentUser().uid === params.actorId,\n\t\t\t\t\tisLong: this._isLong(params.message)\n\t\t\t\t}, params)\n\n\t\t\t\tif (params.actorType === 'deleted_users') {\n\t\t\t\t// makes the avatar a X\n\t\t\t\t\tparams.actorId = null\n\t\t\t\t\tparams.actorDisplayName = t('comments', '[Deleted user]')\n\t\t\t\t}\n\n\t\t\t\treturn OCA.Comments.Templates['comment'](params)\n\t\t\t},\n\n\t\t\tgetLabel: function() {\n\t\t\t\treturn t('comments', 'Comments')\n\t\t\t},\n\n\t\t\tgetIcon: function() {\n\t\t\t\treturn 'icon-comment'\n\t\t\t},\n\n\t\t\tsetFileInfo: function(fileInfo) {\n\t\t\t\tif (fileInfo) {\n\t\t\t\t\tthis.model = fileInfo\n\n\t\t\t\t\tthis.render()\n\t\t\t\t\tthis._initAutoComplete($('#commentsTabView').find('.newCommentForm .message'))\n\t\t\t\t\tthis.collection.setObjectId(this.model.id)\n\t\t\t\t\t// reset to first page\n\t\t\t\t\tthis.collection.reset([], { silent: true })\n\t\t\t\t\tthis.nextPage()\n\t\t\t\t} else {\n\t\t\t\t\tthis.model = null\n\t\t\t\t\tthis.render()\n\t\t\t\t\tthis.collection.reset()\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trender: function() {\n\t\t\t\tthis.$el.html(this.template({\n\t\t\t\t\temptyResultLabel: t('comments', 'No comments yet, start the conversation!'),\n\t\t\t\t\tmoreLabel: t('comments', 'More comments ')\n\t\t\t\t}))\n\t\t\t\tthis.$el.find('.comments').before(this.editCommentTemplate({ tag: 'div' }))\n\t\t\t\tthis.$el.find('.has-tooltip').tooltip()\n\t\t\t\tthis.$container = this.$el.find('ul.comments')\n\t\t\t\tthis.$el.find('.avatar').avatar(OC.getCurrentUser().uid, 32)\n\t\t\t\tthis.delegateEvents()\n\t\t\t\tthis.$el.find('.message').on('keydown input change', this._onTypeComment)\n\n\t\t\t\tautosize(this.$el.find('.newCommentRow .message'))\n\t\t\t\tthis.$el.find('.newCommentForm .message').focus()\n\t\t\t},\n\n\t\t\t_initAutoComplete: function($target) {\n\t\t\t\tvar s = this\n\t\t\t\tvar limit = 10\n\t\t\t\tif (!_.isUndefined(OC.appConfig.comments)) {\n\t\t\t\t\tlimit = OC.appConfig.comments.maxAutoCompleteResults\n\t\t\t\t}\n\t\t\t\t$target.atwho({\n\t\t\t\t\tat: '@',\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\tremoteFilter: s._onAutoComplete,\n\t\t\t\t\t\thighlighter: function(li) {\n\t\t\t\t\t\t// misuse the highlighter callback to instead of\n\t\t\t\t\t\t// highlighting loads the avatars.\n\t\t\t\t\t\t\tvar $li = $(li)\n\t\t\t\t\t\t\t$li.find('.avatar').avatar(undefined, 32)\n\t\t\t\t\t\t\treturn $li\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsorter: function(q, items) { return items }\n\t\t\t\t\t},\n\t\t\t\t\tdisplayTpl: function(item) {\n\t\t\t\t\t\treturn '<li>'\n\t\t\t\t\t\t+ '<span class=\"avatar-name-wrapper\">'\n\t\t\t\t\t\t\t+ '<span class=\"avatar\" '\n\t\t\t\t\t\t\t\t\t+ 'data-username=\"' + escapeHTML(item.id) + '\" ' // for avatars\n\t\t\t\t\t\t\t\t\t+ 'data-user=\"' + escapeHTML(item.id) + '\" ' // for contactsmenu\n\t\t\t\t\t\t\t\t\t+ 'data-user-display-name=\"' + escapeHTML(item.label) + '\">'\n\t\t\t\t\t\t\t+ '</span>'\n\t\t\t\t\t\t\t+ '<strong>' + escapeHTML(item.label) + '</strong>'\n\t\t\t\t\t\t+ '</span></li>'\n\t\t\t\t\t},\n\t\t\t\t\tinsertTpl: function(item) {\n\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t+ '<span class=\"avatar-name-wrapper\">'\n\t\t\t\t\t\t\t+ '<span class=\"avatar\" '\n\t\t\t\t\t\t\t\t\t+ 'data-username=\"' + escapeHTML(item.id) + '\" ' // for avatars\n\t\t\t\t\t\t\t\t\t+ 'data-user=\"' + escapeHTML(item.id) + '\" ' // for contactsmenu\n\t\t\t\t\t\t\t\t\t+ 'data-user-display-name=\"' + escapeHTML(item.label) + '\">'\n\t\t\t\t\t\t\t+ '</span>'\n\t\t\t\t\t\t\t+ '<strong>' + escapeHTML(item.label) + '</strong>'\n\t\t\t\t\t\t+ '</span>'\n\t\t\t\t\t},\n\t\t\t\t\tsearchKey: 'label'\n\t\t\t\t})\n\t\t\t\t$target.on('inserted.atwho', function(je, $el) {\n\t\t\t\t\tvar editionMode = true\n\t\t\t\t\ts._postRenderItem(\n\t\t\t\t\t// we need to pass the parent of the inserted element\n\t\t\t\t\t// passing the whole comments form would re-apply and request\n\t\t\t\t\t// avatars from the server\n\t\t\t\t\t\t$(je.target).find(\n\t\t\t\t\t\t\t'span[data-username=\"' + $el.find('[data-username]').data('username') + '\"]'\n\t\t\t\t\t\t).parent(),\n\t\t\t\t\t\teditionMode\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t_onAutoComplete: function(query, callback) {\n\t\t\t\tvar s = this\n\t\t\t\tif (!_.isUndefined(this._autoCompleteRequestTimer)) {\n\t\t\t\t\tclearTimeout(this._autoCompleteRequestTimer)\n\t\t\t\t}\n\t\t\t\tthis._autoCompleteRequestTimer = _.delay(function() {\n\t\t\t\t\tif (!_.isUndefined(this._autoCompleteRequestCall)) {\n\t\t\t\t\t\tthis._autoCompleteRequestCall.abort()\n\t\t\t\t\t}\n\t\t\t\t\tthis._autoCompleteRequestCall = $.ajax({\n\t\t\t\t\t\turl: OC.linkToOCS('core', 2) + 'autocomplete/get',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tsearch: query,\n\t\t\t\t\t\t\titemType: 'files',\n\t\t\t\t\t\t\titemId: s.model.get('id'),\n\t\t\t\t\t\t\tsorter: 'commenters|share-recipients',\n\t\t\t\t\t\t\tlimit: OC.appConfig.comments.maxAutoCompleteResults\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbeforeSend: function(request) {\n\t\t\t\t\t\t\trequest.setRequestHeader('Accept', 'application/json')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(result) {\n\t\t\t\t\t\t\tcallback(result.ocs.data)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}, 400)\n\t\t\t},\n\n\t\t\t_formatItem: function(commentModel) {\n\t\t\t\tvar timestamp = new Date(commentModel.get('creationDateTime')).getTime()\n\t\t\t\tvar data = _.extend({\n\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\tdate: OC.Util.relativeModifiedDate(timestamp),\n\t\t\t\t\taltDate: OC.Util.formatDate(timestamp),\n\t\t\t\t\tformattedMessage: this._formatMessage(commentModel.get('message'), commentModel.get('mentions'))\n\t\t\t\t}, commentModel.attributes)\n\t\t\t\treturn data\n\t\t\t},\n\n\t\t\t_toggleLoading: function(state) {\n\t\t\t\tthis._loading = state\n\t\t\t\tthis.$el.find('.loading').toggleClass('hidden', !state)\n\t\t\t},\n\n\t\t\t_onRequest: function(type) {\n\t\t\t\tif (type === 'REPORT') {\n\t\t\t\t\tthis._toggleLoading(true)\n\t\t\t\t\tthis.$el.find('.showMore').addClass('hidden')\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t_onEndRequest: function(type) {\n\t\t\t\tvar fileInfoModel = this.model\n\t\t\t\tthis._toggleLoading(false)\n\t\t\t\tthis.$el.find('.emptycontent').toggleClass('hidden', !!this.collection.length)\n\t\t\t\tthis.$el.find('.showMore').toggleClass('hidden', !this.collection.hasMoreResults())\n\n\t\t\t\tif (type !== 'REPORT') {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// find first unread comment\n\t\t\t\tvar firstUnreadComment = this.collection.findWhere({ isUnread: true })\n\t\t\t\tif (firstUnreadComment) {\n\t\t\t\t// update read marker\n\t\t\t\t\tthis.collection.updateReadMarker(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\tfileInfoModel.set('commentsUnread', 0)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tthis.$el.find('.newCommentForm .message').focus()\n\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * takes care of post-rendering after a new comment was added to the\n\t\t\t * collection\n\t\t\t *\n\t\t\t * @param model\n\t\t\t * @param collection\n\t\t\t * @param options\n\t\t\t * @private\n\t\t\t */\n\t\t\t_onAddModel: function(model, collection, options) {\n\t\t\t// we need to render it immediately, to ensure that the right\n\t\t\t// order of comments is kept on opening comments tab\n\t\t\t\tvar $comment = $(this.commentTemplate(this._formatItem(model)))\n\t\t\t\tif (!_.isUndefined(options.at) && collection.length > 1) {\n\t\t\t\t\tthis.$container.find('li').eq(options.at).before($comment)\n\t\t\t\t} else {\n\t\t\t\t\tthis.$container.append($comment)\n\t\t\t\t}\n\t\t\t\tthis._postRenderItem($comment)\n\t\t\t\t$('#commentsTabView').find('.newCommentForm div.message').text('').prop('contenteditable', true)\n\n\t\t\t\t// we need to update the model, because it consists of client data\n\t\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\t\tvar oldMentions = model.get('mentions')\n\t\t\t\tvar self = this\n\t\t\t\tmodel.fetch({\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tif (_.isEqual(oldMentions, model.get('mentions'))) {\n\t\t\t\t\t\t// don't attempt to render if unnecessary, avoids flickering\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar $updated = $(self.commentTemplate(self._formatItem(model)))\n\t\t\t\t\t\t$comment.html($updated.html())\n\t\t\t\t\t\tself._postRenderItem($comment)\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * takes care of post-rendering after a new comment was edited\n\t\t\t *\n\t\t\t * @param model\n\t\t\t * @private\n\t\t\t */\n\t\t\t_onChangeModel: function(model) {\n\t\t\t\tif (model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tvar $form = this.$container.find('.comment[data-id=\"' + model.id + '\"] form')\n\t\t\t\tvar $row = $form.closest('.comment')\n\t\t\t\tvar $target = $row.data('commentEl')\n\t\t\t\tif (_.isUndefined($target)) {\n\t\t\t\t// ignore noise  this is only set after editing a comment and hitting post\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tvar self = this\n\n\t\t\t\t// we need to update the model, because it consists of client data\n\t\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\t\tmodel.fetch({\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\t$target.removeClass('hidden')\n\t\t\t\t\t\t$row.remove()\n\n\t\t\t\t\t\tvar $message = $target.find('.message')\n\t\t\t\t\t\t$message\n\t\t\t\t\t\t\t.html(self._formatMessage(model.get('message'), model.get('mentions')))\n\t\t\t\t\t\t\t.find('.avatar')\n\t\t\t\t\t\t\t.each(function() { $(this).avatar() })\n\t\t\t\t\t\tself._postRenderItem($message)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t_postRenderItem: function($el, editionMode) {\n\t\t\t\t$el.find('.has-tooltip').tooltip()\n\t\t\t\tvar inlineAvatars = $el.find('.message .avatar')\n\t\t\t\tif ($($el.context).hasClass('message')) {\n\t\t\t\t\tinlineAvatars = $el.find('.avatar')\n\t\t\t\t}\n\t\t\t\tinlineAvatars.each(function() {\n\t\t\t\t\tvar $this = $(this)\n\t\t\t\t\t$this.avatar($this.attr('data-username'), 16)\n\t\t\t\t})\n\t\t\t\t$el.find('.authorRow .avatar').each(function() {\n\t\t\t\t\tvar $this = $(this)\n\t\t\t\t\t$this.avatar($this.attr('data-username'), 32)\n\t\t\t\t})\n\n\t\t\t\tvar username = $el.find('.avatar').data('username')\n\t\t\t\tif (username !== OC.getCurrentUser().uid) {\n\t\t\t\t\t$el.find('.authorRow .avatar, .authorRow .author').contactsMenu(\n\t\t\t\t\t\tusername, 0, $el.find('.authorRow'))\n\t\t\t\t}\n\n\t\t\t\tvar $message = $el.find('.message')\n\t\t\t\tif ($message.length === 0) {\n\t\t\t\t// it is the case when writing a comment and mentioning a person\n\t\t\t\t\t$message = $el\n\t\t\t\t}\n\n\t\t\t\tif (!editionMode) {\n\t\t\t\t\tvar self = this\n\t\t\t\t\t// add the dropdown menu to display the edit and delete option\n\t\t\t\t\tvar modifyCommentMenu = new OCA.Comments.CommentsModifyMenu()\n\t\t\t\t\t$el.find('.authorRow').append(modifyCommentMenu.$el)\n\t\t\t\t\t$el.find('.more').on('click', _.bind(modifyCommentMenu.show, modifyCommentMenu))\n\n\t\t\t\t\tself.listenTo(modifyCommentMenu, 'select:menu-item-clicked', function(ev, action) {\n\t\t\t\t\t\tif (action === 'edit') {\n\t\t\t\t\t\t\tself._onClickEditComment(ev)\n\t\t\t\t\t\t} else if (action === 'delete') {\n\t\t\t\t\t\t\tself._onClickDeleteComment(ev)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis._postRenderMessage($message, editionMode)\n\t\t\t},\n\n\t\t\t_postRenderMessage: function($el, editionMode) {\n\t\t\t\tif (editionMode) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t$el.find('.avatar-name-wrapper').each(function() {\n\t\t\t\t\tvar $this = $(this)\n\t\t\t\t\tvar $avatar = $this.find('.avatar')\n\n\t\t\t\t\tvar user = $avatar.data('user')\n\t\t\t\t\tif (user !== OC.getCurrentUser().uid) {\n\t\t\t\t\t\t$this.contactsMenu(user, 0, $this)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convert a message to be displayed in HTML,\n\t\t\t * converts newlines to <br> tags.\n\t\t\t */\n\t\t\t_formatMessage: function(message, mentions, editMode) {\n\t\t\t\tmessage = escapeHTML(message).replace(/\\n/g, '<br/>')\n\n\t\t\t\tfor (var i in mentions) {\n\t\t\t\t\tif (!mentions.hasOwnProperty(i)) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tvar mention = '@' + mentions[i].mentionId\n\t\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\t\tmention = _.escape('@\"' + mentions[i].mentionId + '\"')\n\t\t\t\t\t}\n\n\t\t\t\t\t// escape possible regex characters in the name\n\t\t\t\t\tmention = mention.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n\t\t\t\t\tvar regex = new RegExp('(^|\\\\s)(' + mention + ')\\\\b', 'g')\n\t\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\t\tregex = new RegExp('(^|\\\\s)(' + mention + ')', 'g')\n\t\t\t\t\t}\n\n\t\t\t\t\tvar displayName = this._composeHTMLMention(mentions[i].mentionId, mentions[i].mentionDisplayName)\n\n\t\t\t\t\t// replace every mention either at the start of the input or after a whitespace\n\t\t\t\t\t// followed by a non-word character.\n\t\t\t\t\tmessage = message.replace(regex,\n\t\t\t\t\t\tfunction(match, p1) {\n\t\t\t\t\t\t// to  get number of whitespaces (0 vs 1) right\n\t\t\t\t\t\t\treturn p1 + displayName\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tif (editMode !== true) {\n\t\t\t\t\tmessage = OCP.Comments.plainToRich(message)\n\t\t\t\t}\n\t\t\t\treturn message\n\t\t\t},\n\n\t\t\t_composeHTMLMention: function(uid, displayName) {\n\t\t\t\tvar avatar = ''\n\t\t\t\t+ '<span class=\"avatar\" '\n\t\t\t\t\t\t+ 'data-username=\"' + _.escape(uid) + '\" '\n\t\t\t\t\t\t+ 'data-user=\"' + _.escape(uid) + '\" '\n\t\t\t\t\t\t+ 'data-user-display-name=\"' + _.escape(displayName) + '\">'\n\t\t\t\t+ '</span>'\n\n\t\t\t\tvar isCurrentUser = (uid === OC.getCurrentUser().uid)\n\n\t\t\t\treturn ''\n\t\t\t\t+ '<span class=\"atwho-inserted\" contenteditable=\"false\">'\n\t\t\t\t\t+ '<span class=\"avatar-name-wrapper' + (isCurrentUser ? ' currentUser' : '') + '\">'\n\t\t\t\t\t\t+ avatar\n\t\t\t\t\t\t+ '<strong>' + _.escape(displayName) + '</strong>'\n\t\t\t\t\t+ '</span>'\n\t\t\t\t+ '</span>'\n\t\t\t},\n\n\t\t\tnextPage: function() {\n\t\t\t\tif (this._loading || !this.collection.hasMoreResults()) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.collection.fetchNext()\n\t\t\t},\n\n\t\t\t_onClickEditComment: function(ev) {\n\t\t\t\tev.preventDefault()\n\t\t\t\tvar $comment = $(ev.target).closest('.comment')\n\t\t\t\tvar commentId = $comment.data('id')\n\t\t\t\tvar commentToEdit = this.collection.get(commentId)\n\t\t\t\tvar $formRow = $(this.editCommentTemplate(_.extend({\n\t\t\t\t\tisEditMode: true,\n\t\t\t\t\tsubmitText: t('comments', 'Save')\n\t\t\t\t}, commentToEdit.attributes)))\n\n\t\t\t\t$comment.addClass('hidden').removeClass('collapsed')\n\t\t\t\t// spawn form\n\t\t\t\t$comment.after($formRow)\n\t\t\t\t$formRow.data('commentEl', $comment)\n\t\t\t\t$formRow.find('.message').on('keydown input change', this._onTypeComment)\n\n\t\t\t\t// copy avatar element from original to avoid flickering\n\t\t\t\t$formRow.find('.avatar:first').replaceWith($comment.find('.avatar:first').clone())\n\t\t\t\t$formRow.find('.has-tooltip').tooltip()\n\n\t\t\t\tvar $message = $formRow.find('.message')\n\t\t\t\t$message\n\t\t\t\t\t.html(this._formatMessage(commentToEdit.get('message'), commentToEdit.get('mentions'), true))\n\t\t\t\t\t.find('.avatar')\n\t\t\t\t\t.each(function() { $(this).avatar() })\n\t\t\t\tvar editionMode = true\n\t\t\t\tthis._postRenderItem($message, editionMode)\n\n\t\t\t\t// Enable autosize\n\t\t\t\tautosize($formRow.find('.message'))\n\n\t\t\t\t// enable autocomplete\n\t\t\t\tthis._initAutoComplete($formRow.find('.message'))\n\n\t\t\t\treturn false\n\t\t\t},\n\n\t\t\t_onTypeComment: function(ev) {\n\t\t\t\tvar $field = $(ev.target)\n\t\t\t\tvar len = $field.text().length\n\t\t\t\tvar $submitButton = $field.data('submitButtonEl')\n\t\t\t\tif (!$submitButton) {\n\t\t\t\t\t$submitButton = $field.closest('form').find('.submit')\n\t\t\t\t\t$field.data('submitButtonEl', $submitButton)\n\t\t\t\t}\n\t\t\t\t$field.tooltip('hide')\n\t\t\t\tif (len > this._commentMaxThreshold) {\n\t\t\t\t\t$field.attr('data-original-title', t('comments', 'Allowed characters {count} of {max}', { count: len, max: this._commentMaxLength }))\n\t\t\t\t\t$field.tooltip({ trigger: 'manual' })\n\t\t\t\t\t$field.tooltip('show')\n\t\t\t\t\t$field.addClass('error')\n\t\t\t\t}\n\n\t\t\t\tvar limitExceeded = (len > this._commentMaxLength)\n\t\t\t\t$field.toggleClass('error', limitExceeded)\n\t\t\t\t$submitButton.prop('disabled', limitExceeded)\n\n\t\t\t\t// Submits form with Enter, but Shift+Enter is a new line. If the\n\t\t\t\t// autocomplete popover is being shown Enter does not submit the\n\t\t\t\t// form either; it will be handled by At.js which will add the\n\t\t\t\t// currently selected item to the message.\n\t\t\t\tif (ev.keyCode === 13 && !ev.shiftKey && !$field.atwho('isSelecting')) {\n\t\t\t\t\t$submitButton.click()\n\t\t\t\t\tev.preventDefault()\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t_onClickComment: function(ev) {\n\t\t\t\tvar $row = $(ev.target)\n\t\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t\t$row = $row.closest('.comment')\n\t\t\t\t}\n\t\t\t\t$row.removeClass('collapsed')\n\t\t\t},\n\n\t\t\t_onClickCloseComment: function(ev) {\n\t\t\t\tev.preventDefault()\n\t\t\t\tvar $row = $(ev.target).closest('.comment')\n\t\t\t\t$row.data('commentEl').removeClass('hidden')\n\t\t\t\t$row.remove()\n\t\t\t\treturn false\n\t\t\t},\n\n\t\t\t_onClickDeleteComment: function(ev) {\n\t\t\t\tev.preventDefault()\n\t\t\t\tvar $comment = $(ev.target).closest('.comment')\n\t\t\t\tvar commentId = $comment.data('id')\n\t\t\t\tvar $loading = $comment.find('.deleteLoading')\n\t\t\t\tvar $moreIcon = $comment.find('.more')\n\n\t\t\t\t$comment.addClass('disabled')\n\t\t\t\t$loading.removeClass('hidden')\n\t\t\t\t$moreIcon.addClass('hidden')\n\n\t\t\t\t$comment.data('commentEl', $comment)\n\n\t\t\t\tthis.collection.get(commentId).destroy({\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t$comment.data('commentEl').remove()\n\t\t\t\t\t\t$comment.remove()\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\t$loading.addClass('hidden')\n\t\t\t\t\t\t$moreIcon.removeClass('hidden')\n\t\t\t\t\t\t$comment.removeClass('disabled')\n\n\t\t\t\t\t\tOC.Notification.showTemporary(t('comments', 'Error occurred while retrieving comment with ID {id}', { id: commentId }))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn false\n\t\t\t},\n\n\t\t\t_onClickShowMore: function(ev) {\n\t\t\t\tev.preventDefault()\n\t\t\t\tthis.nextPage()\n\t\t\t},\n\n\t\t\t/**\n\t\t * takes care of updating comment element states after submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {OC.Backbone.Model} model\n\t\t * @param {jQuery} $form\n\t\t * @private\n\t\t */\n\t\t\t_onSubmitSuccess: function(model, $form) {\n\t\t\t\tvar $submit = $form.find('.submit')\n\t\t\t\tvar $loading = $form.find('.submitLoading')\n\t\t\t\tvar $message = $form.find('.message')\n\n\t\t\t\t$submit.removeClass('hidden')\n\t\t\t\t$loading.addClass('hidden')\n\t\t\t\t$message.prop('contenteditable', true)\n\t\t\t\t$message.text('')\n\t\t\t},\n\n\t\t\t_commentBodyHTML2Plain: function($el) {\n\t\t\t\tvar $comment = $el.clone()\n\n\t\t\t\t$comment.find('.avatar-name-wrapper').each(function() {\n\t\t\t\t\tvar $this = $(this)\n\t\t\t\t\tvar $inserted = $this.parent()\n\t\t\t\t\tvar userId = $this.find('.avatar').data('username').toString()\n\t\t\t\t\tif (userId.indexOf(' ') !== -1) {\n\t\t\t\t\t\t$inserted.html('@\"' + userId + '\"')\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$inserted.html('@' + userId)\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t$comment.html(OCP.Comments.richToPlain($comment.html()))\n\n\t\t\t\tvar oldHtml\n\t\t\t\tvar html = $comment.html()\n\t\t\t\tdo {\n\t\t\t\t// replace works one by one\n\t\t\t\t\toldHtml = html\n\t\t\t\t\thtml = oldHtml.replace('<br>', '\\n')\t// preserve line breaks\n\t\t\t\t} while (oldHtml !== html)\n\t\t\t\t$comment.html(html)\n\n\t\t\t\treturn $comment.text()\n\t\t\t},\n\n\t\t\t_onSubmitComment: function(e) {\n\t\t\t\tvar self = this\n\t\t\t\tvar $form = $(e.target)\n\t\t\t\tvar commentId = $form.closest('.comment').data('id')\n\t\t\t\tvar currentUser = OC.getCurrentUser()\n\t\t\t\tvar $submit = $form.find('.submit')\n\t\t\t\tvar $loading = $form.find('.submitLoading')\n\t\t\t\tvar $commentField = $form.find('.message')\n\t\t\t\tvar message = $commentField.text().trim()\n\t\t\t\te.preventDefault()\n\n\t\t\t\tif (!message.length || message.length > this._commentMaxLength) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t$commentField.prop('contenteditable', false)\n\t\t\t\t$submit.addClass('hidden')\n\t\t\t\t$loading.removeClass('hidden')\n\n\t\t\t\tmessage = this._commentBodyHTML2Plain($commentField)\n\t\t\t\tif (commentId) {\n\t\t\t\t\t// edit mode\n\t\t\t\t\tvar comment = this.collection.get(commentId)\n\t\t\t\t\tcomment.save({\n\t\t\t\t\t\tmessage: message\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\t\tself._onSubmitSuccess(model, $form)\n\t\t\t\t\t\t\tif (model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\t\t\t\t\t// model change event doesn't trigger, manually remove the row.\n\t\t\t\t\t\t\t\tvar $row = $form.closest('.comment')\n\t\t\t\t\t\t\t\t$row.data('commentEl').removeClass('hidden')\n\t\t\t\t\t\t\t\t$row.remove()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\tself._onSubmitError($form, commentId)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.collection.create({\n\t\t\t\t\t\tactorId: currentUser.uid,\n\t\t\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\t\t\tactorType: 'users',\n\t\t\t\t\t\tverb: 'comment',\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tcreationDateTime: (new Date()).toUTCString()\n\t\t\t\t\t}, {\n\t\t\t\t\t\tat: 0,\n\t\t\t\t\t\t// wait for real creation before adding\n\t\t\t\t\t\twait: true,\n\t\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\t\tself._onSubmitSuccess(model, $form)\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\tself._onSubmitError($form, undefined)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\treturn false\n\t\t\t},\n\n\t\t\t/**\n\t\t * takes care of updating the UI after an error on submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {jQuery} $form\n\t\t * @param {string|undefined} commentId\n\t\t * @private\n\t\t */\n\t\t\t_onSubmitError: function($form, commentId) {\n\t\t\t\t$form.find('.submit').removeClass('hidden')\n\t\t\t\t$form.find('.submitLoading').addClass('hidden')\n\t\t\t\t$form.find('.message').prop('contenteditable', true)\n\n\t\t\t\tif (!_.isUndefined(commentId)) {\n\t\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while updating comment with id {id}', { id: commentId }), { type: 'error' })\n\t\t\t\t} else {\n\t\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while posting comment'), { type: 'error' })\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t * ensures the contenteditable div is really empty, when user removed\n\t\t * all input, so that the placeholder will be shown again\n\t\t *\n\t\t * @private\n\t\t */\n\t\t\t_onTextChange: function() {\n\t\t\t\tvar $message = $('#commentsTabView').find('.newCommentForm div.message')\n\t\t\t\tif (!$message.text().trim().length) {\n\t\t\t\t\t$message.empty()\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t * Limit pasting to plain text\n\t\t *\n\t\t * @param e\n\t\t * @private\n\t\t */\n\t\t\t_onPaste: function(e) {\n\t\t\t\te.preventDefault()\n\t\t\t\tvar text = e.originalEvent.clipboardData.getData('text/plain')\n\t\t\t\tdocument.execCommand('insertText', false, text)\n\t\t\t},\n\n\t\t\t/**\n\t\t * Returns whether the given message is long and needs\n\t\t * collapsing\n\t\t */\n\t\t\t_isLong: function(message) {\n\t\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1\n\t\t\t}\n\t\t})\n\n\tOCA.Comments.CommentsTabView = CommentsTabView\n})(OC, OCA)\n","import './app'\nimport './templates'\nimport './commentmodel'\nimport './commentcollection'\nimport './commentsummarymodel'\nimport './commentstabview'\nimport './commentsmodifymenu'\nimport './filesplugin'\nimport './activitytabviewplugin'\nimport './search'\n\nimport './vendor/Caret.js/dist/jquery.caret.min'\nimport './vendor/At.js/dist/js/jquery.atwho.min'\n\nimport './style/autocomplete.scss'\nimport './style/comments.scss'\n\nwindow.OCA.Comments = OCA.Comments\n"],"sourceRoot":""}