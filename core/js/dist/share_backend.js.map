{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./core/js/merged-share-backend.js","webpack:///./core/js/shareconfigmodel.js","webpack:///./core/js/sharetemplates.js","webpack:///./core/js/shareitemmodel.js","webpack:///./core/js/sharesocialmanager.js","webpack:///./core/js/sharedialogresharerinfoview.js","webpack:///./core/js/sharedialoglinkshareview.js","webpack:///./core/js/sharedialogshareelistview.js","webpack:///./core/js/sharedialogview.js","webpack:///./core/js/share.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","OC","Share","Types","ShareConfigModel","Backbone","Model","extend","defaults","publicUploadEnabled","enforcePasswordForPublicLink","appConfig","core","enableLinkPasswordByDefault","isDefaultExpireDateEnforced","defaultExpireDateEnforced","isDefaultExpireDateEnabled","defaultExpireDateEnabled","isRemoteShareAllowed","remoteShareAllowed","isMailShareAllowed","undefined","shareByMailEnabled","defaultExpireDate","isResharingAllowed","resharingAllowed","isPasswordForMailSharesRequired","shareByMail","enforcePasswordProtection","allowGroupSharing","isPublicUploadEnabled","$","data","isShareWithLinkAllowed","val","getFederatedShareDocLink","federatedCloudShareDoc","getDefaultExpirationDateString","expireDateString","this","date","moment","utc","expireAfterDays","add","format","template","templates","Handlebars","Templates","container","depth0","helpers","partials","stack1","alias1","nullContext","nolinkShares","program","noop","each","linkShares","helper","alias2","hooks","helperMissing","alias4","escapeExpression","newShareId","newShareLabel","showPending","newShareTitle","unless","pendingPopoverMenu","alias3","cid","linkShareCreationDate","linkShareLabel","shareLinkURL","copyLabel","popoverMenu","noSharingPlaceholder","shareAllowed","publicUploadRValue","publicUploadRChecked","publicUploadRLabel","publicUploadRWValue","publicUploadRWChecked","publicUploadRWLabel","publicUploadWValue","publicUploadWChecked","publicUploadWLabel","publicEditingChecked","publicEditingLabel","isPasswordByTalkSet","passwordByTalkLabel","expireDate","url","newWindow","iconClass","label","publicUpload","publicEditing","hideDownload","hideDownloadLabel","isPasswordSet","isPasswordEnforced","enablePasswordLabel","passwordPlaceholder","showPasswordByTalkCheckBox","hasExpireDate","isExpirationEnforced","expireDateLabel","expirationDate","expirationLabel","expirationDatePlaceholder","maxDate","addNoteLabel","hasNote","shareNote","shareId","social","unshareLinkLabel","enforcedPasswordLabel","minPasswordLength","reshareOwner","sharedByText","hasShareNote","isShareWithCurrentUser","shareType","shareWith","modSeed","shareWithAvatar","shareWithDisplayName","shareWithTitle","canUpdateShareSettings","editPermissionPossible","canEditLabel","shareInitiator","shareInitiatorText","unshareLabel","sharees","linkReshares","sharePermissionPossible","isMailShare","hasSharePermission","sharePermission","canShareLabel","createPermissionPossible","updatePermissionPossible","deletePermissionPossible","hasCreatePermission","createPermission","createPermissionLabel","hasUpdatePermission","updatePermission","updatePermissionLabel","hasDeletePermission","deletePermission","deletePermissionLabel","passwordLabel","password","passwordValue","isTalkEnabled","secureDropMode","readPermission","secureDropLabel","passwordByTalkPlaceholder","isFolder","isNoteAvailable","shareLabel","sharePlaceholder","isSharingAllowed","SHARE_RESPONSE_INT_PROPS","ShareItemModel","_linkShareId","initialize","attributes","options","_","isUndefined","configModel","fileInfoModel","bindAll","allowPublicUploadStatus","permissions","saveLinkShare","expiration","shareIndex","findIndex","share","id","length","updateShare","passwordChanged","sendPasswordByTalk","PERMISSION_READ","SHARE_TYPE_LINK","addShare","defaultPermissions","getCapabilities","PERMISSION_ALL","possiblePermissions","PERMISSION_UPDATE","PERMISSION_CREATE","PERMISSION_DELETE","PERMISSION_SHARE","path","getFullPath","_addOrUpdateShare","type","_getUrl","dataType","attrs","encodeURIComponent","ajaxSettings","self","ajax","always","isFunction","complete","done","fetch","success","fail","xhr","msg","result","responseJSON","ocs","meta","message","error","dialogs","alert","removeShare","isPublicUploadAllowed","isPublicEditingAllowed","isHideFileListSet","isFile","hasReshare","reshare","isObject","uid_owner","hasUserShares","getSharesWithCurrentItem","hasLinkShares","getReshareOwner","getReshareOwnerDisplayname","displayname_owner","getReshareNote","note","getReshareWith","share_with","getReshareWithDisplayName","share_with_displayname","getReshareType","share_type","getExpireDate","_shareExpireDate","getNote","_shareNote","shares","fileId","filter","item_source","getShareWith","getShareWithDisplayName","getShareWithAvatar","share_with_avatar","getSharedBy","getSharedByDisplayName","getFileOwnerUid","uid_file_owner","findShareWithIndex","isArray","getShareType","_shareHasPermission","permission","getPermissions","hasReadPermission","editPermissionState","hcp","hup","hdp","linkSharePermissions","base","params","linkToOCS","buildQueryString","_fetchShares","reshares","_fetchReshare","_reshareFetched","Deferred","resolve","shared_with_me","_groupReshares","superShare","shift","combinedPermissions","SHARE_TYPE_USER","SHARE_TYPE_GROUP","model","trigger","deferred","when","data1","data2","sharesMap","shareItem","set","parse","_legacyFillCurrentShares","statuses","currentShares","itemShares","currentShareStatus","link","push","console","warn","currentUser","allowPublicEditingStatus","hideFileListStatus","map","prop","parseInt","reject","file_source","window","location","protocol","host","token","generateUrl","fullPath","isDirectory","linkTo","hide_download","send_password_by_talk","_parseTime","time","isString","isNaN","getShareTypes","pluck","uniq","Social","SocialModel","SocialCollection","Collection","comparator","ShareDialogResharerInfoView","View","tagName","className","_template","view","on","render","$el","empty","reshareTemplate","ownerDisplayName","group","owner","escape","SHARE_TYPE_CIRCLE","circle","SHARE_TYPE_ROOM","conversation","html","find","$this","avatar","contactsMenu","PASSWORD_PLACEHOLDER_MESSAGE","PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL","ShareDialogLinkShareView","showLink","hasPasswordChanged","events","previousLinkShares","previous","clipboard","Clipboard","e","$trigger","tooltip","attr","placement","delay","$menu","next","$linkTextMenu","$input","closest","showMenu","actionMsg","test","navigator","userAgent","removeClass","select","newShare","event","$li","target","$loading","hasClass","addClass","hideMenus","shareData","defaultExpireDays","focus","response","Notification","showTemporary","then","enforcedPasswordSet","preventDefault","onLinkTextClick","onHideDownloadChange","$checkbox","siblings","is","obj","onShowPasswordClick","slideToggle","menuSpeed","toggleClass","Util","isIE","onPasswordKeyUp","keyCode","onPasswordEntered","parent","onToggleMenu","$container","onPasswordByTalkChange","onAllowPublicEditingChange","onPublicUploadChange","currentTarget","showNoteForm","stopPropagation","$element","$form","deleteNote","sendNote","updateNote","prev","trim","$submit","$error","hide","method","show","setTimeout","linkShareTemplate","templateData","passwordPlaceholderInitial","publicEditable","minDate","Date","setDate","getDate","datepicker","setDefaults","dateFormat","password_policy","minLength","popoverBase","urlLabel","mailPrivatePlaceholder","mailButtonText","pendingPopover","pendingPopoverMenuTemplate","getShareeList","replace","popover","getPopoverObject","popoverMenuTemplate","onMenuhide","delegateEvents","autosize","isPasswordEnabledByDefault","debug","onPopUpClick","left","screen","width","top","height","open","href","onExpireDateChange","datePicker","state","showDatePicker","setExpirationDate","expirationDatePicker","onSelect","onChangeExpirationDate","list","index","getShareeObject","stime","appswebroots","shareTime","isNumber","stripTime","getTime","onUnshare","eq","remove","ShareDialogShareeListView","_menuOpen","_renderPermissionChange","sharedBy","sharedByDisplayName","fileOwnerUid","SHARE_TYPE_REMOTE","SHARE_TYPE_REMOTE_GROUP","SHARE_TYPE_EMAIL","getCurrentUser","uid","sharer","hasPassword","isRemoteShare","isRemoteGroupShare","isCircleShare","isFileSharedByMail","getShareProperties","crudsLabel","triangleSImage","imagePath","universal","getLinkReshares","shareInitiatorDisplayName","permissionChangeShareId","shareWithIndex","sharee","replaceWith","css","imageplaceholder","_this","forEach","$edit","datePickerClass","datePickerInput","expireDateCheckbox","liSelector","log","onMailSharePasswordProtectChange","element","passwordContainerClass","passwordContainer","loading","inputClass","passwordField","passwordByTalkElement","passwordByTalkState","passwordByTalkContainerClass","onMailSharePasswordProtectByTalkChange","passwordByTalkContainer","passwordByTalkField","passwordElement","passwordState","onMailSharePasswordKeyUp","onMailSharePasswordEntered","startsWith","blur","onPermissionChange","checked","$checkboxes","not","numberChecked","$editCb","checkbox","enableCb","elem","onSecureDropChange","ShareDialogView","_templates","_showLink","_lookup","_lookupAllowed","resharerInfoView","linkShareView","shareeListView","_lastSuggestions","_lastRecommendations","_pendingOperationsCount","_onRequest","_onEndRequest","subViewOptions","subViews","Plugins","attach","onShareWithFieldChanged","onShareWithFieldFocus","$shareWithField","autocomplete","_getSuggestions","searchTerm","perPage","lookup","promise","capabilities","files_sharing","query_lookup_default","search","itemType","statuscode","users","groups","remotes","remote_groups","emails","circles","rooms","usersLength","groupsLength","remotesLength","remoteGroupsLength","emailsLength","circlesLength","roomsLength","j","splice","sharesLength","exact","exactUsers","exactGroups","exactRemotes","exactRemoteGroups","exactEmails","exactCircles","exactRooms","exactMatches","concat","remoteGroups","lookupEnabled","grouped","sort","a","b","aProperty","bProperty","previousUuid","groupedLength","uuid","merged","moreResultsAvailable","config","Math","min","max","_getRecommendations","recommendationHandler","suggestions","info","autocompleteHandler","term","$confirm","count","title","append","autocompleteRenderItem","ul","item","icon","text","escapeHTML","description","getTranslatedType","circleInfo","circleOwner","insert","appendTo","RegExp","_onSelectRecipient","stopImmediatePropagation","_confirmShare","restoreUI","_toggleLoading","_loading","_loadingOnce","baseTemplate","_renderSharePlaceholderPart","$shareField","source","numberOfItems","size","_renderItem","setShowLink","allowRemoteSharing","allowMailSharing","SHARE_TYPE_GUEST","_REMOTE_OWNER_REGEXP","droppedDown","loadIcons","fileList","callback","dirInfo","subfiles","it","updateIcons","$fileList","currentDir","OCA","Files","App","getCurrentDirectory","hasLink","img","file","shareFolder","markFileAsShared","dir","last","actions","files","image","prepend","dirname","updateIcon","itemSource","$tr","filterAttr","String","_formatRemoteShare","parts","exec","userName","userDomain","server","_formatShareList","recipients","_parent","toArray","localeCompare","recipient","hasShares","avatars","shareFolderIcon","action","ownerId","mountType","MimeType","getIconUrl","indexOf","removeAttr","showDropDown","filename","itemModel","dialogView","$dialog","slideDown","hideDropDown","slideUp","FileActions","document","ready","monthNames","monthNamesShort","dayNames","dayNamesMin","dayNamesShort","firstDay","click","isMatched","has"],"mappings":"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","file":"share_backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import './shareconfigmodel.js';\nimport './sharetemplates.js';\nimport './shareitemmodel.js';\nimport './sharesocialmanager.js';\nimport './sharedialogresharerinfoview.js';\nimport './sharedialoglinkshareview.js';\nimport './sharedialogshareelistview.js';\nimport './sharedialogview.js';\nimport './share.js';\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global moment, OC */\n\n(function() {\n\tif (!OC.Share) {\n\t\tOC.Share = {};\n\t\tOC.Share.Types = {};\n\t}\n\n\t// FIXME: the config model should populate its own model attributes based on\n\t// the old DOM-based config\n\tvar ShareConfigModel = OC.Backbone.Model.extend({\n\t\tdefaults: {\n\t\t\tpublicUploadEnabled: false,\n\t\t\tenforcePasswordForPublicLink: OC.appConfig.core.enforcePasswordForPublicLink,\n\t\t\tenableLinkPasswordByDefault: OC.appConfig.core.enableLinkPasswordByDefault,\n\t\t\tisDefaultExpireDateEnforced: OC.appConfig.core.defaultExpireDateEnforced === true,\n\t\t\tisDefaultExpireDateEnabled: OC.appConfig.core.defaultExpireDateEnabled === true,\n\t\t\tisRemoteShareAllowed: OC.appConfig.core.remoteShareAllowed,\n\t\t\tisMailShareAllowed: OC.appConfig.shareByMailEnabled !== undefined,\n\t\t\tdefaultExpireDate: OC.appConfig.core.defaultExpireDate,\n\t\t\tisResharingAllowed: OC.appConfig.core.resharingAllowed,\n\t\t\tisPasswordForMailSharesRequired: (OC.appConfig.shareByMail === undefined) ? false : OC.appConfig.shareByMail.enforcePasswordProtection,\n\t\t\tallowGroupSharing: OC.appConfig.core.allowGroupSharing\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisPublicUploadEnabled: function() {\n\t\t\tvar publicUploadEnabled = $('#filestable').data('allow-public-upload');\n\t\t\treturn publicUploadEnabled === 'yes';\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisShareWithLinkAllowed: function() {\n\t\t\treturn $('#allowShareWithLink').val() === 'yes';\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetFederatedShareDocLink: function() {\n\t\t\treturn OC.appConfig.core.federatedCloudShareDoc;\n\t\t},\n\n\t\tgetDefaultExpirationDateString: function () {\n\t\t\tvar expireDateString = '';\n\t\t\tif (this.get('isDefaultExpireDateEnabled')) {\n\t\t\t\tvar date = moment.utc();\n\t\t\t\tvar expireAfterDays = this.get('defaultExpireDate');\n\t\t\t\tdate.add(expireAfterDays, 'days');\n\t\t\t\texpireDateString = date.format('YYYY-MM-DD 00:00:00');\n\t\t\t}\n\t\t\treturn expireDateString;\n\t\t}\n\t});\n\n\n\tOC.Share.ShareConfigModel = ShareConfigModel;\n})();\n","(function() {\n  var template = Handlebars.template, templates = OC.Share.Templates = OC.Share.Templates || {};\ntemplates['sharedialoglinkshareview'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"<ul class=\\\"shareWithList\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.nolinkShares : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":1},\"end\":{\"line\":17,\"column\":8}}})) != null ? stack1 : \"\")\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.linkShares : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":1},\"end\":{\"line\":36,\"column\":10}}})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li data-share-id=\\\"\"\n    + alias4(((helper = (helper = helpers.newShareId || (depth0 != null ? depth0.newShareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newShareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":21},\"end\":{\"line\":4,\"column\":35}}}) : helper)))\n    + \"\\\">\\n\t\t\t<div class=\\\"avatar icon-public-white\\\"></div>\\n\t\t\t<span class=\\\"username\\\">\"\n    + alias4(((helper = (helper = helpers.newShareLabel || (depth0 != null ? depth0.newShareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newShareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":26},\"end\":{\"line\":6,\"column\":43}}}) : helper)))\n    + \"</span>\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<div class=\\\"share-menu\\\">\\n\t\t\t\t\t<a href=\\\"#\\\" class=\\\"icon icon-add new-share has-tooltip \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":60},\"end\":{\"line\":9,\"column\":92}}})) != null ? stack1 : \"\")\n    + \"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.newShareTitle || (depth0 != null ? depth0.newShareTitle : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newShareTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":101},\"end\":{\"line\":9,\"column\":118}}}) : helper)))\n    + \"\\\"></a>\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":42},\"end\":{\"line\":10,\"column\":82}}})) != null ? stack1 : \"\")\n    + \"\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":5},\"end\":{\"line\":13,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\t\t\t\t</div>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"hidden\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"\t\t\t\t\t\t\"\n    + ((stack1 = ((helper = (helper = helpers.pendingPopoverMenu || (depth0 != null ? depth0.pendingPopoverMenu : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"pendingPopoverMenu\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":6},\"end\":{\"line\":12,\"column\":30}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li data-share-id=\\\"\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":21},\"end\":{\"line\":19,\"column\":28}}}) : helper)))\n    + \"\\\">\\n\t\t\t<div class=\\\"avatar icon-public-white\\\"></div>\\n\t\t\t<span class=\\\"username\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.linkShareCreationDate || (depth0 != null ? depth0.linkShareCreationDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"linkShareCreationDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":33},\"end\":{\"line\":21,\"column\":58}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.linkShareLabel || (depth0 != null ? depth0.linkShareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"linkShareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":60},\"end\":{\"line\":21,\"column\":78}}}) : helper)))\n    + \"</span>\\n\t\t\t\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"clipboard-button icon icon-clippy has-tooltip\\\" data-clipboard-text=\\\"\"\n    + alias4(((helper = (helper = helpers.shareLinkURL || (depth0 != null ? depth0.shareLinkURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareLinkURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":91},\"end\":{\"line\":24,\"column\":107}}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.copyLabel || (depth0 != null ? depth0.copyLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"copyLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":116},\"end\":{\"line\":24,\"column\":129}}}) : helper)))\n    + \"\\\"></a>\\n\t\t\t\t<div class=\\\"share-menu\\\">\\n\t\t\t\t\t<a href=\\\"#\\\" class=\\\"icon icon-more \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":39},\"end\":{\"line\":26,\"column\":71}}})) != null ? stack1 : \"\")\n    + \"\\\"></a>\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":42},\"end\":{\"line\":27,\"column\":82}}})) != null ? stack1 : \"\")\n    + \"\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.showPending : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(8, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":5},\"end\":{\"line\":32,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\t\t\t\t</div>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"\t\t\t\t\t\t\"\n    + ((stack1 = ((helper = (helper = helpers.popoverMenu || (depth0 != null ? depth0.popoverMenu : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"popoverMenu\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":6},\"end\":{\"line\":31,\"column\":23}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.noSharingPlaceholder : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":0},\"end\":{\"line\":39,\"column\":161}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<input id=\\\"shareWith-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":49},\"end\":{\"line\":39,\"column\":56}}}) : helper)))\n    + \"\\\" class=\\\"shareWithField\\\" type=\\\"text\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.noSharingPlaceholder || (depth0 != null ? depth0.noSharingPlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"noSharingPlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":106},\"end\":{\"line\":39,\"column\":130}}}) : helper)))\n    + \"\\\" disabled=\\\"disabled\\\" />\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.shareAllowed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(10, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":40,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});\ntemplates['sharedialoglinkshareview_popover_menu'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.publicUploadRValue || (depth0 != null ? depth0.publicUploadRValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":52},\"end\":{\"line\":12,\"column\":74}}}) : helper)))\n    + \"\\\" id=\\\"sharingDialogAllowPublicUpload-r-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":113},\"end\":{\"line\":12,\"column\":120}}}) : helper)))\n    + \"\\\" class=\\\"radio publicUploadRadio\\\" \"\n    + ((stack1 = ((helper = (helper = helpers.publicUploadRChecked || (depth0 != null ? depth0.publicUploadRChecked : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRChecked\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":154},\"end\":{\"line\":12,\"column\":180}}}) : helper))) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-r-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":50},\"end\":{\"line\":13,\"column\":57}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.publicUploadRLabel || (depth0 != null ? depth0.publicUploadRLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":59},\"end\":{\"line\":13,\"column\":81}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.publicUploadRWValue || (depth0 != null ? depth0.publicUploadRWValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRWValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":52},\"end\":{\"line\":19,\"column\":75}}}) : helper)))\n    + \"\\\" id=\\\"sharingDialogAllowPublicUpload-rw-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":115},\"end\":{\"line\":19,\"column\":122}}}) : helper)))\n    + \"\\\" class=\\\"radio publicUploadRadio\\\" \"\n    + ((stack1 = ((helper = (helper = helpers.publicUploadRWChecked || (depth0 != null ? depth0.publicUploadRWChecked : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRWChecked\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":156},\"end\":{\"line\":19,\"column\":183}}}) : helper))) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-rw-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":51},\"end\":{\"line\":20,\"column\":58}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.publicUploadRWLabel || (depth0 != null ? depth0.publicUploadRWLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadRWLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":60},\"end\":{\"line\":20,\"column\":83}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"radio\\\" name=\\\"publicUpload\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.publicUploadWValue || (depth0 != null ? depth0.publicUploadWValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadWValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":52},\"end\":{\"line\":26,\"column\":74}}}) : helper)))\n    + \"\\\" id=\\\"sharingDialogAllowPublicUpload-w-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":113},\"end\":{\"line\":26,\"column\":120}}}) : helper)))\n    + \"\\\" class=\\\"radio publicUploadRadio\\\" \"\n    + ((stack1 = ((helper = (helper = helpers.publicUploadWChecked || (depth0 != null ? depth0.publicUploadWChecked : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadWChecked\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":154},\"end\":{\"line\":26,\"column\":180}}}) : helper))) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicUpload-w-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":50},\"end\":{\"line\":27,\"column\":57}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.publicUploadWLabel || (depth0 != null ? depth0.publicUploadWLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicUploadWLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":59},\"end\":{\"line\":27,\"column\":81}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li id=\\\"allowPublicEditingWrapper\\\">\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"allowPublicEditing\\\" id=\\\"sharingDialogAllowPublicEditing-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":35,\"column\":90},\"end\":{\"line\":35,\"column\":97}}}) : helper)))\n    + \"\\\" class=\\\"checkbox publicEditingCheckbox\\\" \"\n    + ((stack1 = ((helper = (helper = helpers.publicEditingChecked || (depth0 != null ? depth0.publicEditingChecked : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicEditingChecked\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":35,\"column\":138},\"end\":{\"line\":35,\"column\":164}}}) : helper))) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogAllowPublicEditing-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":49},\"end\":{\"line\":36,\"column\":56}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.publicEditingLabel || (depth0 != null ? depth0.publicEditingLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"publicEditingLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":58},\"end\":{\"line\":36,\"column\":80}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"checked=\\\"checked\\\"\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"disabled=\\\"disabled\\\"\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"hidden\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"shareOption menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"passwordByTalk\\\" id=\\\"passwordByTalk-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":66,\"column\":69},\"end\":{\"line\":66,\"column\":76}}}) : helper)))\n    + \"\\\" class=\\\"checkbox passwordByTalkCheckbox\\\"\\n\t\t\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordByTalkSet : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":5},\"end\":{\"line\":67,\"column\":56}}})) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"passwordByTalk-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":32},\"end\":{\"line\":68,\"column\":39}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordByTalkLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":41},\"end\":{\"line\":68,\"column\":64}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \"datepicker\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.expireDate || (depth0 != null ? depth0.expireDate : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"expireDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":77},\"end\":{\"line\":84,\"column\":91}}}) : helper)));\n},\"17\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.defaultExpireDate || (depth0 != null ? depth0.defaultExpireDate : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"defaultExpireDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":99},\"end\":{\"line\":84,\"column\":120}}}) : helper)));\n},\"19\":function(container,depth0,helpers,partials,data) {\n    return \"readonly\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li>\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"menuitem pop-up\\\" data-url=\\\"\"\n    + alias4(((helper = (helper = helpers.url || (depth0 != null ? depth0.url : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"url\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":104,\"column\":50},\"end\":{\"line\":104,\"column\":57}}}) : helper)))\n    + \"\\\" data-window=\\\"\"\n    + alias4(((helper = (helper = helpers.newWindow || (depth0 != null ? depth0.newWindow : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newWindow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":104,\"column\":72},\"end\":{\"line\":104,\"column\":85}}}) : helper)))\n    + \"\\\">\\n\t\t\t\t\t<span class=\\\"icon \"\n    + alias4(((helper = (helper = helpers.iconClass || (depth0 != null ? depth0.iconClass : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":105,\"column\":23},\"end\":{\"line\":105,\"column\":36}}}) : helper)))\n    + \"\\\"></span>\\n\t\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"label\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":106,\"column\":11},\"end\":{\"line\":106,\"column\":20}}}) : helper)))\n    + \"</span>\\n\t\t\t\t</a>\\n\t\t\t</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"popovermenu menu\\\">\\n\t<ul>\\n\t\t<li class=\\\"hidden linkTextMenu\\\">\\n\t\t\t<span class=\\\"menuitem icon-link-text\\\">\\n\t\t\t\t<input id=\\\"linkText-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":24},\"end\":{\"line\":5,\"column\":31}}}) : helper)))\n    + \"\\\" class=\\\"linkText\\\" type=\\\"text\\\" readonly=\\\"readonly\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.shareLinkURL || (depth0 != null ? depth0.shareLinkURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareLinkURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":89},\"end\":{\"line\":5,\"column\":105}}}) : helper)))\n    + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.publicUpload : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":2},\"end\":{\"line\":30,\"column\":9}}})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.publicEditing : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":2},\"end\":{\"line\":39,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"hideDownload\\\" id=\\\"sharingDialogHideDownload-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":43,\"column\":78},\"end\":{\"line\":43,\"column\":85}}}) : helper)))\n    + \"\\\" class=\\\"checkbox hideDownloadCheckbox\\\"\\n\t\t\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hideDownload : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":44,\"column\":5},\"end\":{\"line\":44,\"column\":49}}})) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t<label for=\\\"sharingDialogHideDownload-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":45,\"column\":43},\"end\":{\"line\":45,\"column\":50}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.hideDownloadLabel || (depth0 != null ? depth0.hideDownloadLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"hideDownloadLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":45,\"column\":52},\"end\":{\"line\":45,\"column\":73}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input type=\\\"checkbox\\\" name=\\\"showPassword\\\" id=\\\"showPassword-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":50,\"column\":65},\"end\":{\"line\":50,\"column\":72}}}) : helper)))\n    + \"\\\" class=\\\"checkbox showPasswordCheckbox\\\"\\n\t\t\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordSet : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":51,\"column\":5},\"end\":{\"line\":51,\"column\":50}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordEnforced : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":51,\"column\":51},\"end\":{\"line\":51,\"column\":103}}})) != null ? stack1 : \"\")\n    + \" value=\\\"1\\\" />\\n\t\t\t\t\t<label for=\\\"showPassword-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":30},\"end\":{\"line\":52,\"column\":37}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.enablePasswordLabel || (depth0 != null ? depth0.enablePasswordLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"enablePasswordLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":39},\"end\":{\"line\":52,\"column\":62}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"\"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.isPasswordSet : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":14},\"end\":{\"line\":55,\"column\":56}}})) != null ? stack1 : \"\")\n    + \" linkPassMenu\\\">\\n\t\t\t\t<span class=\\\"menuitem icon-share-pass\\\">\\n\t\t\t\t\t<input id=\\\"linkPassText-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":57,\"column\":29},\"end\":{\"line\":57,\"column\":36}}}) : helper)))\n    + \"\\\" class=\\\"linkPassText\\\" type=\\\"password\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordPlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":57,\"column\":88},\"end\":{\"line\":57,\"column\":111}}}) : helper)))\n    + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-pass-submit\\\" value=\\\"\\\" />\\n\t\t\t\t\t<span class=\\\"icon icon-loading-small hidden\\\"></span>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.showPasswordByTalkCheckBox : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":2},\"end\":{\"line\":71,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\t\t<li>\\n\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t<input id=\\\"expireDate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":74,\"column\":26},\"end\":{\"line\":74,\"column\":33}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"expirationDate\\\" class=\\\"expireDate checkbox\\\"\\n\t\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":75,\"column\":4},\"end\":{\"line\":75,\"column\":49}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isExpirationEnforced : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":75,\"column\":50},\"end\":{\"line\":75,\"column\":104}}})) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t<label for=\\\"expireDate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":27},\"end\":{\"line\":76,\"column\":34}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.expireDateLabel || (depth0 != null ? depth0.expireDateLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expireDateLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":36},\"end\":{\"line\":76,\"column\":55}}}) : helper)))\n    + \"</label>\\n\t\t\t</span>\\n\t\t</li>\\n\t\t<li class=\\\"\"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":79,\"column\":13},\"end\":{\"line\":79,\"column\":55}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t<span class=\\\"menuitem icon-expiredate expirationDateContainer-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":80,\"column\":65},\"end\":{\"line\":80,\"column\":72}}}) : helper)))\n    + \"\\\">\\n\t\t\t\t<label for=\\\"expirationDatePicker-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":37},\"end\":{\"line\":81,\"column\":44}}}) : helper)))\n    + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.expirationDate || (depth0 != null ? depth0.expirationDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":77},\"end\":{\"line\":81,\"column\":95}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.expirationLabel || (depth0 != null ? depth0.expirationLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":97},\"end\":{\"line\":81,\"column\":116}}}) : helper)))\n    + \"</label>\\n\t\t\t\t<!-- do not use the datepicker if enforced -->\\n\t\t\t\t<input id=\\\"expirationDatePicker-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":36},\"end\":{\"line\":83,\"column\":43}}}) : helper)))\n    + \"\\\" class=\\\"\"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.isExpirationEnforced : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":52},\"end\":{\"line\":83,\"column\":105}}})) != null ? stack1 : \"\")\n    + \"\\\" type=\\\"text\\\"\\n\t\t\t\t\tplaceholder=\\\"\"\n    + alias4(((helper = (helper = helpers.expirationDatePlaceholder || (depth0 != null ? depth0.expirationDatePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationDatePlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":18},\"end\":{\"line\":84,\"column\":47}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0),\"inverse\":container.program(17, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":56},\"end\":{\"line\":84,\"column\":127}}})) != null ? stack1 : \"\")\n    + \"\\\"\\n\t\t\t\t\tdata-max-date=\\\"\"\n    + alias4(((helper = (helper = helpers.maxDate || (depth0 != null ? depth0.maxDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"maxDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":85,\"column\":20},\"end\":{\"line\":85,\"column\":31}}}) : helper)))\n    + \"\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isExpirationEnforced : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":85,\"column\":33},\"end\":{\"line\":85,\"column\":76}}})) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t</span>\\n\t\t\t</li>\\n\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"share-add\\\">\\n\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t<span class=\\\"icon icon-edit\\\"></span>\\n\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.addNoteLabel || (depth0 != null ? depth0.addNoteLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"addNoteLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":92,\"column\":10},\"end\":{\"line\":92,\"column\":26}}}) : helper)))\n    + \"</span>\\n\t\t\t\t<input type=\\\"button\\\" class=\\\"share-note-delete icon-delete \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasNote : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":93,\"column\":62},\"end\":{\"line\":93,\"column\":98}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t</a>\\n\t\t</li>\\n\t\t<li class=\\\"share-note-form share-note-link \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasNote : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":96,\"column\":45},\"end\":{\"line\":96,\"column\":81}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t<span class=\\\"menuitem icon-note\\\">\\n\t\t\t\t<textarea class=\\\"share-note\\\">\"\n    + alias4(((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareNote\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":98,\"column\":33},\"end\":{\"line\":98,\"column\":46}}}) : helper)))\n    + \"</textarea>\\n\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-note-submit\\\" value=\\\"\\\" id=\\\"add-note-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":99,\"column\":86},\"end\":{\"line\":99,\"column\":97}}}) : helper)))\n    + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.social : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(21, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":102,\"column\":2},\"end\":{\"line\":109,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span>\"\n    + alias4(((helper = (helper = helpers.unshareLinkLabel || (depth0 != null ? depth0.unshareLinkLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"unshareLinkLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":111,\"column\":122},\"end\":{\"line\":111,\"column\":142}}}) : helper)))\n    + \"</span></a>\\n\t\t</li>\\n\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"new-share\\\">\\n\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t<span class=\\\"icon icon-add\\\"></span>\\n\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.newShareLabel || (depth0 != null ? depth0.newShareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newShareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":117,\"column\":10},\"end\":{\"line\":117,\"column\":27}}}) : helper)))\n    + \"</span>\\n\t\t\t</a>\\n\t\t</li>\\n\t</ul>\\n</div>\\n\";\n},\"useData\":true});\ntemplates['sharedialoglinkshareview_popover_menu_pending'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem icon-info\\\">\\n\t\t\t\t\t<p>\"\n    + alias4(((helper = (helper = helpers.enforcedPasswordLabel || (depth0 != null ? depth0.enforcedPasswordLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"enforcedPasswordLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":8},\"end\":{\"line\":6,\"column\":33}}}) : helper)))\n    + \"</p>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"linkPassMenu\\\">\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<form autocomplete=\\\"off\\\" class=\\\"enforcedPassForm\\\">\\n\t\t\t\t\t\t<input id=\\\"enforcedPassText\\\" required class=\\\"enforcedPassText\\\" type=\\\"password\\\"\\n\t\t\t\t\t\t\tplaceholder=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordPlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":20},\"end\":{\"line\":13,\"column\":43}}}) : helper)))\n    + \"\\\" autocomplete=\\\"enforcedPassText\\\" minlength=\\\"\"\n    + alias4(((helper = (helper = helpers.minPasswordLength || (depth0 != null ? depth0.minPasswordLength : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"minPasswordLength\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":88},\"end\":{\"line\":13,\"column\":109}}}) : helper)))\n    + \"\\\" />\\n\t\t\t\t\t\t<input type=\\\"submit\\\" value=\\\" \\\" class=\\\"primary icon-checkmark-white\\\">\\n\t\t\t\t\t</form>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"popovermenu open menu pending\\\">\\n\t<ul>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isPasswordEnforced : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":18,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\t</ul>\\n</div>\\n\";\n},\"useData\":true});\ntemplates['sharedialogresharerinfoview'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"share-note\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"shareNote\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":44},\"end\":{\"line\":5,\"column\":57}}}) : helper)))\n    + \"</div>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<span class=\\\"reshare\\\">\\n\t<div class=\\\"avatar\\\" data-userName=\\\"\"\n    + alias4(((helper = (helper = helpers.reshareOwner || (depth0 != null ? depth0.reshareOwner : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"reshareOwner\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":36},\"end\":{\"line\":2,\"column\":52}}}) : helper)))\n    + \"\\\"></div>\\n\t\"\n    + alias4(((helper = (helper = helpers.sharedByText || (depth0 != null ? depth0.sharedByText : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sharedByText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":1},\"end\":{\"line\":3,\"column\":17}}}) : helper)))\n    + \"\\n</span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasShareNote : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":0},\"end\":{\"line\":5,\"column\":70}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"useData\":true});\ntemplates['sharedialogshareelistview'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.unless.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isShareWithCurrentUser : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":8},\"end\":{\"line\":21,\"column\":12}}})) != null ? stack1 : \"\");\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li data-share-id=\\\"\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":21},\"end\":{\"line\":4,\"column\":32}}}) : helper)))\n    + \"\\\" data-share-type=\\\"\"\n    + alias4(((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":51},\"end\":{\"line\":4,\"column\":64}}}) : helper)))\n    + \"\\\" data-share-with=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWith\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":83},\"end\":{\"line\":4,\"column\":96}}}) : helper)))\n    + \"\\\">\\n\t\t\t<div class=\\\"avatar \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.modSeed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":22},\"end\":{\"line\":5,\"column\":64}}})) != null ? stack1 : \"\")\n    + \"\\\" data-username=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWith\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":81},\"end\":{\"line\":5,\"column\":94}}}) : helper)))\n    + \"\\\" data-avatar=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWithAvatar || (depth0 != null ? depth0.shareWithAvatar : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWithAvatar\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":109},\"end\":{\"line\":5,\"column\":128}}}) : helper)))\n    + \"\\\" data-displayname=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWithDisplayName || (depth0 != null ? depth0.shareWithDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWithDisplayName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":148},\"end\":{\"line\":5,\"column\":172}}}) : helper)))\n    + \"\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.modSeed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":174},\"end\":{\"line\":5,\"column\":235}}})) != null ? stack1 : \"\")\n    + \"></div>\\n\t\t\t<span class=\\\"username\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWithTitle || (depth0 != null ? depth0.shareWithTitle : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWithTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":33},\"end\":{\"line\":6,\"column\":51}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.shareWithDisplayName || (depth0 != null ? depth0.shareWithDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWithDisplayName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":53},\"end\":{\"line\":6,\"column\":77}}}) : helper)))\n    + \"</span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.canUpdateShareSettings : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":3},\"end\":{\"line\":19,\"column\":10}}})) != null ? stack1 : \"\")\n    + \"\t\t</li>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"imageplaceholderseed\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"data-seed=\\\"\"\n    + alias4(((helper = (helper = helpers.shareWith || (depth0 != null ? depth0.shareWith : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareWith\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":200},\"end\":{\"line\":5,\"column\":213}}}) : helper)))\n    + \" \"\n    + alias4(((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":214},\"end\":{\"line\":5,\"column\":227}}}) : helper)))\n    + \"\\\"\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.editPermissionPossible : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":4},\"end\":{\"line\":14,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\t\t\t\t<div tabindex=\\\"0\\\" class=\\\"share-menu\\\"><span class=\\\"icon icon-more\\\"></span>\\n\t\t\t\t\t\"\n    + ((stack1 = ((helper = (helper = helpers.popoverMenu || (depth0 != null ? depth0.popoverMenu : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"popoverMenu\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":5},\"end\":{\"line\":16,\"column\":22}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n\t\t\t\t</div>\\n\t\t\t</span>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t\t\t<span>\\n\t\t\t\t\t\t<input id=\\\"canEdit-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":25},\"end\":{\"line\":11,\"column\":32}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":33},\"end\":{\"line\":11,\"column\":44}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"edit\\\" class=\\\"permissions checkbox\\\" />\\n\t\t\t\t\t\t<label for=\\\"canEdit-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":26},\"end\":{\"line\":12,\"column\":33}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":34},\"end\":{\"line\":12,\"column\":45}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.canEditLabel || (depth0 != null ? depth0.canEditLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"canEditLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":47},\"end\":{\"line\":12,\"column\":63}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li data-share-id=\\\"\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":21},\"end\":{\"line\":24,\"column\":32}}}) : helper)))\n    + \"\\\" data-share-type=\\\"\"\n    + alias4(((helper = (helper = helpers.shareType || (depth0 != null ? depth0.shareType : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":51},\"end\":{\"line\":24,\"column\":64}}}) : helper)))\n    + \"\\\">\\n\t\t\t<div class=\\\"avatar\\\" data-username=\\\"\"\n    + alias4(((helper = (helper = helpers.shareInitiator || (depth0 != null ? depth0.shareInitiator : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareInitiator\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":38},\"end\":{\"line\":25,\"column\":56}}}) : helper)))\n    + \"\\\"></div>\\n\t\t\t<span class=\\\"has-tooltip username\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.shareInitiator || (depth0 != null ? depth0.shareInitiator : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareInitiator\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":45},\"end\":{\"line\":26,\"column\":63}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.shareInitiatorText || (depth0 != null ? depth0.shareInitiatorText : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareInitiatorText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":65},\"end\":{\"line\":26,\"column\":87}}}) : helper)))\n    + \"</span>\\n\t\t\t<span class=\\\"sharingOptionsGroup\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span class=\\\"hidden-visually\\\">\"\n    + alias4(((helper = (helper = helpers.unshareLabel || (depth0 != null ? depth0.unshareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"unshareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":147},\"end\":{\"line\":28,\"column\":163}}}) : helper)))\n    + \"</span></a>\\n\t\t\t</span>\\n\t\t</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"<ul id=\\\"shareWithList\\\" class=\\\"shareWithList\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.sharees : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":1},\"end\":{\"line\":22,\"column\":10}}})) != null ? stack1 : \"\")\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.linkReshares : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":1},\"end\":{\"line\":31,\"column\":10}}})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"useData\":true});\ntemplates['sharedialogshareelistview_popover_menu'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.sharePermissionPossible : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":29},\"end\":{\"line\":10,\"column\":22}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = helpers.unless.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isMailShare : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":61},\"end\":{\"line\":10,\"column\":14}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\\n\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input id=\\\"canShare-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":25},\"end\":{\"line\":6,\"column\":32}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":33},\"end\":{\"line\":6,\"column\":44}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"share\\\" class=\\\"permissions checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasSharePermission : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":104},\"end\":{\"line\":6,\"column\":154}}})) != null ? stack1 : \"\")\n    + \" data-permissions=\\\"\"\n    + alias4(((helper = (helper = helpers.sharePermission || (depth0 != null ? depth0.sharePermission : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sharePermission\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":173},\"end\":{\"line\":6,\"column\":192}}}) : helper)))\n    + \"\\\" />\\n\t\t\t\t\t<label for=\\\"canShare-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":26},\"end\":{\"line\":7,\"column\":33}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":34},\"end\":{\"line\":7,\"column\":45}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.canShareLabel || (depth0 != null ? depth0.canShareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"canShareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":47},\"end\":{\"line\":7,\"column\":64}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"checked=\\\"checked\\\"\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.createPermissionPossible : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":3},\"end\":{\"line\":19,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"\\n\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.updatePermissionPossible : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":3},\"end\":{\"line\":27,\"column\":22}}})) != null ? stack1 : \"\")\n    + \"\\n\t\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.deletePermissionPossible : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":3},\"end\":{\"line\":35,\"column\":22}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.unless.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isMailShare : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":35},\"end\":{\"line\":19,\"column\":14}}})) != null ? stack1 : \"\");\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canCreate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":27},\"end\":{\"line\":15,\"column\":34}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":35},\"end\":{\"line\":15,\"column\":46}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"create\\\" class=\\\"permissions checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasCreatePermission : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":107},\"end\":{\"line\":15,\"column\":158}}})) != null ? stack1 : \"\")\n    + \" data-permissions=\\\"\"\n    + alias4(((helper = (helper = helpers.createPermission || (depth0 != null ? depth0.createPermission : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"createPermission\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":177},\"end\":{\"line\":15,\"column\":197}}}) : helper)))\n    + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canCreate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":28},\"end\":{\"line\":16,\"column\":35}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":36},\"end\":{\"line\":16,\"column\":47}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.createPermissionLabel || (depth0 != null ? depth0.createPermissionLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"createPermissionLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":49},\"end\":{\"line\":16,\"column\":74}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.unless.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isMailShare : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":35},\"end\":{\"line\":27,\"column\":15}}})) != null ? stack1 : \"\");\n},\"11\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canUpdate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":27},\"end\":{\"line\":23,\"column\":34}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":35},\"end\":{\"line\":23,\"column\":46}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"update\\\" class=\\\"permissions checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasUpdatePermission : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":107},\"end\":{\"line\":23,\"column\":158}}})) != null ? stack1 : \"\")\n    + \" data-permissions=\\\"\"\n    + alias4(((helper = (helper = helpers.updatePermission || (depth0 != null ? depth0.updatePermission : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"updatePermission\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":177},\"end\":{\"line\":23,\"column\":197}}}) : helper)))\n    + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canUpdate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":28},\"end\":{\"line\":24,\"column\":35}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":36},\"end\":{\"line\":24,\"column\":47}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.updatePermissionLabel || (depth0 != null ? depth0.updatePermissionLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"updatePermissionLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":49},\"end\":{\"line\":24,\"column\":74}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.unless.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isMailShare : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":35},\"end\":{\"line\":35,\"column\":15}}})) != null ? stack1 : \"\");\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\\n\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"canDelete-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":27},\"end\":{\"line\":31,\"column\":34}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":35},\"end\":{\"line\":31,\"column\":46}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"delete\\\" class=\\\"permissions checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasDeletePermission : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":107},\"end\":{\"line\":31,\"column\":158}}})) != null ? stack1 : \"\")\n    + \" data-permissions=\\\"\"\n    + alias4(((helper = (helper = helpers.deletePermission || (depth0 != null ? depth0.deletePermission : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"deletePermission\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":177},\"end\":{\"line\":31,\"column\":197}}}) : helper)))\n    + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"canDelete-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":28},\"end\":{\"line\":32,\"column\":35}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":36},\"end\":{\"line\":32,\"column\":47}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.deletePermissionLabel || (depth0 != null ? depth0.deletePermissionLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"deletePermissionLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":49},\"end\":{\"line\":32,\"column\":74}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasCreatePermission : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":38,\"column\":3},\"end\":{\"line\":45,\"column\":10}}})) != null ? stack1 : \"\")\n    + \"\t\t\t<li>\\n\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t<input id=\\\"password-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":25},\"end\":{\"line\":48,\"column\":32}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":33},\"end\":{\"line\":48,\"column\":44}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"password\\\" class=\\\"password checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordSet : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":104},\"end\":{\"line\":48,\"column\":149}}})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordSet : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":149},\"end\":{\"line\":48,\"column\":234}}})) != null ? stack1 : \"\")\n    + \"\\\" />\\n\t\t\t\t\t<label for=\\\"password-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":26},\"end\":{\"line\":49,\"column\":33}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":34},\"end\":{\"line\":49,\"column\":45}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.passwordLabel || (depth0 != null ? depth0.passwordLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":47},\"end\":{\"line\":49,\"column\":64}}}) : helper)))\n    + \"</label>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"passwordMenu-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":27},\"end\":{\"line\":52,\"column\":34}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":35},\"end\":{\"line\":52,\"column\":46}}}) : helper)))\n    + \" \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.isPasswordSet : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":47},\"end\":{\"line\":52,\"column\":89}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t\t<span class=\\\"passwordContainer-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":53,\"column\":35},\"end\":{\"line\":53,\"column\":42}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":53,\"column\":43},\"end\":{\"line\":53,\"column\":54}}}) : helper)))\n    + \" icon-passwordmail menuitem\\\">\\n\t\t\t\t\t<label for=\\\"passwordField-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":31},\"end\":{\"line\":54,\"column\":38}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":39},\"end\":{\"line\":54,\"column\":50}}}) : helper)))\n    + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.password || (depth0 != null ? depth0.password : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"password\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":83},\"end\":{\"line\":54,\"column\":95}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.passwordLabel || (depth0 != null ? depth0.passwordLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":97},\"end\":{\"line\":54,\"column\":114}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t<input id=\\\"passwordField-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":30},\"end\":{\"line\":55,\"column\":37}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":38},\"end\":{\"line\":55,\"column\":49}}}) : helper)))\n    + \"\\\" class=\\\"passwordField\\\" type=\\\"password\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordPlaceholder || (depth0 != null ? depth0.passwordPlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordPlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":102},\"end\":{\"line\":55,\"column\":125}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordValue || (depth0 != null ? depth0.passwordValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":134},\"end\":{\"line\":55,\"column\":151}}}) : helper)))\n    + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isTalkEnabled : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(24, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":59,\"column\":3},\"end\":{\"line\":73,\"column\":11}}})) != null ? stack1 : \"\");\n},\"17\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"secureDrop-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":28},\"end\":{\"line\":41,\"column\":35}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":36},\"end\":{\"line\":41,\"column\":47}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"secureDrop\\\" class=\\\"checkbox secureDrop\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.secureDropMode : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":111},\"end\":{\"line\":41,\"column\":157}}})) != null ? stack1 : \"\")\n    + \" data-permissions=\\\"\"\n    + alias4(((helper = (helper = helpers.readPermission || (depth0 != null ? depth0.readPermission : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"readPermission\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":176},\"end\":{\"line\":41,\"column\":194}}}) : helper)))\n    + \"\\\"/>\\n\t\t\t\t\t\t<label for=\\\"secureDrop-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":29},\"end\":{\"line\":42,\"column\":36}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":37},\"end\":{\"line\":42,\"column\":48}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.secureDropLabel || (depth0 != null ? depth0.secureDropLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"secureDropLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":50},\"end\":{\"line\":42,\"column\":69}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isPasswordForMailSharesRequired : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(20, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":170},\"end\":{\"line\":48,\"column\":227}}})) != null ? stack1 : \"\");\n},\"20\":function(container,depth0,helpers,partials,data) {\n    return \"disabled=\\\"\\\"\";\n},\"22\":function(container,depth0,helpers,partials,data) {\n    return \"hidden\";\n},\"24\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t\t<li>\\n\t\t\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t\t\t<input id=\\\"passwordByTalk-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":32},\"end\":{\"line\":62,\"column\":39}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":40},\"end\":{\"line\":62,\"column\":51}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"passwordByTalk\\\" class=\\\"passwordByTalk checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isPasswordByTalkSet : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":123},\"end\":{\"line\":62,\"column\":174}}})) != null ? stack1 : \"\")\n    + \" />\\n\t\t\t\t\t\t<label for=\\\"passwordByTalk-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":33},\"end\":{\"line\":63,\"column\":40}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":41},\"end\":{\"line\":63,\"column\":52}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordByTalkLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":54},\"end\":{\"line\":63,\"column\":77}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\t\t\t\t<li class=\\\"passwordByTalkMenu-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":66,\"column\":34},\"end\":{\"line\":66,\"column\":41}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":66,\"column\":42},\"end\":{\"line\":66,\"column\":53}}}) : helper)))\n    + \" \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.isPasswordByTalkSet : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":66,\"column\":54},\"end\":{\"line\":66,\"column\":102}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t\t\t<span class=\\\"passwordByTalkContainer-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":42},\"end\":{\"line\":67,\"column\":49}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":50},\"end\":{\"line\":67,\"column\":61}}}) : helper)))\n    + \" icon-passwordtalk menuitem\\\">\\n\t\t\t\t\t\t<label for=\\\"passwordByTalkField-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":38},\"end\":{\"line\":68,\"column\":45}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":46},\"end\":{\"line\":68,\"column\":57}}}) : helper)))\n    + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.password || (depth0 != null ? depth0.password : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"password\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":90},\"end\":{\"line\":68,\"column\":102}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.passwordByTalkLabel || (depth0 != null ? depth0.passwordByTalkLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordByTalkLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":104},\"end\":{\"line\":68,\"column\":127}}}) : helper)))\n    + \"</label>\\n\t\t\t\t\t\t<input id=\\\"passwordByTalkField-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":69,\"column\":37},\"end\":{\"line\":69,\"column\":44}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":69,\"column\":45},\"end\":{\"line\":69,\"column\":56}}}) : helper)))\n    + \"\\\" class=\\\"passwordField\\\" type=\\\"password\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordByTalkPlaceholder || (depth0 != null ? depth0.passwordByTalkPlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordByTalkPlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":69,\"column\":109},\"end\":{\"line\":69,\"column\":138}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.passwordValue || (depth0 != null ? depth0.passwordValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"passwordValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":69,\"column\":147},\"end\":{\"line\":69,\"column\":164}}}) : helper)))\n    + \"\\\" autocomplete=\\\"new-password\\\" />\\n\t\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t</span>\\n\t\t\t\t</li>\\n\";\n},\"26\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.expireDate || (depth0 != null ? depth0.expireDate : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"expireDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":160},\"end\":{\"line\":84,\"column\":174}}}) : helper)));\n},\"28\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.defaultExpireDate || (depth0 != null ? depth0.defaultExpireDate : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"defaultExpireDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":182},\"end\":{\"line\":84,\"column\":203}}}) : helper)));\n},\"30\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t\t<li>\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"share-add\\\">\\n\t\t\t\t\t<span class=\\\"icon-loading-small hidden\\\"></span>\\n\t\t\t\t\t<span class=\\\"icon icon-edit\\\"></span>\\n\t\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.addNoteLabel || (depth0 != null ? depth0.addNoteLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"addNoteLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":92,\"column\":11},\"end\":{\"line\":92,\"column\":27}}}) : helper)))\n    + \"</span>\\n\t\t\t\t\t<input type=\\\"button\\\" class=\\\"share-note-delete icon-delete \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasNote : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":93,\"column\":63},\"end\":{\"line\":93,\"column\":99}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t\t</a>\\n\t\t\t</li>\\n\t\t\t<li class=\\\"share-note-form \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasNote : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":96,\"column\":30},\"end\":{\"line\":96,\"column\":66}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t\t<span class=\\\"menuitem icon-note\\\">\\n\t\t\t\t\t<textarea class=\\\"share-note\\\">\"\n    + alias4(((helper = (helper = helpers.shareNote || (depth0 != null ? depth0.shareNote : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareNote\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":98,\"column\":34},\"end\":{\"line\":98,\"column\":47}}}) : helper)))\n    + \"</textarea>\\n\t\t\t\t\t<input type=\\\"submit\\\" class=\\\"icon-confirm share-note-submit\\\" value=\\\"\\\" id=\\\"add-note-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":99,\"column\":87},\"end\":{\"line\":99,\"column\":98}}}) : helper)))\n    + \"\\\" />\\n\t\t\t\t</span>\\n\t\t\t</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"popovermenu bubble hidden menu\\\">\\n\t<ul>\\n\t\t\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isResharingAllowed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":10,\"column\":30}}})) != null ? stack1 : \"\")\n    + \"\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isFolder : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":2},\"end\":{\"line\":36,\"column\":10}}})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isMailShare : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":37,\"column\":2},\"end\":{\"line\":74,\"column\":10}}})) != null ? stack1 : \"\")\n    + \"\t\t<li>\\n\t\t\t<span class=\\\"menuitem\\\">\\n\t\t\t\t<input id=\\\"expireDate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":26},\"end\":{\"line\":77,\"column\":33}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":34},\"end\":{\"line\":77,\"column\":45}}}) : helper)))\n    + \"\\\" type=\\\"checkbox\\\" name=\\\"expirationDate\\\" class=\\\"expireDate checkbox\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":113},\"end\":{\"line\":77,\"column\":158}}})) != null ? stack1 : \"\")\n    + \"\\\" />\\n\t\t\t\t<label for=\\\"expireDate-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":78,\"column\":27},\"end\":{\"line\":78,\"column\":34}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":78,\"column\":35},\"end\":{\"line\":78,\"column\":46}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.expireDateLabel || (depth0 != null ? depth0.expireDateLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expireDateLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":78,\"column\":48},\"end\":{\"line\":78,\"column\":67}}}) : helper)))\n    + \"</label>\\n\t\t\t</span>\\n\t\t</li>\\n\t\t<li class=\\\"expirationDateMenu-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":32},\"end\":{\"line\":81,\"column\":39}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":40},\"end\":{\"line\":81,\"column\":51}}}) : helper)))\n    + \" \"\n    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":81,\"column\":52},\"end\":{\"line\":81,\"column\":94}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n\t\t\t<span class=\\\"expirationDateContainer-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":82,\"column\":40},\"end\":{\"line\":82,\"column\":47}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":82,\"column\":48},\"end\":{\"line\":82,\"column\":59}}}) : helper)))\n    + \" icon-expiredate menuitem\\\">\\n\t\t\t\t<label for=\\\"expirationDatePicker-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":37},\"end\":{\"line\":83,\"column\":44}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":45},\"end\":{\"line\":83,\"column\":56}}}) : helper)))\n    + \"\\\" class=\\\"hidden-visually\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.expirationDate || (depth0 != null ? depth0.expirationDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":89},\"end\":{\"line\":83,\"column\":107}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.expirationLabel || (depth0 != null ? depth0.expirationLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":83,\"column\":109},\"end\":{\"line\":83,\"column\":128}}}) : helper)))\n    + \"</label>\\n\t\t\t\t<input id=\\\"expirationDatePicker-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":36},\"end\":{\"line\":84,\"column\":43}}}) : helper)))\n    + \"-\"\n    + alias4(((helper = (helper = helpers.shareId || (depth0 != null ? depth0.shareId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":44},\"end\":{\"line\":84,\"column\":55}}}) : helper)))\n    + \"\\\" class=\\\"datepicker\\\" type=\\\"text\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.expirationDatePlaceholder || (depth0 != null ? depth0.expirationDatePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"expirationDatePlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":101},\"end\":{\"line\":84,\"column\":130}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.hasExpireDate : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(26, data, 0),\"inverse\":container.program(28, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":139},\"end\":{\"line\":84,\"column\":210}}})) != null ? stack1 : \"\")\n    + \"\\\" />\\n\t\t\t</span>\\n\t\t</li>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isNoteAvailable : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(30, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":87,\"column\":2},\"end\":{\"line\":102,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"unshare\\\"><span class=\\\"icon-loading-small hidden\\\"></span><span class=\\\"icon icon-delete\\\"></span><span>\"\n    + alias4(((helper = (helper = helpers.unshareLabel || (depth0 != null ? depth0.unshareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"unshareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":104,\"column\":122},\"end\":{\"line\":104,\"column\":138}}}) : helper)))\n    + \"</span></a>\\n\t\t</li>\\n\t</ul>\\n</div>\\n\";\n},\"useData\":true});\ntemplates['sharedialogview'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t<label for=\\\"shareWith-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":23},\"end\":{\"line\":3,\"column\":30}}}) : helper)))\n    + \"\\\" class=\\\"hidden-visually\\\">\"\n    + alias4(((helper = (helper = helpers.shareLabel || (depth0 != null ? depth0.shareLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shareLabel\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":56},\"end\":{\"line\":3,\"column\":70}}}) : helper)))\n    + \"</label>\\n\t<div class=\\\"oneline\\\">\\n\t\t<input id=\\\"shareWith-\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":23},\"end\":{\"line\":5,\"column\":30}}}) : helper)))\n    + \"\\\" class=\\\"shareWithField\\\" type=\\\"text\\\" placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.sharePlaceholder || (depth0 != null ? depth0.sharePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sharePlaceholder\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":80},\"end\":{\"line\":5,\"column\":100}}}) : helper)))\n    + \"\\\" />\\n\t\t<span class=\\\"shareWithLoading icon-loading-small hidden\\\"></span>\\n\t\t<span class=\\\"shareWithConfirm icon icon-confirm\\\"></span>\\n\t</div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"resharerInfoView subView\\\"></div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isSharingAllowed : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":9,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"<div class=\\\"linkShareView subView\\\"></div>\\n<div class=\\\"shareeListView subView\\\"></div>\\n<div class=\\\"loading hidden\\\" style=\\\"height: 50px\\\"></div>\\n\";\n},\"useData\":true});\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\tif(!OC.Share) {\n\t\tOC.Share = {};\n\t\tOC.Share.Types = {};\n\t}\n\n\t/**\n\t * @typedef {object} OC.Share.Types.LinkShareInfo\n\t * @property {string} token\n\t * @property {bool} hideDownload\n\t * @property {string|null} password\n\t * @property {bool} sendPasswordByTalk\n\t * @property {number} permissions\n\t * @property {Date} expiration\n\t * @property {number} stime share time\n\t */\n\n\t/**\n\t * @typedef {object} OC.Share.Types.Reshare\n\t * @property {string} uid_owner\n\t * @property {number} share_type\n\t * @property {string} share_with\n\t * @property {string} displayname_owner\n\t * @property {number} permissions\n\t */\n\n\t/**\n\t * @typedef {object} OC.Share.Types.ShareInfo\n\t * @property {number} share_type\n\t * @property {number} permissions\n\t * @property {number} file_source optional\n\t * @property {number} item_source\n\t * @property {string} token\n\t * @property {string} share_with\n\t * @property {string} share_with_displayname\n\t * @property {string} share_with_avatar\n\t * @property {string} mail_send\n\t * @property {Date} expiration optional?\n\t * @property {number} stime optional?\n\t * @property {string} uid_owner\n\t * @property {string} displayname_owner\n\t */\n\n\t/**\n\t * @typedef {object} OC.Share.Types.ShareItemInfo\n\t * @property {OC.Share.Types.Reshare} reshare\n\t * @property {OC.Share.Types.ShareInfo[]} shares\n\t * @property {OC.Share.Types.LinkShareInfo|undefined} linkShare\n\t */\n\n\t/**\n\t * These properties are sometimes returned by the server as strings instead\n\t * of integers, so we need to convert them accordingly...\n\t */\n\tvar SHARE_RESPONSE_INT_PROPS = [\n\t\t'id', 'file_parent', 'mail_send', 'file_source', 'item_source', 'permissions',\n\t\t'storage', 'share_type', 'parent', 'stime'\n\t];\n\n\t/**\n\t * @class OCA.Share.ShareItemModel\n\t * @classdesc\n\t *\n\t * Represents the GUI of the share dialogue\n\t *\n\t * // FIXME: use OC Share API once #17143 is done\n\t *\n\t * // TODO: this really should be a collection of share item models instead,\n\t * where the link share is one of them\n\t */\n\tvar ShareItemModel = OC.Backbone.Model.extend({\n\t\t/**\n\t\t * share id of the link share, if applicable\n\t\t */\n\t\t_linkShareId: null,\n\n\t\tinitialize: function(attributes, options) {\n\t\t\tif(!_.isUndefined(options.configModel)) {\n\t\t\t\tthis.configModel = options.configModel;\n\t\t\t}\n\t\t\tif(!_.isUndefined(options.fileInfoModel)) {\n\t\t\t\t/** @type {OC.Files.FileInfo} **/\n\t\t\t\tthis.fileInfoModel = options.fileInfoModel;\n\t\t\t}\n\n\t\t\t_.bindAll(this, 'addShare');\n\t\t},\n\n\t\tdefaults: {\n\t\t\tallowPublicUploadStatus: false,\n\t\t\tpermissions: 0,\n\t\t\tlinkShares: []\n\t\t},\n\n\t\t/**\n\t\t * Saves the current link share information.\n\t\t *\n\t\t * This will trigger an ajax call and, if successful, refetch the model\n\t\t * afterwards. Callbacks \"success\", \"error\" and \"complete\" can be given\n\t\t * in the options object; \"success\" is called after a successful save\n\t\t * once the model is refetch, \"error\" is called after a failed save, and\n\t\t * \"complete\" is called both after a successful save and after a failed\n\t\t * save. Note that \"complete\" is called before \"success\" and \"error\" are\n\t\t * called (unlike in jQuery, in which it is called after them); this\n\t\t * ensures that \"complete\" is called even if refetching the model fails.\n\t\t *\n\t\t * TODO: this should be a separate model\n\t\t */\n\t\tsaveLinkShare: function(attributes, options) {\n\t\t\toptions = options || {};\n\t\t\tattributes = _.extend({}, attributes);\n\n\t\t\tvar shareId = null;\n\t\t\tvar call;\n\n\t\t\t// oh yeah...\n\t\t\tif (attributes.expiration) {\n\t\t\t\tattributes.expireDate = attributes.expiration;\n\t\t\t\tdelete attributes.expiration;\n\t\t\t}\n\n\t\t\tvar linkShares = this.get('linkShares');\n\t\t\tvar shareIndex = _.findIndex(linkShares, function(share) {return share.id === attributes.cid})\n\n\t\t\tif (linkShares.length > 0 && shareIndex !== -1) {\n\t\t\t\tshareId = linkShares[shareIndex].id;\n\n\t\t\t\t// note: update can only update a single value at a time\n\t\t\t\tcall = this.updateShare(shareId, attributes, options);\n\t\t\t} else {\n\t\t\t\tattributes = _.defaults(attributes, {\n\t\t\t\t\thideDownload: false,\n\t\t\t\t\tpassword: '',\n\t\t\t\t\tpasswordChanged: false,\n\t\t\t\t\tsendPasswordByTalk: false,\n\t\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\t\texpireDate: this.configModel.getDefaultExpirationDateString(),\n\t\t\t\t\tshareType: OC.Share.SHARE_TYPE_LINK\n\t\t\t\t});\n\n\t\t\t\tcall = this.addShare(attributes, options);\n\t\t\t}\n\n\t\t\treturn call;\n\t\t},\n\n\t\taddShare: function(attributes, options) {\n\t\t\tvar shareType = attributes.shareType;\n\t\t\tattributes = _.extend({}, attributes);\n\n\t\t\t// get default permissions\n\t\t\tvar defaultPermissions = OC.getCapabilities()['files_sharing']['default_permissions'] || OC.PERMISSION_ALL;\n\t\t\tvar possiblePermissions = OC.PERMISSION_READ;\n\n\t\t\tif (this.updatePermissionPossible()) {\n\t\t\t\tpossiblePermissions = possiblePermissions | OC.PERMISSION_UPDATE;\n\t\t\t}\n\t\t\tif (this.createPermissionPossible()) {\n\t\t\t\tpossiblePermissions = possiblePermissions | OC.PERMISSION_CREATE;\n\t\t\t}\n\t\t\tif (this.deletePermissionPossible()) {\n\t\t\t\tpossiblePermissions = possiblePermissions | OC.PERMISSION_DELETE;\n\t\t\t}\n\t\t\tif (this.configModel.get('isResharingAllowed') && (this.sharePermissionPossible())) {\n\t\t\t\tpossiblePermissions = possiblePermissions | OC.PERMISSION_SHARE;\n\t\t\t}\n\n\t\t\tattributes.permissions = defaultPermissions & possiblePermissions;\n\t\t\tif (_.isUndefined(attributes.path)) {\n\t\t\t\tattributes.path = this.fileInfoModel.getFullPath();\n\t\t\t}\n\n\t\t\treturn this._addOrUpdateShare({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: this._getUrl('shares'),\n\t\t\t\tdata: attributes,\n\t\t\t\tdataType: 'json'\n\t\t\t}, options);\n\t\t},\n\n\t\tupdateShare: function(shareId, attrs, options) {\n\t\t\treturn this._addOrUpdateShare({\n\t\t\t\ttype: 'PUT',\n\t\t\t\turl: this._getUrl('shares/' + encodeURIComponent(shareId)),\n\t\t\t\tdata: attrs,\n\t\t\t\tdataType: 'json'\n\t\t\t}, options);\n\t\t},\n\n\t\t_addOrUpdateShare: function(ajaxSettings, options) {\n\t\t\tvar self = this;\n\t\t\toptions = options || {};\n\n\t\t\treturn $.ajax(\n\t\t\t\tajaxSettings\n\t\t\t).always(function() {\n\t\t\t\tif (_.isFunction(options.complete)) {\n\t\t\t\t\toptions.complete(self);\n\t\t\t\t}\n\t\t\t}).done(function() {\n\t\t\t\tself.fetch().done(function() {\n\t\t\t\t\tif (_.isFunction(options.success)) {\n\t\t\t\t\t\toptions.success(self);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).fail(function(xhr) {\n\t\t\t\tvar msg = t('core', 'Error');\n\t\t\t\tvar result = xhr.responseJSON;\n\t\t\t\tif (result && result.ocs && result.ocs.meta) {\n\t\t\t\t\tmsg = result.ocs.meta.message;\n\t\t\t\t}\n\n\t\t\t\tif (_.isFunction(options.error)) {\n\t\t\t\t\toptions.error(self, msg);\n\t\t\t\t} else {\n\t\t\t\t\tOC.dialogs.alert(msg, t('core', 'Error while sharing'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Deletes the share with the given id\n\t\t *\n\t\t * @param {int} shareId share id\n\t\t * @return {jQuery}\n\t\t */\n\t\tremoveShare: function(shareId, options) {\n\t\t\tvar self = this;\n\t\t\toptions = options || {};\n\t\t\treturn $.ajax({\n\t\t\t\ttype: 'DELETE',\n\t\t\t\turl: this._getUrl('shares/' + encodeURIComponent(shareId)),\n\t\t\t}).done(function() {\n\t\t\t\tself.fetch({\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\tif (_.isFunction(options.success)) {\n\t\t\t\t\t\t\toptions.success(self);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).fail(function(xhr) {\n\t\t\t\tvar msg = t('core', 'Error');\n\t\t\t\tvar result = xhr.responseJSON;\n\t\t\t\tif (result.ocs && result.ocs.meta) {\n\t\t\t\t\tmsg = result.ocs.meta.message;\n\t\t\t\t}\n\n\t\t\t\tif (_.isFunction(options.error)) {\n\t\t\t\t\toptions.error(self, msg);\n\t\t\t\t} else {\n\t\t\t\t\tOC.dialogs.alert(msg, t('core', 'Error removing share'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisPublicUploadAllowed: function() {\n\t\t\treturn this.get('allowPublicUploadStatus');\n\t\t},\n\n\t\tisPublicEditingAllowed: function() {\n\t\t\treturn this.get('allowPublicEditingStatus');\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisHideFileListSet: function() {\n\t\t\treturn this.get('hideFileListStatus');\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisFolder: function() {\n\t\t\treturn this.get('itemType') === 'folder';\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tisFile: function() {\n\t\t\treturn this.get('itemType') === 'file';\n\t\t},\n\n\t\t/**\n\t\t * whether this item has reshare information\n\t\t * @returns {boolean}\n\t\t */\n\t\thasReshare: function() {\n\t\t\tvar reshare = this.get('reshare');\n\t\t\treturn _.isObject(reshare) && !_.isUndefined(reshare.uid_owner);\n\t\t},\n\n\t\t/**\n\t\t * whether this item has user share information\n\t\t * @returns {boolean}\n\t\t */\n\t\thasUserShares: function() {\n\t\t\treturn this.getSharesWithCurrentItem().length > 0;\n\t\t},\n\n\t\t/**\n\t\t * Returns whether this item has link shares\n\t\t *\n\t\t * @return {bool} true if a link share exists, false otherwise\n\t\t */\n\t\thasLinkShares: function() {\n\t\t\tvar linkShares = this.get('linkShares');\n\t\t\tif (linkShares && linkShares.length > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetReshareOwner: function() {\n\t\t\treturn this.get('reshare').uid_owner;\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetReshareOwnerDisplayname: function() {\n\t\t\treturn this.get('reshare').displayname_owner;\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetReshareNote: function() {\n\t\t\treturn this.get('reshare').note;\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetReshareWith: function() {\n\t\t\treturn this.get('reshare').share_with;\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t */\n\t\tgetReshareWithDisplayName: function() {\n\t\t\tvar reshare = this.get('reshare');\n\t\t\treturn reshare.share_with_displayname || reshare.share_with;\n\t\t},\n\n\t\t/**\n\t\t * @returns {number}\n\t\t */\n\t\tgetReshareType: function() {\n\t\t\treturn this.get('reshare').share_type;\n\t\t},\n\n\t\tgetExpireDate: function(shareIndex) {\n\t\t\treturn this._shareExpireDate(shareIndex);\n\t\t},\n\n\t\tgetNote: function(shareIndex) {\n\t\t\treturn this._shareNote(shareIndex);\n\t\t},\n\n\t\t/**\n\t\t * Returns all share entries that only apply to the current item\n\t\t * (file/folder)\n\t\t *\n\t\t * @return {Array.<OC.Share.Types.ShareInfo>}\n\t\t */\n\t\tgetSharesWithCurrentItem: function() {\n\t\t\tvar shares = this.get('shares') || [];\n\t\t\tvar fileId = this.fileInfoModel.get('id');\n\t\t\treturn _.filter(shares, function(share) {\n\t\t\t\treturn share.item_source === fileId;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetShareWith: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.share_with;\n\t\t},\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetShareWithDisplayName: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.share_with_displayname;\n\t\t},\n\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetShareWithAvatar: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.share_with_avatar;\n\t\t},\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetSharedBy: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.uid_owner;\n\t\t},\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetSharedByDisplayName: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.displayname_owner;\n\t\t},\n\n\t\t/**\n\t\t * @param shareIndex\n\t\t * @returns {string}\n\t\t */\n\t\tgetFileOwnerUid: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.uid_file_owner;\n\t\t},\n\n\t\t/**\n\t\t * returns the array index of a sharee for a provided shareId\n\t\t *\n\t\t * @param shareId\n\t\t * @returns {number}\n\t\t */\n\t\tfindShareWithIndex: function(shareId) {\n\t\t\tvar shares = this.get('shares');\n\t\t\tif(!_.isArray(shares)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\tfor(var i = 0; i < shares.length; i++) {\n\t\t\t\tvar shareWith = shares[i];\n\t\t\t\tif(shareWith.id === shareId) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow \"Unknown Sharee\";\n\t\t},\n\n\t\tgetShareType: function(shareIndex) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.share_type;\n\t\t},\n\n\t\t/**\n\t\t * whether a share from shares has the requested permission\n\t\t *\n\t\t * @param {number} shareIndex\n\t\t * @param {number} permission\n\t\t * @returns {boolean}\n\t\t * @private\n\t\t */\n\t\t_shareHasPermission: function(shareIndex, permission) {\n\t\t\t/** @type OC.Share.Types.ShareInfo **/\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn (share.permissions & permission) === permission;\n\t\t},\n\n\n\t\t_shareExpireDate: function(shareIndex) {\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\tvar date2 = share.expiration;\n\t\t\treturn date2;\n\t\t},\n\n\n\t\t_shareNote: function(shareIndex) {\n\t\t\tvar share = this.get('shares')[shareIndex];\n\t\t\tif(!_.isObject(share)) {\n\t\t\t\tthrow \"Unknown Share\";\n\t\t\t}\n\t\t\treturn share.note;\n\t\t},\n\n\t\t/**\n\t\t * @return {int}\n\t\t */\n\t\tgetPermissions: function() {\n\t\t\treturn this.get('permissions');\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tsharePermissionPossible: function() {\n\t\t\treturn (this.get('permissions') & OC.PERMISSION_SHARE) === OC.PERMISSION_SHARE;\n\t\t},\n\n\t\t/**\n\t\t * @param {number} shareIndex\n\t\t * @returns {boolean}\n\t\t */\n\t\thasSharePermission: function(shareIndex) {\n\t\t\treturn this._shareHasPermission(shareIndex, OC.PERMISSION_SHARE);\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tcreatePermissionPossible: function() {\n\t\t\treturn (this.get('permissions') & OC.PERMISSION_CREATE) === OC.PERMISSION_CREATE;\n\t\t},\n\n\t\t/**\n\t\t * @param {number} shareIndex\n\t\t * @returns {boolean}\n\t\t */\n\t\thasCreatePermission: function(shareIndex) {\n\t\t\treturn this._shareHasPermission(shareIndex, OC.PERMISSION_CREATE);\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tupdatePermissionPossible: function() {\n\t\t\treturn (this.get('permissions') & OC.PERMISSION_UPDATE) === OC.PERMISSION_UPDATE;\n\t\t},\n\n\t\t/**\n\t\t * @param {number} shareIndex\n\t\t * @returns {boolean}\n\t\t */\n\t\thasUpdatePermission: function(shareIndex) {\n\t\t\treturn this._shareHasPermission(shareIndex, OC.PERMISSION_UPDATE);\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\tdeletePermissionPossible: function() {\n\t\t\treturn (this.get('permissions') & OC.PERMISSION_DELETE) === OC.PERMISSION_DELETE;\n\t\t},\n\n\t\t/**\n\t\t * @param {number} shareIndex\n\t\t * @returns {boolean}\n\t\t */\n\t\thasDeletePermission: function(shareIndex) {\n\t\t\treturn this._shareHasPermission(shareIndex, OC.PERMISSION_DELETE);\n\t\t},\n\n\t\thasReadPermission: function(shareIndex) {\n\t\t\treturn this._shareHasPermission(shareIndex, OC.PERMISSION_READ);\n\t\t},\n\n\t\t/**\n\t\t * @returns {boolean}\n\t\t */\n\t\teditPermissionPossible: function() {\n\t\t\treturn    this.createPermissionPossible()\n\t\t\t\t   || this.updatePermissionPossible()\n\t\t\t\t   || this.deletePermissionPossible();\n\t\t},\n\n\t\t/**\n\t\t * @returns {string}\n\t\t *     The state that the 'can edit' permission checkbox should have.\n\t\t *     Possible values:\n\t\t *     - empty string: no permission\n\t\t *     - 'checked': all applicable permissions\n\t\t *     - 'indeterminate': some but not all permissions\n\t\t */\n\t\teditPermissionState: function(shareIndex) {\n\t\t\tvar hcp = this.hasCreatePermission(shareIndex);\n\t\t\tvar hup = this.hasUpdatePermission(shareIndex);\n\t\t\tvar hdp = this.hasDeletePermission(shareIndex);\n\t\t\tif (this.isFile()) {\n\t\t\t\tif (hcp || hup || hdp) {\n\t\t\t\t\treturn 'checked';\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tif (!hcp && !hup && !hdp) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tif (   (this.createPermissionPossible() && !hcp)\n\t\t\t\t|| (this.updatePermissionPossible() && !hup)\n\t\t\t\t|| (this.deletePermissionPossible() && !hdp)   ) {\n\t\t\t\treturn 'indeterminate';\n\t\t\t}\n\t\t\treturn 'checked';\n\t\t},\n\n\t\t/**\n\t\t * @returns {int}\n\t\t */\n\t\tlinkSharePermissions: function(shareId) {\n\t\t\tvar linkShares = this.get('linkShares');\n\t\t\tvar shareIndex = _.findIndex(linkShares, function(share) {return share.id === shareId})\n\n\t\t\tif (!this.hasLinkShares()) {\n\t\t\t\treturn -1;\n\t\t\t} else if (linkShares.length > 0 && shareIndex !== -1) {\n\t\t\t\treturn linkShares[shareIndex].permissions;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t_getUrl: function(base, params) {\n\t\t\tparams = _.extend({format: 'json'}, params || {});\n\t\t\treturn OC.linkToOCS('apps/files_sharing/api/v1', 2) + base + '?' + OC.buildQueryString(params);\n\t\t},\n\n\t\t_fetchShares: function() {\n\t\t\tvar path = this.fileInfoModel.getFullPath();\n\t\t\treturn $.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: this._getUrl('shares', {path: path, reshares: true})\n\t\t\t});\n\t\t},\n\n\t\t_fetchReshare: function() {\n\t\t\t// only fetch original share once\n\t\t\tif (!this._reshareFetched) {\n\t\t\t\tvar path = this.fileInfoModel.getFullPath();\n\t\t\t\tthis._reshareFetched = true;\n\t\t\t\treturn $.ajax({\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\turl: this._getUrl('shares', {path: path, shared_with_me: true})\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn $.Deferred().resolve([{\n\t\t\t\t\tocs: {\n\t\t\t\t\t\tdata: [this.get('reshare')]\n\t\t\t\t\t}\n\t\t\t\t}]);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Group reshares into a single super share element.\n\t\t * Does this by finding the most precise share and\n\t\t * combines the permissions to be the most permissive.\n\t\t *\n\t\t * @param {Array} reshares\n\t\t * @return {Object} reshare\n\t\t */\n\t\t_groupReshares: function(reshares) {\n\t\t\tif (!reshares || !reshares.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar superShare = reshares.shift();\n\t\t\tvar combinedPermissions = superShare.permissions;\n\t\t\t_.each(reshares, function(reshare) {\n\t\t\t\t// use share have higher priority than group share\n\t\t\t\tif (reshare.share_type === OC.Share.SHARE_TYPE_USER && superShare.share_type === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\t\tsuperShare = reshare;\n\t\t\t\t}\n\t\t\t\tcombinedPermissions |= reshare.permissions;\n\t\t\t});\n\n\t\t\tsuperShare.permissions = combinedPermissions;\n\t\t\treturn superShare;\n\t\t},\n\n\t\tfetch: function(options) {\n\t\t\tvar model = this;\n\t\t\tthis.trigger('request', this);\n\n\t\t\tvar deferred = $.when(\n\t\t\t\tthis._fetchShares(),\n\t\t\t\tthis._fetchReshare()\n\t\t\t);\n\t\t\tdeferred.done(function(data1, data2) {\n\t\t\t\tmodel.trigger('sync', 'GET', this);\n\t\t\t\tvar sharesMap = {};\n\t\t\t\t_.each(data1[0].ocs.data, function(shareItem) {\n\t\t\t\t\tsharesMap[shareItem.id] = shareItem;\n\t\t\t\t});\n\n\t\t\t\tvar reshare = false;\n\t\t\t\tif (data2[0].ocs.data.length) {\n\t\t\t\t\treshare = model._groupReshares(data2[0].ocs.data);\n\t\t\t\t}\n\n\t\t\t\tmodel.set(model.parse({\n\t\t\t\t\tshares: sharesMap,\n\t\t\t\t\treshare: reshare\n\t\t\t\t}));\n\n\t\t\t\tif(!_.isUndefined(options) && _.isFunction(options.success)) {\n\t\t\t\t\toptions.success();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn deferred;\n\t\t},\n\n\t\t/**\n\t\t * Updates OC.Share.itemShares and OC.Share.statuses.\n\t\t *\n\t\t * This is required in case the user navigates away and comes back,\n\t\t * the share statuses from the old arrays are still used to fill in the icons\n\t\t * in the file list.\n\t\t */\n\t\t_legacyFillCurrentShares: function(shares) {\n\t\t\tvar fileId = this.fileInfoModel.get('id');\n\t\t\tif (!shares || !shares.length) {\n\t\t\t\tdelete OC.Share.statuses[fileId];\n\t\t\t\tOC.Share.currentShares = {};\n\t\t\t\tOC.Share.itemShares = [];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar currentShareStatus = OC.Share.statuses[fileId];\n\t\t\tif (!currentShareStatus) {\n\t\t\t\tcurrentShareStatus = {link: false};\n\t\t\t\tOC.Share.statuses[fileId] = currentShareStatus;\n\t\t\t}\n\t\t\tcurrentShareStatus.link = false;\n\n\t\t\tOC.Share.currentShares = {};\n\t\t\tOC.Share.itemShares = [];\n\t\t\t_.each(shares,\n\t\t\t\t/**\n\t\t\t\t * @param {OC.Share.Types.ShareInfo} share\n\t\t\t\t */\n\t\t\t\tfunction(share) {\n\t\t\t\t\tif (share.share_type === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\t\tOC.Share.itemShares[share.share_type] = true;\n\t\t\t\t\t\tcurrentShareStatus.link = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!OC.Share.itemShares[share.share_type]) {\n\t\t\t\t\t\t\tOC.Share.itemShares[share.share_type] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tOC.Share.itemShares[share.share_type].push(share.share_with);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tparse: function(data) {\n\t\t\tif(data === false) {\n\t\t\t\tconsole.warn('no data was returned');\n\t\t\t\tthis.trigger('fetchError');\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tvar permissions = this.fileInfoModel.get('permissions');\n\t\t\tif(!_.isUndefined(data.reshare) && !_.isUndefined(data.reshare.permissions) && data.reshare.uid_owner !== OC.currentUser) {\n\t\t\t\tpermissions = permissions & data.reshare.permissions;\n\t\t\t}\n\n\t\t\tvar allowPublicUploadStatus = false;\n\t\t\tif(!_.isUndefined(data.shares)) {\n\t\t\t\t$.each(data.shares, function (key, value) {\n\t\t\t\t\tif (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\t\tallowPublicUploadStatus = (value.permissions & OC.PERMISSION_CREATE) ? true : false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar allowPublicEditingStatus = true;\n\t\t\tif(!_.isUndefined(data.shares)) {\n\t\t\t\t$.each(data.shares, function (key, value) {\n\t\t\t\t\tif (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\t\tallowPublicEditingStatus = (value.permissions & OC.PERMISSION_UPDATE) ? true : false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tvar hideFileListStatus = false;\n\t\t\tif(!_.isUndefined(data.shares)) {\n\t\t\t\t$.each(data.shares, function (key, value) {\n\t\t\t\t\tif (value.share_type === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\t\thideFileListStatus = (value.permissions & OC.PERMISSION_READ) ? false : true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/** @type {OC.Share.Types.ShareInfo[]} **/\n\t\t\tvar shares = _.map(data.shares, function(share) {\n\t\t\t\t// properly parse some values because sometimes the server\n\t\t\t\t// returns integers as string...\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < SHARE_RESPONSE_INT_PROPS.length; i++) {\n\t\t\t\t\tvar prop = SHARE_RESPONSE_INT_PROPS[i];\n\t\t\t\t\tif (!_.isUndefined(share[prop])) {\n\t\t\t\t\t\tshare[prop] = parseInt(share[prop], 10);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn share;\n\t\t\t});\n\n\t\t\tthis._legacyFillCurrentShares(shares);\n\n\t\t\tvar linkShares =  [];\n\t\t\t// filter out the share by link\n\t\t\tshares = _.reject(shares,\n\t\t\t\t/**\n\t\t\t\t * @param {OC.Share.Types.ShareInfo} share\n\t\t\t\t */\n\t\t\t\tfunction(share) {\n\t\t\t\t\tvar isShareLink =\n\t\t\t\t\t\tshare.share_type === OC.Share.SHARE_TYPE_LINK\n\t\t\t\t\t\t&& (   share.file_source === this.get('itemSource')\n\t\t\t\t\t\t|| share.item_source === this.get('itemSource'));\n\n\t\t\t\t\tif (isShareLink) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Ignore reshared link shares for now\n\t\t\t\t\t\t * FIXME: Find a way to display properly\n\t\t\t\t\t\t */\n\t\t\t\t\t\tif (share.uid_owner !== OC.currentUser) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar link = window.location.protocol + '//' + window.location.host;\n\t\t\t\t\t\tif (!share.token) {\n\t\t\t\t\t\t\t// pre-token link\n\t\t\t\t\t\t\tvar fullPath = this.fileInfoModel.get('path') + '/' +\n\t\t\t\t\t\t\t\tthis.fileInfoModel.get('name');\n\t\t\t\t\t\t\tvar location = '/' + OC.currentUser + '/files' + fullPath;\n\t\t\t\t\t\t\tvar type = this.fileInfoModel.isDirectory() ? 'folder' : 'file';\n\t\t\t\t\t\t\tlink += OC.linkTo('', 'public.php') + '?service=files&' +\n\t\t\t\t\t\t\t\ttype + '=' + encodeURIComponent(location);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlink += OC.generateUrl('/s/') + share.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlinkShares.push(_.extend({}, share, {\n\t\t\t\t\t\t\t// hide_download is returned as an int, so force it\n\t\t\t\t\t\t\t// to a boolean\n\t\t\t\t\t\t\thideDownload: !!share.hide_download,\n\t\t\t\t\t\t\tpassword: share.share_with,\n\t\t\t\t\t\t\tsendPasswordByTalk: share.send_password_by_talk\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\treturn share;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\treshare: data.reshare,\n\t\t\t\tshares: shares,\n\t\t\t\tlinkShares: linkShares,\n\t\t\t\tpermissions: permissions,\n\t\t\t\tallowPublicUploadStatus: allowPublicUploadStatus,\n\t\t\t\tallowPublicEditingStatus: allowPublicEditingStatus,\n\t\t\t\thideFileListStatus: hideFileListStatus\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Parses a string to an valid integer (unix timestamp)\n\t\t * @param time\n\t\t * @returns {*}\n\t\t * @internal Only used to work around a bug in the backend\n\t\t */\n\t\t_parseTime: function(time) {\n\t\t\tif (_.isString(time)) {\n\t\t\t\t// skip empty strings and hex values\n\t\t\t\tif (time === '' || (time.length > 1 && time[0] === '0' && time[1] === 'x')) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\ttime = parseInt(time, 10);\n\t\t\t\tif(isNaN(time)) {\n\t\t\t\t\ttime = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn time;\n\t\t},\n\n\t\t/**\n\t\t * Returns a list of share types from the existing shares.\n\t\t *\n\t\t * @return {Array.<int>} array of share types\n\t\t */\n\t\tgetShareTypes: function() {\n\t\t\tvar result;\n\t\t\tresult = _.pluck(this.getSharesWithCurrentItem(), 'share_type');\n\t\t\tif (this.hasLinkShares()) {\n\t\t\t\tresult.push(OC.Share.SHARE_TYPE_LINK);\n\t\t\t}\n\t\t\treturn _.uniq(result);\n\t\t}\n\t});\n\n\tOC.Share.ShareItemModel = ShareItemModel;\n})();\n","/**\n * @copyright 2017, Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @author Roeland Jago Douma <roeland@famdouma.nl>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n(function() {\n\tif (!OC.Share) {\n\t\tOC.Share = {};\n\t}\n\n\tOC.Share.Social = {};\n\n\tvar SocialModel = OC.Backbone.Model.extend({\n\t\tdefaults: {\n\t\t\t/** used for sorting social buttons */\n\t\t\tkey: null,\n\t\t\t/** url to open, {{reference}} will be replaced with the link */\n\t\t\turl: null,\n\t\t\t/** Name to show in the tooltip */\n\t\t\tname: null,\n\t\t\t/** Icon class to display */\n\t\t\ticonClass: null,\n\t\t\t/** Open in new windows */\n\t\t\tnewWindow: true\n\t\t}\n\t});\n\n\tOC.Share.Social.Model = SocialModel;\n\n\tvar SocialCollection = OC.Backbone.Collection.extend({\n\t\tmodel: OC.Share.Social.Model,\n\n\t\tcomparator: 'key'\n\t});\n\n\n\tOC.Share.Social.Collection = new SocialCollection;\n})();\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n\n(function() {\n\tif (!OC.Share) {\n\t\tOC.Share = {};\n\t}\n\n\t/**\n\t * @class OCA.Share.ShareDialogView\n\t * @member {OC.Share.ShareItemModel} model\n\t * @member {jQuery} $el\n\t * @memberof OCA.Sharing\n\t * @classdesc\n\t *\n\t * Represents the GUI of the share dialogue\n\t *\n\t */\n\tvar ShareDialogResharerInfoView = OC.Backbone.View.extend({\n\t\t/** @type {string} **/\n\t\tid: 'shareDialogResharerInfo',\n\n\t\t/** @type {string} **/\n\t\ttagName: 'div',\n\n\t\t/** @type {string} **/\n\t\tclassName: 'reshare',\n\n\t\t/** @type {OC.Share.ShareConfigModel} **/\n\t\tconfigModel: undefined,\n\n\t\t/** @type {Function} **/\n\t\t_template: undefined,\n\n\t\tinitialize: function(options) {\n\t\t\tvar view = this;\n\n\t\t\tthis.model.on('change:reshare', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tif(!_.isUndefined(options.configModel)) {\n\t\t\t\tthis.configModel = options.configModel;\n\t\t\t} else {\n\t\t\t\tthrow 'missing OC.Share.ShareConfigModel';\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\tif (!this.model.hasReshare()\n\t\t\t\t|| this.model.getReshareOwner() === OC.currentUser)\n\t\t\t{\n\t\t\t\tthis.$el.empty();\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar reshareTemplate = this.template();\n\t\t\tvar ownerDisplayName = this.model.getReshareOwnerDisplayname();\n\t\t\tvar shareNote = this.model.getReshareNote();\n\t\t\t\n\t\t\tvar sharedByText = '';\n\n\t\t\tif (this.model.getReshareType() === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\tsharedByText = t(\n\t\t\t\t\t'core',\n\t\t\t\t\t'Shared with you and the group {group} by {owner}',\n\t\t\t\t\t{\n\t\t\t\t\t\tgroup: this.model.getReshareWithDisplayName(),\n\t\t\t\t\t\towner: ownerDisplayName\n\t\t\t\t\t},\n\t\t\t\t\tundefined,\n\t\t\t\t\t{escape: false}\n\t\t\t\t);\n\t\t\t} else if (this.model.getReshareType() === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\tsharedByText = t(\n\t\t\t\t\t'core',\n\t\t\t\t\t'Shared with you and {circle} by {owner}',\n\t\t\t\t\t{\n\t\t\t\t\t\tcircle: this.model.getReshareWithDisplayName(),\n\t\t\t\t\t\towner: ownerDisplayName\n\t\t\t\t\t},\n\t\t\t\t\tundefined,\n\t\t\t\t\t{escape: false}\n\t\t\t\t);\n\t\t\t} else if (this.model.getReshareType() === OC.Share.SHARE_TYPE_ROOM) {\n\t\t\t\tif (this.model.get('reshare').share_with_displayname) {\n\t\t\t\t\tsharedByText = t(\n\t\t\t\t\t\t'core',\n\t\t\t\t\t\t'Shared with you and the conversation {conversation} by {owner}',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconversation: this.model.getReshareWithDisplayName(),\n\t\t\t\t\t\t\towner: ownerDisplayName\n\t\t\t\t\t\t},\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t{escape: false}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsharedByText = t(\n\t\t\t\t\t\t'core',\n\t\t\t\t\t\t'Shared with you in a conversation by {owner}',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\towner: ownerDisplayName\n\t\t\t\t\t\t},\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t{escape: false}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsharedByText = t(\n\t\t\t\t\t'core',\n\t\t\t\t\t'Shared with you by {owner}',\n\t\t\t\t\t{ owner: ownerDisplayName },\n\t\t\t\t\tundefined,\n\t\t\t\t\t{escape: false}\n\t\t\t\t);\n\t\t\t}\n\n\n\n\t\t\tthis.$el.html(reshareTemplate({\n\t\t\t\treshareOwner: this.model.getReshareOwner(),\n\t\t\t\tsharedByText: sharedByText,\n\t\t\t\tshareNote: shareNote,\n\t\t\t\thasShareNote: shareNote !== ''\n\t\t\t}));\n\n\t\t\tthis.$el.find('.avatar').each(function() {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.avatar($this.data('username'), 32);\n\t\t\t});\n\n\t\t\tthis.$el.find('.reshare').contactsMenu(\n\t\t\t\tthis.model.getReshareOwner(),\n\t\t\t\tOC.Share.SHARE_TYPE_USER,\n\t\t\t\tthis.$el);\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * @returns {Function} from Handlebars\n\t\t * @private\n\t\t */\n\t\ttemplate: function () {\n\t\t\treturn OC.Share.Templates['sharedialogresharerinfoview'];\n\t\t}\n\n\t});\n\n\tOC.Share.ShareDialogResharerInfoView = ShareDialogResharerInfoView;\n\n})();\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Clipboard, Handlebars */\n\n(function() {\n\tif (!OC.Share) {\n\t\tOC.Share = {};\n\t}\n\n\tvar PASSWORD_PLACEHOLDER = '**********';\n\tvar PASSWORD_PLACEHOLDER_MESSAGE = t('core', 'Choose a password for the public link');\n\tvar PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL = t('core', 'Choose a password for the public link or press the \"Enter\" key');\n\n\t/**\n\t * @class OCA.Share.ShareDialogLinkShareView\n\t * @member {OC.Share.ShareItemModel} model\n\t * @member {jQuery} $el\n\t * @memberof OCA.Sharing\n\t * @classdesc\n\t *\n\t * Represents the GUI of the share dialogue\n\t *\n\t */\n\tvar ShareDialogLinkShareView = OC.Backbone.View.extend({\n\t\t/** @type {string} **/\n\t\tid: 'shareDialogLinkShare',\n\n\t\t/** @type {OC.Share.ShareConfigModel} **/\n\t\tconfigModel: undefined,\n\n\t\t/** @type {boolean} **/\n\t\tshowLink: true,\n\n\t\t/** @type {boolean} **/\n\t\tshowPending: false,\n\n\t\t/** @type {boolean} **/\n\t\thasPasswordChanged: false,\n\n\t\t/** @type {string} **/\n\t\tpassword: '',\n\n\t\t/** @type {string} **/\n\t\tnewShareId: 'new-share',\n\n\t\tevents: {\n\t\t\t// open menu\n\t\t\t'click .share-menu .icon-more': 'onToggleMenu',\n\t\t\t// hide download\n\t\t\t'change .hideDownloadCheckbox': 'onHideDownloadChange',\n\t\t\t// password\n\t\t\t'click input.share-pass-submit': 'onPasswordEntered', \n\t\t\t'keyup input.linkPassText': 'onPasswordKeyUp', // check for the enter key\n\t\t\t'change .showPasswordCheckbox': 'onShowPasswordClick',\n\t\t\t'change .passwordByTalkCheckbox': 'onPasswordByTalkChange',\n\t\t\t'change .publicEditingCheckbox': 'onAllowPublicEditingChange',\n\t\t\t// copy link url\n\t\t\t'click .linkText': 'onLinkTextClick',\n\t\t\t// social\n\t\t\t'click .pop-up': 'onPopUpClick',\n\t\t\t// permission change\n\t\t\t'change .publicUploadRadio': 'onPublicUploadChange',\n\t\t\t// expire date\n\t\t\t'click .expireDate' : 'onExpireDateChange',\n\t\t\t'change .datepicker': 'onChangeExpirationDate',\n\t\t\t'click .datepicker' : 'showDatePicker',\n\t\t\t// note\n\t\t\t'click .share-add': 'showNoteForm',\n\t\t\t'click .share-note-delete': 'deleteNote',\n\t\t\t'click .share-note-submit': 'updateNote',\n\t\t\t// remove\n\t\t\t'click .unshare': 'onUnshare',\n\t\t\t// new share\n\t\t\t'click .new-share': 'newShare',\n\t\t\t// enforced pass set\n\t\t\t'submit .enforcedPassForm': 'enforcedPasswordSet',\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tvar view = this;\n\n\t\t\tthis.model.on('change:permissions', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tthis.model.on('change:itemType', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tthis.model.on('change:allowPublicUploadStatus', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tthis.model.on('change:hideFileListStatus', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tthis.model.on('change:linkShares', function(model, linkShares) {\n\t\t\t\t// The \"Password protect by Talk\" item is shown only when there\n\t\t\t\t// is a password. Unfortunately there is no fine grained\n\t\t\t\t// rendering of items in the link shares, so the whole view\n\t\t\t\t// needs to be rendered again when the password of a share\n\t\t\t\t// changes.\n\t\t\t\t// Note that this event handler is concerned only about password\n\t\t\t\t// changes; other changes in the link shares does not trigger\n\t\t\t\t// a rendering, so the view must be rendered again as needed in\n\t\t\t\t// those cases (for example, when a link share is removed).\n\t\t\t\t\n\t\t\t\tvar previousLinkShares = model.previous('linkShares');\n\t\t\t\tif (previousLinkShares.length !== linkShares.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar i;\n\t\t\t\tfor (i = 0; i < linkShares.length; i++) {\n\t\t\t\t\tif (linkShares[i].id !== previousLinkShares[i].id) {\n\t\t\t\t\t\t// A resorting should never happen, but just in case.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (linkShares[i].password !== previousLinkShares[i].password) {\n\t\t\t\t\t\tview.render();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(!_.isUndefined(options.configModel)) {\n\t\t\t\tthis.configModel = options.configModel;\n\t\t\t} else {\n\t\t\t\tthrow 'missing OC.Share.ShareConfigModel';\n\t\t\t}\n\n\t\t\tvar clipboard = new Clipboard('.clipboard-button');\n\t\t\tclipboard.on('success', function(e) {\n\t\t\t\tvar $trigger = $(e.trigger);\n\n\t\t\t\t$trigger.tooltip('hide')\n\t\t\t\t\t.attr('data-original-title', t('core', 'Copied!'))\n\t\t\t\t\t.tooltip('fixTitle')\n\t\t\t\t\t.tooltip({placement: 'bottom', trigger: 'manual'})\n\t\t\t\t\t.tooltip('show');\n\t\t\t\t_.delay(function() {\n\t\t\t\t\t$trigger.tooltip('hide')\n\t\t\t\t\t\t.attr('data-original-title', t('core', 'Copy link'))\n\t\t\t\t\t\t.tooltip('fixTitle')\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t\tclipboard.on('error', function (e) {\n\t\t\t\tvar $trigger = $(e.trigger);\n\t\t\t\tvar $menu = $trigger.next('.share-menu').find('.popovermenu');\n\t\t\t\tvar $linkTextMenu = $menu.find('li.linkTextMenu');\n\t\t\t\tvar $input = $linkTextMenu.find('.linkText');\n\n\t\t\t\tvar $li = $trigger.closest('li[data-share-id]');\n\t\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\t\t// show menu\n\t\t\t\tOC.showMenu(null, $menu);\n\n\t\t\t\tvar actionMsg = '';\n\t\t\t\tif (/iPhone|iPad/i.test(navigator.userAgent)) {\n\t\t\t\t\tactionMsg = t('core', 'Not supported!');\n\t\t\t\t} else if (/Mac/i.test(navigator.userAgent)) {\n\t\t\t\t\tactionMsg = t('core', 'Press -C to copy.');\n\t\t\t\t} else {\n\t\t\t\t\tactionMsg = t('core', 'Press Ctrl-C to copy.');\n\t\t\t\t}\n\n\t\t\t\t$linkTextMenu.removeClass('hidden');\n\t\t\t\t$input.select();\n\t\t\t\t$input.tooltip('hide')\n\t\t\t\t\t.attr('data-original-title', actionMsg)\n\t\t\t\t\t.tooltip('fixTitle')\n\t\t\t\t\t.tooltip({placement: 'bottom', trigger: 'manual'})\n\t\t\t\t\t.tooltip('show');\n\t\t\t\t_.delay(function () {\n\t\t\t\t\t$input.tooltip('hide');\n\t\t\t\t\t$input.attr('data-original-title', t('core', 'Copy'))\n\t\t\t\t\t\t  .tooltip('fixTitle');\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t},\n\n\t\tnewShare: function(event) {\n\t\t\tvar self = this;\n\t\t\tvar $target = $(event.target);\n\t\t\tvar $li = $target.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $loading = $li.find('.share-menu > .icon-loading-small');\n\n\t\t\tif(!$loading.hasClass('hidden') && this.password === '') {\n\t\t\t\t// in process\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// hide all icons and show loading\n\t\t\t$li.find('.icon').addClass('hidden');\n\t\t\t$loading.removeClass('hidden');\n\n\t\t\t// hide menu\n\t\t\tOC.hideMenus();\n\n\t\t\tvar shareData = {}\n\n\t\t\tvar isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n\t\t\tvar isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced');\n\n\t\t\t// set default expire date\n\t\t\tif (isExpirationEnforced) {\n\t\t\t\tvar defaultExpireDays = this.configModel.get('defaultExpireDate');\n\t\t\t\tvar expireDate = moment().add(defaultExpireDays, 'day').format('DD-MM-YYYY')\n\t\t\t\tshareData.expireDate = expireDate;\n\t\t\t}\n\n\t\t\t// if password is set, add to data\n\t\t\tif (isPasswordEnforced && this.password !== '') {\n\t\t\t\tshareData.password = this.password\n\t\t\t}\n\n\t\t\tvar newShareId = false;\n\n\t\t\t// We need a password before the share creation\n\t\t\tif (isPasswordEnforced && !this.showPending && this.password === '') {\n\t\t\t\tthis.showPending = shareId;\n\t\t\t\tvar self = this.render();\n\t\t\t\tself.$el.find('.pending #enforcedPassText').focus();\n\t\t\t} else {\n\t\t\t\t// else, we have a password or it is not enforced\n\t\t\t\t$.when(this.model.saveLinkShare(shareData, {\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t\t$li.find('.icon').removeClass('hidden');\n\t\t\t\t\t\tself.render();\n\t\t\t\t\t\t// open the menu by default\n\t\t\t\t\t\t// we can only do that after the render\n\t\t\t\t\t\tif (newShareId) {\n\t\t\t\t\t\t\tvar shares = self.$el.find('li[data-share-id]');\n\t\t\t\t\t\t\tvar $newShare = self.$el.find('li[data-share-id=\"'+newShareId+'\"]');\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\t// empty function to override the default Dialog warning\n\t\t\t\t\t}\n\t\t\t\t})).fail(function(response) {\n\t\t\t\t\t// password failure? Show error\n\t\t\t\t\tself.password = ''\n\t\t\t\t\tif (isPasswordEnforced && response && response.responseJSON && response.responseJSON.ocs.meta && response.responseJSON.ocs.meta.message) {\n\t\t\t\t\t\tvar $input = self.$el.find('.pending #enforcedPassText')\n\t\t\t\t\t\t$input.tooltip('destroy');\n\t\t\t\t\t\t$input.attr('title', response.responseJSON.ocs.meta.message);\n\t\t\t\t\t\t$input.tooltip({placement: 'bottom', trigger: 'manual'});\n\t\t\t\t\t\t$input.tooltip('show');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Unable to create a link share'));\n\t\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t\t$li.find('.icon').removeClass('hidden');\n\t\t\t\t\t}\n\t\t\t\t}).then(function(response) {\n\t\t\t\t\t// resolve before success\n\t\t\t\t\tnewShareId = response.ocs.data.id\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tenforcedPasswordSet: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar $form = $(event.target);\n\t\t\tvar $input = $form.find('input.enforcedPassText');\n\t\t\tthis.password = $input.val();\n\t\t\tthis.showPending = false;\n\t\t\tthis.newShare(event);\n\t\t},\n\n\t\tonLinkTextClick: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar $el = $li.find('.linkText');\n\t\t\t$el.focus();\n\t\t\t$el.select();\n\t\t},\n\n\t\tonHideDownloadChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $checkbox = $li.find('.hideDownloadCheckbox');\n\t\t\t$checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n\n\t\t\tvar hideDownload = false;\n\t\t\tif($checkbox.is(':checked')) {\n\t\t\t\thideDownload = true;\n\t\t\t}\n\n\t\t\tthis.model.saveLinkShare({\n\t\t\t\thideDownload: hideDownload,\n\t\t\t\tcid: shareId\n\t\t\t}, {\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t},\n\t\t\t\terror: function(obj, msg) {\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tonShowPasswordClick: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\t$li.find('.linkPass').slideToggle(OC.menuSpeed);\n\t\t\t$li.find('.linkPassMenu').toggleClass('hidden');\n\t\t\tif(!$li.find('.showPasswordCheckbox').is(':checked')) {\n\t\t\t\tthis.model.saveLinkShare({\n\t\t\t\t\tpassword: '',\n\t\t\t\t\tcid: shareId\n\t\t\t\t});\n\t\t\t\tthis.hasPasswordChanged = false\n\t\t\t} else {\n\t\t\t\tif (!OC.Util.isIE()) {\n\t\t\t\t\t$li.find('.linkPassText').focus();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonPasswordKeyUp: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tif (event.keyCode === 13) {\n\t\t\t\tthis.onPasswordEntered(event);\n\t\t\t} else {\n\t\t\t\tthis.hasPasswordChanged = shareId\n\t\t\t}\n\t\t},\n\n\t\tonPasswordEntered: function(event) {\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $loading = $li.find('.linkPassMenu .icon-loading-small');\n\t\t\tif (!$loading.hasClass('hidden')) {\n\t\t\t\t// still in process\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar $input = $li.find('.linkPassText');\n\t\t\t$input.removeClass('error');\n\t\t\t$input.parent().find('input').removeClass('error');\n\t\t\tvar password = $input.val();\n\n\t\t\tif ($li.find('.linkPassText').attr('placeholder') === PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL) {\n\n\t\t\t\t// in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n\t\t\t\tif(password === PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL) {\n\t\t\t\t\tpassword = '';\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n\t\t\t\tif(password === '' || password === PASSWORD_PLACEHOLDER || password === PASSWORD_PLACEHOLDER_MESSAGE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$loading\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.addClass('inlineblock');\n\t\t\t\n\t\t\tthis.hasPasswordChanged = false\n\n\t\t\tthis.model.saveLinkShare({\n\t\t\t\tpassword: password,\n\t\t\t\tcid: shareId\n\t\t\t}, {\n\t\t\t\tcomplete: function(model) {\n\t\t\t\t\t$loading.removeClass('inlineblock').addClass('hidden');\n\t\t\t\t},\n\t\t\t\terror: function(model, msg) {\n\t\t\t\t\t// force open the menu\n\t\t\t\t\tif (event) {\n\t\t\t\t\t\tself.onToggleMenu(event)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add visual feedback to both the input and the submit button\n\t\t\t\t\t$input.parent().find('input').addClass('error');\n\n\t\t\t\t\t// destroy old tooltips\n\t\t\t\t\tvar $container = $input.parent();\n\t\t\t\t\t$container.tooltip('destroy');\n\t\t\t\t\t$input.addClass('error');\n\t\t\t\t\t$container.attr('title', msg);\n\t\t\t\t\t$container.tooltip({placement: 'bottom', trigger: 'manual'});\n\t\t\t\t\t$container.tooltip('show');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tonPasswordByTalkChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $checkbox = $li.find('.passwordByTalkCheckbox');\n\t\t\t$checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n\n\t\t\tvar sendPasswordByTalk = false;\n\t\t\tif($checkbox.is(':checked')) {\n\t\t\t\tsendPasswordByTalk = true;\n\t\t\t}\n\n\t\t\tthis.model.saveLinkShare({\n\t\t\t\tsendPasswordByTalk: sendPasswordByTalk,\n\t\t\t\tcid: shareId\n\t\t\t}, {\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t},\n\t\t\t\terror: function(obj, msg) {\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tonAllowPublicEditingChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $checkbox = $li.find('.publicEditingCheckbox');\n\t\t\t$checkbox.siblings('.icon-loading-small').removeClass('hidden').addClass('inlineblock');\n\n\t\t\tvar permissions = OC.PERMISSION_READ;\n\t\t\tif($checkbox.is(':checked')) {\n\t\t\t\tpermissions = OC.PERMISSION_UPDATE | OC.PERMISSION_READ;\n\t\t\t}\n\n\t\t\tthis.model.saveLinkShare({\n\t\t\t\tpermissions: permissions,\n\t\t\t\tcid: shareId\n\t\t\t}, {\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t},\n\t\t\t\terror: function(obj, msg) {\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Unable to toggle this option'));\n\t\t\t\t\t$checkbox.siblings('.icon-loading-small').addClass('hidden').removeClass('inlineblock');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\tonPublicUploadChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar permissions = event.currentTarget.value;\n\t\t\tthis.model.saveLinkShare({\n\t\t\t\tpermissions: permissions,\n\t\t\t\tcid: shareId\n\t\t\t});\n\t\t},\n\n\t\tshowNoteForm: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar $menu = $element.closest('li');\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\n\t\t\t// show elements\n\t\t\t$menu.find('.share-note-delete').toggleClass('hidden');\n\t\t\t$form.toggleClass('hidden');\n\t\t\t$form.find('textarea').focus();\n\t\t},\n\n\t\tdeleteNote: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $menu = $element.closest('li');\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\n\t\t\t$form.find('.share-note').val('');\n\n\t\t\t$form.addClass('hidden');\n\t\t\t$menu.find('.share-note-delete').addClass('hidden');\n\n\t\t\tself.sendNote('', shareId, $menu);\n\t\t},\n\n\t\tupdateNote: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $form = $element.closest('li.share-note-form');\n\t\t\tvar $menu = $form.prev('li');\n\t\t\tvar message = $form.find('.share-note').val().trim();\n\n\t\t\tif (message.length < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.sendNote(message, shareId, $menu);\n\t\t},\n\n\t\tsendNote: function(note, shareId, $menu) {\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\t\t\tvar $submit = $form.find('input.share-note-submit');\n\t\t\tvar $error = $form.find('input.share-note-error');\n\n\t\t\t$submit.prop('disabled', true);\n\t\t\t$menu.find('.icon-loading-small').removeClass('hidden');\n\t\t\t$menu.find('.icon-edit').hide();\n\n\t\t\tvar complete = function() {\n\t\t\t\t$submit.prop('disabled', false);\n\t\t\t\t$menu.find('.icon-loading-small').addClass('hidden');\n\t\t\t\t$menu.find('.icon-edit').show();\n\t\t\t};\n\t\t\tvar error = function() {\n\t\t\t\t$error.show();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$error.hide();\n\t\t\t\t}, 3000);\n\t\t\t};\n\n\t\t\t// send data\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: OC.linkToOCS('apps/files_sharing/api/v1/shares',2) + shareId + '?' + OC.buildQueryString({format: 'json'}),\n\t\t\t\tdata: { note: note },\n\t\t\t\tcomplete : complete,\n\t\t\t\terror: error\n\t\t\t});\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.find('.has-tooltip').tooltip();\n\n\t\t\t// reset previously set passwords\n\t\t\tthis.password = '';\n\n\t\t\tvar linkShareTemplate = this.template();\n\t\t\tvar resharingAllowed = this.model.sharePermissionPossible();\n\n\t\t\tif(!resharingAllowed\n\t\t\t\t|| !this.showLink\n\t\t\t\t|| !this.configModel.isShareWithLinkAllowed())\n\t\t\t{\n\t\t\t\tvar templateData = {shareAllowed: false};\n\t\t\t\tif (!resharingAllowed) {\n\t\t\t\t\t// add message\n\t\t\t\t\ttemplateData.noSharingPlaceholder = t('core', 'Resharing is not allowed');\n\t\t\t\t}\n\t\t\t\tthis.$el.html(linkShareTemplate(templateData));\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar publicUpload =\n\t\t\t\tthis.model.isFolder()\n\t\t\t\t&& this.model.createPermissionPossible()\n\t\t\t\t&& this.configModel.isPublicUploadEnabled();\n\n\n\t\t\tvar publicEditingChecked = '';\n\t\t\tif(this.model.isPublicEditingAllowed()) {\n\t\t\t\tpublicEditingChecked = 'checked=\"checked\"';\n\t\t\t}\n\n\t\t\tvar isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n\t\t\tvar isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n\t\t\tvar passwordPlaceholderInitial = this.configModel.get('enforcePasswordForPublicLink')\n\t\t\t\t? PASSWORD_PLACEHOLDER_MESSAGE : PASSWORD_PLACEHOLDER_MESSAGE_OPTIONAL;\n\n\t\t\tvar publicEditable =\n\t\t\t\t!this.model.isFolder()\n\t\t\t\t&& this.model.updatePermissionPossible();\n\n\t\t\tvar isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced');\n\n\t\t\t// what if there is another date picker on that page?\n\t\t\tvar minDate = new Date();\n\t\t\t// min date should always be the next day\n\t\t\tminDate.setDate(minDate.getDate()+1);\n\n\t\t\t$.datepicker.setDefaults({\n\t\t\t\tminDate: minDate\n\t\t\t});\n\n\t\t\tthis.$el.find('.datepicker').datepicker({dateFormat : 'dd-mm-yy'});\n\n\t\t\tvar minPasswordLength = 4\n\t\t\t// password policy?\n\t\t\tif(OC.getCapabilities().password_policy && OC.getCapabilities().password_policy.minLength) {\n\t\t\t\tminPasswordLength = OC.getCapabilities().password_policy.minLength;\n\t\t\t}\n\n\t\t\tvar popoverBase = {\n\t\t\t\turlLabel: t('core', 'Link'),\n\t\t\t\thideDownloadLabel: t('core', 'Hide download'),\n\t\t\t\tenablePasswordLabel: isPasswordEnforced ? t('core', 'Password protection enforced') : t('core', 'Password protect'),\n\t\t\t\tpasswordLabel: t('core', 'Password'),\n\t\t\t\tpasswordPlaceholderInitial: passwordPlaceholderInitial,\n\t\t\t\tpublicUpload: publicUpload,\n\t\t\t\tpublicEditing: publicEditable,\n\t\t\t\tpublicEditingChecked: publicEditingChecked,\n\t\t\t\tpublicEditingLabel: t('core', 'Allow editing'),\n\t\t\t\tmailPrivatePlaceholder: t('core', 'Email link to person'),\n\t\t\t\tmailButtonText: t('core', 'Send'),\n\t\t\t\tpublicUploadRWLabel: t('core', 'Allow upload and editing'),\n\t\t\t\tpublicUploadRLabel: t('core', 'Read only'),\n\t\t\t\tpublicUploadWLabel: t('core', 'File drop (upload only)'),\n\t\t\t\tpublicUploadRWValue: OC.PERMISSION_UPDATE | OC.PERMISSION_CREATE | OC.PERMISSION_READ | OC.PERMISSION_DELETE,\n\t\t\t\tpublicUploadRValue: OC.PERMISSION_READ,\n\t\t\t\tpublicUploadWValue: OC.PERMISSION_CREATE,\n\t\t\t\texpireDateLabel: isExpirationEnforced ? t('core', 'Expiration date enforced') : t('core', 'Set expiration date'),\n\t\t\t\texpirationLabel: t('core', 'Expiration'),\n\t\t\t\texpirationDatePlaceholder: t('core', 'Expiration date'),\n\t\t\t\tisExpirationEnforced: isExpirationEnforced,\n\t\t\t\tisPasswordEnforced: isPasswordEnforced,\n\t\t\t\tdefaultExpireDate: moment().add(1, 'day').format('DD-MM-YYYY'), // Can't expire today\n\t\t\t\taddNoteLabel: t('core', 'Note to recipient'),\n\t\t\t\tunshareLabel: t('core', 'Unshare'),\n\t\t\t\tunshareLinkLabel: t('core', 'Delete share link'),\n\t\t\t\tnewShareLabel: t('core', 'Add another link'),\n\t\t\t};\n\n\t\t\tvar pendingPopover = {\n\t\t\t\tisPasswordEnforced: isPasswordEnforced,\n\t\t\t\tenforcedPasswordLabel: t('core', 'Password protection for links is mandatory'),\n\t\t\t\tpasswordPlaceholder: passwordPlaceholderInitial,\n\t\t\t\tminPasswordLength: minPasswordLength,\n\t\t\t};\n\t\t\tvar pendingPopoverMenu = this.pendingPopoverMenuTemplate(_.extend({}, pendingPopover))\n\n\t\t\tvar linkShares = this.getShareeList();\n\t\t\tif(_.isArray(linkShares)) {\n\t\t\t\tfor (var i = 0; i < linkShares.length; i++) {\n\t\t\t\t\tvar social = [];\n\t\t\t\t\tOC.Share.Social.Collection.each(function (model) {\n\t\t\t\t\t\tvar url = model.get('url');\n\t\t\t\t\t\turl = url.replace('{{reference}}', linkShares[i].shareLinkURL);\n\t\t\t\t\t\tsocial.push({\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tlabel: t('core', 'Share to {name}', {name: model.get('name')}),\n\t\t\t\t\t\t\tname: model.get('name'),\n\t\t\t\t\t\t\ticonClass: model.get('iconClass'),\n\t\t\t\t\t\t\tnewWindow: model.get('newWindow')\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tvar popover = this.getPopoverObject(linkShares[i])\n\t\t\t\t\tlinkShares[i].popoverMenu = this.popoverMenuTemplate(_.extend({}, popoverBase, popover, {social: social}));\n\t\t\t\t\tlinkShares[i].pendingPopoverMenu = pendingPopoverMenu\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$el.on('beforeHide', function(e) {\n\t\t\t\tthis.onMenuhide(e)\n\t\t\t}.bind(this));\n\n\t\t\tthis.$el.html(linkShareTemplate({\n\t\t\t\tlinkShares: linkShares,\n\t\t\t\tshareAllowed: true,\n\t\t\t\tnolinkShares: linkShares.length === 0,\n\t\t\t\tnewShareLabel: t('core', 'Share link'),\n\t\t\t\tnewShareTitle: t('core', 'New share link'),\n\t\t\t\tpendingPopoverMenu: pendingPopoverMenu,\n\t\t\t\tshowPending: this.showPending === this.newShareId,\n\t\t\t\tnewShareId: this.newShareId,\n\t\t\t}));\n\n\t\t\tthis.delegateEvents();\n\n\t\t\t// new note autosize\n\t\t\tautosize(this.$el.find('.share-note-form .share-note'));\n\n\t\t\treturn this;\n\t\t},\n\n\t\tonToggleMenu: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar $menu = $li.find('.sharingOptionsGroup .popovermenu');\n\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\tOC.showMenu(null, $menu);\n\n\t\t\t// focus the password if not set and enforced\n\t\t\tvar isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n\t\t\tvar haspassword = $menu.find('.linkPassText').val() !== '';\n\n\t\t\tif (!haspassword && isPasswordEnabledByDefault) {\n\t\t\t\t$menu.find('.linkPassText').focus();\n\t\t\t}\n\t\t},\n\n\t\tonMenuhide: function(event) {\n\t\t\tif (this.hasPasswordChanged) {\n\t\t\t\tvar shareId = this.hasPasswordChanged\n\t\t\t\tvar target = this.$el.find('li[data-share-id=' + shareId + '] #linkPassText-' + shareId);\n\t\t\t\tconsole.debug('Force saving password for share number ', shareId)\n\t\t\t\t// replace target by last opened menu\n\t\t\t\tthis.onPasswordEntered(_.extend(event, { target: target }))\n\t\t\t}\n\t\t\t// force close all opened tooltips\n\t\t\tthis.$el.find('[data-original-title]').tooltip('hide')\n\t\t},\n\n\t\t/**\n\t\t * @returns {Function} from Handlebars\n\t\t * @private\n\t\t */\n\t\ttemplate: function () {\n\t\t\treturn OC.Share.Templates['sharedialoglinkshareview'];\n\t\t},\n\n\t\t/**\n\t\t * renders the popover template and returns the resulting HTML\n\t\t *\n\t\t * @param {Object} data\n\t\t * @returns {string}\n\t\t */\n\t\tpopoverMenuTemplate: function(data) {\n\t\t\treturn OC.Share.Templates['sharedialoglinkshareview_popover_menu'](data);\n\t\t},\n\n\t\t/**\n\t\t * renders the pending popover template and returns the resulting HTML\n\t\t *\n\t\t * @param {Object} data\n\t\t * @returns {string}\n\t\t */\n\t\tpendingPopoverMenuTemplate: function(data) {\n\t\t\treturn OC.Share.Templates['sharedialoglinkshareview_popover_menu_pending'](data);\n\t\t},\n\n\t\tonPopUpClick: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar url = $(event.currentTarget).data('url');\n\t\t\tvar newWindow = $(event.currentTarget).data('window');\n\t\t\t$(event.currentTarget).tooltip('hide');\n\t\t\tif (url) {\n\t\t\t\tif (newWindow === true) {\n\t\t\t\t\tvar width = 600;\n\t\t\t\t\tvar height = 400;\n\t\t\t\t\tvar left = (screen.width / 2) - (width / 2);\n\t\t\t\t\tvar top = (screen.height / 2) - (height / 2);\n\n\t\t\t\t\twindow.open(url, 'name', 'width=' + width + ', height=' + height + ', top=' + top + ', left=' + left);\n\t\t\t\t} else {\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonExpireDateChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar expirationDatePicker = '#expirationDateContainer-' + shareId;\n\t\t\tvar datePicker = $(expirationDatePicker);\n\t\t\tvar state = $element.prop('checked');\n\t\t\tdatePicker.toggleClass('hidden', !state);\n\n\t\t\tif (!state) {\n\t\t\t\t// disabled, let's hide the input and\n\t\t\t\t// set the expireDate to nothing\n\t\t\t\t$element.closest('li').next('li').addClass('hidden');\n\t\t\t\tthis.setExpirationDate('', shareId);\n\t\t\t} else {\n\t\t\t\t// enabled, show the input and the datepicker\n\t\t\t\t$element.closest('li').next('li').removeClass('hidden');\n\t\t\t\tthis.showDatePicker(event);\n\n\t\t\t}\n\t\t},\n\n\t\tshowDatePicker: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar maxDate = $element.data('max-date');\n\t\t\tvar expirationDatePicker = '#expirationDatePicker-' + shareId;\n\t\t\tvar self = this;\n\n\t\t\t$(expirationDatePicker).datepicker({\n\t\t\t\tdateFormat : 'dd-mm-yy',\n\t\t\t\tonSelect: function (expireDate) {\n\t\t\t\t\tself.setExpirationDate(expireDate, shareId);\n\t\t\t\t},\n\t\t\t\tmaxDate: maxDate\n\t\t\t});\n\t\t\t$(expirationDatePicker).datepicker('show');\n\t\t\t$(expirationDatePicker).focus();\n\n\t\t},\n\n\t\tsetExpirationDate: function(expireDate, shareId) {\n\t\t\tthis.model.saveLinkShare({expireDate: expireDate, cid: shareId});\n\t\t},\n\n\t\tonChangeExpirationDate: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar expireDate = $element.val();\n\t\t\tvar li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar expirationDatePicker = '#expirationDatePicker-' + shareId;\n\n\t\t\tthis.setExpirationDate(expireDate, shareId);\n\t\t\t$(expirationDatePicker).datepicker('hide');\n\t\t},\n\n\t\t/**\n\t\t * get an array of sharees' share properties\n\t\t *\n\t\t * @returns {Array}\n\t\t */\n\t\tgetShareeList: function() {\n\t\t\tvar shares = this.model.get('linkShares');\n\n\t\t\tif(!this.model.hasLinkShares()) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar list = [];\n\t\t\tfor(var index = 0; index < shares.length; index++) {\n\t\t\t\tvar share = this.getShareeObject(index);\n\t\t\t\t// first empty {} is necessary, otherwise we get in trouble\n\t\t\t\t// with references\n\t\t\t\tlist.push(_.extend({}, share));\n\t\t\t}\n\n\t\t\treturn list;\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {OC.Share.Types.ShareInfo} shareInfo\n\t\t * @returns {object}\n\t\t */\n\t\tgetShareeObject: function(shareIndex) {\n\t\t\tvar share = this.model.get('linkShares')[shareIndex];\n\n\t\t\treturn _.extend({}, share, {\n\t\t\t\tcid: share.id,\n\t\t\t\tshareAllowed: true,\n\t\t\t\tlinkShareLabel: share.label ? share.label : t('core', 'Share link'),\n\t\t\t\tpopoverMenu: {},\n\t\t\t\tshareLinkURL: share.url,\n\t\t\t\tnewShareTitle: t('core', 'New share link'),\n\t\t\t\tcopyLabel: t('core', 'Copy link'),\n\t\t\t\tshowPending: this.showPending === share.id,\n\t\t\t\tlinkShareCreationDate: t('core', 'Created on {time}', { time: moment(share.stime * 1000).format('LLLL') })\n\t\t\t})\n\t\t},\n\n\t\tgetPopoverObject: function(share) {\n\t\t\tvar publicUploadRWChecked = '';\n\t\t\tvar publicUploadRChecked = '';\n\t\t\tvar publicUploadWChecked = '';\n\n\t\t\tswitch (this.model.linkSharePermissions(share.id)) {\n\t\t\t\tcase OC.PERMISSION_READ:\n\t\t\t\t\tpublicUploadRChecked = 'checked';\n\t\t\t\t\tbreak;\n\t\t\t\tcase OC.PERMISSION_CREATE:\n\t\t\t\t\tpublicUploadWChecked = 'checked';\n\t\t\t\t\tbreak;\n\t\t\t\tcase OC.PERMISSION_UPDATE | OC.PERMISSION_CREATE | OC.PERMISSION_READ | OC.PERMISSION_DELETE:\n\t\t\t\t\tpublicUploadRWChecked = 'checked';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar isPasswordSet = !!share.password;\n\t\t\tvar isPasswordEnabledByDefault = this.configModel.get('enableLinkPasswordByDefault') === true;\n\t\t\tvar isPasswordEnforced = this.configModel.get('enforcePasswordForPublicLink');\n\t\t\tvar isExpirationEnforced = this.configModel.get('isDefaultExpireDateEnforced');\n\t\t\tvar defaultExpireDays = this.configModel.get('defaultExpireDate');\n\t\t\tvar hasExpireDate = !!share.expiration || isExpirationEnforced;\n\n\t\t\tvar expireDate;\n\t\t\tif (hasExpireDate) {\n\t\t\t\texpireDate = moment(share.expiration, 'YYYY-MM-DD').format('DD-MM-YYYY');\n\t\t\t}\n\n\t\t\tvar isTalkEnabled = OC.appswebroots['spreed'] !== undefined;\n\t\t\tvar sendPasswordByTalk = share.sendPasswordByTalk;\n\n\t\t\tvar hideDownload = share.hideDownload;\n\n\t\t\tvar maxDate = null;\n\n\t\t\tif(hasExpireDate) {\n\t\t\t\tif(isExpirationEnforced) {\n\t\t\t\t\t// TODO: hack: backend returns string instead of integer\n\t\t\t\t\tvar shareTime = share.stime;\n\t\t\t\t\tif (_.isNumber(shareTime)) {\n\t\t\t\t\t\tshareTime = new Date(shareTime * 1000);\n\t\t\t\t\t}\n\t\t\t\t\tif (!shareTime) {\n\t\t\t\t\t\tshareTime = new Date(); // now\n\t\t\t\t\t}\n\t\t\t\t\tshareTime = OC.Util.stripTime(shareTime).getTime();\n\t\t\t\t\tmaxDate = new Date(shareTime + defaultExpireDays * 24 * 3600 * 1000);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcid: share.id,\n\t\t\t\tshareLinkURL: share.url,\n\t\t\t\tpasswordPlaceholder: isPasswordSet ? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE,\n\t\t\t\tisPasswordSet: isPasswordSet || isPasswordEnabledByDefault || isPasswordEnforced,\n\t\t\t\tshowPasswordByTalkCheckBox: isTalkEnabled && isPasswordSet,\n\t\t\t\tpasswordByTalkLabel: t('core', 'Password protect by Talk'),\n\t\t\t\tisPasswordByTalkSet: sendPasswordByTalk,\n\t\t\t\tpublicUploadRWChecked: publicUploadRWChecked,\n\t\t\t\tpublicUploadRChecked: publicUploadRChecked,\n\t\t\t\tpublicUploadWChecked: publicUploadWChecked,\n\t\t\t\thasExpireDate: hasExpireDate,\n\t\t\t\texpireDate: expireDate,\n\t\t\t\tshareNote: share.note,\n\t\t\t\thasNote: share.note !== '',\n\t\t\t\tmaxDate: maxDate,\n\t\t\t\thideDownload: hideDownload,\n\t\t\t\tisExpirationEnforced: isExpirationEnforced,\n\t\t\t}\n\t\t},\n\n\t\tonUnshare: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tif (!$element.is('a')) {\n\t\t\t\t$element = $element.closest('a');\n\t\t\t}\n\n\t\t\tvar $loading = $element.find('.icon-loading-small').eq(0);\n\t\t\tif(!$loading.hasClass('hidden')) {\n\t\t\t\t// in process\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t$loading.removeClass('hidden');\n\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\n\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\tself.model.removeShare(shareId, {\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$li.remove();\n\t\t\t\t\tself.render()\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Could not unshare'));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t},\n\n\n\t});\n\n\tOC.Share.ShareDialogLinkShareView = ShareDialogLinkShareView;\n\n})();\n","/* global OC, Handlebars */\n\n/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n\n(function() {\n\n\tvar PASSWORD_PLACEHOLDER = '**********';\n\tvar PASSWORD_PLACEHOLDER_MESSAGE = t('core', 'Choose a password for the mail share');\n\n\tif (!OC.Share) {\n\t\tOC.Share = {};\n\t}\n\n\t/**\n\t * @class OCA.Share.ShareDialogShareeListView\n\t * @member {OC.Share.ShareItemModel} model\n\t * @member {jQuery} $el\n\t * @memberof OCA.Sharing\n\t * @classdesc\n\t *\n\t * Represents the sharee list part in the GUI of the share dialogue\n\t *\n\t */\n\tvar ShareDialogShareeListView = OC.Backbone.View.extend({\n\t\t/** @type {string} **/\n\t\tid: 'shareDialogLinkShare',\n\n\t\t/** @type {OC.Share.ShareConfigModel} **/\n\t\tconfigModel: undefined,\n\n\t\t_menuOpen: false,\n\n\t\t/** @type {boolean|number} **/\n\t\t_renderPermissionChange: false,\n\n\t\tevents: {\n\t\t\t'click .unshare': 'onUnshare',\n\t\t\t'click .share-add': 'showNoteForm',\n\t\t\t'click .share-note-delete': 'deleteNote',\n\t\t\t'click .share-note-submit': 'updateNote',\n\t\t\t'click .share-menu .icon-more': 'onToggleMenu',\n\t\t\t'click .permissions': 'onPermissionChange',\n\t\t\t'click .expireDate' : 'onExpireDateChange',\n\t\t\t'click .password' : 'onMailSharePasswordProtectChange',\n\t\t\t'click .passwordByTalk' : 'onMailSharePasswordProtectByTalkChange',\n\t\t\t'click .secureDrop' : 'onSecureDropChange',\n\t\t\t'keyup input.passwordField': 'onMailSharePasswordKeyUp',\n\t\t\t'focusout input.passwordField': 'onMailSharePasswordEntered',\n\t\t\t'change .datepicker': 'onChangeExpirationDate',\n\t\t\t'click .datepicker' : 'showDatePicker'\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tif(!_.isUndefined(options.configModel)) {\n\t\t\t\tthis.configModel = options.configModel;\n\t\t\t} else {\n\t\t\t\tthrow 'missing OC.Share.ShareConfigModel';\n\t\t\t}\n\n\t\t\tvar view = this;\n\t\t\tthis.model.on('change:shares', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {OC.Share.Types.ShareInfo} shareInfo\n\t\t * @returns {object}\n\t\t */\n\t\tgetShareeObject: function(shareIndex) {\n\t\t\tvar shareWith = this.model.getShareWith(shareIndex);\n\t\t\tvar shareWithDisplayName = this.model.getShareWithDisplayName(shareIndex);\n\t\t\tvar shareWithAvatar = this.model.getShareWithAvatar(shareIndex);\n\t\t\tvar shareWithTitle = '';\n\t\t\tvar shareType = this.model.getShareType(shareIndex);\n\t\t\tvar sharedBy = this.model.getSharedBy(shareIndex);\n\t\t\tvar sharedByDisplayName = this.model.getSharedByDisplayName(shareIndex);\n\t\t\tvar fileOwnerUid = this.model.getFileOwnerUid(shareIndex);\n\n\t\t\tvar hasPermissionOverride = {};\n\t\t\tif (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\tshareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'group') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_REMOTE) {\n\t\t\t\tshareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'remote') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\tshareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'remote group') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_EMAIL) {\n\t\t\t\tshareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'email') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_ROOM) {\n\t\t\t\tshareWithDisplayName = shareWithDisplayName + \" (\" + t('core', 'conversation') + ')';\n\t\t\t}\n\n\t\t\tif (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\tshareWithTitle = shareWith + \" (\" + t('core', 'group') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_REMOTE) {\n\t\t\t\tshareWithTitle = shareWith + \" (\" + t('core', 'remote') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\tshareWithTitle = shareWith + \" (\" + t('core', 'remote group') + ')';\n\t\t\t}\n\t\t\telse if (shareType === OC.Share.SHARE_TYPE_EMAIL) {\n\t\t\t\tshareWithTitle = shareWith + \" (\" + t('core', 'email') + ')';\n\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\tshareWithTitle = shareWith;\n\t\t\t\t// Force \"shareWith\" in the template to a safe value, as the\n\t\t\t\t// original \"shareWith\" returned by the model may contain\n\t\t\t\t// problematic characters like \"'\".\n\t\t\t\tshareWith = 'circle-' + shareIndex;\n\t\t\t}\n\n\t\t\tif (sharedBy !== OC.getCurrentUser().uid) {\n\t\t\t\tvar empty = shareWithTitle === '';\n\t\t\t\tif (!empty) {\n\t\t\t\t\tshareWithTitle += ' (';\n\t\t\t\t}\n\t\t\t\tshareWithTitle += t('core', 'shared by {sharer}', {sharer: sharedByDisplayName});\n\t\t\t\tif (!empty) {\n\t\t\t\t\tshareWithTitle += ')';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar share = this.model.get('shares')[shareIndex];\n\t\t\tvar password = share.password;\n\t\t\tvar hasPassword = password !== null && password !== '';\n\t\t\tvar sendPasswordByTalk = share.send_password_by_talk;\n\n\t\t\tvar shareNote = this.model.getNote(shareIndex);\n\n\t\t\treturn _.extend(hasPermissionOverride, {\n\t\t\t\tcid: this.cid,\n\t\t\t\thasSharePermission: this.model.hasSharePermission(shareIndex),\n\t\t\t\teditPermissionState: this.model.editPermissionState(shareIndex),\n\t\t\t\thasCreatePermission: this.model.hasCreatePermission(shareIndex),\n\t\t\t\thasUpdatePermission: this.model.hasUpdatePermission(shareIndex),\n\t\t\t\thasDeletePermission: this.model.hasDeletePermission(shareIndex),\n\t\t\t\tsharedBy: sharedBy,\n\t\t\t\tsharedByDisplayName: sharedByDisplayName,\n\t\t\t\tshareWith: shareWith,\n\t\t\t\tshareWithDisplayName: shareWithDisplayName,\n\t\t\t\tshareWithAvatar: shareWithAvatar,\n\t\t\t\tshareWithTitle: shareWithTitle,\n\t\t\t\tshareType: shareType,\n\t\t\t\tshareId: this.model.get('shares')[shareIndex].id,\n\t\t\t\tmodSeed: shareWithAvatar || (shareType !== OC.Share.SHARE_TYPE_USER && shareType !== OC.Share.SHARE_TYPE_CIRCLE && shareType !== OC.Share.SHARE_TYPE_ROOM),\n\t\t\t\towner: fileOwnerUid,\n\t\t\t\tisShareWithCurrentUser: (shareType === OC.Share.SHARE_TYPE_USER && shareWith === OC.getCurrentUser().uid),\n\t\t\t\tcanUpdateShareSettings: (sharedBy === OC.getCurrentUser().uid || fileOwnerUid === OC.getCurrentUser().uid),\n\t\t\t\tisRemoteShare: shareType === OC.Share.SHARE_TYPE_REMOTE,\n\t\t\t\tisRemoteGroupShare: shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP,\n\t\t\t\tisNoteAvailable: shareType !== OC.Share.SHARE_TYPE_REMOTE && shareType !== OC.Share.SHARE_TYPE_REMOTE_GROUP,\n\t\t\t\tisMailShare: shareType === OC.Share.SHARE_TYPE_EMAIL,\n\t\t\t\tisCircleShare: shareType === OC.Share.SHARE_TYPE_CIRCLE,\n\t\t\t\tisFileSharedByMail: shareType === OC.Share.SHARE_TYPE_EMAIL && !this.model.isFolder(),\n\t\t\t\tisPasswordSet: hasPassword && !sendPasswordByTalk,\n\t\t\t\tisPasswordByTalkSet: hasPassword && sendPasswordByTalk,\n\t\t\t\tisTalkEnabled: OC.appswebroots['spreed'] !== undefined,\n\t\t\t\tsecureDropMode: !this.model.hasReadPermission(shareIndex),\n\t\t\t\thasExpireDate: this.model.getExpireDate(shareIndex) !== null,\n\t\t\t\tshareNote: shareNote,\n\t\t\t\thasNote: shareNote !== '',\n\t\t\t\texpireDate: moment(this.model.getExpireDate(shareIndex), 'YYYY-MM-DD').format('DD-MM-YYYY'),\n\t\t\t\t// The password placeholder does not take into account if\n\t\t\t\t// sending the password by Talk is enabled or not; when\n\t\t\t\t// switching from sending the password by Talk to sending the\n\t\t\t\t// password by email the password is reused and the share\n\t\t\t\t// updated, so the placeholder already shows the password in the\n\t\t\t\t// brief time between disabling sending the password by email\n\t\t\t\t// and receiving the updated share.\n\t\t\t\tpasswordPlaceholder: hasPassword ? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE,\n\t\t\t\tpasswordByTalkPlaceholder: (hasPassword && sendPasswordByTalk)? PASSWORD_PLACEHOLDER : PASSWORD_PLACEHOLDER_MESSAGE,\n\t\t\t});\n\t\t},\n\n\t\tgetShareProperties: function() {\n\t\t\treturn {\n\t\t\t\tunshareLabel: t('core', 'Unshare'),\n\t\t\t\taddNoteLabel: t('core', 'Note to recipient'),\n\t\t\t\tcanShareLabel: t('core', 'Can reshare'),\n\t\t\t\tcanEditLabel: t('core', 'Can edit'),\n\t\t\t\tcreatePermissionLabel: t('core', 'Can create'),\n\t\t\t\tupdatePermissionLabel: t('core', 'Can change'),\n\t\t\t\tdeletePermissionLabel: t('core', 'Can delete'),\n\t\t\t\tsecureDropLabel: t('core', 'File drop (upload only)'),\n\t\t\t\texpireDateLabel: t('core', 'Set expiration date'),\n\t\t\t\tpasswordLabel: t('core', 'Password protect'),\n\t\t\t\tpasswordByTalkLabel: t('core', 'Password protect by Talk'),\n\t\t\t\tcrudsLabel: t('core', 'Access control'),\n\t\t\t\texpirationDatePlaceholder: t('core', 'Expiration date'),\n\t\t\t\tdefaultExpireDate: moment().add(1, 'day').format('DD-MM-YYYY'), // Can't expire today\n\t\t\t\ttriangleSImage: OC.imagePath('core', 'actions/triangle-s'),\n\t\t\t\tisResharingAllowed: this.configModel.get('isResharingAllowed'),\n\t\t\t\tisPasswordForMailSharesRequired: this.configModel.get('isPasswordForMailSharesRequired'),\n\t\t\t\tsharePermissionPossible: this.model.sharePermissionPossible(),\n\t\t\t\teditPermissionPossible: this.model.editPermissionPossible(),\n\t\t\t\tcreatePermissionPossible: this.model.createPermissionPossible(),\n\t\t\t\tupdatePermissionPossible: this.model.updatePermissionPossible(),\n\t\t\t\tdeletePermissionPossible: this.model.deletePermissionPossible(),\n\t\t\t\tsharePermission: OC.PERMISSION_SHARE,\n\t\t\t\tcreatePermission: OC.PERMISSION_CREATE,\n\t\t\t\tupdatePermission: OC.PERMISSION_UPDATE,\n\t\t\t\tdeletePermission: OC.PERMISSION_DELETE,\n\t\t\t\treadPermission: OC.PERMISSION_READ,\n\t\t\t\tisFolder: this.model.isFolder()\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * get an array of sharees' share properties\n\t\t *\n\t\t * @returns {Array}\n\t\t */\n\t\tgetShareeList: function() {\n\t\t\tvar universal = this.getShareProperties();\n\n\t\t\tif(!this.model.hasUserShares()) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar shares = this.model.get('shares');\n\t\t\tvar list = [];\n\t\t\tfor(var index = 0; index < shares.length; index++) {\n\t\t\t\tvar share = this.getShareeObject(index);\n\n\t\t\t\tif (share.shareType === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// first empty {} is necessary, otherwise we get in trouble\n\t\t\t\t// with references\n\t\t\t\tlist.push(_.extend({}, universal, share));\n\t\t\t}\n\n\t\t\treturn list;\n\t\t},\n\n\t\tgetLinkReshares: function() {\n\t\t\tvar universal = {\n\t\t\t\tunshareLabel: t('core', 'Unshare'),\n\t\t\t};\n\n\t\t\tif(!this.model.hasUserShares()) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar shares = this.model.get('shares');\n\t\t\tvar list = [];\n\t\t\tfor(var index = 0; index < shares.length; index++) {\n\t\t\t\tvar share = this.getShareeObject(index);\n\n\t\t\t\tif (share.shareType !== OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// first empty {} is necessary, otherwise we get in trouble\n\t\t\t\t// with references\n\t\t\t\tlist.push(_.extend({}, universal, share, {\n\t\t\t\t\tshareInitiator: shares[index].uid_owner,\n\t\t\t\t\tshareInitiatorText: t('core', '{shareInitiatorDisplayName} shared via link', {shareInitiatorDisplayName: shares[index].displayname_owner})\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn list;\n\t\t},\n\n\t\trender: function() {\n\t\t\tif(!this._renderPermissionChange) {\n\t\t\t\tthis.$el.html(this.template({\n\t\t\t\t\tcid: this.cid,\n\t\t\t\t\tsharees: this.getShareeList(),\n\t\t\t\t\tlinkReshares: this.getLinkReshares()\n\t\t\t\t}));\n\n\t\t\t\tthis.$('.avatar').each(function () {\n\t\t\t\t\tvar $this = $(this);\n\n\t\t\t\t\tif ($this.hasClass('imageplaceholderseed')) {\n\t\t\t\t\t\t$this.css({width: 32, height: 32});\n\t\t\t\t\t\tif ($this.data('avatar')) {\n\t\t\t\t\t\t\t$this.css('border-radius', '0%');\n\t\t\t\t\t\t\t$this.css('background', 'url(' + $this.data('avatar') + ') no-repeat');\n\t\t\t\t\t\t\t$this.css('background-size', '31px');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.imageplaceholder($this.data('seed'));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//                         user,   size,  ie8fix, hidedefault,  callback, displayname\n\t\t\t\t\t\t$this.avatar($this.data('username'), 32, undefined, undefined, undefined, $this.data('displayname'));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.$('.has-tooltip').tooltip({\n\t\t\t\t\tplacement: 'bottom'\n\t\t\t\t});\n\n\t\t\t\tthis.$('ul.shareWithList > li').each(function() {\n\t\t\t\t\tvar $this = $(this);\n\n\t\t\t\t\tvar shareWith = $this.data('share-with');\n\t\t\t\t\tvar shareType = $this.data('share-type');\n\n\t\t\t\t\t$this.find('div.avatar, span.username').contactsMenu(shareWith, shareType, $this);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar permissionChangeShareId = parseInt(this._renderPermissionChange, 10);\n\t\t\t\tvar shareWithIndex = this.model.findShareWithIndex(permissionChangeShareId);\n\t\t\t\tvar sharee = this.getShareeObject(shareWithIndex);\n\t\t\t\t$.extend(sharee, this.getShareProperties());\n\t\t\t\tvar $li = this.$('li[data-share-id=' + permissionChangeShareId + ']');\n\t\t\t\t$li.find('.sharingOptionsGroup .popovermenu').replaceWith(this.popoverMenuTemplate(sharee));\n\t\t\t}\n\n\t\t\tvar _this = this;\n\t\t\tthis.getShareeList().forEach(function(sharee) {\n\t\t\t\tvar $edit = _this.$('#canEdit-' + _this.cid + '-' + sharee.shareId);\n\t\t\t\tif($edit.length === 1) {\n\t\t\t\t\t$edit.prop('checked', sharee.editPermissionState === 'checked');\n\t\t\t\t\tif (sharee.isFolder) {\n\t\t\t\t\t\t$edit.prop('indeterminate', sharee.editPermissionState === 'indeterminate');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.$('.popovermenu').on('afterHide', function() {\n\t\t\t\t_this._menuOpen = false;\n\t\t\t});\n\t\t\tthis.$('.popovermenu').on('beforeHide', function() {\n\t\t\t\tvar shareId = parseInt(_this._menuOpen, 10);\n\t\t\t\tif(!_.isNaN(shareId)) {\n\t\t\t\t\tvar datePickerClass = '.expirationDateContainer-' + _this.cid + '-' + shareId;\n\t\t\t\t\tvar datePickerInput = '#expirationDatePicker-' + _this.cid + '-' + shareId;\n\t\t\t\t\tvar expireDateCheckbox = '#expireDate-' + _this.cid + '-' + shareId;\n\t\t\t\t\tif ($(expireDateCheckbox).prop('checked')) {\n\t\t\t\t\t\t$(datePickerInput).removeClass('hidden-visually');\n\t\t\t\t\t\t$(datePickerClass).removeClass('hasDatepicker');\n\t\t\t\t\t\t$(datePickerClass + ' .ui-datepicker').hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (this._menuOpen !== false) {\n\t\t\t\t// Open menu again if it was opened before\n\t\t\t\tvar shareId = parseInt(this._menuOpen, 10);\n\t\t\t\tif(!_.isNaN(shareId)) {\n\t\t\t\t\tvar liSelector = 'li[data-share-id=' + shareId + ']';\n\t\t\t\t\tOC.showMenu(null, this.$(liSelector + ' .sharingOptionsGroup .popovermenu'));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._renderPermissionChange = false;\n\n\t\t\t// new note autosize\n\t\t\tautosize(this.$el.find('.share-note-form .share-note'));\n\n\t\t\tthis.delegateEvents();\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * @returns {Function} from Handlebars\n\t\t * @private\n\t\t */\n\t\ttemplate: function (data) {\n\t\t\tvar sharees = data.sharees;\n\t\t\tif(_.isArray(sharees)) {\n\t\t\t\tfor (var i = 0; i < sharees.length; i++) {\n\t\t\t\t\tdata.sharees[i].popoverMenu = this.popoverMenuTemplate(sharees[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn OC.Share.Templates['sharedialogshareelistview'](data);\n\t\t},\n\n\t\t/**\n\t\t * renders the popover template and returns the resulting HTML\n\t\t *\n\t\t * @param {Object} data\n\t\t * @returns {string}\n\t\t */\n\t\tpopoverMenuTemplate: function(data) {\n\t\t\treturn OC.Share.Templates['sharedialogshareelistview_popover_menu'](data);\n\t\t},\n\n\t\tshowNoteForm: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $menu = $element.closest('li');\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\n\t\t\t// show elements\n\t\t\t$menu.find('.share-note-delete').toggleClass('hidden');\n\t\t\t$form.toggleClass('hidden');\n\t\t\t$form.find('textarea').focus();\n\t\t},\n\n\t\tdeleteNote: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $menu = $element.closest('li');\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\n\t\t\tconsole.log($form.find('.share-note'));\n\t\t\t$form.find('.share-note').val('');\n\t\t\t\n\t\t\t$form.addClass('hidden');\n\t\t\t$menu.find('.share-note-delete').addClass('hidden');\n\n\t\t\tself.sendNote('', shareId, $menu);\n\t\t},\n\n\t\tupdateNote: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\t\t\tvar $form = $element.closest('li.share-note-form');\n\t\t\tvar $menu = $form.prev('li');\n\t\t\tvar message = $form.find('.share-note').val().trim();\n\n\t\t\tif (message.length < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.sendNote(message, shareId, $menu);\n\n\t\t},\n\n\t\tsendNote: function(note, shareId, $menu) {\n\t\t\tvar $form = $menu.next('li.share-note-form');\n\t\t\tvar $submit = $form.find('input.share-note-submit');\n\t\t\tvar $error = $form.find('input.share-note-error');\n\n\t\t\t$submit.prop('disabled', true);\n\t\t\t$menu.find('.icon-loading-small').removeClass('hidden');\n\t\t\t$menu.find('.icon-edit').hide();\n\n\t\t\tvar complete = function() {\n\t\t\t\t$submit.prop('disabled', false);\n\t\t\t\t$menu.find('.icon-loading-small').addClass('hidden');\n\t\t\t\t$menu.find('.icon-edit').show();\n\t\t\t};\n\t\t\tvar error = function() {\n\t\t\t\t$error.show();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$error.hide();\n\t\t\t\t}, 3000);\n\t\t\t};\n\n\t\t\t// send data\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: OC.linkToOCS('apps/files_sharing/api/v1/shares',2) + shareId + '?' + OC.buildQueryString({format: 'json'}),\n\t\t\t\tdata: { note: note },\n\t\t\t\tcomplete : complete,\n\t\t\t\terror: error\n\t\t\t});\n\t\t},\n\n\t\tonUnshare: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar self = this;\n\t\t\tvar $element = $(event.target);\n\t\t\tif (!$element.is('a')) {\n\t\t\t\t$element = $element.closest('a');\n\t\t\t}\n\n\t\t\tvar $loading = $element.find('.icon-loading-small').eq(0);\n\t\t\tif(!$loading.hasClass('hidden')) {\n\t\t\t\t// in process\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t$loading.removeClass('hidden');\n\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\n\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\tself.model.removeShare(shareId)\n\t\t\t\t.done(function() {\n\t\t\t\t\t$li.remove();\n\t\t\t\t})\n\t\t\t\t.fail(function() {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'Could not unshare'));\n\t\t\t\t});\n\t\t\treturn false;\n\t\t},\n\n\t\tonToggleMenu: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar $menu = $li.find('.sharingOptionsGroup .popovermenu');\n\n\t\t\tOC.showMenu(null, $menu);\n\t\t\tthis._menuOpen = $li.data('share-id');\n\t\t},\n\n\t\tonExpireDateChange: function(event) {\n\t\t\tvar $element = $(event.target);\n\t\t\tvar li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar datePickerClass = '.expirationDateContainer-' + this.cid + '-' + shareId;\n\t\t\tvar datePicker = $(datePickerClass);\n\t\t\tvar state = $element.prop('checked');\n\t\t\tdatePicker.toggleClass('hidden', !state);\n\t\t\tif (!state) {\n\t\t\t\t// disabled, let's hide the input and\n\t\t\t\t// set the expireDate to nothing\n\t\t\t\t$element.closest('li').next('li').addClass('hidden');\n\t\t\t\tthis.setExpirationDate(shareId, '');\n\t\t\t} else {\n\t\t\t\t// enabled, show the input and the datepicker\n\t\t\t\t$element.closest('li').next('li').removeClass('hidden');\n\t\t\t\tthis.showDatePicker(event);\n\n\t\t\t}\n\t\t},\n\n\t\tshowDatePicker: function(event) {\n\t\t\tvar element = $(event.target);\n\t\t\tvar li = element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar expirationDatePicker = '#expirationDatePicker-' + this.cid + '-' + shareId;\n\t\t\tvar view = this;\n\t\t\t$(expirationDatePicker).datepicker({\n\t\t\t\tdateFormat : 'dd-mm-yy',\n\t\t\t\tonSelect: function (expireDate) {\n\t\t\t\t\tview.setExpirationDate(shareId, expireDate);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(expirationDatePicker).focus();\n\n\t\t},\n\n\t\tsetExpirationDate: function(shareId, expireDate) {\n\t\t\tthis.model.updateShare(shareId, {expireDate: expireDate}, {});\n\t\t},\n\n\t\tonMailSharePasswordProtectChange: function(event) {\n\t\t\tvar element = $(event.target);\n\t\t\tvar li = element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n\t\t\tvar passwordContainer = $(passwordContainerClass);\n\t\t\tvar loading = this.$el.find(passwordContainerClass + ' .icon-loading-small');\n\t\t\tvar inputClass = '#passwordField-' + this.cid + '-' + shareId;\n\t\t\tvar passwordField = $(inputClass);\n\t\t\tvar state = element.prop('checked');\n\t\t\tvar passwordByTalkElement = $('#passwordByTalk-' + this.cid + '-' + shareId);\n\t\t\tvar passwordByTalkState = passwordByTalkElement.prop('checked');\n\t\t\tif (!state && !passwordByTalkState) {\n\t\t\t\tthis.model.updateShare(shareId, {password: '', sendPasswordByTalk: false});\n\t\t\t\tpasswordField.attr('value', '');\n\t\t\t\tpasswordField.removeClass('error');\n\t\t\t\tpasswordField.tooltip('hide');\n\t\t\t\tloading.addClass('hidden');\n\t\t\t\tpasswordField.attr('placeholder', PASSWORD_PLACEHOLDER_MESSAGE);\n\t\t\t\t// We first need to reset the password field before we hide it\n\t\t\t\tpasswordContainer.toggleClass('hidden', !state);\n\t\t\t} else if (state) {\n\t\t\t\tif (passwordByTalkState) {\n\t\t\t\t\t// Switching from sending the password by Talk to sending\n\t\t\t\t\t// the password by mail can be done keeping the previous\n\t\t\t\t\t// password sent by Talk.\n\t\t\t\t\tthis.model.updateShare(shareId, {sendPasswordByTalk: false});\n\n\t\t\t\t\tvar passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n\t\t\t\t\tvar passwordByTalkContainer = $(passwordByTalkContainerClass);\n\t\t\t\t\tpasswordByTalkContainer.addClass('hidden');\n\t\t\t\t\tpasswordByTalkElement.prop('checked', false);\n\t\t\t\t}\n\n\t\t\t\tpasswordContainer.toggleClass('hidden', !state);\n\t\t\t\tpasswordField = '#passwordField-' + this.cid + '-' + shareId;\n\t\t\t\tthis.$(passwordField).focus();\n\t\t\t}\n\t\t},\n\n\t\tonMailSharePasswordProtectByTalkChange: function(event) {\n\t\t\tvar element = $(event.target);\n\t\t\tvar li = element.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n\t\t\tvar passwordByTalkContainer = $(passwordByTalkContainerClass);\n\t\t\tvar loading = this.$el.find(passwordByTalkContainerClass + ' .icon-loading-small');\n\t\t\tvar inputClass = '#passwordByTalkField-' + this.cid + '-' + shareId;\n\t\t\tvar passwordByTalkField = $(inputClass);\n\t\t\tvar state = element.prop('checked');\n\t\t\tvar passwordElement = $('#password-' + this.cid + '-' + shareId);\n\t\t\tvar passwordState = passwordElement.prop('checked');\n\t\t\tif (!state) {\n\t\t\t\tthis.model.updateShare(shareId, {password: '', sendPasswordByTalk: false});\n\t\t\t\tpasswordByTalkField.attr('value', '');\n\t\t\t\tpasswordByTalkField.removeClass('error');\n\t\t\t\tpasswordByTalkField.tooltip('hide');\n\t\t\t\tloading.addClass('hidden');\n\t\t\t\tpasswordByTalkField.attr('placeholder', PASSWORD_PLACEHOLDER_MESSAGE);\n\t\t\t\t// We first need to reset the password field before we hide it\n\t\t\t\tpasswordByTalkContainer.toggleClass('hidden', !state);\n\t\t\t} else if (state) {\n\t\t\t\tif (passwordState) {\n\t\t\t\t\t// Enabling sending the password by Talk requires a new\n\t\t\t\t\t// password to be given (the one sent by mail is not reused,\n\t\t\t\t\t// as it would defeat the purpose of checking the identity\n\t\t\t\t\t// of the sharee by Talk if it was already sent by mail), so\n\t\t\t\t\t// the share is not updated until the user explicitly gives\n\t\t\t\t\t// the new password.\n\n\t\t\t\t\tvar passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n\t\t\t\t\tvar passwordContainer = $(passwordContainerClass);\n\t\t\t\t\tpasswordContainer.addClass('hidden');\n\t\t\t\t\tpasswordElement.prop('checked', false);\n\t\t\t\t}\n\n\t\t\t\tpasswordByTalkContainer.toggleClass('hidden', !state);\n\t\t\t\tpasswordByTalkField = '#passwordByTalkField-' + this.cid + '-' + shareId;\n\t\t\t\tthis.$(passwordByTalkField).focus();\n\t\t\t}\n\t\t},\n\n\t\tonMailSharePasswordKeyUp: function(event) {\n\t\t\tif(event.keyCode === 13) {\n\t\t\t\tthis.onMailSharePasswordEntered(event);\n\t\t\t}\n\t\t},\n\n\t\tonMailSharePasswordEntered: function(event) {\n\t\t\tvar passwordField = $(event.target);\n\t\t\tvar li = passwordField.closest('li[data-share-id]');\n\t\t\tvar shareId = li.data('share-id');\n\t\t\tvar passwordContainerClass = '.passwordMenu-' + this.cid + '-' + shareId;\n\t\t\tvar passwordByTalkContainerClass = '.passwordByTalkMenu-' + this.cid + '-' + shareId;\n\t\t\tvar sendPasswordByTalk = passwordField.attr('id').startsWith('passwordByTalk');\n\t\t\tvar loading;\n\t\t\tif (sendPasswordByTalk) {\n\t\t\t\tloading = this.$el.find(passwordByTalkContainerClass + ' .icon-loading-small');\n\t\t\t} else {\n\t\t\t\tloading = this.$el.find(passwordContainerClass + ' .icon-loading-small');\n\t\t\t}\n\t\t\tif (!loading.hasClass('hidden')) {\n\t\t\t\t// still in process\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpasswordField.removeClass('error');\n\t\t\tvar password = passwordField.val();\n\t\t\t// in IE9 the password might be the placeholder due to bugs in the placeholders polyfill\n\t\t\tif(password === '' || password === PASSWORD_PLACEHOLDER || password === PASSWORD_PLACEHOLDER_MESSAGE) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tloading\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.addClass('inlineblock');\n\n\n\t\t\tthis.model.updateShare(shareId, {\n\t\t\t\tpassword: password,\n\t\t\t\tsendPasswordByTalk: sendPasswordByTalk\n\t\t\t}, {\n\t\t\t\terror: function(model, msg) {\n\t\t\t\t\t// destroy old tooltips\n\t\t\t\t\tpasswordField.tooltip('destroy');\n\t\t\t\t\tloading.removeClass('inlineblock').addClass('hidden');\n\t\t\t\t\tpasswordField.addClass('error');\n\t\t\t\t\tpasswordField.attr('title', msg);\n\t\t\t\t\tpasswordField.tooltip({placement: 'bottom', trigger: 'manual'});\n\t\t\t\t\tpasswordField.tooltip('show');\n\t\t\t\t},\n\t\t\t\tsuccess: function(model, msg) {\n\t\t\t\t\tpasswordField.blur();\n\t\t\t\t\tpasswordField.attr('value', '');\n\t\t\t\t\tpasswordField.attr('placeholder', PASSWORD_PLACEHOLDER);\n\t\t\t\t\tloading.removeClass('inlineblock').addClass('hidden');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tonPermissionChange: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\tvar permissions = OC.PERMISSION_READ;\n\n\t\t\tif (this.model.isFolder()) {\n\t\t\t\t// adjust checkbox states\n\t\t\t\tvar $checkboxes = $('.permissions', $li).not('input[name=\"edit\"]').not('input[name=\"share\"]');\n\t\t\t\tvar checked;\n\t\t\t\tif ($element.attr('name') === 'edit') {\n\t\t\t\t\tchecked = $element.is(':checked');\n\t\t\t\t\t// Check/uncheck Create, Update, and Delete checkboxes if Edit is checked/unck\n\t\t\t\t\t$($checkboxes).prop('checked', checked);\n\t\t\t\t\tif (checked) {\n\t\t\t\t\t\tpermissions |= OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar numberChecked = $checkboxes.filter(':checked').length;\n\t\t\t\t\tchecked = numberChecked === $checkboxes.length;\n\t\t\t\t\tvar $editCb = $('input[name=\"edit\"]', $li);\n\t\t\t\t\t$editCb.prop('checked', checked);\n\t\t\t\t\t$editCb.prop('indeterminate', !checked && numberChecked > 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($('input[name=\"edit\"]', $li).is(':checked')) {\n\t\t\t\t\tpermissions |= OC.PERMISSION_UPDATE;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$('.permissions', $li).not('input[name=\"edit\"]').filter(':checked').each(function(index, checkbox) {\n\t\t\t\tpermissions |= $(checkbox).data('permissions');\n\t\t\t});\n\n\n\t\t\t/** disable checkboxes during save operation to avoid race conditions **/\n\t\t\t$li.find('input[type=checkbox]').prop('disabled', true);\n\t\t\tvar enableCb = function() {\n\t\t\t\t$li.find('input[type=checkbox]').prop('disabled', false);\n\t\t\t};\n\t\t\tvar errorCb = function(elem, msg) {\n\t\t\t\tOC.dialogs.alert(msg, t('core', 'Error while sharing'));\n\t\t\t\tenableCb();\n\t\t\t};\n\n\t\t\tthis.model.updateShare(shareId, {permissions: permissions}, {error: errorCb, success: enableCb});\n\n\t\t\tthis._renderPermissionChange = shareId;\n\t\t},\n\n\t\tonSecureDropChange: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $element = $(event.target);\n\t\t\tvar $li = $element.closest('li[data-share-id]');\n\t\t\tvar shareId = $li.data('share-id');\n\n\t\t\tvar permissions = OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE | OC.PERMISSION_READ;\n\t\t\tif ($element.is(':checked')) {\n\t\t\t\tpermissions = OC.PERMISSION_CREATE | OC.PERMISSION_UPDATE | OC.PERMISSION_DELETE;\n\t\t\t}\n\n\t\t\t/** disable checkboxes during save operation to avoid race conditions **/\n\t\t\t$li.find('input[type=checkbox]').prop('disabled', true);\n\t\t\tvar enableCb = function() {\n\t\t\t\t$li.find('input[type=checkbox]').prop('disabled', false);\n\t\t\t};\n\t\t\tvar errorCb = function(elem, msg) {\n\t\t\t\tOC.dialogs.alert(msg, t('core', 'Error while sharing'));\n\t\t\t\tenableCb();\n\t\t\t};\n\n\t\t\tthis.model.updateShare(shareId, {permissions: permissions}, {error: errorCb, success: enableCb});\n\n\t\t\tthis._renderPermissionChange = shareId;\n\t\t}\n\n\t});\n\n\tOC.Share.ShareDialogShareeListView = ShareDialogShareeListView;\n\n})();\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* globals Handlebars */\n\n(function() {\n\tif(!OC.Share) {\n\t\tOC.Share = {};\n\t}\n\n\t/**\n\t * @class OCA.Share.ShareDialogView\n\t * @member {OC.Share.ShareItemModel} model\n\t * @member {jQuery} $el\n\t * @memberof OCA.Sharing\n\t * @classdesc\n\t *\n\t * Represents the GUI of the share dialogue\n\t *\n\t */\n\tvar ShareDialogView = OC.Backbone.View.extend({\n\t\t/** @type {Object} **/\n\t\t_templates: {},\n\n\t\t/** @type {boolean} **/\n\t\t_showLink: true,\n\n\t\t_lookup: false,\n\n\t\t_lookupAllowed: false,\n\n\t\t/** @type {string} **/\n\t\ttagName: 'div',\n\n\t\t/** @type {OC.Share.ShareConfigModel} **/\n\t\tconfigModel: undefined,\n\n\t\t/** @type {object} **/\n\t\tresharerInfoView: undefined,\n\n\t\t/** @type {object} **/\n\t\tlinkShareView: undefined,\n\n\t\t/** @type {object} **/\n\t\tshareeListView: undefined,\n\n\t\t/** @type {object} **/\n\t\t_lastSuggestions: undefined,\n\n\t\t/** @type {object} **/\n\t\t_lastRecommendations: undefined,\n\n\t\t/** @type {int} **/\n\t\t_pendingOperationsCount: 0,\n\n\t\tevents: {\n\t\t\t'focus .shareWithField': 'onShareWithFieldFocus',\n\t\t\t'input .shareWithField': 'onShareWithFieldChanged',\n\t\t\t'click .shareWithConfirm': '_confirmShare'\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tvar view = this;\n\n\t\t\tthis.model.on('fetchError', function() {\n\t\t\t\tOC.Notification.showTemporary(t('core', 'Share details could not be loaded for this item.'));\n\t\t\t});\n\n\t\t\tif(!_.isUndefined(options.configModel)) {\n\t\t\t\tthis.configModel = options.configModel;\n\t\t\t} else {\n\t\t\t\tthrow 'missing OC.Share.ShareConfigModel';\n\t\t\t}\n\n\t\t\tthis.configModel.on('change:isRemoteShareAllowed', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\t\t\tthis.configModel.on('change:isRemoteGroupShareAllowed', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\t\t\tthis.model.on('change:permissions', function() {\n\t\t\t\tview.render();\n\t\t\t});\n\n\t\t\tthis.model.on('request', this._onRequest, this);\n\t\t\tthis.model.on('sync', this._onEndRequest, this);\n\n\t\t\tvar subViewOptions = {\n\t\t\t\tmodel: this.model,\n\t\t\t\tconfigModel: this.configModel\n\t\t\t};\n\n\t\t\tvar subViews = {\n\t\t\t\tresharerInfoView: 'ShareDialogResharerInfoView',\n\t\t\t\tlinkShareView: 'ShareDialogLinkShareView',\n\t\t\t\tshareeListView: 'ShareDialogShareeListView'\n\t\t\t};\n\n\t\t\tfor(var name in subViews) {\n\t\t\t\tvar className = subViews[name];\n\t\t\t\tthis[name] = _.isUndefined(options[name])\n\t\t\t\t\t? new OC.Share[className](subViewOptions)\n\t\t\t\t\t: options[name];\n\t\t\t}\n\n\t\t\t_.bindAll(this,\n\t\t\t\t'autocompleteHandler',\n\t\t\t\t'_onSelectRecipient',\n\t\t\t\t'onShareWithFieldChanged',\n\t\t\t\t'onShareWithFieldFocus'\n\t\t\t);\n\n\t\t\tOC.Plugins.attach('OC.Share.ShareDialogView', this);\n\t\t},\n\n\t\tonShareWithFieldChanged: function() {\n\t\t\tvar $el = this.$el.find('.shareWithField');\n\t\t\tif ($el.val().length < 2) {\n\t\t\t\t$el.removeClass('error').tooltip('hide');\n\t\t\t}\n\t\t},\n\n\t\t/* trigger search after the field was re-selected */\n\t\tonShareWithFieldFocus: function() {\n\t\t\tvar $shareWithField = this.$el.find('.shareWithField');\n\t\t\t$shareWithField.autocomplete(\"search\", $shareWithField.val());\n\t\t},\n\n\t\t_getSuggestions: function(searchTerm, perPage, model, lookup) {\n\t\t\tif (this._lastSuggestions &&\n\t\t\t\tthis._lastSuggestions.searchTerm === searchTerm &&\n\t\t\t\tthis._lastSuggestions.lookup === lookup &&\n\t\t\t\tthis._lastSuggestions.perPage === perPage &&\n\t\t\t\tthis._lastSuggestions.model === model) {\n\t\t\t\treturn this._lastSuggestions.promise;\n\t\t\t}\n\n\t\t\tvar deferred = $.Deferred();\n\t\t\tvar view = this;\n\n\t\t\t// query lookup GS by default if enabled\n\t\t\tvar capabilities = OC.getCapabilities()\n\t\t\tif (capabilities.files_sharing\n\t\t\t\t&& capabilities.files_sharing.sharee\n\t\t\t\t&& capabilities.files_sharing.sharee.query_lookup_default) {\n\t\t\t\t\tthis._lookup = true;\n\t\t\t}\n\n\t\t\t$.get(\n\t\t\t\tOC.linkToOCS('apps/files_sharing/api/v1') + 'sharees',\n\t\t\t\t{\n\t\t\t\t\tformat: 'json',\n\t\t\t\t\tsearch: searchTerm,\n\t\t\t\t\tlookup: lookup,\n\t\t\t\t\tperPage: perPage,\n\t\t\t\t\titemType: model.get('itemType')\n\t\t\t\t},\n\t\t\t\tfunction (result) {\n\t\t\t\t\tif (result.ocs.meta.statuscode === 100) {\n\t\t\t\t\t\tvar filter = function(users, groups, remotes, remote_groups, emails, circles, rooms) {\n\t\t\t\t\t\t\tif (typeof(emails) === 'undefined') {\n\t\t\t\t\t\t\t\temails = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof(circles) === 'undefined') {\n\t\t\t\t\t\t\t\tcircles = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof(rooms) === 'undefined') {\n\t\t\t\t\t\t\t\trooms = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar usersLength;\n\t\t\t\t\t\t\tvar groupsLength;\n\t\t\t\t\t\t\tvar remotesLength;\n\t\t\t\t\t\t\tvar remoteGroupsLength;\n\t\t\t\t\t\t\tvar emailsLength;\n\t\t\t\t\t\t\tvar circlesLength;\n\t\t\t\t\t\t\tvar roomsLength;\n\n\t\t\t\t\t\t\tvar i, j;\n\n\t\t\t\t\t\t\t//Filter out the current user\n\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\tfor (i = 0; i < usersLength; i++) {\n\t\t\t\t\t\t\t\tif (users[i].value.shareWith === OC.currentUser) {\n\t\t\t\t\t\t\t\t\tusers.splice(i, 1);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Filter out the owner of the share\n\t\t\t\t\t\t\tif (model.hasReshare()) {\n\t\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\t\tfor (i = 0 ; i < usersLength; i++) {\n\t\t\t\t\t\t\t\t\tif (users[i].value.shareWith === model.getReshareOwner()) {\n\t\t\t\t\t\t\t\t\t\tusers.splice(i, 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar shares = model.get('shares');\n\t\t\t\t\t\t\tvar sharesLength = shares.length;\n\n\t\t\t\t\t\t\t// Now filter out all sharees that are already shared with\n\t\t\t\t\t\t\tfor (i = 0; i < sharesLength; i++) {\n\t\t\t\t\t\t\t\tvar share = shares[i];\n\n\t\t\t\t\t\t\t\tif (share.share_type === OC.Share.SHARE_TYPE_USER) {\n\t\t\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < usersLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (users[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tusers.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\t\t\t\t\t\tgroupsLength = groups.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < groupsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (groups[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tgroups.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE) {\n\t\t\t\t\t\t\t\t\tremotesLength = remotes.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < remotesLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (remotes[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tremotes.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\t\t\t\t\t\tremoteGroupsLength = remote_groups.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < remoteGroupsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (remote_groups[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tremote_groups.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_EMAIL) {\n\t\t\t\t\t\t\t\t\temailsLength = emails.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < emailsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (emails[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\temails.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\t\t\t\t\t\tcirclesLength = circles.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < circlesLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (circles[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tcircles.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_ROOM) {\n\t\t\t\t\t\t\t\t\troomsLength = rooms.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < roomsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (rooms[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\trooms.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfilter(\n\t\t\t\t\t\t\tresult.ocs.data.exact.users,\n\t\t\t\t\t\t\tresult.ocs.data.exact.groups,\n\t\t\t\t\t\t\tresult.ocs.data.exact.remotes,\n\t\t\t\t\t\t\tresult.ocs.data.exact.remote_groups,\n\t\t\t\t\t\t\tresult.ocs.data.exact.emails,\n\t\t\t\t\t\t\tresult.ocs.data.exact.circles,\n\t\t\t\t\t\t\tresult.ocs.data.exact.rooms\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar exactUsers   = result.ocs.data.exact.users;\n\t\t\t\t\t\tvar exactGroups  = result.ocs.data.exact.groups;\n\t\t\t\t\t\tvar exactRemotes = result.ocs.data.exact.remotes;\n\t\t\t\t\t\tvar exactRemoteGroups = result.ocs.data.exact.remote_groups;\n\t\t\t\t\t\tvar exactEmails = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.emails) !== 'undefined') {\n\t\t\t\t\t\t\texactEmails = result.ocs.data.exact.emails;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar exactCircles = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.circles) !== 'undefined') {\n\t\t\t\t\t\t\texactCircles = result.ocs.data.exact.circles;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar exactRooms = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.rooms) !== 'undefined') {\n\t\t\t\t\t\t\texactRooms = result.ocs.data.exact.rooms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar exactMatches = exactUsers.concat(exactGroups).concat(exactRemotes).concat(exactRemoteGroups).concat(exactEmails).concat(exactCircles).concat(exactRooms);\n\n\t\t\t\t\t\tfilter(\n\t\t\t\t\t\t\tresult.ocs.data.users,\n\t\t\t\t\t\t\tresult.ocs.data.groups,\n\t\t\t\t\t\t\tresult.ocs.data.remotes,\n\t\t\t\t\t\t\tresult.ocs.data.remote_groups,\n\t\t\t\t\t\t\tresult.ocs.data.emails,\n\t\t\t\t\t\t\tresult.ocs.data.circles,\n\t\t\t\t\t\t\tresult.ocs.data.rooms\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar users   = result.ocs.data.users;\n\t\t\t\t\t\tvar groups  = result.ocs.data.groups;\n\t\t\t\t\t\tvar remotes = result.ocs.data.remotes;\n\t\t\t\t\t\tvar remoteGroups = result.ocs.data.remote_groups;\n\t\t\t\t\t\tvar lookup = result.ocs.data.lookup;\n\t\t\t\t\t\tvar lookupEnabled = result.ocs.data.lookupEnabled;\n\t\t\t\t\t\tvar emails = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.emails) !== 'undefined') {\n\t\t\t\t\t\t\temails = result.ocs.data.emails;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar circles = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.circles) !== 'undefined') {\n\t\t\t\t\t\t\tcircles = result.ocs.data.circles;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar rooms = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.rooms) !== 'undefined') {\n\t\t\t\t\t\t\trooms = result.ocs.data.rooms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar suggestions = exactMatches.concat(users).concat(groups).concat(remotes).concat(remoteGroups).concat(emails).concat(circles).concat(rooms).concat(lookup);\n\n\t\t\t\t\t\tfunction dynamicSort(property) {\n\t\t\t\t\t\t\treturn function (a,b) {\n\t\t\t\t\t\t\t\tvar aProperty = '';\n\t\t\t\t\t\t\t\tvar bProperty = '';\n\t\t\t\t\t\t\t\tif (typeof a[property] !== 'undefined') {\n\t\t\t\t\t\t\t\t\taProperty = a[property];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof b[property] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tbProperty = b[property];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (aProperty < bProperty) ? -1 : (aProperty > bProperty) ? 1 : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Sort share entries by uuid to properly group them\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar grouped = suggestions.sort(dynamicSort('uuid'));\n\n\t\t\t\t\t\tvar previousUuid = null;\n\t\t\t\t\t\tvar groupedLength = grouped.length;\n\t\t\t\t\t\tvar result = [];\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * build the result array that only contains all contact entries from\n\t\t\t\t\t\t * merged contacts, if the search term matches its contact name\n\t\t\t\t\t\t */\n\t\t\t\t\t\tfor (var i = 0; i < groupedLength; i++) {\n\t\t\t\t\t\t\tif (typeof grouped[i].uuid !== 'undefined' && grouped[i].uuid === previousUuid) {\n\t\t\t\t\t\t\t\tgrouped[i].merged = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (searchTerm === grouped[i].name || typeof grouped[i].merged === 'undefined') {\n\t\t\t\t\t\t\t\tresult.push(grouped[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousUuid = grouped[i].uuid;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar moreResultsAvailable =\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tOC.config['sharing.maxAutocompleteResults'] > 0\n\t\t\t\t\t\t\t\t&& Math.min(perPage, OC.config['sharing.maxAutocompleteResults'])\n\t\t\t\t\t\t\t\t\t<= Math.max(\n\t\t\t\t\t\t\t\t\t\tusers.length + exactUsers.length,\n\t\t\t\t\t\t\t\t\t\tgroups.length + exactGroups.length,\n\t\t\t\t\t\t\t\t\t\tremoteGroups.length + exactRemoteGroups.length,\n\t\t\t\t\t\t\t\t\t\tremotes.length + exactRemotes.length,\n\t\t\t\t\t\t\t\t\t\temails.length + exactEmails.length,\n\t\t\t\t\t\t\t\t\t\tcircles.length + exactCircles.length,\n\t\t\t\t\t\t\t\t\t\trooms.length + exactRooms.length,\n\t\t\t\t\t\t\t\t\t\tlookup.length\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!view._lookup && lookupEnabled) {\n\t\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: t('core', 'Search globally'),\n\t\t\t\t\t\t\t\t\tvalue: {},\n\t\t\t\t\t\t\t\t\tlookup: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdeferred.resolve(result, exactMatches, moreResultsAvailable, lookupEnabled);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdeferred.reject(result.ocs.meta.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).fail(function() {\n\t\t\t\tdeferred.reject();\n\t\t\t});\n\n\t\t\tthis._lastSuggestions = {\n\t\t\t\tsearchTerm: searchTerm,\n\t\t\t\tlookup: lookup,\n\t\t\t\tperPage: perPage,\n\t\t\t\tmodel: model,\n\t\t\t\tpromise: deferred.promise()\n\t\t\t};\n\n\t\t\treturn this._lastSuggestions.promise;\n\t\t},\n\n\t\t_getRecommendations: function(model) {\n\t\t\tif (this._lastRecommendations &&\n\t\t\t\tthis._lastRecommendations.model === model) {\n\t\t\t\treturn this._lastRecommendations.promise;\n\t\t\t}\n\n\t\t\tvar deferred = $.Deferred();\n\n\t\t\t$.get(\n\t\t\t\tOC.linkToOCS('apps/files_sharing/api/v1') + 'sharees_recommended',\n\t\t\t\t{\n\t\t\t\t\tformat: 'json',\n\t\t\t\t\titemType: model.get('itemType')\n\t\t\t\t},\n\t\t\t\tfunction (result) {\n\t\t\t\t\tif (result.ocs.meta.statuscode === 100) {\n\t\t\t\t\t\tvar filter = function(users, groups, remotes, remote_groups, emails, circles, rooms) {\n\t\t\t\t\t\t\tif (typeof(emails) === 'undefined') {\n\t\t\t\t\t\t\t\temails = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof(circles) === 'undefined') {\n\t\t\t\t\t\t\t\tcircles = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof(rooms) === 'undefined') {\n\t\t\t\t\t\t\t\trooms = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar usersLength;\n\t\t\t\t\t\t\tvar groupsLength;\n\t\t\t\t\t\t\tvar remotesLength;\n\t\t\t\t\t\t\tvar remoteGroupsLength;\n\t\t\t\t\t\t\tvar emailsLength;\n\t\t\t\t\t\t\tvar circlesLength;\n\t\t\t\t\t\t\tvar roomsLength;\n\n\t\t\t\t\t\t\tvar i, j;\n\n\t\t\t\t\t\t\t//Filter out the current user\n\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\tfor (i = 0; i < usersLength; i++) {\n\t\t\t\t\t\t\t\tif (users[i].value.shareWith === OC.currentUser) {\n\t\t\t\t\t\t\t\t\tusers.splice(i, 1);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Filter out the owner of the share\n\t\t\t\t\t\t\tif (model.hasReshare()) {\n\t\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\t\tfor (i = 0 ; i < usersLength; i++) {\n\t\t\t\t\t\t\t\t\tif (users[i].value.shareWith === model.getReshareOwner()) {\n\t\t\t\t\t\t\t\t\t\tusers.splice(i, 1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar shares = model.get('shares');\n\t\t\t\t\t\t\tvar sharesLength = shares.length;\n\n\t\t\t\t\t\t\t// Now filter out all sharees that are already shared with\n\t\t\t\t\t\t\tfor (i = 0; i < sharesLength; i++) {\n\t\t\t\t\t\t\t\tvar share = shares[i];\n\n\t\t\t\t\t\t\t\tif (share.share_type === OC.Share.SHARE_TYPE_USER) {\n\t\t\t\t\t\t\t\t\tusersLength = users.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < usersLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (users[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tusers.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\t\t\t\t\t\tgroupsLength = groups.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < groupsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (groups[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tgroups.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE) {\n\t\t\t\t\t\t\t\t\tremotesLength = remotes.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < remotesLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (remotes[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tremotes.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\t\t\t\t\t\tremoteGroupsLength = remote_groups.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < remoteGroupsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (remote_groups[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tremote_groups.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_EMAIL) {\n\t\t\t\t\t\t\t\t\temailsLength = emails.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < emailsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (emails[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\temails.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\t\t\t\t\t\tcirclesLength = circles.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < circlesLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (circles[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\tcircles.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (share.share_type === OC.Share.SHARE_TYPE_ROOM) {\n\t\t\t\t\t\t\t\t\troomsLength = rooms.length;\n\t\t\t\t\t\t\t\t\tfor (j = 0; j < roomsLength; j++) {\n\t\t\t\t\t\t\t\t\t\tif (rooms[j].value.shareWith === share.share_with) {\n\t\t\t\t\t\t\t\t\t\t\trooms.splice(j, 1);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfilter(\n\t\t\t\t\t\t\tresult.ocs.data.exact.users,\n\t\t\t\t\t\t\tresult.ocs.data.exact.groups,\n\t\t\t\t\t\t\tresult.ocs.data.exact.remotes,\n\t\t\t\t\t\t\tresult.ocs.data.exact.remote_groups,\n\t\t\t\t\t\t\tresult.ocs.data.exact.emails,\n\t\t\t\t\t\t\tresult.ocs.data.exact.circles,\n\t\t\t\t\t\t\tresult.ocs.data.exact.rooms\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar exactUsers   = result.ocs.data.exact.users;\n\t\t\t\t\t\tvar exactGroups  = result.ocs.data.exact.groups;\n\t\t\t\t\t\tvar exactRemotes = result.ocs.data.exact.remotes || [];\n\t\t\t\t\t\tvar exactRemoteGroups = result.ocs.data.exact.remote_groups || [];\n\t\t\t\t\t\tvar exactEmails = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.emails) !== 'undefined') {\n\t\t\t\t\t\t\texactEmails = result.ocs.data.exact.emails;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar exactCircles = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.circles) !== 'undefined') {\n\t\t\t\t\t\t\texactCircles = result.ocs.data.exact.circles;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar exactRooms = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.rooms) !== 'undefined') {\n\t\t\t\t\t\t\texactRooms = result.ocs.data.exact.rooms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar exactMatches = exactUsers.concat(exactGroups).concat(exactRemotes).concat(exactRemoteGroups).concat(exactEmails).concat(exactCircles).concat(exactRooms);\n\n\t\t\t\t\t\tfilter(\n\t\t\t\t\t\t\tresult.ocs.data.users,\n\t\t\t\t\t\t\tresult.ocs.data.groups,\n\t\t\t\t\t\t\tresult.ocs.data.remotes,\n\t\t\t\t\t\t\tresult.ocs.data.remote_groups,\n\t\t\t\t\t\t\tresult.ocs.data.emails,\n\t\t\t\t\t\t\tresult.ocs.data.circles,\n\t\t\t\t\t\t\tresult.ocs.data.rooms\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar users   = result.ocs.data.users;\n\t\t\t\t\t\tvar groups  = result.ocs.data.groups;\n\t\t\t\t\t\tvar remotes = result.ocs.data.remotes || [];\n\t\t\t\t\t\tvar remoteGroups = result.ocs.data.remote_groups || [];\n\t\t\t\t\t\tvar lookup = result.ocs.data.lookup || [];\n\t\t\t\t\t\tvar emails = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.emails) !== 'undefined') {\n\t\t\t\t\t\t\temails = result.ocs.data.emails;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar circles = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.circles) !== 'undefined') {\n\t\t\t\t\t\t\tcircles = result.ocs.data.circles;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar rooms = [];\n\t\t\t\t\t\tif (typeof(result.ocs.data.rooms) !== 'undefined') {\n\t\t\t\t\t\t\trooms = result.ocs.data.rooms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar suggestions = exactMatches.concat(users).concat(groups).concat(remotes).concat(remoteGroups).concat(emails).concat(circles).concat(rooms).concat(lookup);\n\n\t\t\t\t\t\tfunction dynamicSort(property) {\n\t\t\t\t\t\t\treturn function (a,b) {\n\t\t\t\t\t\t\t\tvar aProperty = '';\n\t\t\t\t\t\t\t\tvar bProperty = '';\n\t\t\t\t\t\t\t\tif (typeof a[property] !== 'undefined') {\n\t\t\t\t\t\t\t\t\taProperty = a[property];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (typeof b[property] !== 'undefined') {\n\t\t\t\t\t\t\t\t\tbProperty = b[property];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (aProperty < bProperty) ? -1 : (aProperty > bProperty) ? 1 : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Sort share entries by uuid to properly group them\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar grouped = suggestions.sort(dynamicSort('uuid'));\n\n\t\t\t\t\t\tvar previousUuid = null;\n\t\t\t\t\t\tvar groupedLength = grouped.length;\n\t\t\t\t\t\tvar result = [];\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * build the result array that only contains all contact entries from\n\t\t\t\t\t\t * merged contacts, if the search term matches its contact name\n\t\t\t\t\t\t */\n\t\t\t\t\t\tfor (var i = 0; i < groupedLength; i++) {\n\t\t\t\t\t\t\tif (typeof grouped[i].uuid !== 'undefined' && grouped[i].uuid === previousUuid) {\n\t\t\t\t\t\t\t\tgrouped[i].merged = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof grouped[i].merged === 'undefined') {\n\t\t\t\t\t\t\t\tresult.push(grouped[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpreviousUuid = grouped[i].uuid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdeferred.resolve(result, exactMatches, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdeferred.reject(result.ocs.meta.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).fail(function() {\n\t\t\t\tdeferred.reject();\n\t\t\t});\n\n\t\t\tthis._lastRecommendations = {\n\t\t\t\tmodel: model,\n\t\t\t\tpromise: deferred.promise()\n\t\t\t};\n\n\t\t\treturn this._lastRecommendations.promise;\n\t\t},\n\n\t\trecommendationHandler: function (response) {\n\t\t\tvar view = this;\n\t\t\tvar $shareWithField = $('.shareWithField');\n\t\t\tthis._getRecommendations(\n\t\t\t\tview.model\n\t\t\t).done(function(suggestions) {\n\t\t\t\tconsole.info('recommendations', suggestions);\n\t\t\t\tif (suggestions.length > 0) {\n\t\t\t\t\t$shareWithField\n\t\t\t\t\t\t.autocomplete(\"option\", \"autoFocus\", true);\n\n\t\t\t\t\tresponse(suggestions);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.info('no sharing recommendations found');\n\t\t\t\t\tresponse();\n\t\t\t\t}\n\t\t\t}).fail(function(message) {\n\t\t\t\tconsole.error('could not load recommendations', message)\n\t\t\t});\n\t\t},\n\n\t\tautocompleteHandler: function (search, response) {\n\t\t\t// If nothing is entered we show recommendations instead of search\n\t\t\t// results\n\t\t\tif (search.term.length === 0) {\n\t\t\t\tconsole.info(search.term, 'empty search term -> using recommendations');\n\t\t\t\tthis.recommendationHandler(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $shareWithField = $('.shareWithField'),\n\t\t\t\tview = this,\n\t\t\t\t$loading = this.$el.find('.shareWithLoading'),\n\t\t\t\t$confirm = this.$el.find('.shareWithConfirm');\n\n\t\t\tvar count = OC.config['sharing.minSearchStringLength'];\n\t\t\tif (search.term.trim().length < count) {\n\t\t\t\tvar title = n('core',\n\t\t\t\t\t'At least {count} character is needed for autocompletion',\n\t\t\t\t\t'At least {count} characters are needed for autocompletion',\n\t\t\t\t\tcount,\n\t\t\t\t\t{ count: count }\n\t\t\t\t);\n\t\t\t\t$shareWithField.addClass('error')\n\t\t\t\t\t.attr('data-original-title', title)\n\t\t\t\t\t.tooltip('hide')\n\t\t\t\t\t.tooltip({\n\t\t\t\t\t\tplacement: 'bottom',\n\t\t\t\t\t\ttrigger: 'manual'\n\t\t\t\t\t})\n\t\t\t\t\t.tooltip('fixTitle')\n\t\t\t\t\t.tooltip('show');\n\t\t\t\tresponse();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$loading.removeClass('hidden');\n\t\t\t$loading.addClass('inlineblock');\n\t\t\t$confirm.addClass('hidden');\n\t\t\tthis._pendingOperationsCount++;\n\n\t\t\t$shareWithField.removeClass('error')\n\t\t\t\t.tooltip('hide');\n\n\t\t\tvar perPage = parseInt(OC.config['sharing.maxAutocompleteResults'], 10) || 200;\n\t\t\tthis._getSuggestions(\n\t\t\t\tsearch.term.trim(),\n\t\t\t\tperPage,\n\t\t\t\tview.model,\n\t\t\t\tview._lookup\n\t\t\t).done(function(suggestions, exactMatches, moreResultsAvailable) {\n\t\t\t\tview._pendingOperationsCount--;\n\t\t\t\tif (view._pendingOperationsCount === 0) {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$loading.removeClass('inlineblock');\n\t\t\t\t\t$confirm.removeClass('hidden');\n\t\t\t\t}\n\n\t\t\t\tif (suggestions.length > 0) {\n\t\t\t\t\t$shareWithField\n\t\t\t\t\t\t.autocomplete(\"option\", \"autoFocus\", true);\n\n\t\t\t\t\tresponse(suggestions);\n\n\t\t\t\t\t// show a notice that the list is truncated\n\t\t\t\t\t// this is the case if one of the search results is at least as long as the max result config option\n\t\t\t\t\tif(moreResultsAvailable) {\n\t\t\t\t\t\tvar message = t('core', 'This list is maybe truncated - please refine your search term to see more results.');\n\t\t\t\t\t\t$('.ui-autocomplete').append('<li class=\"autocomplete-note\">' + message + '</li>');\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tvar title = t('core', 'No users or groups found for {search}', {search: $shareWithField.val()});\n\t\t\t\t\tif (!view.configModel.get('allowGroupSharing')) {\n\t\t\t\t\t\ttitle = t('core', 'No users found for {search}', {search: $('.shareWithField').val()});\n\t\t\t\t\t}\n\t\t\t\t\t$shareWithField.addClass('error')\n\t\t\t\t\t\t.attr('data-original-title', title)\n\t\t\t\t\t\t.tooltip('hide')\n\t\t\t\t\t\t.tooltip({\n\t\t\t\t\t\t\tplacement: 'top',\n\t\t\t\t\t\t\ttrigger: 'manual'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.tooltip('fixTitle')\n\t\t\t\t\t\t.tooltip('show');\n\t\t\t\t\tresponse();\n\t\t\t\t}\n\t\t\t}).fail(function(message) {\n\t\t\t\tview._pendingOperationsCount--;\n\t\t\t\tif (view._pendingOperationsCount === 0) {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$loading.removeClass('inlineblock');\n\t\t\t\t\t$confirm.removeClass('hidden');\n\t\t\t\t}\n\n\t\t\t\tif (message) {\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'An error occurred (\"{message}\"). Please try again', { message: message }));\n\t\t\t\t} else {\n\t\t\t\t\tOC.Notification.showTemporary(t('core', 'An error occurred. Please try again'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tautocompleteRenderItem: function(ul, item) {\n\t\t\tvar icon = 'icon-user';\n\t\t\tvar text = escapeHTML(item.label);\n\t\t\tvar description = '';\n\t\t\tvar type = '';\n\t\t\tvar getTranslatedType = function(type) {\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'HOME':\n\t\t\t\t\t\treturn t('core', 'Home');\n\t\t\t\t\tcase 'WORK':\n\t\t\t\t\t\treturn t('core', 'Work');\n\t\t\t\t\tcase 'OTHER':\n\t\t\t\t\t\treturn t('core', 'Other');\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn '' + type;\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof item.type !== 'undefined' && item.type !== null) {\n\t\t\t\ttype = getTranslatedType(item.type) + ' ';\n\t\t\t}\n\n\t\t\tif (typeof item.name !== 'undefined') {\n\t\t\t\ttext = escapeHTML(item.name);\n\t\t\t}\n\t\t\tif (item.value.shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\ticon = 'icon-contacts-dark';\n\t\t\t} else if (item.value.shareType === OC.Share.SHARE_TYPE_REMOTE) {\n\t\t\t\ticon = 'icon-shared';\n\t\t\t\tdescription += item.value.shareWith;\n\t\t\t} else if (item.value.shareType === OC.Share.SHARE_TYPE_REMOTE_GROUP) {\n\t\t\t\ttext = t('core', '{sharee} (remote group)', { sharee: text }, undefined, { escape: false });\n\t\t\t\ticon = 'icon-shared';\n\t\t\t\tdescription += item.value.shareWith;\n\t\t\t} else if (item.value.shareType === OC.Share.SHARE_TYPE_EMAIL) {\n\t\t\t\ticon = 'icon-mail';\n\t\t\t\tdescription += item.value.shareWith;\n\t\t\t} else if (item.value.shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\ttext = t('core', '{sharee} ({type}, {owner})', {sharee: text, type: item.value.circleInfo, owner: item.value.circleOwner}, undefined, {escape: false});\n\t\t\t\ticon = 'icon-circle';\n\t\t\t} else if (item.value.shareType === OC.Share.SHARE_TYPE_ROOM) {\n\t\t\t\ticon = 'icon-talk';\n\t\t\t}\n\n\t\t\tvar insert = $(\"<div class='share-autocomplete-item'/>\");\n\t\t\tif (item.merged) {\n\t\t\t\tinsert.addClass('merged');\n\t\t\t\ttext = item.value.shareWith;\n\t\t\t\tdescription = type;\n\t\t\t} else if (item.lookup) {\n\t\t\t\ttext = item.label;\n\t\t\t\ticon = false;\n\t\t\t\tinsert.append('<span class=\"icon icon-search search-globally\"></span>');\n\t\t\t} else {\n\t\t\t\tvar avatar = $(\"<div class='avatardiv'></div>\").appendTo(insert);\n\t\t\t\tif (item.value.shareType === OC.Share.SHARE_TYPE_USER || item.value.shareType === OC.Share.SHARE_TYPE_CIRCLE) {\n\t\t\t\t\tavatar.avatar(item.value.shareWith, 32, undefined, undefined, undefined, item.label);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof item.uuid === 'undefined') {\n\t\t\t\t\t\titem.uuid = text;\n\t\t\t\t\t}\n\t\t\t\t\tavatar.imageplaceholder(item.uuid, text, 32);\n\t\t\t\t}\n\t\t\t\tdescription = type + description;\n\t\t\t}\n\t\t\tif (description !== '') {\n\t\t\t\tinsert.addClass('with-description');\n\t\t\t}\n\n\t\t\t$(\"<div class='autocomplete-item-text'></div>\")\n\t\t\t\t.html(\n\t\t\t\t\ttext.replace(\n\t\t\t\t\tnew RegExp(this.term, \"gi\"),\n\t\t\t\t\t\"<span class='ui-state-highlight'>$&</span>\")\n\t\t\t\t\t+ '<span class=\"autocomplete-item-details\">' + description + '</span>'\n\t\t\t\t)\n\t\t\t\t.appendTo(insert);\n\t\t\tinsert.attr('title', item.value.shareWith);\n\t\t\tif (icon) {\n\t\t\t\tinsert.append('<span class=\"icon ' + icon + '\" title=\"' + text + '\"></span>');\n\t\t\t}\n\t\t\tinsert = $(\"<a>\")\n\t\t\t\t.append(insert);\n\t\t\treturn $(\"<li>\")\n\t\t\t\t.addClass((item.value.shareType === OC.Share.SHARE_TYPE_GROUP) ? 'group' : 'user')\n\t\t\t\t.append(insert)\n\t\t\t\t.appendTo(ul);\n\t\t},\n\n\t\t_onSelectRecipient: function(e, s) {\n\t\t\tvar self = this;\n\n\t\t\tif (e.keyCode == 9) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (typeof s.item.name !== 'undefined') {\n\t\t\t\t\te.target.value = s.item.name;\n\t\t\t\t} else {\n\t\t\t\t\te.target.value = s.item.label;\n\t\t\t\t}\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(e.target).attr('disabled', false)\n\t\t\t\t\t\t.autocomplete('search', $(e.target).val());\n\t\t\t\t}, 0);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (s.item.lookup) {\n\t\t\t\t// Retrigger search but with global lookup this time\n\t\t\t\tthis._lookup = true;\n\t\t\t\tvar $shareWithField = this.$el.find('.shareWithField');\n\t\t\t\tvar val = $shareWithField.val();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tconsole.debug('searching again, but globally. search term: ' + val);\n\t\t\t\t\t$shareWithField.autocomplete(\"search\", val);\n\t\t\t\t}, 0);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\t\t\t// Ensure that the keydown handler for the input field is not\n\t\t\t// called; otherwise it would try to add the recipient again, which\n\t\t\t// would fail.\n\t\t\te.stopImmediatePropagation();\n\t\t\t$(e.target).attr('disabled', true)\n\t\t\t\t.val(s.item.label);\n\n\t\t\tvar $loading = this.$el.find('.shareWithLoading');\n\t\t\tvar $confirm = this.$el.find('.shareWithConfirm');\n\n\t\t\t$loading.removeClass('hidden');\n\t\t\t$loading.addClass('inlineblock');\n\t\t\t$confirm.addClass('hidden');\n\t\t\tthis._pendingOperationsCount++;\n\n\t\t\tthis.model.addShare(s.item.value, {success: function() {\n\t\t\t\t// Adding a share changes the suggestions.\n\t\t\t\tself._lastSuggestions = undefined;\n\n\t\t\t\t$(e.target).val('')\n\t\t\t\t\t.attr('disabled', false);\n\n\t\t\t\tself._pendingOperationsCount--;\n\t\t\t\tif (self._pendingOperationsCount === 0) {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$loading.removeClass('inlineblock');\n\t\t\t\t\t$confirm.removeClass('hidden');\n\t\t\t\t}\n\t\t\t}, error: function(obj, msg) {\n\t\t\t\tOC.Notification.showTemporary(msg);\n\t\t\t\t$(e.target).attr('disabled', false)\n\t\t\t\t\t.autocomplete('search', $(e.target).val());\n\n\t\t\t\tself._pendingOperationsCount--;\n\t\t\t\tif (self._pendingOperationsCount === 0) {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$loading.removeClass('inlineblock');\n\t\t\t\t\t$confirm.removeClass('hidden');\n\t\t\t\t}\n\t\t\t}});\n\t\t},\n\n\t\t_confirmShare: function() {\n\t\t\tvar self = this;\n\t\t\tvar $shareWithField = $('.shareWithField');\n\t\t\tvar $loading = this.$el.find('.shareWithLoading');\n\t\t\tvar $confirm = this.$el.find('.shareWithConfirm');\n\n\t\t\t$loading.removeClass('hidden');\n\t\t\t$loading.addClass('inlineblock');\n\t\t\t$confirm.addClass('hidden');\n\t\t\tthis._pendingOperationsCount++;\n\n\t\t\t$shareWithField.prop('disabled', true);\n\n\t\t\t// Disabling the autocompletion does not clear its search timeout;\n\t\t\t// removing the focus from the input field does, but only if the\n\t\t\t// autocompletion is not disabled when the field loses the focus.\n\t\t\t// Thus, the field has to be disabled before disabling the\n\t\t\t// autocompletion to prevent an old pending search result from\n\t\t\t// appearing once the field is enabled again.\n\t\t\t$shareWithField.autocomplete('close');\n\t\t\t$shareWithField.autocomplete('disable');\n\n\t\t\tvar restoreUI = function() {\n\t\t\t\tself._pendingOperationsCount--;\n\t\t\t\tif (self._pendingOperationsCount === 0) {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$loading.removeClass('inlineblock');\n\t\t\t\t\t$confirm.removeClass('hidden');\n\t\t\t\t}\n\n\t\t\t\t$shareWithField.prop('disabled', false);\n\t\t\t\t$shareWithField.focus();\n\t\t\t};\n\n\t\t\tvar perPage = parseInt(OC.config['sharing.maxAutocompleteResults'], 10) || 200;\n\t\t\tthis._getSuggestions(\n\t\t\t\t$shareWithField.val(),\n\t\t\t\tperPage,\n\t\t\t\tthis.model,\n\t\t\t\tthis._lookup\n\t\t\t).done(function(suggestions, exactMatches) {\n\t\t\t\tif (suggestions.length === 0) {\n\t\t\t\t\trestoreUI();\n\n\t\t\t\t\t$shareWithField.autocomplete('enable');\n\n\t\t\t\t\t// There is no need to show an error message here; it will\n\t\t\t\t\t// be automatically shown when the autocomplete is activated\n\t\t\t\t\t// again (due to the focus on the field) and it finds no\n\t\t\t\t\t// matches.\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (exactMatches.length !== 1) {\n\t\t\t\t\trestoreUI();\n\n\t\t\t\t\t$shareWithField.autocomplete('enable');\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar actionSuccess = function() {\n\t\t\t\t\t// Adding a share changes the suggestions.\n\t\t\t\t\tself._lastSuggestions = undefined;\n\n\t\t\t\t\t$shareWithField.val('');\n\n\t\t\t\t\trestoreUI();\n\n\t\t\t\t\t$shareWithField.autocomplete('enable');\n\t\t\t\t};\n\n\t\t\t\tvar actionError = function(obj, msg) {\n\t\t\t\t\trestoreUI();\n\n\t\t\t\t\t$shareWithField.autocomplete('enable');\n\n\t\t\t\t\tOC.Notification.showTemporary(msg);\n\t\t\t\t};\n\n\t\t\t\tself.model.addShare(exactMatches[0].value, {\n\t\t\t\t\tsuccess: actionSuccess,\n\t\t\t\t\terror: actionError\n\t\t\t\t});\n\t\t\t}).fail(function(message) {\n\t\t\t\trestoreUI();\n\n\t\t\t\t$shareWithField.autocomplete('enable');\n\n\t\t\t\t// There is no need to show an error message here; it will be\n\t\t\t\t// automatically shown when the autocomplete is activated again\n\t\t\t\t// (due to the focus on the field) and getting the suggestions\n\t\t\t\t// fail.\n\t\t\t});\n\t\t},\n\n\t\t_toggleLoading: function(state) {\n\t\t\tthis._loading = state;\n\t\t\tthis.$el.find('.subView').toggleClass('hidden', state);\n\t\t\tthis.$el.find('.loading').toggleClass('hidden', !state);\n\t\t},\n\n\t\t_onRequest: function() {\n\t\t\t// only show the loading spinner for the first request (for now)\n\t\t\tif (!this._loadingOnce) {\n\t\t\t\tthis._toggleLoading(true);\n\t\t\t}\n\t\t},\n\n\t\t_onEndRequest: function() {\n\t\t\tvar self = this;\n\t\t\tthis._toggleLoading(false);\n\t\t\tif (!this._loadingOnce) {\n\t\t\t\tthis._loadingOnce = true;\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar self = this;\n\t\t\tvar baseTemplate = OC.Share.Templates['sharedialogview'];\n\n\t\t\tthis.$el.html(baseTemplate({\n\t\t\t\tcid: this.cid,\n\t\t\t\tshareLabel: t('core', 'Share'),\n\t\t\t\tsharePlaceholder: this._renderSharePlaceholderPart(),\n\t\t\t\tisSharingAllowed: this.model.sharePermissionPossible()\n\t\t\t}));\n\n\t\t\tvar $shareField = this.$el.find('.shareWithField');\n\t\t\tif ($shareField.length) {\n\t\t\t\tvar shareFieldKeydownHandler = function(event) {\n\t\t\t\t\tif (event.keyCode !== 13) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tself._confirmShare();\n\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\t$shareField.autocomplete({\n\t\t\t\t\tminLength: 0,\n\t\t\t\t\tdelay: 750,\n\t\t\t\t\tfocus: function(event) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t\tsource: this.autocompleteHandler,\n\t\t\t\t\tselect: this._onSelectRecipient,\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\tvar autocomplete = $(this).autocomplete('widget');\n\t\t\t\t\t\tvar numberOfItems = autocomplete.find('li').size();\n\t\t\t\t\t\tautocomplete.removeClass('item-count-1');\n\t\t\t\t\t\tautocomplete.removeClass('item-count-2');\n\t\t\t\t\t\tif (numberOfItems <= 2) {\n\t\t\t\t\t\t\tautocomplete.addClass('item-count-' + numberOfItems);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).data('ui-autocomplete')._renderItem = this.autocompleteRenderItem;\n\n\t\t\t\t$shareField.on('keydown', null, shareFieldKeydownHandler);\n\t\t\t}\n\n\t\t\tthis.resharerInfoView.$el = this.$el.find('.resharerInfoView');\n\t\t\tthis.resharerInfoView.render();\n\n\t\t\tthis.linkShareView.$el = this.$el.find('.linkShareView');\n\t\t\tthis.linkShareView.render();\n\n\t\t\tthis.shareeListView.$el = this.$el.find('.shareeListView');\n\t\t\tthis.shareeListView.render();\n\n\t\t\tthis.$el.find('.hasTooltip').tooltip();\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * sets whether share by link should be displayed or not. Default is\n\t\t * true.\n\t\t *\n\t\t * @param {bool} showLink\n\t\t */\n\t\tsetShowLink: function(showLink) {\n\t\t\tthis._showLink = (typeof showLink === 'boolean') ? showLink : true;\n\t\t\tthis.linkShareView.showLink = this._showLink;\n\t\t},\n\n\t\t_renderSharePlaceholderPart: function () {\n\t\t\tvar allowRemoteSharing = this.configModel.get('isRemoteShareAllowed');\n\t\t\tvar allowMailSharing = this.configModel.get('isMailShareAllowed');\n\n\t\t\tif (!allowRemoteSharing && allowMailSharing) {\n\t\t\t\treturn t('core', 'Name or email address...');\n\t\t\t}\n\t\t\tif (allowRemoteSharing && !allowMailSharing) {\n\t\t\t\treturn t('core', 'Name or federated cloud ID...');\n\t\t\t}\n\t\t\tif (allowRemoteSharing && allowMailSharing) {\n\t\t\t\treturn t('core', 'Name, federated cloud ID or email address...');\n\t\t\t}\n\n\t\t\treturn \tt('core', 'Name...');\n\t\t},\n\n\t});\n\n\tOC.Share.ShareDialogView = ShareDialogView;\n\n})();\n","/* global escapeHTML */\n\n/**\n * @namespace\n */\nOC.Share = _.extend(OC.Share || {}, {\n\tSHARE_TYPE_USER:0,\n\tSHARE_TYPE_GROUP:1,\n\tSHARE_TYPE_LINK:3,\n\tSHARE_TYPE_EMAIL:4,\n\tSHARE_TYPE_REMOTE:6,\n\tSHARE_TYPE_CIRCLE:7,\n\tSHARE_TYPE_GUEST:8,\n\tSHARE_TYPE_REMOTE_GROUP:9,\n\tSHARE_TYPE_ROOM:10,\n\n\t/**\n\t * Regular expression for splitting parts of remote share owners:\n\t * \"user@example.com/path/to/owncloud\"\n\t * \"user@anotherexample.com@example.com/path/to/owncloud\n\t */\n\t_REMOTE_OWNER_REGEXP: new RegExp(\"^([^@]*)@(([^@]*)@)?([^/]*)([/](.*)?)?$\"),\n\n\t/**\n\t * @deprecated use OC.Share.currentShares instead\n\t */\n\titemShares:[],\n\t/**\n\t * Full list of all share statuses\n\t */\n\tstatuses:{},\n\t/**\n\t * Shares for the currently selected file.\n\t * (for which the dropdown is open)\n\t *\n\t * Key is item type and value is an array or\n\t * shares of the given item type.\n\t */\n\tcurrentShares: {},\n\t/**\n\t * Whether the share dropdown is opened.\n\t */\n\tdroppedDown:false,\n\t/**\n\t * Loads ALL share statuses from server, stores them in\n\t * OC.Share.statuses then calls OC.Share.updateIcons() to update the\n\t * files \"Share\" icon to \"Shared\" according to their share status and\n\t * share type.\n\t *\n\t * If a callback is specified, the update step is skipped.\n\t *\n\t * @param itemType item type\n\t * @param fileList file list instance, defaults to OCA.Files.App.fileList\n\t * @param callback function to call after the shares were loaded\n\t */\n\tloadIcons:function(itemType, fileList, callback) {\n\t\tvar path = fileList.dirInfo.path;\n\t\tif (path === '/') {\n\t\t\tpath = '';\n\t\t}\n\t\tpath += '/' + fileList.dirInfo.name;\n\n\t\t// Load all share icons\n\t\t$.get(\n\t\t\tOC.linkToOCS('apps/files_sharing/api/v1', 2) + 'shares',\n\t\t\t{\n\t\t\t\tsubfiles: 'true',\n\t\t\t\tpath: path,\n\t\t\t\tformat: 'json'\n\t\t\t}, function(result) {\n\t\t\t\tif (result && result.ocs.meta.statuscode === 200) {\n\t\t\t\t\tOC.Share.statuses = {};\n\t\t\t\t\t$.each(result.ocs.data, function(it, share) {\n\t\t\t\t\t\tif (!(share.item_source in OC.Share.statuses)) {\n\t\t\t\t\t\t\tOC.Share.statuses[share.item_source] = {link: false};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (share.share_type === OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\t\t\tOC.Share.statuses[share.item_source] = {link: true};\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (_.isFunction(callback)) {\n\t\t\t\t\t\tcallback(OC.Share.statuses);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tOC.Share.updateIcons(itemType, fileList);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t},\n\t/**\n\t * Updates the files' \"Share\" icons according to the known\n\t * sharing states stored in OC.Share.statuses.\n\t * (not reloaded from server)\n\t *\n\t * @param itemType item type\n\t * @param fileList file list instance\n\t * defaults to OCA.Files.App.fileList\n\t */\n\tupdateIcons:function(itemType, fileList){\n\t\tvar item;\n\t\tvar $fileList;\n\t\tvar currentDir;\n\t\tif (!fileList && OCA.Files) {\n\t\t\tfileList = OCA.Files.App.fileList;\n\t\t}\n\t\t// fileList is usually only defined in the files app\n\t\tif (fileList) {\n\t\t\t$fileList = fileList.$fileList;\n\t\t\tcurrentDir = fileList.getCurrentDirectory();\n\t\t}\n\t\t// TODO: iterating over the files might be more efficient\n\t\tfor (item in OC.Share.statuses){\n\t\t\tvar iconClass = 'icon-shared';\n\t\t\tvar data = OC.Share.statuses[item];\n\t\t\tvar hasLink = data.link;\n\t\t\t// Links override shared in terms of icon display\n\t\t\tif (hasLink) {\n\t\t\t\ticonClass = 'icon-public';\n\t\t\t}\n\t\t\tif (itemType !== 'file' && itemType !== 'folder') {\n\t\t\t\t$('a.share[data-item=\"'+item+'\"] .icon').removeClass('icon-shared icon-public').addClass(iconClass);\n\t\t\t} else {\n\t\t\t\t// TODO: ultimately this part should be moved to files_sharing app\n\t\t\t\tvar file = $fileList.find('tr[data-id=\"'+item+'\"]');\n\t\t\t\tvar shareFolder = OC.imagePath('core', 'filetypes/folder-shared');\n\t\t\t\tvar img;\n\t\t\t\tif (file.length > 0) {\n\t\t\t\t\tthis.markFileAsShared(file, true, hasLink);\n\t\t\t\t} else {\n\t\t\t\t\tvar dir = currentDir;\n\t\t\t\t\tif (dir.length > 1) {\n\t\t\t\t\t\tvar last = '';\n\t\t\t\t\t\tvar path = dir;\n\t\t\t\t\t\t// Search for possible parent folders that are shared\n\t\t\t\t\t\twhile (path != last) {\n\t\t\t\t\t\t\tif (path === data.path && !data.link) {\n\t\t\t\t\t\t\t\tvar actions = $fileList.find('.fileactions .action[data-action=\"Share\"]');\n\t\t\t\t\t\t\t\tvar files = $fileList.find('.filename');\n\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\tfor (i = 0; i < actions.length; i++) {\n\t\t\t\t\t\t\t\t\t// TODO: use this.markFileAsShared()\n\t\t\t\t\t\t\t\t\timg = $(actions[i]).find('img');\n\t\t\t\t\t\t\t\t\tif (img.attr('src') !== OC.imagePath('core', 'actions/public')) {\n\t\t\t\t\t\t\t\t\t\timg.attr('src', image);\n\t\t\t\t\t\t\t\t\t\t$(actions[i]).addClass('permanent');\n\t\t\t\t\t\t\t\t\t\t$(actions[i]).html('<span> '+t('core', 'Shared')+'</span>').prepend(img);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfor(i = 0; i < files.length; i++) {\n\t\t\t\t\t\t\t\t\tif ($(files[i]).closest('tr').data('type') === 'dir') {\n\t\t\t\t\t\t\t\t\t\t$(files[i]).find('.thumbnail').css('background-image', 'url('+shareFolder+')');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlast = path;\n\t\t\t\t\t\t\tpath = OC.Share.dirname(path);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tupdateIcon:function(itemType, itemSource) {\n\t\tvar shares = false;\n\t\tvar link = false;\n\t\tvar iconClass = '';\n\t\t$.each(OC.Share.itemShares, function(index) {\n\t\t\tif (OC.Share.itemShares[index]) {\n\t\t\t\tif (index == OC.Share.SHARE_TYPE_LINK) {\n\t\t\t\t\tif (OC.Share.itemShares[index] == true) {\n\t\t\t\t\t\tshares = true;\n\t\t\t\t\t\ticonClass = 'icon-public';\n\t\t\t\t\t\tlink = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if (OC.Share.itemShares[index].length > 0) {\n\t\t\t\t\tshares = true;\n\t\t\t\t\ticonClass = 'icon-shared';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (itemType != 'file' && itemType != 'folder') {\n\t\t\t$('a.share[data-item=\"'+itemSource+'\"] .icon').removeClass('icon-shared icon-public').addClass(iconClass);\n\t\t} else {\n\t\t\tvar $tr = $('tr').filterAttr('data-id', String(itemSource));\n\t\t\tif ($tr.length > 0) {\n\t\t\t\t// it might happen that multiple lists exist in the DOM\n\t\t\t\t// with the same id\n\t\t\t\t$tr.each(function() {\n\t\t\t\t\tOC.Share.markFileAsShared($(this), shares, link);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (shares) {\n\t\t\tOC.Share.statuses[itemSource] = OC.Share.statuses[itemSource] || {};\n\t\t\tOC.Share.statuses[itemSource].link = link;\n\t\t} else {\n\t\t\tdelete OC.Share.statuses[itemSource];\n\t\t}\n\t},\n\t/**\n\t * Format a remote address\n\t *\n\t * @param {String} shareWith userid, full remote share, or whatever\n\t * @param {String} shareWithDisplayName\n\t * @param {String} message\n\t * @return {String} HTML code to display\n\t */\n\t_formatRemoteShare: function(shareWith, shareWithDisplayName, message) {\n\t\tvar parts = this._REMOTE_OWNER_REGEXP.exec(shareWith);\n\t\tif (!parts) {\n\t\t\t// display avatar of the user\n\t\t\tvar avatar = '<span class=\"avatar\" data-username=\"' + escapeHTML(shareWith) + '\" title=\"' + message + \" \" + escapeHTML(shareWithDisplayName) + '\"></span>';\n\t\t\tvar hidden = '<span class=\"hidden-visually\">' + message + ' ' + escapeHTML(shareWithDisplayName) + '</span> ';\n\t\t\treturn avatar + hidden;\n\t\t}\n\n\t\tvar userName = parts[1];\n\t\tvar userDomain = parts[3];\n\t\tvar server = parts[4];\n\t\tvar tooltip = message + ' ' + userName;\n\t\tif (userDomain) {\n\t\t\ttooltip += '@' + userDomain;\n\t\t}\n\t\tif (server) {\n\t\t\tif (!userDomain) {\n\t\t\t\tuserDomain = '';\n\t\t\t}\n\t\t\ttooltip += '@' + server;\n\t\t}\n\n\t\tvar html = '<span class=\"remoteAddress\" title=\"' + escapeHTML(tooltip) + '\">';\n\t\thtml += '<span class=\"username\">' + escapeHTML(userName) + '</span>';\n\t\tif (userDomain) {\n\t\t\thtml += '<span class=\"userDomain\">@' + escapeHTML(userDomain) + '</span>';\n\t\t}\n\t\thtml += '</span> ';\n\t\treturn html;\n\t},\n\t/**\n\t * Loop over all recipients in the list and format them using\n\t * all kind of fancy magic.\n\t *\n\t * @param {Object} recipients array of all the recipients\n\t * @return {String[]} modified list of recipients\n\t */\n\t_formatShareList: function(recipients) {\n\t\tvar _parent = this;\n\t\trecipients = _.toArray(recipients);\n\t\trecipients.sort(function(a, b) {\n\t\t\treturn a.shareWithDisplayName.localeCompare(b.shareWithDisplayName);\n\t\t});\n\t\treturn $.map(recipients, function(recipient) {\n\t\t\treturn _parent._formatRemoteShare(recipient.shareWith, recipient.shareWithDisplayName, t('core', 'Shared with'));\n\t\t});\n\t},\n\t/**\n\t * Marks/unmarks a given file as shared by changing its action icon\n\t * and folder icon.\n\t *\n\t * @param $tr file element to mark as shared\n\t * @param hasShares whether shares are available\n\t * @param hasLink whether link share is available\n\t */\n\tmarkFileAsShared: function($tr, hasShares, hasLink) {\n\t\tvar action = $tr.find('.fileactions .action[data-action=\"Share\"]');\n\t\tvar type = $tr.data('type');\n\t\tvar icon = action.find('.icon');\n\t\tvar message, recipients, avatars;\n\t\tvar ownerId = $tr.attr('data-share-owner-id');\n\t\tvar owner = $tr.attr('data-share-owner');\n\t\tvar mountType = $tr.attr('data-mounttype');\n\t\tvar shareFolderIcon;\n\t\tvar iconClass = 'icon-shared';\n\t\taction.removeClass('shared-style');\n\t\t// update folder icon\n\t\tif (type === 'dir' && (hasShares || hasLink || ownerId)) {\n\t\t\tif (typeof mountType !== 'undefined' && mountType !== 'shared-root' && mountType !== 'shared') {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir-' + mountType);\n\t\t\t} else if (hasLink) {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir-public');\n\t\t\t} else {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir-shared');\n\t\t\t}\n\t\t\t$tr.find('.filename .thumbnail').css('background-image', 'url(' + shareFolderIcon + ')');\n\t\t\t$tr.attr('data-icon', shareFolderIcon);\n\t\t} else if (type === 'dir') {\n\t\t\tvar isEncrypted = $tr.attr('data-e2eencrypted');\n\t\t\t// FIXME: duplicate of FileList._createRow logic for external folder,\n\t\t\t// need to refactor the icon logic into a single code path eventually\n\t\t\tif (isEncrypted === 'true') {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir-encrypted');\n\t\t\t\t$tr.attr('data-icon', shareFolderIcon);\n\t\t\t} else if (mountType && mountType.indexOf('external') === 0) {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir-external');\n\t\t\t\t$tr.attr('data-icon', shareFolderIcon);\n\t\t\t} else {\n\t\t\t\tshareFolderIcon = OC.MimeType.getIconUrl('dir');\n\t\t\t\t// back to default\n\t\t\t\t$tr.removeAttr('data-icon');\n\t\t\t}\n\t\t\t$tr.find('.filename .thumbnail').css('background-image', 'url(' + shareFolderIcon + ')');\n\t\t}\n\t\t// update share action text / icon\n\t\tif (hasShares || ownerId) {\n\t\t\trecipients = $tr.data('share-recipient-data');\n\t\t\taction.addClass('shared-style');\n\n\t\t\tavatars = '<span>' + t('core', 'Shared') + '</span>';\n\t\t\t// even if reshared, only show \"Shared by\"\n\t\t\tif (ownerId) {\n\t\t\t\tmessage = t('core', 'Shared by');\n\t\t\t\tavatars = this._formatRemoteShare(ownerId, owner, message);\n\t\t\t} else if (recipients) {\n\t\t\t\tavatars = this._formatShareList(recipients);\n\t\t\t}\n\t\t\taction.html(avatars).prepend(icon);\n\n\t\t\tif (ownerId || recipients) {\n\t\t\t\tvar avatarElement = action.find('.avatar');\n\t\t\t\tavatarElement.each(function () {\n\t\t\t\t\t$(this).avatar($(this).data('username'), 32);\n\t\t\t\t});\n\t\t\t\taction.find('span[title]').tooltip({placement: 'top'});\n\t\t\t}\n\t\t} else {\n\t\t\taction.html('<span class=\"hidden-visually\">' + t('core', 'Shared') + '</span>').prepend(icon);\n\t\t}\n\t\tif (hasLink) {\n\t\t\ticonClass = 'icon-public';\n\t\t}\n\t\ticon.removeClass('icon-shared icon-public').addClass(iconClass);\n\t},\n\tshowDropDown:function(itemType, itemSource, appendTo, link, possiblePermissions, filename) {\n\t\tvar configModel = new OC.Share.ShareConfigModel();\n\t\tvar attributes = {itemType: itemType, itemSource: itemSource, possiblePermissions: possiblePermissions};\n\t\tvar itemModel = new OC.Share.ShareItemModel(attributes, {configModel: configModel});\n\t\tvar dialogView = new OC.Share.ShareDialogView({\n\t\t\tid: 'dropdown',\n\t\t\tmodel: itemModel,\n\t\t\tconfigModel: configModel,\n\t\t\tclassName: 'drop shareDropDown',\n\t\t\tattributes: {\n\t\t\t\t'data-item-source-name': filename,\n\t\t\t\t'data-item-type': itemType,\n\t\t\t\t'data-item-source': itemSource\n\t\t\t}\n\t\t});\n\t\tdialogView.setShowLink(link);\n\t\tvar $dialog = dialogView.render().$el;\n\t\t$dialog.appendTo(appendTo);\n\t\t$dialog.slideDown(OC.menuSpeed, function() {\n\t\t\tOC.Share.droppedDown = true;\n\t\t});\n\t\titemModel.fetch();\n\t},\n\thideDropDown:function(callback) {\n\t\tOC.Share.currentShares = null;\n\t\t$('#dropdown').slideUp(OC.menuSpeed, function() {\n\t\t\tOC.Share.droppedDown = false;\n\t\t\t$('#dropdown').remove();\n\t\t\tif (typeof FileActions !== 'undefined') {\n\t\t\t\t$('tr').removeClass('mouseOver');\n\t\t\t}\n\t\t\tif (callback) {\n\t\t\t\tcallback.call();\n\t\t\t}\n\t\t});\n\t},\n\tdirname:function(path) {\n\t\treturn path.replace(/\\\\/g,'/').replace(/\\/[^\\/]*$/, '');\n\t}\n});\n\n$(document).ready(function() {\n\tif(typeof monthNames != 'undefined'){\n\t\t// min date should always be the next day\n\t\tvar minDate = new Date();\n\t\tminDate.setDate(minDate.getDate()+1);\n\t\t$.datepicker.setDefaults({\n\t\t\tmonthNames: monthNames,\n\t\t\tmonthNamesShort: monthNamesShort,\n\t\t\tdayNames: dayNames,\n\t\t\tdayNamesMin: dayNamesMin,\n\t\t\tdayNamesShort: dayNamesShort,\n\t\t\tfirstDay: firstDay,\n\t\t\tminDate : minDate\n\t\t});\n\t}\n\n\t$(this).click(function(event) {\n\t\tvar target = $(event.target);\n\t\tvar isMatched = !target.is('.drop, .ui-datepicker-next, .ui-datepicker-prev, .ui-icon')\n\t\t\t&& !target.closest('#ui-datepicker-div').length && !target.closest('.ui-autocomplete').length;\n\t\tif (OC.Share && OC.Share.droppedDown && isMatched && $('#dropdown').has(event.target).length === 0) {\n\t\t\tOC.Share.hideDropDown();\n\t\t}\n\t});\n\n\n\n});\n"],"sourceRoot":""}